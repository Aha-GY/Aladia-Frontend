{"version":3,"file":"js/chunk-vendors.d6cec260.js","mappings":"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","sources":["webpack://100ms-preview2/./node_modules/reselect/es/index.js","webpack://100ms-preview2/./node_modules/uuid/dist/esm-browser/rng.js","webpack://100ms-preview2/./node_modules/uuid/dist/esm-browser/regex.js","webpack://100ms-preview2/./node_modules/uuid/dist/esm-browser/validate.js","webpack://100ms-preview2/./node_modules/uuid/dist/esm-browser/stringify.js","webpack://100ms-preview2/./node_modules/uuid/dist/esm-browser/v4.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/utils.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://100ms-preview2/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://100ms-preview2/../src/utils/errors.ts","webpack://100ms-preview2/../src/utils/common.ts","webpack://100ms-preview2/../src/utils/plugins.ts","webpack://100ms-preview2/../src/core/scope.ts","webpack://100ms-preview2/../src/core/finalize.ts","webpack://100ms-preview2/../src/core/proxy.ts","webpack://100ms-preview2/../src/core/immerClass.ts","webpack://100ms-preview2/../src/core/current.ts","webpack://100ms-preview2/../src/immer.ts","webpack://100ms-preview2/../src/utils/env.ts","webpack://100ms-preview2/./node_modules/zustand/esm/shallow.js","webpack://100ms-preview2/./node_modules/zustand/esm/vanilla.js","webpack://100ms-preview2/../package.json","webpack://100ms-preview2/../src/schema/room.ts","webpack://100ms-preview2/../src/schema/schema.ts","webpack://100ms-preview2/../src/schema/message.ts","webpack://100ms-preview2/../src/schema/notification.ts","webpack://100ms-preview2/../src/schema/playlist.ts","webpack://100ms-preview2/../src/selectors/selectorUtils.ts","webpack://100ms-preview2/../src/utils/logger.ts","webpack://100ms-preview2/../src/media/streams/HMSMediaStream.ts","webpack://100ms-preview2/../src/utils/support.ts","webpack://100ms-preview2/../src/analytics/AnalyticsEventDomains.ts","webpack://100ms-preview2/../src/analytics/domain-analytics.ts","webpack://100ms-preview2/../src/error/ErrorCodes.ts","webpack://100ms-preview2/../src/error/HMSException.ts","webpack://100ms-preview2/../src/error/HMSTrackException.ts","webpack://100ms-preview2/../src/media/tracks/HMSTrackExceptionTrackType.ts","webpack://100ms-preview2/../src/signal/jsonrpc/models.ts","webpack://100ms-preview2/../src/error/ErrorFactory.ts","webpack://100ms-preview2/../src/utils/local-storage-polyfill.ts","webpack://100ms-preview2/../src/utils/local-storage.ts","webpack://100ms-preview2/../src/utils/analytics-deviceId.ts","webpack://100ms-preview2/../src/utils/validations.ts","webpack://100ms-preview2/../src/utils/user-agent.ts","webpack://100ms-preview2/../src/analytics/AnalyticsEvent.ts","webpack://100ms-preview2/../src/analytics/AnalyticsEventFactory.ts","webpack://100ms-preview2/../src/utils/json.ts","webpack://100ms-preview2/../src/media/tracks/HMSTrack.ts","webpack://100ms-preview2/../src/media/tracks/HMSAudioTrack.ts","webpack://100ms-preview2/../src/device-manager/DeviceStorage.ts","webpack://100ms-preview2/../src/plugins/audio/HMSAudioPlugin.ts","webpack://100ms-preview2/../src/analytics/MediaPluginsAnalyticsFactory.ts","webpack://100ms-preview2/../src/plugins/audio/AudioPluginsAnalytics.ts","webpack://100ms-preview2/../src/media/settings/constants.ts","webpack://100ms-preview2/../src/interfaces/peer/hms-peer.ts","webpack://100ms-preview2/../src/interfaces/room.ts","webpack://100ms-preview2/../src/interfaces/simulcast-layers.ts","webpack://100ms-preview2/../src/interfaces/track-settings.ts","webpack://100ms-preview2/../src/interfaces/devices.ts","webpack://100ms-preview2/../src/media/settings/HMSAudioTrackSettings.ts","webpack://100ms-preview2/../src/media/settings/HMSVideoTrackSettings.ts","webpack://100ms-preview2/../src/media/settings/HMSTrackSettings.ts","webpack://100ms-preview2/../src/plugins/audio/HMSAudioPluginsManager.ts","webpack://100ms-preview2/../src/error/utils.ts","webpack://100ms-preview2/../src/utils/track.ts","webpack://100ms-preview2/../src/utils/media.ts","webpack://100ms-preview2/../src/utils/queue.ts","webpack://100ms-preview2/../src/utils/timer-utils.ts","webpack://100ms-preview2/../src/utils/track-audio-level-monitor.ts","webpack://100ms-preview2/../src/media/tracks/HMSLocalAudioTrack.ts","webpack://100ms-preview2/../src/sdk/LocalTrackManager.ts","webpack://100ms-preview2/../src/media/tracks/HMSRemoteAudioTrack.ts","webpack://100ms-preview2/../src/media/tracks/HMSVideoTrack.ts","webpack://100ms-preview2/../src/media/tracks/trackUtils.ts","webpack://100ms-preview2/../src/utils/intersection-observer.ts","webpack://100ms-preview2/../src/utils/resize-observer.ts","webpack://100ms-preview2/../src/media/tracks/VideoElementManager.ts","webpack://100ms-preview2/../src/plugins/video/HMSVideoPlugin.ts","webpack://100ms-preview2/../src/utils/math.ts","webpack://100ms-preview2/../src/plugins/video/VideoPluginsAnalytics.ts","webpack://100ms-preview2/../src/plugins/video/HMSVideoPluginsManager.ts","webpack://100ms-preview2/../src/plugins/video/HMSMediaStreamPluginsManager.ts","webpack://100ms-preview2/../src/analytics/AnalyticsTimer.ts","webpack://100ms-preview2/../src/media/tracks/HMSLocalVideoTrack.ts","webpack://100ms-preview2/../src/utils/constants.ts","webpack://100ms-preview2/../src/media/tracks/HMSRemoteVideoTrack.ts","webpack://100ms-preview2/../src/media/streams/HMSLocalStream.ts","webpack://100ms-preview2/../src/media/streams/HMSRemoteStream.ts","webpack://100ms-preview2/../src/rtc-stats/utils.ts","webpack://100ms-preview2/../src/rtc-stats/HMSWebrtcStats.ts","webpack://100ms-preview2/../src/rtc-stats/HMSWebrtcInternals.ts","webpack://100ms-preview2/../src/sdk/models/peer/HMSPeer.ts","webpack://100ms-preview2/../src/utils/id-factory.ts","webpack://100ms-preview2/../src/sdk/models/peer/HMSLocalPeer.ts","webpack://100ms-preview2/../src/sdk/models/peer/HMSRemotePeer.ts","webpack://100ms-preview2/../src/notification-manager/managers/utils.ts","webpack://100ms-preview2/../src/sdk/HMSPeerListIterator.ts","webpack://100ms-preview2/../src/playlist-manager/AudioContextManager.ts","webpack://100ms-preview2/../src/utils/typed-event-emitter.ts","webpack://100ms-preview2/../src/playlist-manager/PlaylistAudioManager.ts","webpack://100ms-preview2/../src/playlist-manager/PlaylistVideoManager.ts","webpack://100ms-preview2/../src/playlist-manager/PlaylistManager.ts","webpack://100ms-preview2/../src/selectors/selectors.ts","webpack://100ms-preview2/../src/selectors/playlistselectors.ts","webpack://100ms-preview2/../src/selectors/common.ts","webpack://100ms-preview2/../src/common/ui-logger.ts","webpack://100ms-preview2/../src/selectors/selectorsByID.ts","webpack://100ms-preview2/../src/selectors/derivedSelectors.ts","webpack://100ms-preview2/../src/reactive-store/common/mapping.ts","webpack://100ms-preview2/../src/selectors/selectorsByReference.ts","webpack://100ms-preview2/../src/reactive-store/HMSNotifications.ts","webpack://100ms-preview2/../src/reactive-store/sdkUtils/ActionBatcher.ts","webpack://100ms-preview2/../src/reactive-store/sdkUtils/sdkUtils.ts","webpack://100ms-preview2/../src/reactive-store/sdkUtils/storeMergeUtils.ts","webpack://100ms-preview2/../src/diagnostics/ConnectivityCheck.ts","webpack://100ms-preview2/../src/reactive-store/adapter.ts","webpack://100ms-preview2/../src/reactive-store/HMSPlaylist.ts","webpack://100ms-preview2/../src/reactive-store/HMSSessionStore.ts","webpack://100ms-preview2/../src/controller/beam/BeamSpeakerLabelsLogger.ts","webpack://100ms-preview2/../src/diagnostics/constants.ts","webpack://100ms-preview2/../src/diagnostics/CQSCalculator.ts","webpack://100ms-preview2/../src/diagnostics/DiagnosticsStatsCollector.ts","webpack://100ms-preview2/../src/diagnostics/interfaces.ts","webpack://100ms-preview2/../src/sdk/models/HMSRoom.ts","webpack://100ms-preview2/../src/utils/fetch.ts","webpack://100ms-preview2/../src/diagnostics/HMSDiagnostics.ts","webpack://100ms-preview2/../src/reactive-store/HMSSDKActions.ts","webpack://100ms-preview2/../src/common/storeName.ts","webpack://100ms-preview2/../src/sdk/NetworkTestManager.ts","webpack://100ms-preview2/../src/sdk/RoleChangeManager.ts","webpack://100ms-preview2/../src/analytics/HTTPAnalyticsTransport.ts","webpack://100ms-preview2/../src/notification-manager/HMSNotifications.ts","webpack://100ms-preview2/../src/sdk/store/Store.ts","webpack://100ms-preview2/../src/sdk/WakeLockManager.ts","webpack://100ms-preview2/../src/analytics/AnalyticsEventsService.ts","webpack://100ms-preview2/../src/audio-sink-manager/AudioSinkManager.ts","webpack://100ms-preview2/../src/common/PluginUsageTracker.ts","webpack://100ms-preview2/../src/device-manager/DeviceManager.ts","webpack://100ms-preview2/../src/device-manager/AudioOutputManager.ts","webpack://100ms-preview2/../src/end-call-feedback/feedback.ts","webpack://100ms-preview2/../src/events/HMSInternalEvent.ts","webpack://100ms-preview2/../src/events/EventBus.ts","webpack://100ms-preview2/../src/notification-manager/managers/ActiveSpeakerManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/BroadcastManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/ConnectionQualityManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/TrackManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/onDemandTrackManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/PeerListManager.ts","webpack://100ms-preview2/../src/utils/date.ts","webpack://100ms-preview2/../src/notification-manager/managers/PeerManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/PolicyChangeManager.ts","webpack://100ms-preview2/../src/signal/init/models.ts","webpack://100ms-preview2/../src/utils/whiteboard.ts","webpack://100ms-preview2/../src/session-store/interactivity-center/HMSWhiteboardCenter.ts","webpack://100ms-preview2/../src/session-store/interactivity-center/HMSInteractivityCenter.ts","webpack://100ms-preview2/../src/notification-manager/managers/PollsManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/RequestManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/RoomUpdateManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/SessionMetadataManager.ts","webpack://100ms-preview2/../src/notification-manager/managers/WhiteboardManager.ts","webpack://100ms-preview2/../src/notification-manager/NotificationManager.ts","webpack://100ms-preview2/../src/session-store/index.ts","webpack://100ms-preview2/../src/transport/models/JoinParameters.ts","webpack://100ms-preview2/../src/transport/models/TransportFailureCategory.ts","webpack://100ms-preview2/../src/transport/models/TransportState.ts","webpack://100ms-preview2/../src/utils/promise.ts","webpack://100ms-preview2/../src/transport/RetryScheduler.ts","webpack://100ms-preview2/../src/analytics/signal-transport/LocalStoageEvents.ts","webpack://100ms-preview2/../src/analytics/AnalyticsTransport.ts","webpack://100ms-preview2/../src/analytics/signal-transport/SignalAnalyticsTransport.ts","webpack://100ms-preview2/../src/analytics/stats/BaseStatsAnalytics.ts","webpack://100ms-preview2/../src/analytics/stats/PublishStatsAnalytics.ts","webpack://100ms-preview2/../src/analytics/stats/SubscribeStatsAnalytics.ts","webpack://100ms-preview2/../src/connection/model.ts","webpack://100ms-preview2/../src/utils/session-description.ts","webpack://100ms-preview2/../src/connection/HMSConnection.ts","webpack://100ms-preview2/../src/connection/publish/publishConnection.ts","webpack://100ms-preview2/../src/connection/HMSDataChannel.ts","webpack://100ms-preview2/../src/connection/subscribe/subscribeConnection.ts","webpack://100ms-preview2/../src/utils/ice-server-config.ts","webpack://100ms-preview2/../src/signal/init/index.ts","webpack://100ms-preview2/../src/signal/jsonrpc/index.ts","webpack://100ms-preview2/../src/utils/network-info.ts","webpack://100ms-preview2/../src/transport/index.ts","webpack://100ms-preview2/../src/utils/jwt.ts","webpack://100ms-preview2/../src/sdk/index.ts","webpack://100ms-preview2/../src/reactive-store/HMSReactiveStore.ts","webpack://100ms-preview2/../src/webrtc-stats/webrtc-stats-store.ts","webpack://100ms-preview2/../src/webrtc-stats/HMSStats.ts","webpack://100ms-preview2/../src/webrtc-stats/selectors.ts","webpack://100ms-preview2/./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","webpack://100ms-preview2/./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js","webpack://100ms-preview2/./node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js","webpack://100ms-preview2/./node_modules/@vue/shared/dist/shared.esm-bundler.js","webpack://100ms-preview2/./node_modules/eventemitter2/lib/eventemitter2.js","webpack://100ms-preview2/./node_modules/lodash.isequal/index.js","webpack://100ms-preview2/./node_modules/sdp-transform/lib/grammar.js","webpack://100ms-preview2/./node_modules/sdp-transform/lib/index.js","webpack://100ms-preview2/./node_modules/sdp-transform/lib/parser.js","webpack://100ms-preview2/./node_modules/sdp-transform/lib/writer.js","webpack://100ms-preview2/./node_modules/sdp/sdp.js","webpack://100ms-preview2/./node_modules/ua-parser-js/src/ua-parser.js","webpack://100ms-preview2/./node_modules/vue-loader/dist/exportHelper.js","webpack://100ms-preview2/./node_modules/@vue/devtools-api/lib/esm/env.js","webpack://100ms-preview2/./node_modules/@vue/devtools-api/lib/esm/const.js","webpack://100ms-preview2/./node_modules/@vue/devtools-api/lib/esm/time.js","webpack://100ms-preview2/./node_modules/@vue/devtools-api/lib/esm/proxy.js","webpack://100ms-preview2/./node_modules/@vue/devtools-api/lib/esm/index.js","webpack://100ms-preview2/./node_modules/vuex/dist/vuex.esm-bundler.js","webpack://100ms-preview2/./node_modules/core-js/internals/a-callable.js","webpack://100ms-preview2/./node_modules/core-js/internals/a-possible-prototype.js","webpack://100ms-preview2/./node_modules/core-js/internals/a-set.js","webpack://100ms-preview2/./node_modules/core-js/internals/add-to-unscopables.js","webpack://100ms-preview2/./node_modules/core-js/internals/an-instance.js","webpack://100ms-preview2/./node_modules/core-js/internals/an-object.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-buffer-basic-detection.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-buffer-byte-length.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-buffer-is-detached.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-buffer-not-detached.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-buffer-transfer.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-buffer-view-core.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-from-constructor-and-list.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-includes.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-set-length.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-slice.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-to-reversed.js","webpack://100ms-preview2/./node_modules/core-js/internals/array-with.js","webpack://100ms-preview2/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://100ms-preview2/./node_modules/core-js/internals/classof-raw.js","webpack://100ms-preview2/./node_modules/core-js/internals/classof.js","webpack://100ms-preview2/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://100ms-preview2/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://100ms-preview2/./node_modules/core-js/internals/create-iter-result-object.js","webpack://100ms-preview2/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://100ms-preview2/./node_modules/core-js/internals/create-property-descriptor.js","webpack://100ms-preview2/./node_modules/core-js/internals/create-property.js","webpack://100ms-preview2/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://100ms-preview2/./node_modules/core-js/internals/define-built-in.js","webpack://100ms-preview2/./node_modules/core-js/internals/define-built-ins.js","webpack://100ms-preview2/./node_modules/core-js/internals/define-global-property.js","webpack://100ms-preview2/./node_modules/core-js/internals/descriptors.js","webpack://100ms-preview2/./node_modules/core-js/internals/detach-transferable.js","webpack://100ms-preview2/./node_modules/core-js/internals/document-create-element.js","webpack://100ms-preview2/./node_modules/core-js/internals/does-not-exceed-safe-integer.js","webpack://100ms-preview2/./node_modules/core-js/internals/dom-exception-constants.js","webpack://100ms-preview2/./node_modules/core-js/internals/enum-bug-keys.js","webpack://100ms-preview2/./node_modules/core-js/internals/environment-is-ios.js","webpack://100ms-preview2/./node_modules/core-js/internals/environment-is-node.js","webpack://100ms-preview2/./node_modules/core-js/internals/environment-user-agent.js","webpack://100ms-preview2/./node_modules/core-js/internals/environment-v8-version.js","webpack://100ms-preview2/./node_modules/core-js/internals/environment.js","webpack://100ms-preview2/./node_modules/core-js/internals/error-stack-clear.js","webpack://100ms-preview2/./node_modules/core-js/internals/export.js","webpack://100ms-preview2/./node_modules/core-js/internals/fails.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-apply.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-bind-context.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-bind-native.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-call.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-name.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-uncurry-this-accessor.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-uncurry-this-clause.js","webpack://100ms-preview2/./node_modules/core-js/internals/function-uncurry-this.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-built-in-node-module.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-built-in-prototype-method.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-built-in.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-iterator-direct.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-iterator-method.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-iterator.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-method.js","webpack://100ms-preview2/./node_modules/core-js/internals/get-set-record.js","webpack://100ms-preview2/./node_modules/core-js/internals/global-this.js","webpack://100ms-preview2/./node_modules/core-js/internals/has-own-property.js","webpack://100ms-preview2/./node_modules/core-js/internals/hidden-keys.js","webpack://100ms-preview2/./node_modules/core-js/internals/html.js","webpack://100ms-preview2/./node_modules/core-js/internals/ie8-dom-define.js","webpack://100ms-preview2/./node_modules/core-js/internals/indexed-object.js","webpack://100ms-preview2/./node_modules/core-js/internals/inherit-if-required.js","webpack://100ms-preview2/./node_modules/core-js/internals/inspect-source.js","webpack://100ms-preview2/./node_modules/core-js/internals/internal-state.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-array.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-big-int-array.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-callable.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-forced.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-null-or-undefined.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-object.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-possible-prototype.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-pure.js","webpack://100ms-preview2/./node_modules/core-js/internals/is-symbol.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterate-simple.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterate.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterator-close.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterator-create-proxy.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterator-map.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterators-core.js","webpack://100ms-preview2/./node_modules/core-js/internals/iterators.js","webpack://100ms-preview2/./node_modules/core-js/internals/length-of-array-like.js","webpack://100ms-preview2/./node_modules/core-js/internals/make-built-in.js","webpack://100ms-preview2/./node_modules/core-js/internals/math-trunc.js","webpack://100ms-preview2/./node_modules/core-js/internals/normalize-string-argument.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-create.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-define-properties.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-define-property.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-is-prototype-of.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-keys-internal.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-keys.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://100ms-preview2/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://100ms-preview2/./node_modules/core-js/internals/ordinary-to-primitive.js","webpack://100ms-preview2/./node_modules/core-js/internals/own-keys.js","webpack://100ms-preview2/./node_modules/core-js/internals/regexp-flags.js","webpack://100ms-preview2/./node_modules/core-js/internals/require-object-coercible.js","webpack://100ms-preview2/./node_modules/core-js/internals/schedulers-fix.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-clone.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-difference.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-helpers.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-intersection.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-is-disjoint-from.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-is-subset-of.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-is-superset-of.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-iterate.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-method-accept-set-like.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-size.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-symmetric-difference.js","webpack://100ms-preview2/./node_modules/core-js/internals/set-union.js","webpack://100ms-preview2/./node_modules/core-js/internals/shared-key.js","webpack://100ms-preview2/./node_modules/core-js/internals/shared-store.js","webpack://100ms-preview2/./node_modules/core-js/internals/shared.js","webpack://100ms-preview2/./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack://100ms-preview2/./node_modules/core-js/internals/symbol-constructor-detection.js","webpack://100ms-preview2/./node_modules/core-js/internals/task.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-absolute-index.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-big-int.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-index.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-indexed-object.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-integer-or-infinity.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-length.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-object.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-primitive.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-property-key.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-string-tag-support.js","webpack://100ms-preview2/./node_modules/core-js/internals/to-string.js","webpack://100ms-preview2/./node_modules/core-js/internals/try-to-string.js","webpack://100ms-preview2/./node_modules/core-js/internals/uid.js","webpack://100ms-preview2/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://100ms-preview2/./node_modules/core-js/internals/v8-prototype-define-bug.js","webpack://100ms-preview2/./node_modules/core-js/internals/validate-arguments-length.js","webpack://100ms-preview2/./node_modules/core-js/internals/weak-map-basic-detection.js","webpack://100ms-preview2/./node_modules/core-js/internals/well-known-symbol.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array-buffer.detached.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array-buffer.transfer.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array.push.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array.to-reversed.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array.to-sorted.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.array.to-spliced.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.constructor.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.every.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.filter.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.find.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.for-each.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.map.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.reduce.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.iterator.some.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.regexp.flags.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.difference.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.intersection.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.is-disjoint-from.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.is-subset-of.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.is-superset-of.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.symmetric-difference.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.set.union.v2.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.typed-array.to-reversed.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.typed-array.to-sorted.js","webpack://100ms-preview2/./node_modules/core-js/modules/es.typed-array.with.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.constructor.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.every.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.filter.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.find.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.for-each.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.map.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.reduce.js","webpack://100ms-preview2/./node_modules/core-js/modules/esnext.iterator.some.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.clear-immediate.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.dom-exception.stack.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.immediate.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.set-immediate.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.url-search-params.delete.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.url-search-params.has.js","webpack://100ms-preview2/./node_modules/core-js/modules/web.url-search-params.size.js","webpack://100ms-preview2/./node_modules/vue-router/dist/vue-router.mjs"],"sourcesContent":["function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n          this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n    'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator ||\n      !window.navigator.userAgent) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n      /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n      /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n      /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n            .then(devices => {\n              devices = devices.filter(d => d.kind === 'videoinput');\n              let dev = devices.find(d => matches.some(match =>\n                d.label.toLowerCase().includes(match)));\n              if (!dev && devices.length && matches.includes('back')) {\n                dev = devices[devices.length - 1]; // more likely the back cam\n              }\n              if (dev) {\n                constraints.video.deviceId = face.exact\n                  ? {exact: dev.deviceId}\n                  : {ideal: dev.deviceId};\n              }\n              constraints.video = constraintsToChrome_(constraints.video);\n              logging('chrome: ' + JSON.stringify(constraints));\n              return func(constraints);\n            });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n    .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n        externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n        internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n        .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n    window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n    'localDescription', {\n      get() {\n        const description = origLocalDescription.get.apply(this);\n        if (description.type === '') {\n          return description;\n        }\n        return replaceInternalStreamId(this, description);\n      }\n    });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n      'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        const methodObj = {[method]() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n            window.RTCIceCandidate :\n            window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        }};\n        window.RTCPeerConnection.prototype[method] = methodObj[method];\n      });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n      Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        // WebIDL input coercion and validation\n        let sendEncodings = arguments[1] && arguments[1].sendEncodings;\n        if (sendEncodings === undefined) {\n          sendEncodings = [];\n        }\n        sendEncodings = [...sendEncodings];\n        const shouldPerformCheck = sendEncodings.length > 0;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = sendEncodings;\n            sender.sendEncodings = sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateOffer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n        .then(() => {\n          return origCreateAnswer.apply(this, arguments);\n        })\n        .finally(() => {\n          this.setParametersPromises = [];\n        });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (server.urls === undefined && server.url) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio', {direction: 'recvonly'});\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video', {direction: 'recvonly'});\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substring(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      for (const key in parsedCandidate) {\n        if (!(key in nativeCandidate)) {\n          Object.defineProperty(nativeCandidate, key,\n            {value: parsedCandidate[key]});\n        }\n      }\n\n      // Override serializer to not serialize the extra attributes.\n      nativeCandidate.toJSON = function toJSON() {\n        return {\n          candidate: nativeCandidate.candidate,\n          sdpMid: nativeCandidate.sdpMid,\n          sdpMLineIndex: nativeCandidate.sdpMLineIndex,\n          usernameFragment: nativeCandidate.usernameFragment,\n        };\n      };\n      return nativeCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimRTCIceCandidateRelayProtocol(window) {\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'relayProtocol' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      const parsedCandidate = SDPUtils.parseCandidate(e.candidate.candidate);\n      if (parsedCandidate.type === 'relay') {\n        // This is a libwebrtc-specific mapping of local type preference\n        // to relayProtocol.\n        e.candidate.relayProtocol = {\n          0: 'tls',\n          1: 'tcp',\n          2: 'udp',\n        }[parsedCandidate.priority >> 24];\n      }\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substring(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n          this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n          this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n\n// Note: Make sure to call this ahead of APIs that modify\n// setLocalDescription.length\nexport function shimParameterlessSetLocalDescription(window, browserDetails) {\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  if (!nativeSetLocalDescription || nativeSetLocalDescription.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      let desc = arguments[0] || {};\n      if (typeof desc !== 'object' || (desc.type && desc.sdp)) {\n        return nativeSetLocalDescription.apply(this, arguments);\n      }\n      // The remaining steps should technically happen when SLD comes off the\n      // RTCPeerConnection's operations chain (not ahead of going on it), but\n      // this is too difficult to shim. Instead, this shim only covers the\n      // common case where the operations chain is empty. This is imperfect, but\n      // should cover many cases. Rationale: Even if we can't reduce the glare\n      // window to zero on imperfect implementations, there's value in tapping\n      // into the perfect negotiation pattern that several browsers support.\n      desc = {type: desc.type, sdp: desc.sdp};\n      if (!desc.type) {\n        switch (this.signalingState) {\n          case 'stable':\n          case 'have-local-offer':\n          case 'have-remote-pranswer':\n            desc.type = 'offer';\n            break;\n          default:\n            desc.type = 'answer';\n            break;\n        }\n      }\n      if (desc.sdp || (desc.type !== 'offer' && desc.type !== 'answer')) {\n        return nativeSetLocalDescription.apply(this, [desc]);\n      }\n      const func = desc.type === 'offer' ? this.createOffer : this.createAnswer;\n      return func.apply(this)\n        .then(d => nativeSetLocalDescription.apply(this, [d]));\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n// Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\nimport * as sdp from 'sdp';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings,\n    // Expose sdp as a convenience. For production apps include directly.\n    sdp,\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n      commonShim.shimParameterlessSetLocalDescription(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimRTCIceCandidateRelayProtocol(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","const errors = {\n\t0: \"Illegal state\",\n\t1: \"Immer drafts cannot have computed properties\",\n\t2: \"This object has been frozen and should not be mutated\",\n\t3(data: any) {\n\t\treturn (\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\tdata\n\t\t)\n\t},\n\t4: \"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",\n\t5: \"Immer forbids circular references\",\n\t6: \"The first or second argument to `produce` must be a function\",\n\t7: \"The third argument to `produce` must be a function or undefined\",\n\t8: \"First argument to `createDraft` must be a plain object, an array, or an immerable object\",\n\t9: \"First argument to `finishDraft` must be a draft returned by `createDraft`\",\n\t10: \"The given draft is already finalized\",\n\t11: \"Object.defineProperty() cannot be used on an Immer draft\",\n\t12: \"Object.setPrototypeOf() cannot be used on an Immer draft\",\n\t13: \"Immer only supports deleting array indices\",\n\t14: \"Immer only supports setting array indices and the 'length' property\",\n\t15(path: string) {\n\t\treturn \"Cannot apply patch, path doesn't resolve: \" + path\n\t},\n\t16: 'Sets cannot have \"replace\" patches.',\n\t17(op: string) {\n\t\treturn \"Unsupported patch operation: \" + op\n\t},\n\t18(plugin: string) {\n\t\treturn `The plugin for '${plugin}' has not been loaded into Immer. To enable the plugin, import and call \\`enable${plugin}()\\` when initializing your application.`\n\t},\n\t20: \"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",\n\t21(thing: string) {\n\t\treturn `produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${thing}'`\n\t},\n\t22(thing: string) {\n\t\treturn `'current' expects a draft, got: ${thing}`\n\t},\n\t23(thing: string) {\n\t\treturn `'original' expects a draft, got: ${thing}`\n\t},\n\t24: \"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"\n} as const\n\nexport function die(error: keyof typeof errors, ...args: any[]): never {\n\tif (__DEV__) {\n\t\tconst e = errors[error]\n\t\tconst msg = !e\n\t\t\t? \"unknown error nr: \" + error\n\t\t\t: typeof e === \"function\"\n\t\t\t? e.apply(null, args as any)\n\t\t\t: e\n\t\tthrow new Error(`[Immer] ${msg}`)\n\t}\n\tthrow new Error(\n\t\t`[Immer] minified error nr: ${error}${\n\t\t\targs.length ? \" \" + args.map(s => `'${s}'`).join(\",\") : \"\"\n\t\t}. Find the full error at: https://bit.ly/3cXEKWf`\n\t)\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\thasMap,\n\tArchtype,\n\tdie\n} from \"../internal\"\n\n/** Returns true if the given value is an Immer draft */\n/*#__PURE__*/\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\n/*#__PURE__*/\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor?.[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\nconst objectCtorString = Object.prototype.constructor.toString()\n/*#__PURE__*/\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\tif (proto === null) {\n\t\treturn true\n\t}\n\tconst Ctor =\n\t\tObject.hasOwnProperty.call(proto, \"constructor\") && proto.constructor\n\n\tif (Ctor === Object) return true\n\n\treturn (\n\t\ttypeof Ctor == \"function\" &&\n\t\tFunction.toString.call(Ctor) === objectCtorString\n\t)\n}\n\n/** Get the underlying object that is represented by the given draft */\n/*#__PURE__*/\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (!isDraft(value)) die(23, value)\n\treturn value[DRAFT_STATE].base_\n}\n\n/*#__PURE__*/\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport const getOwnPropertyDescriptors =\n\tObject.getOwnPropertyDescriptors ||\n\tfunction getOwnPropertyDescriptors(target: any) {\n\t\t// Polyfill needed for Hermes and IE, see https://github.com/facebook/hermes/issues/274\n\t\tconst res: any = {}\n\t\townKeys(target).forEach(key => {\n\t\t\tres[key] = Object.getOwnPropertyDescriptor(target, key)\n\t\t})\n\t\treturn res\n\t}\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void,\n\tenumerableOnly?: boolean\n): void\nexport function each(obj: any, iter: any, enumerableOnly = false) {\n\tif (getArchtype(obj) === Archtype.Object) {\n\t\t;(enumerableOnly ? Object.keys : ownKeys)(obj).forEach(key => {\n\t\t\tif (!enumerableOnly || typeof key !== \"symbol\") iter(key, obj[key], obj)\n\t\t})\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\n/*#__PURE__*/\nexport function getArchtype(thing: any): Archtype {\n\t/* istanbul ignore next */\n\tconst state: undefined | ImmerState = thing[DRAFT_STATE]\n\treturn state\n\t\t? state.type_ > 3\n\t\t\t? state.type_ - 4 // cause Object and Array map back from 4 and 5\n\t\t\t: (state.type_ as any) // others are the same\n\t\t: Array.isArray(thing)\n\t\t? Archtype.Array\n\t\t: isMap(thing)\n\t\t? Archtype.Map\n\t\t: isSet(thing)\n\t\t? Archtype.Set\n\t\t: Archtype.Object\n}\n\n/*#__PURE__*/\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === Archtype.Map\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\n/*#__PURE__*/\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === Archtype.Map ? thing.get(prop) : thing[prop]\n}\n\n/*#__PURE__*/\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tconst t = getArchtype(thing)\n\tif (t === Archtype.Map) thing.set(propOrOldValue, value)\n\telse if (t === Archtype.Set) {\n\t\tthing.add(value)\n\t} else thing[propOrOldValue] = value\n}\n\n/*#__PURE__*/\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\n/*#__PURE__*/\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\n/*#__PURE__*/\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n/*#__PURE__*/\nexport function latest(state: ImmerState): any {\n\treturn state.copy_ || state.base_\n}\n\n/*#__PURE__*/\nexport function shallowCopy(base: any) {\n\tif (Array.isArray(base)) return Array.prototype.slice.call(base)\n\tconst descriptors = getOwnPropertyDescriptors(base)\n\tdelete descriptors[DRAFT_STATE as any]\n\tlet keys = ownKeys(descriptors)\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tconst key: any = keys[i]\n\t\tconst desc = descriptors[key]\n\t\tif (desc.writable === false) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable = true\n\t\t}\n\t\t// like object.assign, we will read any _own_, get/set accessors. This helps in dealing\n\t\t// with libraries that trap values, like mobx or vue\n\t\t// unlike object.assign, non-enumerables will be copied as well\n\t\tif (desc.get || desc.set)\n\t\t\tdescriptors[key] = {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true, // could live with !!desc.set as well here...\n\t\t\t\tenumerable: desc.enumerable,\n\t\t\t\tvalue: base[key]\n\t\t\t}\n\t}\n\treturn Object.create(Object.getPrototypeOf(base), descriptors)\n}\n\n/**\n * Freezes draftable objects. Returns the original object.\n * By default freezes shallowly, but if the second argument is `true` it will freeze recursively.\n *\n * @param obj\n * @param deep\n */\nexport function freeze<T>(obj: T, deep?: boolean): T\nexport function freeze<T>(obj: any, deep: boolean = false): T {\n\tif (isFrozen(obj) || isDraft(obj) || !isDraftable(obj)) return obj\n\tif (getArchtype(obj) > 1 /* Map or Set */) {\n\t\tobj.set = obj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (key, value) => freeze(value, true), true)\n\treturn obj\n}\n\nfunction dontMutateFrozenCollections() {\n\tdie(2)\n}\n\nexport function isFrozen(obj: any): boolean {\n\tif (obj == null || typeof obj !== \"object\") return true\n\t// See #600, IE dies on non-objects in Object.isFrozen\n\treturn Object.isFrozen(obj)\n}\n","import {\n\tImmerState,\n\tPatch,\n\tImmerScope,\n\tDrafted,\n\tAnyObject,\n\tImmerBaseState,\n\tAnyMap,\n\tAnySet,\n\tProxyType,\n\tdie\n} from \"../internal\"\n\n/** Plugin utilities */\nconst plugins: {\n\tPatches?: {\n\t\tgeneratePatches_(\n\t\t\tstate: ImmerState,\n\t\t\tbasePath: PatchPath,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tgenerateReplacementPatches_(\n\t\t\tbase: any,\n\t\t\treplacement: any,\n\t\t\tpatches: Patch[],\n\t\t\tinversePatches: Patch[]\n\t\t): void\n\t\tapplyPatches_<T>(draft: T, patches: Patch[]): T\n\t}\n\tES5?: {\n\t\twillFinalizeES5_(scope: ImmerScope, result: any, isReplaced: boolean): void\n\t\tcreateES5Proxy_<T>(\n\t\t\tbase: T,\n\t\t\tparent?: ImmerState\n\t\t): Drafted<T, ES5ObjectState | ES5ArrayState>\n\t\thasChanges_(state: ES5ArrayState | ES5ObjectState): boolean\n\t}\n\tMapSet?: {\n\t\tproxyMap_<T extends AnyMap>(target: T, parent?: ImmerState): T\n\t\tproxySet_<T extends AnySet>(target: T, parent?: ImmerState): T\n\t}\n} = {}\n\ntype Plugins = typeof plugins\n\nexport function getPlugin<K extends keyof Plugins>(\n\tpluginKey: K\n): Exclude<Plugins[K], undefined> {\n\tconst plugin = plugins[pluginKey]\n\tif (!plugin) {\n\t\tdie(18, pluginKey)\n\t}\n\t// @ts-ignore\n\treturn plugin\n}\n\nexport function loadPlugin<K extends keyof Plugins>(\n\tpluginKey: K,\n\timplementation: Plugins[K]\n): void {\n\tif (!plugins[pluginKey]) plugins[pluginKey] = implementation\n}\n\n/** ES5 Plugin */\n\ninterface ES5BaseState extends ImmerBaseState {\n\tassigned_: {[key: string]: any}\n\tparent_?: ImmerState\n\trevoked_: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype_: ProxyType.ES5Object\n\tdraft_: Drafted<AnyObject, ES5ObjectState>\n\tbase_: AnyObject\n\tcopy_: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype_: ProxyType.ES5Array\n\tdraft_: Drafted<AnyObject, ES5ArrayState>\n\tbase_: any\n\tcopy_: any\n}\n\n/** Map / Set plugin */\n\nexport interface MapState extends ImmerBaseState {\n\ttype_: ProxyType.Map\n\tcopy_: AnyMap | undefined\n\tassigned_: Map<any, boolean> | undefined\n\tbase_: AnyMap\n\trevoked_: boolean\n\tdraft_: Drafted<AnyMap, MapState>\n}\n\nexport interface SetState extends ImmerBaseState {\n\ttype_: ProxyType.Set\n\tcopy_: AnySet | undefined\n\tbase_: AnySet\n\tdrafts_: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked_: boolean\n\tdraft_: Drafted<AnySet, SetState>\n}\n\n/** Patches plugin */\n\nexport type PatchPath = (string | number)[]\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tImmer,\n\tDRAFT_STATE,\n\tImmerState,\n\tProxyType,\n\tgetPlugin\n} from \"../internal\"\nimport {die} from \"../utils/errors\"\n\n/** Each scope represents a `produce` call. */\n\nexport interface ImmerScope {\n\tpatches_?: Patch[]\n\tinversePatches_?: Patch[]\n\tcanAutoFreeze_: boolean\n\tdrafts_: any[]\n\tparent_?: ImmerScope\n\tpatchListener_?: PatchListener\n\timmer_: Immer\n\tunfinalizedDrafts_: number\n}\n\nlet currentScope: ImmerScope | undefined\n\nexport function getCurrentScope() {\n\tif (__DEV__ && !currentScope) die(0)\n\treturn currentScope!\n}\n\nfunction createScope(\n\tparent_: ImmerScope | undefined,\n\timmer_: Immer\n): ImmerScope {\n\treturn {\n\t\tdrafts_: [],\n\t\tparent_,\n\t\timmer_,\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tcanAutoFreeze_: true,\n\t\tunfinalizedDrafts_: 0\n\t}\n}\n\nexport function usePatchesInScope(\n\tscope: ImmerScope,\n\tpatchListener?: PatchListener\n) {\n\tif (patchListener) {\n\t\tgetPlugin(\"Patches\") // assert we have the plugin\n\t\tscope.patches_ = []\n\t\tscope.inversePatches_ = []\n\t\tscope.patchListener_ = patchListener\n\t}\n}\n\nexport function revokeScope(scope: ImmerScope) {\n\tleaveScope(scope)\n\tscope.drafts_.forEach(revokeDraft)\n\t// @ts-ignore\n\tscope.drafts_ = null\n}\n\nexport function leaveScope(scope: ImmerScope) {\n\tif (scope === currentScope) {\n\t\tcurrentScope = scope.parent_\n\t}\n}\n\nexport function enterScope(immer: Immer) {\n\treturn (currentScope = createScope(currentScope, immer))\n}\n\nfunction revokeDraft(draft: Drafted) {\n\tconst state: ImmerState = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type_ === ProxyType.ProxyObject ||\n\t\tstate.type_ === ProxyType.ProxyArray\n\t)\n\t\tstate.revoke_()\n\telse state.revoked_ = true\n}\n","import {\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tPatchPath,\n\teach,\n\thas,\n\tfreeze,\n\tImmerState,\n\tisDraft,\n\tSetState,\n\tset,\n\tProxyType,\n\tgetPlugin,\n\tdie,\n\trevokeScope,\n\tisFrozen,\n\tshallowCopy\n} from \"../internal\"\n\nexport function processResult(result: any, scope: ImmerScope) {\n\tscope.unfinalizedDrafts_ = scope.drafts_.length\n\tconst baseDraft = scope.drafts_![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\tif (!scope.immer_.useProxies_)\n\t\tgetPlugin(\"ES5\").willFinalizeES5_(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified_) {\n\t\t\trevokeScope(scope)\n\t\t\tdie(4)\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(scope, result)\n\t\t\tif (!scope.parent_) maybeFreeze(scope, result)\n\t\t}\n\t\tif (scope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(\n\t\t\t\tbaseDraft[DRAFT_STATE].base_,\n\t\t\t\tresult,\n\t\t\t\tscope.patches_,\n\t\t\t\tscope.inversePatches_!\n\t\t\t)\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(scope, baseDraft, [])\n\t}\n\trevokeScope(scope)\n\tif (scope.patches_) {\n\t\tscope.patchListener_!(scope.patches_, scope.inversePatches_!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(rootScope: ImmerScope, value: any, path?: PatchPath) {\n\t// Don't recurse in tho recursive data structures\n\tif (isFrozen(value)) return value\n\n\tconst state: ImmerState = value[DRAFT_STATE]\n\t// A plain object, might need freezing, might contain drafts\n\tif (!state) {\n\t\teach(\n\t\t\tvalue,\n\t\t\t(key, childValue) =>\n\t\t\t\tfinalizeProperty(rootScope, state, value, key, childValue, path),\n\t\t\ttrue // See #590, don't recurse into non-enumerable of non drafted objects\n\t\t)\n\t\treturn value\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope_ !== rootScope) return value\n\t// Unmodified draft, return the (frozen) original\n\tif (!state.modified_) {\n\t\tmaybeFreeze(rootScope, state.base_, true)\n\t\treturn state.base_\n\t}\n\t// Not finalized yet, let's do that now\n\tif (!state.finalized_) {\n\t\tstate.finalized_ = true\n\t\tstate.scope_.unfinalizedDrafts_--\n\t\tconst result =\n\t\t\t// For ES5, create a good copy from the draft first, with added keys and without deleted keys.\n\t\t\tstate.type_ === ProxyType.ES5Object || state.type_ === ProxyType.ES5Array\n\t\t\t\t? (state.copy_ = shallowCopy(state.draft_))\n\t\t\t\t: state.copy_\n\t\t// Finalize all children of the copy\n\t\t// For sets we clone before iterating, otherwise we can get in endless loop due to modifying during iteration, see #628\n\t\t// To preserve insertion order in all cases we then clear the set\n\t\t// And we let finalizeProperty know it needs to re-add non-draft children back to the target\n\t\tlet resultEach = result\n\t\tlet isSet = false\n\t\tif (state.type_ === ProxyType.Set) {\n\t\t\tresultEach = new Set(result)\n\t\t\tresult.clear()\n\t\t\tisSet = true\n\t\t}\n\t\teach(resultEach, (key, childValue) =>\n\t\t\tfinalizeProperty(rootScope, state, result, key, childValue, path, isSet)\n\t\t)\n\t\t// everything inside is frozen, we can freeze here\n\t\tmaybeFreeze(rootScope, result, false)\n\t\t// first time finalizing, let's create those patches\n\t\tif (path && rootScope.patches_) {\n\t\t\tgetPlugin(\"Patches\").generatePatches_(\n\t\t\t\tstate,\n\t\t\t\tpath,\n\t\t\t\trootScope.patches_,\n\t\t\t\trootScope.inversePatches_!\n\t\t\t)\n\t\t}\n\t}\n\treturn state.copy_\n}\n\nfunction finalizeProperty(\n\trootScope: ImmerScope,\n\tparentState: undefined | ImmerState,\n\ttargetObject: any,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath,\n\ttargetIsSet?: boolean\n) {\n\tif (__DEV__ && childValue === targetObject) die(5)\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tparentState &&\n\t\t\tparentState!.type_ !== ProxyType.Set && // Set objects are atomic since they have no keys.\n\t\t\t!has((parentState as Exclude<ImmerState, SetState>).assigned_!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tconst res = finalize(rootScope, childValue, path)\n\t\tset(targetObject, prop, res)\n\t\t// Drafts from another scope must prevented to be frozen\n\t\t// if we got a draft back from finalize, we're in a nested produce and shouldn't freeze\n\t\tif (isDraft(res)) {\n\t\t\trootScope.canAutoFreeze_ = false\n\t\t} else return\n\t} else if (targetIsSet) {\n\t\ttargetObject.add(childValue)\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\tif (isDraftable(childValue) && !isFrozen(childValue)) {\n\t\tif (!rootScope.immer_.autoFreeze_ && rootScope.unfinalizedDrafts_ < 1) {\n\t\t\t// optimization: if an object is not a draft, and we don't have to\n\t\t\t// deepfreeze everything, and we are sure that no drafts are left in the remaining object\n\t\t\t// cause we saw and finalized all drafts already; we can stop visiting the rest of the tree.\n\t\t\t// This benefits especially adding large data tree's without further processing.\n\t\t\t// See add-data.js perf test\n\t\t\treturn\n\t\t}\n\t\tfinalize(rootScope, childValue)\n\t\t// immer deep freezes plain objects, so if there is no parent state, we freeze as well\n\t\tif (!parentState || !parentState.scope_.parent_)\n\t\t\tmaybeFreeze(rootScope, childValue)\n\t}\n}\n\nfunction maybeFreeze(scope: ImmerScope, value: any, deep = false) {\n\t// we never freeze for a non-root scope; as it would prevent pruning for drafts inside wrapping objects\n\tif (!scope.parent_ && scope.immer_.autoFreeze_ && scope.canAutoFreeze_) {\n\t\tfreeze(value, deep)\n\t}\n}\n","import {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tgetCurrentScope,\n\tDRAFT_STATE,\n\tdie,\n\tcreateProxy,\n\tProxyType\n} from \"../internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned_: {\n\t\t[property: string]: boolean\n\t}\n\tparent_?: ImmerState\n\trevoke_(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype_: ProxyType.ProxyObject\n\tbase_: any\n\tcopy_: any\n\tdraft_: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype_: ProxyType.ProxyArray\n\tbase_: AnyArray\n\tcopy_: AnyArray | null\n\tdraft_: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxyProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype_: isArray ? ProxyType.ProxyArray : (ProxyType.ProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope_: parent ? parent.scope_ : getCurrentScope()!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified_: false,\n\t\t// Used during finalization.\n\t\tfinalized_: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned_: {},\n\t\t// The parent draft state.\n\t\tparent_: parent,\n\t\t// The base state.\n\t\tbase_: base,\n\t\t// The base proxy.\n\t\tdraft_: null as any, // set below\n\t\t// The base copy with any updated values.\n\t\tcopy_: null,\n\t\t// Called by the `produce` function.\n\t\trevoke_: null as any,\n\t\tisManual_: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft_ = proxy as any\n\tstate.revoke_ = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nexport const objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\n\t\tconst source = latest(state)\n\t\tif (!has(source, prop)) {\n\t\t\t// non-existing or non-own property...\n\t\t\treturn readPropFromProto(state, source, prop)\n\t\t}\n\t\tconst value = source[prop]\n\t\tif (state.finalized_ || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\t// Check for existing draft in modified state.\n\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\tif (value === peek(state.base_, prop)) {\n\t\t\tprepareCopy(state)\n\t\t\treturn (state.copy_![prop as any] = createProxy(\n\t\t\t\tstate.scope_.immer_,\n\t\t\t\tvalue,\n\t\t\t\tstate\n\t\t\t))\n\t\t}\n\t\treturn value\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(\n\t\tstate: ProxyObjectState,\n\t\tprop: string /* strictly not, but helps TS */,\n\t\tvalue\n\t) {\n\t\tconst desc = getDescriptorFromProto(latest(state), prop)\n\t\tif (desc?.set) {\n\t\t\t// special case: if this write is captured by a setter, we have\n\t\t\t// to trigger it with the correct context\n\t\t\tdesc.set.call(state.draft_, value)\n\t\t\treturn true\n\t\t}\n\t\tif (!state.modified_) {\n\t\t\t// the last check is because we need to be able to distinguish setting a non-existing to undefined (which is a change)\n\t\t\t// from setting an existing property with value undefined to undefined (which is not a change)\n\t\t\tconst current = peek(latest(state), prop)\n\t\t\t// special case, if we assigning the original value to a draft, we can ignore the assignment\n\t\t\tconst currentState: ProxyObjectState = current?.[DRAFT_STATE]\n\t\t\tif (currentState && currentState.base_ === value) {\n\t\t\t\tstate.copy_![prop] = value\n\t\t\t\tstate.assigned_[prop] = false\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tif (is(value, current) && (value !== undefined || has(state.base_, prop)))\n\t\t\t\treturn true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\n\t\tif (\n\t\t\t(state.copy_![prop] === value &&\n\t\t\t\t// special case: handle new props with value 'undefined'\n\t\t\t\t(value !== undefined || prop in state.copy_)) ||\n\t\t\t// special case: NaN\n\t\t\t(Number.isNaN(value) && Number.isNaN(state.copy_![prop]))\n\t\t)\n\t\t\treturn true\n\n\t\t// @ts-ignore\n\t\tstate.copy_![prop] = value\n\t\tstate.assigned_[prop] = true\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base_, prop) !== undefined || prop in state.base_) {\n\t\t\tstate.assigned_[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned_[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy_) delete state.copy_[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (!desc) return desc\n\t\treturn {\n\t\t\twritable: true,\n\t\t\tconfigurable: state.type_ !== ProxyType.ProxyArray || prop !== \"length\",\n\t\t\tenumerable: desc.enumerable,\n\t\t\tvalue: owner[prop]\n\t\t}\n\t},\n\tdefineProperty() {\n\t\tdie(11)\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base_)\n\t},\n\tsetPrototypeOf() {\n\t\tdie(12)\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (__DEV__ && isNaN(parseInt(prop as any))) die(13)\n\t// @ts-ignore\n\treturn arrayTraps.set!.call(this, state, prop, undefined)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (__DEV__ && prop !== \"length\" && isNaN(parseInt(prop as any))) die(14)\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tconst source = state ? latest(state) : draft\n\treturn source[prop]\n}\n\nfunction readPropFromProto(state: ImmerState, source: any, prop: PropertyKey) {\n\tconst desc = getDescriptorFromProto(source, prop)\n\treturn desc\n\t\t? `value` in desc\n\t\t\t? desc.value\n\t\t\t: // This is a very special case, if the prop is a getter defined by the\n\t\t\t  // prototype, we should invoke it with the draft as context!\n\t\t\t  desc.get?.call(state.draft_)\n\t\t: undefined\n}\n\nfunction getDescriptorFromProto(\n\tsource: any,\n\tprop: PropertyKey\n): PropertyDescriptor | undefined {\n\t// 'in' checks proto!\n\tif (!(prop in source)) return undefined\n\tlet proto = Object.getPrototypeOf(source)\n\twhile (proto) {\n\t\tconst desc = Object.getOwnPropertyDescriptor(proto, prop)\n\t\tif (desc) return desc\n\t\tproto = Object.getPrototypeOf(proto)\n\t}\n\treturn undefined\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified_) {\n\t\tstate.modified_ = true\n\t\tif (state.parent_) {\n\t\t\tmarkChanged(state.parent_)\n\t\t}\n\t}\n}\n\nexport function prepareCopy(state: {base_: any; copy_: any}) {\n\tif (!state.copy_) {\n\t\tstate.copy_ = shallowCopy(state.base_)\n\t}\n}\n","import {\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\tDrafted,\n\tisDraftable,\n\tprocessResult,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tisMap,\n\tisSet,\n\tcreateProxyProxy,\n\tgetPlugin,\n\tdie,\n\thasProxies,\n\tenterScope,\n\trevokeScope,\n\tleaveScope,\n\tusePatchesInScope,\n\tgetCurrentScope,\n\tNOTHING,\n\tfreeze,\n\tcurrent\n} from \"../internal\"\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies_: boolean = hasProxies\n\n\tautoFreeze_: boolean = true\n\n\tconstructor(config?: {useProxies?: boolean; autoFreeze?: boolean}) {\n\t\tif (typeof config?.useProxies === \"boolean\")\n\t\t\tthis.setUseProxies(config!.useProxies)\n\t\tif (typeof config?.autoFreeze === \"boolean\")\n\t\t\tthis.setAutoFreeze(config!.autoFreeze)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} recipe - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce: IProduce = (base: any, recipe?: any, patchListener?: any) => {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\tif (typeof recipe !== \"function\") die(6)\n\t\tif (patchListener !== undefined && typeof patchListener !== \"function\")\n\t\t\tdie(7)\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = enterScope(this)\n\t\t\tconst proxy = createProxy(this, base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) revokeScope(scope)\n\t\t\t\telse leaveScope(scope)\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\t\t\t\treturn processResult(result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\trevokeScope(scope)\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tusePatchesInScope(scope, patchListener)\n\t\t\treturn processResult(result, scope)\n\t\t} else if (!base || typeof base !== \"object\") {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === undefined) result = base\n\t\t\tif (result === NOTHING) result = undefined\n\t\t\tif (this.autoFreeze_) freeze(result, true)\n\t\t\tif (patchListener) {\n\t\t\t\tconst p: Patch[] = []\n\t\t\t\tconst ip: Patch[] = []\n\t\t\t\tgetPlugin(\"Patches\").generateReplacementPatches_(base, result, p, ip)\n\t\t\t\tpatchListener(p, ip)\n\t\t\t}\n\t\t\treturn result\n\t\t} else die(21, base)\n\t}\n\n\tproduceWithPatches: IProduceWithPatches = (base: any, recipe?: any): any => {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => base(draft, ...args))\n\t\t}\n\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst result = this.produce(base, recipe, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\n\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\treturn result.then(nextState => [nextState, patches!, inversePatches!])\n\t\t}\n\t\treturn [result, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) die(8)\n\t\tif (isDraft(base)) base = current(base)\n\t\tconst scope = enterScope(this)\n\t\tconst proxy = createProxy(this, base, undefined)\n\t\tproxy[DRAFT_STATE].isManual_ = true\n\t\tleaveScope(scope)\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && (draft as any)[DRAFT_STATE]\n\t\tif (__DEV__) {\n\t\t\tif (!state || !state.isManual_) die(9)\n\t\t\tif (state.finalized_) die(10)\n\t\t}\n\t\tconst {scope_: scope} = state\n\t\tusePatchesInScope(scope, patchListener)\n\t\treturn processResult(undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is enabled.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze_ = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tif (value && !hasProxies) {\n\t\t\tdie(20)\n\t\t}\n\t\tthis.useProxies_ = value\n\t}\n\n\tapplyPatches<T extends Objectish>(base: T, patches: Patch[]): T {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// If there was a patch that replaced the entire state, start from the\n\t\t// patch after that.\n\t\tif (i > -1) {\n\t\t\tpatches = patches.slice(i + 1)\n\t\t}\n\n\t\tconst applyPatchesImpl = getPlugin(\"Patches\").applyPatches_\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatchesImpl(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatchesImpl(draft, patches)\n\t\t)\n\t}\n}\n\nexport function createProxy<T extends Objectish>(\n\timmer: Immer,\n\tvalue: T,\n\tparent?: ImmerState\n): Drafted<T, ImmerState> {\n\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\tconst draft: Drafted = isMap(value)\n\t\t? getPlugin(\"MapSet\").proxyMap_(value, parent)\n\t\t: isSet(value)\n\t\t? getPlugin(\"MapSet\").proxySet_(value, parent)\n\t\t: immer.useProxies_\n\t\t? createProxyProxy(value, parent)\n\t\t: getPlugin(\"ES5\").createES5Proxy_(value, parent)\n\n\tconst scope = parent ? parent.scope_ : getCurrentScope()\n\tscope.drafts_.push(draft)\n\treturn draft\n}\n","import {\n\tdie,\n\tisDraft,\n\tshallowCopy,\n\teach,\n\tDRAFT_STATE,\n\tget,\n\tset,\n\tImmerState,\n\tisDraftable,\n\tArchtype,\n\tgetArchtype,\n\tgetPlugin\n} from \"../internal\"\n\n/** Takes a snapshot of the current state of a draft and finalizes it (but without freezing). This is a great utility to print the current state during debugging (no Proxies in the way). The output of current can also be safely leaked outside the producer. */\nexport function current<T>(value: T): T\nexport function current(value: any): any {\n\tif (!isDraft(value)) die(22, value)\n\treturn currentImpl(value)\n}\n\nfunction currentImpl(value: any): any {\n\tif (!isDraftable(value)) return value\n\tconst state: ImmerState | undefined = value[DRAFT_STATE]\n\tlet copy: any\n\tconst archType = getArchtype(value)\n\tif (state) {\n\t\tif (\n\t\t\t!state.modified_ &&\n\t\t\t(state.type_ < 4 || !getPlugin(\"ES5\").hasChanges_(state as any))\n\t\t)\n\t\t\treturn state.base_\n\t\t// Optimization: avoid generating new drafts during copying\n\t\tstate.finalized_ = true\n\t\tcopy = copyHelper(value, archType)\n\t\tstate.finalized_ = false\n\t} else {\n\t\tcopy = copyHelper(value, archType)\n\t}\n\n\teach(copy, (key, childValue) => {\n\t\tif (state && get(state.base_, key) === childValue) return // no need to copy or search in something that didn't change\n\t\tset(copy, key, currentImpl(childValue))\n\t})\n\t// In the future, we might consider freezing here, based on the current settings\n\treturn archType === Archtype.Set ? new Set(copy) : copy\n}\n\nfunction copyHelper(value: any, archType: number): any {\n\t// creates a shallow copy, even if it is a map or set\n\tswitch (archType) {\n\t\tcase Archtype.Map:\n\t\t\treturn new Map(value)\n\t\tcase Archtype.Set:\n\t\t\t// Set will be cloned as array temporarily, so that we can replace individual items\n\t\t\treturn Array.from(value)\n\t}\n\treturn shallowCopy(value)\n}\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tcurrent,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable,\n\tfreeze\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * Always freeze by default, even in production mode\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n\nexport {enableES5} from \"./plugins/es5\"\nexport {enablePatches} from \"./plugins/patches\"\nexport {enableMapSet} from \"./plugins/mapset\"\nexport {enableAllPlugins} from \"./plugins/all\"\n","// Should be no imports here!\n\n// Some things that should be evaluated before all else...\n\n// We only want to know if non-polyfilled symbols are available\nconst hasSymbol =\n\ttypeof Symbol !== \"undefined\" && typeof Symbol(\"x\") === \"symbol\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\nexport const hasProxies =\n\ttypeof Proxy !== \"undefined\" &&\n\ttypeof Proxy.revocable !== \"undefined\" &&\n\ttypeof Reflect !== \"undefined\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol.for(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol.for(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\n// Even a polyfilled Symbol might provide Symbol.iterator\nexport const iteratorSymbol: typeof Symbol.iterator =\n\t(typeof Symbol != \"undefined\" && Symbol.iterator) || (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","function shallow(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (let i = 0; i < keysA.length; i++) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]) || !Object.is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default shallow;\n","function create(createState) {\n  let state;\n  const listeners = new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (nextState !== state) {\n      const previousState = state;\n      state = replace ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const subscribeWithSelector = (listener, selector = getState, equalityFn = Object.is) => {\n    let currentSlice = selector(state);\n    function listenerToAdd() {\n      const nextSlice = selector(state);\n      if (!equalityFn(currentSlice, nextSlice)) {\n        const previousSlice = currentSlice;\n        listener(currentSlice = nextSlice, previousSlice);\n      }\n    }\n    listeners.add(listenerToAdd);\n    return () => listeners.delete(listenerToAdd);\n  };\n  const subscribe = (listener, selector, equalityFn) => {\n    if (selector || equalityFn) {\n      return subscribeWithSelector(listener, selector, equalityFn);\n    }\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => listeners.clear();\n  const api = { setState, getState, subscribe, destroy };\n  state = createState(setState, getState, api);\n  return api;\n}\n\nexport default create;\n","{\n  \"version\": \"0.12.28\",\n  \"license\": \"MIT\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/100mslive/web-sdks.git\",\n    \"directory\": \"packages/hms-video-store\"\n  },\n  \"main\": \"dist/index.cjs.js\",\n  \"module\": \"dist/index.js\",\n  \"typings\": \"dist/index.d.ts\",\n  \"files\": [\n    \"dist\",\n    \"src\"\n  ],\n  \"engines\": {\n    \"node\": \">=12\"\n  },\n  \"exports\": {\n    \".\": {\n      \"require\": \"./dist/index.cjs.js\",\n      \"import\": \"./dist/index.js\",\n      \"default\": \"./dist/index.js\"\n    }\n  },\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"prestart\": \"rm -rf dist && yarn types:build\",\n    \"start\": \"concurrently \\\"yarn dev\\\" \\\"yarn types\\\"\",\n    \"dev\": \"node ../../scripts/dev\",\n    \"build:only\": \"node ../../scripts/build\",\n    \"build\": \"yarn build:only && yarn types:build\",\n    \"types\": \"tsc -w\",\n    \"types:build\": \"tsc -p tsconfig.json\",\n    \"format\": \"prettier --write src/**/*.ts\",\n    \"test\": \"jest --maxWorkers=1\",\n    \"test:watch\": \"jest --watch\",\n    \"test:coverage\": \"jest --coverage\",\n    \"lint\": \"eslint -c ../../.eslintrc .\",\n    \"lint:fix\": \"yarn lint --fix\",\n    \"prepare\": \"yarn build\",\n    \"size\": \"size-limit\",\n    \"analyze\": \"size-limit --why\",\n    \"docs\": \"rm -rf ./docs && typedoc && rm -f ./docs/README.md && mkdir ./docs/home &&mv ./docs/modules.md ./docs/home/content.md && node ../../scripts/docs-store && npx prettier --write './docs/**/*'\"\n  },\n  \"name\": \"@100mslive/hms-video-store\",\n  \"author\": \"100ms\",\n  \"dependencies\": {\n    \"eventemitter2\": \"^6.4.9\",\n    \"immer\": \"^9.0.6\",\n    \"lodash.isequal\": \"^4.5.0\",\n    \"reselect\": \"4.0.0\",\n    \"sdp-transform\": \"^2.14.1\",\n    \"ua-parser-js\": \"^1.0.1\",\n    \"uuid\": \"^8.3.2\",\n    \"webrtc-adapter\": \"^8.0.0\",\n    \"zustand\": \"3.5.7\"\n  },\n  \"devDependencies\": {\n    \"@types/dom-screen-wake-lock\": \"^1.0.1\",\n    \"@types/lodash.isequal\": \"^4.5.8\",\n    \"@types/sdp-transform\": \"^2.4.4\",\n    \"@types/ua-parser-js\": \"^0.7.36\",\n    \"@types/uuid\": \"^8.3.0\",\n    \"jest-canvas-mock\": \"^2.3.1\",\n    \"jsdom-worker\": \"^0.3.0\",\n    \"tslib\": \"^2.2.0\"\n  },\n  \"description\": \"@100mslive Core SDK which abstracts the complexities of webRTC while providing a reactive store for data management with a unidirectional data flow\",\n  \"keywords\": [\n    \"video\",\n    \"webrtc\",\n    \"conferencing\",\n    \"100ms\"\n  ],\n  \"gitHead\": \"c4d7367340117e66de386fc7aaa9b5e95abd19ed\"\n}\n","import { HMSPeerID } from './peer';\nimport { HLSVariant, HMSHLS, HMSRecording, HMSRTMP, HMSTranscriptionInfo } from '../interfaces';\n\nexport type { HMSRecording, HMSRTMP, HMSHLS, HLSVariant };\nexport type HMSRoomID = string;\n\n/**\n * Check out internal-docs/RoomStateFlow.tldr for flow of room state\n * View it by\n * - Installing tldraw for VSCode(https://marketplace.visualstudio.com/items?itemName=tldraw-org.tldraw-vscode), or\n * - Open the file in https://www.tldraw.com/\n */\nexport enum HMSRoomState {\n  Disconnected = 'Disconnected',\n  Preview = 'Preview',\n  Connecting = 'Connecting',\n  Connected = 'Connected',\n  Reconnecting = 'Reconnecting',\n  Disconnecting = 'Disconnecting',\n  Failed = 'Failed',\n}\n\nexport interface HMSRoom {\n  id: HMSRoomID;\n  name: string;\n  isConnected?: boolean;\n  peers: HMSPeerID[];\n  localPeer: HMSPeerID;\n  roomState: HMSRoomState;\n  recording: HMSRecording;\n  rtmp: HMSRTMP;\n  hls: HMSHLS;\n  sessionId: string;\n  startedAt?: Date;\n  joinedAt?: Date;\n  transcriptions?: HMSTranscriptionInfo[];\n  /**\n   * if this number is available room.peers is not guaranteed to have all the peers.\n   */\n  peerCount?: number;\n  isLargeRoom?: boolean;\n  isEffectsEnabled?: boolean;\n  disableNoneLayerRequest?: boolean;\n  isVBEnabled?: boolean;\n  effectsKey?: string;\n  isHipaaEnabled?: boolean;\n  isNoiseCancellationEnabled?: boolean;\n}\n","import { HMSException } from './error';\nimport { HMSMessage, HMSMessageID } from './message';\nimport { HMSPeer, HMSPeerID, HMSSpeaker, HMSTrack, HMSTrackID } from './peer';\nimport { HMSPlaylist } from './playlist';\nimport { HMSRoleChangeStoreRequest } from './requests';\nimport { HMSRole } from './role';\nimport { HMSRoom, HMSRoomState } from './room';\nimport { HMSMediaSettings } from './settings';\nimport { DeviceMap, HMSConnectionQuality, HMSPeerStats, HMSPoll, HMSTrackStats, HMSWhiteboard } from '../interfaces';\n\nexport interface HMSGenericTypes {\n  sessionStore: Record<string, any>;\n}\n\n/*\n * Defines the schema of the central store. UI Components are aware of the presence\n * of this central store. This is the global state - the single source of immutable truth.\n */\nexport interface HMSStore<T extends HMSGenericTypes = { sessionStore: Record<string, any> }> {\n  room: HMSRoom;\n  peers: Record<HMSPeerID, HMSPeer>;\n  speakers: Record<HMSTrackID, HMSSpeaker>;\n  connectionQualities: Record<HMSPeerID, HMSConnectionQuality>;\n  tracks: Record<HMSTrackID, HMSTrack>;\n  playlist: HMSPlaylist<any>;\n  messages: {\n    byID: Record<HMSMessageID, HMSMessage>;\n    allIDs: HMSMessageID[];\n  };\n  settings: HMSMediaSettings;\n  devices: DeviceMap;\n  roles: Record<string, HMSRole>;\n  templateAppData: Record<string, string>;\n  appData?: Record<string, any>;\n  roleChangeRequests: HMSRoleChangeStoreRequest[];\n  /** @deprecated use `sessionStore` instead */\n  sessionMetadata?: any;\n  preview?: {\n    localPeer?: HMSPeerID;\n    asRole?: string;\n    videoTrack?: HMSTrackID;\n    audioTrack?: HMSTrackID;\n  };\n  errors: HMSException[]; // for the convenience of debugging and seeing any error in devtools\n  sessionStore: T['sessionStore'];\n  polls: Record<string, HMSPoll>;\n  /** @internal */\n  hideLocalPeer: boolean;\n  whiteboards: Record<string, HMSWhiteboard>;\n}\n\nexport interface HMSStatsStore {\n  remoteTrackStats: Record<HMSTrackID, HMSTrackStats | undefined>;\n  localTrackStats: Record<HMSTrackID, HMSTrackStats[] | undefined>;\n  peerStats: Record<HMSPeerID, HMSPeerStats | undefined>;\n  localPeer: {\n    id: HMSPeerID;\n    videoTrack?: HMSTrackID;\n    audioTrack?: HMSTrackID;\n  };\n}\n\n/**\n * @internal\n */\nexport const createDefaultStoreState = <T extends HMSGenericTypes>(): HMSStore<T> => {\n  return {\n    room: {\n      id: '',\n      isConnected: false,\n      name: '',\n      peers: [],\n      localPeer: '',\n      roomState: HMSRoomState.Disconnected,\n      recording: {\n        browser: {\n          running: false,\n        },\n        server: {\n          running: false,\n        },\n        hls: { running: false },\n      },\n      rtmp: {\n        running: false,\n      },\n      hls: {\n        running: false,\n        variants: [],\n      },\n      sessionId: '',\n    },\n    peers: {},\n    tracks: {},\n    playlist: {\n      audio: {\n        list: {},\n        selection: { id: '', hasPrevious: false, hasNext: false },\n        progress: 0,\n        volume: 0,\n        currentTime: 0,\n        playbackRate: 1.0,\n      },\n      video: {\n        list: {},\n        selection: { id: '', hasPrevious: false, hasNext: false },\n        progress: 0,\n        volume: 0,\n        currentTime: 0,\n        playbackRate: 1.0,\n      },\n    },\n    messages: { byID: {}, allIDs: [] },\n    speakers: {},\n    connectionQualities: {},\n    settings: {\n      audioInputDeviceId: '',\n      audioOutputDeviceId: '',\n      videoInputDeviceId: '',\n    },\n    devices: {\n      audioInput: [],\n      audioOutput: [],\n      videoInput: [],\n    },\n    roles: {},\n    roleChangeRequests: [],\n    errors: [],\n    sessionStore: {},\n    templateAppData: {},\n    polls: {},\n    whiteboards: {},\n    hideLocalPeer: false,\n  };\n};\n\nexport const createDefaultStatsStore = (): HMSStatsStore => {\n  return {\n    peerStats: {},\n    remoteTrackStats: {},\n    localTrackStats: {},\n    localPeer: { id: '' },\n  };\n};\n","import { HMSPeerID } from './peer';\nimport { HMSRoleName } from './role';\n\nexport type HMSMessageID = string;\n\n/**\n * @internal\n */\nexport enum HMSMessageType {\n  CHAT = 'chat',\n}\n\nexport interface HMSMessage {\n  id: HMSMessageID;\n  sender?: HMSPeerID;\n  senderName?: string;\n  senderUserId?: string;\n  senderRole?: string;\n  recipientPeer?: HMSPeerID;\n  recipientRoles?: HMSRoleName[];\n  time: Date;\n  read: boolean;\n  type: string;\n  message: any;\n  /**\n   * true if message will not be put it in store because it has been ignored\n   */\n  ignored: boolean;\n}\n\n/**\n * @internal\n */\nexport interface HMSMessageInput {\n  recipientPeer?: HMSPeerID;\n  recipientRoles?: HMSRoleName[];\n  type?: string;\n  message: any;\n  id: string;\n  time: number;\n}\n","import { HMSDeviceChangeEvent } from './device-change';\nimport { HMSException } from './error';\nimport { HMSMessage } from './message';\nimport { HMSPeer, HMSTrack } from './peer';\nimport { HMSPlaylistItem } from './playlist';\nimport { HMSChangeMultiTrackStateRequest, HMSChangeTrackStateRequest, HMSLeaveRoomRequest } from './requests';\nimport { HMSPoll, HMSTranscriptionInfo } from '../internal';\n\ninterface BaseNotification {\n  id: number;\n  type: string;\n  message: string;\n  severity?: HMSNotificationSeverity;\n}\nexport interface HMSPeerNotification extends BaseNotification {\n  type:\n    | HMSNotificationTypes.PEER_JOINED\n    | HMSNotificationTypes.PEER_LEFT\n    | HMSNotificationTypes.NAME_UPDATED\n    | HMSNotificationTypes.METADATA_UPDATED\n    | HMSNotificationTypes.ROLE_UPDATED\n    | HMSNotificationTypes.HAND_RAISE_CHANGED;\n  data: HMSPeer;\n}\n\nexport interface HMSPeerListNotification extends BaseNotification {\n  type: HMSNotificationTypes.PEER_LIST;\n  data: HMSPeer[];\n}\nexport interface HMSTrackNotification extends BaseNotification {\n  type:\n    | HMSNotificationTypes.TRACK_ADDED\n    | HMSNotificationTypes.TRACK_DEGRADED\n    | HMSNotificationTypes.TRACK_UNMUTED\n    | HMSNotificationTypes.TRACK_DESCRIPTION_CHANGED\n    | HMSNotificationTypes.TRACK_MUTED\n    | HMSNotificationTypes.TRACK_REMOVED\n    | HMSNotificationTypes.TRACK_RESTORED;\n  data: HMSTrack;\n}\nexport interface HMSMessageNotification extends BaseNotification {\n  type: HMSNotificationTypes.NEW_MESSAGE;\n  data: HMSMessage;\n}\nexport interface HMSExceptionNotification extends BaseNotification {\n  type: HMSNotificationTypes.ERROR;\n  data: HMSException;\n}\nexport interface HMSChangeTrackStateRequestNotification extends BaseNotification {\n  type: HMSNotificationTypes.CHANGE_TRACK_STATE_REQUEST;\n  data: HMSChangeTrackStateRequest;\n}\nexport interface HMSChangeMultiTrackStateRequestNotification extends BaseNotification {\n  type: HMSNotificationTypes.CHANGE_MULTI_TRACK_STATE_REQUEST;\n  data: HMSChangeMultiTrackStateRequest;\n}\n\nexport interface HMSLeaveRoomRequestNotification extends BaseNotification {\n  type: HMSNotificationTypes.ROOM_ENDED | HMSNotificationTypes.REMOVED_FROM_ROOM;\n  data: HMSLeaveRoomRequest;\n}\nexport interface HMSDeviceChangeEventNotification extends BaseNotification {\n  type: HMSNotificationTypes.DEVICE_CHANGE_UPDATE;\n  data?: HMSDeviceChangeEvent;\n}\nexport interface HMSPlaylistItemNotification<T> extends BaseNotification {\n  type: HMSNotificationTypes.PLAYLIST_TRACK_ENDED;\n  data: HMSPlaylistItem<T>;\n}\n\nexport interface HMSReconnectionNotification extends BaseNotification {\n  type: HMSNotificationTypes.RECONNECTED | HMSNotificationTypes.RECONNECTING;\n  data: HMSException | null;\n}\n\nexport interface HMSPollNotification extends BaseNotification {\n  type: HMSNotificationTypes.POLL_STARTED | HMSNotificationTypes.POLL_STOPPED | HMSNotificationTypes.POLL_VOTES_UPDATED;\n  data: HMSPoll;\n}\n\nexport interface HMSTranscriptionNotification extends BaseNotification {\n  type: HMSNotificationTypes.TRANSCRIPTION_STATE_UPDATED;\n  data: HMSTranscriptionInfo[];\n}\nexport type HMSNotification =\n  | HMSPeerNotification\n  | HMSPeerListNotification\n  | HMSTrackNotification\n  | HMSMessageNotification\n  | HMSExceptionNotification\n  | HMSChangeTrackStateRequestNotification\n  | HMSChangeMultiTrackStateRequestNotification\n  | HMSLeaveRoomRequestNotification\n  | HMSDeviceChangeEventNotification\n  | HMSReconnectionNotification\n  | HMSTranscriptionNotification\n  | HMSPlaylistItemNotification<any>;\n\nexport enum HMSNotificationSeverity {\n  INFO = 'info',\n  ERROR = 'error',\n}\n\nexport enum HMSNotificationTypes {\n  PEER_JOINED = 'PEER_JOINED',\n  PEER_LEFT = 'PEER_LEFT',\n  PEER_LIST = 'PEER_LIST',\n  NEW_MESSAGE = 'NEW_MESSAGE',\n  ERROR = 'ERROR',\n  RECONNECTING = 'RECONNECTING',\n  RECONNECTED = 'RECONNECTED',\n  TRACK_ADDED = 'TRACK_ADDED',\n  TRACK_REMOVED = 'TRACK_REMOVED',\n  TRACK_MUTED = 'TRACK_MUTED',\n  TRACK_UNMUTED = 'TRACK_UNMUTED',\n  TRACK_DEGRADED = 'TRACK_DEGRADED',\n  TRACK_RESTORED = 'TRACK_RESTORED',\n  TRACK_DESCRIPTION_CHANGED = 'TRACK_DESCRIPTION_CHANGED',\n  ROLE_UPDATED = 'ROLE_UPDATED',\n  CHANGE_TRACK_STATE_REQUEST = 'CHANGE_TRACK_STATE_REQUEST',\n  CHANGE_MULTI_TRACK_STATE_REQUEST = 'CHANGE_MULTI_TRACK_STATE_REQUEST',\n  ROOM_ENDED = 'ROOM_ENDED',\n  REMOVED_FROM_ROOM = 'REMOVED_FROM_ROOM',\n  DEVICE_CHANGE_UPDATE = 'DEVICE_CHANGE_UPDATE',\n  PLAYLIST_TRACK_ENDED = 'PLAYLIST_TRACK_ENDED',\n  NAME_UPDATED = 'NAME_UPDATED',\n  METADATA_UPDATED = 'METADATA_UPDATED',\n  POLL_CREATED = 'POLL_CREATED',\n  POLL_STARTED = 'POLL_STARTED',\n  POLL_STOPPED = 'POLL_STOPPED',\n  POLL_VOTES_UPDATED = 'POLL_VOTES_UPDATED',\n  POLLS_LIST = 'POLLS_LIST',\n  HAND_RAISE_CHANGED = 'HAND_RAISE_CHANGED',\n  TRANSCRIPTION_STATE_UPDATED = 'TRANSCRIPTION_STATE_UPDATED',\n}\n\nexport type HMSNotificationMapping<T extends HMSNotificationTypes, C = any> = {\n  [HMSNotificationTypes.PEER_JOINED]: HMSPeerNotification;\n  [HMSNotificationTypes.PEER_LEFT]: HMSPeerNotification;\n  [HMSNotificationTypes.PEER_LIST]: HMSPeerListNotification;\n  [HMSNotificationTypes.NAME_UPDATED]: HMSPeerNotification;\n  [HMSNotificationTypes.METADATA_UPDATED]: HMSPeerNotification;\n  [HMSNotificationTypes.ROLE_UPDATED]: HMSPeerNotification;\n  [HMSNotificationTypes.TRACK_ADDED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_REMOVED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_MUTED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_UNMUTED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_DEGRADED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_RESTORED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_DESCRIPTION_CHANGED]: HMSTrackNotification;\n  [HMSNotificationTypes.TRACK_UNMUTED]: HMSTrackNotification;\n  [HMSNotificationTypes.NEW_MESSAGE]: HMSMessageNotification;\n  [HMSNotificationTypes.ROOM_ENDED]: HMSLeaveRoomRequestNotification;\n  [HMSNotificationTypes.REMOVED_FROM_ROOM]: HMSLeaveRoomRequestNotification;\n  [HMSNotificationTypes.DEVICE_CHANGE_UPDATE]: HMSDeviceChangeEventNotification;\n  [HMSNotificationTypes.PLAYLIST_TRACK_ENDED]: HMSPlaylistItemNotification<C>;\n  [HMSNotificationTypes.ERROR]: HMSExceptionNotification;\n  [HMSNotificationTypes.CHANGE_TRACK_STATE_REQUEST]: HMSChangeTrackStateRequestNotification;\n  [HMSNotificationTypes.CHANGE_MULTI_TRACK_STATE_REQUEST]: HMSChangeMultiTrackStateRequestNotification;\n  [HMSNotificationTypes.RECONNECTED]: HMSReconnectionNotification;\n  [HMSNotificationTypes.RECONNECTING]: HMSReconnectionNotification;\n  [HMSNotificationTypes.POLL_STARTED]: HMSPollNotification;\n  [HMSNotificationTypes.POLL_STOPPED]: HMSPollNotification;\n  [HMSNotificationTypes.POLL_VOTES_UPDATED]: HMSPollNotification;\n  [HMSNotificationTypes.POLLS_LIST]: HMSPollNotification;\n  [HMSNotificationTypes.POLL_CREATED]: HMSPollNotification;\n  [HMSNotificationTypes.HAND_RAISE_CHANGED]: HMSPeerNotification;\n  [HMSNotificationTypes.TRANSCRIPTION_STATE_UPDATED]: HMSTranscriptionNotification;\n}[T];\n\nexport type MappedNotifications<Type extends HMSNotificationTypes[]> = {\n  [index in keyof Type]: HMSNotificationMapping<Type[index]>;\n};\n\nexport type HMSNotificationTypeParam = HMSNotificationTypes | HMSNotificationTypes[] | undefined;\n\nexport type HMSNotificationInCallback<T extends HMSNotificationTypeParam> = T extends HMSNotificationTypes[]\n  ? MappedNotifications<T>[number]\n  : T extends HMSNotificationTypes\n  ? HMSNotificationMapping<T>\n  : HMSNotification;\n\nexport type HMSNotificationCallback<T extends HMSNotificationTypeParam> = (\n  notification: HMSNotificationInCallback<T>,\n) => void;\n\n/**\n * @category Core\n */\nexport interface IHMSNotifications {\n  /**\n   * you can subscribe to notifications for new message, peer add etc. using this function.\n   * note that this is not meant to maintain any state on your side, as the reactive store already\n   * does that. The intent of this function is mainly to display toast notifications or send analytics.\n   * We'll provide a display message which can be displayed as it is for common cases.\n   */\n  onNotification<T extends HMSNotificationTypeParam>(cb: HMSNotificationCallback<T>, types?: T): () => void;\n}\n","export enum HMSPlaylistType {\n  audio = 'audio',\n  video = 'video',\n}\nexport interface HMSPlaylistItem<T> {\n  name: string;\n  id: string;\n  metadata?: T;\n  url: string;\n  type: HMSPlaylistType;\n  duration?: number;\n  playing: boolean;\n  selected: boolean;\n}\n\nexport interface HMSPlaylistSelection {\n  id: string;\n  hasPrevious: boolean;\n  hasNext: boolean;\n}\n\nexport interface HMSPlaylist<T> {\n  audio: {\n    list: Record<string, HMSPlaylistItem<T>>;\n    selection: HMSPlaylistSelection;\n    progress: number;\n    volume: number;\n    currentTime: number;\n    playbackRate: number;\n  };\n  video: {\n    list: Record<string, HMSPlaylistItem<T>>;\n    selection: HMSPlaylistSelection;\n    progress: number;\n    volume: number;\n    currentTime: number;\n    playbackRate: number;\n  };\n}\n\nexport interface IHMSPlaylistActions {\n  /**\n   * Pass the id of the item to be played\n   * @param {string} id - id of playlist item\n   */\n  play(id: string): Promise<void>;\n  /**\n   * Pauses current playing item\n   */\n  pause(): Promise<void>;\n  /**\n   * PlayNext\n   */\n  playNext(): Promise<void>;\n  /**\n   * PlayPrevious\n   */\n  playPrevious(): Promise<void>;\n  /**\n   * seek passing seekValue - this is relative to current position\n   * @param {number} seekValue - number in seconds to move forwards(pass negative values to move backwards)\n   */\n  seek(seekValue: number): void;\n  /**\n   * seek passing seekValue  - seekValue will be absolute\n   * @param {number} seekValue - value in seconds of absolute position in the playlist item duration\n   */\n  seekTo(seekValue: number): void;\n  /**\n   * set volume passing volume\n   * @param {number} volume - number between 0-100\n   */\n  setVolume(volume: number): void;\n  /**\n   * pass list to set playlist\n   * @param {HMSPlaylistItem[]} list of playlist items\n   */\n  setList<T>(list: HMSPlaylistItem<T>[]): void;\n  /**\n   * Stop the current playback and remove the tracks\n   */\n  stop(): Promise<void>;\n  /**\n   * set whether to autoplay next item in playlist after the current one ends\n   * @param {boolean} autoplay\n   */\n  setIsAutoplayOn(autoplay: boolean): void;\n  /**\n   * Control the playback speed - 1.0 being normal, less than 1.0 will play it slowly\n   * and more than 1.0 will play it faster.\n   * @param playbackRate - value from 0.25 and 2.0\n   */\n  setPlaybackRate(playbackRate: number): void;\n  removeItem(id: string): Promise<boolean>;\n  clearList(): Promise<void>;\n}\n","import {\n  HMSPeer,\n  HMSPublishAllowed,\n  HMSRole,\n  HMSScreenAudioTrack,\n  HMSScreenVideoTrack,\n  HMSStore,\n  HMSTrack,\n  HMSTrackID,\n  HMSVideoTrack,\n} from '../schema';\n\nexport function getScreenSharesByPeer(tracks: Record<HMSTrackID, HMSTrack>, peer?: HMSPeer | null) {\n  let videoTrack = undefined;\n  let audioTrack = undefined;\n  if (peer) {\n    for (const trackID of peer.auxiliaryTracks) {\n      const track = tracks[trackID];\n      if (isScreenShare(track)) {\n        audioTrack = isAudio(track) ? track : audioTrack;\n        videoTrack = isVideo(track) ? track : videoTrack;\n      }\n    }\n  }\n  // to use the proper type, right now it is only used for screenshare.\n  return { video: videoTrack as HMSScreenVideoTrack, audio: audioTrack as HMSScreenAudioTrack };\n}\n\nexport function isAudio(track: HMSTrack | undefined) {\n  return track && track.type === 'audio';\n}\n\nexport function isVideo(track: HMSTrack | undefined) {\n  return track && track.type === 'video';\n}\n\nexport function isScreenShare(track: HMSTrack | undefined) {\n  return track && track.source === 'screen';\n}\n\nexport function isAudioPlaylist(track: HMSTrack | undefined) {\n  return track && track.source === 'audioplaylist';\n}\n\nexport function isVideoPlaylist(track: HMSTrack | undefined) {\n  return track && track.source === 'videoplaylist';\n}\n\nexport function isDegraded(track: HMSVideoTrack) {\n  if (track) {\n    return Boolean(track?.degraded);\n  }\n  return false;\n}\n\nexport function isTrackEnabled(store: HMSStore, trackID?: string) {\n  if (trackID && store.tracks[trackID]) {\n    return store.tracks[trackID].enabled;\n  }\n  return false;\n}\n\n/**\n * Should UI show the video track as enabled\n */\nexport function isTrackDisplayEnabled(store: HMSStore, trackID?: string) {\n  if (trackID && store.tracks[trackID]) {\n    return store.tracks[trackID].displayEnabled;\n  }\n  return false;\n}\n\nexport function isRoleAllowedToPublish(role?: HMSRole | null): HMSPublishAllowed {\n  let video = false,\n    audio = false,\n    screen = false;\n  if (role?.publishParams?.allowed) {\n    video = role.publishParams.allowed.includes('video');\n    audio = role.publishParams.allowed.includes('audio');\n    screen = role.publishParams.allowed.includes('screen');\n  }\n  return {\n    video,\n    audio,\n    screen,\n  };\n}\n","export enum HMSLogLevel {\n  VERBOSE,\n  DEBUG,\n  INFO,\n  WARN,\n  TIME,\n  TIMEEND,\n  ERROR,\n  NONE,\n}\n\n// @ts-ignore - window.expect is available only when in test environment\nconst isTestEnv = typeof window !== 'undefined' && typeof window.expect !== 'undefined';\n/**\n * TODO: fix this so logs show the real file and line numbers where they originated from instead of this class\n * https://stackoverflow.com/questions/13815640/a-proper-wrapper-for-console-log-with-correct-line-number\n */\nexport default class HMSLogger {\n  static level: HMSLogLevel = isTestEnv ? HMSLogLevel.NONE : HMSLogLevel.VERBOSE;\n\n  static v(tag: string, ...data: any[]) {\n    this.log(HMSLogLevel.VERBOSE, tag, ...data);\n  }\n\n  static d(tag: string, ...data: any[]) {\n    this.log(HMSLogLevel.DEBUG, tag, ...data);\n  }\n\n  static i(tag: string, ...data: any[]) {\n    this.log(HMSLogLevel.INFO, tag, ...data);\n  }\n\n  static w(tag: string, ...data: any[]) {\n    this.log(HMSLogLevel.WARN, tag, ...data);\n  }\n\n  static e(tag: string, ...data: any[]) {\n    this.log(HMSLogLevel.ERROR, tag, ...data);\n  }\n\n  static time(mark: string) {\n    this.log(HMSLogLevel.TIME, '[HMSPerformanceTiming]', mark);\n  }\n\n  static timeEnd(mark: string) {\n    this.log(HMSLogLevel.TIMEEND, '[HMSPerformanceTiming]', mark, mark);\n  }\n\n  static cleanup() {\n    performance.clearMarks();\n    performance.clearMeasures();\n  }\n\n  // eslint-disable-next-line complexity\n  private static log(level: HMSLogLevel, tag: string, ...data: any[]) {\n    if (this.level.valueOf() > level.valueOf()) {\n      return;\n    }\n\n    switch (level) {\n      case HMSLogLevel.VERBOSE: {\n        console.log(tag, ...data);\n        break;\n      }\n      case HMSLogLevel.DEBUG: {\n        console.debug(tag, ...data);\n        break;\n      }\n      case HMSLogLevel.INFO: {\n        console.info(tag, ...data);\n        break;\n      }\n      case HMSLogLevel.WARN: {\n        console.warn(tag, ...data);\n        break;\n      }\n      case HMSLogLevel.ERROR: {\n        console.error(tag, ...data);\n        break;\n      }\n      case HMSLogLevel.TIME: {\n        performance.mark(data[0]);\n        break;\n      }\n      case HMSLogLevel.TIMEEND: {\n        const mark = data[0];\n        try {\n          const entry = performance.measure(mark, mark);\n          // @ts-ignore\n          this.log(HMSLogLevel.DEBUG, tag, mark, entry?.duration);\n          performance.clearMarks(mark);\n          performance.clearMeasures(mark);\n        } catch (error) {\n          this.log(HMSLogLevel.DEBUG, tag, mark, error);\n        }\n        break;\n      }\n    }\n  }\n}\n","import { HMSTrack } from '../tracks';\n\nexport class HMSMediaStream {\n  readonly nativeStream: MediaStream;\n  id: string;\n\n  readonly tracks = new Array<HMSTrack>();\n\n  constructor(nativeStream: MediaStream) {\n    this.nativeStream = nativeStream;\n    this.id = nativeStream.id;\n  }\n\n  /**\n   * This is only used when onDemandTracks flag is enabled in Init\n   * @param id\n   */\n  updateId(id: string) {\n    this.id = id;\n  }\n}\n","import { UAParser } from 'ua-parser-js';\n\nexport const parsedUserAgent = new UAParser();\n\nexport const isBrowser = typeof window !== 'undefined';\n\nexport const isNode =\n  typeof window === 'undefined' && !parsedUserAgent.getBrowser().name?.toLowerCase().includes('electron');\n\nexport enum ENV {\n  PROD = 'prod',\n  QA = 'qa',\n  DEV = 'dev',\n}\n\nconst checkIsSupported = () => {\n  if (isNode) {\n    return false;\n  }\n  // @TODO: Get this from preview/init API from server\n  return true;\n};\n\nexport const isSupported = checkIsSupported();\n\nexport const isMobile = () => parsedUserAgent.getDevice().type === 'mobile';\n\nexport const isPageHidden = () => typeof document !== 'undefined' && document.hidden;\n\nexport const isIOS = () => parsedUserAgent.getOS().name?.toLowerCase() === 'ios';\n\n// safari for mac and mobile safari for iOS\nexport const isSafari = parsedUserAgent.getBrowser()?.name?.toLowerCase().includes('safari');\n\nexport const isFirefox = parsedUserAgent.getBrowser()?.name?.toLowerCase() === 'firefox';\n","export enum DomainCategory {\n  CUSTOM = 'CUSTOM',\n  LOCAL = 'LOCAL',\n  HMS = 'HMS',\n}\n","import { DomainCategory } from './AnalyticsEventDomains';\nimport { isBrowser } from '../utils/support';\n\nfunction getDomainCategory() {\n  // this function gives us the domain category(sutom, hms , local) of the base url.\n  // below if statement checks if it's running in a browser ; or if we can use 'window' safely\n\n  if (isBrowser && window) {\n    const baseurl = window.location.hostname;\n\n    if (baseurl === 'localhost' || baseurl === '127.0.0.1') {\n      return DomainCategory.LOCAL;\n    }\n\n    if (baseurl.includes('app.100ms.live')) {\n      return DomainCategory.HMS;\n    } else {\n      return DomainCategory.CUSTOM;\n    }\n  }\n\n  return DomainCategory.CUSTOM;\n}\n\nexport const domainCategory = getDomainCategory();\n","/*\n * ErrorCodes.ts\n *\n * Created by codegen\n * Copyright © 2021 100ms. All rights reserved.\n */\n\nexport const ErrorCodes = {\n  // https://www.rfc-editor.org/rfc/rfc6455#section-7.4.1\n  WebSocketConnectionErrors: {\n    // Error connecting to ws or init config not available\n    FAILED_TO_CONNECT: 1000,\n\n    // Network connection lost\n    WEBSOCKET_CONNECTION_LOST: 1003,\n\n    // Abnormal close without receiving a Close control frame\n    ABNORMAL_CLOSE: 1006,\n  },\n\n  APIErrors: {\n    // [INIT]: Server error\n    SERVER_ERRORS: 2000,\n    //init config not available\n    INIT_CONFIG_NOT_AVAILABLE: 2002,\n\n    // Endpoint is not reachable.\n    ENDPOINT_UNREACHABLE: 2003,\n\n    // Token is not in proper JWT format\n    INVALID_TOKEN_FORMAT: 2004,\n  },\n\n  TracksErrors: {\n    // [PUBLISH]: Error with getusermedia request\n    GENERIC_TRACK: 3000,\n\n    // [PUBLISH]: No permission to access capture device - {device_type}\n    CANT_ACCESS_CAPTURE_DEVICE: 3001,\n\n    // [PUBLISH]: Capture device is no longer available - {device_type}\n    DEVICE_NOT_AVAILABLE: 3002,\n\n    // [PUBLISH]: Capture device is in use by another application - {device_type}\n    DEVICE_IN_USE: 3003,\n\n    // Lost access to capture device midway - {device_type}\n    DEVICE_LOST_MIDWAY: 3004,\n\n    // There is no media to return. Please select either video or audio or both.\n    NOTHING_TO_RETURN: 3005,\n\n    // Cannot enable simulcast when no video settings are provided\n    INVALID_VIDEO_SETTINGS: 3006,\n\n    // Codec can't be changed mid call.\n    CODEC_CHANGE_NOT_PERMITTED: 3007,\n\n    // When the browser throws autoplay exception if something is played before interacting\n    AUTOPLAY_ERROR: 3008,\n\n    // Over constrained error - device hardware unable to satisfy requested constraints\n    OVER_CONSTRAINED: 3009,\n\n    // No audio detected from track, indicates problem with device hardware\n    NO_AUDIO_DETECTED: 3010,\n\n    // Operating System denied permission\n    SYSTEM_DENIED_PERMISSION: 3011,\n\n    // Current tab is not shared when forceCurrentTab was set to true for screenshare\n    CURRENT_TAB_NOT_SHARED: 3012,\n\n    // any error that occurs while playing audio of remote audio tracks\n    AUDIO_PLAYBACK_ERROR: 3013,\n\n    // Selected device not detected on change\n    SELECTED_DEVICE_MISSING: 3014,\n\n    // Track is publishing with no data, can happen when a whatsapp call is ongoing before 100ms call in mweb\n    NO_DATA: 3015,\n  },\n\n  WebrtcErrors: {\n    // [{action}]: Failed to create offer.\n    CREATE_OFFER_FAILED: 4001,\n\n    // [{action}]: Failed to create answer.\n    CREATE_ANSWER_FAILED: 4002,\n\n    // [{action}]: Failed to set offer.\n    SET_LOCAL_DESCRIPTION_FAILED: 4003,\n\n    // [{action}]: Failed to set answer.\n    SET_REMOTE_DESCRIPTION_FAILED: 4004,\n\n    // [{action}]: Ice connection state FAILED\n    ICE_FAILURE: 4005,\n\n    // [{action}]: Ice connection state FAILED\n    ICE_DISCONNECTED: 4006,\n\n    STATS_FAILED: 4007,\n  },\n\n  WebsocketMethodErrors: {\n    // [JOIN]: {server_error}\n    SERVER_ERRORS: 5000,\n\n    // [JOIN]: You have already joined this room.\n    ALREADY_JOINED: 5001,\n\n    // [JOIN]: Cannot join if preview is in progress\n    CANNOT_JOIN_PREVIEW_IN_PROGRESS: 5002,\n  },\n\n  GenericErrors: {\n    // Client is not connected\n    NOT_CONNECTED: 6000,\n\n    // Unknown signalling error: {action} {error_info}\n    SIGNALLING: 6001,\n\n    // Unknown exception: {error_info}\n    UNKNOWN: 6002,\n\n    // WebRTC engine is not ready yet\n    NOT_READY: 6003,\n\n    // Failed to parse JSON message - {json_message}\n    JSON_PARSING_FAILED: 6004,\n\n    // Track Metadata Missing\n    TRACK_METADATA_MISSING: 6005,\n\n    // RTC Track missing\n    RTC_TRACK_MISSING: 6006,\n\n    // Peer Metadata Missing\n    PEER_METADATA_MISSING: 6007,\n\n    // Joined with invalid role\n    INVALID_ROLE: 6008,\n\n    PREVIEW_IN_PROGRESS: 6009,\n\n    MISSING_MEDIADEVICES: 6010,\n\n    MISSING_RTCPEERCONNECTION: 6011,\n    LOCAL_STORAGE_ACCESS_DENIED: 6012,\n    // peer not present or role not present or any general validation\n    VALIDATION_FAILED: 6013,\n  },\n\n  PlaylistErrors: {\n    NO_ENTRY_TO_PLAY: 8001,\n    NO_ENTRY_IS_PLAYING: 8002,\n  },\n};\n","import { HMSAction } from './HMSAction';\nimport { IAnalyticsPropertiesProvider } from '../analytics/IAnalyticsPropertiesProvider';\nimport { HMSSignalMethod } from '../signal/jsonrpc/models';\n\nexport class HMSException extends Error implements IAnalyticsPropertiesProvider {\n  action: string;\n  nativeError?: Error;\n\n  constructor(\n    public readonly code: number,\n    public name: string,\n    action: HMSAction | HMSSignalMethod,\n    public message: string,\n    public description: string,\n    public isTerminal: boolean = false,\n  ) {\n    super(message);\n\n    // Ref: https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes#extending-built-ins-like-error-array-and-map-may-no-longer-work\n    Object.setPrototypeOf(this, HMSException.prototype);\n    this.action = action.toString();\n  }\n\n  toAnalyticsProperties() {\n    return {\n      error_name: this.name,\n      error_code: this.code,\n      error_message: this.message,\n      error_description: this.description,\n      action: this.action,\n      is_terminal: this.isTerminal,\n    };\n  }\n\n  addNativeError(error: Error) {\n    this.nativeError = error;\n  }\n\n  toString() {\n    return `{\n        code: ${this.code};\n        name: ${this.name};\n        action: ${this.action};\n        message: ${this.message};\n        description: ${this.description};\n        isTerminal: ${this.isTerminal};\n        nativeError: ${this.nativeError?.message};\n      }`;\n  }\n}\n","import { HMSAction } from './HMSAction';\nimport { HMSException } from './HMSException';\nimport { HMSTrackExceptionTrackType } from '../media/tracks/HMSTrackExceptionTrackType';\nimport { HMSSignalMethod } from '../signal/jsonrpc/models';\n\nexport class HMSTrackException extends HMSException {\n  constructor(\n    public readonly code: number,\n    public name: string,\n    action: HMSAction | HMSSignalMethod,\n    public message: string,\n    public description: string,\n    public trackType: HMSTrackExceptionTrackType,\n  ) {\n    super(code, name, action, message, description, false);\n  }\n\n  toAnalyticsProperties() {\n    return {\n      ...super.toAnalyticsProperties(),\n      track_type: this.trackType,\n    };\n  }\n\n  toString() {\n    return `{\n        code: ${this.code};\n        name: ${this.name};\n        action: ${this.action};\n        message: ${this.message};\n        description: ${this.description};\n        isTerminal: ${this.isTerminal};\n        nativeError: ${this.nativeError?.message};\n        trackType: ${this.trackType};\n      }`;\n  }\n}\n","export enum HMSTrackExceptionTrackType {\n  AUDIO = 'audio',\n  VIDEO = 'video',\n  AUDIO_VIDEO = 'audio, video',\n  SCREEN = 'screen',\n}\n","import { HMSAction } from '../../error/HMSAction';\n\nexport interface JsonRpcRequest {\n  id: string;\n  method: string;\n  params: Map<string, any>;\n}\n\nexport interface JsonRpcResponse {\n  id: string;\n  result: any;\n  error: {\n    code: number;\n    message: string;\n  };\n}\n\nexport enum HMSSignalMethod {\n  JOIN = 'join',\n  OFFER = 'offer',\n  ANSWER = 'answer',\n  TRICKLE = 'trickle',\n  TRACK_UPDATE = 'track-update',\n  BROADCAST = 'broadcast',\n  ANALYTICS = 'analytics',\n  SERVER_ERROR = 'on-error',\n  SERVER_WARNING = 'on-warning',\n  SDK_NOTIFICATION = 'sdk-notification',\n  LEAVE = 'leave',\n  END_ROOM = 'end-room',\n  PING = 'ping',\n  ROLE_CHANGE_REQUEST = 'role-change-request',\n  ROLE_CHANGE = 'role-change',\n  TRACK_UPDATE_REQUEST = 'track-update-request',\n  PEER_LEAVE_REQUEST = 'peer-leave-request',\n  CHANGE_TRACK_MUTE_STATE_REQUEST = 'change-track-mute-state-request',\n  START_RTMP_OR_RECORDING_REQUEST = 'rtmp-start',\n  STOP_RTMP_AND_RECORDING_REQUEST = 'rtmp-stop',\n  UPDATE_PEER_METADATA = 'peer-update',\n  START_HLS_STREAMING = 'hls-start',\n  STOP_HLS_STREAMING = 'hls-stop',\n  START_TRANSCRIPTION = 'transcription-start',\n  STOP_TRANSCRIPTION = 'transcription-stop',\n  HLS_TIMED_METADATA = 'hls-timed-metadata',\n  SET_METADATA = 'set-metadata',\n  GET_METADATA = 'get-metadata',\n  LISTEN_METADATA_CHANGE = 'listen-metadata-change',\n  POLL_INFO_SET = 'poll-info-set',\n  POLL_INFO_GET = 'poll-info-get',\n  POLL_QUESTIONS_SET = 'poll-questions-set',\n  POLL_QUESTIONS_GET = 'poll-questions-get',\n  POLL_START = 'poll-start',\n  POLL_STOP = 'poll-stop',\n  POLL_RESPONSE_SET = 'poll-response',\n  POLL_LIST = 'poll-list',\n  POLL_RESPONSES = 'poll-responses',\n  POLL_RESULT = 'poll-result',\n  POLL_LEADERBOARD = 'poll-leaderboard',\n  GET_PEER = 'get-peer',\n  FIND_PEER = 'find-peer',\n  SEARCH_BY_NAME = 'peer-name-search',\n  PEER_ITER_NEXT = 'peer-iter-next',\n  GROUP_JOIN = 'group-join',\n  GROUP_LEAVE = 'group-leave',\n  GROUP_ADD = 'group-add',\n  GROUP_REMOVE = 'group-remove',\n  WHITEBOARD_CREATE = 'whiteboard-create',\n  WHITEBOARD_GET = 'whiteboard-get',\n}\n\nexport function convertSignalMethodtoErrorAction(method: HMSSignalMethod): HMSAction {\n  switch (method) {\n    case HMSSignalMethod.JOIN:\n      return HMSAction.JOIN;\n    case HMSSignalMethod.OFFER:\n      return HMSAction.PUBLISH;\n    case HMSSignalMethod.ANSWER:\n      return HMSAction.SUBSCRIBE;\n    case HMSSignalMethod.TRACK_UPDATE:\n      return HMSAction.TRACK;\n    default:\n      return HMSAction.NONE;\n  }\n}\n","/*\n * ErrorFactory.ts\n *\n * Created by codegen\n * Copyright © 2021 100ms. All rights reserved.\n */\n\nimport { ErrorCodes } from './ErrorCodes';\nimport { HMSAction } from './HMSAction';\nimport { HMSException } from './HMSException';\nimport { HMSTrackException } from './HMSTrackException';\nimport { HMSTrackExceptionTrackType } from '../media/tracks/HMSTrackExceptionTrackType';\nimport { HMSSignalMethod } from '../signal/jsonrpc/models';\n\nconst terminalActions: (HMSSignalMethod | HMSAction)[] = [\n  HMSSignalMethod.JOIN,\n  HMSSignalMethod.OFFER,\n  HMSSignalMethod.ANSWER,\n  HMSSignalMethod.TRICKLE,\n  HMSSignalMethod.SERVER_ERROR,\n  HMSAction.JOIN,\n];\n\nexport const ErrorFactory = {\n  WebSocketConnectionErrors: {\n    FailedToConnect(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebSocketConnectionErrors.FAILED_TO_CONNECT,\n        'WebsocketFailedToConnect',\n        action,\n        `[WS]: ${description}`,\n        `[WS]: ${description}`,\n      );\n    },\n\n    WebSocketConnectionLost(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,\n        'WebSocketConnectionLost',\n        action,\n        `Network connection lost`,\n        description,\n      );\n    },\n\n    AbnormalClose(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebSocketConnectionErrors.ABNORMAL_CLOSE,\n        'WebSocketAbnormalClose',\n        action,\n        `Websocket closed abnormally`,\n        description,\n      );\n    },\n  },\n\n  APIErrors: {\n    ServerErrors(code: number, action: HMSAction, description = '', isTerminal = true) {\n      return new HMSException(\n        code,\n        'ServerErrors',\n        action,\n        `[${action}]: Server error ${description}`,\n        description,\n        isTerminal,\n      );\n    },\n\n    EndpointUnreachable(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.APIErrors.ENDPOINT_UNREACHABLE,\n        'EndpointUnreachable',\n        action,\n        `Endpoint is not reachable - ${description}`,\n        description,\n      );\n    },\n\n    InvalidTokenFormat(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.APIErrors.INVALID_TOKEN_FORMAT,\n        'InvalidTokenFormat',\n        action,\n        `Token is not in proper JWT format - ${description}`,\n        description,\n        true,\n      );\n    },\n\n    InitConfigNotAvailable(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.APIErrors.INIT_CONFIG_NOT_AVAILABLE,\n        'InitError',\n        action,\n        `[INIT]: ${description}`,\n        `[INIT]: ${description}`,\n      );\n    },\n  },\n\n  TracksErrors: {\n    GenericTrack(action: HMSAction, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.GENERIC_TRACK,\n        'GenericTrack',\n        action,\n        `[TRACK]: ${description}`,\n        `[TRACK]: ${description}`,\n        HMSTrackExceptionTrackType.AUDIO_VIDEO,\n      );\n    },\n    CantAccessCaptureDevice(action: HMSAction, deviceInfo: string, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,\n        'CantAccessCaptureDevice',\n        action,\n        `User denied permission to access capture device - ${deviceInfo}`,\n        description,\n        deviceInfo as HMSTrackExceptionTrackType,\n      );\n    },\n\n    DeviceNotAvailable(action: HMSAction, deviceInfo: string, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.DEVICE_NOT_AVAILABLE,\n        'DeviceNotAvailable',\n        action,\n        `[TRACK]: Capture device is no longer available - ${deviceInfo}`,\n        description,\n        deviceInfo as HMSTrackExceptionTrackType,\n      );\n    },\n\n    DeviceInUse(action: HMSAction, deviceInfo: string, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.DEVICE_IN_USE,\n        'DeviceInUse',\n        action,\n        `[TRACK]: Capture device is in use by another application - ${deviceInfo}`,\n        description,\n        deviceInfo as HMSTrackExceptionTrackType,\n      );\n    },\n\n    DeviceLostMidway(action: HMSAction, deviceInfo: string, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.DEVICE_LOST_MIDWAY,\n        'DeviceLostMidway',\n        action,\n        `Lost access to capture device midway - ${deviceInfo}`,\n        description,\n        deviceInfo as HMSTrackExceptionTrackType,\n      );\n    },\n\n    NothingToReturn(\n      action: HMSAction,\n      description = '',\n      message = `There is no media to return. Please select either video or audio or both.`,\n    ) {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.NOTHING_TO_RETURN,\n        'NothingToReturn',\n        action,\n        message,\n        description,\n        HMSTrackExceptionTrackType.AUDIO_VIDEO,\n      );\n    },\n\n    InvalidVideoSettings(action: HMSAction, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.INVALID_VIDEO_SETTINGS,\n        'InvalidVideoSettings',\n        action,\n        `Cannot enable simulcast when no video settings are provided`,\n        description,\n        HMSTrackExceptionTrackType.VIDEO,\n      );\n    },\n\n    AutoplayBlocked(action: HMSAction, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.AUTOPLAY_ERROR,\n        'AutoplayBlocked',\n        action,\n        \"Autoplay blocked because the user didn't interact with the document first\",\n        description,\n        HMSTrackExceptionTrackType.AUDIO,\n      );\n    },\n\n    CodecChangeNotPermitted(action: HMSAction, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.CODEC_CHANGE_NOT_PERMITTED,\n        'CodecChangeNotPermitted',\n        action,\n        `Codec can't be changed mid call.`,\n        description,\n        HMSTrackExceptionTrackType.AUDIO_VIDEO,\n      );\n    },\n\n    OverConstrained(action: HMSAction, deviceInfo: string, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.OVER_CONSTRAINED,\n        'OverConstrained',\n        action,\n        `[TRACK]: Requested constraints cannot be satisfied with the device hardware - ${deviceInfo}`,\n        description,\n        deviceInfo as HMSTrackExceptionTrackType,\n      );\n    },\n\n    NoAudioDetected(action: HMSAction, description = 'Please check the mic or use another audio input') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.NO_AUDIO_DETECTED,\n        'NoAudioDetected',\n        action,\n        'No audio input detected from microphone',\n        description,\n        HMSTrackExceptionTrackType.AUDIO,\n      );\n    },\n\n    SystemDeniedPermission(action: HMSAction, deviceInfo: string, description = '') {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.SYSTEM_DENIED_PERMISSION,\n        'SystemDeniedPermission',\n        action,\n        `Operating System denied permission to access capture device - ${deviceInfo}`,\n        description,\n        deviceInfo as HMSTrackExceptionTrackType,\n      );\n    },\n\n    CurrentTabNotShared() {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.CURRENT_TAB_NOT_SHARED,\n        'CurrentTabNotShared',\n        HMSAction.TRACK,\n        'The app requires you to share the current tab',\n        'You must screen share the current tab in order to proceed',\n        HMSTrackExceptionTrackType.SCREEN,\n      );\n    },\n\n    AudioPlaybackError(description: string) {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.AUDIO_PLAYBACK_ERROR,\n        'Audio playback error',\n        HMSAction.TRACK,\n        description,\n        description,\n        HMSTrackExceptionTrackType.AUDIO,\n      );\n    },\n\n    SelectedDeviceMissing(deviceType: string) {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.SELECTED_DEVICE_MISSING,\n        'SelectedDeviceMissing',\n        HMSAction.TRACK,\n        `Could not detect selected ${deviceType} device`,\n        `Please check connection to the ${deviceType} device`,\n        deviceType as HMSTrackExceptionTrackType,\n      );\n    },\n\n    NoDataInTrack(description: string) {\n      return new HMSTrackException(\n        ErrorCodes.TracksErrors.NO_DATA,\n        'Track does not have any data',\n        HMSAction.TRACK,\n        description,\n        'This could possibily due to another application taking priority over the access to camera or microphone or due to an incoming call',\n        HMSTrackExceptionTrackType.AUDIO_VIDEO,\n      );\n    },\n  },\n\n  WebrtcErrors: {\n    CreateOfferFailed(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.CREATE_OFFER_FAILED,\n        'CreateOfferFailed',\n        action,\n        `[${action.toString()}]: Failed to create offer. `,\n        description,\n      );\n    },\n\n    CreateAnswerFailed(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.CREATE_ANSWER_FAILED,\n        'CreateAnswerFailed',\n        action,\n        `[${action.toString()}]: Failed to create answer. `,\n        description,\n      );\n    },\n\n    SetLocalDescriptionFailed(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.SET_LOCAL_DESCRIPTION_FAILED,\n        'SetLocalDescriptionFailed',\n        action,\n        `[${action.toString()}]: Failed to set offer. `,\n        description,\n      );\n    },\n\n    SetRemoteDescriptionFailed(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.SET_REMOTE_DESCRIPTION_FAILED,\n        'SetRemoteDescriptionFailed',\n        action,\n        `[${action.toString()}]: Failed to set answer. `,\n        description,\n        true,\n      );\n    },\n\n    ICEFailure(action: HMSAction, description = '', isTerminal = false) {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.ICE_FAILURE,\n        'ICEFailure',\n        action,\n        `[${action.toString()}]: Ice connection state FAILED`,\n        description,\n        isTerminal,\n      );\n    },\n\n    ICEDisconnected(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.ICE_DISCONNECTED,\n        'ICEDisconnected',\n        action,\n        `[${action.toString()}]: Ice connection state DISCONNECTED`,\n        description,\n      );\n    },\n\n    StatsFailed(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebrtcErrors.STATS_FAILED,\n        'StatsFailed',\n        action,\n        `Failed to WebRTC get stats - ${description}`,\n        description,\n      );\n    },\n  },\n\n  WebsocketMethodErrors: {\n    ServerErrors(code: number, action: HMSAction | HMSSignalMethod, description: string) {\n      return new HMSException(code, 'ServerErrors', action, description, description, terminalActions.includes(action));\n    },\n\n    AlreadyJoined(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebsocketMethodErrors.ALREADY_JOINED,\n        'AlreadyJoined',\n        action,\n        `[JOIN]: You have already joined this room.`,\n        description,\n      );\n    },\n\n    CannotJoinPreviewInProgress(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.WebsocketMethodErrors.CANNOT_JOIN_PREVIEW_IN_PROGRESS,\n        'CannotJoinPreviewInProgress',\n        action,\n        `[JOIN]: Cannot join if preview is in progress`,\n        description,\n      );\n    },\n  },\n\n  GenericErrors: {\n    NotConnected(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.NOT_CONNECTED,\n        'NotConnected',\n        action,\n        `Client is not connected`,\n        description,\n      );\n    },\n\n    Signalling(action: HMSAction, description: string) {\n      return new HMSException(\n        ErrorCodes.GenericErrors.SIGNALLING,\n        'Signalling',\n        action,\n        `Unknown signalling error: ${action.toString()} ${description} `,\n        description,\n      );\n    },\n\n    Unknown(action: HMSAction, description: string) {\n      return new HMSException(\n        ErrorCodes.GenericErrors.UNKNOWN,\n        'Unknown',\n        action,\n        `Unknown exception: ${description}`,\n        description,\n      );\n    },\n\n    NotReady(action: HMSAction, description = '') {\n      return new HMSException(ErrorCodes.GenericErrors.NOT_READY, 'NotReady', action, description, description);\n    },\n\n    JsonParsingFailed(action: HMSAction, jsonMessage: string, description = '') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.JSON_PARSING_FAILED,\n        'JsonParsingFailed',\n        action,\n        `Failed to parse JSON message - ${jsonMessage}`,\n        description,\n      );\n    },\n\n    TrackMetadataMissing(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.TRACK_METADATA_MISSING,\n        'TrackMetadataMissing',\n        action,\n        `Track Metadata Missing`,\n        description,\n      );\n    },\n\n    RTCTrackMissing(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.RTC_TRACK_MISSING,\n        'RTCTrackMissing',\n        action,\n        `RTC Track missing`,\n        description,\n      );\n    },\n\n    PeerMetadataMissing(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.PEER_METADATA_MISSING,\n        'PeerMetadataMissing',\n        action,\n        `Peer Metadata Missing`,\n        description,\n      );\n    },\n\n    ValidationFailed(message: string, entity?: any) {\n      return new HMSException(\n        ErrorCodes.GenericErrors.VALIDATION_FAILED,\n        'ValidationFailed',\n        HMSAction.VALIDATION,\n        message,\n        entity ? JSON.stringify(entity) : '',\n      );\n    },\n\n    InvalidRole(action: HMSAction, description: string) {\n      return new HMSException(\n        ErrorCodes.GenericErrors.INVALID_ROLE,\n        'InvalidRole',\n        action,\n        `Invalid role. Join with valid role`,\n        description,\n        true,\n      );\n    },\n\n    PreviewAlreadyInProgress(action: HMSAction, description = '') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.PREVIEW_IN_PROGRESS,\n        'PreviewAlreadyInProgress',\n        action,\n        `[Preview]: Cannot join if preview is in progress`,\n        description,\n      );\n    },\n\n    LocalStorageAccessDenied(description = 'Access to localStorage has been denied') {\n      return new HMSException(\n        ErrorCodes.GenericErrors.LOCAL_STORAGE_ACCESS_DENIED,\n        'LocalStorageAccessDenied',\n        HMSAction.NONE,\n        `LocalStorageAccessDenied`,\n        description,\n      );\n    },\n\n    MissingMediaDevices() {\n      return new HMSException(\n        ErrorCodes.GenericErrors.MISSING_MEDIADEVICES,\n        'MissingMediaDevices',\n        HMSAction.JOIN,\n        `navigator.mediaDevices is undefined. 100ms SDK won't work on this website as WebRTC is not supported on HTTP endpoints(missing navigator.mediaDevices). Please ensure you're using the SDK either on localhost or a valid HTTPS endpoint.`,\n        '',\n        true,\n      );\n    },\n\n    MissingRTCPeerConnection() {\n      return new HMSException(\n        ErrorCodes.GenericErrors.MISSING_RTCPEERCONNECTION,\n        'MissingRTCPeerConnection',\n        HMSAction.JOIN,\n        `RTCPeerConnection which is a core requirement for WebRTC call was not found, this could be due to an unsupported browser or browser extensions blocking WebRTC`,\n        '',\n        true,\n      );\n    },\n  },\n\n  MediaPluginErrors: {\n    PlatformNotSupported(action: HMSAction, description = '') {\n      return new HMSException(\n        7001,\n        'PlatformNotSupported',\n        action,\n        'Check HMS Docs to see the list of supported platforms',\n        description,\n      );\n    },\n\n    InitFailed(action: HMSAction, description = '') {\n      return new HMSException(7002, 'InitFailed', action, 'Plugin init failed', description);\n    },\n\n    ProcessingFailed(action: HMSAction, description = '') {\n      return new HMSException(7003, 'ProcessingFailed', action, 'Plugin processing failed', description);\n    },\n\n    AddAlreadyInProgress(action: HMSAction, description = '') {\n      return new HMSException(7004, 'AddAlreadyInProgress', action, 'Plugin add already in progress', description);\n    },\n\n    DeviceNotSupported(action: HMSAction, description = '') {\n      return new HMSException(\n        7005,\n        'DeviceNotSupported',\n        action,\n        'Check HMS Docs to see the list of supported devices',\n        description,\n      );\n    },\n  },\n\n  PlaylistErrors: {\n    NoEntryToPlay(action: HMSAction, description: string) {\n      return new HMSException(\n        ErrorCodes.PlaylistErrors.NO_ENTRY_TO_PLAY,\n        'NoEntryToPlay',\n        action,\n        'Reached end of playlist',\n        description,\n      );\n    },\n    NoEntryPlaying(action: HMSAction, description: string) {\n      return new HMSException(\n        ErrorCodes.PlaylistErrors.NO_ENTRY_IS_PLAYING,\n        'NoEntryIsPlaying',\n        action,\n        'No entry is playing at this time',\n        description,\n      );\n    },\n  },\n};\n","import HMSLogger from './logger';\nimport { isBrowser } from './support';\nimport { ErrorFactory } from '../error/ErrorFactory';\n\nclass LocalStorage {\n  valuesMap = new Map();\n  getItem(key: string) {\n    if (this.valuesMap.has(key)) {\n      return String(this.valuesMap.get(key));\n    }\n    return null;\n  }\n\n  setItem(key: string, val: string) {\n    this.valuesMap.set(key, val);\n  }\n\n  removeItem(key: string) {\n    this.valuesMap.delete(key);\n  }\n\n  clear() {\n    this.valuesMap.clear();\n  }\n\n  key(i: number) {\n    if (arguments.length === 0) {\n      throw new TypeError(\"Failed to execute 'key' on 'Storage': 1 argument required, but only 0 present.\"); // this is a TypeError implemented on Chrome, Firefox throws Not enough arguments to Storage.key.\n    }\n    const arr = Array.from(this.valuesMap.keys());\n    return arr[i];\n  }\n\n  get length() {\n    return this.valuesMap.size;\n  }\n}\n\nexport const initializeLocalstoragePolyfill = () => {\n  try {\n    if (isBrowser && !localStorage) {\n      window.localStorage = new LocalStorage();\n    }\n  } catch (e) {\n    HMSLogger.e('Error initialising localStorage', ErrorFactory.GenericErrors.LocalStorageAccessDenied());\n  }\n};\n","import { initializeLocalstoragePolyfill } from './local-storage-polyfill';\nimport HMSLogger from './logger';\nimport { isBrowser } from './support';\nimport { ErrorFactory } from '../error/ErrorFactory';\n\nexport class LocalStorage<T> {\n  private storage: Storage | null = null;\n\n  constructor(public readonly key: string) {}\n\n  /**\n   * localstorage is not available in SSR, so get it only at time of use\n   */\n  getStorage() {\n    try {\n      if (isBrowser && !this.storage) {\n        initializeLocalstoragePolyfill();\n        this.storage = window.localStorage;\n      }\n      return this.storage;\n    } catch (e) {\n      HMSLogger.e('Error initialising localStorage', ErrorFactory.GenericErrors.LocalStorageAccessDenied());\n      return null;\n    }\n  }\n\n  get(): T | undefined {\n    const stringItem = this.getStorage()?.getItem(this.key);\n    if (!stringItem) {\n      return;\n    }\n    const item = JSON.parse(stringItem) as T;\n    return item;\n  }\n\n  set(value: T) {\n    const stringValue = JSON.stringify(value);\n    this.getStorage()?.setItem(this.key, stringValue);\n  }\n\n  clear() {\n    this.getStorage()?.removeItem(this.key);\n  }\n}\n","import { v4 as uuid } from 'uuid';\nimport { LocalStorage } from './local-storage';\n\nexport const getAnalyticsDeviceId = () => {\n  let id;\n  const storage = new LocalStorage<string>('hms-analytics-deviceId');\n  const storageId = storage.get();\n  if (storageId) {\n    id = storageId;\n  } else {\n    id = uuid();\n    storage.set(id);\n  }\n  return id;\n};\n","import HMSLogger from './logger';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { Store } from '../sdk/store';\n\nconst TAG = `[VALIDATIONS]`;\n\n/**\n * Check only for presence(not truthy) of a value.\n * Use in places where 0, false need to be considered valid.\n */\nexport function isPresent(value: any) {\n  return value !== undefined && value !== null;\n}\n\n/**\n * checks if RTCPeerConnection constructor is available\n */\nexport const validateRTCPeerConnection = () => {\n  if (!isPresent(RTCPeerConnection)) {\n    const error = ErrorFactory.GenericErrors.MissingRTCPeerConnection();\n    HMSLogger.e(TAG, error);\n    throw error;\n  }\n};\n\n/**\n * navigator.mediaDevices is undefined in insecure contexts served over HTTP protocol\n */\nexport const validateMediaDevicesExistence = () => {\n  if (!isPresent(navigator.mediaDevices)) {\n    const error = ErrorFactory.GenericErrors.MissingMediaDevices();\n    HMSLogger.e(TAG, error);\n    throw error;\n  }\n};\n\nexport const validatePublishParams = (store: Store) => {\n  const publishParams = store.getPublishParams();\n  if (!publishParams) {\n    throw ErrorFactory.GenericErrors.NotConnected(\n      HMSAction.VALIDATION,\n      'call addTrack after preview or join is successful',\n    );\n  }\n};\n","import { ENV, isNode, parsedUserAgent } from './support';\nimport { isPresent } from './validations';\nimport { DomainCategory } from '../analytics/AnalyticsEventDomains';\nimport { domainCategory } from '../analytics/domain-analytics';\nimport { HMSFrameworkInfo } from '../interfaces';\n\nconst sdk_version = require('../../package.json').version;\n\ntype UserAgent = {\n  os: string;\n  os_version: string;\n  sdk: 'web';\n  sdk_version: string;\n  env: 'debug' | 'prod';\n  domain: DomainCategory;\n  is_prebuilt: boolean;\n  device_model?: string;\n  framework?: HMSFrameworkInfo['type'] | 'node';\n  framework_version?: HMSFrameworkInfo['version'];\n  framework_sdk_version?: HMSFrameworkInfo['sdkVersion'];\n};\n\nexport function createUserAgent(sdkEnv: ENV = ENV.PROD, frameworkInfo?: HMSFrameworkInfo): string {\n  const sdk = 'web';\n  const env = domainCategory !== DomainCategory.LOCAL && sdkEnv === ENV.PROD ? 'prod' : 'debug';\n\n  if (isNode) {\n    return convertObjectToString({\n      os: 'web_nodejs',\n      os_version: process.version,\n      sdk,\n      sdk_version,\n      env,\n      domain: domainCategory,\n      is_prebuilt: !!frameworkInfo?.isPrebuilt,\n      framework: 'node',\n      framework_version: process.version,\n      framework_sdk_version: frameworkInfo?.sdkVersion,\n    });\n  }\n\n  const parsedOs = parsedUserAgent.getOS();\n  const parsedDevice = parsedUserAgent.getDevice();\n  const parsedBrowser = parsedUserAgent.getBrowser();\n\n  const os = replaceSpaces(`web_${parsedOs.name}`);\n  const os_version = parsedOs.version || '';\n\n  const browser = replaceSpaces(`${parsedBrowser.name}_${parsedBrowser.version}`);\n  let device_model = browser;\n  if (parsedDevice.type) {\n    const deviceVendor = replaceSpaces(`${parsedDevice.vendor}_${parsedDevice.type}`);\n    device_model = `${deviceVendor}/${browser}`;\n  }\n\n  return convertObjectToString({\n    os,\n    os_version,\n    sdk,\n    sdk_version,\n    device_model,\n    env,\n    domain: domainCategory,\n    is_prebuilt: !!frameworkInfo?.isPrebuilt,\n    framework: frameworkInfo?.type,\n    framework_version: frameworkInfo?.version,\n    framework_sdk_version: frameworkInfo?.sdkVersion,\n  });\n}\n\nfunction replaceSpaces(s: string) {\n  return s.replace(/ /g, '_');\n}\n\nconst convertObjectToString = (object: UserAgent, delimiter = ',') =>\n  Object.keys(object)\n    .filter(key => isPresent(object[key as keyof UserAgent]))\n    .map(key => `${key}:${object[key as keyof UserAgent]}`)\n    .join(delimiter);\n","import { v4 as uuid } from 'uuid';\nimport { AnalyticsEventLevel } from './AnalyticsEventLevel';\nimport { domainCategory } from './domain-analytics';\nimport { ISignalParamsProvider } from '../signal/ISignalSendParamsProvider';\nimport { getAnalyticsDeviceId } from '../utils/analytics-deviceId';\nimport { createUserAgent } from '../utils/user-agent';\n\ninterface AnalyticsEventInit {\n  name: string;\n  level: AnalyticsEventLevel;\n  includesPII?: boolean;\n  properties?: Record<string, any>;\n  timestamp?: number;\n}\n\ninterface SignalEventParams {\n  name: string;\n  info: any;\n  timestamp: number;\n}\n\nexport default class AnalyticsEvent implements ISignalParamsProvider<SignalEventParams> {\n  name: string;\n  level: AnalyticsEventLevel;\n  includesPII: boolean;\n  properties: Record<string, any>;\n  metadata: {\n    token?: string;\n    peer: {\n      peer_id?: string;\n      session_id?: string;\n      room_id?: string;\n      role?: string;\n      room_name?: string;\n      joined_at?: number;\n      template_id?: string;\n      session_started_at?: number;\n      user_name?: string;\n      user_data?: string;\n    };\n    userAgent: string;\n  } = {\n    peer: {},\n    userAgent: createUserAgent(),\n  };\n  timestamp: number;\n  event_id: string;\n  device_id: string;\n\n  constructor({ name, level, properties, includesPII, timestamp }: AnalyticsEventInit) {\n    this.name = name;\n    this.level = level;\n    this.includesPII = includesPII || false;\n    this.properties = properties || {};\n    this.timestamp = timestamp || new Date().getTime(); // Timestamp of generating the event\n    this.event_id = uuid();\n    this.device_id = getAnalyticsDeviceId();\n  }\n\n  toSignalParams() {\n    return {\n      name: this.name,\n      info: { ...this.properties, timestamp: this.timestamp, domain: domainCategory },\n      timestamp: new Date().getTime(), // Timestamp of sending the event\n    };\n  }\n}\n","import { PublishAnalyticPayload, SubscribeAnalyticPayload } from './stats/interfaces';\nimport { AdditionalAnalyticsProperties } from './AdditionalAnalyticsProperties';\nimport AnalyticsEvent from './AnalyticsEvent';\nimport { AnalyticsEventLevel } from './AnalyticsEventLevel';\nimport { IAnalyticsPropertiesProvider } from './IAnalyticsPropertiesProvider';\nimport { HMSException } from '../error/HMSException';\nimport { DeviceMap, SelectedDevices } from '../interfaces';\nimport { HMSTrackSettings } from '../media/settings/HMSTrackSettings';\nimport { HMSRemoteVideoTrack } from '../media/tracks/HMSRemoteVideoTrack';\n\nexport default class AnalyticsEventFactory {\n  private static KEY_REQUESTED_AT = 'requested_at';\n  private static KEY_RESPONDED_AT = 'responded_at';\n\n  static connect(\n    error?: Error,\n    additionalProperties?: AdditionalAnalyticsProperties,\n    requestedAt: Date = new Date(),\n    respondedAt: Date = new Date(),\n    endpoint?: string,\n  ) {\n    const name = this.eventNameFor('connect', error === undefined);\n    const level = error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO;\n\n    const properties = this.getPropertiesWithError(\n      {\n        ...additionalProperties,\n        [this.KEY_REQUESTED_AT]: requestedAt?.getTime(),\n        [this.KEY_RESPONDED_AT]: respondedAt?.getTime(),\n        endpoint,\n      },\n      error,\n    );\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static disconnect(error?: Error, additionalProperties?: AdditionalAnalyticsProperties) {\n    const name = 'disconnected';\n    const level = error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO;\n    const properties = this.getPropertiesWithError(additionalProperties, error);\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static preview({\n    error,\n    ...props\n  }: {\n    error?: Error;\n    time?: number;\n    init_response_time?: number;\n    ws_connect_time?: number;\n    on_policy_change_time?: number;\n    local_audio_track_time?: number;\n    local_video_track_time?: number;\n  }) {\n    const name = this.eventNameFor('preview', error === undefined);\n    const level = error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO;\n    const properties = this.getPropertiesWithError(props, error);\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static join({\n    error,\n    ...props\n  }: {\n    error?: Error;\n    is_preview_called?: boolean;\n    start?: Date;\n    end?: Date;\n    time?: number;\n    init_response_time?: number;\n    ws_connect_time?: number;\n    on_policy_change_time?: number;\n    local_audio_track_time?: number;\n    local_video_track_time?: number;\n    retries_join?: number;\n  }) {\n    const name = this.eventNameFor('join', error === undefined);\n    const level = error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO;\n\n    const properties = this.getPropertiesWithError({ ...props, is_preview_called: !!props.is_preview_called }, error);\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static publish({ devices, settings, error }: { devices?: DeviceMap; settings?: HMSTrackSettings; error?: Error }) {\n    const name = this.eventNameFor('publish', error === undefined);\n    const level = error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO;\n    const properties = this.getPropertiesWithError(\n      {\n        devices,\n        audio: settings?.audio,\n        video: settings?.video,\n      },\n      error,\n    );\n    return new AnalyticsEvent({\n      name,\n      level,\n      properties,\n    });\n  }\n\n  static hlsPlayerError(error: HMSException) {\n    return new AnalyticsEvent({\n      name: 'hlsPlayerError',\n      level: AnalyticsEventLevel.ERROR,\n      properties: this.getErrorProperties(error),\n    });\n  }\n  static subscribeFail(error: Error) {\n    const name = this.eventNameFor('subscribe', false);\n    const level = AnalyticsEventLevel.ERROR;\n    const properties = this.getErrorProperties(error);\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static leave() {\n    return new AnalyticsEvent({ name: 'leave', level: AnalyticsEventLevel.INFO });\n  }\n\n  static autoplayError() {\n    return new AnalyticsEvent({ name: 'autoplayError', level: AnalyticsEventLevel.ERROR });\n  }\n\n  static audioPlaybackError(error: HMSException) {\n    return new AnalyticsEvent({\n      name: 'audioPlaybackError',\n      level: AnalyticsEventLevel.ERROR,\n      properties: this.getErrorProperties(error),\n    });\n  }\n\n  static audioRecovered(message: string) {\n    return new AnalyticsEvent({\n      name: 'audioRecovered',\n      level: AnalyticsEventLevel.INFO,\n      properties: {\n        message,\n      },\n    });\n  }\n\n  static deviceChange({\n    isUserSelection,\n    selection,\n    type,\n    devices,\n    error,\n  }: {\n    isUserSelection?: boolean;\n    selection: Partial<SelectedDevices>;\n    type?: 'change' | 'list' | 'audioInput' | 'audioOutput' | 'video';\n    devices: DeviceMap;\n    error?: Error;\n  }) {\n    const name = this.eventNameFor(error ? 'publish' : `device.${type}`, error === undefined);\n    const level = error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO;\n    const properties = this.getPropertiesWithError({ selection, devices, isUserSelection }, error);\n    return new AnalyticsEvent({\n      name,\n      level,\n      properties,\n    });\n  }\n\n  static performance(stats: IAnalyticsPropertiesProvider) {\n    const name = 'perf.stats';\n    const level = AnalyticsEventLevel.INFO;\n    const properties = stats.toAnalyticsProperties();\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static rtcStats(stats: IAnalyticsPropertiesProvider) {\n    const name = 'rtc.stats';\n    const level = AnalyticsEventLevel.INFO;\n    const properties = stats.toAnalyticsProperties();\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static rtcStatsFailed(error: HMSException) {\n    const name = 'rtc.stats.failed';\n    const level = AnalyticsEventLevel.ERROR;\n\n    return new AnalyticsEvent({ name, level, properties: this.getErrorProperties(error) });\n  }\n\n  /**\n   * TODO: remove once everything is switched to server side degradation, this\n   * event can be handled on server side as well.\n   */\n  static degradationStats(track: HMSRemoteVideoTrack, isDegraded: boolean) {\n    const name = 'video.degradation.stats';\n    const level = AnalyticsEventLevel.INFO;\n    let properties: any = {\n      degradedAt: track.degradedAt,\n      trackId: track.trackId,\n    };\n\n    if (!isDegraded && track.degradedAt instanceof Date) {\n      // not degraded => restored\n      const restoredAt = new Date();\n      const duration = restoredAt.valueOf() - track.degradedAt.valueOf();\n      properties = { ...properties, duration, restoredAt };\n    }\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static audioDetectionFail(error: Error, device?: MediaDeviceInfo): AnalyticsEvent {\n    const properties = this.getPropertiesWithError({ device }, error);\n    const level = AnalyticsEventLevel.ERROR;\n    const name = 'audiopresence.failed';\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static previewNetworkQuality(properties: { downLink?: string; score?: number; error?: string }) {\n    return new AnalyticsEvent({\n      name: 'perf.networkquality.preview',\n      level: properties.error ? AnalyticsEventLevel.ERROR : AnalyticsEventLevel.INFO,\n      properties,\n    });\n  }\n\n  static publishStats(properties: PublishAnalyticPayload) {\n    return new AnalyticsEvent({\n      name: 'publisher.stats',\n      level: AnalyticsEventLevel.INFO,\n      properties,\n    });\n  }\n\n  static subscribeStats(properties: SubscribeAnalyticPayload) {\n    return new AnalyticsEvent({\n      name: 'subscriber.stats',\n      level: AnalyticsEventLevel.INFO,\n      properties,\n    });\n  }\n\n  static getKrispUsage(duration: number) {\n    return new AnalyticsEvent({\n      name: 'krisp.usage',\n      level: AnalyticsEventLevel.INFO,\n      properties: { duration },\n    });\n  }\n\n  static krispStart() {\n    return new AnalyticsEvent({\n      name: 'krisp.start',\n      level: AnalyticsEventLevel.INFO,\n    });\n  }\n\n  static krispStop() {\n    return new AnalyticsEvent({\n      name: 'krisp.stop',\n      level: AnalyticsEventLevel.INFO,\n    });\n  }\n\n  static interruption({\n    started,\n    type,\n    reason,\n    deviceInfo,\n  }: {\n    started: boolean;\n    type: string;\n    reason: string;\n    deviceInfo: Partial<MediaDeviceInfo>;\n  }) {\n    return new AnalyticsEvent({\n      name: `${started ? 'interruption.start' : 'interruption.stop'}`,\n      level: AnalyticsEventLevel.INFO,\n      properties: {\n        reason,\n        type,\n        ...deviceInfo,\n      },\n    });\n  }\n\n  private static eventNameFor(name: string, ok: boolean) {\n    const suffix = ok ? 'success' : 'failed';\n    return `${name}.${suffix}`;\n  }\n\n  private static getPropertiesWithError(initialProperties: any, error?: Error) {\n    const errorProperties = this.getErrorProperties(error);\n    initialProperties = { ...errorProperties, ...initialProperties };\n    return initialProperties;\n  }\n\n  private static getErrorProperties(error?: Error): Record<string, any> {\n    if (error) {\n      return error instanceof HMSException\n        ? error.toAnalyticsProperties()\n        : {\n            error_name: error.name,\n            error_message: error.message,\n            error_description: error.cause,\n          };\n    } else {\n      return {};\n    }\n  }\n}\n","export const stringifyMediaStreamTrack = (track: MediaStreamTrack) => {\n  if (!track) {\n    return '';\n  }\n  return `{\n    trackId: ${track.id};\n    kind: ${track.kind};\n    enabled: ${track.enabled};\n    muted: ${track.muted};\n    readyState: ${track.readyState};\n  }`;\n};\n","import { HMSTrackType } from './HMSTrackType';\nimport AnalyticsEventFactory from '../../analytics/AnalyticsEventFactory';\nimport { stringifyMediaStreamTrack } from '../../utils/json';\nimport HMSLogger from '../../utils/logger';\nimport { HMSMediaStream } from '../streams';\n\nexport type HMSTrackSource = 'regular' | 'screen' | 'plugin' | 'audioplaylist' | 'videoplaylist' | string;\n\nexport abstract class HMSTrack {\n  /**\n   * @internal\n   */\n  readonly stream: HMSMediaStream;\n  source?: HMSTrackSource;\n  peerId?: string;\n  transceiver?: RTCRtpTransceiver;\n\n  /**\n   * @internal to print as a helpful identifier alongside logs\n   */\n  logIdentifier = '';\n\n  /** The native mediastream track, for local, this changes on mute/unmute(for video),\n   * and on device change.\n   * @internal */\n  nativeTrack: MediaStreamTrack;\n\n  /**\n   * Firefox doesn't respect the track id as sent from the backend when calling peerconnection.ontrack callback. This\n   * breaks correlation of future track updates from backend. So we're storing the sdp track id as present in the\n   * original offer along with the track as well and will let this override the native track id for any correlation\n   * purpose.\n   * This applies for remote tracks only.\n   * @internal */\n  private sdpTrackId?: string;\n\n  /**\n   * @internal\n   * The local track id is changed on mute/unmute or when device id changes, this is abstracted as an internal\n   * detail of HMSTrack and the variable is used for this enacapsulation where the first track id is remembered\n   * and treated as the fixed track id for this HMSTrack. This simplifies things for the user of the sdk who\n   * do not have to worry about changing track IDs.\n   * This applies for local tracks only.\n   */\n  private firstTrackId?: string;\n\n  abstract readonly type: HMSTrackType;\n\n  public get enabled(): boolean {\n    return this.nativeTrack.enabled;\n  }\n\n  /**\n   * firstTrackId => encapsulates change in local track ids\n   * sdpTrackId => fixes remote track updates correlation on firefox\n   */\n  public get trackId(): string {\n    return this.firstTrackId || this.sdpTrackId || this.nativeTrack.id;\n  }\n\n  getMediaTrackSettings(): MediaTrackSettings {\n    return this.nativeTrack.getSettings();\n  }\n\n  async setEnabled(value: boolean): Promise<void> {\n    this.nativeTrack.enabled = value;\n  }\n\n  protected constructor(stream: HMSMediaStream, track: MediaStreamTrack, source?: HMSTrackSource) {\n    this.stream = stream;\n    this.nativeTrack = track;\n    this.source = source;\n  }\n\n  /**\n   * @internal\n   */\n  setSdpTrackId(sdpTrackId: string) {\n    this.sdpTrackId = sdpTrackId;\n  }\n\n  /**\n   * @internal\n   */\n  protected setFirstTrackId(trackId: string) {\n    this.firstTrackId = trackId;\n  }\n\n  isTrackNotPublishing = () => {\n    return this.nativeTrack.readyState === 'ended' || this.nativeTrack.muted;\n  };\n\n  /**\n   * @internal\n   * It will send event to analytics when interruption start/stop\n   */\n  sendInterruptionEvent({ started, reason }: { started: boolean; reason: string }) {\n    return AnalyticsEventFactory.interruption({\n      started,\n      type: this.type,\n      reason,\n      deviceInfo: {\n        deviceId: this.nativeTrack.getSettings().deviceId,\n        groupId: this.nativeTrack.getSettings().groupId,\n      },\n    });\n  }\n  /**\n   * @internal\n   * take care of -\n   * 1. https://bugs.chromium.org/p/chromium/issues/detail?id=1232649\n   * 2. stopping any tracks\n   * 3. plugins related cleanups and stopping\n   */\n  cleanup() {\n    HMSLogger.d('[HMSTrack]', 'Stopping track', this.toString());\n    this.nativeTrack?.stop();\n  }\n\n  toString() {\n    return `{\n      streamId: ${this.stream.id};\n      peerId: ${this.peerId};\n      trackId: ${this.trackId};\n      mid: ${this.transceiver?.mid || '-'};\n      logIdentifier: ${this.logIdentifier};\n      source: ${this.source};\n      enabled: ${this.enabled};\n      nativeTrack: ${stringifyMediaStreamTrack(this.nativeTrack)};\n    }`;\n  }\n}\n","import { HMSTrack, HMSTrackSource } from './HMSTrack';\nimport { HMSTrackType } from './HMSTrackType';\nimport HMSLogger from '../../utils/logger';\nimport { isFirefox } from '../../utils/support';\nimport { HMSMediaStream, HMSRemoteStream } from '../streams';\n\nexport class HMSAudioTrack extends HMSTrack {\n  readonly type: HMSTrackType = HMSTrackType.AUDIO;\n  private audioElement: HTMLAudioElement | null = null;\n  private outputDevice?: MediaDeviceInfo;\n\n  constructor(stream: HMSMediaStream, track: MediaStreamTrack, source?: string) {\n    super(stream, track, source as HMSTrackSource);\n    if (track.kind !== 'audio') {\n      throw new Error(\"Expected 'track' kind = 'audio'\");\n    }\n  }\n\n  getVolume() {\n    // floor is required because of floating-point precision. e.g 0.55*100 gives 55.00000000000001\n    return this.audioElement ? Math.floor(this.audioElement.volume * 100) : null;\n  }\n\n  async setVolume(value: number) {\n    if (value < 0 || value > 100) {\n      throw Error('Please pass a valid number between 0-100');\n    }\n    // Don't subscribe to audio when volume is 0\n    await this.subscribeToAudio(value === 0 ? false : this.enabled);\n    if (this.audioElement) {\n      this.audioElement.volume = value / 100;\n    }\n  }\n\n  setAudioElement(element: HTMLAudioElement | null) {\n    HMSLogger.d('[HMSAudioTrack]', this.logIdentifier, 'adding audio element', `${this}`, element);\n    this.audioElement = element;\n  }\n\n  /**\n   * @internal\n   * @returns {HTMLAudioElement | null}\n   */\n  getAudioElement(): HTMLAudioElement | null {\n    return this.audioElement;\n  }\n\n  getOutputDevice() {\n    return this.outputDevice;\n  }\n\n  cleanup() {\n    super.cleanup();\n    if (this.audioElement) {\n      this.audioElement.srcObject = null;\n      this.audioElement.remove();\n      this.audioElement = null;\n    }\n  }\n\n  async setOutputDevice(device?: MediaDeviceInfo) {\n    if (!device) {\n      HMSLogger.d('[HMSAudioTrack]', this.logIdentifier, 'device is null', `${this}`);\n      return;\n    }\n    if (!this.audioElement) {\n      HMSLogger.d('[HMSAudioTrack]', this.logIdentifier, 'no audio element to set output', `${this}`);\n      this.outputDevice = device;\n      return;\n    }\n    try {\n      // @ts-ignore\n      if (typeof this.audioElement.setSinkId === 'function') {\n        if (isFirefox) {\n          // using setSinkId in firefox disables echo cancellation (introduced in Firefox 116)\n          // todo: GoogleMeet doesn't set sinkId for all 3 audio elements, how do they redirect audio then?\n          //\n          // refer: https://100ms.atlassian.net/browse/LIVE-1992\n          // refer: https://bugzilla.mozilla.org/show_bug.cgi?id=1849108\n          // refer: https://bugzilla.mozilla.org/show_bug.cgi?id=1848283\n          // refer: https://github.com/aws/amazon-chime-sdk-js/issues/2742\n        } else {\n          // @ts-ignore\n          await this.audioElement?.setSinkId(device.deviceId);\n        }\n\n        this.outputDevice = device;\n      }\n    } catch (error) {\n      HMSLogger.d('[HMSAudioTrack]', 'error in setSinkId', error);\n    }\n  }\n\n  protected async subscribeToAudio(value: boolean) {\n    if (this.stream instanceof HMSRemoteStream) {\n      await this.stream.setAudio(value, this.trackId, this.logIdentifier);\n    }\n  }\n}\n","import { DeviceMap, SelectedDevices } from '../interfaces';\nimport { LocalStorage } from '../utils/local-storage';\nimport HMSLogger from '../utils/logger';\n\ntype DeviceInfo = { deviceId?: string; groupId?: string };\n/**\n * This class is to manage storing and retrieving selected devices\n * from localstorage\n * @internal\n */\nclass DeviceStorage {\n  private storage = new LocalStorage<SelectedDevices>('hms-device-selection');\n  private remember = false;\n  private devices?: DeviceMap;\n  private readonly TAG = '[HMSDeviceStorage]';\n\n  setDevices(devices: DeviceMap) {\n    this.devices = devices;\n  }\n\n  rememberDevices(value: boolean) {\n    this.remember = value;\n  }\n\n  /**\n   * This will update the passed in type value in storage\n   * @param {string} type - One of audioInput | videoInput | audioOutput\n   * @param {DeviceInfo} param\n   * @returns {void}\n   */\n  updateSelection(type: 'audioInput' | 'videoInput' | 'audioOutput', { deviceId, groupId }: DeviceInfo) {\n    if (!this.devices || !this.remember) {\n      return;\n    }\n    const newSelection = this.devices[type].find(device => this.isSame({ deviceId, groupId }, device));\n    if (!newSelection) {\n      HMSLogger.w(this.TAG, `Could not find device with deviceId: ${deviceId}, groupId: ${groupId}`);\n      return;\n    }\n    const selectedDevices = this.storage.get() || {};\n    if (type === 'audioOutput') {\n      selectedDevices[type] = newSelection as MediaDeviceInfo;\n    } else {\n      selectedDevices[type] = newSelection as MediaDeviceInfo;\n    }\n    this.storage.set(selectedDevices);\n  }\n\n  getSelection() {\n    if (!this.remember) {\n      return undefined;\n    }\n    return this.storage.get();\n  }\n\n  cleanup() {\n    this.remember = false;\n    this.devices = undefined;\n  }\n\n  private isSame(current: DeviceInfo, device: DeviceInfo) {\n    // Safari doesn't give groupId from nativeTrack. Check if groupId's match or current groupId is not present\n    return current.deviceId === device.deviceId && (current.groupId === device.groupId || !current.groupId);\n  }\n}\n\nexport const DeviceStorageManager = new DeviceStorage();\n","/**\n * A plugin implementing this interface can be registered with HMSLocalAudioTrack to transform, process or\n * analyze the local audio track.These can include applications like background noise removal, speech commands, live\n * analysis of audio etc. The below functions are required for the sdk to properly use the plugin, usually\n * the plugin would also be exposing some public functions of its own for the UI to control its working.\n */\n\nexport interface HMSAudioPlugin {\n  /**\n   * This function will be called by the SDK for audio track which the plugin needs to process.\n   * The reason audio context is also part of the interface is that it's recommended to reuse on audio context\n   * instead of creating new for every use - https://developer.mozilla.org/en-US/docs/Web/API/AudioContext\n   */\n  processAudioTrack(ctx: AudioContext, source: AudioNode): Promise<AudioNode>;\n\n  /**\n   * This function will be called before the call to init, it is used to check whether the plugin supports current\n   * OS, browser and audio device or not. An error object will be thrown back to the user if they try to use an unsupported plugin.\n   */\n  checkSupport(ctx?: AudioContext): HMSPluginSupportResult;\n\n  /**\n   * @deprecated. Will be deleted in future updates. Use checkSupport instead.\n   */\n  isSupported(): boolean;\n\n  /**\n   * This function will be called in the beginning for initialization which may include tasks like setting up\n   * variables, loading ML models etc. This can be used by a plugin to ensure it's prepared at the time\n   * processAudio is called.\n   */\n  init(): Promise<void> | void;\n\n  /**\n   * The name is meant to uniquely specify a plugin instance. This will be used to track number of plugins\n   * added to the track, and same name won't be allowed twice.\n   */\n  getName(): string;\n\n  /**\n   This sets the Plugin type @see HMSAudioPluginType, processing will happen\n   based on the type of plugin\n   */\n  getPluginType(): HMSAudioPluginType;\n  /*\n   * the plugin can use this function to dispose off its resources. It'll be called when the plugin instance is\n   * no longer needed at the end.\n   */\n  stop(): void;\n}\n\n/**\n * Specifies the type of the plugin a transforming plugin will get an output audio node to give the resulting\n * transformation. While an analyzing plugin will only be passed the input node.\n * For analyse plugins, you can return the source node passed to plugin.processTrack to not modify anything\n */\nexport enum HMSAudioPluginType {\n  TRANSFORM = 'TRANSFORM',\n  ANALYZE = 'ANALYZE',\n}\n\nexport interface HMSPluginSupportResult {\n  isSupported: boolean;\n  errType?: HMSPluginUnsupportedTypes;\n  errMsg?: string;\n}\n\nexport enum HMSPluginUnsupportedTypes {\n  PLATFORM_NOT_SUPPORTED = 'PLATFORM_NOT_SUPPORTED',\n  DEVICE_NOT_SUPPORTED = 'DEVICE_NOT_SUPPORTED',\n}\n","import AnalyticsEvent from './AnalyticsEvent';\nimport { AnalyticsEventLevel } from './AnalyticsEventLevel';\nimport { HMSException } from '../error/HMSException';\n\nexport default class MediaPluginsAnalyticsFactory {\n  static failure(pluginName: string, error: HMSException) {\n    const name = 'mediaPlugin.failed';\n    const level = AnalyticsEventLevel.ERROR;\n    const properties = { plugin_name: pluginName, ...error.toAnalyticsProperties() };\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static audioPluginFailure(pluginName: string, sampleRate: number, error: HMSException) {\n    const name = 'mediaPlugin.failed';\n    const level = AnalyticsEventLevel.ERROR;\n    const properties = { plugin_name: pluginName, sampleRate: sampleRate, ...error.toAnalyticsProperties() };\n\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static audioPluginStats({\n    pluginName,\n    duration,\n    loadTime,\n    sampleRate,\n  }: {\n    pluginName: string;\n    duration: number;\n    loadTime: number;\n    sampleRate: number;\n  }) {\n    const name = 'mediaPlugin.stats';\n    const level = AnalyticsEventLevel.INFO;\n    const properties = {\n      plugin_name: pluginName,\n      duration: duration,\n      load_time: loadTime,\n      sampleRate: sampleRate,\n    };\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static added(pluginName: string, added_at: number) {\n    const name = 'mediaPlugin.added';\n    const level = AnalyticsEventLevel.INFO;\n    const properties = {\n      plugin_name: pluginName,\n      added_at: added_at,\n    };\n    return new AnalyticsEvent({ name, level, properties });\n  }\n\n  static stats({\n    pluginName,\n    duration,\n    loadTime,\n    avgPreProcessingTime,\n    avgProcessingTime,\n    inputFrameRate,\n    pluginFrameRate,\n  }: {\n    pluginName: string;\n    duration: number;\n    loadTime: number;\n    avgPreProcessingTime?: number;\n    avgProcessingTime?: number;\n    inputFrameRate?: number;\n    pluginFrameRate?: number;\n  }) {\n    const name = 'mediaPlugin.stats';\n    const level = AnalyticsEventLevel.INFO;\n    const properties = {\n      plugin_name: pluginName,\n      duration: duration,\n      load_time: loadTime,\n      avg_preprocessing_time: avgPreProcessingTime,\n      avg_processing_time: avgProcessingTime,\n      input_frame_rate: inputFrameRate,\n      plugin_frame_rate: pluginFrameRate,\n    };\n    return new AnalyticsEvent({ name, level, properties });\n  }\n}\n","import MediaPluginsAnalyticsFactory from '../../analytics/MediaPluginsAnalyticsFactory';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { HMSException } from '../../error/HMSException';\nimport { EventBus } from '../../events/EventBus';\nimport HMSLogger from '../../utils/logger';\n\nexport class AudioPluginsAnalytics {\n  private readonly TAG = '[AudioPluginsAnalytics]';\n  private readonly initTime: Record<string, number>;\n  private readonly addedTimestamps: Record<string, number>;\n  private readonly pluginAdded: Record<string, boolean>;\n  private readonly pluginSampleRate: Record<string, number>;\n\n  constructor(private eventBus: EventBus) {\n    this.initTime = {};\n    this.addedTimestamps = {};\n    this.pluginAdded = {};\n    this.pluginSampleRate = {};\n  }\n\n  added(name: string, sampleRate: number) {\n    this.pluginAdded[name] = true;\n    this.addedTimestamps[name] = Date.now();\n    this.initTime[name] = 0;\n    this.pluginSampleRate[name] = sampleRate;\n    this.eventBus.analytics.publish(MediaPluginsAnalyticsFactory.added(name, this.addedTimestamps[name]));\n  }\n\n  removed(name: string) {\n    //send stats\n    if (this.pluginAdded[name]) {\n      const stats = {\n        pluginName: name,\n        // duration in seconds\n        duration: Math.floor((Date.now() - this.addedTimestamps[name]) / 1000),\n        loadTime: this.initTime[name],\n        sampleRate: this.pluginSampleRate[name],\n      };\n      //send stats\n      this.eventBus.analytics.publish(MediaPluginsAnalyticsFactory.audioPluginStats(stats));\n      //clean the plugin details\n      this.clean(name);\n    }\n  }\n\n  failure(name: string, error: HMSException) {\n    // send failure event\n    if (this.pluginAdded[name]) {\n      this.eventBus.analytics.publish(\n        MediaPluginsAnalyticsFactory.audioPluginFailure(name, this.pluginSampleRate[name], error),\n      );\n      //clean the plugin details\n      this.clean(name);\n    }\n  }\n\n  async initWithTime<T>(name: string, initFn: () => Promise<T>) {\n    if (this.initTime[name]) {\n      HMSLogger.i(this.TAG, `Plugin Already loaded ${name}, time it took: ${this.initTime[name]}`);\n      return;\n    }\n    let time: number | undefined = undefined;\n    try {\n      time = await this.timeInMs(initFn);\n      HMSLogger.i(this.TAG, `Time taken for Plugin ${name} initialization : ${time}`);\n    } catch (e) {\n      //Failed during initialization of plugin(model loading etc...)\n      const err = ErrorFactory.MediaPluginErrors.InitFailed(\n        HMSAction.AUDIO_PLUGINS,\n        `failed during initialization of plugin${(e as Error).message || e}`,\n      );\n      HMSLogger.e(this.TAG, err);\n      this.failure(name, err);\n      throw err;\n    }\n    if (time) {\n      this.initTime[name] = time;\n    }\n  }\n\n  private async timeInMs<T>(fn: () => Promise<T>): Promise<number> {\n    const start = Date.now();\n    await fn();\n    return Math.floor(Date.now() - start);\n  }\n\n  private clean(name: string) {\n    delete this.addedTimestamps[name];\n    delete this.initTime[name];\n    delete this.pluginAdded[name];\n    delete this.pluginSampleRate[name];\n  }\n}\n","export const standardMediaConstraints = [\n  { echoCancellation: { exact: true } },\n  { highpassFilter: { exact: true } },\n  { audioMirroring: { exact: true } },\n  // These options can vary depending on the audio plugin\n  //   { autoGainControl: { exact: true } },\n  //   { noiseSuppression: { exact: true } },\n];\n","import { HMSAudioTrack, HMSTrack, HMSVideoTrack } from '../../media/tracks';\nimport { HMSRole } from '../role';\n\nexport enum HMSPeerType {\n  SIP = 'sip',\n  REGULAR = 'regular',\n}\n\nexport interface HMSPeer {\n  peerId: string;\n  name: string;\n  isLocal: boolean;\n  joinedAt?: Date;\n  customerUserId?: string;\n  metadata?: string;\n  audioTrack?: HMSAudioTrack;\n  videoTrack?: HMSVideoTrack;\n  auxiliaryTracks: HMSTrack[];\n  role?: HMSRole;\n  networkQuality?: number;\n  groups?: string[];\n  realtime?: boolean;\n  isHandRaised: boolean;\n  type: HMSPeerType;\n\n  updateRole(newRole: HMSRole): void;\n  updateName(newName: string): void;\n  updateMetadata(data: string): void;\n  updateNetworkQuality(value: number): void;\n  updateGroups(groups: string[]): void;\n}\n","import { ServerError } from './internal';\nimport { HMSException } from '../error/HMSException';\n\nexport enum HMSRecordingState {\n  NONE = 'none',\n  INITIALISED = 'initialised',\n  STARTED = 'started',\n  PAUSED = 'paused',\n  RESUMED = 'resumed',\n  STOPPED = 'stopped',\n  FAILED = 'failed',\n}\n\nexport enum HMSStreamingState {\n  NONE = 'none',\n  INITIALISED = 'initialised',\n  STARTED = 'started',\n  STOPPED = 'stopped',\n  FAILED = 'failed',\n}\n\nexport interface HMSRoom {\n  id: string;\n  name?: string;\n  sessionId?: string;\n  joinedAt?: Date;\n  startedAt?: Date;\n  recording: HMSRecording;\n  rtmp: HMSRTMP;\n  hls: HMSHLS;\n  peerCount?: number;\n  templateId?: string;\n  description?: string;\n  max_size?: number;\n  large_room_optimization?: boolean;\n  isEffectsEnabled?: boolean;\n  disableNoneLayerRequest?: boolean;\n  isVBEnabled?: boolean;\n  effectsKey?: string;\n  isHipaaEnabled?: boolean;\n  isNoiseCancellationEnabled?: boolean;\n  transcriptions?: HMSTranscriptionInfo[];\n}\n\nexport interface HMSRecording {\n  browser: HMSBrowserRecording;\n  server: HMSSFURecording;\n  hls: HMSHLSRecording;\n}\n\nexport interface HMSBrowserRecording {\n  running: boolean;\n  startedAt?: Date;\n  state?: HMSRecordingState;\n  error?: HMSException;\n}\n\nexport interface HMSSFURecording {\n  running: boolean;\n  startedAt?: Date;\n  state?: HMSRecordingState;\n  error?: HMSException;\n}\n\nexport interface HMSHLSRecording {\n  running: boolean;\n  initialisedAt?: Date;\n  startedAt?: Date;\n  state?: HMSRecordingState;\n  error?: ServerError;\n  /**\n   * if the final output is one file or one file per hls layer\n   */\n  singleFilePerLayer?: boolean;\n  /**\n   * if video on demand needs to be turned on, false by default\n   */\n  hlsVod?: boolean;\n}\n\nexport interface HMSRTMP {\n  running: boolean;\n  startedAt?: Date;\n  state?: HMSStreamingState;\n  error?: HMSException;\n}\n\nexport interface HMSHLS {\n  running: boolean;\n  variants: Array<HLSVariant>;\n  error?: HMSException;\n}\n\nexport enum HLSPlaylistType {\n  DVR = 'dvr',\n  NO_DVR = 'no-dvr',\n}\n\nexport enum HLSStreamType {\n  REGULAR = 'regular',\n  SCREEN = 'screen',\n  COMPOSITE = 'composite',\n}\nexport interface HLSVariant {\n  url: string;\n  playlist_type?: HLSPlaylistType;\n  meetingURL?: string;\n  metadata?: string;\n  startedAt?: Date;\n  initialisedAt?: Date;\n  state?: HMSStreamingState;\n  stream_type?: HLSStreamType;\n}\n\n/*\nTranscription related details\n*/\nexport enum HMSTranscriptionState {\n  INITIALISED = 'initialised',\n  STARTED = 'started',\n  STOPPED = 'stopped',\n  FAILED = 'failed',\n}\nexport enum HMSTranscriptionMode {\n  CAPTION = 'caption',\n}\nexport interface HMSTranscriptionInfo {\n  state?: HMSTranscriptionState;\n  mode?: HMSTranscriptionMode;\n  initialised_at?: Date;\n  started_at?: Date;\n  updated_at?: Date;\n  stopped_at?: Date;\n  error?: HMSException;\n}\n","export enum HMSSimulcastLayer {\n  NONE = 'none',\n  LOW = 'low',\n  MEDIUM = 'medium',\n  HIGH = 'high',\n}\n\nexport interface SimulcastLayer {\n  rid: string;\n  scaleResolutionDownBy: number;\n  maxBitrate: number;\n  maxFramerate: number;\n}\n\nexport interface SimulcastResolution {\n  width: number;\n  height: number;\n}\n\nexport interface SimulcastLayers {\n  layers?: SimulcastLayer[];\n}\n\nexport type HMSPreferredSimulcastLayer = Exclude<HMSSimulcastLayer, HMSSimulcastLayer.NONE>;\nexport interface HMSSimulcastLayerDefinition {\n  layer: HMSPreferredSimulcastLayer;\n  resolution: SimulcastResolution;\n}\n\nexport type RID = 'f' | 'h' | 'q';\n\nexport const simulcastMapping = {\n  f: HMSSimulcastLayer.HIGH,\n  h: HMSSimulcastLayer.MEDIUM,\n  q: HMSSimulcastLayer.LOW,\n};\n","export enum HMSVideoCodec {\n  VP8 = 'vp8',\n  VP9 = 'vp9',\n  H264 = 'h264',\n}\n\nexport enum HMSAudioCodec {\n  OPUS = 'opus',\n}\n\n/**\n * Refer https://developer.mozilla.org/en-US/docs/Web/API/MediaTrackConstraints/facingMode\n * for more details.\n */\nexport enum HMSFacingMode {\n  USER = 'user',\n  ENVIRONMENT = 'environment',\n  LEFT = 'left',\n  RIGHT = 'right',\n}\n\nexport enum HMSAudioMode {\n  VOICE = 'voice',\n  MUSIC = 'music',\n}\n\nexport interface HMSAudioTrackSettings {\n  volume?: number;\n  codec?: HMSAudioCodec;\n  maxBitrate?: number;\n  deviceId?: string;\n  advanced?: Array<MediaTrackConstraintSet>;\n  audioMode?: HMSAudioMode;\n}\n\nexport interface HMSVideoTrackSettings {\n  width?: number;\n  height?: number;\n  codec?: HMSVideoCodec;\n  maxFramerate?: number;\n  maxBitrate?: number;\n  deviceId?: string;\n  advanced?: Array<MediaTrackConstraintSet>;\n  facingMode?: HMSFacingMode;\n}\n\n/**\n * Config to have control over screenshare being captured. Note that\n * not all fields are supported on all browsers. Even when they're supported\n * the fields acts as hints and the browser can override them.\n */\nexport interface HMSScreenShareConfig {\n  /**\n   * discard the video and only share audio track with others, useful\n   * for sharing music.\n   * @default false\n   */\n  audioOnly?: boolean;\n  /**\n   * do not give an option to share audio while screen sharing.\n   * @default false\n   */\n  videoOnly?: boolean;\n  /**\n   * preselect the relevant tab in screenshare menu\n   * browser - for preferring a browser tab\n   * window - for application window\n   * monitor - for full screen\n   * @default monitor\n   */\n  displaySurface?: 'browser' | 'monitor' | 'window';\n  /**\n   * show the current tab first in supported browser, throws\n   * error if user doesn't select current tab for sharing.\n   * @default false\n   */\n  forceCurrentTab?: boolean;\n  /**\n   * show the current tab first in supported browser, but don't throw error\n   * if user selects something else.\n   * @default false\n   */\n  preferCurrentTab?: boolean;\n  /**\n   * whether to show an option for sharing the current tab in the screen share\n   * prompt. Screen sharing current tab might lead to hall of mirrors effect.\n   * Default is exclude, if either of forceCurrentTab or preferCurrentTab are true,\n   * this is set to include.\n   * @default exclude\n   */\n  selfBrowserSurface?: 'include' | 'exclude';\n  /**\n   * whether to hint browser to show a \"share this tab instead\" option when\n   * tab is shared.\n   * Default is include, set to exclude if forceCurrentTab is true\n   * @default include\n   */\n  surfaceSwitching?: 'include' | 'exclude';\n  /**\n   * whether to show option for sharing system level audio if full screen\n   * is being shared. Not applicable if isVideoOnly is true.\n   * Note that sharing system audio will cause echo if mic is on.\n   * @default exclude\n   */\n  systemAudio?: 'include' | 'exclude';\n  /**\n   * used for region capture in screenshare, if the current tab is being screenshared\n   * the screenshare video track will be cropped to only this element. Will throw\n   * error if the element is not present in DOM.\n   */\n  cropElement?: HTMLDivElement;\n  /**\n   * used for region capture in screenshare, the screenshare video track will be\n   * cropped to only the passed in cropTarget. This cropTarget must come from\n   * the tab which is being shared\n   */\n  cropTarget?: object;\n}\n\nexport interface ScreenCaptureHandle {\n  handle: string;\n  exposeOrigin: boolean;\n}\n\nexport interface ScreenCaptureHandleConfig extends ScreenCaptureHandle {\n  permittedOrigins: string[];\n}\n","import { HMSException } from '../error/HMSException';\n\nexport interface HMSDeviceChangeEvent {\n  isUserSelection?: boolean;\n  error?: HMSException;\n  devices?: DeviceMap;\n  selection?: Partial<MediaDeviceInfo>;\n  type: 'audioOutput' | 'audioInput' | 'video';\n}\n\nexport enum DeviceType {\n  videoInput = 'videoInput',\n  audioInput = 'audioInput',\n  audioOutput = 'audioOutput',\n}\n\nexport interface DeviceMap {\n  [DeviceType.audioInput]: MediaDeviceInfo[];\n  [DeviceType.audioOutput]: MediaDeviceInfo[];\n  [DeviceType.videoInput]: MediaDeviceInfo[];\n}\n\nexport interface DeviceChangeListener {\n  onDeviceChange?(event: HMSDeviceChangeEvent): void;\n}\n\nexport type SelectedDevices = {\n  [DeviceType.audioInput]?: MediaDeviceInfo;\n  [DeviceType.videoInput]?: MediaDeviceInfo;\n  [DeviceType.audioOutput]?: MediaDeviceInfo;\n};\n","import { standardMediaConstraints } from './constants';\nimport { IAnalyticsPropertiesProvider } from '../../analytics/IAnalyticsPropertiesProvider';\nimport { HMSAudioCodec, HMSAudioMode, HMSAudioTrackSettings as IHMSAudioTrackSettings } from '../../interfaces';\n\nexport class HMSAudioTrackSettingsBuilder {\n  private _volume = 1.0;\n  private _codec?: HMSAudioCodec = HMSAudioCodec.OPUS;\n  private _maxBitrate?: number = 32;\n  private _deviceId = 'default';\n  private _audioMode: HMSAudioMode = HMSAudioMode.VOICE;\n  private _advanced: Array<MediaTrackConstraintSet> = [\n    ...standardMediaConstraints,\n    { autoGainControl: { exact: true } },\n    // @ts-ignore\n    { noiseSuppression: { exact: true } },\n  ];\n  volume(volume: number) {\n    if (!(0.0 <= volume && volume <= 1.0)) {\n      throw Error('volume can only be in range [0.0, 1.0]');\n    }\n    this._volume = volume;\n    return this;\n  }\n\n  codec(codec?: HMSAudioCodec) {\n    this._codec = codec;\n    return this;\n  }\n\n  maxBitrate(maxBitrate?: number) {\n    if (maxBitrate && maxBitrate <= 0) {\n      throw Error('maxBitrate should be >= 1');\n    }\n    this._maxBitrate = this._audioMode === HMSAudioMode.MUSIC ? 320 : maxBitrate;\n    return this;\n  }\n\n  deviceId(deviceId: string) {\n    // TODO: Validate if device-id is OK\n    this._deviceId = deviceId;\n    return this;\n  }\n\n  audioMode(mode: HMSAudioMode = HMSAudioMode.VOICE) {\n    this._audioMode = mode;\n    if (this._audioMode === HMSAudioMode.MUSIC) {\n      this._maxBitrate = 320;\n    } else {\n      this._maxBitrate = 32;\n    }\n    return this;\n  }\n\n  advanced(advanced: Array<MediaTrackConstraintSet>) {\n    this._advanced = advanced;\n    return this;\n  }\n\n  build() {\n    return new HMSAudioTrackSettings(\n      this._volume,\n      this._codec,\n      this._maxBitrate,\n      this._deviceId,\n      this._advanced,\n      this._audioMode,\n    );\n  }\n}\n\nexport class HMSAudioTrackSettings implements IHMSAudioTrackSettings, IAnalyticsPropertiesProvider {\n  readonly volume?: number;\n  readonly codec?: HMSAudioCodec;\n  readonly maxBitrate?: number;\n  readonly deviceId?: string;\n  readonly advanced?: Array<MediaTrackConstraintSet>;\n  readonly audioMode?: HMSAudioMode;\n\n  constructor(\n    volume?: number,\n    codec?: HMSAudioCodec,\n    maxBitrate?: number,\n    deviceId?: string,\n    advanced?: Array<MediaTrackConstraintSet>,\n    audioMode?: HMSAudioMode,\n  ) {\n    this.volume = volume;\n    this.codec = codec;\n    this.maxBitrate = maxBitrate;\n    this.deviceId = deviceId;\n    this.advanced = advanced;\n    this.audioMode = audioMode;\n    if (this.audioMode === HMSAudioMode.MUSIC) {\n      this.maxBitrate = 320;\n    } else {\n      this.maxBitrate = 32;\n    }\n  }\n\n  toConstraints(): MediaTrackConstraints {\n    return {\n      deviceId: this.deviceId,\n      advanced: this.audioMode === HMSAudioMode.MUSIC ? [] : this.advanced,\n    };\n  }\n\n  toAnalyticsProperties() {\n    return {\n      audio_bitrate: this.maxBitrate,\n      audio_codec: this.codec,\n    };\n  }\n}\n","import { IAnalyticsPropertiesProvider } from '../../analytics/IAnalyticsPropertiesProvider';\nimport { HMSFacingMode, HMSVideoCodec, HMSVideoTrackSettings as IHMSVideoTrackSettings } from '../../interfaces';\nimport { isMobile } from '../../utils/support';\n\nexport class HMSVideoTrackSettingsBuilder {\n  private _width?: number = 320;\n  private _height?: number = 180;\n  private _codec?: HMSVideoCodec = HMSVideoCodec.VP8;\n  private _maxFramerate?: number = 30;\n  private _maxBitrate?: number = 150;\n  private _deviceId?: string;\n  private _facingMode?: HMSFacingMode;\n  private _advanced: Array<MediaTrackConstraintSet> = [];\n\n  setWidth(width?: number) {\n    this._width = width;\n    return this;\n  }\n\n  setHeight(height?: number) {\n    this._height = height;\n    return this;\n  }\n\n  codec(codec?: HMSVideoCodec) {\n    this._codec = codec;\n    return this;\n  }\n\n  maxFramerate(maxFramerate?: number) {\n    if (maxFramerate && maxFramerate <= 0) {\n      throw Error('maxFramerate should be >= 1');\n    }\n    this._maxFramerate = maxFramerate;\n    return this;\n  }\n\n  /**\n   * @param useDefault Ignored if maxBitrate is valid.\n   * If true and maxBitrate is undefined - sets a default value.\n   * If false and maxBitrate is undefined - sets undefined.\n   */\n  maxBitrate(maxBitrate?: number, useDefault = true) {\n    if (typeof maxBitrate === 'number' && maxBitrate <= 0) {\n      throw Error('maxBitrate should be >= 1');\n    }\n    this._maxBitrate = maxBitrate;\n    if (!this._maxBitrate && useDefault) {\n      this._maxBitrate = 150_000;\n    }\n    return this;\n  }\n\n  deviceId(deviceId: string) {\n    // TODO: Validate if device-id is OK\n    this._deviceId = deviceId;\n    return this;\n  }\n\n  advanced(advanced: Array<MediaTrackConstraintSet>) {\n    this._advanced = advanced;\n    return this;\n  }\n\n  facingMode(mode: HMSFacingMode) {\n    this._facingMode = mode;\n    return this;\n  }\n\n  build() {\n    return new HMSVideoTrackSettings(\n      this._width,\n      this._height,\n      this._codec,\n      this._maxFramerate,\n      this._deviceId,\n      this._advanced,\n      this._maxBitrate,\n      this._facingMode,\n    );\n  }\n}\n\nexport class HMSVideoTrackSettings implements IHMSVideoTrackSettings, IAnalyticsPropertiesProvider {\n  readonly width?: number;\n  readonly height?: number;\n  readonly codec?: HMSVideoCodec;\n  readonly maxFramerate?: number;\n  readonly maxBitrate?: number;\n  readonly deviceId?: string;\n  readonly advanced?: Array<MediaTrackConstraintSet>;\n  facingMode?: HMSFacingMode;\n\n  constructor(\n    width?: number,\n    height?: number,\n    codec?: HMSVideoCodec,\n    maxFramerate?: number,\n    deviceId?: string | undefined,\n    advanced?: Array<MediaTrackConstraintSet>,\n    maxBitrate?: number,\n    facingMode?: HMSFacingMode,\n  ) {\n    this.width = width;\n    this.height = height;\n    this.codec = codec;\n    this.maxFramerate = maxFramerate;\n    this.maxBitrate = maxBitrate;\n    this.deviceId = deviceId;\n    this.advanced = advanced;\n    this.facingMode = facingMode;\n  }\n\n  toConstraints(isScreenShare?: boolean): MediaTrackConstraints {\n    let dimensionConstraintKey = 'ideal';\n    if (isScreenShare) {\n      dimensionConstraintKey = 'max';\n    }\n\n    const aspectRatio = this.improviseConstraintsAspect();\n    return {\n      width: { [dimensionConstraintKey]: aspectRatio.width },\n      height: { [dimensionConstraintKey]: aspectRatio.height },\n      frameRate: this.maxFramerate,\n      deviceId: this.deviceId,\n      facingMode: this.facingMode,\n    };\n  }\n\n  toAnalyticsProperties() {\n    return {\n      width: this.width,\n      height: this.height,\n      video_bitrate: this.maxBitrate,\n      framerate: this.maxFramerate,\n      video_codec: this.codec,\n      facingMode: this.facingMode,\n    };\n  }\n\n  // reverse the height and width if mobile as mobile web browsers override the height and width basis orientation\n  private improviseConstraintsAspect(): Partial<IHMSVideoTrackSettings> {\n    if (isMobile() && this.height && this.width && this.height > this.width) {\n      return {\n        width: this.height,\n        height: this.width,\n      };\n    }\n    return {\n      width: this.width,\n      height: this.height,\n    };\n  }\n}\n","import { HMSAudioTrackSettings, HMSAudioTrackSettingsBuilder } from './HMSAudioTrackSettings';\nimport { HMSVideoTrackSettings, HMSVideoTrackSettingsBuilder } from './HMSVideoTrackSettings';\nimport { IAnalyticsPropertiesProvider } from '../../analytics/IAnalyticsPropertiesProvider';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\n\nexport class HMSTrackSettingsBuilder {\n  private _video: HMSVideoTrackSettings | null = new HMSVideoTrackSettingsBuilder().build();\n  private _audio: HMSAudioTrackSettings | null = new HMSAudioTrackSettingsBuilder().build();\n  private _screen: HMSVideoTrackSettings | null = new HMSVideoTrackSettingsBuilder().build();\n  private _simulcast = false;\n\n  video(video: HMSVideoTrackSettings | null) {\n    this._video = video;\n    return this;\n  }\n\n  audio(audio: HMSAudioTrackSettings | null) {\n    this._audio = audio;\n    return this;\n  }\n\n  screen(screen: HMSVideoTrackSettings | null) {\n    this._screen = screen;\n    return this;\n  }\n\n  simulcast(enabled: boolean) {\n    this._simulcast = enabled;\n    return this;\n  }\n\n  build() {\n    if (this._audio === null && this._video === null) {\n      throw ErrorFactory.TracksErrors.NothingToReturn(HMSAction.TRACK);\n    }\n\n    if (this._video === null && this._simulcast) {\n      throw ErrorFactory.TracksErrors.InvalidVideoSettings(\n        HMSAction.TRACK,\n        'Cannot enable simulcast when no video settings are provided',\n      );\n    }\n\n    return new HMSTrackSettings(this._video, this._audio, this._simulcast, this._screen || undefined);\n  }\n}\n\nexport class HMSTrackSettings implements IAnalyticsPropertiesProvider {\n  readonly video: HMSVideoTrackSettings | null | undefined;\n  readonly audio: HMSAudioTrackSettings | null | undefined;\n  readonly screen: HMSVideoTrackSettings | null;\n  readonly simulcast: boolean;\n\n  constructor(\n    video: HMSVideoTrackSettings | null | undefined,\n    audio: HMSAudioTrackSettings | null | undefined,\n    simulcast: boolean,\n    screen: HMSVideoTrackSettings | null = null,\n  ) {\n    this.video = video;\n    this.audio = audio;\n    this.simulcast = simulcast;\n    this.screen = screen;\n  }\n\n  toAnalyticsProperties() {\n    let properties = {\n      audio_enabled: this.audio !== null,\n      video_enabled: this.video !== null,\n    };\n\n    if (this.audio) {\n      properties = { ...this.audio.toAnalyticsProperties(), ...properties };\n    }\n\n    if (this.video) {\n      properties = { ...this.video.toAnalyticsProperties(), ...properties };\n    }\n\n    return properties;\n  }\n}\n","import { AudioPluginsAnalytics } from './AudioPluginsAnalytics';\nimport { HMSAudioPlugin, HMSPluginUnsupportedTypes } from './HMSAudioPlugin'; //HMSAudioPluginType\nimport AnalyticsEventFactory from '../../analytics/AnalyticsEventFactory';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSAudioContextHandler } from '../../internal';\nimport { HMSAudioTrackSettingsBuilder } from '../../media/settings';\nimport { standardMediaConstraints } from '../../media/settings/constants';\nimport { HMSLocalAudioTrack } from '../../media/tracks';\nimport Room from '../../sdk/models/HMSRoom';\nimport HMSLogger from '../../utils/logger';\n\n/**\n * This class manages applying different plugins on a local audio track. Plugins which need to modify the audio\n * are called in the order they were added. Plugins which do not need to modify the audio are called\n * with the original input.\n *\n * Concepts -\n * Audio Plugin - A module which can take in input audio, do some processing on it and return an AudioNode\n *\n * For Each Plugin, an AudioNode will be created and the source will be created from local audio track.\n * Each Audio node will be connected in the following order\n * source -> first plugin -> second plugin -> third plugin .. so on\n * @see HMSAudioPlugin\n */\nexport class HMSAudioPluginsManager {\n  private readonly TAG = '[AudioPluginsManager]';\n  private readonly hmsTrack: HMSLocalAudioTrack;\n  // Map maintains the insertion order\n  readonly pluginsMap: Map<string, HMSAudioPlugin>;\n  private audioContext?: AudioContext;\n\n  private sourceNode?: MediaStreamAudioSourceNode;\n  private destinationNode?: MediaStreamAudioDestinationNode;\n  private prevAudioNode?: any;\n  private analytics: AudioPluginsAnalytics;\n  // This will replace the native track in peer connection when plugins are enabled\n  private outputTrack?: MediaStreamTrack;\n  private pluginAddInProgress = false;\n  private room?: Room;\n\n  constructor(track: HMSLocalAudioTrack, private eventBus: EventBus, room?: Room) {\n    this.hmsTrack = track;\n    this.pluginsMap = new Map();\n    this.analytics = new AudioPluginsAnalytics(eventBus);\n    this.audioContext = HMSAudioContextHandler.getAudioContext();\n    this.room = room;\n  }\n\n  getPlugins(): string[] {\n    return Array.from(this.pluginsMap.keys());\n  }\n\n  async addPlugin(plugin: HMSAudioPlugin) {\n    const name = plugin.getName?.();\n    if (!name) {\n      HMSLogger.w('no name provided by the plugin');\n      return;\n    }\n    if (this.pluginAddInProgress) {\n      const err = ErrorFactory.MediaPluginErrors.AddAlreadyInProgress(\n        HMSAction.AUDIO_PLUGINS,\n        'Add Plugin is already in Progress',\n      );\n      this.analytics.added(name, this.audioContext!.sampleRate);\n      this.analytics.failure(name, err);\n      HMSLogger.w(\"can't add another plugin when previous add is in progress\");\n      throw err;\n    }\n\n    switch (plugin.getName()) {\n      case 'HMSKrispPlugin': {\n        if (!this.room?.isNoiseCancellationEnabled) {\n          const errorMessage = 'Krisp Noise Cancellation is not enabled for this room';\n          if (this.pluginsMap.size === 0) {\n            throw Error(errorMessage);\n          } else {\n            HMSLogger.w(this.TAG, errorMessage);\n            return;\n          }\n        }\n        this.eventBus.analytics.publish(AnalyticsEventFactory.krispStart());\n        const { settings } = this.hmsTrack;\n        const newAudioTrackSettings = new HMSAudioTrackSettingsBuilder()\n          .codec(settings.codec)\n          .maxBitrate(settings.maxBitrate)\n          .deviceId(settings.deviceId!)\n          .advanced([\n            ...standardMediaConstraints,\n            // @ts-ignore\n            { autoGainControl: { exact: false } },\n            // @ts-ignore\n            { noiseSuppression: { exact: false } },\n          ])\n          .audioMode(settings.audioMode)\n          .build();\n        await this.hmsTrack.setSettings(newAudioTrackSettings);\n        break;\n      }\n\n      default:\n    }\n    this.pluginAddInProgress = true;\n\n    try {\n      await this.addPluginInternal(plugin);\n    } finally {\n      this.pluginAddInProgress = false;\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  private async addPluginInternal(plugin: HMSAudioPlugin) {\n    const name = plugin.getName?.();\n    if (this.pluginsMap.get(name)) {\n      HMSLogger.w(this.TAG, `plugin - ${name} already added.`);\n      return;\n    }\n\n    await this.validateAndThrow(name, plugin);\n    // @ts-ignore\n    plugin.setEventBus?.(this.eventBus);\n\n    try {\n      if (this.pluginsMap.size === 0) {\n        await this.initAudioNodes();\n      } else if (this.prevAudioNode) {\n        // Previous node will be connected to destination. Disconnect that\n        this.prevAudioNode.disconnect();\n      }\n      this.analytics.added(name, this.audioContext!.sampleRate);\n      await this.analytics.initWithTime(name, async () => plugin.init());\n      this.pluginsMap.set(name, plugin);\n      await this.processPlugin(plugin);\n      await this.connectToDestination();\n      await this.updateProcessedTrack();\n    } catch (err) {\n      HMSLogger.e(this.TAG, 'failed to add plugin', err);\n      throw err;\n    }\n  }\n\n  validatePlugin(plugin: HMSAudioPlugin) {\n    return plugin.checkSupport(this.audioContext);\n  }\n\n  async validateAndThrow(name: string, plugin: HMSAudioPlugin) {\n    const result = this.validatePlugin(plugin);\n    if (result.isSupported) {\n      HMSLogger.i(this.TAG, `plugin is supported,- ${plugin.getName()}`);\n    } else {\n      //Needed to re-add in the reprocess case, to send error message in case of failure\n      this.analytics.added(name, this.audioContext!.sampleRate);\n      if (result.errType === HMSPluginUnsupportedTypes.PLATFORM_NOT_SUPPORTED) {\n        const err = ErrorFactory.MediaPluginErrors.PlatformNotSupported(\n          HMSAction.AUDIO_PLUGINS,\n          'platform not supported, see docs',\n        );\n        this.analytics.failure(name, err);\n        await this.cleanup();\n        throw err;\n      } else if (result.errType === HMSPluginUnsupportedTypes.DEVICE_NOT_SUPPORTED) {\n        const err = ErrorFactory.MediaPluginErrors.DeviceNotSupported(\n          HMSAction.AUDIO_PLUGINS,\n          'audio device not supported, see docs',\n        );\n        this.analytics.failure(name, err);\n        await this.cleanup();\n        throw err;\n      }\n    }\n  }\n\n  async removePlugin(plugin: HMSAudioPlugin) {\n    switch (plugin.getName()) {\n      case 'HMSKrispPlugin': {\n        this.eventBus.analytics.publish(AnalyticsEventFactory.krispStop());\n        const { settings } = this.hmsTrack;\n        const newAudioTrackSettings = new HMSAudioTrackSettingsBuilder()\n          .codec(settings.codec)\n          .maxBitrate(settings.maxBitrate)\n          .deviceId(settings.deviceId!)\n          .advanced([\n            ...standardMediaConstraints,\n            // @ts-ignore\n            { autoGainControl: { exact: true } },\n            // @ts-ignore\n            { noiseSuppression: { exact: true } },\n          ])\n          .audioMode(settings.audioMode)\n          .build();\n        await this.hmsTrack.setSettings(newAudioTrackSettings);\n        break;\n      }\n      default:\n        break;\n    }\n    await this.removePluginInternal(plugin);\n    if (this.pluginsMap.size === 0) {\n      // remove all previous nodes\n      await this.cleanup();\n      HMSLogger.i(this.TAG, `No plugins left, stopping plugins loop`);\n      await this.hmsTrack.setProcessedTrack(undefined);\n    } else {\n      // Reprocess the remaining plugins again because there is no way to connect\n      // the source of the removed plugin to destination of removed plugin\n      await this.reprocessPlugins();\n    }\n  }\n\n  async cleanup() {\n    for (const plugin of this.pluginsMap.values()) {\n      await this.removePluginInternal(plugin);\n    }\n    await this.hmsTrack.setProcessedTrack(undefined);\n    //disconnect nodes, stop track\n    this.sourceNode?.disconnect();\n    this.prevAudioNode?.disconnect();\n    this.outputTrack?.stop();\n\n    // reset all variables\n    this.sourceNode = undefined;\n    this.destinationNode = undefined;\n    this.prevAudioNode = undefined;\n    this.outputTrack = undefined;\n  }\n\n  //Keeping it separate since we are initializing context only once\n  async closeContext() {\n    this.audioContext = undefined;\n  }\n\n  async reprocessPlugins() {\n    if (this.pluginsMap.size === 0 || !this.sourceNode) {\n      return;\n    }\n    const plugins = Array.from(this.pluginsMap.values()); // make a copy of plugins\n    await this.cleanup();\n    await this.initAudioNodes();\n    for (const plugin of plugins) {\n      await this.addPlugin(plugin);\n    }\n    await this.updateProcessedTrack();\n  }\n\n  private async initAudioNodes() {\n    if (this.audioContext) {\n      // recreate this again, irrespective of it being already there so that the latest native track is used in source node\n      const audioStream = new MediaStream([this.hmsTrack.nativeTrack]);\n      this.sourceNode = this.audioContext.createMediaStreamSource(audioStream);\n      if (!this.destinationNode) {\n        this.destinationNode = this.audioContext.createMediaStreamDestination();\n        this.outputTrack = this.destinationNode.stream.getAudioTracks()[0];\n      }\n    }\n  }\n\n  private async updateProcessedTrack() {\n    try {\n      await this.hmsTrack.setProcessedTrack(this.outputTrack);\n    } catch (err) {\n      HMSLogger.e(this.TAG, 'error in setting processed track', err);\n      throw err;\n    }\n  }\n\n  private async processPlugin(plugin: HMSAudioPlugin) {\n    try {\n      const currentNode = await plugin.processAudioTrack(\n        this.audioContext!, // it is always present at this point\n        this.prevAudioNode || this.sourceNode,\n      );\n      if (this.prevAudioNode) {\n        // if previous node was present while adding this plugin\n        // it is disconnected from destination, connect the previous node to\n        // to the current node\n        this.prevAudioNode.connect(currentNode);\n      }\n      this.prevAudioNode = currentNode;\n    } catch (err) {\n      const name = plugin.getName();\n      //TODO error happened on processing of plugin notify UI\n      HMSLogger.e(this.TAG, `error in processing plugin ${name}`, err);\n      //remove plugin from loop and stop analytics for it\n      await this.removePluginInternal(plugin);\n    }\n  }\n\n  private async connectToDestination() {\n    try {\n      if (this.prevAudioNode && this.destinationNode && this.prevAudioNode.context === this.destinationNode.context) {\n        this.prevAudioNode.connect(this.destinationNode);\n      }\n    } catch (err) {\n      HMSLogger.e(this.TAG, 'error in connecting to destination node', err);\n    }\n  }\n\n  private async removePluginInternal(plugin: HMSAudioPlugin) {\n    const name = plugin.getName?.();\n    if (!this.pluginsMap.get(name)) {\n      HMSLogger.w(this.TAG, `plugin - ${name} not found to remove.`);\n      return;\n    }\n    HMSLogger.i(this.TAG, `removing plugin ${name}`);\n    this.pluginsMap.delete(name);\n    plugin.stop();\n    this.analytics.removed(name);\n  }\n}\n","import adapter from 'webrtc-adapter';\nimport { ErrorFactory } from './ErrorFactory';\nimport { HMSAction } from './HMSAction';\nimport { HMSTrackException } from './HMSTrackException';\n\nexport enum HMSGetMediaActions {\n  UNKNOWN = 'unknown(video or audio)',\n  AUDIO = 'audio',\n  VIDEO = 'video',\n  AV = 'audio, video',\n  SCREEN = 'screen',\n}\n\nfunction getDefaultError(error: string, deviceInfo: string) {\n  const message = error.toLowerCase();\n  let exception = ErrorFactory.TracksErrors.GenericTrack(HMSAction.TRACK, error);\n\n  if (message.includes('device not found')) {\n    exception = ErrorFactory.TracksErrors.DeviceNotAvailable(HMSAction.TRACK, deviceInfo, error);\n  } else if (message.includes('permission denied')) {\n    exception = ErrorFactory.TracksErrors.CantAccessCaptureDevice(HMSAction.TRACK, deviceInfo, error);\n  }\n\n  return exception;\n}\n\n/**\n * # Edge Cases:\n * - Screenshare error: The problem is when block at OS level, chrome throws NotAllowedError(HMS code - 3001) while firefox throws NotFoundError(HMS code - 3002),\n * we will handle this internally and throw error as User block - 3001 and OS block - 3011 for all browsers.\n * Chrome -\n * User blocked - NotAllowedError - Permission denied\n * System blocked - NotAllowedError - Permission denied by system\n */\n// eslint-disable-next-line complexity\nfunction convertMediaErrorToHMSException(err: Error, deviceInfo = ''): HMSTrackException {\n  /**\n   * Note: Adapter detects all chromium browsers as 'chrome'\n   */\n  const chromeSystemDenied =\n    adapter.browserDetails.browser === 'chrome' &&\n    err.name === 'NotAllowedError' &&\n    err.message.includes('denied by system');\n\n  if (chromeSystemDenied) {\n    return ErrorFactory.TracksErrors.SystemDeniedPermission(HMSAction.TRACK, deviceInfo, err.message);\n  }\n\n  if (adapter.browserDetails.browser === 'firefox' && err.name === 'NotFoundError') {\n    const hmsError = ErrorFactory.TracksErrors.SystemDeniedPermission(HMSAction.TRACK, deviceInfo, err.message);\n    hmsError.description = `Capture device is either blocked at Operating System level or not available - ${deviceInfo}`;\n    return hmsError;\n  }\n\n  switch (err.name) {\n    case 'OverconstrainedError':\n      return ErrorFactory.TracksErrors.OverConstrained(\n        HMSAction.TRACK,\n        deviceInfo,\n        (err as OverconstrainedError).constraint,\n      );\n    case 'NotAllowedError':\n      return ErrorFactory.TracksErrors.CantAccessCaptureDevice(HMSAction.TRACK, deviceInfo, err.message);\n    case 'NotFoundError':\n      return ErrorFactory.TracksErrors.DeviceNotAvailable(HMSAction.TRACK, deviceInfo, err.message);\n    case 'NotReadableError':\n      return ErrorFactory.TracksErrors.DeviceInUse(HMSAction.TRACK, deviceInfo, err.message);\n    case 'TypeError':\n      return ErrorFactory.TracksErrors.NothingToReturn(HMSAction.TRACK, err.message);\n    default:\n      return getDefaultError(err.message, deviceInfo);\n  }\n}\n\nexport function BuildGetMediaError(err: Error, deviceInfo: string): HMSTrackException {\n  const exception = convertMediaErrorToHMSException(err, deviceInfo);\n  exception.addNativeError(err);\n  return exception;\n}\n","import { BuildGetMediaError } from '../error/utils';\nimport { HMSAudioTrackSettings, HMSVideoTrackSettings } from '../media/settings';\nimport { HMSTrackExceptionTrackType } from '../media/tracks/HMSTrackExceptionTrackType';\n\nexport async function getAudioTrack(settings: HMSAudioTrackSettings): Promise<MediaStreamTrack> {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: settings ? settings.toConstraints() : false,\n    });\n    return stream.getAudioTracks()[0];\n  } catch (err) {\n    throw BuildGetMediaError(err as Error, HMSTrackExceptionTrackType.AUDIO);\n  }\n}\n\nexport async function getVideoTrack(settings: HMSVideoTrackSettings): Promise<MediaStreamTrack> {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      video: settings ? settings.toConstraints() : false,\n    });\n    return stream.getVideoTracks()[0];\n  } catch (err) {\n    throw BuildGetMediaError(err as Error, HMSTrackExceptionTrackType.VIDEO);\n  }\n}\n\n// To differentiate between normal track and empty track.\nexport function isEmptyTrack(track: MediaStreamTrack) {\n  // Firefox gives '' as label for empty track(created from audio context)\n  return 'canvas' in track || track.label === 'MediaStreamAudioDestinationNode' || track.label === '';\n}\n","import HMSLogger from './logger';\nimport { isFirefox } from './support';\nimport { BuildGetMediaError } from '../error/utils';\nimport { HMSTrackExceptionTrackType } from '../media/tracks/HMSTrackExceptionTrackType';\n\n// discussed with krisp team and this is their recommendation for the sample rate\nconst DEFAULT_SAMPLE_RATE = 32000;\n\nexport async function getLocalStream(constraints: MediaStreamConstraints): Promise<MediaStream> {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia(constraints);\n    return stream;\n  } catch (err) {\n    throw BuildGetMediaError(err as Error, HMSTrackExceptionTrackType.AUDIO_VIDEO);\n  }\n}\n\nexport async function getLocalScreen(constraints: MediaStreamConstraints['video']): Promise<MediaStream> {\n  try {\n    // @ts-ignore [https://github.com/microsoft/TypeScript/issues/33232]\n    const stream = await navigator.mediaDevices.getDisplayMedia({ video: constraints, audio: false });\n    return stream;\n  } catch (err) {\n    throw BuildGetMediaError(err as Error, HMSTrackExceptionTrackType.SCREEN);\n  }\n}\n\ninterface MediaDeviceGroups {\n  audioinput: MediaDeviceInfo[];\n  audiooutput: MediaDeviceInfo[];\n  videoinput: MediaDeviceInfo[];\n}\n\nexport async function getLocalDevices(): Promise<MediaDeviceGroups> {\n  try {\n    const devices = await navigator.mediaDevices.enumerateDevices();\n    const deviceGroups: MediaDeviceGroups = {\n      audioinput: [],\n      audiooutput: [],\n      videoinput: [],\n    };\n    devices.forEach(device => deviceGroups[device.kind].push(device));\n    return deviceGroups;\n  } catch (err) {\n    throw BuildGetMediaError(err as Error, HMSTrackExceptionTrackType.AUDIO_VIDEO);\n  }\n}\n\nexport interface HMSAudioContext {\n  audioContext: AudioContext | null;\n  getAudioContext: () => AudioContext;\n  resumeContext: () => Promise<void>;\n}\n\nexport const HMSAudioContextHandler: HMSAudioContext = {\n  audioContext: null,\n  getAudioContext() {\n    if (!this.audioContext) {\n      this.audioContext = isFirefox ? new AudioContext() : new AudioContext({ sampleRate: DEFAULT_SAMPLE_RATE });\n    }\n\n    return this.audioContext!;\n  },\n  async resumeContext() {\n    try {\n      return await this.getAudioContext().resume();\n    } catch (error) {\n      HMSLogger.e('AudioContext', error);\n    }\n  },\n};\n\nexport enum HMSAudioDeviceCategory {\n  SPEAKERPHONE = 'SPEAKERPHONE',\n  WIRED = 'WIRED',\n  BLUETOOTH = 'BLUETOOTH',\n  EARPIECE = 'EARPIECE',\n}\n\nexport const getAudioDeviceCategory = (deviceLabel?: string) => {\n  if (!deviceLabel) {\n    HMSLogger.w('[DeviceManager]:', 'No device label provided');\n    return HMSAudioDeviceCategory.SPEAKERPHONE;\n  }\n  const label = deviceLabel.toLowerCase();\n  if (label.includes('speakerphone')) {\n    return HMSAudioDeviceCategory.SPEAKERPHONE;\n  } else if (label.includes('wired')) {\n    return HMSAudioDeviceCategory.WIRED;\n  } else if (/airpods|buds|wireless|bluetooth/gi.test(label)) {\n    return HMSAudioDeviceCategory.BLUETOOTH;\n  } else if (label.includes('earpiece')) {\n    return HMSAudioDeviceCategory.EARPIECE;\n  }\n  return HMSAudioDeviceCategory.SPEAKERPHONE;\n};\n","export interface IQueue<T> {\n  size(): number;\n  enqueue(item: T): void;\n  dequeue(): T | undefined;\n}\n\nexport class Queue<T> implements IQueue<T> {\n  protected storage: T[] = [];\n\n  constructor(private capacity: number = Infinity) {}\n\n  size() {\n    return this.storage.length;\n  }\n\n  toList() {\n    return this.storage.slice(0);\n  }\n\n  enqueue(item: T) {\n    if (this.size() === this.capacity) {\n      this.dequeue();\n    }\n    this.storage.push(item);\n  }\n\n  dequeue() {\n    return this.storage.shift();\n  }\n\n  aggregate<R>(aggregationFn: (values: T[]) => R): R {\n    return aggregationFn(this.storage);\n  }\n}\n","export const worker = `(function workerSetup() {\n  function ticker() {\n    self.postMessage('tick');\n  }\n  self.onmessage = function (event) {\n    const [data, time] = event.data;\n    switch (data) {\n      case 'start':\n        setTimeout(ticker, time);\n        break;\n      default:\n        break;\n    }\n  };\n})()`;\n\n/**\n * Delay for a @see ms amount of time\n * @param ms -- time in milliseconds\n */\nexport function sleep(ms: number): Promise<void> {\n  if (ms < 0) {\n    throw Error('`ms` should be a positive integer');\n  }\n\n  return new Promise(resolve => {\n    setTimeout(resolve, ms);\n  });\n}\n\nexport function workerSleep(ms: number): Promise<void> {\n  if (ms < 0) {\n    throw Error('`ms` should be a positive integer');\n  }\n  if (typeof Worker === 'undefined') {\n    return sleep(ms);\n  }\n  const WorkerThread = new Worker(URL.createObjectURL(new Blob([worker], { type: 'application/javascript' })));\n  WorkerThread.postMessage(['start', ms]);\n  return new Promise(resolve => {\n    WorkerThread.onmessage = event => {\n      if (event.data === 'tick') {\n        resolve();\n        WorkerThread.terminate();\n      }\n    };\n  });\n}\n\nexport function reusableWorker() {\n  if (typeof Worker === 'undefined') {\n    return {\n      sleep: (ms: number) => sleep(ms),\n    };\n  }\n  const WorkerThread = new Worker(URL.createObjectURL(new Blob([worker], { type: 'application/javascript' })));\n  return {\n    sleep: (ms: number) => {\n      WorkerThread.postMessage(['start', ms]);\n      return new Promise<void>(resolve => {\n        WorkerThread.onmessage = event => {\n          if (event.data === 'tick') {\n            resolve();\n          }\n        };\n      });\n    },\n  };\n}\n\n/**\n * Debounce Fn - Function to limit the number of executions of the passed in\n * function in a given time duration\n * @param fn Function to be called\n * @param delay time by which the function execution has to be delayed\n * @returns {void}\n */\nexport function debounce<T extends (...args: any) => any>(fn: T, delay = 300) {\n  let timer: any | undefined;\n  return function (...args: []) {\n    clearTimeout(timer);\n    timer = undefined;\n    //@ts-ignore\n    //eslint-disable-next-line\n    const context = this;\n    timer = setTimeout(() => {\n      fn.apply(context, args);\n    }, delay);\n  };\n}\n","import HMSLogger from './logger';\nimport { HMSAudioContextHandler } from './media';\nimport { Queue } from './queue';\nimport { sleep } from './timer-utils';\nimport { HMSInternalEvent } from '../events/HMSInternalEvent';\nimport { HMSLocalAudioTrack } from '../internal';\n\n/** Send update only if audio level is above THRESHOLD */\nconst THRESHOLD = 35;\n\n/** Send update only if audio level is changed by UPDATE_THRESHOLD */\nconst UPDATE_THRESHOLD = 5;\n\nexport interface ITrackAudioLevelUpdate {\n  track: HMSLocalAudioTrack;\n  audioLevel: number;\n}\n\n// Audio level algorithm referenced from official MDN example - https://github.com/mdn/dom-examples/tree/main/media/web-dictaphone\nexport class TrackAudioLevelMonitor {\n  private readonly TAG = '[TrackAudioLevelMonitor]';\n  private audioLevel = 0;\n  private analyserNode?: AnalyserNode;\n  private dataArray?: Uint8Array;\n  private isMonitored = false;\n  /** Frequency of polling audio level from track */\n  private interval = 100;\n  /** Store past audio levels for this duration */\n  private historyInterval = 700;\n  private history = new Queue<number>(this.historyInterval / this.interval);\n\n  constructor(\n    private track: HMSLocalAudioTrack,\n    private audioLevelEvent: HMSInternalEvent<ITrackAudioLevelUpdate>,\n    private silenceEvent: HMSInternalEvent<{ track: HMSLocalAudioTrack }>,\n  ) {\n    try {\n      const stream = new MediaStream([this.track.nativeTrack]);\n      this.analyserNode = this.createAnalyserNodeForStream(stream);\n      const bufferLength = this.analyserNode.frequencyBinCount;\n      this.dataArray = new Uint8Array(bufferLength);\n    } catch (ex) {\n      HMSLogger.w(this.TAG, 'Unable to initialize AudioContext', ex);\n    }\n  }\n\n  /**\n   * To detect silence we check if the track is unmuted and silent in the current moment\n   * periodically. If the track is found to be silent more than a threshold number of times\n   * we send the event. The threshold number of time is there to reduce the chance of false\n   * positives.\n   */\n  detectSilence = async () => {\n    const tickInterval = 20;\n    const tickThreshold = 50;\n    let silenceCounter = 0;\n\n    while (this.isMonitored) {\n      if (this.track.enabled) {\n        if (this.isSilentThisInstant()) {\n          silenceCounter++;\n          if (silenceCounter > tickThreshold) {\n            this.silenceEvent.publish({ track: this.track });\n            break;\n          }\n        } else {\n          // bail out immediately if sound is found\n          break;\n        }\n      }\n      await sleep(tickInterval);\n    }\n  };\n\n  start() {\n    this.stop();\n    this.isMonitored = true;\n    HMSLogger.d(this.TAG, 'Starting track Monitor', `${this.track}`);\n    this.loop().then(() => HMSLogger.d(this.TAG, 'Stopping track Monitor', `${this.track}`));\n  }\n\n  stop() {\n    if (!this.analyserNode) {\n      HMSLogger.d(this.TAG, 'AudioContext not initialized');\n      return;\n    }\n\n    this.sendAudioLevel(0);\n    this.isMonitored = false;\n  }\n\n  private async loop() {\n    while (this.isMonitored) {\n      this.sendAudioLevel(this.getMaxAudioLevelOverPeriod());\n      await sleep(this.interval);\n    }\n  }\n\n  private sendAudioLevel(audioLevel = 0) {\n    audioLevel = audioLevel > THRESHOLD ? audioLevel : 0;\n    const isSignificantChange = Math.abs(this.audioLevel - audioLevel) > UPDATE_THRESHOLD;\n    if (isSignificantChange) {\n      this.audioLevel = audioLevel;\n      const audioLevelUpdate: ITrackAudioLevelUpdate = { track: this.track, audioLevel: this.audioLevel };\n      this.audioLevelEvent.publish(audioLevelUpdate);\n    }\n  }\n\n  private getMaxAudioLevelOverPeriod() {\n    if (!this.analyserNode) {\n      HMSLogger.d(this.TAG, 'AudioContext not initialized');\n      return;\n    }\n    const newLevel = this.calculateAudioLevel();\n    newLevel !== undefined && this.history.enqueue(newLevel);\n    return this.history.aggregate(values => Math.max(...values));\n  }\n\n  private calculateAudioLevel() {\n    if (!this.analyserNode || !this.dataArray) {\n      HMSLogger.d(this.TAG, 'AudioContext not initialized');\n      return;\n    }\n\n    this.analyserNode.getByteTimeDomainData(this.dataArray);\n    const lowest = 0.009;\n    let max = lowest;\n    for (const frequency of this.dataArray) {\n      max = Math.max(max, (frequency - 128) / 128);\n    }\n    const normalized = (Math.log(lowest) - Math.log(max)) / Math.log(lowest);\n    const percent = Math.ceil(Math.min(Math.max(normalized * 100, 0), 100));\n    return percent;\n  }\n\n  isSilentThisInstant() {\n    if (!this.analyserNode || !this.dataArray) {\n      HMSLogger.d(this.TAG, 'AudioContext not initialized');\n      return;\n    }\n\n    this.analyserNode.getByteTimeDomainData(this.dataArray);\n\n    // For absolute silence(in case of mic/software failures), all frequencies are 128 or 0.\n    return this.dataArray.every(frequency => frequency === 128 || frequency === 0);\n  }\n\n  private createAnalyserNodeForStream(stream: MediaStream): AnalyserNode {\n    const audioContext = HMSAudioContextHandler.getAudioContext();\n    const source = audioContext.createMediaStreamSource(stream);\n    const analyser = audioContext.createAnalyser();\n    analyser.fftSize = 2048;\n    source.connect(analyser);\n    return analyser;\n  }\n}\n","import isEqual from 'lodash.isequal';\nimport { HMSAudioTrack } from './HMSAudioTrack';\nimport AnalyticsEventFactory from '../../analytics/AnalyticsEventFactory';\nimport { DeviceStorageManager } from '../../device-manager/DeviceStorage';\nimport { HMSException } from '../../error/HMSException';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSAudioTrackSettings as IHMSAudioTrackSettings } from '../../interfaces';\nimport { HMSAudioPlugin, HMSPluginSupportResult } from '../../plugins';\nimport { HMSAudioPluginsManager } from '../../plugins/audio';\nimport Room from '../../sdk/models/HMSRoom';\nimport HMSLogger from '../../utils/logger';\nimport { getAudioTrack, isEmptyTrack } from '../../utils/track';\nimport { TrackAudioLevelMonitor } from '../../utils/track-audio-level-monitor';\nimport { HMSAudioTrackSettings, HMSAudioTrackSettingsBuilder } from '../settings';\nimport { HMSLocalStream } from '../streams';\n\nfunction generateHasPropertyChanged(newSettings: Partial<HMSAudioTrackSettings>, oldSettings: HMSAudioTrackSettings) {\n  return function hasChanged(prop: 'codec' | 'volume' | 'maxBitrate' | 'deviceId' | 'advanced' | 'audioMode') {\n    return !isEqual(newSettings[prop], oldSettings[prop]);\n  };\n}\n\nexport class HMSLocalAudioTrack extends HMSAudioTrack {\n  private readonly TAG = '[HMSLocalAudioTrack]';\n  settings: HMSAudioTrackSettings;\n  private pluginsManager: HMSAudioPluginsManager;\n  private processedTrack?: MediaStreamTrack;\n  private manuallySelectedDeviceId?: string;\n  /**\n   * This is to keep track of all the tracks created so far and stop and clear them when creating new tracks to release microphone\n   * This is needed because when replaceTrackWith is called before updating native track, there is no way that track is available\n   * for you to stop, which leads to the microphone not released even after leave is called.\n   */\n  private tracksCreated = new Set<MediaStreamTrack>();\n\n  audioLevelMonitor?: TrackAudioLevelMonitor;\n\n  /**\n   * see the doc in HMSLocalVideoTrack\n   * @internal\n   */\n  publishedTrackId?: string;\n\n  /**\n   * will be false for preview tracks\n   */\n  isPublished = false;\n\n  constructor(\n    stream: HMSLocalStream,\n    track: MediaStreamTrack,\n    source: string,\n    private eventBus: EventBus,\n    settings: HMSAudioTrackSettings = new HMSAudioTrackSettingsBuilder().build(),\n    private room?: Room,\n  ) {\n    super(stream, track, source);\n    stream.tracks.push(this);\n    this.addTrackEventListeners(track);\n\n    this.settings = settings;\n    // Replace the 'default' or invalid deviceId with the actual deviceId\n    // This is to maintain consistency with selected devices as in some cases there will be no 'default' device\n    if (settings.deviceId !== track.getSettings().deviceId && !isEmptyTrack(track)) {\n      this.settings = this.buildNewSettings({ deviceId: track.getSettings().deviceId });\n    }\n    this.pluginsManager = new HMSAudioPluginsManager(this, eventBus, room);\n    this.setFirstTrackId(track.id);\n    if (source === 'regular') {\n      document.addEventListener('visibilitychange', this.handleVisibilityChange);\n    }\n  }\n\n  clone(stream: HMSLocalStream) {\n    const track = new HMSLocalAudioTrack(\n      stream,\n      this.nativeTrack.clone(),\n      this.source!,\n      this.eventBus,\n      this.settings,\n      this.room,\n    );\n    track.peerId = this.peerId;\n\n    if (this.pluginsManager.pluginsMap.size > 0) {\n      this.pluginsManager.pluginsMap.forEach(value => {\n        track\n          .addPlugin(value)\n          .catch((e: Error) => HMSLogger.e(this.TAG, 'Plugin add failed while migrating', value, e));\n      });\n    }\n    return track;\n  }\n\n  getManuallySelectedDeviceId() {\n    return this.manuallySelectedDeviceId;\n  }\n\n  resetManuallySelectedDeviceId() {\n    this.manuallySelectedDeviceId = undefined;\n  }\n\n  private handleVisibilityChange = async () => {\n    // track state is fine do nothing\n    if (!this.shouldReacquireTrack()) {\n      HMSLogger.d(this.TAG, `visibiltiy: ${document.visibilityState}`, `${this}`);\n      return;\n    }\n    if (document.visibilityState === 'hidden') {\n      this.eventBus.analytics.publish(\n        this.sendInterruptionEvent({\n          started: true,\n          reason: 'visibility-change',\n        }),\n      );\n    } else {\n      HMSLogger.d(this.TAG, 'On visibile replacing track as it is not publishing');\n      try {\n        await this.replaceTrackWith(this.settings);\n      } catch (error) {\n        this.eventBus.error.publish(error as HMSException);\n      }\n      this.eventBus.analytics.publish(\n        this.sendInterruptionEvent({\n          started: false,\n          reason: 'visibility-change',\n        }),\n      );\n    }\n  };\n\n  /**\n   * Replace the new track in stream and update native track\n   * @param track\n   */\n  private async updateTrack(track: MediaStreamTrack) {\n    track.enabled = this.enabled;\n    const localStream = this.stream as HMSLocalStream;\n    await localStream.replaceStreamTrack(this.nativeTrack, track);\n    // change nativeTrack so plugin can start its work\n    this.nativeTrack = track;\n    await this.replaceSenderTrack();\n    const isLevelMonitored = Boolean(this.audioLevelMonitor);\n    isLevelMonitored && this.initAudioLevelMonitor();\n  }\n\n  private async replaceTrackWith(settings: HMSAudioTrackSettings) {\n    const prevTrack = this.nativeTrack;\n    /*\n     * Note: Do not change the order of this.\n     * stop the previous before acquiring the new track otherwise this can lead to\n     * no audio when the above getAudioTrack throws an error. ex: DeviceInUse error\n     */\n    prevTrack?.stop();\n    this.removeTrackEventListeners(prevTrack);\n    this.tracksCreated.forEach(track => track.stop());\n    this.tracksCreated.clear();\n    try {\n      const newTrack = await getAudioTrack(settings);\n      this.addTrackEventListeners(newTrack);\n      this.tracksCreated.add(newTrack);\n      HMSLogger.d(this.TAG, 'replaceTrack, Previous track stopped', prevTrack, 'newTrack', newTrack);\n      await this.updateTrack(newTrack);\n    } catch (e) {\n      // Generate a new track from previous settings so there will be audio because previous track is stopped\n      const newTrack = await getAudioTrack(this.settings);\n      this.addTrackEventListeners(newTrack);\n      this.tracksCreated.add(newTrack);\n      await this.updateTrack(newTrack);\n      if (this.isPublished) {\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.publish({\n            error: e as Error,\n          }),\n        );\n      }\n      throw e;\n    }\n    try {\n      await this.pluginsManager.reprocessPlugins();\n    } catch (e) {\n      this.eventBus.audioPluginFailed.publish(e as HMSException);\n    }\n  }\n\n  async setEnabled(value: boolean) {\n    if (value === this.enabled) {\n      return;\n    }\n\n    // Replace silent empty track or muted track(happens when microphone is disabled from address bar in iOS) with an actual audio track, if enabled or ended track or when silence is detected.\n    if (value && this.shouldReacquireTrack()) {\n      await this.replaceTrackWith(this.settings);\n    }\n    await super.setEnabled(value);\n    if (value) {\n      this.settings = this.buildNewSettings({ deviceId: this.nativeTrack.getSettings().deviceId });\n    }\n    this.eventBus.localAudioEnabled.publish({ enabled: value, track: this });\n  }\n\n  /**\n   * verify if the track id being passed is of this track for correlating server messages like audio level\n   */\n  isPublishedTrackId(trackId: string) {\n    return this.publishedTrackId === trackId;\n  }\n\n  async setSettings(settings: Partial<IHMSAudioTrackSettings>, internal = false) {\n    const newSettings = this.buildNewSettings(settings);\n\n    if (isEmptyTrack(this.nativeTrack)) {\n      // if it is an empty track, cache the settings for when it is unmuted\n      this.settings = newSettings;\n      return;\n    }\n    await this.handleDeviceChange(newSettings, internal);\n    await this.handleSettingsChange(newSettings);\n    this.settings = newSettings;\n  }\n\n  /**\n   * @see HMSAudioPlugin\n   */\n  getPlugins(): string[] {\n    return this.pluginsManager.getPlugins();\n  }\n\n  /**\n   * @see HMSAudioPlugin\n   */\n  async addPlugin(plugin: HMSAudioPlugin): Promise<void> {\n    return this.pluginsManager.addPlugin(plugin);\n  }\n\n  /**\n   * @see HMSAudioPlugin\n   */\n  async removePlugin(plugin: HMSAudioPlugin): Promise<void> {\n    return this.pluginsManager.removePlugin(plugin);\n  }\n\n  /**\n   * @see HMSAudioPlugin\n   */\n  validatePlugin(plugin: HMSAudioPlugin): HMSPluginSupportResult {\n    return this.pluginsManager.validatePlugin(plugin);\n  }\n\n  /**\n   * @internal\n   */\n  async setProcessedTrack(processedTrack?: MediaStreamTrack) {\n    // if all plugins are removed reset everything back to native track\n    if (!processedTrack) {\n      this.processedTrack = undefined;\n    } else if (processedTrack !== this.processedTrack) {\n      this.processedTrack = processedTrack;\n    }\n    await this.replaceSenderTrack();\n  }\n\n  initAudioLevelMonitor() {\n    if (this.audioLevelMonitor) {\n      this.destroyAudioLevelMonitor();\n    }\n    HMSLogger.d(this.TAG, 'Monitor Audio Level for', this, this.getMediaTrackSettings().deviceId);\n    this.audioLevelMonitor = new TrackAudioLevelMonitor(\n      this,\n      this.eventBus.trackAudioLevelUpdate,\n      this.eventBus.localAudioSilence,\n    );\n    this.audioLevelMonitor.start();\n    this.audioLevelMonitor.detectSilence();\n  }\n\n  destroyAudioLevelMonitor() {\n    this.audioLevelMonitor?.stop();\n    this.audioLevelMonitor = undefined;\n  }\n\n  async cleanup() {\n    super.cleanup();\n    await this.pluginsManager.cleanup();\n    await this.pluginsManager.closeContext();\n    this.transceiver = undefined;\n    this.processedTrack?.stop();\n    this.tracksCreated.forEach(track => track.stop());\n    this.tracksCreated.clear();\n    this.isPublished = false;\n    this.destroyAudioLevelMonitor();\n    document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n  }\n\n  /**\n   * @internal\n   * published track id will be different in case there was some processing done using plugins.\n   */\n  getTrackIDBeingSent() {\n    return this.processedTrack ? this.processedTrack.id : this.nativeTrack.id;\n  }\n\n  /**\n   * @internal\n   */\n  getTrackBeingSent() {\n    return this.processedTrack || this.nativeTrack;\n  }\n\n  private addTrackEventListeners(track: MediaStreamTrack) {\n    track.addEventListener('mute', this.handleTrackMute);\n    track.addEventListener('unmute', this.handleTrackUnmute);\n  }\n\n  private removeTrackEventListeners(track: MediaStreamTrack) {\n    track.removeEventListener('mute', this.handleTrackMute);\n    track.removeEventListener('unmute', this.handleTrackUnmute);\n  }\n\n  private handleTrackMute = () => {\n    HMSLogger.d(this.TAG, 'muted natively');\n    const reason = document.visibilityState === 'hidden' ? 'visibility-change' : 'incoming-call';\n    this.eventBus.analytics.publish(\n      this.sendInterruptionEvent({\n        started: true,\n        reason,\n      }),\n    );\n  };\n\n  /** @internal */\n  handleTrackUnmute = async () => {\n    HMSLogger.d(this.TAG, 'unmuted natively');\n    const reason = document.visibilityState === 'hidden' ? 'visibility-change' : 'incoming-call';\n    this.eventBus.analytics.publish(\n      this.sendInterruptionEvent({\n        started: false,\n        reason,\n      }),\n    );\n    try {\n      await this.setEnabled(this.enabled);\n      // whatsapp call doesn't seem to send video unmute natively, so use audio unmute to play video\n      this.eventBus.localAudioUnmutedNatively.publish();\n    } catch (error) {\n      this.eventBus.error.publish(error as HMSException);\n    }\n  };\n\n  private replaceSenderTrack = async () => {\n    if (!this.transceiver || this.transceiver.direction !== 'sendonly') {\n      HMSLogger.d(this.TAG, `transceiver for ${this.trackId} not available or not connected yet`);\n      return;\n    }\n    await this.transceiver.sender.replaceTrack(this.processedTrack || this.nativeTrack);\n  };\n\n  private shouldReacquireTrack = () => {\n    return isEmptyTrack(this.nativeTrack) || this.isTrackNotPublishing();\n  };\n\n  private buildNewSettings(settings: Partial<HMSAudioTrackSettings>) {\n    const { volume, codec, maxBitrate, deviceId, advanced, audioMode } = { ...this.settings, ...settings };\n    const newSettings = new HMSAudioTrackSettings(volume, codec, maxBitrate, deviceId, advanced, audioMode);\n    return newSettings;\n  }\n\n  private handleSettingsChange = async (settings: HMSAudioTrackSettings) => {\n    const stream = this.stream as HMSLocalStream;\n    const hasPropertyChanged = generateHasPropertyChanged(settings, this.settings);\n    if ((hasPropertyChanged('maxBitrate') || hasPropertyChanged('audioMode')) && settings.maxBitrate) {\n      await stream.setMaxBitrateAndFramerate(this, settings);\n    }\n\n    if (hasPropertyChanged('advanced') || hasPropertyChanged('audioMode')) {\n      await this.replaceTrackWith(settings);\n    }\n  };\n\n  /**\n   * Replace audio track with new track on device change if enabled\n   * @param settings - AudioSettings Object constructed with new settings\n   * @param internal - whether the change was because of internal sdk call or external client call\n   */\n  private handleDeviceChange = async (settings: HMSAudioTrackSettings, internal = false) => {\n    const hasPropertyChanged = generateHasPropertyChanged(settings, this.settings);\n    if (hasPropertyChanged('deviceId')) {\n      this.manuallySelectedDeviceId = !internal ? settings.deviceId : this.manuallySelectedDeviceId;\n      HMSLogger.d(\n        this.TAG,\n        'device change',\n        'manual selection:',\n        this.manuallySelectedDeviceId,\n        'new device:',\n        settings.deviceId,\n      );\n      await this.replaceTrackWith(settings);\n      const groupId = this.nativeTrack.getSettings().groupId;\n      if (!internal && settings.deviceId) {\n        DeviceStorageManager.updateSelection('audioInput', {\n          deviceId: settings.deviceId,\n          groupId,\n        });\n        this.eventBus.deviceChange.publish({\n          isUserSelection: true,\n          type: 'audioInput',\n          selection: {\n            deviceId: settings.deviceId,\n            groupId: groupId,\n          },\n        });\n      }\n    }\n  };\n}\n","import { v4 as uuid } from 'uuid';\nimport { Store } from './store';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { AnalyticsTimer, TimedEvent } from '../analytics/AnalyticsTimer';\nimport { DeviceManager } from '../device-manager';\nimport { ErrorCodes } from '../error/ErrorCodes';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { HMSException } from '../error/HMSException';\nimport { BuildGetMediaError } from '../error/utils';\nimport { EventBus } from '../events/EventBus';\nimport {\n  HMSAudioCodec,\n  HMSAudioMode,\n  HMSScreenShareConfig,\n  HMSVideoCodec,\n  ScreenCaptureHandleConfig,\n} from '../interfaces';\nimport InitialSettings from '../interfaces/settings';\nimport { HMSLocalAudioTrack, HMSLocalTrack, HMSLocalVideoTrack, HMSTrackType } from '../internal';\nimport {\n  HMSAudioTrackSettings,\n  HMSAudioTrackSettingsBuilder,\n  HMSTrackSettings,\n  HMSTrackSettingsBuilder,\n  HMSVideoTrackSettings,\n  HMSVideoTrackSettingsBuilder,\n} from '../media/settings';\nimport { HMSLocalStream } from '../media/streams/HMSLocalStream';\nimport { HMSTrackExceptionTrackType } from '../media/tracks/HMSTrackExceptionTrackType';\nimport ITransportObserver from '../transport/ITransportObserver';\nimport HMSLogger from '../utils/logger';\nimport { HMSAudioContextHandler } from '../utils/media';\n\nconst defaultSettings = {\n  isAudioMuted: false,\n  isVideoMuted: false,\n  audioInputDeviceId: 'default',\n  audioOutputDeviceId: 'default',\n  videoDeviceId: 'default',\n  audioMode: HMSAudioMode.VOICE,\n};\ntype IFetchTrackOptions = boolean | 'empty';\ninterface IFetchAVTrackOptions {\n  audio: IFetchTrackOptions;\n  video: IFetchTrackOptions;\n}\n\nlet blankCanvas: HTMLCanvasElement | undefined;\nlet intervalID: ReturnType<typeof setInterval> | undefined;\n\nexport class LocalTrackManager {\n  readonly TAG: string = '[LocalTrackManager]';\n  private captureHandleIdentifier?: string;\n\n  constructor(\n    private store: Store,\n    private observer: ITransportObserver,\n    private deviceManager: DeviceManager,\n    private eventBus: EventBus,\n    private analyticsTimer: AnalyticsTimer,\n  ) {\n    this.setScreenCaptureHandleConfig();\n  }\n\n  // eslint-disable-next-line complexity\n  async getTracksToPublish(initialSettings: InitialSettings = defaultSettings): Promise<HMSLocalTrack[]> {\n    const trackSettings = this.getAVTrackSettings(initialSettings);\n    if (!trackSettings) {\n      return [];\n    }\n    const canPublishAudio = !!trackSettings.audio;\n    const canPublishVideo = !!trackSettings.video;\n    let tracksToPublish: Array<HMSLocalTrack> = [];\n    const { videoTrack, audioTrack } = await this.updateCurrentLocalTrackSettings(trackSettings);\n    const localStream = (videoTrack?.stream || audioTrack?.stream) as HMSLocalStream | undefined;\n    // The track gets added to the store only after it is published.\n    const isVideoTrackPublished = Boolean(videoTrack && this.store.getTrackById(videoTrack.trackId));\n    const isAudioTrackPublished = Boolean(audioTrack && this.store.getTrackById(audioTrack.trackId));\n\n    if (isVideoTrackPublished && isAudioTrackPublished) {\n      // there is nothing to publish\n      return [];\n    }\n\n    const fetchTrackOptions: IFetchAVTrackOptions = {\n      audio: canPublishAudio && !audioTrack && (initialSettings.isAudioMuted ? 'empty' : true),\n      video: canPublishVideo && !videoTrack && (initialSettings.isVideoMuted ? 'empty' : true),\n    };\n\n    if (fetchTrackOptions.audio) {\n      this.analyticsTimer.start(TimedEvent.LOCAL_AUDIO_TRACK);\n    }\n    if (fetchTrackOptions.video) {\n      this.analyticsTimer.start(TimedEvent.LOCAL_VIDEO_TRACK);\n    }\n    try {\n      HMSLogger.d(this.TAG, 'Init Local Tracks', { fetchTrackOptions });\n      tracksToPublish = await this.getLocalTracks(fetchTrackOptions, trackSettings, localStream);\n    } catch (error) {\n      tracksToPublish = await this.retryGetLocalTracks(\n        error as HMSException,\n        trackSettings,\n        fetchTrackOptions,\n        localStream,\n      );\n    }\n    if (fetchTrackOptions.audio) {\n      this.analyticsTimer.end(TimedEvent.LOCAL_AUDIO_TRACK);\n    }\n    if (fetchTrackOptions.video) {\n      this.analyticsTimer.end(TimedEvent.LOCAL_VIDEO_TRACK);\n    }\n\n    if (videoTrack && canPublishVideo && !isVideoTrackPublished) {\n      tracksToPublish.push(videoTrack);\n    }\n    if (audioTrack && canPublishAudio && !isAudioTrackPublished) {\n      tracksToPublish.push(audioTrack);\n    }\n    return tracksToPublish;\n  }\n\n  /**\n   * @throws {HMSException}\n   */\n  async getLocalTracks(\n    fetchTrackOptions: IFetchAVTrackOptions = { audio: true, video: true },\n    settings: HMSTrackSettings,\n    localStream?: HMSLocalStream,\n  ): Promise<Array<HMSLocalTrack>> {\n    try {\n      const nativeTracks = await this.getNativeLocalTracks(fetchTrackOptions, settings);\n      return this.createHMSLocalTracks(nativeTracks, settings, localStream);\n    } catch (error) {\n      // TOOD: On OverConstrained error, retry with dropping all constraints.\n      // Just retry getusermedia again - it sometimes work when AbortError or NotFoundError is thrown on a few devices\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.publish({\n          devices: this.deviceManager.getDevices(),\n          error: error as Error,\n          settings,\n        }),\n      );\n      throw error;\n    }\n  }\n\n  /**\n   * @throws {HMSException}\n   */\n  private async getNativeLocalTracks(\n    fetchTrackOptions: IFetchAVTrackOptions = { audio: false, video: false },\n    settings: HMSTrackSettings,\n  ) {\n    const trackSettings = new HMSTrackSettings(\n      fetchTrackOptions.video === true ? settings.video : null,\n      fetchTrackOptions.audio === true ? settings.audio : null,\n      settings.simulcast,\n    );\n    const nativeTracks: MediaStreamTrack[] = [];\n\n    if (trackSettings.audio || trackSettings.video) {\n      nativeTracks.push(...(await this.getAVTracks(trackSettings)));\n    }\n    nativeTracks.push(...this.getEmptyTracks(fetchTrackOptions));\n    return nativeTracks;\n  }\n  private async optimizeScreenShareConstraint(stream: MediaStream, constraints: MediaStreamConstraints) {\n    if (typeof constraints.video === 'boolean' || !constraints.video?.width || !constraints.video?.height) {\n      return;\n    }\n    const publishParams = this.store.getPublishParams();\n    if (!publishParams || !publishParams.allowed?.includes('screen')) {\n      return;\n    }\n    const videoElement = document.createElement('video');\n    videoElement.srcObject = stream;\n    videoElement.addEventListener('loadedmetadata', async () => {\n      const { videoWidth, videoHeight } = videoElement;\n      const screen = publishParams.screen;\n      const pixels = screen.width * screen.height;\n      const actualAspectRatio = videoWidth / videoHeight;\n      const currentAspectRatio = screen.width / screen.height;\n      if (actualAspectRatio > currentAspectRatio) {\n        const videoConstraint = constraints.video as MediaTrackConstraints;\n        const ratio = actualAspectRatio / currentAspectRatio;\n        const sqrt_ratio = Math.sqrt(ratio);\n        if (videoWidth * videoHeight > pixels) {\n          videoConstraint.width = videoWidth / sqrt_ratio;\n          videoConstraint.height = videoHeight / sqrt_ratio;\n        } else {\n          videoConstraint.height = videoHeight * sqrt_ratio;\n          videoConstraint.width = videoWidth * sqrt_ratio;\n        }\n        await stream.getVideoTracks()[0].applyConstraints(videoConstraint);\n      }\n    });\n  }\n  // eslint-disable-next-line complexity\n  async getLocalScreen(partialConfig?: HMSScreenShareConfig, optimise = false) {\n    const config = await this.getOrDefaultScreenshareConfig(partialConfig);\n    const screenSettings = this.getScreenshareSettings(config.videoOnly);\n    const constraints = {\n      video: { ...screenSettings?.video.toConstraints(true), displaySurface: config.displaySurface },\n      preferCurrentTab: config.preferCurrentTab,\n      selfBrowserSurface: config.selfBrowserSurface,\n      surfaceSwitching: config.surfaceSwitching,\n      systemAudio: config.systemAudio,\n    } as MediaStreamConstraints;\n    if (screenSettings?.audio) {\n      const audioConstraints: MediaTrackConstraints = screenSettings?.audio?.toConstraints();\n      // remove advanced constraints as it not supported for screenshare audio\n      delete audioConstraints.advanced;\n      constraints.audio = {\n        ...audioConstraints,\n        autoGainControl: false,\n        noiseSuppression: false,\n        // @ts-ignore\n        googAutoGainControl: false,\n        echoCancellation: false,\n      };\n    } else if (partialConfig?.forceCurrentTab && partialConfig.preferCurrentTab && partialConfig.cropElement) {\n      // only need if crop element with prefer and force current tab\n      constraints.audio = {\n        echoCancellation: true,\n        noiseSuppression: true,\n      };\n    }\n    let stream;\n    try {\n      HMSLogger.d('retrieving screenshare with ', { config }, { constraints });\n      // @ts-ignore [https://github.com/microsoft/TypeScript/issues/33232]\n      stream = (await navigator.mediaDevices.getDisplayMedia(constraints)) as MediaStream;\n      if (optimise) {\n        await this.optimizeScreenShareConstraint(stream, constraints);\n      }\n    } catch (err) {\n      HMSLogger.w(this.TAG, 'error in getting screenshare - ', err);\n      const error = BuildGetMediaError(err as Error, HMSTrackExceptionTrackType.SCREEN);\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.publish({\n          error: error as Error,\n          devices: this.deviceManager.getDevices(),\n          settings: new HMSTrackSettings(screenSettings?.video, screenSettings?.audio, false),\n        }),\n      );\n      throw error;\n    }\n\n    const tracks: Array<HMSLocalTrack> = [];\n    const local = new HMSLocalStream(stream);\n    const nativeVideoTrack = stream.getVideoTracks()[0];\n    const videoTrack = new HMSLocalVideoTrack(\n      local,\n      nativeVideoTrack,\n      'screen',\n      this.eventBus,\n      screenSettings?.video,\n      this.store.getRoom(),\n    );\n    videoTrack.setSimulcastDefinitons(this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer()!, 'screen'));\n\n    try {\n      const isCurrentTabShared = this.validateCurrentTabCapture(videoTrack, config.forceCurrentTab);\n      videoTrack.isCurrentTab = isCurrentTabShared;\n      await videoTrack.cropTo(config.cropTarget);\n    } catch (err) {\n      stream.getTracks().forEach(track => track.stop());\n      throw err;\n    }\n\n    tracks.push(videoTrack);\n    const nativeAudioTrack = stream.getAudioTracks()[0];\n    if (nativeAudioTrack) {\n      const audioTrack = new HMSLocalAudioTrack(\n        local,\n        nativeAudioTrack,\n        'screen',\n        this.eventBus,\n        screenSettings?.audio,\n        this.store.getRoom(),\n      );\n      tracks.push(audioTrack);\n    }\n\n    HMSLogger.v(this.TAG, 'getLocalScreen', tracks);\n    return tracks;\n  }\n\n  setScreenCaptureHandleConfig(config?: Partial<ScreenCaptureHandleConfig>) {\n    // @ts-ignore\n    if (!navigator.mediaDevices?.setCaptureHandleConfig || this.isInIframe()) {\n      // setCaptureHandleConfig can't be called from within an iframe\n      return;\n    }\n    config = config || {};\n    Object.assign(config, { handle: uuid(), exposeOrigin: false, permittedOrigins: [window.location.origin] });\n    HMSLogger.d('setting capture handle - ', config.handle);\n    // @ts-ignore\n    navigator.mediaDevices.setCaptureHandleConfig(config);\n    this.captureHandleIdentifier = config.handle;\n  }\n\n  validateCurrentTabCapture(track: HMSLocalVideoTrack, forceCurrentTab: boolean): boolean {\n    const trackHandle = track.getCaptureHandle();\n    const isCurrentTabShared = !!(this.captureHandleIdentifier && trackHandle?.handle === this.captureHandleIdentifier);\n    if (forceCurrentTab && !isCurrentTabShared) {\n      HMSLogger.e(this.TAG, 'current tab was not shared with forceCurrentTab as true');\n      throw ErrorFactory.TracksErrors.CurrentTabNotShared();\n    }\n    return isCurrentTabShared;\n  }\n\n  async requestPermissions() {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n      // Stop stream\n      stream.getTracks().forEach(track => track.stop());\n    } catch (error) {\n      HMSLogger.e(this.TAG, error);\n    }\n  }\n\n  static getEmptyVideoTrack(prevTrack?: MediaStreamTrack): MediaStreamTrack {\n    const width = prevTrack?.getSettings()?.width || 320;\n    const height = prevTrack?.getSettings()?.height || 240;\n    const frameRate = 1; // fps TODO: experiment, see if this can be reduced\n    if (!blankCanvas) {\n      blankCanvas = document.createElement('canvas');\n      blankCanvas.width = width;\n      blankCanvas.height = height;\n      blankCanvas.getContext('2d')?.fillRect(0, 0, width, height);\n    }\n    if (!intervalID) {\n      // This is needed to send some data so the track is received on sfu\n      intervalID = setInterval(() => {\n        const ctx = blankCanvas?.getContext('2d');\n        if (ctx) {\n          ctx.fillRect(0, 0, 1, 1);\n        }\n      }, 1000 / frameRate);\n    }\n\n    const stream = blankCanvas.captureStream(frameRate);\n    const emptyTrack = stream.getVideoTracks()[0];\n    emptyTrack.enabled = false;\n    return emptyTrack;\n  }\n\n  static getEmptyAudioTrack(): MediaStreamTrack {\n    const ctx = HMSAudioContextHandler.getAudioContext();\n    const oscillator = ctx.createOscillator();\n    const dst = ctx.createMediaStreamDestination();\n    oscillator.connect(dst);\n    oscillator.start();\n    const emptyTrack = dst.stream.getAudioTracks()[0];\n    emptyTrack.enabled = false;\n    return emptyTrack;\n  }\n\n  static cleanup() {\n    clearInterval(intervalID);\n    intervalID = undefined;\n    blankCanvas = undefined;\n  }\n\n  /**\n   * @throws {HMSException}\n   */\n  private async getAVTracks(settings: HMSTrackSettings): Promise<Array<MediaStreamTrack>> {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: settings.audio ? settings.audio.toConstraints() : false,\n        video: settings.video ? settings.video.toConstraints() : false,\n      });\n\n      return stream.getVideoTracks().concat(stream.getAudioTracks());\n    } catch (error) {\n      await this.deviceManager.init();\n      const videoError = !!(!this.deviceManager.hasWebcamPermission && settings.video);\n      const audioError = !!(!this.deviceManager.hasMicrophonePermission && settings.audio);\n      /**\n       * TODO: Only permission error throws correct device info in error(audio or video or both),\n       * Right now for other errors such as overconstrained error we are unable to get whether audio/video failure.\n       * Fix this by checking the native error message.\n       */\n      const errorType = this.getErrorType(videoError, audioError);\n      throw BuildGetMediaError(error as Error, errorType);\n    }\n  }\n\n  private getAVTrackSettings(initialSettings: InitialSettings): HMSTrackSettings | null {\n    const audioSettings = this.getAudioSettings(initialSettings);\n    const videoSettings = this.getVideoSettings(initialSettings);\n    if (!audioSettings && !videoSettings) {\n      return null;\n    }\n    return new HMSTrackSettingsBuilder().video(videoSettings).audio(audioSettings).build();\n  }\n\n  private isInIframe() {\n    try {\n      return window.self !== window.top;\n    } catch (e) {\n      return true;\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  private async retryGetLocalTracks(\n    error: HMSException,\n    trackSettings: HMSTrackSettings,\n    fetchTrackOptions: IFetchAVTrackOptions,\n    localStream?: HMSLocalStream,\n  ): Promise<Array<HMSLocalTrack>> {\n    if (error instanceof HMSException && error.action === HMSAction.TRACK) {\n      this.observer.onFailure(error);\n\n      const overConstrainedFailure = error.code === ErrorCodes.TracksErrors.OVER_CONSTRAINED;\n      const audioFailure = error.message.includes('audio');\n      const videoFailure = error.message.includes('video');\n      if (overConstrainedFailure) {\n        // TODO: Use this once TODO@L#250 is completed\n        // const newTrackSettings = new HMSTrackSettingsBuilder()\n        //   .video(videoFailure ? new HMSVideoTrackSettings() : trackSettings.video)\n        //   .audio(audioFailure ? new HMSAudioTrackSettings() : trackSettings.audio)\n        //   .build();\n        const newTrackSettings = new HMSTrackSettingsBuilder()\n          .video(new HMSVideoTrackSettings())\n          .audio(new HMSAudioTrackSettings())\n          .build();\n\n        HMSLogger.w(this.TAG, 'Fetch AV Tracks failed with overconstrained error', { fetchTrackOptions }, { error });\n\n        try {\n          // Try get local tracks with no constraints\n          return await this.getLocalTracks(fetchTrackOptions, newTrackSettings, localStream);\n        } catch (error) {\n          /**\n           * This error shouldn't be overconstrained error(as we've dropped all constraints).\n           * If it's an overconstrained error, change error code to avoid recursive loop\n           * Try get local tracks for empty tracks\n           */\n          const nativeError: Error | undefined = error instanceof HMSException ? error.nativeError : (error as Error);\n          let ex = error;\n          if (nativeError?.name === 'OverconstrainedError') {\n            const newError = ErrorFactory.TracksErrors.GenericTrack(\n              HMSAction.TRACK,\n              'Overconstrained error after dropping all constraints',\n            );\n            newError.addNativeError(nativeError);\n            ex = newError;\n          }\n\n          return await this.retryGetLocalTracks(ex as HMSException, trackSettings, fetchTrackOptions, localStream);\n        }\n      }\n\n      fetchTrackOptions.audio = audioFailure ? 'empty' : fetchTrackOptions.audio;\n      fetchTrackOptions.video = videoFailure ? 'empty' : fetchTrackOptions.video;\n      HMSLogger.w(this.TAG, 'Fetch AV Tracks failed', { fetchTrackOptions }, error);\n      try {\n        return await this.getLocalTracks(fetchTrackOptions, trackSettings, localStream);\n      } catch (error) {\n        HMSLogger.w(this.TAG, 'Fetch empty tacks failed', error);\n        fetchTrackOptions.audio = fetchTrackOptions.audio && 'empty';\n        fetchTrackOptions.video = fetchTrackOptions.video && 'empty';\n        this.observer.onFailure(error as HMSException);\n        return await this.getLocalTracks(fetchTrackOptions, trackSettings, localStream);\n      }\n    } else {\n      HMSLogger.w(this.TAG, 'Fetch AV Tracks failed - unknown exception', error);\n      this.observer.onFailure(error);\n      return [];\n    }\n  }\n\n  getErrorType(videoError: boolean, audioError: boolean): HMSTrackExceptionTrackType {\n    if (videoError && audioError) {\n      return HMSTrackExceptionTrackType.AUDIO_VIDEO;\n    }\n    if (videoError) {\n      return HMSTrackExceptionTrackType.VIDEO;\n    }\n    if (audioError) {\n      return HMSTrackExceptionTrackType.AUDIO;\n    }\n    return HMSTrackExceptionTrackType.AUDIO_VIDEO;\n  }\n\n  private getEmptyTracks(fetchTrackOptions: IFetchAVTrackOptions) {\n    const nativeTracks: MediaStreamTrack[] = [];\n    if (fetchTrackOptions.audio === 'empty') {\n      nativeTracks.push(LocalTrackManager.getEmptyAudioTrack());\n    }\n\n    if (fetchTrackOptions.video === 'empty') {\n      nativeTracks.push(LocalTrackManager.getEmptyVideoTrack());\n    }\n    return nativeTracks;\n  }\n\n  private async updateCurrentLocalTrackSettings(trackSettings: HMSTrackSettings | null) {\n    const localTracks = this.store.getLocalPeerTracks();\n    const videoTrack = localTracks.find(t => t.type === HMSTrackType.VIDEO && t.source === 'regular') as\n      | HMSLocalVideoTrack\n      | undefined;\n    const audioTrack = localTracks.find(t => t.type === HMSTrackType.AUDIO && t.source === 'regular') as\n      | HMSLocalAudioTrack\n      | undefined;\n\n    const screenVideoTrack = localTracks.find(t => t.type === HMSTrackType.VIDEO && t.source === 'screen') as\n      | HMSLocalVideoTrack\n      | undefined;\n\n    if (trackSettings?.video) {\n      await videoTrack?.setSettings(trackSettings.video);\n    }\n\n    if (trackSettings?.audio) {\n      await audioTrack?.setSettings(trackSettings.audio);\n    }\n\n    const screenSettings = this.getScreenshareSettings(true);\n    if (screenSettings?.video) {\n      await screenVideoTrack?.setSettings(screenSettings?.video);\n    }\n\n    return { videoTrack, audioTrack };\n  }\n\n  private getAudioSettings(initialSettings: InitialSettings) {\n    const publishParams = this.store.getPublishParams();\n    if (!publishParams || !publishParams.allowed?.includes('audio')) {\n      return null;\n    }\n    const localPeer = this.store.getLocalPeer();\n    const audioTrack = localPeer?.audioTrack;\n    // Get device from the tracks already added in preview\n    const audioDeviceId = audioTrack?.settings.deviceId || initialSettings.audioInputDeviceId;\n\n    return new HMSAudioTrackSettingsBuilder()\n      .codec(publishParams.audio.codec as HMSAudioCodec)\n      .maxBitrate(publishParams.audio.bitRate)\n      .deviceId(audioDeviceId || defaultSettings.audioInputDeviceId)\n      .build();\n  }\n\n  private getVideoSettings(initialSettings: InitialSettings) {\n    const publishParams = this.store.getPublishParams();\n    if (!publishParams || !publishParams.allowed?.includes('video')) {\n      return null;\n    }\n    const localPeer = this.store.getLocalPeer();\n    const videoTrack = localPeer?.videoTrack;\n    // Get device from the tracks already added in preview\n    const videoDeviceId = videoTrack?.settings.deviceId || initialSettings.videoDeviceId;\n    const video = publishParams.video;\n    return new HMSVideoTrackSettingsBuilder()\n      .codec(video.codec as HMSVideoCodec)\n      .maxBitrate(video.bitRate)\n      .maxFramerate(video.frameRate)\n      .setWidth(video.width) // take simulcast width if available\n      .setHeight(video.height) // take simulcast width if available\n      .deviceId(videoDeviceId || defaultSettings.videoDeviceId)\n      .build();\n  }\n\n  private getScreenshareSettings(isVideoOnly = false) {\n    const publishParams = this.store.getPublishParams();\n    if (!publishParams || !publishParams.allowed?.includes('screen')) {\n      return null;\n    }\n    const screen = publishParams.screen;\n    return {\n      video: new HMSVideoTrackSettingsBuilder()\n        // Don't cap maxBitrate for screenshare.\n        // If publish params doesn't have bitRate value - don't set maxBitrate.\n        .maxBitrate(screen.bitRate, false)\n        .codec(screen.codec as HMSVideoCodec)\n        .maxFramerate(screen.frameRate)\n        .setWidth(screen.width)\n        .setHeight(screen.height)\n        .build(),\n      audio: isVideoOnly ? undefined : new HMSAudioTrackSettingsBuilder().build(),\n    };\n  }\n\n  // eslint-disable-next-line complexity\n  private async getOrDefaultScreenshareConfig(partialConfig?: Partial<HMSScreenShareConfig>) {\n    type RequiredConfig = HMSScreenShareConfig &\n      Required<Omit<HMSScreenShareConfig, 'cropTarget' | 'cropElement' | 'displaySurface'>>;\n    const config: RequiredConfig = Object.assign(\n      {\n        videoOnly: false,\n        audioOnly: false,\n        forceCurrentTab: false,\n        preferCurrentTab: false,\n        selfBrowserSurface: 'exclude', // don't give self tab in options\n        surfaceSwitching: 'include', // give option to switch tabs while sharing\n        systemAudio: 'exclude', // system audio share leads to echo in windows\n        displaySurface: 'monitor',\n      },\n      partialConfig || {},\n    );\n    if (config.forceCurrentTab) {\n      config.videoOnly = true; // there will be echo otherwise\n      config.preferCurrentTab = true;\n      config.selfBrowserSurface = 'include';\n      config.surfaceSwitching = 'exclude';\n    }\n    if (config.preferCurrentTab) {\n      config.selfBrowserSurface = 'include';\n      config.displaySurface = undefined; // so the default selected is the current tab\n    }\n    // @ts-ignore\n    if (config.cropElement && window.CropTarget?.fromElement) {\n      // @ts-ignore\n      config.cropTarget = await window.CropTarget.fromElement(config.cropElement);\n    }\n    return config;\n  }\n\n  private createHMSLocalTracks(\n    nativeTracks: MediaStreamTrack[],\n    settings: HMSTrackSettings,\n    localStream?: HMSLocalStream,\n  ) {\n    const nativeVideoTrack = nativeTracks.find(track => track.kind === 'video');\n    const nativeAudioTrack = nativeTracks.find(track => track.kind === 'audio');\n    if (localStream) {\n      nativeTracks.forEach(track => localStream?.nativeStream.addTrack(track));\n    } else {\n      localStream = new HMSLocalStream(new MediaStream(nativeTracks));\n    }\n\n    const tracks: Array<HMSLocalTrack> = [];\n    if (nativeAudioTrack && settings?.audio) {\n      const audioTrack = new HMSLocalAudioTrack(\n        localStream,\n        nativeAudioTrack,\n        'regular',\n        this.eventBus,\n        settings.audio,\n        this.store.getRoom(),\n      );\n      tracks.push(audioTrack);\n    }\n\n    if (nativeVideoTrack && settings?.video) {\n      const videoTrack = new HMSLocalVideoTrack(\n        localStream,\n        nativeVideoTrack,\n        'regular',\n        this.eventBus,\n        settings.video,\n        this.store.getRoom(),\n      );\n      videoTrack.setSimulcastDefinitons(\n        this.store.getSimulcastDefinitionsForPeer(this.store.getLocalPeer()!, 'regular'),\n      );\n      tracks.push(videoTrack);\n    }\n    return tracks;\n  }\n}\n","import { HMSAudioTrack } from './HMSAudioTrack';\n\nexport class HMSRemoteAudioTrack extends HMSAudioTrack {\n  async setEnabled(value: boolean): Promise<void> {\n    if (value === this.enabled) {\n      return;\n    }\n    await super.setEnabled(value);\n    await this.subscribeToAudio(value);\n  }\n}\n","import { HMSTrack, HMSTrackSource } from './HMSTrack';\nimport { HMSTrackType } from './HMSTrackType';\nimport { VideoElementManager } from './VideoElementManager';\nimport HMSLogger from '../../utils/logger';\nimport { isSafari } from '../../utils/support';\nimport { HMSMediaStream } from '../streams';\n\nexport class HMSVideoTrack extends HMSTrack {\n  readonly type: HMSTrackType = HMSTrackType.VIDEO;\n  private sinkCount = 0;\n  videoHandler!: VideoElementManager;\n\n  constructor(stream: HMSMediaStream, track: MediaStreamTrack, source?: string) {\n    super(stream, track, source as HMSTrackSource);\n    if (track.kind !== 'video') {\n      throw new Error(\"Expected 'track' kind = 'video'\");\n    }\n  }\n\n  setVideoHandler(videoHandler: VideoElementManager) {\n    this.videoHandler = videoHandler;\n  }\n\n  /**\n   * sink=video element rendering the video\n   */\n  hasSinks() {\n    return this.sinkCount > 0;\n  }\n\n  getSinks() {\n    return this.videoHandler.getVideoElements() || [];\n  }\n\n  attach(videoElement: HTMLVideoElement) {\n    this.videoHandler.addVideoElement(videoElement);\n  }\n\n  detach(videoElement: HTMLVideoElement) {\n    this.videoHandler.removeVideoElement(videoElement);\n  }\n\n  /**\n   * attaches the track to the passed in video element\n   * @param videoElement\n   */\n  addSink(videoElement: HTMLVideoElement) {\n    this.addSinkInternal(videoElement, this.nativeTrack);\n  }\n\n  /**\n   * removes the track from the passed in video element\n   * @param videoElement\n   */\n  removeSink(videoElement: HTMLVideoElement) {\n    if (videoElement.srcObject !== null) {\n      videoElement.srcObject = null;\n      this.reduceSinkCount();\n    }\n  }\n\n  cleanup(): void {\n    super.cleanup();\n    this.videoHandler.cleanup();\n  }\n\n  protected addSinkInternal(videoElement: HTMLVideoElement, track: MediaStreamTrack) {\n    const srcObject = videoElement.srcObject;\n    if (srcObject !== null && srcObject instanceof MediaStream) {\n      const existingTrack = srcObject.getVideoTracks()[0];\n      if (existingTrack?.id === track.id) {\n        if (!existingTrack.muted && existingTrack.readyState === 'live') {\n          // it's already attached, attaching again would just cause flickering\n          return;\n        } else {\n          this.reduceSinkCount();\n        }\n      } else {\n        this.reduceSinkCount();\n      }\n    }\n\n    this.addPropertiesToElement(videoElement);\n    const stream = new MediaStream([track]);\n    videoElement.srcObject = stream;\n    this.reTriggerPlay({ videoElement });\n    this.sinkCount++;\n  }\n\n  handleTrackUnmute = () => {\n    this.getSinks().forEach(videoElement => this.reTriggerPlay({ videoElement }));\n  };\n\n  private reTriggerPlay = ({ videoElement }: { videoElement: HTMLVideoElement }) => {\n    setTimeout(() => {\n      videoElement.play().catch((e: Error) => {\n        HMSLogger.w('[HMSVideoTrack]', 'failed to play', e.message);\n      });\n    }, 0);\n  };\n\n  private reduceSinkCount() {\n    if (this.sinkCount > 0) {\n      this.sinkCount--;\n    }\n  }\n\n  private addPropertiesToElement(element: HTMLVideoElement) {\n    if (!isSafari) {\n      element.autoplay = true;\n    }\n    element.playsInline = true;\n    element.muted = true;\n    element.controls = false;\n  }\n}\n","import { HMSPreferredSimulcastLayer, HMSSimulcastLayer, HMSSimulcastLayerDefinition } from '../../interfaces';\n\nexport const layerToIntMapping = {\n  [HMSSimulcastLayer.NONE]: -1,\n  [HMSSimulcastLayer.LOW]: 0,\n  [HMSSimulcastLayer.MEDIUM]: 1,\n  [HMSSimulcastLayer.HIGH]: 2,\n};\nconst DELTA_THRESHOLD = 0.5;\n\n/**\n * Given the simulcast layers and the current video element dimensions, this function finds the\n * layer with dimensions closer to the video element dimensions.\n */\n// eslint-disable-next-line complexity\nexport const getClosestLayer = (\n  simulcastLayers: HMSSimulcastLayerDefinition[],\n  videoElementDimensions: { width: number; height: number },\n): HMSPreferredSimulcastLayer => {\n  let closestLayer: HMSPreferredSimulcastLayer = HMSSimulcastLayer.HIGH;\n  // when both width and height are equal pick height to select a better quality\n  const maxDimension = videoElementDimensions.width > videoElementDimensions.height ? 'width' : 'height';\n  const layers = [...simulcastLayers].sort((a, b) => layerToIntMapping[a.layer] - layerToIntMapping[b.layer]);\n  const videoDimesion = videoElementDimensions[maxDimension] * (window?.devicePixelRatio || 1);\n  for (let i = 0; i < layers.length; i++) {\n    const { resolution, layer } = layers[i];\n    const layerDimension = resolution[maxDimension];\n    // we break here because the layers are already sorted, the next would always be greater if the below condition satisifes\n    if (videoDimesion <= layerDimension) {\n      closestLayer = layer;\n      break;\n    } else {\n      const nextLayer = layers[i + 1];\n      const nextLayerDimension = nextLayer ? nextLayer.resolution[maxDimension] : Number.POSITIVE_INFINITY;\n      // calculating which layer this dimension is closer to\n      const proximityPercent = (videoDimesion - layerDimension) / (nextLayerDimension - layerDimension);\n      if (proximityPercent < DELTA_THRESHOLD) {\n        // the element's dimension is closer to the current layer\n        closestLayer = layer;\n        break;\n      }\n    }\n  }\n  return closestLayer;\n};\n","import HMSLogger from './logger';\nimport { isBrowser } from './support';\n\nexport interface HMSIntersectionObserverCallback {\n  (entry: IntersectionObserverEntry): void;\n}\n\n/**\n * This is a wrapper around IntersectionObserver which will call the callback passed\n * for an element while observing, only when that element is intersecting\n */\nexport class HMSIntersectionObserverWrapper {\n  private intersectionObserver?: IntersectionObserver;\n  private readonly TAG = '[HMSIntersectionObserverWrapper]';\n  private listeners = new WeakMap<HTMLElement, HMSIntersectionObserverCallback>();\n  constructor() {\n    this.createObserver();\n  }\n\n  isSupported() {\n    const isSupported = isBrowser && typeof window.IntersectionObserver !== 'undefined';\n    if (!isSupported) {\n      HMSLogger.w(this.TAG, 'IntersectionObserver is not supported, fallback will be used instead');\n    }\n    return isSupported;\n  }\n\n  observe = (element: HTMLElement, onIntersection: HMSIntersectionObserverCallback) => {\n    this.createObserver();\n    // unobserve before observing the element\n    this.unobserve(element);\n    this.intersectionObserver?.observe(element);\n    this.listeners.set(element, onIntersection);\n  };\n\n  unobserve = (element: HTMLElement) => {\n    this.intersectionObserver?.unobserve(element);\n    this.listeners.delete(element);\n  };\n\n  private createObserver = () => {\n    if (this.isSupported() && !this.intersectionObserver) {\n      this.intersectionObserver = new IntersectionObserver(this.handleIntersection);\n    }\n  };\n\n  private handleIntersection = (entries: IntersectionObserverEntry[]) => {\n    for (const entry of entries) {\n      this.listeners.get(entry.target as HTMLElement)?.(entry);\n    }\n  };\n}\n\nexport const HMSIntersectionObserver = new HMSIntersectionObserverWrapper();\n","import HMSLogger from './logger';\nimport { isBrowser } from './support';\nimport { debounce } from './timer-utils';\n\nexport interface HMSResizeObserverCallback {\n  (entry: ResizeObserverEntry): void;\n}\n\n/**\n * This is a wrapper around ResizeObserver which will call the callback passed\n * for an element while observing, only when that element is intersecting\n */\nexport class HMSResizeObserverWrapper {\n  private resizeObserver?: ResizeObserver;\n  private readonly TAG = '[HMSResizeObserverWrapper]';\n  private listeners = new WeakMap<HTMLElement, HMSResizeObserverCallback>();\n  constructor() {\n    this.createObserver();\n  }\n\n  isSupported() {\n    const isSupported = isBrowser && typeof window.ResizeObserver !== 'undefined';\n    if (!isSupported) {\n      HMSLogger.w(this.TAG, 'Resize Observer is not supported');\n    }\n    return isSupported;\n  }\n\n  observe = (\n    element: HTMLElement,\n    onResize: HMSResizeObserverCallback,\n    options: ResizeObserverOptions = { box: 'border-box' },\n  ) => {\n    this.createObserver();\n    // unobserve before observing the element\n    this.unobserve(element);\n    this.resizeObserver?.observe(element, options);\n    this.listeners.set(element, onResize);\n  };\n\n  unobserve = (element: HTMLElement) => {\n    this.resizeObserver?.unobserve(element);\n    this.listeners.delete(element);\n  };\n\n  private createObserver = () => {\n    if (this.isSupported() && !this.resizeObserver) {\n      this.resizeObserver = new ResizeObserver(debounce(this.handleResize, 300));\n    }\n  };\n\n  private handleResize = (entries: ResizeObserverEntry[]) => {\n    for (const entry of entries) {\n      this.listeners.get(entry.target as HTMLElement)?.(entry);\n    }\n  };\n}\n\nexport const HMSResizeObserver = new HMSResizeObserverWrapper();\n","import { v4 as uuid } from 'uuid';\nimport { getClosestLayer, layerToIntMapping } from './trackUtils';\nimport { HMSPreferredSimulcastLayer } from '../../interfaces/simulcast-layers';\nimport { HMSLocalVideoTrack, HMSRemoteVideoTrack } from '../../internal';\nimport { HMSIntersectionObserver } from '../../utils/intersection-observer';\nimport HMSLogger from '../../utils/logger';\nimport { HMSResizeObserver } from '../../utils/resize-observer';\nimport { isBrowser } from '../../utils/support';\n\n/**\n * This class is to manager video elements for video tracks.\n * This will handle attaching/detaching when element is in view or out of view.\n * This will also handle selecting appropriate layer when element size changesx\n */\nexport class VideoElementManager {\n  private readonly TAG = '[VideoElementManager]';\n  private resizeObserver?: typeof HMSResizeObserver;\n  private intersectionObserver?: typeof HMSIntersectionObserver;\n  private videoElements = new Set<HTMLVideoElement>();\n  private entries = new WeakMap<HTMLVideoElement, DOMRectReadOnly>();\n  private id: string;\n\n  constructor(private track: HMSLocalVideoTrack | HMSRemoteVideoTrack) {\n    this.init();\n    this.id = uuid();\n  }\n\n  updateSinks(requestLayer = false) {\n    for (const videoElement of this.videoElements) {\n      if (this.track.enabled) {\n        this.track.addSink(videoElement, requestLayer);\n      } else {\n        this.track.removeSink(videoElement, requestLayer);\n      }\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  async addVideoElement(videoElement: HTMLVideoElement) {\n    if (this.videoElements.has(videoElement)) {\n      return;\n    }\n    // Call init again, to initialize again if for some reason it failed in constructor\n    // it will be a no-op if initialize already\n    this.init();\n    HMSLogger.d(this.TAG, `Adding video element for ${this.track}`, this.id);\n    this.videoElements.add(videoElement);\n    if (this.videoElements.size >= 10) {\n      HMSLogger.w(\n        this.TAG,\n        `${this.track}`,\n        `the track is added to ${this.videoElements.size} video elements, while this may be intentional, it's likely that there is a bug leading to unnecessary creation of video elements in the UI`,\n      );\n    }\n\n    if (this.intersectionObserver?.isSupported()) {\n      this.intersectionObserver.observe(videoElement, this.handleIntersection);\n    } else if (isBrowser) {\n      if (this.isElementInViewport(videoElement)) {\n        this.track.addSink(videoElement);\n      } else {\n        this.track.removeSink(videoElement);\n      }\n    }\n    if (this.resizeObserver) {\n      this.resizeObserver.observe(videoElement, this.handleResize);\n    } else if (this.track instanceof HMSRemoteVideoTrack) {\n      await this.track.setPreferredLayer(this.track.getPreferredLayer());\n    }\n  }\n\n  removeVideoElement(videoElement: HTMLVideoElement): void {\n    this.track.removeSink(videoElement);\n    this.videoElements.delete(videoElement);\n    this.entries.delete(videoElement);\n    this.resizeObserver?.unobserve(videoElement);\n    this.intersectionObserver?.unobserve(videoElement);\n    HMSLogger.d(this.TAG, `Removing video element for ${this.track}`);\n  }\n\n  getVideoElements(): HTMLVideoElement[] {\n    return Array.from(this.videoElements);\n  }\n\n  private init() {\n    if (isBrowser) {\n      this.resizeObserver = HMSResizeObserver;\n      this.intersectionObserver = HMSIntersectionObserver;\n    }\n  }\n\n  private handleIntersection = async (entry: IntersectionObserverEntry) => {\n    const isVisibile = getComputedStyle(entry.target).visibility === 'visible';\n    // .contains check is needed for pip component as the video tiles are not mounted to dom element\n    if (this.track.enabled && ((entry.isIntersecting && isVisibile) || !document.contains(entry.target))) {\n      HMSLogger.d(this.TAG, 'add sink intersection', `${this.track}`, this.id);\n      this.entries.set(entry.target as HTMLVideoElement, entry.boundingClientRect);\n      await this.selectMaxLayer();\n      await this.track.addSink(entry.target as HTMLVideoElement);\n    } else {\n      HMSLogger.d(this.TAG, 'remove sink intersection', `${this.track}`, this.id);\n      await this.track.removeSink(entry.target as HTMLVideoElement);\n    }\n  };\n\n  private handleResize = async (entry: ResizeObserverEntry) => {\n    if (!this.track.enabled || !(this.track instanceof HMSRemoteVideoTrack)) {\n      return;\n    }\n    this.entries.set(entry.target as HTMLVideoElement, entry.contentRect);\n    await this.selectMaxLayer();\n  };\n\n  /**\n   *  Taken from\n   *  https://stackoverflow.com/a/125106/4321808\n   */\n  // eslint-disable-next-line complexity\n  private isElementInViewport(el: HTMLElement) {\n    let top = el.offsetTop;\n    let left = el.offsetLeft;\n    const width = el.offsetWidth;\n    const height = el.offsetHeight;\n    const { hidden } = el;\n    const { opacity, display } = getComputedStyle(el);\n\n    while (el.offsetParent) {\n      el = el.offsetParent as HTMLElement;\n      top += el.offsetTop;\n      left += el.offsetLeft;\n    }\n\n    return (\n      top < window.pageYOffset + window.innerHeight &&\n      left < window.pageXOffset + window.innerWidth &&\n      top + height > window.pageYOffset &&\n      left + width > window.pageXOffset &&\n      !hidden &&\n      (opacity !== '' ? parseFloat(opacity) > 0 : true) &&\n      display !== 'none'\n    );\n  }\n\n  // eslint-disable-next-line complexity\n  private async selectMaxLayer() {\n    if (!(this.track instanceof HMSRemoteVideoTrack) || this.videoElements.size === 0) {\n      return;\n    }\n    let maxLayer!: HMSPreferredSimulcastLayer;\n    for (const element of this.videoElements) {\n      const entry = this.entries.get(element);\n      if (!entry) {\n        continue;\n      }\n      const { width, height } = entry;\n      if (width === 0 || height === 0) {\n        continue;\n      }\n      const layer = getClosestLayer(this.track.getSimulcastDefinitions(), { width, height });\n      if (!maxLayer) {\n        maxLayer = layer;\n      } else {\n        maxLayer = layerToIntMapping[layer] > layerToIntMapping[maxLayer] ? layer : maxLayer;\n      }\n    }\n    if (maxLayer) {\n      HMSLogger.d(this.TAG, `selecting max layer ${maxLayer} for the track`, `${this.track}`);\n      await this.track.setPreferredLayer(maxLayer);\n    }\n  }\n\n  cleanup = () => {\n    this.videoElements.forEach(videoElement => {\n      videoElement.srcObject = null;\n      this.resizeObserver?.unobserve(videoElement);\n      this.intersectionObserver?.unobserve(videoElement);\n    });\n    this.videoElements.clear();\n    this.resizeObserver = undefined;\n    this.intersectionObserver = undefined;\n  };\n}\n","import { HMSPluginSupportResult } from '../audio';\n\n/**\n * A plugin implementing this interface can be registered with HMSLocalVideoTrack to transform, process or\n * analyze the local video track.These can include applications like video filters, virtual background, live\n * analysis of video etc. The below functions are required for the sdk to properly use the plugin, usually\n * the plugin would also be exposing some public functions of its own for the UI to control its working.\n */\nexport interface HMSVideoPlugin {\n  /**\n   * The name is meant to uniquely specify a plugin instance. This will be used to track number of plugins\n   * added to the track, and same name won't be allowed twice.\n   */\n  getName(): string;\n\n  /**\n   * This function will be called before the call to init, it is used to check whether the plugin supports current\n   * OS and device or not. An error will be thrown back to the user if they try to use an unsupported plugin.\n   */\n  checkSupport(): HMSPluginSupportResult;\n\n  /**\n   * @deprecated. Will be deleted in future updates. Use checkSupport instead.\n   */\n  isSupported(): boolean;\n\n  /**\n   * This function will be called in the beginning for initialization which may include tasks like setting up\n   * variables, loading ML models etc. This can be used by a plugin to ensure it's prepared at the time\n   * processVideoFrame is called.\n   */\n  init(): Promise<void>;\n\n  /**\n   * @see HMSVideoPluginType\n   */\n  getPluginType(): HMSVideoPluginType;\n\n  getContextType?(): HMSVideoPluginCanvasContextType;\n\n  /**\n   * This function will be called by the SDK for every video frame which the plugin needs to process.\n   * PluginFrameRate - the rate at which the plugin is expected to process the video frames. This is not necessarily\n   * equal to the capture frame rate. The user can specify this rate, and the sdk might also change it on basis of\n   * device type, or CPU usage.\n   * For an analyzing plugin, the below function will be called at plugin framerate.\n   * For a transforming plugin, the sdk will pass in the input and output at real frame rate with an additional boolean\n   * pass. The expectation is that the plugin should use results of previous runs instead of doing a complex processing\n   * again when pass is set to true. This helps in maintaining the framerate of the video as well as bringing down\n   * CPU usage in case of complex processing.\n   * @param input input canvas containing the input frame\n   * @param output the output canvas which should contain the output frame\n   * @param skipProcessing use results from previous run if true\n   */\n  processVideoFrame(\n    input: HTMLCanvasElement,\n    output?: HTMLCanvasElement,\n    skipProcessing?: boolean,\n  ): Promise<void> | void;\n\n  /**\n   * the plugin can use this function to dispose off its resources. It'll be called when the processor instance is\n   * no longer needed at the end.\n   */\n  stop(): void;\n}\n\n/**\n * Specifies the type of the plugin a transforming plugin will get an output canvas to give the resulting\n * transformation. While an analyzing plugin will only be passed the input canvas.\n */\nexport enum HMSVideoPluginType {\n  TRANSFORM = 'TRANSFORM',\n  ANALYZE = 'ANALYZE',\n}\n\nexport enum HMSVideoPluginCanvasContextType {\n  '2D' = '2d',\n  WEBGL = 'webgl',\n  'WEBGL2' = 'webgl2',\n}\n","export class RunningAverage {\n  private total = 0;\n  private count = 0;\n\n  add(item: number) {\n    this.count++;\n    this.total += item;\n  }\n\n  getAvg(): number {\n    return Math.floor(this.total / this.count);\n  }\n\n  reset() {\n    this.total = 0;\n    this.count = 0;\n  }\n}\n","import MediaPluginsAnalyticsFactory from '../../analytics/MediaPluginsAnalyticsFactory';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { HMSException } from '../../error/HMSException';\nimport { EventBus } from '../../events/EventBus';\nimport HMSLogger from '../../utils/logger';\nimport { RunningAverage } from '../../utils/math';\n\nexport class VideoPluginsAnalytics {\n  private readonly TAG = '[VideoPluginsAnalytics]';\n  private readonly initTime: Record<string, number>;\n  private readonly addedTimestamps: Record<string, number>;\n  private readonly preProcessingAvgs: RunningAverage;\n  private readonly processingAvgs: Record<string, RunningAverage>;\n  private readonly pluginAdded: Record<string, boolean>;\n  private readonly pluginInputFrameRate: Record<string, number>;\n  private readonly pluginFrameRate: Record<string, number>;\n\n  constructor(private eventBus: EventBus) {\n    this.initTime = {};\n    this.preProcessingAvgs = new RunningAverage();\n    this.addedTimestamps = {};\n    this.processingAvgs = {};\n    this.pluginAdded = {};\n    this.pluginInputFrameRate = {};\n    this.pluginFrameRate = {};\n  }\n\n  added(name: string, inputFrameRate?: number, pluginFrameRate?: number) {\n    this.pluginAdded[name] = true;\n    this.addedTimestamps[name] = Date.now();\n    this.initTime[name] = 0;\n    this.processingAvgs[name] = new RunningAverage();\n    if (inputFrameRate) {\n      this.pluginInputFrameRate[name] = inputFrameRate;\n      this.pluginFrameRate[name] = pluginFrameRate || inputFrameRate;\n    }\n    this.eventBus.analytics.publish(MediaPluginsAnalyticsFactory.added(name, this.addedTimestamps[name]));\n  }\n\n  removed(name: string) {\n    //send stats\n    if (this.pluginAdded[name]) {\n      const stats = {\n        pluginName: name,\n        // duration in seconds\n        duration: Math.floor((Date.now() - this.addedTimestamps[name]) / 1000),\n        loadTime: this.initTime[name],\n        avgPreProcessingTime: this.preProcessingAvgs.getAvg(), //Do we need this in stat not plugin specific\n        avgProcessingTime: this.processingAvgs[name]?.getAvg(),\n        inputFrameRate: this.pluginInputFrameRate[name],\n        pluginFrameRate: this.pluginFrameRate[name],\n      };\n      //send stats\n      this.eventBus.analytics.publish(MediaPluginsAnalyticsFactory.stats(stats));\n      //clean the plugin details\n      this.clean(name);\n    }\n  }\n\n  failure(name: string, error: HMSException) {\n    // send failure event\n    if (this.pluginAdded[name]) {\n      this.eventBus.analytics.publish(MediaPluginsAnalyticsFactory.failure(name, error));\n      //clean the plugin details\n      this.clean(name);\n    }\n  }\n\n  async initWithTime<T>(name: string, initFn: () => Promise<T>) {\n    if (this.initTime[name]) {\n      HMSLogger.i(this.TAG, `Plugin Already loaded ${name}, time it took: ${this.initTime[name]}`);\n      return;\n    }\n    let time: number | undefined = undefined;\n    try {\n      time = await this.timeInMs(initFn);\n      HMSLogger.i(this.TAG, `Time taken for Plugin ${name} initialization : ${time}`);\n    } catch (e) {\n      //Failed during initialization of plugin(model loading etc...)\n      const err = ErrorFactory.MediaPluginErrors.InitFailed(\n        HMSAction.VIDEO_PLUGINS,\n        `failed during initialization of plugin${(e as Error).message || e}`,\n      );\n      HMSLogger.e(this.TAG, err);\n      this.failure(name, err);\n      throw err;\n    }\n    if (time) {\n      this.initTime[name] = time;\n    }\n  }\n\n  async preProcessWithTime<T>(preProcessFn: () => Promise<T>) {\n    //TODO: check if it is required to maintain and shall we handle preprocess failures\n    const time = await this.timeInMs(preProcessFn);\n    this.preProcessingAvgs.add(time);\n  }\n\n  async processWithTime<T>(name: string, processFn: () => Promise<T>) {\n    let time: number | undefined = undefined;\n    try {\n      time = await this.timeInMs(processFn);\n    } catch (e) {\n      //Failed during processing of plugin\n      const err = ErrorFactory.MediaPluginErrors.ProcessingFailed(\n        HMSAction.VIDEO_PLUGINS,\n        `Failed during processing of plugin${(e as Error).message || e}`,\n      );\n      HMSLogger.e(this.TAG, err);\n      this.failure(name, err);\n      throw err;\n    }\n    if (time) {\n      this.processingAvgs[name]?.add(time);\n    }\n  }\n\n  private async timeInMs<T>(fn: () => Promise<T>): Promise<number> {\n    const start = Date.now();\n    await fn();\n    return Math.floor(Date.now() - start);\n  }\n\n  private clean(name: string) {\n    delete this.addedTimestamps[name];\n    delete this.initTime[name];\n    delete this.processingAvgs[name];\n    delete this.pluginAdded[name];\n    delete this.pluginInputFrameRate[name];\n    delete this.pluginFrameRate[name];\n  }\n}\n","/* eslint-disable complexity */\nimport { HMSVideoPlugin, HMSVideoPluginCanvasContextType, HMSVideoPluginType } from './HMSVideoPlugin';\nimport { VideoPluginsAnalytics } from './VideoPluginsAnalytics';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSLocalVideoTrack } from '../../media/tracks';\nimport HMSLogger from '../../utils/logger';\nimport { reusableWorker, workerSleep } from '../../utils/timer-utils';\nimport { HMSPluginUnsupportedTypes } from '../audio';\n\nconst DEFAULT_FRAME_RATE = 24;\nconst DEFAULT_WIDTH = 320;\nconst DEFAULT_HEIGHT = 240;\n\ninterface CanvasElement extends HTMLCanvasElement {\n  captureStream(frameRate?: number): MediaStream;\n}\n\n/**\n * This class manages applying different plugins on a local video track. Plugins which need to modify the video\n * are called in the order they were added. Plugins which do not need to modify the video frames are called\n * with the original input.\n *\n * Concepts -\n * Video Plugin - A module which can take in input video painted on a canvas, do some processing on it and optionally\n * render its output on a passed in output canvas which will be shown in the UI.\n *\n * frameRate - the frame rate of the input video as present in track.getSettings, this is the rate at which new frames\n * are being produced and the rate we need to maintain in output as well.\n *\n * pluginFrameRate - this is the rate at which the plugin is supposed to do its processing. The processing can be an\n * expensive operation and can result in high usage of resources like CPU. This rate would usually be lower than the\n * real frame rate.\n *\n * pluginsLoop - a loop is run at framerate in this class, on each loop if the original track is unmuted all added\n * plugins are called one by one in the order they were called.\n *\n * @see HMSVideoPlugin\n */\nexport class HMSVideoPluginsManager {\n  private readonly TAG = '[VideoPluginsManager]';\n\n  /**\n   * plugins loop is the loop in which all plugins are applied\n   */\n  private pluginsLoopRunning = false;\n  private pluginsLoopState: 'paused' | 'running' = 'paused';\n  private readonly hmsTrack: HMSLocalVideoTrack;\n  readonly pluginsMap: Map<string, HMSVideoPlugin>; // plugin names to their instance mapping\n  private inputVideo?: HTMLVideoElement;\n  private inputCanvas?: CanvasElement;\n  private outputCanvas?: CanvasElement;\n  private outputTrack?: MediaStreamTrack;\n  private analytics: VideoPluginsAnalytics;\n  private pluginAddInProgress = false;\n  private pluginNumFramesToSkip: Record<string, number>;\n  private pluginNumFramesSkipped: Record<string, number>;\n  private canvases: Array<CanvasElement>; //array of canvases to store intermediate result\n  private reusableWorker = reusableWorker();\n\n  constructor(track: HMSLocalVideoTrack, eventBus: EventBus) {\n    this.hmsTrack = track;\n    this.pluginsMap = new Map();\n    this.pluginNumFramesToSkip = {};\n    this.pluginNumFramesSkipped = {};\n    this.analytics = new VideoPluginsAnalytics(eventBus);\n    this.canvases = new Array<CanvasElement>();\n  }\n\n  getPlugins(): string[] {\n    return Array.from(this.pluginsMap.keys());\n  }\n\n  /**\n   * @param plugin\n   * @param pluginFrameRate\n   */\n  async addPlugin(plugin: HMSVideoPlugin, pluginFrameRate?: number) {\n    if (this.pluginAddInProgress) {\n      const name = plugin.getName?.();\n      if (!name || name === '') {\n        HMSLogger.w('no name provided by the plugin');\n        return;\n      }\n\n      const err = ErrorFactory.MediaPluginErrors.AddAlreadyInProgress(\n        HMSAction.VIDEO_PLUGINS,\n        'Add Plugin is already in Progress',\n      );\n      this.analytics.failure(name, err);\n\n      HMSLogger.w(\"can't add another plugin when previous add is in progress\");\n      throw err;\n    }\n\n    this.pluginAddInProgress = true;\n\n    try {\n      await this.addPluginInternal(plugin, pluginFrameRate);\n    } finally {\n      this.pluginAddInProgress = false;\n    }\n  }\n\n  private async addPluginInternal(plugin: HMSVideoPlugin, pluginFrameRate?: number) {\n    const name = plugin.getName?.();\n    if (!name || name === '') {\n      HMSLogger.w('no name provided by the plugin');\n      return;\n    }\n    if (this.pluginsMap.has(name)) {\n      HMSLogger.w(this.TAG, `plugin - ${plugin.getName()} already added.`);\n      return;\n    }\n    //TODO: assuming this inputFrameRate from getMediaTrackSettings will not change once set\n    //TODO: even if it changes will not have the info/params to know the change\n    const inputFrameRate = this.hmsTrack.getMediaTrackSettings().frameRate || DEFAULT_FRAME_RATE;\n\n    let numFramesToSkip = 0;\n    if (pluginFrameRate && pluginFrameRate > 0) {\n      HMSLogger.i(this.TAG, `adding plugin ${plugin.getName()} with framerate ${pluginFrameRate}`);\n      if (pluginFrameRate < inputFrameRate) {\n        numFramesToSkip = Math.ceil(inputFrameRate / pluginFrameRate) - 1;\n      }\n      this.analytics.added(name, inputFrameRate, pluginFrameRate);\n    } else {\n      HMSLogger.i(this.TAG, `adding plugin ${plugin.getName()}`);\n      this.analytics.added(name, inputFrameRate);\n    }\n\n    HMSLogger.i(this.TAG, 'numFrames to skip processing', numFramesToSkip);\n    this.pluginNumFramesToSkip[name] = numFramesToSkip;\n    this.pluginNumFramesSkipped[name] = numFramesToSkip;\n\n    this.validateAndThrow(name, plugin);\n\n    try {\n      await this.analytics.initWithTime(name, async () => await plugin.init());\n      this.pluginsMap.set(name, plugin);\n      // add new canvases according to new added plugins\n      if (this.pluginsMap.size + 1 > this.canvases.length) {\n        for (let i = this.canvases.length; i <= this.pluginsMap.size; i++) {\n          this.canvases[i] = document.createElement('canvas') as CanvasElement;\n        }\n      }\n      await this.startPluginsLoop(plugin.getContextType?.());\n    } catch (err) {\n      HMSLogger.e(this.TAG, 'failed to add plugin', err);\n      await this.removePlugin(plugin);\n      throw err;\n    }\n  }\n\n  validatePlugin(plugin: HMSVideoPlugin) {\n    return plugin.checkSupport();\n  }\n\n  validateAndThrow(name: string, plugin: HMSVideoPlugin) {\n    const result = this.validatePlugin(plugin);\n    if (result.isSupported) {\n      HMSLogger.i(this.TAG, `plugin is supported,- ${plugin.getName()}`);\n    } else {\n      let error;\n      switch (result.errType) {\n        case HMSPluginUnsupportedTypes.PLATFORM_NOT_SUPPORTED:\n          error = ErrorFactory.MediaPluginErrors.PlatformNotSupported(\n            HMSAction.VIDEO_PLUGINS,\n            'platform not supported, see docs',\n          );\n          this.analytics.failure(name, error);\n          throw error;\n        case HMSPluginUnsupportedTypes.DEVICE_NOT_SUPPORTED:\n          error = ErrorFactory.MediaPluginErrors.DeviceNotSupported(\n            HMSAction.VIDEO_PLUGINS,\n            'video device not supported, see docs',\n          );\n          this.analytics.failure(name, error);\n          throw error;\n      }\n    }\n  }\n\n  async removePlugin(plugin: HMSVideoPlugin) {\n    const name = plugin.getName();\n    if (!this.pluginsMap.get(name)) {\n      HMSLogger.w(this.TAG, `plugin - ${name} not found to remove.`);\n      return;\n    }\n    HMSLogger.i(this.TAG, `removing plugin ${name}`);\n    this.removePluginEntry(name);\n    if (this.pluginsMap.size === 0) {\n      HMSLogger.i(this.TAG, `No plugins left, stopping plugins loop`);\n      await this.stopPluginsLoop();\n    }\n    plugin.stop();\n    this.analytics.removed(name);\n  }\n\n  removePluginEntry(name: string) {\n    this.pluginsMap.delete(name);\n    if (this.pluginNumFramesToSkip[name]) {\n      delete this.pluginNumFramesToSkip[name];\n    }\n    if (this.pluginNumFramesSkipped[name]) {\n      delete this.pluginNumFramesSkipped[name];\n    }\n  }\n\n  /**\n   * when video is unmuted it takes some time for all the plugins to be re run and an output stream to be\n   * produced. It can await on this function to confirm and tell the new unmuted state.\n   * If this is not awaited on video will freeze with a frame from past run.\n   */\n  async waitForRestart() {\n    if (!this.pluginsLoopRunning || this.pluginsLoopState === 'running') {\n      return;\n    }\n    while (this.pluginsLoopState === 'paused') {\n      await workerSleep(100);\n    }\n  }\n\n  /**\n   * remove every plugin one by one\n   */\n  async cleanup() {\n    for (const plugin of this.pluginsMap.values()) {\n      await this.removePlugin(plugin);\n    }\n    // memory cleanup\n    this.outputTrack?.stop();\n  }\n\n  private initElementsAndStream(contextType?: HMSVideoPluginCanvasContextType) {\n    if (!this.inputCanvas) {\n      this.inputCanvas = document.createElement('canvas') as CanvasElement;\n    }\n    this.outputCanvas = document.createElement('canvas') as CanvasElement;\n    if (!this.inputVideo) {\n      this.inputVideo = document.createElement('video');\n    }\n    // FF issue https://bugzilla.mozilla.org/show_bug.cgi?id=1388974\n    this.inputCanvas.getContext('2d');\n    this.outputCanvas.getContext(contextType || HMSVideoPluginCanvasContextType['2D']);\n    // capture stream automatically uses the framerate at which the output canvas is changing\n    const outputStream = this.outputCanvas.captureStream();\n    this.outputTrack = outputStream.getVideoTracks()[0];\n  }\n\n  private async startPluginsLoop(contextType?: HMSVideoPluginCanvasContextType) {\n    if (this.pluginsLoopRunning) {\n      return;\n    }\n    this.initElementsAndStream(contextType);\n    this.pluginsLoopRunning = true;\n    try {\n      await this.hmsTrack.setProcessedTrack(this.outputTrack);\n    } catch (err) {\n      this.pluginsLoopRunning = false;\n      HMSLogger.e(this.TAG, 'error in setting processed track', err);\n      throw err;\n    }\n    // can't await on pluginsLoop as it'll run for a long long time\n    this.pluginsLoop().then(() => {\n      HMSLogger.d(this.TAG, 'processLoop stopped');\n    });\n  }\n\n  private async stopPluginsLoop() {\n    this.pluginsLoopRunning = false;\n    await this.hmsTrack.setProcessedTrack(undefined);\n    this.resetCanvases();\n    this.outputTrack?.stop();\n    if (this.inputVideo) {\n      this.inputVideo.srcObject = null;\n      this.inputVideo = undefined;\n    }\n  }\n\n  private async pluginsLoop() {\n    while (this.pluginsLoopRunning) {\n      const inputFrameRate = this.hmsTrack.getMediaTrackSettings().frameRate || DEFAULT_FRAME_RATE;\n      const sleepTimeMs = Math.floor(1000 / inputFrameRate);\n      if (!this.hmsTrack.enabled || this.hmsTrack.nativeTrack.readyState === 'ended') {\n        if (this.pluginsLoopState === 'running') {\n          // mute just happened, reset canvases to black so even if it is sent to remote, it\n          // is a black screen instead of a stucked frame from previous run\n          this.resetCanvases();\n        }\n        this.pluginsLoopState = 'paused';\n        await this.reusableWorker.sleep(sleepTimeMs);\n        continue;\n      }\n      let processingTime = 0;\n      try {\n        await this.analytics.preProcessWithTime(async () => await this.doPreProcessing());\n        const start = Date.now();\n        await this.processFramesThroughPlugins();\n        processingTime = Math.floor(Date.now() - start);\n        if (processingTime > sleepTimeMs) {\n          processingTime = sleepTimeMs;\n        }\n      } catch (err) {\n        // TODO: handle failures properly, detect which plugin failed, stop it and notify back to the UI\n        HMSLogger.e(this.TAG, 'error in plugins loop', err);\n      }\n      this.pluginsLoopState = 'running';\n      // take into account processing time to decide time to wait for the next loop\n      await this.reusableWorker.sleep(sleepTimeMs - processingTime);\n    }\n  }\n\n  private async doPreProcessing() {\n    await this.addTrackToVideo(); // ensure current native track is playing in video\n    await this.updateInputCanvas(); // put the latest video frame on input canvas\n  }\n\n  /**\n   * pass the input canvas through all plugins in a loop\n   * @private\n   */\n  private async processFramesThroughPlugins() {\n    this.canvases[0] = this.inputCanvas!;\n    let i = 0;\n    for (const plugin of this.pluginsMap.values()) {\n      const name = plugin.getName();\n      if (!plugin) {\n        continue;\n      }\n      try {\n        const skipProcessing = this.checkIfSkipRequired(name);\n\n        if (plugin.getPluginType() === HMSVideoPluginType.TRANSFORM) {\n          const process = async (input: CanvasElement, output: CanvasElement) => {\n            try {\n              await plugin.processVideoFrame(input, output, skipProcessing);\n            } catch (err) {\n              HMSLogger.e(this.TAG, `error in processing plugin ${name}`, err);\n            }\n          };\n          if (!skipProcessing) {\n            const currentCanvas = this.canvases[i];\n            const nextCanvas = this.canvases[i + 1];\n            if (i === this.pluginsMap.size - 1) {\n              await this.analytics.processWithTime(name, async () => process(currentCanvas, this.outputCanvas!));\n            } else {\n              await this.analytics.processWithTime(name, async () => process(currentCanvas, nextCanvas));\n            }\n          } else {\n            if (i === this.pluginsMap.size - 1) {\n              await process(this.canvases[i], this.outputCanvas!);\n            } else {\n              await process(this.canvases[i], this.canvases[i + 1]);\n            }\n          }\n        } else if (plugin.getPluginType() === HMSVideoPluginType.ANALYZE && !skipProcessing) {\n          // there is no need to await for this case\n          await this.analytics.processWithTime(name, async () => await plugin.processVideoFrame(this.inputCanvas!));\n        }\n      } catch (err) {\n        //TODO error happened on processing of plugin notify UI\n        HMSLogger.e(this.TAG, `error in processing plugin ${name}`, err);\n        //remove plugin from loop and stop analytics for it\n        await this.removePlugin(plugin);\n      }\n      i++;\n    }\n  }\n\n  /**\n   * add the current native track to the inputVideoElement if it's not already added.\n   * @private\n   */\n  private async addTrackToVideo() {\n    if (!this.inputVideo) {\n      return;\n    }\n    const srcObject = this.inputVideo.srcObject;\n    if (srcObject !== null && srcObject instanceof MediaStream) {\n      const existingTrackID = srcObject.getVideoTracks()[0]?.id;\n      if (existingTrackID === this.hmsTrack.nativeTrack.id) {\n        // it's already attached\n        return;\n      }\n    }\n    this.inputVideo.pause();\n    this.inputVideo.srcObject = new MediaStream([this.hmsTrack.nativeTrack]);\n    this.inputVideo.muted = true;\n    this.inputVideo.playsInline = true;\n    await this.inputVideo.play();\n  }\n\n  /**\n   * get the new video frame from input video element and put it on canvas\n   * @private\n   */\n  private async updateInputCanvas() {\n    if (!this.inputCanvas || !this.inputVideo) {\n      return;\n    }\n    const { width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT } = this.hmsTrack.getMediaTrackSettings();\n    // TODO: should we reduce height/width to optimize?\n    if (this.inputCanvas.height !== height) {\n      this.inputCanvas.height = height;\n    }\n    if (this.inputCanvas.width !== width) {\n      this.inputCanvas.width = width;\n    }\n    const ctx = this.inputCanvas.getContext('2d');\n    ctx!.drawImage(this.inputVideo, 0, 0, width, height);\n  }\n\n  private resetCanvases() {\n    if (!this.outputCanvas || !this.inputCanvas) {\n      return;\n    }\n    const inputCtx = this.inputCanvas.getContext('2d');\n    if (inputCtx) {\n      inputCtx.fillStyle = `rgb(0, 0, 0)`;\n      inputCtx.fillRect(0, 0, this.outputCanvas.width, this.outputCanvas.height);\n    }\n    this.canvases = [];\n  }\n\n  /**\n    N = ceil(inputFrameRate/pluginFrameRate) - 1\n    N = this.pluginNumFramesToSkip[name] = frames to skip for every processed frame\n    all the frames we are skipping are using the previous frame output\n   **/\n  private checkIfSkipRequired(name: string) {\n    let skip = false;\n\n    if (this.pluginNumFramesSkipped[name] < this.pluginNumFramesToSkip[name]) {\n      this.pluginNumFramesSkipped[name]++;\n      skip = true;\n    } else {\n      skip = false;\n      this.pluginNumFramesSkipped[name] = 0;\n    }\n\n    return skip;\n  }\n}\n","import { HMSMediaStreamPlugin } from './HMSMediaStreamPlugin';\nimport { VideoPluginsAnalytics } from './VideoPluginsAnalytics';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSException } from '../../internal';\nimport Room from '../../sdk/models/HMSRoom';\nimport HMSLogger from '../../utils/logger';\n\nexport class HMSMediaStreamPluginsManager {\n  private readonly TAG = '[MediaStreamPluginsManager]';\n  private analytics: VideoPluginsAnalytics;\n  readonly plugins: Set<HMSMediaStreamPlugin>;\n  private room?: Room;\n\n  constructor(eventBus: EventBus, room?: Room) {\n    this.plugins = new Set<HMSMediaStreamPlugin>();\n    this.analytics = new VideoPluginsAnalytics(eventBus);\n    this.room = room;\n  }\n\n  addPlugins(plugins: HMSMediaStreamPlugin[]): void {\n    plugins.forEach(plugin => {\n      switch (plugin.getName()) {\n        case 'HMSEffectsPlugin':\n          if (!this.room?.isEffectsEnabled) {\n            const errorMessage = 'Effects Virtual Background is not enabled for this room';\n            if (this.plugins.size === 0) {\n              throw Error(errorMessage);\n            } else {\n              HMSLogger.w(this.TAG, errorMessage);\n              return;\n            }\n          }\n          break;\n        default:\n      }\n      this.plugins.add(plugin);\n    });\n  }\n\n  removePlugins(plugins: HMSMediaStreamPlugin[]) {\n    plugins.forEach(plugin => {\n      plugin.stop();\n      this.analytics.removed(plugin.getName());\n      this.plugins.delete(plugin);\n    });\n  }\n\n  applyPlugins(inputStream: MediaStream): MediaStream {\n    let processedStream = inputStream;\n    for (const plugin of this.plugins) {\n      const pluginName = plugin.getName();\n      try {\n        processedStream = plugin.apply(processedStream);\n        this.analytics.added(pluginName);\n      } catch (e) {\n        this.analytics.failure(pluginName, e as HMSException);\n        HMSLogger.e('Could not apply plugin', e, pluginName);\n      }\n    }\n    return processedStream;\n  }\n\n  getPlugins(): string[] {\n    return Array.from(this.plugins).map(plugin => plugin.getName());\n  }\n\n  async cleanup() {\n    this.removePlugins(Array.from(this.plugins));\n  }\n}\n","import HMSLogger from '../utils/logger';\n\nexport type TimedEventName = 'init' | 'websocket-open' | 'on-policy-change' | 'local-tracks' | 'preview' | 'join';\n\nexport enum TimedEvent {\n  INIT = 'init_response_time',\n  WEBSOCKET_CONNECT = 'ws_connect_time',\n  ON_POLICY_CHANGE = 'on_policy_change_time',\n  LOCAL_AUDIO_TRACK = 'local_audio_track_time',\n  LOCAL_VIDEO_TRACK = 'local_video_track_time',\n  JOIN = 'join_time',\n  PREVIEW = 'preview_time',\n  PEER_LIST = 'peer_list_time',\n  ROOM_STATE = 'room_state_time',\n  JOIN_RESPONSE = 'join_response_time',\n  GET_TOKEN = 'GET_TOKEN',\n}\n\nconst defaultEventNames = [\n  TimedEvent.INIT,\n  TimedEvent.WEBSOCKET_CONNECT,\n  TimedEvent.ON_POLICY_CHANGE,\n  TimedEvent.LOCAL_AUDIO_TRACK,\n  TimedEvent.LOCAL_VIDEO_TRACK,\n  TimedEvent.PEER_LIST,\n  TimedEvent.ROOM_STATE,\n  TimedEvent.JOIN_RESPONSE,\n];\n\nexport class AnalyticsTimer {\n  private eventPerformanceMeasures: Partial<Record<TimedEvent, PerformanceMeasure>> = {};\n\n  start(eventName: TimedEvent) {\n    performance.mark(eventName);\n  }\n\n  end(eventName: TimedEvent) {\n    try {\n      this.eventPerformanceMeasures[eventName] = performance.measure(eventName, eventName);\n      HMSLogger.d('[HMSPerformanceTiming]', eventName, this.eventPerformanceMeasures[eventName]?.duration);\n    } catch (error) {\n      HMSLogger.w('[AnalyticsTimer]', `Error in measuring performance for event ${eventName}`, { error });\n    }\n  }\n\n  getTimeTaken(eventName: TimedEvent) {\n    return this.eventPerformanceMeasures[eventName]?.duration;\n  }\n\n  getTimes(...eventNames: TimedEvent[]) {\n    return [...defaultEventNames, ...eventNames].reduce(\n      (timeObject, eventName) => ({ ...timeObject, [eventName]: this.getTimeTaken(eventName) }),\n      {},\n    );\n  }\n\n  cleanup() {\n    this.eventPerformanceMeasures = {};\n  }\n}\n","import isEqual from 'lodash.isequal';\nimport { HMSVideoTrack } from './HMSVideoTrack';\nimport { VideoElementManager } from './VideoElementManager';\nimport AnalyticsEventFactory from '../../analytics/AnalyticsEventFactory';\nimport { DeviceStorageManager } from '../../device-manager/DeviceStorage';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { HMSException } from '../../error/HMSException';\nimport { EventBus } from '../../events/EventBus';\nimport {\n  HMSFacingMode,\n  HMSSimulcastLayerDefinition,\n  HMSVideoTrackSettings as IHMSVideoTrackSettings,\n  ScreenCaptureHandle,\n} from '../../interfaces';\nimport { HMSPluginSupportResult, HMSVideoPlugin } from '../../plugins';\nimport { HMSMediaStreamPlugin, HMSVideoPluginsManager } from '../../plugins/video';\nimport { HMSMediaStreamPluginsManager } from '../../plugins/video/HMSMediaStreamPluginsManager';\nimport { LocalTrackManager } from '../../sdk/LocalTrackManager';\nimport Room from '../../sdk/models/HMSRoom';\nimport HMSLogger from '../../utils/logger';\nimport { isBrowser, isMobile } from '../../utils/support';\nimport { getVideoTrack, isEmptyTrack } from '../../utils/track';\nimport { HMSVideoTrackSettings, HMSVideoTrackSettingsBuilder } from '../settings';\nimport { HMSLocalStream } from '../streams';\n\nfunction generateHasPropertyChanged(newSettings: Partial<HMSVideoTrackSettings>, oldSettings: HMSVideoTrackSettings) {\n  return function hasChanged(\n    prop: 'codec' | 'width' | 'height' | 'maxFramerate' | 'maxBitrate' | 'deviceId' | 'advanced' | 'facingMode',\n  ) {\n    return !isEqual(newSettings[prop], oldSettings[prop]);\n  };\n}\n\nexport class HMSLocalVideoTrack extends HMSVideoTrack {\n  settings: HMSVideoTrackSettings;\n  private pluginsManager: HMSVideoPluginsManager;\n  private mediaStreamPluginsManager: HMSMediaStreamPluginsManager;\n  private processedTrack?: MediaStreamTrack;\n  private _layerDefinitions: HMSSimulcastLayerDefinition[] = [];\n  private TAG = '[HMSLocalVideoTrack]';\n  private enabledStateBeforeBackground = false;\n\n  /**\n   * true if it's screenshare and current tab is what is being shared. Browser dependent, Chromium only\n   * at the point of writing this comment.\n   */\n  isCurrentTab = false;\n\n  /**\n   * @internal\n   * This is required for handling remote mute/unmute as the published track will not necessarily be same as\n   * the first track id or current native track's id.\n   * It won't be same as first track id if the native track was changed after preview started but before join happened,\n   * with device change, or mute/unmute.\n   * It won't be same as native track id, as the native track can change post join(and publish), when the nativetrack\n   * changes, replacetrack is used which doesn't involve republishing which means from server's point of view, the track id\n   * is same as what was initially published.\n   * This will only be available if the track was actually published and won't be set for preview tracks.\n   */\n  publishedTrackId?: string;\n\n  /**\n   * will be false for preview tracks\n   */\n  isPublished = false;\n\n  constructor(\n    stream: HMSLocalStream,\n    track: MediaStreamTrack,\n    source: string,\n    private eventBus: EventBus,\n    settings: HMSVideoTrackSettings = new HMSVideoTrackSettingsBuilder().build(),\n    private room?: Room,\n  ) {\n    super(stream, track, source);\n    this.addTrackEventListeners(track);\n    stream.tracks.push(this);\n    this.setVideoHandler(new VideoElementManager(this));\n    this.settings = settings;\n    // Replace the 'default' or invalid deviceId with the actual deviceId\n    // This is to maintain consistency with selected devices as in some cases there will be no 'default' device\n    if (settings.deviceId !== track.getSettings().deviceId && track.enabled) {\n      this.settings = this.buildNewSettings({ deviceId: track.getSettings().deviceId });\n    }\n    this.pluginsManager = new HMSVideoPluginsManager(this, eventBus);\n    this.mediaStreamPluginsManager = new HMSMediaStreamPluginsManager(eventBus, room);\n    this.setFirstTrackId(this.trackId);\n    this.eventBus.localAudioUnmutedNatively.subscribe(this.handleTrackUnmute);\n    if (isBrowser && source === 'regular' && isMobile()) {\n      document.addEventListener('visibilitychange', this.handleVisibilityChange);\n    }\n  }\n\n  clone(stream: HMSLocalStream) {\n    const track = new HMSLocalVideoTrack(\n      stream,\n      this.nativeTrack.clone(),\n      this.source!,\n      this.eventBus,\n      this.settings,\n      this.room,\n    );\n    track.peerId = this.peerId;\n\n    if (this.pluginsManager.pluginsMap.size > 0) {\n      this.pluginsManager.pluginsMap.forEach(value => {\n        track\n          .addPlugin(value)\n          .catch((e: Error) => HMSLogger.e(this.TAG, 'Plugin add failed while migrating', value, e));\n      });\n    }\n    if (this.mediaStreamPluginsManager.plugins.size > 0) {\n      track.addStreamPlugins(Array.from(this.mediaStreamPluginsManager.plugins));\n    }\n    return track;\n  }\n\n  /** @internal */\n  setSimulcastDefinitons(definitions: HMSSimulcastLayerDefinition[]) {\n    this._layerDefinitions = definitions;\n  }\n\n  /**\n   * Method to get available simulcast definitions for the track\n   * @returns {HMSSimulcastLayerDefinition[]}\n   */\n  getSimulcastDefinitions(): HMSSimulcastLayerDefinition[] {\n    return this._layerDefinitions;\n  }\n\n  /**\n   * use this function to set the enabled state of a track. If true the track will be unmuted and muted otherwise.\n   * @param value\n   */\n  // eslint-disable-next-line complexity\n  async setEnabled(value: boolean): Promise<void> {\n    if (value === this.enabled) {\n      return;\n    }\n    if (this.source === 'regular') {\n      let track: MediaStreamTrack;\n      if (value) {\n        track = await this.replaceTrackWith(this.settings);\n      } else {\n        track = await this.replaceTrackWithBlank();\n      }\n      await this.replaceSender(track, value);\n      this.nativeTrack?.stop();\n      this.nativeTrack = track;\n      await super.setEnabled(value);\n      if (value) {\n        await this.pluginsManager.waitForRestart();\n        await this.processPlugins();\n        this.settings = this.buildNewSettings({ deviceId: track.getSettings().deviceId });\n      }\n      this.videoHandler.updateSinks();\n    }\n    this.eventBus.localVideoEnabled.publish({ enabled: value, track: this });\n  }\n\n  private async processPlugins() {\n    try {\n      if (this.pluginsManager.getPlugins().length > 0) {\n        return;\n      }\n      const plugins = this.mediaStreamPluginsManager.getPlugins();\n      if (plugins.length > 0) {\n        const processedStream = this.mediaStreamPluginsManager.applyPlugins(new MediaStream([this.nativeTrack]));\n        const newTrack = processedStream.getVideoTracks()[0];\n        await this.setProcessedTrack(newTrack);\n      } else {\n        await this.setProcessedTrack();\n      }\n      this.videoHandler.updateSinks();\n    } catch (e) {\n      console.error('error in processing plugin(s)', e);\n    }\n  }\n\n  async addStreamPlugins(plugins: HMSMediaStreamPlugin[]) {\n    if (this.pluginsManager.getPlugins().length > 0) {\n      throw Error('Plugins of type HMSMediaStreamPlugin and HMSVideoPlugin cannot be used together');\n    }\n    this.mediaStreamPluginsManager.addPlugins(plugins);\n    await this.processPlugins();\n  }\n\n  async removeStreamPlugins(plugins: HMSMediaStreamPlugin[]) {\n    this.mediaStreamPluginsManager.removePlugins(plugins);\n    await this.processPlugins();\n  }\n\n  /**\n   * verify if the track id being passed is of this track for correlating server messages like degradation\n   */\n  isPublishedTrackId(trackId: string) {\n    return this.publishedTrackId === trackId;\n  }\n\n  /**\n   * @see HMSVideoTrack#addSink()\n   */\n  addSink(videoElement: HTMLVideoElement) {\n    this.addSinkInternal(videoElement, this.processedTrack || this.nativeTrack);\n  }\n\n  /**\n   * This function can be used to set media track settings. Frequent options -\n   * deviceID: can be used to change to different input source\n   * width, height - can be used to change capture dimensions\n   * maxFramerate - can be used to control the capture framerate\n   * @param settings\n   */\n  async setSettings(settings: Partial<IHMSVideoTrackSettings>, internal = false) {\n    const newSettings = this.buildNewSettings(settings);\n    await this.handleDeviceChange(newSettings, internal);\n    if (!this.enabled || isEmptyTrack(this.nativeTrack)) {\n      // if track is muted, we just cache the settings for when it is unmuted\n      this.settings = newSettings;\n      return;\n    } else {\n      await this.pluginsManager.waitForRestart();\n    }\n    await this.handleSettingsChange(newSettings);\n    this.settings = newSettings;\n  }\n\n  /**\n   * @see HMSVideoPlugin\n   */\n  getPlugins(): string[] {\n    return this.mediaStreamPluginsManager.getPlugins().length > 0\n      ? this.mediaStreamPluginsManager.getPlugins()\n      : this.pluginsManager.getPlugins();\n  }\n\n  /**\n   * @see HMSVideoPlugin\n   */\n  async addPlugin(plugin: HMSVideoPlugin, pluginFrameRate?: number): Promise<void> {\n    if (this.mediaStreamPluginsManager.getPlugins().length > 0) {\n      throw Error('Plugins of type HMSVideoPlugin and HMSMediaStreamPlugin cannot be used together');\n    }\n    return this.pluginsManager.addPlugin(plugin, pluginFrameRate);\n  }\n\n  /**\n   * @see HMSVideoPlugin\n   */\n  async removePlugin(plugin: HMSVideoPlugin): Promise<void> {\n    return this.pluginsManager.removePlugin(plugin);\n  }\n\n  /**\n   * @see HMSVideoPlugin\n   */\n  validatePlugin(plugin: HMSVideoPlugin): HMSPluginSupportResult {\n    return this.pluginsManager.validatePlugin(plugin);\n  }\n\n  /**\n   * @internal\n   */\n  async cleanup() {\n    this.eventBus.localAudioUnmutedNatively.unsubscribe(this.handleTrackUnmute);\n    this.removeTrackEventListeners(this.nativeTrack);\n    // Stopping the plugin before cleaning the track is more predictable when dealing with 3rd party plugins\n    await this.mediaStreamPluginsManager.cleanup();\n    await this.pluginsManager.cleanup();\n    super.cleanup();\n    this.transceiver = undefined;\n    this.processedTrack?.stop();\n    this.isPublished = false;\n    if (isBrowser && isMobile()) {\n      document.removeEventListener('visibilitychange', this.handleVisibilityChange);\n    }\n  }\n\n  /**\n   * only for screenshare track to crop to a cropTarget\n   * @internal\n   */\n  async cropTo(cropTarget?: object) {\n    if (!cropTarget) {\n      return;\n    }\n    if (this.source !== 'screen') {\n      return;\n    }\n    try {\n      // @ts-ignore\n      if (this.nativeTrack.cropTo) {\n        // @ts-ignore\n        await this.nativeTrack.cropTo(cropTarget);\n      }\n    } catch (err) {\n      HMSLogger.e(this.TAG, 'failed to crop screenshare capture - ', err);\n      throw ErrorFactory.TracksErrors.GenericTrack(HMSAction.TRACK, 'failed to crop screenshare capture');\n    }\n  }\n\n  /**\n   * only for screenshare track to get the captureHandle\n   * TODO: add an API for capturehandlechange event\n   * @internal\n   */\n  getCaptureHandle(): ScreenCaptureHandle | undefined {\n    // @ts-ignore\n    if (this.nativeTrack.getCaptureHandle) {\n      // @ts-ignore\n      return this.nativeTrack.getCaptureHandle();\n    }\n    return undefined;\n  }\n\n  /**\n   * once the plugin manager has done its processing it can set or remove processed track via this method\n   * note that replacing sender track only makes sense if the native track is enabled. if it's disabled there is\n   * no point in replacing it. We'll update the processed track variable though so next time unmute happens\n   * it's set properly.\n   * @internal\n   */\n  async setProcessedTrack(processedTrack?: MediaStreamTrack) {\n    // required replacement will happen when video is unmuted\n    if (!this.nativeTrack.enabled) {\n      this.processedTrack = processedTrack;\n      return;\n    }\n    await this.removeOrReplaceProcessedTrack(processedTrack);\n    this.videoHandler.updateSinks();\n  }\n\n  /**\n   * @internal\n   * sent track id will be different in case there was some processing done using plugins.\n   * replace track is used to, start sending data from a new track without un publishing the prior one. There\n   * are thus two track ids - the one which was initially published and should be unpublished when required.\n   * The one whose data is currently being sent, which will be used when removing from connection senders.\n   */\n  getTrackIDBeingSent() {\n    return this.getTrackBeingSent().id;\n  }\n\n  getTrackBeingSent() {\n    return this.enabled ? this.processedTrack || this.nativeTrack : this.nativeTrack;\n  }\n\n  /**\n   * will change the facingMode to environment if current facing mode is user or vice versa.\n   * will be useful when on mobile web to toggle between front and back camera's\n   */\n  async switchCamera() {\n    const currentFacingMode = this.getMediaTrackSettings().facingMode;\n    if (!currentFacingMode || this.source !== 'regular') {\n      HMSLogger.d(this.TAG, 'facingMode not supported');\n      return;\n    }\n    const facingMode = currentFacingMode === HMSFacingMode.ENVIRONMENT ? HMSFacingMode.USER : HMSFacingMode.ENVIRONMENT;\n    this.nativeTrack?.stop();\n    const track = await this.replaceTrackWith(this.buildNewSettings({ facingMode: facingMode, deviceId: undefined }));\n    await this.replaceSender(track, this.enabled);\n    this.nativeTrack = track;\n    await this.processPlugins();\n    this.videoHandler.updateSinks();\n    this.settings = this.buildNewSettings({ deviceId: this.nativeTrack.getSettings().deviceId, facingMode });\n    DeviceStorageManager.updateSelection('videoInput', {\n      deviceId: this.settings.deviceId,\n      groupId: this.nativeTrack.getSettings().groupId,\n    });\n  }\n\n  /**\n   * called when the video is unmuted\n   * @private\n   */\n  private async replaceTrackWith(settings: HMSVideoTrackSettings) {\n    const prevTrack = this.nativeTrack;\n    /**\n     * not stopping previous track results in device in use more frequently, as many devices will not allow even if\n     * you are requesting for a new device.\n     * Note: Do not change the order of this.\n     */\n    this.removeTrackEventListeners(prevTrack);\n    prevTrack?.stop();\n    try {\n      const newTrack = await getVideoTrack(settings);\n      this.addTrackEventListeners(newTrack);\n      HMSLogger.d(this.TAG, 'replaceTrack, Previous track stopped', prevTrack, 'newTrack', newTrack);\n      // Replace deviceId with actual deviceId when it is default\n      if (this.settings.deviceId === 'default') {\n        this.settings = this.buildNewSettings({ deviceId: this.nativeTrack.getSettings().deviceId });\n      }\n      return newTrack;\n    } catch (error) {\n      // Generate a new track from previous settings so there won't be blank tile because previous track is stopped\n      const track = await getVideoTrack(this.settings);\n      this.addTrackEventListeners(track);\n      await this.replaceSender(track, this.enabled);\n      this.nativeTrack = track;\n      await this.processPlugins();\n      this.videoHandler.updateSinks();\n      if (this.isPublished) {\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.publish({\n            error: error as Error,\n          }),\n        );\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * called when the video is muted. A blank track is used to replace the original track. This is in order to\n   * turn off the camera light and keep the bytes flowing to avoid av sync, timestamp issues.\n   * @private\n   */\n  private async replaceTrackWithBlank() {\n    const prevTrack = this.nativeTrack;\n    const newTrack = LocalTrackManager.getEmptyVideoTrack(prevTrack);\n    this.removeTrackEventListeners(prevTrack);\n    this.addTrackEventListeners(newTrack);\n    prevTrack?.stop();\n    HMSLogger.d(this.TAG, 'replaceTrackWithBlank, Previous track stopped', prevTrack, 'newTrack', newTrack);\n    return newTrack;\n  }\n\n  private async replaceSender(newTrack: MediaStreamTrack, enabled: boolean) {\n    if (enabled) {\n      await this.replaceSenderTrack(this.processedTrack || newTrack);\n    } else {\n      await this.replaceSenderTrack(newTrack);\n    }\n    const localStream = this.stream as HMSLocalStream;\n    localStream.replaceStreamTrack(this.nativeTrack, newTrack);\n  }\n\n  private replaceSenderTrack = async (track: MediaStreamTrack) => {\n    if (!this.transceiver || this.transceiver.direction !== 'sendonly') {\n      HMSLogger.d(this.TAG, `transceiver for ${this.trackId} not available or not connected yet`);\n      return;\n    }\n    await this.transceiver.sender.replaceTrack(track);\n  };\n\n  private buildNewSettings = (settings: Partial<HMSVideoTrackSettings>) => {\n    const { width, height, codec, maxFramerate, maxBitrate, deviceId, advanced, facingMode } = {\n      ...this.settings,\n      ...settings,\n    };\n    const newSettings = new HMSVideoTrackSettings(\n      width,\n      height,\n      codec,\n      maxFramerate,\n      deviceId,\n      advanced,\n      maxBitrate,\n      facingMode,\n    );\n    return newSettings;\n  };\n\n  // eslint-disable-next-line complexity\n  private handleSettingsChange = async (settings: HMSVideoTrackSettings) => {\n    const stream = this.stream as HMSLocalStream;\n    const hasPropertyChanged = generateHasPropertyChanged(settings, this.settings);\n    if (hasPropertyChanged('maxBitrate') && settings.maxBitrate) {\n      await stream.setMaxBitrateAndFramerate(this);\n    }\n    if (hasPropertyChanged('width') || hasPropertyChanged('height') || hasPropertyChanged('advanced')) {\n      if (this.source === 'video') {\n        const track = await this.replaceTrackWith(settings);\n        await this.replaceSender(track, this.enabled);\n        this.nativeTrack = track;\n        await this.processPlugins();\n        this.videoHandler.updateSinks();\n      } else {\n        await this.nativeTrack.applyConstraints(settings.toConstraints());\n      }\n    }\n  };\n\n  /**\n   * Replace video track with new track on device change\n   * @param settings - VideoSettings Object constructed with new settings\n   * @param internal - whether the change was because of internal sdk call or external client call\n   */\n  private handleDeviceChange = async (settings: HMSVideoTrackSettings, internal = false) => {\n    const hasPropertyChanged = generateHasPropertyChanged(settings, this.settings);\n\n    if (hasPropertyChanged('deviceId') && this.source === 'regular') {\n      if (this.enabled) {\n        delete settings.facingMode;\n        const track = await this.replaceTrackWith(settings);\n        await this.replaceSender(track, this.enabled);\n        this.nativeTrack = track;\n        await this.processPlugins();\n        this.videoHandler.updateSinks();\n      }\n      const groupId = this.nativeTrack.getSettings().groupId;\n      if (!internal && settings.deviceId) {\n        DeviceStorageManager.updateSelection('videoInput', {\n          deviceId: settings.deviceId,\n          groupId,\n        });\n        this.eventBus.deviceChange.publish({\n          isUserSelection: true,\n          type: 'video',\n          selection: {\n            deviceId: settings.deviceId,\n            groupId: groupId,\n          },\n        });\n      }\n    }\n  };\n\n  private addTrackEventListeners(track: MediaStreamTrack) {\n    track.addEventListener('mute', this.handleTrackMute);\n    track.addEventListener('unmute', this.handleTrackUnmuteNatively);\n  }\n\n  private removeTrackEventListeners(track: MediaStreamTrack) {\n    track.removeEventListener('mute', this.handleTrackMute);\n    track.removeEventListener('unmute', this.handleTrackUnmuteNatively);\n  }\n\n  private handleTrackMute = () => {\n    HMSLogger.d(this.TAG, 'muted natively', document.visibilityState);\n    const reason = document.visibilityState === 'hidden' ? 'visibility-change' : 'incoming-call';\n    this.eventBus.analytics.publish(\n      this.sendInterruptionEvent({\n        started: true,\n        reason: reason,\n      }),\n    );\n    this.eventBus.localVideoEnabled.publish({ enabled: false, track: this });\n  };\n\n  /** @internal */\n  handleTrackUnmuteNatively = async () => {\n    HMSLogger.d(this.TAG, 'unmuted natively');\n    const reason = document.visibilityState === 'hidden' ? 'visibility-change' : 'incoming-call';\n\n    this.eventBus.analytics.publish(\n      this.sendInterruptionEvent({\n        started: false,\n        reason: reason,\n      }),\n    );\n    this.handleTrackUnmute();\n    this.eventBus.localVideoEnabled.publish({ enabled: this.enabled, track: this });\n    this.eventBus.localVideoUnmutedNatively.publish();\n    await this.setEnabled(this.enabled);\n  };\n\n  /**\n   * This will either remove or update the processedTrack value on the class instance.\n   * It will also replace sender if the processedTrack is updated\n   * @param {MediaStreamTrack|undefined}processedTrack\n   */\n  private removeOrReplaceProcessedTrack = async (processedTrack?: MediaStreamTrack) => {\n    // if all plugins are removed reset everything back to native track\n    if (!processedTrack) {\n      this.processedTrack = undefined;\n    } else if (processedTrack !== this.processedTrack) {\n      this.processedTrack = processedTrack;\n    }\n    await this.replaceSenderTrack(this.processedTrack || this.nativeTrack);\n  };\n\n  // eslint-disable-next-line complexity\n  private handleVisibilityChange = async () => {\n    if (document.visibilityState === 'hidden') {\n      this.enabledStateBeforeBackground = this.enabled;\n      if (this.enabled) {\n        await this.setEnabled(false);\n      }\n      // started interruption event\n      this.eventBus.analytics.publish(\n        this.sendInterruptionEvent({\n          started: true,\n          reason: 'visibility-change',\n        }),\n      );\n    } else {\n      HMSLogger.d(this.TAG, 'visibility visible, restoring track state', this.enabledStateBeforeBackground);\n      if (this.enabledStateBeforeBackground) {\n        try {\n          await this.setEnabled(true);\n        } catch (error) {\n          this.eventBus.error.publish(error as HMSException);\n        }\n      }\n      // ended interruption event\n      this.eventBus.analytics.publish(\n        this.sendInterruptionEvent({\n          started: false,\n          reason: 'visibility-change',\n        }),\n      );\n    }\n  };\n}\n","export const RENEGOTIATION_CALLBACK_ID = 'renegotiation-callback-id';\nexport const API_DATA_CHANNEL = 'ion-sfu';\nexport const ANALYTICS_BUFFER_SIZE = 100;\n\n/**\n * Maximum time that transport-layer will try\n * before giving up on the connection and returning a failure\n *\n * Refer https://100ms.atlassian.net/browse/HMS-2369\n */\nexport const MAX_TRANSPORT_RETRY_TIME = 60_000;\n\nexport const DEFAULT_SIGNAL_PING_TIMEOUT = 12_000;\nexport const DEFAULT_SIGNAL_PING_INTERVAL = 3_000;\nexport const PONG_RESPONSE_TIMES_SIZE = 5;\n\nexport const SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID = 'SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID';\nexport const SUBSCRIBE_TIMEOUT = 60_000;\n\nexport const ICE_DISCONNECTION_TIMEOUT = 5_000;\n\nexport const RTC_STATS_MONITOR_INTERVAL = 1_000;\n\nexport const MAINTAIN_TRACK_HISTORY = false;\n\nexport const CLIENT_ANAYLTICS_PROD_ENDPOINT = 'https://event.100ms.live/v2/client/report';\nexport const CLIENT_ANAYLTICS_QA_ENDPOINT = 'https://event-nonprod.100ms.live/v2/client/report';\nexport const CLIENT_ANAYLTICS_STORAGE_LIMIT = 100;\n\nexport const PUBLISH_STATS_SAMPLE_WINDOW = 30;\nexport const PUBLISH_STATS_PUSH_INTERVAL = 300;\n\nexport const SUBSCRIBE_STATS_SAMPLE_WINDOW = 10;\nexport const SUBSCRIBE_STATS_PUSH_INTERVAL = 60;\n\nexport const MAX_SAFE_INTEGER = Math.pow(2, 31) - 1;\n\nexport const HMSEvents = {\n  DEVICE_CHANGE: 'device-change',\n  LOCAL_AUDIO_ENABLED: 'local-audio-enabled',\n  LOCAL_VIDEO_ENABLED: 'local-video-enabled',\n  LOCAL_VIDEO_UNMUTED_NATIVELY: 'local-video-unmuted-natively',\n  LOCAL_AUDIO_UNMUTED_NATIVELY: 'local-audio-unmuted-natively',\n  STATS_UPDATE: 'stats-update', // emitted by HMSWebrtcInternals\n  RTC_STATS_UPDATE: 'rtc-stats-update', // emitted by RTCStatsMonitor\n  TRACK_DEGRADED: 'track-degraded',\n  TRACK_RESTORED: 'track-restored',\n  TRACK_AUDIO_LEVEL_UPDATE: 'track-audio-level-update',\n  LOCAL_AUDIO_SILENCE: 'local-audio-silence',\n  ANALYTICS: 'analytics',\n  AUDIO_PLUGIN_FAILED: 'audio-plugin-failed',\n  POLICY_CHANGE: 'policy-change',\n  LOCAL_ROLE_UPDATE: 'local-role-update',\n  AUDIO_TRACK_UPDATE: 'audio-track-update',\n  AUDIO_TRACK_ADDED: 'audio-track-added',\n  AUDIO_TRACK_REMOVED: 'audio-track-removed',\n  AUTOPLAY_ERROR: 'autoplay-error',\n  LEAVE: 'leave',\n  ERROR: 'error',\n};\n\nexport const PROTOCOL_VERSION = '2.5';\n\nexport const PROTOCOL_SPEC = '20240720';\n\nexport const HAND_RAISE_GROUP_NAME = '_handraise';\n\nexport const DEFAULT_PLAYLIST_VIDEO_BITRATE = 1000;\n\nexport const DEFAULT_PLAYLIST_AUDIO_BITRATE = 64;\n\nexport const WHITEBOARD_ORIGIN = 'https://whiteboard.100ms.live';\n\nexport const WHITEBOARD_QA_ORIGIN = 'https://whiteboard-qa.100ms.live';\n\nexport enum LEAVE_REASON {\n  USER_REQUEST = 'user request',\n  SDK_REQUEST = 'sdk request',\n}\n","import { HMSVideoTrack } from './HMSVideoTrack';\nimport { VideoElementManager } from './VideoElementManager';\nimport { VideoTrackLayerUpdate } from '../../connection/channel-messages';\nimport {\n  HMSPreferredSimulcastLayer,\n  HMSSimulcastLayer,\n  HMSSimulcastLayerDefinition,\n} from '../../interfaces/simulcast-layers';\nimport { MAINTAIN_TRACK_HISTORY } from '../../utils/constants';\nimport HMSLogger from '../../utils/logger';\nimport { isEmptyTrack } from '../../utils/track';\nimport { HMSRemoteStream } from '../streams';\n\nexport class HMSRemoteVideoTrack extends HMSVideoTrack {\n  private _degraded = false;\n  private _degradedAt: Date | null = null;\n  private _layerDefinitions: HMSSimulcastLayerDefinition[] = [];\n  private history = new TrackHistory();\n  private preferredLayer: HMSPreferredSimulcastLayer = HMSSimulcastLayer.HIGH;\n  private bizTrackId!: string;\n  private disableNoneLayerRequest = false;\n\n  constructor(stream: HMSRemoteStream, track: MediaStreamTrack, source?: string, disableNoneLayerRequest?: boolean) {\n    super(stream, track, source);\n    this.disableNoneLayerRequest = !!disableNoneLayerRequest;\n    this.setVideoHandler(new VideoElementManager(this));\n  }\n\n  setTrackId(trackId: string) {\n    this.bizTrackId = trackId;\n  }\n\n  get trackId(): string {\n    return this.bizTrackId || super.trackId;\n  }\n\n  public get degraded() {\n    return this._degraded;\n  }\n\n  public get degradedAt() {\n    return this._degradedAt;\n  }\n\n  async setEnabled(value: boolean): Promise<void> {\n    if (value === this.enabled) {\n      return;\n    }\n\n    super.setEnabled(value);\n    this.videoHandler.updateSinks(true);\n  }\n\n  async setPreferredLayer(layer: HMSPreferredSimulcastLayer) {\n    //@ts-ignore\n    if (layer === HMSSimulcastLayer.NONE) {\n      HMSLogger.w(`layer ${HMSSimulcastLayer.NONE} will be ignored`);\n      return;\n    }\n    this.preferredLayer = layer;\n    if (!this.shouldSendVideoLayer(layer, 'preferLayer')) {\n      return;\n    }\n    if (!this.hasSinks()) {\n      HMSLogger.d(\n        `[Remote Track] ${this.logIdentifier}\n        streamId=${this.stream.id} \n        trackId=${this.trackId}\n        saving ${layer}, source=${this.source}\n        Track does not have any sink`,\n      );\n      return;\n    }\n    await this.requestLayer(layer, 'preferLayer');\n    this.pushInHistory(`uiPreferLayer-${layer}`);\n  }\n\n  /**\n   * @deprecated\n   * @returns {HMSSimulcastLayer}\n   */\n  getSimulcastLayer() {\n    return (this.stream as HMSRemoteStream).getSimulcastLayer();\n  }\n\n  getLayer() {\n    return (this.stream as HMSRemoteStream).getVideoLayer();\n  }\n\n  getPreferredLayer() {\n    return this.preferredLayer;\n  }\n\n  getPreferredLayerDefinition() {\n    return this._layerDefinitions.find(layer => layer.layer === this.preferredLayer);\n  }\n\n  replaceTrack(track: HMSRemoteVideoTrack) {\n    this.nativeTrack = track.nativeTrack;\n    if (track.transceiver) {\n      this.transceiver = track.transceiver;\n      // replace dummy streamId with actual streamId retaining all other properties\n      this.stream.updateId(track.stream.id);\n    }\n    this.videoHandler.updateSinks();\n  }\n\n  async addSink(videoElement: HTMLVideoElement, shouldSendVideoLayer = true) {\n    // if the native track is empty track, just request the preferred layer else attach it\n    if (isEmptyTrack(this.nativeTrack)) {\n      await this.requestLayer(this.preferredLayer, 'addSink');\n    } else {\n      super.addSink(videoElement);\n      if (shouldSendVideoLayer) {\n        await this.updateLayer('addSink');\n      }\n    }\n    this.pushInHistory(`uiSetLayer-high`);\n  }\n\n  async removeSink(videoElement: HTMLVideoElement, shouldSendVideoLayer = true) {\n    super.removeSink(videoElement);\n    if (shouldSendVideoLayer) {\n      await this.updateLayer('removeSink');\n    }\n    this._degraded = false;\n    this.pushInHistory('uiSetLayer-none');\n  }\n\n  /**\n   * Method to get available simulcast definitions for the track\n   * @returns {HMSSimulcastLayerDefinition[]}\n   */\n  getSimulcastDefinitions() {\n    // send a clone to store as it will freeze the object from further updates\n    return [...this._layerDefinitions];\n  }\n\n  /** @internal */\n  setSimulcastDefinitons(definitions: HMSSimulcastLayerDefinition[]) {\n    this._layerDefinitions = definitions;\n  }\n\n  /**\n   * @internal\n   * SFU will change track's layer(degrade or restore) and tell the sdk to update\n   * it locally.\n   * @returns {boolean} isDegraded - returns true if degraded\n   * */\n  setLayerFromServer(layerUpdate: VideoTrackLayerUpdate) {\n    this._degraded = this.getDegradationValue(layerUpdate);\n    this._degradedAt = this._degraded ? new Date() : this._degradedAt;\n    const currentLayer = layerUpdate.current_layer;\n    HMSLogger.d(\n      `[Remote Track] ${this.logIdentifier} \n      streamId=${this.stream.id} \n      trackId=${this.trackId}\n      layer update from sfu\n      currLayer=${layerUpdate.current_layer}\n      preferredLayer=${layerUpdate.expected_layer}\n      sub_degraded=${layerUpdate.subscriber_degraded}\n      pub_degraded=${layerUpdate.publisher_degraded}\n      isDegraded=${this._degraded}`,\n    );\n    // No need to send preferLayer update, as server has done it already\n    (this.stream as HMSRemoteStream).setVideoLayerLocally(currentLayer, this.logIdentifier, 'setLayerFromServer');\n    this.pushInHistory(`sfuLayerUpdate-${currentLayer}`);\n    return this._degraded;\n  }\n\n  private getDegradationValue(layerUpdate: VideoTrackLayerUpdate) {\n    return (\n      this.enabled &&\n      (layerUpdate.publisher_degraded || layerUpdate.subscriber_degraded) &&\n      layerUpdate.current_layer === HMSSimulcastLayer.NONE\n    );\n  }\n\n  private async updateLayer(source: string) {\n    let newLayer: HMSSimulcastLayer = this.preferredLayer;\n    if (this.enabled && this.hasSinks()) {\n      newLayer = this.preferredLayer;\n      // send none only when the flag is not set\n    } else if (!this.disableNoneLayerRequest) {\n      newLayer = HMSSimulcastLayer.NONE;\n    }\n    if (!this.shouldSendVideoLayer(newLayer, source)) {\n      return;\n    }\n    await this.requestLayer(newLayer, source);\n  }\n\n  private pushInHistory(action: string) {\n    if (MAINTAIN_TRACK_HISTORY) {\n      this.history.push({ name: action, layer: this.getLayer(), degraded: this.degraded });\n    }\n  }\n\n  private async requestLayer(layer: HMSSimulcastLayer, source: string) {\n    try {\n      const response = await (this.stream as HMSRemoteStream).setVideoLayer(\n        layer,\n        this.trackId,\n        this.logIdentifier,\n        source,\n      );\n      HMSLogger.d(\n        `[Remote Track] ${this.logIdentifier} \n      streamId=${this.stream.id}\n      trackId=${this.trackId}\n      Requested layer ${layer}, source=${source}`,\n      );\n      return response;\n    } catch (error) {\n      HMSLogger.d(\n        `[Remote Track] ${this.logIdentifier} \n      streamId=${this.stream.id}\n      trackId=${this.trackId}\n      Failed to set layer ${layer}, source=${source}\n      error=${(error as Error).message}`,\n      );\n      throw error;\n    }\n  }\n\n  /**\n   * given the new layer, figure out if the update should be sent to server or not.\n   * It won't be sent if the track is already on the targetLayer. If the track is\n   * degraded though and the target layer is none, update will be sent.\n   * If there are tracks degraded on a page and user paginates away to other page,\n   * it's necessary to send the layer none message to SFU so it knows that the app\n   * is no longer interested in the track and doesn't recover degraded tracks on non\n   * visible pages.\n   *\n   * TODO: if track is degraded, send the update if target layer is lower than current layer\n   * @private\n   */\n  private shouldSendVideoLayer(targetLayer: HMSSimulcastLayer, source: string) {\n    const currLayer = this.getLayer();\n    if (this.degraded && targetLayer === HMSSimulcastLayer.NONE) {\n      return true;\n    }\n    if (currLayer === targetLayer) {\n      HMSLogger.d(\n        `[Remote Track] ${this.logIdentifier}`,\n        `Not sending update, already on layer ${targetLayer}, source=${source}`,\n      );\n      return false;\n    }\n    return true;\n  }\n}\n\n/**\n * to store history of everything that happened to a remote track which decides\n * it's current layer and degraded status.\n */\nclass TrackHistory {\n  history: Record<string, any>[] = [];\n\n  push(action: Record<string, any>) {\n    action.time = new Date().toISOString().split('T')[1];\n    this.history.push(action);\n  }\n}\n","import { HMSMediaStream } from './HMSMediaStream';\nimport HMSPublishConnection from '../../connection/publish/publishConnection';\nimport { SimulcastLayer } from '../../interfaces';\nimport HMSLogger from '../../utils/logger';\nimport { isNode } from '../../utils/support';\nimport { HMSAudioTrackSettings, HMSVideoTrackSettings } from '../settings';\nimport { HMSLocalTrack, HMSLocalVideoTrack } from '../tracks';\n\nexport class HMSLocalStream extends HMSMediaStream {\n  /** Connection set when publish is called for the first track */\n  private readonly TAG = '[HMSLocalStream]';\n  private connection: HMSPublishConnection | null = null;\n\n  setConnection(connection: HMSPublishConnection) {\n    this.connection = connection;\n  }\n\n  addTransceiver(track: HMSLocalTrack, simulcastLayers: SimulcastLayer[]) {\n    const transceiver = this.connection!.addTransceiver(track.getTrackBeingSent(), {\n      streams: [this.nativeStream],\n      direction: 'sendonly',\n      sendEncodings: this.getTrackEncodings(track, simulcastLayers),\n    });\n    this.setPreferredCodec(transceiver, track.nativeTrack.kind);\n    track.transceiver = transceiver;\n    return transceiver;\n  }\n\n  async setMaxBitrateAndFramerate(\n    track: HMSLocalTrack,\n    updatedSettings?: HMSAudioTrackSettings | HMSVideoTrackSettings,\n  ): Promise<void> {\n    await this.connection?.setMaxBitrateAndFramerate(track, updatedSettings);\n  }\n\n  // @ts-ignore\n  setPreferredCodec(_transceiver: RTCRtpTransceiver, _kind: string) {\n    // TODO: Some browsers don't support setCodecPreferences, resort to SDPMunging?\n  }\n\n  replaceStreamTrack(track: MediaStreamTrack, withTrack: MediaStreamTrack) {\n    this.nativeStream.addTrack(withTrack);\n    this.nativeStream.removeTrack(track);\n  }\n\n  removeSender(track: HMSLocalTrack) {\n    if (!this.connection || this.connection.connectionState === 'closed') {\n      HMSLogger.d(this.TAG, `publish connection is not initialised or closed`);\n      return;\n    }\n    const sender = track.transceiver?.sender;\n    if (!sender) {\n      HMSLogger.w(this.TAG, `No sender found for trackId=${track.trackId}`);\n      return;\n    }\n    this.connection?.removeTrack(sender);\n    const toRemoveLocalTrackIdx = this.tracks.indexOf(track);\n    if (toRemoveLocalTrackIdx !== -1) {\n      this.tracks.splice(toRemoveLocalTrackIdx, 1);\n    } else {\n      HMSLogger.w(this.TAG, `Cannot find ${track.trackId} in locally stored tracks`);\n    }\n  }\n\n  private getTrackEncodings(track: HMSLocalTrack, simulcastLayers: SimulcastLayer[]) {\n    const trackEncodings: RTCRtpEncodingParameters[] = [];\n    if (track instanceof HMSLocalVideoTrack) {\n      if (simulcastLayers.length > 0) {\n        HMSLogger.d(this.TAG, 'Simulcast enabled with layers', simulcastLayers);\n        trackEncodings.push(...simulcastLayers);\n      } else {\n        const encodings: RTCRtpEncodingParameters = { active: this.nativeStream.active };\n        if (track.settings.maxBitrate && !isNode) {\n          encodings.maxBitrate = track.settings.maxBitrate;\n        }\n        trackEncodings.push(encodings);\n      }\n    }\n    return trackEncodings;\n  }\n}\n","import { HMSMediaStream } from './HMSMediaStream';\nimport HMSSubscribeConnection from '../../connection/subscribe/subscribeConnection';\nimport { HMSSimulcastLayer } from '../../interfaces';\nimport HMSLogger from '../../utils/logger';\n\n/** @internal */\nexport class HMSRemoteStream extends HMSMediaStream {\n  private readonly connection: HMSSubscribeConnection;\n  private audio = true;\n  private video = HMSSimulcastLayer.NONE;\n\n  constructor(nativeStream: MediaStream, connection: HMSSubscribeConnection) {\n    super(nativeStream);\n    this.connection = connection;\n  }\n\n  async setAudio(enabled: boolean, trackId: string, identifier?: string) {\n    if (this.audio === enabled) {\n      return;\n    }\n\n    this.audio = enabled;\n    HMSLogger.d(\n      `[Remote stream] ${identifier || ''} \n    streamId=${this.id}\n    trackId=${trackId}\n    subscribing audio - ${this.audio}`,\n    );\n    await this.connection.sendOverApiDataChannelWithResponse({\n      params: {\n        subscribed: this.audio,\n        track_id: trackId,\n      },\n      method: 'prefer-audio-track-state',\n    });\n  }\n\n  /**\n   * Sets the video layer after receiving new state from SFU. This is used when server side subscribe\n   * degradation is ON.\n   * @param layer is simulcast layer to be set\n   * @param identifier is stream identifier to be printed in logs\n   */\n  setVideoLayerLocally(layer: HMSSimulcastLayer, identifier: string, source: string) {\n    this.video = layer;\n    HMSLogger.d(`[Remote stream] ${identifier}\n    streamId=${this.id}\n    source: ${source}\n    Setting layer field to=${layer}`);\n  }\n\n  /**\n   * Sets the video layer and updates the track state to SFU via api datachannel. This is used when client\n   * side subscribe degradation is ON or client unsubscribes the current track.\n   * @param layer is simulcast layer to be set\n   * @param identifier is stream identifier to be printed in logs\n   */\n  setVideoLayer(layer: HMSSimulcastLayer, trackId: string, identifier: string, source: string) {\n    HMSLogger.d(\n      `[Remote stream] ${identifier} \n      streamId=${this.id}\n      trackId=${trackId} \n      source: ${source} request ${layer} layer`,\n    );\n    this.setVideoLayerLocally(layer, identifier, source);\n    return this.connection.sendOverApiDataChannelWithResponse({\n      params: {\n        max_spatial_layer: this.video,\n        track_id: trackId,\n      },\n      method: 'prefer-video-track-state',\n    });\n  }\n\n  /**\n   * @deprecated\n   * @returns {HMSSimulcastLayer}\n   */\n  getSimulcastLayer() {\n    return this.video;\n  }\n\n  getVideoLayer() {\n    return this.video;\n  }\n\n  isAudioSubscribed() {\n    return this.audio;\n  }\n}\n","import AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { EventBus } from '../events/EventBus';\nimport { RID } from '../interfaces';\nimport {\n  HMSLocalTrackStats,\n  HMSPeerStats,\n  HMSTrackStats,\n  MissingInboundStats,\n  PeerConnectionType,\n  RTCRemoteInboundRtpStreamStats,\n} from '../interfaces/webrtc-stats';\nimport { HMSLocalTrack, HMSRemoteTrack } from '../media/tracks';\nimport HMSLogger from '../utils/logger';\nimport { isPresent } from '../utils/validations';\n\nexport const getLocalTrackStats = async (\n  eventBus: EventBus,\n  track: HMSLocalTrack,\n  peerName?: string,\n  prevTrackStats?: Record<string, HMSTrackStats>,\n): Promise<Record<string, HMSTrackStats> | undefined> => {\n  let trackReport: RTCStatsReport | undefined;\n  const trackStats: Record<string, HMSTrackStats> = {};\n  if (!track.transceiver?.sender.track) {\n    return;\n  }\n  try {\n    trackReport = await track.transceiver.sender.getStats();\n    const mimeTypes: { [key: string]: string } = {}; // codecId -> mimeType\n    const outbound: Record<string, RTCOutboundRtpStreamStats> = {};\n    const inbound: Record<string, RTCInboundRtpStreamStats & MissingInboundStats> = {};\n    trackReport?.forEach(stat => {\n      switch (stat.type) {\n        case 'outbound-rtp':\n          outbound[stat.id] = stat;\n          break;\n        case 'remote-inbound-rtp':\n          inbound[stat.ssrc] = stat;\n          break;\n        case 'codec':\n          mimeTypes[stat.id] = stat.mimeType;\n          break;\n        default:\n          break;\n      }\n    });\n\n    Object.keys({ ...outbound }).forEach(stat => {\n      const codecId = outbound[stat]?.codecId;\n      const mimeType = codecId ? mimeTypes[codecId] : undefined;\n      let codec: string | undefined;\n      if (mimeType) {\n        codec = mimeType.substring(mimeType.indexOf('/') + 1);\n      }\n      const out = { ...outbound[stat], rid: (outbound[stat] as HMSLocalTrackStats)?.rid as RID | undefined };\n      const inStats = inbound[out.ssrc];\n      trackStats[stat] = {\n        ...out,\n        bitrate: computeBitrate('bytesSent', out, prevTrackStats?.[stat]),\n        packetsLost: inStats?.packetsLost,\n        jitter: inStats?.jitter,\n        roundTripTime: inStats?.roundTripTime,\n        totalRoundTripTime: inStats?.totalRoundTripTime,\n        peerName,\n        peerID: track.peerId,\n        enabled: track.enabled,\n        codec,\n      };\n    });\n  } catch (err: any) {\n    eventBus.analytics.publish(\n      AnalyticsEventFactory.rtcStatsFailed(\n        ErrorFactory.WebrtcErrors.StatsFailed(\n          HMSAction.TRACK,\n          `Error getting local track stats ${track.trackId} - ${err.message}`,\n        ),\n      ),\n    );\n    HMSLogger.w('[HMSWebrtcStats]', 'Error in getting local track stats', track, err, (err as Error).name);\n  }\n  return trackStats;\n};\n\nexport const getTrackStats = async (\n  eventBus: EventBus,\n  track: HMSRemoteTrack,\n  peerName?: string,\n  prevTrackStats?: HMSTrackStats,\n): Promise<HMSTrackStats | undefined> => {\n  let trackReport: RTCStatsReport | undefined;\n  try {\n    trackReport = await track.transceiver?.receiver.getStats();\n  } catch (err: any) {\n    eventBus.analytics.publish(\n      AnalyticsEventFactory.rtcStatsFailed(\n        ErrorFactory.WebrtcErrors.StatsFailed(\n          HMSAction.TRACK,\n          `Error getting remote track stats ${track.trackId} - ${err.message}`,\n        ),\n      ),\n    );\n    HMSLogger.w('[HMSWebrtcStats]', 'Error in getting remote track stats', track, err);\n  }\n  const trackStats = getRelevantStatsFromTrackReport(trackReport);\n\n  const bitrate = computeBitrate('bytesReceived', trackStats, prevTrackStats);\n\n  const packetsLostRate = computeStatRate('packetsLost', trackStats, prevTrackStats);\n\n  if (trackStats?.remote) {\n    Object.assign(trackStats.remote, {\n      packetsLostRate: computeStatRate('packetsLost', trackStats.remote, prevTrackStats?.remote),\n    });\n  }\n\n  return (\n    trackStats && {\n      ...trackStats,\n      bitrate,\n      packetsLostRate,\n      peerID: track.peerId,\n      enabled: track.enabled,\n      peerName,\n      codec: trackStats.codec,\n    }\n  );\n};\n\nconst getRelevantStatsFromTrackReport = (trackReport?: RTCStatsReport) => {\n  let streamStats: RTCInboundRtpStreamStats | (RTCOutboundRtpStreamStats & { rid?: RID }) | undefined;\n  // Valid by Webrtc spec, not in TS\n  // let remoteStreamStats: RTCRemoteInboundRtpStreamStats | RTCRemoteOutboundRtpStreamStats;\n  let remoteStreamStats: RTCRemoteInboundRtpStreamStats | undefined;\n\n  const mimeTypes: { [key: string]: string } = {}; // codecId -> mimeType\n  trackReport?.forEach(stat => {\n    switch (stat.type) {\n      case 'inbound-rtp':\n        streamStats = stat;\n        break;\n      case 'outbound-rtp':\n        streamStats = stat;\n        break;\n      case 'remote-inbound-rtp':\n        remoteStreamStats = stat;\n        break;\n      case 'codec':\n        mimeTypes[stat.id] = stat.mimeType;\n        break;\n      default:\n        break;\n    }\n  });\n\n  const mimeType = streamStats?.codecId ? mimeTypes[streamStats.codecId] : undefined;\n  let codec: string | undefined;\n  if (mimeType) {\n    codec = mimeType.substring(mimeType.indexOf('/') + 1);\n  }\n\n  return (\n    streamStats &&\n    Object.assign(streamStats, {\n      remote: remoteStreamStats,\n      codec: codec,\n    })\n  );\n};\n\nexport const getLocalPeerStatsFromReport = (\n  type: PeerConnectionType,\n  report?: RTCStatsReport,\n  prevStats?: HMSPeerStats,\n): (RTCIceCandidatePairStats & { bitrate: number }) | undefined => {\n  const activeCandidatePair = getActiveCandidatePairFromReport(report);\n  const bitrate = computeBitrate(\n    (type === 'publish' ? 'bytesSent' : 'bytesReceived') as any,\n    activeCandidatePair,\n    prevStats && prevStats[type],\n  );\n\n  return activeCandidatePair && Object.assign(activeCandidatePair, { bitrate });\n};\n\nexport const getActiveCandidatePairFromReport = (report?: RTCStatsReport): RTCIceCandidatePairStats | undefined => {\n  let activeCandidatePair: RTCIceCandidatePairStats | undefined;\n  report?.forEach(stat => {\n    if (stat.type === 'transport') {\n      // TS doesn't have correct types for RTCStatsReports\n      // @ts-expect-error\n      activeCandidatePair = report?.get(stat.selectedCandidatePairId);\n    }\n  });\n\n  // Fallback for Firefox.\n  if (!activeCandidatePair) {\n    report?.forEach(stat => {\n      if (stat.type === 'candidate-pair' && stat.selected) {\n        activeCandidatePair = stat;\n      }\n    });\n  }\n\n  return activeCandidatePair;\n};\n\nexport const getPacketsLostAndJitterFromReport = (report?: RTCStatsReport): { packetsLost: number; jitter: number } => {\n  const result = { packetsLost: 0, jitter: 0 };\n  report?.forEach(stat => {\n    if (stat.packetsLost) {\n      result.packetsLost += stat.packetsLost;\n    }\n    if (stat.jitter > result.jitter) {\n      result.jitter = stat.jitter;\n    }\n  });\n\n  return result;\n};\n\nexport const union = <T>(arr1: T[], arr2: T[]): T[] => {\n  return Array.from(new Set(arr1.concat(arr2)));\n};\n\n/**\n * Ref: https://github.dev/peermetrics/webrtc-stats/blob/b5c1fed68325543e6f563c6d3f4450a4b51e12b7/src/utils.ts#L62\n */\nexport const computeBitrate = <T extends HMSTrackStats>(\n  statName: keyof T,\n  newReport?: Partial<T>,\n  oldReport?: Partial<T>,\n): number => computeStatRate(statName, newReport, oldReport) * 8; // Bytes to bits\n\nconst computeStatRate = <T extends HMSTrackStats>(\n  statName: keyof T,\n  newReport?: Partial<T>,\n  oldReport?: Partial<T>,\n): number => {\n  const newVal = newReport && newReport[statName];\n  const oldVal = oldReport ? oldReport[statName] : null;\n  const conditions = [newReport, oldReport, isPresent(newVal), isPresent(oldVal)];\n  if (conditions.every(condition => !!condition)) {\n    // Type not null checked in `isPresent`\n    // * 1000 - ms to s\n    return (\n      computeNumberRate(\n        newVal as unknown as number,\n        oldVal as unknown as number,\n        newReport?.timestamp,\n        oldReport?.timestamp,\n      ) * 1000\n    );\n  } else {\n    return 0;\n  }\n};\n\nexport const computeNumberRate = (newVal?: number, oldVal?: number, newTimestamp?: number, oldTimestamp?: number) => {\n  if (isPresent(newVal) && isPresent(oldVal) && newTimestamp && oldTimestamp) {\n    return ((newVal as number) - (oldVal as number)) / (newTimestamp - oldTimestamp);\n  } else {\n    return 0;\n  }\n};\n","import {\n  computeNumberRate,\n  getLocalPeerStatsFromReport,\n  getLocalTrackStats,\n  getPacketsLostAndJitterFromReport,\n  getTrackStats,\n  union,\n} from './utils';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { EventBus } from '../events/EventBus';\nimport { HMSPeerStats, HMSTrackStats } from '../interfaces/webrtc-stats';\nimport { HMSLocalTrack, HMSRemoteAudioTrack, HMSRemoteTrack, HMSRemoteVideoTrack } from '../media/tracks';\nimport { Store } from '../sdk/store';\nimport HMSLogger from '../utils/logger';\n\nexport class HMSWebrtcStats {\n  private readonly TAG = '[HMSWebrtcStats]';\n  private localPeerID?: string;\n  private peerStats: Record<string, HMSPeerStats> = {};\n  private remoteTrackStats: Record<string, HMSTrackStats> = {};\n  private localTrackStats: Record<string, Record<string, HMSTrackStats>> = {};\n\n  /**\n   * Removed localPeerID check in other places as it will be present before\n   * this is initialized\n   */\n  constructor(\n    private store: Store,\n    private readonly eventBus: EventBus,\n    private publishConnection?: RTCPeerConnection,\n    private subscribeConnection?: RTCPeerConnection,\n  ) {\n    this.localPeerID = this.store.getLocalPeer()?.peerId;\n  }\n\n  setPeerConnections({ publish, subscribe }: { publish?: RTCPeerConnection; subscribe?: RTCPeerConnection }) {\n    this.publishConnection = publish;\n    this.subscribeConnection = subscribe;\n  }\n\n  getPublishPeerConnection() {\n    return this.publishConnection;\n  }\n\n  getSubscribePeerConnection() {\n    return this.subscribeConnection;\n  }\n\n  getLocalPeerStats = (): HMSPeerStats | undefined => {\n    return this.peerStats[this.localPeerID!];\n  };\n\n  getRemoteTrackStats = (trackId: string): HMSTrackStats | undefined => {\n    return this.remoteTrackStats[trackId];\n  };\n\n  getAllRemoteTracksStats = () => {\n    return this.remoteTrackStats;\n  };\n\n  getLocalTrackStats = () => {\n    return this.localTrackStats;\n  };\n\n  /**\n   * @internal\n   */\n  updateStats = async () => {\n    await this.updateLocalPeerStats();\n    await this.updateLocalTrackStats();\n    await this.updateRemoteTrackStats();\n  };\n\n  private updateLocalPeerStats = async () => {\n    const prevLocalPeerStats = this.getLocalPeerStats();\n    let publishReport: RTCStatsReport | undefined;\n    try {\n      publishReport = await this.publishConnection?.getStats();\n    } catch (err: any) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.rtcStatsFailed(ErrorFactory.WebrtcErrors.StatsFailed(HMSAction.PUBLISH, err.message)),\n      );\n      HMSLogger.w(this.TAG, 'Error in getting publish stats', err);\n    }\n    const publishStats: HMSPeerStats['publish'] | undefined =\n      publishReport && getLocalPeerStatsFromReport('publish', publishReport, prevLocalPeerStats);\n    let subscribeReport: RTCStatsReport | undefined;\n    try {\n      subscribeReport = await this.subscribeConnection?.getStats();\n    } catch (err: any) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.rtcStatsFailed(ErrorFactory.WebrtcErrors.StatsFailed(HMSAction.SUBSCRIBE, err.message)),\n      );\n      HMSLogger.w(this.TAG, 'Error in getting subscribe stats', err);\n    }\n    const baseSubscribeStats =\n      subscribeReport && getLocalPeerStatsFromReport('subscribe', subscribeReport, prevLocalPeerStats);\n    const { packetsLost, jitter } = getPacketsLostAndJitterFromReport(subscribeReport);\n    const packetsLostRate = computeNumberRate(\n      packetsLost,\n      prevLocalPeerStats?.subscribe?.packetsLost,\n      baseSubscribeStats?.timestamp,\n      prevLocalPeerStats?.subscribe?.timestamp,\n    );\n\n    const subscribeStats: HMSPeerStats['subscribe'] =\n      baseSubscribeStats && Object.assign(baseSubscribeStats, { packetsLostRate, jitter, packetsLost });\n\n    this.peerStats[this.localPeerID!] = { publish: publishStats, subscribe: subscribeStats };\n  };\n\n  private updateRemoteTrackStats = async () => {\n    const tracks = Array.from(this.store.getTracksMap().values()).filter(\n      track => track instanceof HMSRemoteVideoTrack || track instanceof HMSRemoteAudioTrack,\n    );\n    const trackIds = tracks.map(track => track.trackId);\n    Object.keys(this.remoteTrackStats).forEach(trackId => {\n      if (!trackIds.includes(trackId)) {\n        delete this.remoteTrackStats[trackId];\n      }\n    });\n    for (const track of tracks) {\n      const peerName = track.peerId && this.store.getPeerById(track.peerId)?.name;\n      const prevTrackStats = this.getRemoteTrackStats(track.trackId);\n      const trackStats = await getTrackStats(this.eventBus, track as HMSRemoteTrack, peerName, prevTrackStats);\n      if (trackStats) {\n        this.remoteTrackStats[track.trackId] = trackStats;\n      }\n    }\n  };\n\n  private updateLocalTrackStats = async () => {\n    const tracks = this.store.getLocalPeerTracks().reduce<Record<string, HMSLocalTrack>>((res, track) => {\n      res[track.getTrackIDBeingSent()] = track;\n      return res;\n    }, {});\n    const trackIDs = union(Object.keys(this.localTrackStats), Object.keys(tracks));\n    for (const trackID of trackIDs) {\n      const track = tracks[trackID] as HMSLocalTrack;\n      if (track) {\n        const peerName = this.store.getLocalPeer()?.name;\n        const trackStats = await getLocalTrackStats(this.eventBus, track, peerName, this.localTrackStats[trackID]);\n        if (trackStats) {\n          this.localTrackStats[trackID] = trackStats;\n        }\n      } else {\n        delete this.localTrackStats[trackID];\n      }\n    }\n  };\n}\n","import { HMSWebrtcStats } from './HMSWebrtcStats';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { EventBus } from '../events/EventBus';\nimport { Store } from '../sdk/store';\nimport { RTC_STATS_MONITOR_INTERVAL } from '../utils/constants';\nimport HMSLogger from '../utils/logger';\nimport { sleep } from '../utils/timer-utils';\n\nexport class HMSWebrtcInternals {\n  private readonly TAG = '[HMSWebrtcInternals]';\n  private readonly interval = RTC_STATS_MONITOR_INTERVAL;\n  private isMonitored = false;\n  private hmsStats?: HMSWebrtcStats;\n\n  constructor(private readonly store: Store, private readonly eventBus: EventBus) {}\n\n  getCurrentStats() {\n    return this.hmsStats;\n  }\n\n  getPublishPeerConnection() {\n    return this.hmsStats?.getPublishPeerConnection();\n  }\n\n  getSubscribePeerConnection() {\n    return this.hmsStats?.getSubscribePeerConnection();\n  }\n\n  onStatsChange(statsChangeCb: (stats: HMSWebrtcStats) => void) {\n    this.eventBus.statsUpdate.subscribe(statsChangeCb);\n    return () => {\n      this.eventBus.statsUpdate.unsubscribe(statsChangeCb);\n    };\n  }\n\n  private handleStatsUpdate = async () => {\n    await this.hmsStats?.updateStats();\n    if (this.hmsStats) {\n      this.eventBus.statsUpdate.publish(this.hmsStats);\n    }\n  };\n\n  /**\n   *\n   * @internal\n   */\n  setPeerConnections({ publish, subscribe }: { publish?: RTCPeerConnection; subscribe?: RTCPeerConnection }) {\n    if (this.hmsStats) {\n      this.hmsStats.setPeerConnections({ publish, subscribe });\n    } else {\n      this.hmsStats = new HMSWebrtcStats(this.store, this.eventBus, publish, subscribe);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  async start() {\n    if (this.isMonitored) {\n      HMSLogger.d(this.TAG, 'Already started');\n      return;\n    }\n    this.stop();\n    this.isMonitored = true;\n    HMSLogger.d(this.TAG, 'Starting Webrtc Stats Monitor');\n    this.startLoop()\n      .then(() => HMSLogger.d(this.TAG, 'Stopping Webrtc Stats Monitor'))\n      .catch(e => {\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.rtcStatsFailed(ErrorFactory.WebrtcErrors.StatsFailed(HMSAction.PUBLISH, e.message)),\n        );\n        HMSLogger.e(this.TAG, e.message);\n      });\n  }\n\n  private stop() {\n    this.isMonitored = false;\n  }\n\n  private async startLoop() {\n    while (this.isMonitored) {\n      await this.handleStatsUpdate();\n      await sleep(this.interval);\n    }\n  }\n\n  /**\n   * @internal\n   */\n  cleanup() {\n    this.stop();\n    this.eventBus.statsUpdate.removeAllListeners();\n  }\n}\n","import { HMSPeer as IHMSPeer } from '../../../interfaces/peer';\nimport { HMSPeerType } from '../../../interfaces/peer/hms-peer';\nimport { HMSRole } from '../../../interfaces/role';\nimport { HMSAudioTrack, HMSTrack, HMSVideoTrack } from '../../../media/tracks';\nimport { HAND_RAISE_GROUP_NAME } from '../../../utils/constants';\n\nexport type HMSPeerInit = {\n  peerId: string;\n  name: string;\n  isLocal: boolean;\n  customerUserId?: string;\n  metadata?: string;\n  role?: HMSRole;\n  joinedAt?: Date;\n  fromRoomState?: boolean;\n  metworkQuality?: number;\n  groups?: string[];\n  realtime?: boolean;\n  isHandRaised?: boolean;\n  type: HMSPeerType;\n};\n\nexport class HMSPeer implements IHMSPeer {\n  readonly peerId: string;\n  readonly isLocal: boolean;\n  name: string;\n  customerUserId?: string = '';\n  metadata?: string = '';\n  audioTrack?: HMSAudioTrack;\n  videoTrack?: HMSVideoTrack;\n  auxiliaryTracks: HMSTrack[] = [];\n  role?: HMSRole;\n  joinedAt?: Date;\n  networkQuality?: number;\n  groups?: string[];\n  realtime?: boolean;\n  type: HMSPeerType;\n\n  constructor({\n    peerId,\n    name,\n    isLocal,\n    customerUserId,\n    metadata,\n    role,\n    joinedAt,\n    groups,\n    realtime,\n    type,\n  }: HMSPeerInit) {\n    this.name = name;\n    this.peerId = peerId;\n    this.isLocal = isLocal;\n    this.customerUserId = customerUserId;\n    this.metadata = metadata;\n    this.joinedAt = joinedAt;\n    this.groups = groups;\n    this.realtime = realtime;\n    this.type = type;\n\n    if (role) {\n      this.role = role;\n    }\n  }\n\n  get isHandRaised() {\n    return !!this.groups?.includes(HAND_RAISE_GROUP_NAME);\n  }\n\n  /**\n   * @internal\n   */\n  updateRole(newRole: HMSRole) {\n    this.role = newRole;\n  }\n  /**\n   * @internal\n   */\n  updateName(newName: string) {\n    this.name = newName;\n  }\n\n  updateNetworkQuality(quality: number) {\n    this.networkQuality = quality;\n  }\n\n  /**\n   * @internal\n   */\n  updateMetadata(data: string) {\n    this.metadata = data;\n  }\n\n  updateGroups(groups: string[]) {\n    this.groups = groups;\n  }\n\n  toString() {\n    return `{\n      name: ${this.name};\n      role: ${this.role?.name};\n      peerId: ${this.peerId};\n      customerUserId: ${this.customerUserId};\n      ${this.audioTrack ? `audioTrack: ${this.audioTrack?.trackId};` : ''}\n      ${this.videoTrack ? `videoTrack: ${this.videoTrack?.trackId};` : ''}\n      groups: ${this.groups?.join()}\n    }`;\n  }\n}\n","import { v4 as uuidv4 } from 'uuid';\n\nexport default class HMSIdFactory {\n  static makePeerId = () => uuidv4();\n}\n","import { HMSPeer, HMSPeerInit } from './HMSPeer';\nimport { HMSLocalPeer as IHMSLocalPeer } from '../../../interfaces/peer';\nimport { HMSRole } from '../../../interfaces/role';\nimport { HMSLocalAudioTrack, HMSLocalTrack, HMSLocalVideoTrack } from '../../../media/tracks';\nimport HMSIdFactory from '../../../utils/id-factory';\n\ntype HMSLocalPeerInit = Omit<HMSPeerInit, 'isLocal' | 'peerId'> & { asRole?: HMSRole };\n\nexport class HMSLocalPeer extends HMSPeer implements IHMSLocalPeer {\n  isLocal = true;\n  declare audioTrack?: HMSLocalAudioTrack;\n  declare videoTrack?: HMSLocalVideoTrack;\n  auxiliaryTracks: HMSLocalTrack[] = [];\n  asRole?: HMSRole;\n\n  constructor(peerData: HMSLocalPeerInit) {\n    super({ ...peerData, peerId: HMSIdFactory.makePeerId(), isLocal: true });\n    this.asRole = peerData.asRole;\n  }\n\n  isInPreview() {\n    return !!this.asRole;\n  }\n\n  toString(): string {\n    return `{\n      name: ${this.name};\n      role: ${this.role?.name};\n      peerId: ${this.peerId};\n      customerUserId: ${this.customerUserId};\n      ${this.asRole ? `asRole: ${this.asRole.name};` : ''}\n      ${this.audioTrack ? `audioTrack: ${this.audioTrack?.trackId};` : ''}\n      ${this.videoTrack ? `videoTrack: ${this.videoTrack?.trackId};` : ''}\n    }`;\n  }\n}\n","import { HMSPeer, HMSPeerInit } from './HMSPeer';\nimport { HMSRemotePeer as IHMSRemotePeer } from '../../../interfaces/peer';\nimport { HMSRemoteAudioTrack, HMSRemoteTrack, HMSRemoteVideoTrack } from '../../../media/tracks';\n\ntype HMSRemotePeerInit = Omit<HMSPeerInit, 'isLocal'>;\n\nexport class HMSRemotePeer extends HMSPeer implements IHMSRemotePeer {\n  isLocal = false;\n  declare audioTrack?: HMSRemoteAudioTrack;\n  declare videoTrack?: HMSRemoteVideoTrack;\n  auxiliaryTracks: HMSRemoteTrack[] = [];\n  fromRoomState = false;\n\n  constructor(peerData: HMSRemotePeerInit) {\n    super({ ...peerData, isLocal: false });\n    this.fromRoomState = !!peerData.fromRoomState;\n  }\n}\n","import { HMSRemotePeer } from '../../sdk/models/peer';\nimport { Store } from '../../sdk/store';\nimport { PeerNotificationInfo } from '../HMSNotifications';\n\nexport const createRemotePeer = (notifPeer: PeerNotificationInfo, store: Store) => {\n  return new HMSRemotePeer({\n    peerId: notifPeer.peer_id,\n    name: notifPeer.info.name,\n    role: store.getPolicyForRole(notifPeer.role),\n    customerUserId: notifPeer.info.user_id,\n    metadata: notifPeer.info.data,\n    groups: notifPeer.groups,\n    type: notifPeer.info.type,\n  });\n};\n","import { HMSRemotePeer } from './models/peer';\nimport { Store } from './store';\nimport { HMSPeerListIteratorOptions } from '../interfaces/peer-list-iterator';\nimport { PeerNotificationInfo } from '../notification-manager';\nimport { createRemotePeer } from '../notification-manager/managers/utils';\nimport { PeersIterationResponse } from '../signal/interfaces';\nimport HMSTransport from '../transport';\n\nexport class HMSPeerListIterator {\n  private isEnd = false;\n  private iterator: string | null = null;\n  private total = 0;\n  private defaultPaginationLimit = 10;\n  constructor(private transport: HMSTransport, private store: Store, private options?: HMSPeerListIteratorOptions) {}\n\n  private validateConnection() {\n    if (!this.transport || !this.store) {\n      throw Error(`Use usePaginatedParticipants or hmsActions.getPeerListIterator after preview or join has happened`);\n    }\n  }\n\n  hasNext(): boolean {\n    return !this.isEnd;\n  }\n\n  getTotal(): number {\n    return this.total;\n  }\n\n  async findPeers() {\n    this.validateConnection();\n    const response = await this.transport.signal.findPeers({\n      ...(this.options || {}),\n      limit: this.options?.limit || this.defaultPaginationLimit,\n    });\n    this.updateState(response);\n    return this.processPeers(response.peers);\n  }\n\n  async next() {\n    this.validateConnection();\n    let response: PeersIterationResponse;\n    if (!this.iterator && !this.isEnd) {\n      return await this.findPeers();\n    } else if (this.iterator) {\n      response = await this.transport.signal.peerIterNext({\n        iterator: this.iterator,\n        limit: this.options?.limit || this.defaultPaginationLimit,\n      });\n      this.updateState(response);\n      return this.processPeers(response.peers);\n    }\n    return [];\n  }\n\n  private processPeers(peers: PeerNotificationInfo[]) {\n    const hmsPeers: HMSRemotePeer[] = [];\n    peers.forEach(peer => {\n      const hmsPeer = createRemotePeer(peer, this.store);\n      hmsPeers.push(hmsPeer);\n    });\n    return hmsPeers;\n  }\n\n  private updateState(response: PeersIterationResponse) {\n    this.isEnd = response.eof;\n    this.total = response.total;\n    // iterator is only received once in findpeer -  reuse the same iterator\n    if (response.iterator) {\n      this.iterator = response.iterator;\n    }\n  }\n}\n","import HMSLogger from '../utils/logger';\n\nexport class AudioContextManager {\n  private audioContext: AudioContext;\n  private destinationNode?: MediaStreamAudioDestinationNode;\n  private source: MediaElementAudioSourceNode;\n  private readonly TAG = '[AudioContextManager]';\n\n  constructor(element: HTMLMediaElement) {\n    this.audioContext = new AudioContext();\n    this.source = this.audioContext.createMediaElementSource(element);\n    this.source.connect(this.audioContext.destination);\n  }\n\n  /**\n   * Resume AudioContext if it is suspended\n   * Note: when the browser tab is muted by default, AudioContext will be in suspended state\n   * It has to be resumed for the video/audio to be played.\n   */\n  async resumeContext() {\n    if (this.audioContext.state === 'suspended') {\n      await this.audioContext.resume();\n      HMSLogger.d(this.TAG, 'AudioContext is resumed');\n    }\n  }\n\n  getAudioTrack() {\n    // Always create a destinationNode to get new audio track id\n    if (this.destinationNode) {\n      this.source.disconnect(this.destinationNode);\n    }\n    this.destinationNode = this.audioContext.createMediaStreamDestination();\n    this.source.connect(this.destinationNode);\n    return this.destinationNode.stream.getAudioTracks()[0];\n  }\n\n  cleanup() {\n    if (this.audioContext.state !== 'closed') {\n      this.audioContext.close().catch(e => {\n        HMSLogger.d(this.TAG, 'AudioContext close error', e.message);\n      });\n    }\n  }\n}\n","import { EventEmitter2 as EventEmitter } from 'eventemitter2';\n\n/**\n * Typed Event Emitter Reference:\n * https://rjzaworski.com/2019/10/event-emitters-in-typescript#a-typescript-event-emitter-interface\n */\n\nexport type EventMap = Record<string, any>;\n\nexport type EventKey<T extends EventMap> = string & keyof T;\nexport type EventReceiver<T> = (params: T) => void;\n\n// interface Emitter<T extends EventMap> {\n//   on<K extends EventKey<T>>(eventName: K, fn: EventReceiver<T[K]>): void;\n//   off<K extends EventKey<T>>(eventName: K, fn: EventReceiver<T[K]>): void;\n//   emit<K extends EventKey<T>>(eventName: K, params: T[K]): void;\n// }\n\nexport abstract class TypedEventEmitter<T extends EventMap> extends EventEmitter {\n  on<K extends EventKey<T>>(eventName: K, fn: EventReceiver<T[K]>) {\n    return super.on(eventName, fn);\n  }\n\n  off<K extends EventKey<T>>(eventName: K, fn: EventReceiver<T[K]>) {\n    return super.off(eventName, fn);\n  }\n\n  emit<K extends EventKey<T>>(eventName: K, params: T[K]) {\n    return super.emit(eventName, params);\n  }\n\n  listeners<K extends EventKey<T>>(eventName: K): EventReceiver<T[K]>[] {\n    return super.listeners(eventName) as EventReceiver<T[K]>[];\n  }\n}\n","import { AudioContextManager } from './AudioContextManager';\nimport HMSLogger from '../utils/logger';\nimport { TypedEventEmitter } from '../utils/typed-event-emitter';\n\n/**\n * This class handles audio playlist management\n * - An audio element and audio context which processes audio from audio element is created\n *   in the constructor\n * It handles playback in the following steps\n *  - set's the url on the audio element created in the constructor\n *  - oncanplaythrough event of the audio element\n *    - resume the audio context if it is suspended\n *    - play the audio element\n *    - Get audio track from the audio context manager\n *    - The track is passed to playlist manager to publish\n */\nexport class PlaylistAudioManager extends TypedEventEmitter<{ ended: null; progress: Event }> {\n  private audioElement: HTMLAudioElement | null = null;\n  private track?: MediaStreamTrack;\n  private audioContextManager!: AudioContextManager;\n  private readonly TAG = '[PlaylistAudioManager]';\n  // This is to handle audio playing when seekTo is called when audio is paused\n  private seeked = false;\n\n  async play(url: string) {\n    this.audioElement = this.getAudioElement();\n    return new Promise<MediaStreamTrack[]>((resolve, reject) => {\n      this.audioElement = this.getAudioElement();\n      this.audioElement.src = url;\n      this.seeked = false;\n      this.audioElement.onerror = () => {\n        const error = `Error loading ${url}`;\n        HMSLogger.e(this.TAG, error);\n        this.stop();\n        reject(error);\n      };\n      // oncanplaythrough is called when enough media is loaded for play to be possible in two cases -\n      //    * when play is called for the first time\n      //    * when user seeks jumps to any mid track timestamp\n      this.audioElement.oncanplaythrough = async () => {\n        try {\n          if (!this.audioElement) {\n            return;\n          }\n          this.audioContextManager.resumeContext();\n          // Create audio track only once and reuse, it will be updated with current content\n          if (!this.track) {\n            await this.audioElement.play();\n            const audioTrack = this.audioContextManager.getAudioTrack();\n            this.track = audioTrack;\n            resolve([audioTrack]);\n          } else {\n            if (!this.seeked) {\n              // if this was called in response to a play call\n              await this.audioElement.play();\n              resolve([this.track]);\n            } else {\n              // if seek happened, there is no play call/promise to be resolved, just reset seeked\n              this.seeked = false;\n            }\n          }\n        } catch (err) {\n          HMSLogger.e(this.TAG, 'Error playing audio', url, (err as ErrorEvent).message);\n          reject(err);\n        }\n      };\n      this.audioElement.onseeked = () => {\n        this.seeked = true;\n      };\n    });\n  }\n\n  getTracks() {\n    return this.track ? [this.track.id] : [];\n  }\n\n  getElement() {\n    if (!this.audioElement) {\n      this.audioElement = this.getAudioElement();\n    }\n    return this.audioElement;\n  }\n\n  stop() {\n    this.audioElement?.pause();\n    this.audioElement?.removeAttribute('src');\n    this.audioElement = null;\n    this.audioContextManager?.cleanup();\n    this.track = undefined;\n  }\n\n  private getAudioElement() {\n    if (this.audioElement) {\n      return this.audioElement;\n    }\n    const audioElement = document.createElement('audio');\n    audioElement.crossOrigin = 'anonymous';\n    audioElement.addEventListener('timeupdate', event => this.emit('progress', event));\n    audioElement.addEventListener('ended', () => {\n      this.emit('ended', null);\n    });\n    this.audioContextManager = new AudioContextManager(audioElement);\n    return audioElement;\n  }\n}\n","import { AudioContextManager } from './AudioContextManager';\nimport HMSLogger from '../utils/logger';\nimport { TypedEventEmitter } from '../utils/typed-event-emitter';\n\n/**\n * This class handles video playlist management\n * - An video element, canvas and audio context which processes audio from video element is created\n *   in the constructor\n * It handles playback in the following steps\n *  - set's the url on the video element created in the constructor\n *  - oncanplaythrough event of the video element\n *    - resume the audio context if it is suspended\n *    - set width/height on canvas\n *    - captureStream on canvas element if not already captured\n *    - play the video element\n *    - on video element is played, it is drawn to canvas\n *    - Get audio track from the audio context manager\n *    - add audioTrack to canvas stream\n *    - The audio and video tracks are passed to playlist manager to publish\n */\nexport class PlaylistVideoManager extends TypedEventEmitter<{ ended: null; progress: Event }> {\n  private readonly TAG = '[PlaylistVideoManager]';\n  private videoElement: HTMLVideoElement | null = null;\n  private canvasContext: CanvasRenderingContext2D | null = null;\n  private canvas!: HTMLCanvasElement;\n  private timer: any;\n  private tracks: MediaStreamTrack[] = [];\n  private audioContextManager!: AudioContextManager;\n  private DEFAUL_FPS = 24;\n  // This is to handle video playing when seekTo is called when video is paused\n  private seeked = false;\n\n  play(url: string) {\n    this.videoElement = this.getVideoElement();\n    this.createCanvas();\n    return new Promise<MediaStreamTrack[]>((resolve, reject) => {\n      this.videoElement = this.getVideoElement();\n      this.videoElement.src = url;\n      this.seeked = false;\n      this.videoElement.onerror = () => {\n        const error = `Error loading ${url}`;\n        HMSLogger.e(this.TAG, error);\n        this.stop();\n        reject(error);\n      };\n      // oncanplaythrough is called when enough media is loaded for play to be possible in two cases -\n      //    * when play is called for the first time\n      //    * when user jumps to any mid track timestamp using seekTo\n      this.videoElement.oncanplaythrough = async () => {\n        try {\n          if (!this.videoElement) {\n            return;\n          }\n          this.canvas.width = this.videoElement.videoWidth;\n          this.canvas.height = this.videoElement.videoHeight;\n          // Capture stream only once and reuse the same tracks. it will be autoupdated with the selected video\n          if (this.tracks.length === 0) {\n            this.clearCanvasAndTracks();\n            //@ts-ignore\n            const stream = this.canvas.captureStream();\n            if (!stream) {\n              HMSLogger.e(this.TAG, 'Browser does not support captureStream');\n              return;\n            }\n            this.videoElement.onplay = this.drawImage;\n            await this.audioContextManager.resumeContext();\n            await this.videoElement.play();\n            const audioTrack = this.audioContextManager.getAudioTrack();\n            stream.addTrack(audioTrack);\n            stream.getTracks().forEach((track: MediaStreamTrack) => {\n              this.tracks.push(track);\n            });\n            resolve(this.tracks);\n          } else {\n            // No need to capture canvas stream/get audio track. They wull be auto updated\n            if (!this.seeked) {\n              // if this was called in response to a play call\n              await this.videoElement.play();\n              resolve(this.tracks);\n            } else {\n              // if seek happened, there is no play call/promise to be resolved, just reset seeked\n              this.seeked = false;\n              // This event will be called on seekTo when paused. Just draw the one frame on canvas.\n              this.canvasContext?.drawImage(this.videoElement, 0, 0, this.canvas?.width, this.canvas?.height);\n            }\n          }\n        } catch (err) {\n          HMSLogger.e(this.TAG, 'Error playing video', url, (err as ErrorEvent).message);\n          reject(err);\n        }\n      };\n      this.videoElement.onseeked = () => {\n        this.seeked = true;\n      };\n    });\n  }\n\n  getTracks() {\n    return this.tracks.map(track => track.id);\n  }\n\n  getElement() {\n    if (!this.videoElement) {\n      this.videoElement = this.getVideoElement();\n    }\n    return this.videoElement;\n  }\n\n  stop() {\n    this.videoElement?.pause();\n    this.videoElement?.removeAttribute('src');\n    this.videoElement = null;\n    this.audioContextManager?.cleanup();\n    this.clearCanvasAndTracks();\n  }\n\n  private clearCanvasAndTracks() {\n    this.tracks = [];\n    // clear canvas before playing new video\n    this.canvasContext?.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    clearTimeout(this.timer);\n  }\n\n  private drawImage = () => {\n    if (this.videoElement && !this.videoElement.paused && !this.videoElement.ended) {\n      this.canvasContext?.drawImage(this.videoElement, 0, 0, this.canvas?.width, this.canvas?.height);\n      this.timer = setTimeout(() => {\n        this.drawImage();\n      }, 1000 / this.DEFAUL_FPS);\n    }\n  };\n\n  private getVideoElement() {\n    if (this.videoElement) {\n      return this.videoElement;\n    }\n    const videoElement = document.createElement('video');\n    videoElement.crossOrigin = 'anonymous';\n    videoElement.addEventListener('timeupdate', event => this.emit('progress', event));\n    videoElement.addEventListener('ended', () => {\n      this.emit('ended', null);\n    });\n    this.audioContextManager = new AudioContextManager(videoElement);\n    return videoElement;\n  }\n\n  private createCanvas() {\n    if (!this.canvas) {\n      this.canvas = document.createElement('canvas');\n      this.canvasContext = this.canvas.getContext('2d');\n    }\n  }\n}\n","import { PlaylistAudioManager } from './PlaylistAudioManager';\nimport { PlaylistVideoManager } from './PlaylistVideoManager';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { EventBus } from '../events/EventBus';\nimport { HMSPlaylistItem, HMSPlaylistManager, HMSPlaylistProgressEvent, HMSPlaylistType } from '../interfaces';\nimport { HMSLocalTrack } from '../media/tracks';\nimport { HMSSdk } from '../sdk';\nimport { stringifyMediaStreamTrack } from '../utils/json';\nimport HMSLogger from '../utils/logger';\nimport { TypedEventEmitter } from '../utils/typed-event-emitter';\n\ntype PlaylistManagerState<T> = {\n  audio: {\n    list: HMSPlaylistItem<T>[];\n    currentIndex: number;\n    isAutoplayOn: boolean;\n  };\n  video: {\n    list: HMSPlaylistItem<T>[];\n    currentIndex: number;\n    isAutoplayOn: boolean;\n  };\n};\n\nconst INITIAL_STATE: PlaylistManagerState<any> = {\n  audio: {\n    list: [],\n    currentIndex: -1,\n    isAutoplayOn: true,\n  },\n  video: {\n    list: [],\n    currentIndex: -1,\n    isAutoplayOn: true,\n  },\n};\n\nexport class PlaylistManager\n  extends TypedEventEmitter<{\n    newTrackStart: HMSPlaylistItem<any>;\n    playlistEnded: HMSPlaylistType;\n    currentTrackEnded: HMSPlaylistItem<any>;\n  }>\n  implements HMSPlaylistManager\n{\n  private state = { audio: { ...INITIAL_STATE.audio }, video: { ...INITIAL_STATE.video } };\n  private audioManager: PlaylistAudioManager;\n  private videoManager: PlaylistVideoManager;\n  private readonly TAG = '[PlaylistManager]';\n\n  constructor(private sdk: HMSSdk, private eventBus: EventBus) {\n    super();\n    this.audioManager = new PlaylistAudioManager();\n    this.videoManager = new PlaylistVideoManager();\n    this.addListeners();\n  }\n\n  getList<T>(type: HMSPlaylistType = HMSPlaylistType.audio): HMSPlaylistItem<T>[] {\n    return this.state[type].list;\n  }\n\n  setList<T>(list: HMSPlaylistItem<T>[]): void {\n    if (!list || list.length === 0) {\n      HMSLogger.w(this.TAG, `Please pass in a list of HMSPlaylistItem's`);\n      return;\n    }\n    list.forEach((item: HMSPlaylistItem<T>) => {\n      if (!this.state[item.type].list.find(_item => _item.id === item.id)) {\n        this.state[item.type].list.push(item);\n      }\n    });\n  }\n\n  async clearList(type: HMSPlaylistType): Promise<void> {\n    if (this.isPlaying(type)) {\n      await this.stop(type);\n    }\n    this.state[type].list = [];\n  }\n\n  async removeItem(id: string, type: HMSPlaylistType): Promise<boolean> {\n    const { list, currentIndex } = this.state[type];\n    const index = list.findIndex(playItem => id === playItem.id);\n    if (index > -1) {\n      // stop if the item is playing\n      if (currentIndex === index && this.isPlaying(type)) {\n        await this.stop(type);\n      }\n      list.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  seek(value: number, type: HMSPlaylistType = HMSPlaylistType.audio): void {\n    const { currentIndex } = this.state[type];\n    if (currentIndex === -1) {\n      throw ErrorFactory.PlaylistErrors.NoEntryToPlay(HMSAction.PLAYLIST, 'No item is currently playing');\n    }\n    const element = this.getElement(type);\n    if (element) {\n      const updatedValue = Math.max(element.currentTime + value, 0);\n      element.currentTime = Math.min(updatedValue, element.duration);\n    }\n  }\n\n  seekTo(value: number, type: HMSPlaylistType = HMSPlaylistType.audio): void {\n    const { currentIndex } = this.state[type];\n    if (currentIndex === -1) {\n      throw ErrorFactory.PlaylistErrors.NoEntryToPlay(HMSAction.PLAYLIST, 'No item is currently playing');\n    }\n    if (value < 0) {\n      throw Error('value cannot be negative');\n    }\n    const element = this.getElement(type);\n    if (element) {\n      element.currentTime = Math.min(value, element.duration);\n    }\n  }\n\n  setVolume(value: number, type: HMSPlaylistType = HMSPlaylistType.audio): void {\n    if (value < 0 || value > 100) {\n      throw Error('Please pass a valid number between 0-100');\n    }\n    const element = this.getElement(type);\n    if (element) {\n      element.volume = value * 0.01;\n    }\n  }\n\n  getVolume(type: HMSPlaylistType = HMSPlaylistType.audio): number {\n    const element = this.getElement(type);\n    if (element) {\n      return Math.floor(element.volume * 100);\n    }\n    return 0;\n  }\n\n  getCurrentTime(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const element = this.getElement(type);\n    return element?.currentTime || 0;\n  }\n\n  getCurrentIndex(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    return this.state[type].currentIndex;\n  }\n\n  getCurrentProgress(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const { list, currentIndex } = this.state[type];\n    const activeUrl = list[currentIndex]?.url;\n    const element = this.getElement(type);\n    if (!activeUrl || !element) {\n      return 0;\n    }\n    return Math.floor(100 * (element.currentTime / element.duration));\n  }\n\n  getCurrentSelection(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const { list, currentIndex } = this.state[type];\n    if (currentIndex === -1) {\n      return undefined;\n    }\n    return list[currentIndex];\n  }\n\n  isPlaying(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const element = this.getElement(type);\n    return !!element && !element.paused;\n  }\n\n  setIsAutoplayOn(type: HMSPlaylistType = HMSPlaylistType.audio, autoplay: boolean) {\n    this.state[type].isAutoplayOn = autoplay;\n  }\n\n  getPlaybackRate(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const element = this.getElement(type);\n    return element ? element.playbackRate : 1.0;\n  }\n\n  setPlaybackRate(type: HMSPlaylistType = HMSPlaylistType.audio, value: number) {\n    if (value < 0.25 || value > 2.0) {\n      throw Error('Please pass a value between 0.25 and 2.0');\n    }\n    const element = this.getElement(type);\n    if (element) {\n      element.playbackRate = value;\n    }\n  }\n\n  async setEnabled(\n    enabled: boolean,\n    { id, type = HMSPlaylistType.audio }: { id: string; type: HMSPlaylistType },\n  ): Promise<void> {\n    const list = this.state[type].list;\n    const currentIndex = list.findIndex(item => item.id === id);\n    if (!id || currentIndex === -1) {\n      HMSLogger.w(this.TAG, 'Pass a valid id');\n      return;\n    }\n    const url = this.state[type].list[currentIndex].url;\n    if (enabled) {\n      await this.play(url, type);\n    } else {\n      await this.pause(url, type);\n    }\n    this.state[type].currentIndex = currentIndex;\n    this.setDuration(type);\n  }\n\n  async playNext(type: HMSPlaylistType = HMSPlaylistType.audio): Promise<void> {\n    const { list, currentIndex } = this.state[type];\n    if (currentIndex >= list.length - 1) {\n      throw ErrorFactory.PlaylistErrors.NoEntryToPlay(HMSAction.PLAYLIST, 'Reached end of playlist');\n    }\n    await this.play(list[currentIndex + 1].url, type);\n    this.state[type].currentIndex = currentIndex + 1;\n    this.setDuration(type);\n  }\n\n  async playPrevious(type: HMSPlaylistType = HMSPlaylistType.audio): Promise<void> {\n    const { list, currentIndex } = this.state[type];\n    if (currentIndex <= 0) {\n      throw ErrorFactory.PlaylistErrors.NoEntryToPlay(HMSAction.PLAYLIST, 'Reached start of playlist');\n    }\n    await this.play(list[currentIndex - 1].url, type);\n    this.state[type].currentIndex = currentIndex - 1;\n    this.setDuration(type);\n  }\n\n  async stop(type: HMSPlaylistType = HMSPlaylistType.audio): Promise<void> {\n    const manager = type === HMSPlaylistType.audio ? this.audioManager : this.videoManager;\n    manager.getElement()?.pause(); //pause local video/audio and remove tracks in next step\n    await this.removeTracks(type);\n    manager.stop();\n    this.state[type].currentIndex = -1;\n  }\n\n  cleanup() {\n    this.state = { audio: { ...INITIAL_STATE.audio }, video: { ...INITIAL_STATE.video } };\n    this.eventBus.localAudioEnabled.unsubscribe(this.handlePausePlaylist);\n    this.eventBus.localVideoEnabled.unsubscribe(this.handlePausePlaylist);\n    this.audioManager.stop();\n    this.videoManager.stop();\n  }\n\n  onProgress(fn: (progress: HMSPlaylistProgressEvent) => void) {\n    this.videoManager.on('progress', () => {\n      try {\n        fn({\n          type: HMSPlaylistType.video,\n          progress: this.getCurrentProgress(HMSPlaylistType.video),\n        });\n      } catch (error) {\n        HMSLogger.e(this.TAG, 'Error in onProgress callback');\n      }\n    });\n    this.audioManager.on('progress', () => {\n      try {\n        fn({\n          type: HMSPlaylistType.audio,\n          progress: this.getCurrentProgress(HMSPlaylistType.audio),\n        });\n      } catch (error) {\n        HMSLogger.e(this.TAG, 'Error in onProgress callback');\n      }\n    });\n  }\n\n  onNewTrackStart<T>(fn: (item: HMSPlaylistItem<T>) => void) {\n    this.on('newTrackStart', fn);\n  }\n\n  onPlaylistEnded(fn: (type: HMSPlaylistType) => void) {\n    this.on('playlistEnded', fn);\n  }\n\n  onCurrentTrackEnded<T>(fn: (item: HMSPlaylistItem<T>) => void) {\n    this.on('currentTrackEnded', fn);\n  }\n\n  private getElement(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    return type === HMSPlaylistType.audio ? this.audioManager.getElement() : this.videoManager.getElement();\n  }\n\n  private async removeTracks(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const manager = type === HMSPlaylistType.audio ? this.audioManager : this.videoManager;\n    const tracks = manager.getTracks();\n    for (const trackId of tracks) {\n      await this.removeTrack(trackId);\n    }\n  }\n\n  private async play(url: string, type: HMSPlaylistType = HMSPlaylistType.audio): Promise<void> {\n    const manager = type === HMSPlaylistType.audio ? this.audioManager : this.videoManager;\n    const element = manager.getElement();\n    if (this.isItemCurrentlyPlaying(url, type)) {\n      HMSLogger.w(this.TAG, `The ${type} is currently playing`);\n      return;\n    }\n    if (element?.src.includes(url)) {\n      await element.play();\n    } else {\n      element?.pause();\n      const tracks: MediaStreamTrack[] = await manager.play(url);\n      for (const track of tracks) {\n        await this.addTrack(track, type === HMSPlaylistType.audio ? 'audioplaylist' : 'videoplaylist');\n      }\n    }\n  }\n\n  private isItemCurrentlyPlaying(url: string, type: HMSPlaylistType): boolean {\n    const element = this.getElement(type);\n    return !!(element && !element.paused && element.src.includes(url));\n  }\n\n  private setDuration(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const element = this.getElement(type);\n    const { list, currentIndex } = this.state[type];\n    if (list[currentIndex]) {\n      list[currentIndex].duration = element?.duration || 0;\n    }\n    this.emit('newTrackStart', list[currentIndex]);\n  }\n\n  private async pause(url: string, type: HMSPlaylistType = HMSPlaylistType.audio): Promise<void> {\n    const el = this.getElement(type);\n    if (el && !el.paused && el.src.includes(url)) {\n      el.pause();\n      HMSLogger.d(this.TAG, 'paused url', url);\n    } else {\n      HMSLogger.w(this.TAG, 'The passed in url is not currently playing');\n    }\n  }\n\n  private handlePausePlaylist = async ({ enabled, track }: { enabled: boolean; track: HMSLocalTrack }) => {\n    if (enabled) {\n      return;\n    }\n    let type: HMSPlaylistType | undefined = undefined;\n    if (track.source === 'audioplaylist') {\n      type = HMSPlaylistType.audio;\n    }\n    if (track.source === 'videoplaylist') {\n      type = HMSPlaylistType.video;\n    }\n    if (!type) {\n      return;\n    }\n    this.getElement(type)?.pause();\n  };\n\n  private addListeners() {\n    this.audioManager.on('ended', () => this.handleEnded(HMSPlaylistType.audio));\n    this.videoManager.on('ended', () => this.handleEnded(HMSPlaylistType.video));\n    this.eventBus.localAudioEnabled.subscribe(this.handlePausePlaylist);\n    this.eventBus.localVideoEnabled.subscribe(this.handlePausePlaylist);\n  }\n\n  /**\n   * Remove tracks if reached the end of list otherwise play next\n   * @param {HMSPlaylistType} type\n   */\n  private async handleEnded(type: HMSPlaylistType = HMSPlaylistType.audio) {\n    const { list, currentIndex, isAutoplayOn } = this.state[type];\n    if (currentIndex === list.length - 1) {\n      await this.stop(type);\n      this.emit('playlistEnded', type);\n    } else {\n      if (isAutoplayOn) {\n        this.playNext(type);\n      } else {\n        // when autoplay not allowed, pause the media element\n        await this.pause(list[currentIndex].url, type);\n      }\n    }\n    this.emit('currentTrackEnded', list[currentIndex]);\n  }\n\n  private addTrack = async (track: MediaStreamTrack, source: string) => {\n    await this.sdk.addTrack(track, source);\n    HMSLogger.d(this.TAG, 'Playlist track added', stringifyMediaStreamTrack(track));\n  };\n\n  private removeTrack = async (trackId: string) => {\n    await this.sdk.removeTrack(trackId, true);\n    HMSLogger.d(this.TAG, 'Playlist track removed', trackId);\n  };\n}\n","import { createSelector } from 'reselect';\nimport {\n  getScreenSharesByPeer,\n  isAudioPlaylist,\n  isDegraded,\n  isTrackDisplayEnabled,\n  isTrackEnabled,\n  isVideo,\n  isVideoPlaylist,\n} from './selectorUtils';\n// noinspection ES6PreferShortImport\nimport { HMSRole, HMSTranscriptionMode, HMSTranscriptionState, HMSWhiteboard } from '../internal';\nimport {\n  HMSException,\n  HMSMessage,\n  HMSPeer,\n  HMSPeerID,\n  HMSRoom,\n  HMSRoomState,\n  HMSStore,\n  HMSVideoTrack,\n} from '../schema';\n\n/**\n * Select the current {@link HMSRoom} object to which you are connected.\n * @param store\n */\nexport const selectRoom = (store: HMSStore): HMSRoom => store.room;\n/**\n * Select the current {@link HMSException[]} object to monitor the error logs\n * @param store\n */\nexport const selectErrors = (store: HMSStore): HMSException[] => store.errors;\n\n/**\n * It will help to get the all the error\n */\nexport const selectRecentError = createSelector(selectErrors, errors => (errors.length === 0 ? null : errors.at(-1)));\n/**\n * Select the ID of the current room to which you are connected.\n */\nexport const selectRoomID = createSelector(selectRoom, room => room.id);\n\n/**\n * @internal\n */\nexport const selectPeersMap = (store: HMSStore): Record<HMSPeerID, HMSPeer> => store.peers;\n\n/**\n * @internal\n */\nexport const selectMessagesMap = (store: HMSStore) => store.messages.byID;\n\n/**\n * Select IDs of messages you've sent or received sorted chronologically.\n */\nexport const selectMessageIDsInOrder = (store: HMSStore) => store.messages.allIDs;\n\n/**\n * @internal\n */\nexport const selectTracksMap = (store: HMSStore) => store.tracks;\n\n/**\n * Select your media settings\n * i.e., choosen audio input device, audio output device and video input device, audio mode\n * @param store\n */\nexport const selectLocalMediaSettings = (store: HMSStore) => store.settings;\n\n/**\n * select appData.\n * @internal\n */\nexport const selectFullAppData = (store: HMSStore) => store.appData;\n\n/**\n * Select the available audio input, audio output and video input devices on your machine.\n * @param store\n * @returns An object of array of available audio input, audio output and video input devices.\n * ```\n * type DeviceMap = {\n *   audioInput: InputDeviceInfo[];\n *   audioOutput: MediaDeviceInfo[];\n *   videoInput: InputDeviceInfo[];\n * }\n * ```\n */\nexport const selectDevices = (store: HMSStore) => {\n  return store.devices;\n};\n\nexport const selectSpeakers = (store: HMSStore) => {\n  return store.speakers;\n};\n\nexport const selectConnectionQualities = (store: HMSStore) => {\n  return store.connectionQualities;\n};\n\n/**\n * Select a boolean flag denoting whether you've joined a room.\n * NOTE: Returns true only after join, returns false during preview.\n */\nexport const selectIsConnectedToRoom = createSelector([selectRoom], room => room && room.isConnected);\n\n/**\n * selectPeerCount gives the number of peers Inside the room. This doesn't count the local peer if\n * they're still in preview and haven't yet joined the room. Note that this will not necessarily equal the\n * number of peers received through selectPeers, it's possible to know total number of people in the room\n * without having details of everyone depending on dashboard settings.\n */\nexport const selectPeerCount = createSelector([selectIsConnectedToRoom, selectRoom], (isConnected, room) => {\n  if (isConnected) {\n    // if we have peer count from server return that else return number of peers in the store.\n    // In case the strongly consistent peer list is disabled and only eventual consistent count and peer\n    // details is sent, room.peerCount may be 0 for a few second even though local peer is connected, send 1 in that case.\n    // TODO: Fix this at populating room.peerCount level than in selector.\n    return room.peerCount !== undefined ? room.peerCount || 1 : room.peers.length;\n  } else {\n    // if we have peer count from server return that, else return number of peers except the local one because local is\n    // not joined yet.\n    // Math.max to ensure we're not returning -1, if the selector is called before local peer is put in the store\n    return Math.max(room.peerCount !== undefined ? room.peerCount : room.peers.length - 1, 0);\n  }\n});\n\n/**\n * @internal\n * Select a boolean flag denoting whether to hide local peer.\n * When this is true, `selectPeers` skips local peer.\n */\nconst selectHideLocalPeer = (store: HMSStore): boolean => store.hideLocalPeer;\n\n/**\n * Select an array of peers(remote peers and your local peer) present in the room.\n */\nexport const selectPeers = createSelector(\n  [selectRoom, selectPeersMap, selectHideLocalPeer],\n  (room, storePeers, hideLocalPeer) => {\n    if (hideLocalPeer) {\n      return room.peers.filter(peerID => room.localPeer !== peerID).map(peerID => storePeers[peerID]);\n    }\n    return room.peers.map(peerID => storePeers[peerID]);\n  },\n);\n\n/**\n * Select an array of tracks(remote peer tracks and your local tracks) present in the room.\n */\nconst selectTracks = createSelector(selectTracksMap, storeTracks => {\n  return Object.values(storeTracks);\n});\n\n/**\n * Select the local peer object object assigned to you.\n */\nexport const selectLocalPeer = createSelector(selectRoom, selectPeersMap, (room, peers): HMSPeer | undefined => {\n  return peers[room.localPeer];\n});\n\n/**\n * Select the peer ID of your local peer.\n */\nexport const selectLocalPeerID = createSelector(selectRoom, room => {\n  return room.localPeer;\n});\n\n/**\n * Select the peer name of your local peer.\n */\nexport const selectLocalPeerName = createSelector(selectLocalPeer, peer => peer?.name);\n\n/**\n * Select the role name of your local peer.\n */\nexport const selectLocalPeerRoleName = createSelector(selectLocalPeer, peer => peer?.roleName);\n\n/**\n * Select the track ID of your local peer's primary audio track\n */\nexport const selectLocalAudioTrackID = createSelector(selectLocalPeer, peer => peer?.audioTrack);\n\n/**\n * Select the track ID of your local peer's primary video track\n */\nexport const selectLocalVideoTrackID = createSelector(selectLocalPeer, peer => peer?.videoTrack);\n\n/**\n * Select an array of track IDs of your local peer's auxiliary tracks\n */\nconst selectLocalAuxiliaryTrackIDs = createSelector(selectLocalPeer, peer => peer?.auxiliaryTracks);\n\n/**\n * Select an array of track IDs of all your local peer's tracks\n */\nexport const selectLocalTrackIDs = createSelector(\n  [selectLocalAudioTrackID, selectLocalVideoTrackID, selectLocalAuxiliaryTrackIDs],\n  (audioTrackID, videoTrackID, auxiliaryTrackIDs) => {\n    const trackIDs: string[] = auxiliaryTrackIDs ? [...auxiliaryTrackIDs] : [];\n    audioTrackID && trackIDs.unshift(audioTrackID);\n    videoTrackID && trackIDs.unshift(videoTrackID);\n    return trackIDs;\n  },\n);\n\n/**\n * Select remote peers(other users you're connected with via the internet) present in the room.\n */\nexport const selectRemotePeers = createSelector(selectPeers, peers => {\n  return peers.filter(p => !p.isLocal);\n});\n\n/**\n * Select the peer who's speaking the loudest at the moment\n */\nexport const selectDominantSpeaker = createSelector(selectPeersMap, selectSpeakers, (peersMap, speakers) => {\n  // sort in descending order by audio level\n  const speakersInOrder = Object.entries(speakers).sort((s1, s2) => {\n    const s1Level = s1[1]?.audioLevel || 0;\n    const s2Level = s2[1]?.audioLevel || 0;\n    return s2Level > s1Level ? 1 : -1;\n  });\n  if (speakersInOrder.length > 0 && speakersInOrder[0][1].audioLevel && speakersInOrder[0][1].audioLevel > 0) {\n    const peerID = speakersInOrder[0][1].peerID;\n    if (peerID in peersMap) {\n      return peersMap[peerID];\n    }\n  }\n  return null;\n});\n\n/**\n * Select a boolean denoting whether your local audio is unmuted\n * and the audio from your microphone is shared to remote peers\n */\nexport const selectIsLocalAudioEnabled = (store: HMSStore) => {\n  const localPeer = selectLocalPeer(store);\n  return isTrackEnabled(store, localPeer?.audioTrack);\n};\n\n/**\n * Select a boolean denoting whether your local video is unmuted\n * and the video from your camera is shared to remote peers\n */\nexport const selectIsLocalVideoEnabled = (store: HMSStore) => {\n  const localPeer = selectLocalPeer(store);\n  return isTrackEnabled(store, localPeer?.videoTrack);\n};\n\n/**\n * Select a boolean denoting whether you've chosen to unmute and share your local video.\n *\n * NOTE: Once you call `hmsActions.setLocalVideoEnabled(true)`to unmute your local video,\n * it takes some time to fetch your video from your video source.\n * This displayEnabled property gives immediate feedback for a more interactive UI,\n * without waiting for the video source\n */\nexport const selectIsLocalVideoDisplayEnabled = (store: HMSStore) => {\n  const localPeer = selectLocalPeer(store);\n  return isTrackDisplayEnabled(store, localPeer?.videoTrack);\n};\n\n/**\n * Select a boolean denoting whether your screen is shared to remote peers in the room.\n */\nexport const selectIsLocalScreenShared = createSelector(selectLocalPeer, selectTracksMap, (localPeer, tracksMap) => {\n  const { video, audio } = getScreenSharesByPeer(tracksMap, localPeer);\n  return !!(video || audio);\n});\n\n/**\n * Select the first peer who is currently sharing their screen.\n */\nexport const selectPeerScreenSharing = createSelector(selectPeersMap, selectTracksMap, (peersMap, tracksMap) => {\n  let screensharePeer = undefined;\n  for (const peerID in peersMap) {\n    const peer = peersMap[peerID];\n    const { video, audio } = getScreenSharesByPeer(tracksMap, peer);\n    if (video) {\n      return peer;\n    } else if (audio && !screensharePeer) {\n      screensharePeer = peer;\n    }\n  }\n  return screensharePeer;\n});\n\n/**\n * Select a boolean denoting whether someone is sharing screen in the room.\n */\nexport const selectIsSomeoneScreenSharing = createSelector(selectPeerScreenSharing, peer => {\n  return !!peer;\n});\n\n/**\n * Select the first peer who is currently sharing their audio only screen\n */\nexport const selectPeerSharingAudio = createSelector(selectPeersMap, selectTracksMap, (peersMap, tracksMap) => {\n  for (const peerID in peersMap) {\n    const peer = peersMap[peerID];\n    const { audio, video } = getScreenSharesByPeer(tracksMap, peer);\n    if (!video && !!audio) {\n      return peer;\n    }\n  }\n  return undefined;\n});\n\n/**\n * Select an array of peers who are currently sharing their screen.\n */\nexport const selectPeersScreenSharing = createSelector(selectPeersMap, selectTracksMap, (peersMap, tracksMap) => {\n  const videoPeers = [];\n  const audioPeers = [];\n  for (const peerID in peersMap) {\n    const peer = peersMap[peerID];\n    const { video, audio } = getScreenSharesByPeer(tracksMap, peer);\n    if (video) {\n      videoPeers.push(peer);\n    } else if (audio) {\n      audioPeers.push(peer);\n    }\n  }\n  return videoPeers.concat(audioPeers);\n});\n\nexport const selectPeerSharingVideoPlaylist = createSelector(selectPeersMap, selectTracksMap, (peersMap, tracksMap) => {\n  for (const trackId in tracksMap) {\n    const track = tracksMap[trackId];\n    if (isVideoPlaylist(track) && isVideo(track) && track.peerId) {\n      return peersMap[track.peerId];\n    }\n  }\n  return undefined;\n});\n\nexport const selectPeerSharingAudioPlaylist = createSelector(selectPeersMap, selectTracksMap, (peersMap, tracksMap) => {\n  for (const trackId in tracksMap) {\n    const track = tracksMap[trackId];\n    if (isAudioPlaylist(track) && track.peerId) {\n      return peersMap[track.peerId];\n    }\n  }\n  return undefined;\n});\n\n/**\n * Select an array of tracks that have been degraded(receiving lower video quality/no video) due to bad network locally.\n */\nexport const selectDegradedTracks = createSelector(selectTracks, tracks =>\n  (tracks as HMSVideoTrack[]).filter(isDegraded),\n);\n\n/**\n * Select the number of messages(sent and received).\n */\nexport const selectHMSMessagesCount = createSelector(selectMessageIDsInOrder, messageIDs => messageIDs.length);\n\n/**\n * Select the number of unread messages.\n */\nexport const selectUnreadHMSMessagesCount = createSelector(selectMessagesMap, messages => {\n  return Object.values(messages).filter(m => !m.read).length;\n});\n\n/**\n * Select an array of messages in the room(sent and received).\n */\nexport const selectHMSMessages = createSelector(selectMessageIDsInOrder, selectMessagesMap, (msgIDs, msgMap) => {\n  const messages: HMSMessage[] = [];\n  msgIDs.forEach(msgId => {\n    messages.push(msgMap[msgId]);\n  });\n  return messages;\n});\n\nexport const selectHMSBroadcastMessages = createSelector(selectHMSMessages, messages => {\n  return messages.filter(m => !m.recipientPeer && !(m.recipientRoles && m.recipientRoles?.length > 0));\n});\n/**\n * Select the number of unread broadcast messages\n */\nexport const selectUnreadHMSBroadcastMessagesCount = createSelector(selectHMSBroadcastMessages, messages => {\n  return messages.filter(m => !m.read).length;\n});\n/**\n * Select the current state of the room.\n */\nexport const selectRoomState = createSelector([selectRoom], room => room && room.roomState);\n\n/**\n * Select a boolean denoting whether the room is in Preview state.\n */\nexport const selectIsInPreview = createSelector(selectRoomState, roomState => roomState === HMSRoomState.Preview);\n\nexport const selectRoomStarted = createSelector(selectRoom, room => room.roomState !== HMSRoomState.Disconnected);\n\nexport const selectIsTranscriptionEnabled = createSelector(selectRoom, room => {\n  if (!room.transcriptions || room.transcriptions.length <= 0) {\n    return false;\n  }\n  return room.transcriptions.some(\n    transcription =>\n      transcription.mode === HMSTranscriptionMode.CAPTION && transcription.state === HMSTranscriptionState.STARTED,\n  );\n});\n\n/**\n * Select available roles in the room as a map between the role name and {@link HMSRole} object.\n */\nexport const selectRolesMap = (store: HMSStore): Record<string, HMSRole> => {\n  return store.roles;\n};\n\n/**\n * Select an array of names of available roles in the room.\n */\nexport const selectAvailableRoleNames = createSelector([selectRolesMap], rolesMap => Object.keys(rolesMap));\n\n/**\n * Select the {@link HMSRole} object of your local peer.\n */\nexport const selectLocalPeerRole = createSelector([selectLocalPeer, selectRolesMap], (localPeer, rolesMap) =>\n  localPeer?.roleName ? rolesMap[localPeer.roleName] : null,\n);\n\nexport const selectPreviewRoleName = (store: HMSStore) => store.preview?.asRole;\n\n/**\n * Select the {@link HMSRole} used for preview.\n *\n */\nexport const selectPreviewRole = createSelector([selectPreviewRoleName, selectRolesMap], (roleName, rolesMap) =>\n  roleName ? rolesMap[roleName] : null,\n);\n\n/**\n * Select a boolean denoting whether if your local peer is allowed to subscribe to any other role.\n */\nexport const selectIsAllowedToSubscribe = createSelector([selectLocalPeerRole], (role): boolean => {\n  if (!role?.subscribeParams?.subscribeToRoles) {\n    return false;\n  }\n  return role.subscribeParams.subscribeToRoles.length > 0;\n});\n\n/**\n * Select the permissions which determine what actions the local peer can do.\n */\nexport const selectPermissions = createSelector(selectLocalPeerRole, role => role?.permissions);\nexport const selectRecordingState = createSelector(selectRoom, room => room.recording);\nexport const selectRTMPState = createSelector(selectRoom, room => room.rtmp);\nexport const selectHLSState = createSelector(selectRoom, room => room.hls);\nexport const selectTranscriptionsState = createSelector(selectRoom, room => room.transcriptions);\nexport const selectSessionId = createSelector(selectRoom, room => room.sessionId);\nexport const selectRoomStartTime = createSelector(selectRoom, room => room.startedAt);\nexport const selectIsLargeRoom = createSelector(selectRoom, room => !!room.isLargeRoom);\nexport const selectIsEffectsEnabled = createSelector(selectRoom, room => !!room.isEffectsEnabled);\nexport const selectIsVBEnabled = createSelector(selectRoom, room => !!room.isVBEnabled);\nexport const selectEffectsKey = createSelector(selectRoom, room => room.effectsKey);\n\nexport const selectTemplateAppData = (store: HMSStore) => store.templateAppData;\n/** @deprecated - use `selectSessionStore` instead */\nexport const selectSessionMetadata = (store: HMSStore) => store.sessionMetadata;\nexport const selectPollsMap = (store: HMSStore) => store.polls;\nexport const selectPolls = (store: HMSStore) => {\n  return Object.values(store.polls);\n};\n\nexport const selectHandRaisedPeers = createSelector(selectPeers, peers => {\n  return peers.filter(peer => peer.isHandRaised);\n});\n\n/** select a map of all the whiteboards in the session */\nexport const selectWhiteboards = (store: HMSStore) => store.whiteboards;\n/** select the primary/first whiteboard of a session */\nexport const selectWhiteboard = createSelector(\n  selectWhiteboards,\n  whiteboards => Object.values(whiteboards)[0] as HMSWhiteboard | undefined,\n);\n","import { createSelector } from 'reselect';\nimport { HMSPlaylistSelector, HMSPlaylistType, HMSStore } from '../schema';\n\n/**\n * @internal\n */\nconst selectPlaylistMap =\n  (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  (store: HMSStore) =>\n    store.playlist[type].list;\n\nconst selectPlaylistSelection =\n  (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  (store: HMSStore) =>\n    store.playlist[type].selection;\n\nconst selectPlaylistProgress =\n  (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  (store: HMSStore) =>\n    store.playlist[type].progress;\n\nconst selectPlaylistCurrentTime =\n  (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  (store: HMSStore) =>\n    store.playlist[type].currentTime;\n\nconst selectPlaylistPlaybackRate =\n  (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  (store: HMSStore) =>\n    store.playlist[type].playbackRate;\n\nconst selectPlaylistVolume =\n  (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  (store: HMSStore) =>\n    store.playlist[type].volume;\n\n/**\n * Select an array of playlist items.\n */\nconst selectPlaylist = (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  createSelector(selectPlaylistMap(type), storePlaylist => {\n    return Object.values(storePlaylist);\n  });\n\nconst selectPlaylistSelectedItem = (type: HMSPlaylistType = HMSPlaylistType.audio) =>\n  createSelector(selectPlaylistMap(type), selectPlaylistSelection(type), (storePlaylist, currentSelection) => {\n    if (!currentSelection.id) {\n      return;\n    }\n    return storePlaylist[currentSelection.id];\n  });\n\nexport const selectAudioPlaylist: HMSPlaylistSelector = {\n  selection: selectPlaylistSelection(HMSPlaylistType.audio),\n  progress: selectPlaylistProgress(HMSPlaylistType.audio),\n  currentTime: selectPlaylistCurrentTime(HMSPlaylistType.audio),\n  playbackRate: selectPlaylistPlaybackRate(HMSPlaylistType.audio),\n  volume: selectPlaylistVolume(HMSPlaylistType.audio),\n  list: selectPlaylist(HMSPlaylistType.audio),\n  selectedItem: selectPlaylistSelectedItem(HMSPlaylistType.audio) as any,\n};\n\nexport const selectVideoPlaylist: HMSPlaylistSelector = {\n  selection: selectPlaylistSelection(HMSPlaylistType.video),\n  progress: selectPlaylistProgress(HMSPlaylistType.video),\n  currentTime: selectPlaylistCurrentTime(HMSPlaylistType.video),\n  playbackRate: selectPlaylistPlaybackRate(HMSPlaylistType.video),\n  volume: selectPlaylistVolume(HMSPlaylistType.video),\n  list: selectPlaylist(HMSPlaylistType.video),\n  selectedItem: selectPlaylistSelectedItem(HMSPlaylistType.video) as any,\n};\n","import { HMSStatsStore, HMSStore } from '../schema';\n\nexport type StoreTypes = HMSStore | HMSStatsStore;\n\ntype byIDSelector<S extends StoreTypes, T> = (store: S, id?: string) => T;\n\n/**\n * StoreSelector is a function that takes in {@link HMSStore} as argument\n * and returns a part of the store that is queried using the selector.\n * @typeParam T Part of the store that you wish to query.\n */\nexport type StoreSelector<S extends StoreTypes, T> = (store: S) => T;\n\n/**\n * takes in a normal selector which has store and id as input and curries it to make it easier to use.\n * Before: store.getState((store) => normalSelector(store, peerID))\n * After: store.getState(curriedSelector(peerID))\n */\nexport function byIDCurry<S extends StoreTypes, T>(selector: byIDSelector<S, T>): (id?: string) => StoreSelector<S, T> {\n  return (id?: string) => {\n    return (store: S) => selector(store, id);\n  };\n}\n","import { HMSLogLevel } from '../internal';\n\nconst HMS_STORE_TAG = 'HMS-Store:';\n\nexport class HMSLogger {\n  static level: HMSLogLevel = HMSLogLevel.VERBOSE;\n\n  static v(tag: string, ...data: any[]) {\n    this.log(HMSLogLevel.VERBOSE, tag, ...data);\n  }\n\n  static d(...data: any[]) {\n    this.log(HMSLogLevel.DEBUG, ...data);\n  }\n\n  static i(...data: any[]) {\n    this.log(HMSLogLevel.INFO, ...data);\n  }\n\n  static w(...data: any[]) {\n    this.log(HMSLogLevel.WARN, ...data);\n  }\n\n  static e(...data: any[]) {\n    this.log(HMSLogLevel.ERROR, ...data);\n  }\n\n  static time(mark: string) {\n    this.log(HMSLogLevel.TIME, '[HMSPerformanceTiming]', mark);\n  }\n\n  static timeEnd(mark: string) {\n    this.log(HMSLogLevel.TIMEEND, '[HMSPerformanceTiming]', mark, mark);\n  }\n\n  static cleanup() {\n    performance.clearMarks();\n    performance.clearMeasures();\n  }\n\n  /* eslint-disable */\n  private static log(level: HMSLogLevel, ...data: any[]) {\n    if (this.level.valueOf() > level.valueOf()) {\n      return;\n    }\n\n    switch (level) {\n      case HMSLogLevel.VERBOSE: {\n        console.log(HMS_STORE_TAG, ...data);\n        break;\n      }\n      case HMSLogLevel.DEBUG: {\n        console.debug(HMS_STORE_TAG, ...data);\n        break;\n      }\n      case HMSLogLevel.INFO: {\n        console.info(HMS_STORE_TAG, ...data);\n        break;\n      }\n      case HMSLogLevel.WARN: {\n        console.warn(HMS_STORE_TAG, ...data);\n        break;\n      }\n      case HMSLogLevel.ERROR: {\n        console.error(HMS_STORE_TAG, ...data);\n        break;\n      }\n      case HMSLogLevel.TIME: {\n        performance.mark(data[1]);\n        break;\n      }\n      case HMSLogLevel.TIMEEND: {\n        const tag = data[0];\n        const mark = data[1];\n        try {\n          const entry = performance.measure(mark, mark);\n          //@ts-ignore\n          this.log(HMSLogLevel.DEBUG, tag, mark, entry?.duration);\n          performance.clearMarks(mark);\n          performance.clearMeasures(mark);\n        } catch (error) {\n          this.log(HMSLogLevel.DEBUG, tag, mark, error);\n        }\n        break;\n      }\n    }\n  }\n}\n","import { createSelector } from 'reselect';\nimport { byIDCurry } from './common';\nimport {\n  selectFullAppData,\n  selectHMSMessages,\n  selectLocalPeerID,\n  selectLocalPeerRole,\n  selectMessagesMap,\n  selectPeers,\n  selectPeersMap,\n  selectPollsMap,\n  selectTracksMap,\n} from './selectors';\nimport {\n  getScreenSharesByPeer,\n  isAudio,\n  isAudioPlaylist,\n  isTrackEnabled,\n  isVideo,\n  isVideoPlaylist,\n} from './selectorUtils';\nimport { HMSLogger } from '../common/ui-logger';\nimport { HMSTranscriptionMode } from '../internal';\nimport {\n  HMSAudioTrack,\n  HMSGenericTypes,\n  HMSPeer,\n  HMSPeerID,\n  HMSRoleName,\n  HMSScreenVideoTrack,\n  HMSStore,\n  HMSTrack,\n  HMSTrackID,\n  HMSVideoTrack,\n} from '../schema';\n\nconst selectPeerID = (_store: HMSStore, peerID: HMSPeerID | undefined) => peerID;\nconst selectTrackID = (_store: HMSStore, trackID: HMSTrackID | undefined) => trackID;\nconst selectRoleName = (_store: HMSStore, roleName: HMSRoleName | undefined) => roleName;\nconst selectAppDataKey = (_store: HMSStore, key: string | undefined) => key;\nconst selectPollID = (_store: HMSStore, pollID: string | undefined) => pollID;\n\nconst selectPeerByIDBare = createSelector([selectPeersMap, selectPeerID], (storePeers, peerID) =>\n  peerID ? storePeers[peerID] : null,\n);\n\nconst selectTrackByIDBare = createSelector([selectTracksMap, selectTrackID], (storeTracks, trackID) =>\n  trackID ? storeTracks[trackID] : null,\n);\n\nconst selectVideoTrackByIDBare = createSelector([selectTracksMap, selectTrackID], (storeTracks, trackID) => {\n  if (!trackID) {\n    return null;\n  }\n  const track = storeTracks[trackID] as HMSVideoTrack | undefined;\n  if (track?.type === 'video') {\n    return track;\n  }\n  return null;\n});\n\nconst selectAudioTrackByIDBare = createSelector([selectTracksMap, selectTrackID], (storeTracks, trackID) => {\n  if (!trackID) {\n    return null;\n  }\n  const track = storeTracks[trackID] as HMSAudioTrack | undefined;\n  if (track?.type === 'audio') {\n    return track;\n  }\n  return null;\n});\n\nconst selectScreenAudioTrackByIDBare = createSelector([selectTracksMap, selectTrackID], (storeTracks, trackID) => {\n  if (!trackID) {\n    return null;\n  }\n  const track = storeTracks[trackID] as HMSAudioTrack | undefined;\n  if (track?.type === 'audio' && track?.source === 'screen') {\n    return track;\n  }\n  return null;\n});\nconst selectScreenVideoTrackByIDBare = createSelector([selectTracksMap, selectTrackID], (storeTracks, trackID) => {\n  if (!trackID) {\n    return null;\n  }\n  const track = storeTracks[trackID] as HMSScreenVideoTrack | undefined;\n  if (track?.type === 'video' && track?.source === 'screen') {\n    return track;\n  }\n  return null;\n});\n\nconst selectPollByIDBare = createSelector([selectPollsMap, selectPollID], (storePolls, pollID) =>\n  pollID ? storePolls[pollID] : null,\n);\n\n/**\n * Select the {@link HMSPeer} object given a peer ID.\n */\nexport const selectPeerByID = byIDCurry(selectPeerByIDBare);\n\n/**\n * Select a particular key from ui app data by passed in key.\n * if key is not passed, full data is returned.\n */\nexport const selectAppData = byIDCurry(\n  createSelector([selectFullAppData, selectAppDataKey], (appData, key) => {\n    if (!appData) {\n      return undefined;\n    }\n    if (key) {\n      return appData[key];\n    }\n    return appData;\n  }),\n);\n\n/**\n * Select a particular key from session store by passed in key.\n * if key is not passed, full data is returned.\n */\nexport function selectSessionStore<T extends HMSGenericTypes = { sessionStore: Record<string, any> }>(): (\n  store: HMSStore<T>,\n) => T['sessionStore'] | undefined;\nexport function selectSessionStore<\n  T extends HMSGenericTypes = { sessionStore: Record<string, any> },\n  K extends keyof T['sessionStore'] = keyof T['sessionStore'],\n>(key: K): (store: HMSStore<T>) => T['sessionStore'][K] | undefined;\nexport function selectSessionStore<\n  T extends HMSGenericTypes = { sessionStore: Record<string, any> },\n  K extends keyof T['sessionStore'] = keyof T['sessionStore'],\n>(key?: K) {\n  return (store: HMSStore<T>) => {\n    if (!store.sessionStore) {\n      return undefined;\n    }\n    if (key) {\n      return store.sessionStore[key];\n    }\n    return store.sessionStore;\n  };\n}\n\nexport const selectAppDataByPath = (...keys: string[]) =>\n  createSelector([selectFullAppData], appData => {\n    if (!appData) {\n      return undefined;\n    }\n    if (keys && keys.length > 0) {\n      let value = appData;\n      for (const key of keys) {\n        if (!key) {\n          return value;\n        }\n        value = value?.[key];\n      }\n      return value;\n    }\n    return appData;\n  });\n\n/**\n * Select the name of a {@link HMSPeer} given a peer ID.\n */\nexport const selectPeerNameByID = byIDCurry(createSelector(selectPeerByIDBare, peer => peer?.name));\n\nexport const selectPeerTypeByID = byIDCurry(createSelector(selectPeerByIDBare, peer => peer?.type));\n\n/**\n * Select the {@link HMSTrack} object given a track ID.\n */\nexport const selectTrackByID = byIDCurry(selectTrackByIDBare);\n\n/**\n * Select the {@link HMSVideoTrack} object given a track ID.\n */\nexport const selectVideoTrackByID = byIDCurry(selectVideoTrackByIDBare);\n\n/**\n * Select the {@link HMSAudioTrack} object given a track ID.\n */\nexport const selectAudioTrackByID = byIDCurry(selectAudioTrackByIDBare);\n\n/**\n * Select the {@link HMSScreenAudioTrack} object given a track ID.\n */\nexport const selectScreenAudioTrackByID = byIDCurry(selectScreenAudioTrackByIDBare);\n\n/**\n * Select the {@link HMSScreenVideoTrack} object given a track ID.\n */\nexport const selectScreenVideoTrackByID = byIDCurry(selectScreenVideoTrackByIDBare);\n\n/**\n * Select the primary video track of a peer given a peer ID.\n */\nexport const selectVideoTrackByPeerID = byIDCurry((store: HMSStore, peerID?: HMSPeerID): HMSVideoTrack | undefined => {\n  const peer = selectPeerByIDBare(store, peerID);\n  if (peer && peer.videoTrack && peer.videoTrack !== '') {\n    return store.tracks[peer.videoTrack] as HMSVideoTrack;\n  }\n  return undefined;\n});\n\n/**\n * Select the primary audio track of a peer given a peer ID.\n */\nexport const selectAudioTrackByPeerID = byIDCurry((store: HMSStore, peerID?: HMSPeerID): HMSAudioTrack | undefined => {\n  const peer = selectPeerByIDBare(store, peerID);\n  if (peer && peer.audioTrack && peer.audioTrack !== '') {\n    return store.tracks[peer.audioTrack] as HMSAudioTrack;\n  }\n  return undefined;\n});\n\n/**\n * Select the camera stream of a peer given a peer ID.\n * This is the primary video track of a peer.\n */\nexport const selectCameraStreamByPeerID = selectVideoTrackByPeerID;\n\n/**\n * Select an array of auxiliary tracks of a peer given a peer ID.\n */\nexport const selectAuxiliaryTracksByPeerID = byIDCurry((store: HMSStore, peerID?: HMSPeerID): HMSTrack[] => {\n  const peer = selectPeerByIDBare(store, peerID);\n  return peer?.auxiliaryTracks.map(trackID => store.tracks[trackID]) || [];\n});\n\nconst selectSpeakerByTrackID = (store: HMSStore, trackID: HMSTrackID | undefined) => {\n  return trackID ? store.speakers[trackID] : null;\n};\n\n/**\n * Select the audio level of a track given a track ID.\n */\nexport const selectTrackAudioByID = byIDCurry(\n  createSelector(selectSpeakerByTrackID, speaker => speaker?.audioLevel || 0),\n);\n\n/**\n * Select speaker object of audioTrack of a peer given a peer ID.\n */\nconst selectSpeakerByPeerID = (store: HMSStore, peerID: HMSPeerID | undefined) => {\n  const peerAudioTrack = selectAudioTrackByPeerID(peerID)(store);\n  return selectSpeakerByTrackID(store, peerAudioTrack?.id);\n};\n\n/**\n * Select audio level of audioTrack of a peer given a peer IDß.\n */\nexport const selectPeerAudioByID = byIDCurry(\n  createSelector(selectSpeakerByPeerID, speaker => speaker?.audioLevel || 0),\n);\n\nexport const selectConnectionQualityByPeerID = byIDCurry((store: HMSStore, peerID: HMSPeerID | undefined) => {\n  if (peerID) {\n    return store.connectionQualities[peerID];\n  }\n  return undefined;\n});\n\n/**\n * Select the first auxiliary audio track of a peer given a peer ID.\n */\nexport const selectAuxiliaryAudioByPeerID = byIDCurry((store: HMSStore, peerID?: HMSPeerID) => {\n  const peer = selectPeerByIDBare(store, peerID);\n  if (peer) {\n    const trackID = peer?.auxiliaryTracks.find(trackID => isAudio(store.tracks[trackID]));\n    return trackID ? (store.tracks[trackID] as HMSAudioTrack) : undefined;\n  }\n  return undefined;\n});\n\nexport const selectVideoPlaylistVideoTrackByPeerID = byIDCurry(\n  createSelector(selectTracksMap, selectPeerByIDBare, (tracks, peer) => {\n    const trackID = peer?.auxiliaryTracks.find(trackID => {\n      const track = tracks[trackID];\n      return isVideoPlaylist(track) && isVideo(track);\n    });\n    return trackID ? (tracks[trackID] as HMSVideoTrack) : undefined;\n  }),\n);\n\nexport const selectVideoPlaylistAudioTrackByPeerID = byIDCurry(\n  createSelector(selectTracksMap, selectPeerByIDBare, (tracks, peer) => {\n    const trackID = peer?.auxiliaryTracks.find(trackID => {\n      const track = tracks[trackID];\n      return isVideoPlaylist(track) && isAudio(track);\n    });\n    return trackID ? (tracks[trackID] as HMSAudioTrack) : undefined;\n  }),\n);\n\nexport const selectAudioPlaylistTrackByPeerID = byIDCurry(\n  createSelector(selectTracksMap, selectPeerByIDBare, (tracks, peer) => {\n    const trackID = peer?.auxiliaryTracks.find(trackID => {\n      const track = tracks[trackID];\n      return isAudioPlaylist(track) && isAudio(track);\n    });\n    return trackID ? (tracks[trackID] as HMSAudioTrack) : undefined;\n  }),\n);\n\nexport const selectScreenSharesByPeerId = byIDCurry(\n  createSelector(selectTracksMap, selectPeerByIDBare, (tracks, peer) => {\n    return getScreenSharesByPeer(tracks, peer);\n  }),\n);\n\n/**\n * Select the screen share video track of a peer given a peer ID.\n */\nexport const selectScreenShareByPeerID = (id?: string) =>\n  createSelector(selectScreenSharesByPeerId(id), screenshare => {\n    return screenshare.video;\n  });\n\n/**\n * Select the screen share audio track of a peer given a peer ID.\n */\nexport const selectScreenShareAudioByPeerID = (id?: string) =>\n  createSelector(selectScreenSharesByPeerId(id), screenshare => {\n    return screenshare.audio;\n  });\n\n/**\n * Select a boolean denoting whether a peer has unmuted audio and sharing it to other peers.\n */\nexport const selectIsPeerAudioEnabled = byIDCurry((store: HMSStore, peerID?: string) => {\n  const peer = selectPeerByIDBare(store, peerID);\n  return isTrackEnabled(store, peer?.audioTrack);\n});\n\n/**\n * Select a boolean denoting whether a peer has unmuted video and sharing it to other peers.\n */\nexport const selectIsPeerVideoEnabled = byIDCurry((store: HMSStore, peerID?: string) => {\n  const peer = selectPeerByIDBare(store, peerID);\n  return isTrackEnabled(store, peer?.videoTrack);\n});\n\n/**\n * Select a boolean denoting whether you've muted an audio track locally(only for you) given a track ID.\n */\nexport const selectIsAudioLocallyMuted = byIDCurry((store: HMSStore, trackID?: string) => {\n  if (trackID && store.tracks[trackID]) {\n    return (store.tracks[trackID] as HMSAudioTrack).volume === 0;\n  }\n  return undefined;\n});\n\n/**\n * Select a boolean denoting whether you've muted the primary audio track of a peer locally(only for you) given a peer ID.\n */\nexport const selectIsLocallyMutedByPeerID = byIDCurry((store: HMSStore, peerID?: string) => {\n  const peer = selectPeerByIDBare(store, peerID);\n  return selectIsAudioLocallyMuted(peer?.audioTrack)(store);\n});\n\n/**\n * Select a boolean denoting whether you've muted the screen share audio track of a peer locally(only for you) given a peer ID.\n */\nexport const selectIsScreenShareLocallyMutedByPeerID = byIDCurry((store: HMSStore, peerID?: string) => {\n  const track = selectScreenShareAudioByPeerID(peerID)(store);\n  return selectIsAudioLocallyMuted(track?.id)(store);\n});\n\n/**\n * Select the local audio volume of an audio track given a track ID.\n *\n * NOTE: **Volume** of a track is different from **Audio Level** of a track,\n * - Audio Level measures the audio of a track and it comes from 100ms's servers.\n * - Volume is how loud you hear the audio of a track, this is controlled by you at the client side.\n */\nexport const selectAudioTrackVolume = byIDCurry((store: HMSStore, trackID?: string) => {\n  const track = selectTrackByIDBare(store, trackID);\n  if (track) {\n    if (track.type !== 'audio') {\n      HMSLogger.w('Please pass audio track here');\n      return undefined;\n    }\n    return track.volume;\n  }\n  return undefined;\n});\n\n/**\n * Select the local audio volume of the primary audio track of a peer given a peer ID.\n */\nexport const selectAudioVolumeByPeerID = byIDCurry((store: HMSStore, peerID?: string) => {\n  const peer = selectPeerByIDBare(store, peerID);\n  return selectAudioTrackVolume(peer?.audioTrack)(store);\n});\n\n/**\n * Select the local audio volume of the screen share of a peer given a peer ID.\n */\nexport const selectScreenshareAudioVolumeByPeerID = byIDCurry((store: HMSStore, peerID?: string) => {\n  const track = selectScreenShareAudioByPeerID(peerID)(store);\n  return selectAudioTrackVolume(track?.id)(store);\n});\n\n/**\n * Select the current simulcast layer of a track given a track ID.\n */\nexport const selectSimulcastLayerByTrack = byIDCurry((store: HMSStore, trackID?: string) => {\n  const track = selectTrackByIDBare(store, trackID);\n  if (track) {\n    if (track.type !== 'video') {\n      HMSLogger.w('Please pass video track here');\n      return undefined;\n    }\n    return track.layer;\n  }\n  return undefined;\n});\n\nconst selectMessagesByPeerIDInternal = createSelector(\n  [selectHMSMessages, selectLocalPeerID, selectPeerID],\n  (messages, localPeerID, peerID) => {\n    if (!peerID) {\n      return undefined;\n    }\n    return messages.filter(message => {\n      // Broadcast message\n      if (!message.recipientPeer && !message.recipientRoles?.length) {\n        return false;\n      }\n      // if localPeer or peerID is not a sender remove this\n      if (message.sender && ![localPeerID, peerID].includes(message.sender)) {\n        return false;\n      }\n      // at this point we know the sender is one of local or passed in peer, check the recipient side\n      return [localPeerID, peerID].includes(message.recipientPeer!);\n    });\n  },\n);\n\nconst selectMessagesByRoleInternal = createSelector([selectHMSMessages, selectRoleName], (messages, roleName) => {\n  if (!roleName) {\n    return undefined;\n  }\n  return messages.filter(message => {\n    // Not Role message - Broadcast message or Private Peer message\n    if (!message.recipientRoles?.length) {\n      return false;\n    }\n    return message.recipientRoles?.includes(roleName);\n  });\n});\n\nexport const selectBroadcastMessages = createSelector(selectHMSMessages, messages => {\n  return messages.filter(message => {\n    return !message.recipientPeer && !message.recipientRoles?.length;\n  });\n});\n\nconst selectUnreadMessageCountByRole = createSelector([selectMessagesByRoleInternal, selectRoleName], messages => {\n  if (!messages) {\n    return 0;\n  }\n  return messages.filter(m => !m.read).length;\n});\n\nconst selectUnreadMessageCountByPeerID = createSelector([selectMessagesByPeerIDInternal, selectPeerID], messages => {\n  if (!messages) {\n    return 0;\n  }\n  return messages.filter(m => !m.read).length;\n});\n\nexport const selectBroadcastMessagesUnreadCount = createSelector(selectBroadcastMessages, messages => {\n  return messages.filter(m => !m.read).length;\n});\n\nexport const selectMessagesByPeerID = byIDCurry(selectMessagesByPeerIDInternal);\n\nexport const selectMessagesByRole = byIDCurry(selectMessagesByRoleInternal);\n\nexport const selectMessagesUnreadCountByRole = byIDCurry(selectUnreadMessageCountByRole);\nexport const selectMessagesUnreadCountByPeerID = byIDCurry(selectUnreadMessageCountByPeerID);\n\n/**\n * Select an array of peers of a particular role\n * @param role HMSRoleName\n * @returns HMSPeer[]\n */\nexport const selectPeersByRole = (role: HMSRoleName) =>\n  createSelector([selectPeers], peers => {\n    return peers.filter(p => p.roleName === role);\n  });\n\n/**\n * Select an array of peers of a particular role\n * @param roles HMSRoleName[]\n * @returns HMSPeer[]\n */\nexport const selectPeersByRoles = (roles: HMSRoleName[]) =>\n  createSelector([selectPeers], (peers: HMSPeer[]) => {\n    return peers.filter((peer: HMSPeer) => {\n      return peer.roleName ? roles.includes(peer.roleName) : false;\n    });\n  });\n/**\n * Selects the peer metadata for the passed in peer and returns it as JSON. If metadata is not present\n * or conversion to JSON gives an error, an empty object is returned.\n * Please directly use peer.metadata in case the metadata is not JSON by design.\n */\nexport const selectPeerMetadata = (peerId: HMSPeerID) =>\n  createSelector(selectPeerByID(peerId), peer => {\n    try {\n      return peer?.metadata && peer.metadata !== '' ? JSON.parse(peer.metadata) : {};\n    } catch (error) {\n      console.error('cannot parse peer metadata', error);\n      return {};\n    }\n  });\n\nexport const selectHasPeerHandRaised = (peerId: HMSPeerID) =>\n  createSelector(selectPeerByID(peerId), peer => {\n    return !!peer?.isHandRaised;\n  });\n\nexport const selectPeerName = (peerId: HMSPeerID) => createSelector(selectPeerByID(peerId), peer => peer?.name);\n\nexport const selectPollByID = byIDCurry(selectPollByIDBare);\n\nexport const selectMessageByMessageID = (id: string) =>\n  createSelector(selectMessagesMap, messages => {\n    return messages[id];\n  });\n\nexport const selectIsTranscriptionAllowedByMode = (mode: HMSTranscriptionMode) =>\n  createSelector(selectLocalPeerRole, role => {\n    if (!role?.permissions.transcriptions) {\n      return false;\n    }\n    // only one admin permission\n    return role.permissions.transcriptions[mode].length > 0;\n  });\n","import { createSelector } from 'reselect';\nimport { selectLocalPeerRole, selectPeersMap, selectPreviewRole, selectRolesMap, selectTracksMap } from './selectors';\nimport { isRoleAllowedToPublish } from './selectorUtils';\nimport { HMSRole } from '../internal';\nimport { HMSPeer, HMSStore } from '../schema';\n\nexport interface HMSPeerWithMuteStatus {\n  peer: HMSPeer;\n  isAudioEnabled?: boolean;\n}\n\n/**\n * @privateRemarks\n * this is more friendly to UI format, the object in store has only peer id and role name instead of the full objects\n */\nexport interface HMSRoleChangeRequest {\n  requestedBy?: HMSPeer;\n  role: HMSRole;\n  token: string;\n}\n\nexport const selectPeersWithAudioStatus = createSelector([selectPeersMap, selectTracksMap], (peersMap, tracksMap) => {\n  const participants: HMSPeerWithMuteStatus[] = Object.values(peersMap).map(peer => {\n    return {\n      peer: peer,\n      isAudioEnabled: peer.audioTrack ? tracksMap[peer.audioTrack]?.enabled : false,\n    };\n  });\n  return participants;\n});\n\nconst selectRoleChangeStoreRequest = (store: HMSStore) => {\n  return store.roleChangeRequests[0] || null;\n};\n\n/**\n * Select the role change request received for your local peer.\n */\nexport const selectRoleChangeRequest = createSelector(\n  [selectRoleChangeStoreRequest, selectPeersMap, selectRolesMap],\n  (request, peersMap, rolesMap): HMSRoleChangeRequest | null => {\n    if (!request) {\n      return null;\n    }\n    return {\n      requestedBy: request.requestedBy ? peersMap[request.requestedBy] : undefined,\n      role: rolesMap[request.roleName],\n      token: request.token,\n    };\n  },\n);\n\n/**\n * Select what streams is the local peer allowed to publish from video, audio and screenshare.\n */\nexport const selectIsAllowedToPublish = createSelector([selectLocalPeerRole], role => isRoleAllowedToPublish(role));\n\n/**\n * Select what streams is the local peer allowed to preview from video, audio\n */\nexport const selectIsAllowedToPreviewMedia = createSelector([selectPreviewRole], role => isRoleAllowedToPublish(role));\n","import * as sdkTypes from '../../internal';\nimport { HMSNotificationTypes } from '../../schema/notification';\n\ntype PeerNotificationMap = { [key in sdkTypes.HMSPeerUpdate]?: HMSNotificationTypes };\n\nexport const PEER_NOTIFICATION_TYPES: PeerNotificationMap = {\n  [sdkTypes.HMSPeerUpdate.PEER_JOINED]: HMSNotificationTypes.PEER_JOINED,\n  [sdkTypes.HMSPeerUpdate.PEER_LEFT]: HMSNotificationTypes.PEER_LEFT,\n  [sdkTypes.HMSPeerUpdate.ROLE_UPDATED]: HMSNotificationTypes.ROLE_UPDATED,\n  [sdkTypes.HMSPeerUpdate.NAME_UPDATED]: HMSNotificationTypes.NAME_UPDATED,\n  [sdkTypes.HMSPeerUpdate.METADATA_UPDATED]: HMSNotificationTypes.METADATA_UPDATED,\n  [sdkTypes.HMSPeerUpdate.HAND_RAISE_CHANGED]: HMSNotificationTypes.HAND_RAISE_CHANGED,\n};\n\ntype TrackNotificationMap = { [key in sdkTypes.HMSTrackUpdate]: HMSNotificationTypes };\nexport const TRACK_NOTIFICATION_TYPES: TrackNotificationMap = {\n  [sdkTypes.HMSTrackUpdate.TRACK_ADDED]: HMSNotificationTypes.TRACK_ADDED,\n  [sdkTypes.HMSTrackUpdate.TRACK_REMOVED]: HMSNotificationTypes.TRACK_REMOVED,\n  [sdkTypes.HMSTrackUpdate.TRACK_MUTED]: HMSNotificationTypes.TRACK_MUTED,\n  [sdkTypes.HMSTrackUpdate.TRACK_UNMUTED]: HMSNotificationTypes.TRACK_UNMUTED,\n  [sdkTypes.HMSTrackUpdate.TRACK_DEGRADED]: HMSNotificationTypes.TRACK_DEGRADED,\n  [sdkTypes.HMSTrackUpdate.TRACK_RESTORED]: HMSNotificationTypes.TRACK_RESTORED,\n  [sdkTypes.HMSTrackUpdate.TRACK_DESCRIPTION_CHANGED]: HMSNotificationTypes.TRACK_DESCRIPTION_CHANGED,\n};\n\ntype PollNotificationMap = { [key in sdkTypes.HMSPollsUpdate]: HMSNotificationTypes };\n\nexport const POLL_NOTIFICATION_TYPES: PollNotificationMap = {\n  [sdkTypes.HMSPollsUpdate.POLL_CREATED]: HMSNotificationTypes.POLL_CREATED,\n  [sdkTypes.HMSPollsUpdate.POLL_STARTED]: HMSNotificationTypes.POLL_STARTED,\n  [sdkTypes.HMSPollsUpdate.POLL_STOPPED]: HMSNotificationTypes.POLL_STOPPED,\n  [sdkTypes.HMSPollsUpdate.POLL_STATS_UPDATED]: HMSNotificationTypes.POLL_VOTES_UPDATED,\n  [sdkTypes.HMSPollsUpdate.POLLS_LIST]: HMSNotificationTypes.POLLS_LIST,\n};\n\ntype TranscriptionNotificationMap = {\n  [key in sdkTypes.HMSRoomUpdate.TRANSCRIPTION_STATE_UPDATED]: HMSNotificationTypes;\n};\n\nexport const TRANSCRIPTION_NOTIFICATION_TYPES: TranscriptionNotificationMap = {\n  [sdkTypes.HMSRoomUpdate.TRANSCRIPTION_STATE_UPDATED]: HMSNotificationTypes.TRANSCRIPTION_STATE_UPDATED,\n};\n","import { createSelector } from 'reselect';\nimport {\n  selectLocalAudioTrackID,\n  selectLocalVideoTrackID,\n  selectPeers,\n  selectRolesMap,\n  selectRoom,\n  selectTracksMap,\n} from './selectors';\nimport { isRoleAllowedToPublish } from './selectorUtils';\nimport { HMSPeer, HMSTrack } from '../schema';\n\nexport const selectRoleByRoleName = (roleName: string) =>\n  createSelector([selectRolesMap], rolesMap => rolesMap[roleName]);\n\nexport const selectIsRoleAllowedToPublish = (roleName: string) => {\n  return createSelector(selectRoleByRoleName(roleName), role => isRoleAllowedToPublish(role));\n};\n\nconst selectLocalVideoPlugins = createSelector([selectLocalVideoTrackID, selectTracksMap], (trackID, tracksMap) => {\n  let track: HMSTrack | null = null;\n  if (trackID) {\n    track = tracksMap[trackID];\n  }\n  return track?.plugins || [];\n});\n\nconst selectLocalAudioPlugins = createSelector([selectLocalAudioTrackID, selectTracksMap], (trackID, tracksMap) => {\n  let track: HMSTrack | null = null;\n  if (trackID) {\n    track = tracksMap[trackID];\n  }\n  return track?.plugins || [];\n});\n\nexport const selectIsLocalVideoPluginPresent = (pluginName: string) => {\n  return createSelector([selectLocalVideoPlugins], plugins => {\n    return plugins.includes(pluginName);\n  });\n};\n\nexport const selectIsLocalAudioPluginPresent = (pluginName: string) => {\n  return createSelector([selectLocalAudioPlugins], plugins => {\n    return plugins.includes(pluginName);\n  });\n};\n\n/**\n * Selects the first peer passing the condition given by the argument predicate function\n *\n * Ex: to select a peer whose metadata has spotlight set to true(assuming peer.metadata is a valid json string), use\n * ```js\n * const spotlightPeer = useHMSStore(selectPeerByCondition(peer => JSON.parse(peer.metadata).spotlight))\n * ```\n */\nexport const selectPeerByCondition = (predicate: (peer: HMSPeer) => boolean) =>\n  createSelector(selectPeers, peers => {\n    return peers.find(predicate);\n  });\n\n/**\n * Selects all peers passing the condition given by the argument predicate function\n *\n * Ex: to select peers with isHandRaised set to true in their metadata(assuming peer.metadata is a valid json string), use\n * ```js\n * const handRaisedPeers = useHMSStore(selectPeersByCondition(peer => JSON.parse(peer.metadata).isHandRaised))\n * ```\n */\nexport const selectPeersByCondition = (predicate: (peer: HMSPeer) => boolean) =>\n  createSelector(selectPeers, peers => {\n    return peers.filter(predicate);\n  });\n\n/**\n * Returns a boolean to indicate if the local peer joined within the past `timeMs` milliseconds.\n *\n * Ex: to know if the local peer joined within the last one second\n * ```js\n * const joinedWithinASecond = useHMSStore(selectDidIJoinWithin(1000));\n * ```\n */\nexport const selectDidIJoinWithin = (timeMs: number) =>\n  createSelector(selectRoom, room => room.joinedAt && Date.now() - room.joinedAt.getTime() <= timeMs);\n","import { EventEmitter2 as EventEmitter } from 'eventemitter2';\nimport {\n  PEER_NOTIFICATION_TYPES,\n  POLL_NOTIFICATION_TYPES,\n  TRACK_NOTIFICATION_TYPES,\n  TRANSCRIPTION_NOTIFICATION_TYPES,\n} from './common/mapping';\nimport { IHMSStore } from '../IHMSStore';\nimport * as sdkTypes from '../internal';\nimport {\n  HMSChangeMultiTrackStateRequest,\n  HMSChangeTrackStateRequest,\n  HMSDeviceChangeEvent,\n  HMSException,\n  HMSGenericTypes,\n  HMSLeaveRoomRequest,\n  HMSMessage,\n  HMSNotification,\n  HMSNotificationSeverity,\n  HMSNotificationTypes,\n  HMSPeer,\n  HMSPlaylistItem,\n  HMSTrack,\n  HMSTrackID,\n} from '../schema';\nimport {\n  HMSNotificationCallback,\n  HMSNotificationInCallback,\n  HMSNotificationTypeParam,\n  IHMSNotifications,\n} from '../schema/notification';\nimport { selectPeerByID, selectPollByID, selectTrackByID } from '../selectors';\n\nconst HMS_NOTIFICATION_EVENT = 'hmsNotification';\n\nexport class HMSNotifications<T extends HMSGenericTypes = { sessionStore: Record<string, any> }>\n  implements IHMSNotifications\n{\n  private id = 0;\n  private eventEmitter: EventEmitter;\n  private store: IHMSStore<T>;\n\n  constructor(store: IHMSStore<T>) {\n    this.store = store;\n    this.eventEmitter = new EventEmitter({ maxListeners: Object.keys(HMSNotificationTypes).length });\n  }\n  onNotification = <T extends HMSNotificationTypeParam>(cb: HMSNotificationCallback<T>, type?: T) => {\n    const eventCallback = (notification: HMSNotificationInCallback<T>) => {\n      if (type) {\n        let matchesType: boolean;\n        if (Array.isArray(type)) {\n          matchesType = type.includes(notification.type as HMSNotificationTypes);\n        } else {\n          matchesType = type === notification.type;\n        }\n        if (!matchesType) {\n          return;\n        }\n      }\n      cb(notification);\n    };\n    this.eventEmitter.addListener(HMS_NOTIFICATION_EVENT, eventCallback);\n    return () => {\n      this.eventEmitter.removeListener(HMS_NOTIFICATION_EVENT, eventCallback);\n    };\n  };\n\n  sendPlaylistTrackEnded<T>(item: HMSPlaylistItem<T>): void {\n    const notification = this.createNotification(\n      HMSNotificationTypes.PLAYLIST_TRACK_ENDED,\n      item,\n      HMSNotificationSeverity.INFO,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendDeviceChange(request: HMSDeviceChangeEvent) {\n    const notification = this.createNotification(\n      HMSNotificationTypes.DEVICE_CHANGE_UPDATE,\n      request,\n      request.error ? HMSNotificationSeverity.ERROR : HMSNotificationSeverity.INFO,\n      `Selected ${request.type} device - ${request.selection?.label}`,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendLeaveRoom(request: HMSLeaveRoomRequest) {\n    const peerName = request.requestedBy?.name;\n    const notification = this.createNotification(\n      request.roomEnded || !peerName ? HMSNotificationTypes.ROOM_ENDED : HMSNotificationTypes.REMOVED_FROM_ROOM,\n      request,\n      HMSNotificationSeverity.INFO,\n      `${request.roomEnded ? `Room ended` : 'Removed from room'} ${peerName ? `by ${peerName}` : ''}`,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendPeerList(peers: HMSPeer[]) {\n    if (peers.length === 0) {\n      return;\n    }\n    const notification = this.createNotification(HMSNotificationTypes.PEER_LIST, peers, HMSNotificationSeverity.INFO);\n    this.emitEvent(notification);\n  }\n\n  sendPeerUpdate(type: sdkTypes.HMSPeerUpdate, peer: HMSPeer | null) {\n    const hmsPeer = this.store.getState(selectPeerByID(peer?.id)) || peer;\n    const notificationType = PEER_NOTIFICATION_TYPES[type];\n    if (notificationType && hmsPeer) {\n      const notification = this.createNotification(notificationType, hmsPeer, HMSNotificationSeverity.INFO);\n      this.emitEvent(notification);\n    }\n  }\n\n  sendTrackUpdate(type: sdkTypes.HMSTrackUpdate, trackID: HMSTrackID) {\n    const hmsTrack = this.store.getState(selectTrackByID(trackID));\n    const notificationType = TRACK_NOTIFICATION_TYPES[type];\n    if (notificationType) {\n      const notification = this.createNotification(notificationType, hmsTrack, HMSNotificationSeverity.INFO);\n      this.emitEvent(notification);\n    }\n  }\n\n  sendMessageReceived(message: HMSMessage) {\n    const notification = this.createNotification(\n      HMSNotificationTypes.NEW_MESSAGE,\n      message,\n      HMSNotificationSeverity.INFO,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendError(error: HMSException) {\n    const notification = this.createNotification(HMSNotificationTypes.ERROR, error, HMSNotificationSeverity.ERROR);\n    this.emitEvent(notification);\n  }\n\n  sendReconnecting(error: HMSException) {\n    const notification = this.createNotification(\n      HMSNotificationTypes.RECONNECTING,\n      error,\n      HMSNotificationSeverity.ERROR,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendReconnected() {\n    const notification = this.createNotification(HMSNotificationTypes.RECONNECTED, null, HMSNotificationSeverity.INFO);\n    this.emitEvent(notification);\n  }\n\n  sendChangeTrackStateRequest(request: HMSChangeTrackStateRequest) {\n    const notification = this.createNotification(\n      HMSNotificationTypes.CHANGE_TRACK_STATE_REQUEST,\n      request,\n      HMSNotificationSeverity.INFO,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendChangeMultiTrackStateRequest(request: HMSChangeMultiTrackStateRequest) {\n    const notification = this.createNotification(\n      HMSNotificationTypes.CHANGE_MULTI_TRACK_STATE_REQUEST,\n      request,\n      HMSNotificationSeverity.INFO,\n    );\n    this.emitEvent(notification);\n  }\n\n  sendPollUpdate(type: sdkTypes.HMSPollsUpdate, pollID: string) {\n    const notificationType = POLL_NOTIFICATION_TYPES[type];\n    const poll = this.store.getState(selectPollByID(pollID));\n\n    if (notificationType) {\n      const notification = this.createNotification(notificationType, poll, HMSNotificationSeverity.INFO);\n      this.emitEvent(notification);\n    }\n  }\n\n  sendTranscriptionUpdate(transcriptions?: sdkTypes.HMSTranscriptionInfo[]) {\n    const notification = this.createNotification(\n      TRANSCRIPTION_NOTIFICATION_TYPES[sdkTypes.HMSRoomUpdate.TRANSCRIPTION_STATE_UPDATED],\n      transcriptions,\n      HMSNotificationSeverity.INFO,\n    );\n    this.emitEvent(notification);\n  }\n  private emitEvent(notification: HMSNotification) {\n    this.eventEmitter.emit(HMS_NOTIFICATION_EVENT, notification);\n  }\n\n  private createNotification<T>(\n    type: HMSNotificationTypes,\n    data?:\n      | HMSPeer\n      | HMSPeer[]\n      | HMSTrack\n      | HMSMessage\n      | HMSException\n      | HMSChangeTrackStateRequest\n      | HMSChangeMultiTrackStateRequest\n      | HMSLeaveRoomRequest\n      | HMSDeviceChangeEvent\n      | HMSPlaylistItem<T>\n      | sdkTypes.HMSPoll\n      | sdkTypes.HMSTranscriptionInfo[]\n      | null,\n    severity?: HMSNotificationSeverity,\n    message = '',\n  ): HMSNotification {\n    this.id++;\n    return {\n      id: this.id,\n      type,\n      message,\n      data,\n      severity,\n    } as HMSNotification;\n  }\n}\n","import { HMSLogger } from '../../common/ui-logger';\nimport { IHMSStore } from '../../IHMSStore';\nimport { HMSGenericTypes, HMSStore } from '../../schema';\n\ntype ActionName = string;\ntype SetTimeOutId = number;\ntype SetState = (store: HMSStore) => void;\n\n/**\n * pass in an action and an update function, the update functions will be batched and run such that\n * store updates are limited to only one action in a time interval\n *\n */\nexport class ActionBatcher<T extends HMSGenericTypes = { sessionStore: Record<string, any> }> {\n  private queuedUpdates: Record<ActionName, SetState[]> = {};\n  private timers: Record<ActionName, SetTimeOutId> = {};\n  private DEFAULT_INTERVAL_MS = 50;\n  private store: IHMSStore<T>;\n  constructor(store: IHMSStore<T>) {\n    this.store = store;\n  }\n\n  setState(fn: SetState, action: ActionName, timeout = this.DEFAULT_INTERVAL_MS) {\n    this.queuedUpdates[action] = this.queuedUpdates[action] || [];\n    this.queuedUpdates[action].push(fn);\n    if (this.timers[action]) {\n      return;\n    }\n    // set a future timeout if a timer is not there already\n    if (window) {\n      this.timers[action] = window.setTimeout(() => this.setStateBatched(action), timeout);\n    } else {\n      // nodejs, ignore batching for now\n      this.setStateBatched(action);\n    }\n  }\n\n  private setStateBatched(action: ActionName) {\n    if (this.queuedUpdates[action]?.length > 0) {\n      const batchedFn = (draftStore: HMSStore) => {\n        this.queuedUpdates[action].forEach(fn => {\n          try {\n            fn(draftStore);\n          } catch (err) {\n            HMSLogger.w('failed to update store', err);\n          }\n        });\n      };\n      console.time(`timed-${action}`);\n      this.store.namedSetState(batchedFn, action);\n      console.timeEnd(`timed-${action}`);\n    }\n    // cleanup\n    delete this.queuedUpdates[action];\n    if (window && this.timers[action]) {\n      window.clearTimeout(this.timers[action]);\n      delete this.timers[action];\n    }\n  }\n}\n","import { HMSRemoteAudioTrack, HMSRemoteVideoTrack, HMSTrack } from '../../internal';\n\nexport function isRemoteTrack(track: HMSTrack) {\n  return track instanceof HMSRemoteAudioTrack || track instanceof HMSRemoteVideoTrack;\n}\n","import { HMSPeerStats, HMSTrackStats } from '../../interfaces';\nimport { HMSLocalTrack as SDKHMSLocalTrack, HMSPoll } from '../../internal';\nimport { HMSPeer, HMSPeerID, HMSScreenVideoTrack, HMSTrack, HMSTrackID, HMSVideoTrack } from '../../schema';\n\n/**\n * updates draftPeers with newPeers ensuring minimal reference changes\n * @remarks\n * This is mutable and impure function, it modifies the passed in data to ensure\n * minimal reference changes\n * @param draftPeers the current peers object in store, an immer draft object\n * @param newPeers the latest update which needs to be stored\n * @param newHmsTracks this will be update if required\n * @param newHmsSDkTracks this is future value of local hms tacks map\n */\n// eslint-disable-next-line complexity\nexport const mergeNewPeersInDraft = (\n  draftPeers: Record<HMSPeerID, HMSPeer>,\n  newPeers: Record<HMSPeerID, Partial<HMSPeer>>,\n) => {\n  const peerIDs = union(Object.keys(draftPeers), Object.keys(newPeers));\n  for (const peerID of peerIDs) {\n    const oldPeer = draftPeers[peerID];\n    const newPeer = newPeers[peerID];\n    if (isEntityUpdated(oldPeer, newPeer)) {\n      if (areArraysEqual(oldPeer.auxiliaryTracks, newPeer.auxiliaryTracks)) {\n        newPeer.auxiliaryTracks = oldPeer.auxiliaryTracks;\n      }\n      if (oldPeer.groups && areArraysEqual(oldPeer.groups, newPeer.groups)) {\n        newPeer.groups = oldPeer.groups;\n      }\n      Object.assign(oldPeer, newPeer);\n    } else if (isEntityRemoved(oldPeer, newPeer)) {\n      delete draftPeers[peerID];\n    } else if (isEntityAdded(oldPeer, newPeer)) {\n      draftPeers[peerID] = newPeer as HMSPeer;\n    }\n  }\n};\n\nexport const mergeNewTracksInDraft = (\n  draftTracks: Record<HMSTrackID, HMSTrack>,\n  newTracks: Record<HMSTrackID, Partial<HMSTrack>>,\n) => {\n  const trackIDs = union(Object.keys(draftTracks), Object.keys(newTracks));\n  for (const trackID of trackIDs) {\n    const oldTrack = draftTracks[trackID];\n    const newTrack = newTracks[trackID];\n    if (isEntityUpdated(oldTrack, newTrack)) {\n      mergeTrackArrayFields(oldTrack, newTrack);\n      Object.assign(oldTrack, newTrack);\n    } else if (isEntityRemoved(oldTrack, newTrack)) {\n      delete draftTracks[trackID];\n    } else if (isEntityAdded(oldTrack, newTrack)) {\n      draftTracks[trackID] = newTrack as HMSTrack;\n    }\n  }\n};\n\nexport const mergeNewPollsInDraft = (\n  draftPolls: Record<string, HMSPoll>,\n  newPolls: Record<string, Partial<HMSPoll>>,\n) => {\n  const pollIDs = union(Object.keys(draftPolls), Object.keys(newPolls));\n  for (const pollID of pollIDs) {\n    const oldPoll = draftPolls[pollID];\n    const newPoll = newPolls[pollID];\n    if (isEntityUpdated(oldPoll, newPoll)) {\n      if (oldPoll.questions && areArraysEqual(oldPoll.questions, newPoll.questions)) {\n        newPoll.questions = oldPoll.questions;\n      }\n      Object.assign(oldPoll, newPoll);\n    } else if (isEntityAdded(oldPoll, newPoll)) {\n      draftPolls[pollID] = newPoll as HMSPoll;\n    }\n  }\n};\n\nexport const mergeNewIndividualStatsInDraft = <TID extends string, T extends HMSPeerStats | HMSTrackStats>(\n  draftStats: Record<TID, T | undefined>,\n  newStats: Record<TID, Partial<T | undefined>>,\n) => {\n  const IDs = union(Object.keys(draftStats), Object.keys(newStats)) as TID[];\n  for (const trackID of IDs) {\n    const oldStat = draftStats[trackID];\n    const newStat = newStats[trackID];\n    if (isEntityUpdated(oldStat, newStat)) {\n      Object.assign(oldStat!, newStat);\n    } else if (isEntityRemoved(oldStat, newStat)) {\n      delete draftStats[trackID];\n    } else if (isEntityAdded(oldStat, newStat)) {\n      draftStats[trackID] = newStat as T;\n    }\n  }\n};\n\nexport const mergeLocalTrackStats = (\n  draftStats: Record<HMSTrackID, HMSTrackStats[] | undefined>,\n  newStats: Record<HMSTrackID, Record<string, HMSTrackStats>>,\n  tracks: SDKHMSLocalTrack[],\n) => {\n  const trackMap: Record<string, HMSTrackStats[]> = tracks.reduce((acc, track) => {\n    // @ts-ignore\n    acc[track.firstTrackId] = Object.values(newStats[track.getTrackIDBeingSent()] || {}).sort((a, b) => {\n      if (!a.rid || !b.rid) {\n        return 0;\n      }\n      return a.rid < b.rid ? -1 : 1;\n    });\n    return acc;\n  }, {});\n  const IDs = union(Object.keys(draftStats), Object.keys(trackMap));\n  for (const trackID of IDs) {\n    if (!trackMap[trackID]) {\n      delete draftStats[trackID];\n      continue;\n    }\n    draftStats[trackID] = trackMap[trackID];\n  }\n};\n\n/**\n * array's are usually created with new reference, avoid that update if both arrays are same\n */\nexport const mergeTrackArrayFields = (oldTrack: HMSTrack, newTrack: Partial<HMSTrack>) => {\n  if (oldTrack.plugins && areArraysEqual(oldTrack.plugins, newTrack.plugins)) {\n    newTrack.plugins = oldTrack.plugins;\n  }\n  if (\n    oldTrack.type === 'video' &&\n    oldTrack.layerDefinitions &&\n    areArraysEqual(oldTrack.layerDefinitions, (newTrack as HMSVideoTrack | HMSScreenVideoTrack).layerDefinitions)\n  ) {\n    (newTrack as HMSVideoTrack | HMSScreenVideoTrack).layerDefinitions = oldTrack.layerDefinitions;\n  }\n};\n\nexport const isEntityUpdated = <T>(oldItem: T, newItem: T) => oldItem && newItem;\nconst isEntityRemoved = <T>(oldItem: T, newItem: T) => oldItem && !newItem;\nconst isEntityAdded = <T>(oldItem: T, newItem: T) => !oldItem && newItem;\n\n// eslint-disable-next-line complexity\nexport const areArraysEqual = <T>(arr1: T[], arr2?: T[]): boolean => {\n  if (arr1 === arr2 || (arr1.length === 0 && arr2?.length === 0)) {\n    // reference check\n    return true;\n  }\n  if (!arr1 || !arr2 || !(arr1.length === arr2.length)) {\n    return false;\n  }\n  for (let i = 0; i < arr1.length; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n};\n\nconst union = <T>(arr1: T[], arr2: T[]): T[] => {\n  const set: Set<T> = new Set();\n  for (const elem of arr1) {\n    set.add(elem);\n  }\n  for (const elem of arr2) {\n    set.add(elem);\n  }\n  return Array.from(set);\n};\n","import { CONNECTIVITY_TEST_DURATION } from './constants';\nimport { CQSCalculator } from './CQSCalculator';\nimport { DiagnosticsStatsCollector } from './DiagnosticsStatsCollector';\nimport { ConnectivityCheckResult, ConnectivityState, HMSDiagnosticsConnectivityListener } from './interfaces';\nimport { RTCIceCandidatePair } from '../connection/IConnectionObserver';\nimport {\n  HMSConnectionQuality,\n  HMSException,\n  HMSRoom,\n  HMSTrack,\n  HMSTrackType,\n  HMSTrackUpdate,\n  HMSUpdateListener,\n} from '../internal';\nimport { HMSSdk } from '../sdk';\nimport { HMSPeer } from '../sdk/models/peer';\n\nexport class ConnectivityCheck implements HMSDiagnosticsConnectivityListener {\n  private wsConnected = false;\n  private websocketURL?: string;\n  private initConnected = false;\n\n  private isPublishICEConnected = false;\n  private isSubscribeICEConnected = false;\n  private selectedPublishICECandidate?: RTCIceCandidatePair;\n  private selectedSubscribeICECandidate?: RTCIceCandidatePair;\n  private gatheredPublishICECandidates: RTCIceCandidate[] = [];\n  private gatheredSubscribeICECandidates: RTCIceCandidate[] = [];\n  private errors: HMSException[] = [];\n  private isAudioTrackCaptured = false;\n  private isVideoTrackCaptured = false;\n  private isAudioTrackPublished = false;\n  private isVideoTrackPublished = false;\n  private statsCollector: DiagnosticsStatsCollector;\n  private cqsCalculator = new CQSCalculator();\n\n  private cleanupTimer?: number;\n  private timestamp = Date.now();\n  private _state?: ConnectivityState;\n  private get state(): ConnectivityState | undefined {\n    return this._state;\n  }\n  private set state(value: ConnectivityState | undefined) {\n    if (value === undefined || (this._state !== undefined && value < this._state)) {\n      return;\n    }\n    this._state = value;\n    this.progressCallback?.(value);\n  }\n\n  constructor(\n    private sdk: HMSSdk,\n    private sdkListener: HMSUpdateListener,\n    private progressCallback: (state: ConnectivityState) => void,\n    private completionCallback: (state: ConnectivityCheckResult) => void,\n  ) {\n    this.statsCollector = new DiagnosticsStatsCollector(sdk);\n    this.state = ConnectivityState.STARTING;\n  }\n  onRoomUpdate = this.sdkListener.onRoomUpdate.bind(this.sdkListener);\n  onPeerUpdate = this.sdkListener.onPeerUpdate.bind(this.sdkListener);\n  onMessageReceived = this.sdkListener.onMessageReceived.bind(this.sdkListener);\n  onReconnected = this.sdkListener.onReconnected.bind(this.sdkListener);\n  onRoleChangeRequest = this.sdkListener.onRoleChangeRequest.bind(this.sdkListener);\n  onRoleUpdate = this.sdkListener.onRoleUpdate.bind(this.sdkListener);\n  onChangeTrackStateRequest = this.sdkListener.onChangeTrackStateRequest.bind(this.sdkListener);\n  onChangeMultiTrackStateRequest = this.sdkListener.onChangeMultiTrackStateRequest.bind(this.sdkListener);\n  onRemovedFromRoom = this.sdkListener.onRemovedFromRoom.bind(this.sdkListener);\n  onNetworkQuality = this.sdkListener.onNetworkQuality?.bind(this.sdkListener);\n  onPreview = this.sdkListener.onPreview.bind(this.sdkListener);\n  onDeviceChange = this.sdkListener.onDeviceChange?.bind(this.sdkListener);\n  onSessionStoreUpdate = this.sdkListener.onSessionStoreUpdate.bind(this.sdkListener);\n  onPollsUpdate = this.sdkListener.onPollsUpdate.bind(this.sdkListener);\n  onWhiteboardUpdate = this.sdkListener.onWhiteboardUpdate.bind(this.sdkListener);\n\n  handleConnectionQualityUpdate = (qualities: HMSConnectionQuality[]) => {\n    const localPeerQuality = qualities.find(quality => quality.peerID === this.sdk?.store.getLocalPeer()?.peerId);\n    this.cqsCalculator.pushScore(localPeerQuality?.downlinkQuality);\n  };\n\n  onICESuccess(isPublish: boolean): void {\n    if (isPublish) {\n      this.isPublishICEConnected = true;\n    } else {\n      this.isSubscribeICEConnected = true;\n    }\n\n    if (this.isPublishICEConnected && this.isSubscribeICEConnected) {\n      this.state = ConnectivityState.ICE_ESTABLISHED;\n    }\n  }\n\n  onSelectedICECandidatePairChange(candidatePair: RTCIceCandidatePair, isPublish: boolean): void {\n    if (isPublish) {\n      this.selectedPublishICECandidate = candidatePair;\n    } else {\n      this.selectedSubscribeICECandidate = candidatePair;\n    }\n  }\n\n  onICECandidate(candidate: RTCIceCandidate, isPublish: boolean): void {\n    if (isPublish) {\n      this.gatheredPublishICECandidates.push(candidate);\n    } else {\n      this.gatheredSubscribeICECandidates.push(candidate);\n    }\n  }\n\n  onMediaPublished(track: HMSTrack): void {\n    switch (track.type) {\n      case HMSTrackType.AUDIO:\n        this.isAudioTrackPublished = true;\n        break;\n      case HMSTrackType.VIDEO:\n        this.isVideoTrackPublished = true;\n        break;\n      default:\n        break;\n    }\n\n    if (this.isVideoTrackPublished && this.isAudioTrackPublished) {\n      this.state = ConnectivityState.MEDIA_PUBLISHED;\n    }\n  }\n\n  onInitSuccess(websocketURL: string): void {\n    this.websocketURL = websocketURL;\n    this.initConnected = true;\n    this.state = ConnectivityState.INIT_FETCHED;\n  }\n\n  onSignallingSuccess(): void {\n    this.wsConnected = true;\n    this.state = ConnectivityState.SIGNAL_CONNECTED;\n  }\n\n  onJoin(room: HMSRoom): void {\n    this.sdkListener.onJoin(room);\n    this.sdk.getWebrtcInternals()?.onStatsChange(stats => this.statsCollector.handleStatsUpdate(stats));\n    this.sdk.getWebrtcInternals()?.start();\n    this.cleanupTimer = window.setTimeout(() => {\n      this.cleanupAndReport();\n    }, CONNECTIVITY_TEST_DURATION);\n  }\n\n  onError(error: HMSException): void {\n    this.sdkListener.onError(error);\n    this.errors.push(error);\n    if (error?.isTerminal) {\n      this.cleanupAndReport();\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  onTrackUpdate(type: HMSTrackUpdate, track: HMSTrack, peer: HMSPeer): void {\n    this.sdkListener.onTrackUpdate(type, track, peer);\n    if (peer.isLocal && type === HMSTrackUpdate.TRACK_ADDED) {\n      switch (track.type) {\n        case HMSTrackType.AUDIO:\n          this.isAudioTrackCaptured = true;\n          break;\n        case HMSTrackType.VIDEO:\n          this.isVideoTrackCaptured = true;\n          break;\n        default:\n          break;\n      }\n\n      if (this.isVideoTrackCaptured && this.isAudioTrackCaptured) {\n        this.state = ConnectivityState.MEDIA_CAPTURED;\n      }\n    }\n  }\n\n  onReconnecting(error: HMSException): void {\n    this.sdkListener.onReconnecting(error);\n    this.cqsCalculator.addPendingCQSTillNow();\n  }\n\n  cleanupAndReport() {\n    clearTimeout(this.cleanupTimer);\n    this.cleanupTimer = undefined;\n    if (this.state === ConnectivityState.MEDIA_PUBLISHED) {\n      this.state = ConnectivityState.COMPLETED;\n    }\n    this.completionCallback?.(this.buildReport());\n    this.sdk.leave();\n  }\n\n  private buildReport(): ConnectivityCheckResult {\n    this.cqsCalculator.addPendingCQSTillNow();\n    const connectionQualityScore = this.cqsCalculator.getCQS();\n    const stats = this.statsCollector.buildReport();\n    return {\n      testTimestamp: this.timestamp,\n      connectivityState: this.state,\n      errors: this.errors,\n      signallingReport: {\n        isConnected: this.wsConnected,\n        isInitConnected: this.initConnected,\n        websocketUrl: this.websocketURL,\n      },\n      mediaServerReport: {\n        stats,\n        connectionQualityScore,\n        isPublishICEConnected: this.isPublishICEConnected,\n        isSubscribeICEConnected: this.isSubscribeICEConnected,\n        publishICECandidatePairSelected: this.selectedPublishICECandidate,\n        subscribeICECandidatePairSelected: this.selectedSubscribeICECandidate,\n        publishIceCandidatesGathered: this.gatheredPublishICECandidates,\n        subscribeIceCandidatesGathered: this.gatheredSubscribeICECandidates,\n      },\n    };\n  }\n}\n","import { areArraysEqual } from './sdkUtils/storeMergeUtils';\nimport * as sdkTypes from '../internal';\nimport {\n  HMSLocalAudioTrack as SDKHMSLocalAudioTrack,\n  HMSLocalVideoTrack as SDKHMSLocalVideoTrack,\n  HMSRemoteAudioTrack as SDKHMSRemoteAudioTrack,\n  HMSRemoteVideoTrack as SDKHMSRemoteVideoTrack,\n  HMSRoleChangeRequest as SDKHMSRoleChangeRequest,\n  HMSTrack as SDKHMSTrack,\n} from '../internal';\nimport { MessageNotification } from '../notification-manager';\nimport {\n  HMSAudioTrack,\n  HMSDeviceChangeEvent,\n  HMSException,\n  HMSMessage,\n  HMSPeer,\n  HMSPeerID,\n  HMSPlaylistItem,\n  HMSPlaylistType,\n  HMSRole,\n  HMSRoleChangeStoreRequest,\n  HMSRoleName,\n  HMSRoom,\n  HMSScreenVideoTrack,\n  HMSTrack,\n  HMSTrackException,\n  HMSTrackFacingMode,\n  HMSVideoTrack,\n} from '../schema';\n\n/**\n * This file has conversion functions from schema defined in sdk to normalised schema defined in store.\n * A lot of conversions below involve deep clone as once the object goes into store it becomes unmodifiable\n * due to immer, so it can't be mutated later.\n *\n * Objects directly from the SDK are not stored as is and cloned because the SDK might modify it later\n */\n\nexport class SDKToHMS {\n  static convertPeer(sdkPeer: sdkTypes.HMSPeer): Partial<HMSPeer> & Pick<HMSPeer, 'id'> {\n    return {\n      id: sdkPeer.peerId,\n      name: sdkPeer.name,\n      roleName: sdkPeer.role?.name,\n      isLocal: sdkPeer.isLocal,\n      videoTrack: sdkPeer.videoTrack?.trackId,\n      audioTrack: sdkPeer.audioTrack?.trackId,\n      auxiliaryTracks: sdkPeer.auxiliaryTracks.map(track => track.trackId),\n      customerUserId: sdkPeer.customerUserId,\n      metadata: sdkPeer.metadata,\n      joinedAt: sdkPeer.joinedAt,\n      groups: sdkPeer.groups,\n      isHandRaised: sdkPeer.isHandRaised,\n      type: sdkPeer.type,\n    };\n  }\n\n  static convertTrack(sdkTrack: SDKHMSTrack, peerId?: HMSPeerID): HMSTrack {\n    const track: HMSTrack = {\n      id: sdkTrack.trackId,\n      source: sdkTrack.source,\n      type: sdkTrack.type,\n      enabled: sdkTrack.enabled,\n      displayEnabled: sdkTrack.enabled,\n      peerId: sdkTrack.peerId || peerId,\n    } as HMSTrack;\n    this.enrichTrack(track, sdkTrack);\n    return track;\n  }\n\n  static enrichTrack(track: HMSTrack, sdkTrack: SDKHMSTrack) {\n    const mediaSettings = sdkTrack.getMediaTrackSettings();\n\n    if (sdkTrack instanceof SDKHMSRemoteAudioTrack) {\n      (track as HMSAudioTrack).volume = sdkTrack.getVolume() || 0;\n    }\n    SDKToHMS.updateDeviceID(track, sdkTrack);\n    SDKToHMS.enrichLocalTrack(track, sdkTrack);\n    if (track.type === 'video') {\n      if (track.source === 'screen') {\n        // @ts-ignore\n        track.displaySurface = mediaSettings.displaySurface;\n        SDKToHMS.enrichScreenTrack(track as HMSScreenVideoTrack, sdkTrack);\n      } else if (track.source === 'regular') {\n        (track as HMSVideoTrack).facingMode = mediaSettings.facingMode as HMSTrackFacingMode;\n      }\n      track.height = mediaSettings.height;\n      track.width = mediaSettings.width;\n      SDKToHMS.enrichVideoTrack(track as HMSVideoTrack, sdkTrack);\n    }\n    SDKToHMS.enrichPluginsDetails(track, sdkTrack);\n  }\n\n  static enrichLocalTrack(track: HMSTrack, sdkTrack: SDKHMSTrack) {\n    if (sdkTrack instanceof SDKHMSLocalVideoTrack || sdkTrack instanceof SDKHMSLocalAudioTrack) {\n      track.isPublished = sdkTrack.isPublished;\n    }\n  }\n\n  static updateDeviceID(track: HMSTrack, sdkTrack: SDKHMSTrack) {\n    if (sdkTrack instanceof SDKHMSLocalVideoTrack || sdkTrack instanceof SDKHMSLocalAudioTrack) {\n      track.deviceID = sdkTrack.settings.deviceId;\n    } else {\n      track.deviceID = sdkTrack.getMediaTrackSettings()?.deviceId;\n    }\n  }\n\n  static enrichVideoTrack(track: HMSVideoTrack, sdkTrack: SDKHMSTrack) {\n    if (sdkTrack instanceof SDKHMSRemoteVideoTrack) {\n      track.layer = sdkTrack.getLayer();\n      track.preferredLayer = sdkTrack.getPreferredLayer();\n      track.degraded = sdkTrack.degraded;\n    }\n    if (sdkTrack instanceof SDKHMSRemoteVideoTrack || sdkTrack instanceof SDKHMSLocalVideoTrack) {\n      if (!areArraysEqual(sdkTrack.getSimulcastDefinitions(), track.layerDefinitions)) {\n        track.layerDefinitions = sdkTrack.getSimulcastDefinitions();\n      }\n    }\n  }\n\n  static enrichScreenTrack(track: HMSScreenVideoTrack, sdkTrack: SDKHMSTrack) {\n    if (sdkTrack instanceof SDKHMSLocalVideoTrack) {\n      const newCaptureHandle = sdkTrack.getCaptureHandle?.();\n      if (newCaptureHandle?.handle !== track.captureHandle?.handle) {\n        track.captureHandle = newCaptureHandle;\n      }\n      if (sdkTrack.isCurrentTab) {\n        track.displaySurface = 'selfBrowser';\n      }\n    }\n  }\n\n  static enrichPluginsDetails(track: HMSTrack, sdkTrack: SDKHMSTrack) {\n    if (sdkTrack instanceof SDKHMSLocalVideoTrack || sdkTrack instanceof SDKHMSLocalAudioTrack) {\n      if (!areArraysEqual(sdkTrack.getPlugins(), track.plugins)) {\n        track.plugins = sdkTrack.getPlugins();\n      }\n    }\n  }\n\n  static convertRoom(sdkRoom: sdkTypes.HMSRoom, sdkLocalPeerId?: string): Partial<HMSRoom> {\n    const { recording, rtmp, hls, transcriptions } = SDKToHMS.convertRecordingStreamingState(\n      sdkRoom.recording,\n      sdkRoom.rtmp,\n      sdkRoom.hls,\n      sdkRoom.transcriptions,\n    );\n    return {\n      id: sdkRoom.id,\n      name: sdkRoom.name,\n      localPeer: sdkLocalPeerId,\n      recording,\n      rtmp,\n      hls,\n      transcriptions,\n      sessionId: sdkRoom.sessionId,\n      startedAt: sdkRoom.startedAt,\n      joinedAt: sdkRoom.joinedAt,\n      peerCount: sdkRoom.peerCount,\n      isLargeRoom: sdkRoom.large_room_optimization,\n      isEffectsEnabled: sdkRoom.isEffectsEnabled,\n      disableNoneLayerRequest: sdkRoom.disableNoneLayerRequest,\n      isVBEnabled: sdkRoom.isVBEnabled,\n      effectsKey: sdkRoom.effectsKey,\n      isHipaaEnabled: sdkRoom.isHipaaEnabled,\n      isNoiseCancellationEnabled: sdkRoom.isNoiseCancellationEnabled,\n    };\n  }\n\n  static convertMessage(\n    sdkMessage: MessageNotification,\n    localPeerId: HMSPeerID,\n  ): Partial<HMSMessage> & Pick<HMSMessage, 'sender'> {\n    return {\n      sender: sdkMessage.peer?.peer_id,\n      senderName: sdkMessage.peer?.info.name,\n      senderRole: sdkMessage.peer?.role,\n      senderUserId: sdkMessage.peer?.info.user_id,\n      recipientPeer: sdkMessage.private ? localPeerId : undefined,\n      recipientRoles: sdkMessage.roles,\n      time: new Date(sdkMessage.timestamp),\n      type: sdkMessage.info.type,\n      message: sdkMessage.info.message,\n      id: sdkMessage.message_id,\n    };\n  }\n\n  static convertRoles(sdkRoles: HMSRole[]): Record<HMSRoleName, HMSRole> {\n    const roles: Record<HMSRoleName, HMSRole> = {};\n    if (sdkRoles) {\n      sdkRoles.forEach(role => {\n        roles[role.name] = role;\n      });\n    }\n    return roles;\n  }\n\n  static convertRoleChangeRequest(req: SDKHMSRoleChangeRequest): HMSRoleChangeStoreRequest {\n    return {\n      requestedBy: req.requestedBy?.peerId,\n      roleName: req.role.name,\n      token: req.token,\n    };\n  }\n\n  static convertException(sdkException: sdkTypes.HMSException): HMSException | HMSTrackException {\n    const isTrackException = 'trackType' in sdkException;\n    const exp = {\n      code: sdkException.code,\n      action: sdkException.action,\n      name: sdkException.name,\n      message: sdkException.message,\n      description: sdkException.description,\n      isTerminal: sdkException.isTerminal,\n      nativeError: sdkException.nativeError,\n      timestamp: new Date(),\n    } as HMSException;\n    if (isTrackException) {\n      (exp as HMSTrackException).trackType = (sdkException as sdkTypes.HMSTrackException)?.trackType;\n      return exp as HMSTrackException;\n    }\n    return exp;\n  }\n\n  static convertDeviceChangeUpdate(sdkDeviceChangeEvent: sdkTypes.HMSDeviceChangeEvent): HMSDeviceChangeEvent {\n    const convertedData: HMSDeviceChangeEvent = {\n      devices: sdkDeviceChangeEvent.devices,\n      selection: sdkDeviceChangeEvent.selection,\n      type: sdkDeviceChangeEvent.type,\n    };\n    if (sdkDeviceChangeEvent.error) {\n      convertedData.error = this.convertException(sdkDeviceChangeEvent.error);\n    }\n    return convertedData;\n  }\n\n  static convertPlaylist(playlistManager: sdkTypes.HMSPlaylistManager) {\n    const audioPlaylist = this.getConvertedPlaylistType(playlistManager, HMSPlaylistType.audio);\n    const videoPlaylist = this.getConvertedPlaylistType(playlistManager, HMSPlaylistType.video);\n    return { audio: audioPlaylist, video: videoPlaylist };\n  }\n\n  static convertPlaylistItem<T>(\n    playlistManager: sdkTypes.HMSPlaylistManager,\n    playlistItem: sdkTypes.HMSPlaylistItem<T>,\n  ): HMSPlaylistItem<T> {\n    const type = playlistItem.type;\n    const currentSelection = playlistManager.getCurrentSelection(type);\n    const isPlaying = playlistManager.isPlaying(type);\n    const isSelected = playlistItem.url === currentSelection?.url;\n\n    return {\n      ...playlistItem,\n      type: playlistItem.type as HMSPlaylistType,\n      selected: isSelected,\n      playing: isSelected && isPlaying,\n    };\n  }\n\n  private static getConvertedPlaylistType(playlistManager: sdkTypes.HMSPlaylistManager, type: HMSPlaylistType) {\n    const convertedPlaylist: Record<string, HMSPlaylistItem<any>> = {};\n    const currentSelection = playlistManager.getCurrentSelection(type);\n    const progress = playlistManager.getCurrentProgress(type);\n    const volume = playlistManager.getVolume(type);\n    const list = playlistManager.getList(type);\n    const currentIndex = playlistManager.getCurrentIndex(type);\n\n    playlistManager.getList(type).forEach(playlistItem => {\n      convertedPlaylist[playlistItem.id] = SDKToHMS.convertPlaylistItem(playlistManager, playlistItem);\n    });\n    return {\n      list: convertedPlaylist,\n      selection: {\n        id: currentSelection?.id,\n        hasPrevious: currentIndex > 0,\n        hasNext: currentIndex < list.length - 1,\n      },\n      progress,\n      volume,\n      currentTime: playlistManager.getCurrentTime(type),\n      playbackRate: playlistManager.getPlaybackRate(type),\n    };\n  }\n\n  static convertRecordingStreamingState(\n    recording?: sdkTypes.HMSRecording,\n    rtmp?: sdkTypes.HMSRTMP,\n    hls?: sdkTypes.HMSHLS,\n    transcriptions?: sdkTypes.HMSTranscriptionInfo[],\n  ): {\n    recording: sdkTypes.HMSRecording;\n    rtmp: sdkTypes.HMSRTMP;\n    hls: sdkTypes.HMSHLS;\n    transcriptions: sdkTypes.HMSTranscriptionInfo[];\n  } {\n    return {\n      recording: {\n        browser: {\n          running: false,\n          ...recording?.browser,\n        },\n        server: {\n          running: false,\n          ...recording?.server,\n        },\n        hls: { running: false, ...recording?.hls },\n      },\n      rtmp: { running: false, ...rtmp },\n      hls: {\n        variants: hls?.variants?.map(variant => variant) || [],\n        running: !!hls?.running,\n        error: hls?.error,\n      },\n      transcriptions: transcriptions || [],\n    };\n  }\n}\n","import { HMSLogger } from '../common/ui-logger';\nimport { IHMSStore } from '../IHMSStore';\nimport { HMSPlaylistManager } from '../internal';\nimport { HMSGenericTypes, HMSPlaylistItem, HMSPlaylistType, IHMSPlaylistActions } from '../schema';\nimport { selectAudioPlaylist, selectVideoPlaylist } from '../selectors';\n\nexport class HMSPlaylist<T extends HMSGenericTypes> implements IHMSPlaylistActions {\n  private type: HMSPlaylistType;\n  constructor(\n    private playlistManager: HMSPlaylistManager,\n    type: HMSPlaylistType,\n    private syncPlaylistState: (action: string) => void,\n    private store: IHMSStore<T>,\n  ) {\n    this.type = type;\n  }\n\n  async play(id: string): Promise<void> {\n    if (!id) {\n      HMSLogger.w('Please pass id to play');\n      return;\n    }\n    await this.playlistManager.setEnabled(true, { id, type: this.type });\n  }\n\n  async pause(): Promise<void> {\n    const selector = this.type === HMSPlaylistType.audio ? selectAudioPlaylist : selectVideoPlaylist;\n    const selection = this.store.getState(selector.selection);\n    if (!selection.id) {\n      HMSLogger.w('No item is currently playing to pause');\n      return;\n    }\n    await this.playlistManager.setEnabled(false, { id: selection.id, type: this.type });\n  }\n\n  async playNext(): Promise<void> {\n    await this.playlistManager.playNext(this.type);\n  }\n\n  async playPrevious(): Promise<void> {\n    await this.playlistManager.playPrevious(this.type);\n  }\n\n  seek(seekValue: number): void {\n    this.playlistManager.seek(seekValue, this.type);\n    this.syncPlaylistState(`seekOn${this.type}Playlist`);\n  }\n\n  seekTo(seekValue: number): void {\n    this.playlistManager.seekTo(seekValue, this.type);\n    this.syncPlaylistState(`seekToOn${this.type}Playlist`);\n  }\n\n  setVolume(volume: number): void {\n    this.playlistManager.setVolume(volume, this.type);\n    this.syncPlaylistState(`setVolumeOn${this.type}Playlist`);\n  }\n\n  setList<T>(list: HMSPlaylistItem<T>[]): void {\n    this.playlistManager.setList(list);\n    this.syncPlaylistState(`setListOn${this.type}Playlist`);\n  }\n\n  async stop(): Promise<void> {\n    await this.playlistManager.stop(this.type);\n    this.syncPlaylistState(`stop${this.type}Playlist`);\n  }\n\n  setIsAutoplayOn(autoplay: boolean) {\n    this.playlistManager.setIsAutoplayOn(this.type, autoplay);\n  }\n\n  setPlaybackRate(playbackRate: number) {\n    this.playlistManager.setPlaybackRate(this.type, playbackRate);\n    this.syncPlaylistState(`set${this.type}PlaybackRate`);\n  }\n\n  async removeItem(id: string) {\n    const removed = await this.playlistManager.removeItem(id, this.type);\n    if (removed) {\n      this.syncPlaylistState(`remove${this.type}PlaylistItem`);\n    }\n    return removed;\n  }\n\n  async clearList() {\n    await this.playlistManager.clearList(this.type);\n    this.syncPlaylistState(`clear${this.type}Playlist`);\n  }\n}\n","import { SessionStoreUpdate } from '../internal';\nimport { IHMSSessionStoreActions } from '../schema';\nimport { HMSSdk } from '../sdk';\n\nexport class HMSSessionStore<T extends Record<string, any>> implements IHMSSessionStoreActions<T> {\n  constructor(\n    private sdk: HMSSdk,\n    private setLocally: (updates: SessionStoreUpdate | SessionStoreUpdate[], actionName?: string) => void,\n  ) {}\n\n  private get sdkSessionStore() {\n    return this.sdk.getSessionStore();\n  }\n\n  async set<K extends keyof T>(key: K, value?: T[K]) {\n    const { value: latestValue } = await this.sdkSessionStore.set(String(key), value);\n    this.setLocally({ key: key as string, value: latestValue });\n  }\n\n  async observe(keys: keyof T | Array<keyof T>) {\n    const stringifiedKeys: string[] = Array.isArray(keys) ? keys.map(key => String(key)) : [String(keys)];\n    await this.sdkSessionStore.observe(stringifiedKeys);\n  }\n\n  async unobserve(keys: keyof T | Array<keyof T>) {\n    const stringifiedKeys: string[] = Array.isArray(keys) ? keys.map(key => String(key)) : [String(keys)];\n    await this.sdkSessionStore.unobserve(stringifiedKeys);\n  }\n}\n","import { HMSGenericTypes, HMSPeer, IHMSStore, selectIsConnectedToRoom, selectPeers } from '../../';\nimport { HMSLogger } from '../../common/ui-logger';\nimport { IHMSActions } from '../../IHMSActions';\n\n/**\n * Log data of audio level and speaker speaking periodically to beam for transcript\n * diarization.\n */\nexport class BeamSpeakerLabelsLogger<T extends HMSGenericTypes> {\n  private audioContext?: AudioContext;\n  private readonly intervalMs: number;\n  private shouldMonitor: boolean;\n  private hasStarted: boolean;\n  private unsubs: any[];\n  private readonly analysers: Record<string, AnalyserNode>;\n  private readonly store: IHMSStore<T>;\n  private actions: IHMSActions<T>;\n  constructor(store: IHMSStore<T>, actions: IHMSActions<T>) {\n    this.intervalMs = 100;\n    this.shouldMonitor = false;\n    this.hasStarted = false;\n    this.unsubs = [];\n    this.analysers = {};\n    this.store = store;\n    this.actions = actions;\n  }\n\n  async start() {\n    if (this.hasStarted) {\n      return;\n    }\n    this.hasStarted = true;\n    HMSLogger.d('starting audio level monitor for remote peers', this.store);\n    const isConnected = this.store.getState(selectIsConnectedToRoom);\n    HMSLogger.d('starting audio levels is connected to room', isConnected);\n    if (isConnected) {\n      await this.monitorAudioLevels();\n    }\n    const unsub = this.store.subscribe(this.monitorAudioLevels.bind(this), selectIsConnectedToRoom);\n    this.unsubs.push(unsub);\n  }\n\n  async stop() {\n    if (!this.hasStarted) {\n      return;\n    }\n    this.hasStarted = false;\n    this.shouldMonitor = false;\n    this.unsubs.forEach(unsub => unsub());\n    HMSLogger.d('stopped audio level monitor for remote peers');\n  }\n\n  async monitorAudioLevels() {\n    const isConnected = this.store.getState(selectIsConnectedToRoom);\n    if (!isConnected) {\n      if (this.shouldMonitor) {\n        HMSLogger.i('room no longer connected, stopping audio level monitoring for remote');\n        this.shouldMonitor = false;\n      }\n      return;\n    }\n    if (this.shouldMonitor) {\n      return;\n    }\n    HMSLogger.i('monitoring audio levels');\n    this.shouldMonitor = true;\n    const loop = () => {\n      if (this.shouldMonitor) {\n        this.logAllPeersAudioLevels();\n        setTimeout(loop, this.intervalMs);\n      } else {\n        HMSLogger.i('stopped monitoring audio levels');\n      }\n    };\n    setTimeout(loop, 1000);\n  }\n\n  // eslint-disable-next-line complexity\n  async logAllPeersAudioLevels() {\n    if (!window.__triggerBeamEvent__) {\n      return;\n    }\n    // optimise this to selectTracks instead of selecting peers\n    const allPeers = this.store.getState(selectPeers);\n    const peers = allPeers.filter(peer => !!peer.audioTrack);\n    const peerAudioLevels = [];\n    for (const peer of peers) {\n      const sdkTrack = this.actions.getTrackById(peer.audioTrack || '');\n      const nativeStream: MediaStream | undefined = sdkTrack?.stream?.nativeStream;\n      if (!peer.joinedAt) {\n        continue;\n      }\n      if (nativeStream) {\n        const peerLevel = await this.getAudioLevel(peer, nativeStream);\n        if (peerLevel.level > 0) {\n          peerAudioLevels.push(peerLevel);\n        }\n      }\n    }\n    if (peerAudioLevels.length > 0) {\n      const payload = {\n        event: 'app-audio-level',\n        data: peerAudioLevels,\n      };\n      HMSLogger.d('logging audio levels', peerAudioLevels);\n      window.__triggerBeamEvent__(JSON.stringify(payload));\n    }\n  }\n\n  async getAudioLevel(peer: HMSPeer, stream: MediaStream) {\n    if (!this.analysers[stream.id]) {\n      this.analysers[stream.id] = this.createAnalyserNode(stream);\n    }\n    const analyserNode = this.analysers[stream.id];\n    const level = this.calculateAudioLevel(analyserNode);\n    return {\n      peerId: peer.id,\n      peerName: peer.name,\n      level,\n    };\n  }\n\n  createAnalyserNode(stream: MediaStream) {\n    if (!this.audioContext) {\n      this.audioContext = new AudioContext();\n    }\n    const analyser = this.audioContext.createAnalyser();\n    const source = this.audioContext.createMediaStreamSource(stream);\n    source.connect(analyser);\n    return analyser;\n  }\n\n  calculateAudioLevel(analyserNode: AnalyserNode) {\n    const data = new Uint8Array(analyserNode.fftSize);\n    analyserNode.getByteTimeDomainData(data);\n    const lowest = 0.009;\n    let max = lowest;\n    for (const frequency of data) {\n      max = Math.max(max, (frequency - 128) / 128);\n    }\n    const normalized = (Math.log(lowest) - Math.log(max)) / Math.log(lowest);\n    const percent = Math.ceil(Math.min(Math.max(normalized * 100, 0), 100));\n    return percent;\n  }\n}\n","import { HMSRole } from '../internal';\n\nexport const DIAGNOSTICS_ROOM_ID = '6669151f480e55c215299a4a';\n\nexport const CONNECTIVITY_TEST_DURATION = 20_000;\nexport const MIC_CHECK_RECORD_DURATION = 10_000;\n\nexport const diagnosticsRole: HMSRole = {\n  name: 'diagnostics-role',\n  priority: 1,\n  publishParams: {\n    allowed: ['audio', 'video'],\n    audio: { bitRate: 32, codec: 'opus' },\n    video: {\n      bitRate: 100,\n      codec: 'vp8',\n      frameRate: 30,\n      height: 720,\n      width: 1280,\n    },\n    screen: {\n      bitRate: 100,\n      codec: 'vp8',\n      frameRate: 10,\n      height: 1080,\n      width: 1920,\n    },\n  },\n  subscribeParams: {\n    subscribeToRoles: [],\n    maxSubsBitRate: 3200,\n  },\n  permissions: {\n    browserRecording: false,\n    changeRole: false,\n    endRoom: false,\n    hlsStreaming: false,\n    mute: false,\n    pollRead: false,\n    pollWrite: false,\n    removeOthers: false,\n    rtmpStreaming: false,\n    unmute: false,\n  },\n};\n\nexport const DEFAULT_TEST_AUDIO_URL = 'https://100ms.live/test-audio.wav';\n","export class CQSCalculator {\n  private networkScores: number[] = [];\n  private lastPushedAt = 0;\n\n  pushScore(score?: number) {\n    if (!score || score < 0) {\n      return;\n    }\n\n    if (this.networkScores.length === 0) {\n      this.networkScores.push(score);\n      this.lastPushedAt = Date.now();\n    } else {\n      this.addPendingCQSTillNow();\n    }\n  }\n\n  addPendingCQSTillNow() {\n    if (this.networkScores.length > 0) {\n      let timeDiffInSec = (Date.now() - this.lastPushedAt) / 1000;\n      while (timeDiffInSec > 0) {\n        this.networkScores.push(this.networkScores[this.networkScores.length - 1]);\n        timeDiffInSec -= 1;\n      }\n\n      this.lastPushedAt = Date.now();\n    }\n  }\n\n  getCQS() {\n    return this.networkScores.reduce((acc, score) => acc + score, 0) / this.networkScores.length;\n  }\n}\n","import { DiagnosticsRTCStatsReport } from '.';\nimport { HMSPeerStats, HMSTrackStats } from '../interfaces';\nimport { HMSWebrtcStats } from '../rtc-stats';\nimport { computeBitrate } from '../rtc-stats/utils';\nimport { HMSSdk } from '../sdk';\n\nconst isValidNumber = (num: number | undefined): boolean => !!num && !isNaN(num);\nconst getLastElement = <T>(arr: T[]): T | undefined => arr[arr.length - 1];\nconst calculateAverage = <T>(arr: T[], predicate: (val: T) => number | undefined): number => {\n  const filteredArr = arr.filter(curr => isValidNumber(predicate(curr)));\n  return filteredArr.reduce((acc, curr) => acc + (predicate(curr) || 0), 0) / filteredArr.length;\n};\n\nexport class DiagnosticsStatsCollector {\n  private peerStatsList: HMSPeerStats[] = [];\n  private localAudioTrackStatsList: Record<string, HMSTrackStats>[] = [];\n  private localVideoTrackStatsList: Record<string, HMSTrackStats>[] = [];\n  private remoteAudioTrackStatsList: HMSTrackStats[] = [];\n  private remoteVideoTrackStatsList: HMSTrackStats[] = [];\n\n  constructor(private sdk: HMSSdk) {}\n\n  async handleStatsUpdate(stats: HMSWebrtcStats) {\n    const localPeerStats = stats.getLocalPeerStats();\n    if (localPeerStats) {\n      this.peerStatsList.push(localPeerStats);\n    }\n\n    const localAudioTrackID = this.sdk.getLocalPeer()?.audioTrack?.nativeTrack?.id;\n    const localVideoTrackID = this.sdk.getLocalPeer()?.videoTrack?.nativeTrack?.id;\n\n    const localTrackStats = stats.getLocalTrackStats();\n    if (localTrackStats) {\n      localAudioTrackID && this.localAudioTrackStatsList.push(localTrackStats[localAudioTrackID]);\n      localVideoTrackID && this.localVideoTrackStatsList.push(localTrackStats[localVideoTrackID]);\n    }\n\n    const subscribeStatsReport = await this.sdk.getWebrtcInternals()?.getSubscribePeerConnection()?.getStats();\n    subscribeStatsReport?.forEach(stat => {\n      if (stat.type === 'inbound-rtp') {\n        const list = stat.kind === 'audio' ? this.remoteAudioTrackStatsList : this.remoteVideoTrackStatsList;\n        const bitrate = computeBitrate('bytesReceived', stat, getLastElement(list));\n        list.push({ ...stat, bitrate });\n      }\n    });\n  }\n\n  // eslint-disable-next-line complexity\n  buildReport(): DiagnosticsRTCStatsReport {\n    const lastPublishStats = getLastElement(this.peerStatsList)?.publish;\n    const lastSubscribeStats = getLastElement(this.peerStatsList)?.subscribe;\n    const publishRoundTripTime = lastPublishStats?.responsesReceived\n      ? (lastPublishStats?.totalRoundTripTime || 0) / lastPublishStats.responsesReceived\n      : 0;\n    const subscribeRoundTripTime = lastSubscribeStats?.responsesReceived\n      ? (lastSubscribeStats?.totalRoundTripTime || 0) / lastSubscribeStats.responsesReceived\n      : 0;\n    const roundTripTime = Number((((publishRoundTripTime + subscribeRoundTripTime) / 2) * 1000).toFixed(2));\n\n    const audioPacketsReceived = getLastElement(this.remoteAudioTrackStatsList)?.packetsReceived || 0;\n    const videoPacketsReceived = getLastElement(this.remoteVideoTrackStatsList)?.packetsReceived || 0;\n\n    const ridAveragedAudioBitrateList = this.localAudioTrackStatsList.map(trackStatsMap =>\n      trackStatsMap ? calculateAverage(Object.values(trackStatsMap), curr => curr.bitrate) : 0,\n    );\n\n    const ridAveragedVideoBitrateList = this.localVideoTrackStatsList.map(trackStatsMap =>\n      trackStatsMap ? calculateAverage(Object.values(trackStatsMap), curr => curr.bitrate) : 0,\n    );\n    const audioJitter = getLastElement(this.remoteAudioTrackStatsList)?.jitter || 0;\n    const videoJitter = getLastElement(this.remoteVideoTrackStatsList)?.jitter || 0;\n    const jitter = Math.max(audioJitter, videoJitter);\n    const lastLocalAudioTrackStats = getLastElement(this.localAudioTrackStatsList);\n    const lastLocalVideoTrackStats = getLastElement(this.localVideoTrackStatsList);\n\n    return {\n      combined: {\n        roundTripTime,\n        packetsReceived: audioPacketsReceived + videoPacketsReceived,\n        packetsLost: lastSubscribeStats?.packetsLost || 0,\n        bytesSent: lastPublishStats?.bytesSent || 0,\n        bytesReceived: lastSubscribeStats?.bytesReceived || 0,\n        bitrateSent: calculateAverage(this.peerStatsList, curr => curr.publish?.bitrate),\n        bitrateReceived: calculateAverage(this.peerStatsList, curr => curr.subscribe?.bitrate),\n        jitter: jitter,\n      },\n      audio: {\n        roundTripTime,\n        packetsReceived: audioPacketsReceived,\n        packetsLost: getLastElement(this.remoteAudioTrackStatsList)?.packetsLost || 0,\n        bytesReceived: getLastElement(this.remoteAudioTrackStatsList)?.bytesReceived || 0,\n        bitrateSent: calculateAverage(ridAveragedAudioBitrateList, curr => curr),\n        bitrateReceived: calculateAverage(this.remoteAudioTrackStatsList, curr => curr.bitrate),\n        bytesSent: lastLocalAudioTrackStats\n          ? Object.values(lastLocalAudioTrackStats).reduce((acc, curr) => acc + (curr.bytesSent || 0), 0)\n          : 0,\n        jitter: audioJitter,\n      },\n      video: {\n        roundTripTime,\n        packetsLost: getLastElement(this.remoteVideoTrackStatsList)?.packetsLost || 0,\n        bytesReceived: getLastElement(this.remoteVideoTrackStatsList)?.bytesReceived || 0,\n        packetsReceived: videoPacketsReceived,\n        bitrateSent: calculateAverage(ridAveragedVideoBitrateList, curr => curr),\n        bitrateReceived: calculateAverage(this.remoteVideoTrackStatsList, curr => curr.bitrate),\n        bytesSent: lastLocalVideoTrackStats\n          ? Object.values(lastLocalVideoTrackStats).reduce((acc, curr) => acc + (curr.bytesSent || 0), 0)\n          : 0,\n        jitter: videoJitter,\n      },\n    };\n  }\n}\n","import { RTCIceCandidatePair } from '../connection/IConnectionObserver';\nimport { HMSException, HMSTrack, HMSUpdateListener } from '../internal';\n\nexport enum ConnectivityState {\n  STARTING,\n  INIT_FETCHED,\n  SIGNAL_CONNECTED,\n  ICE_ESTABLISHED,\n  MEDIA_CAPTURED,\n  MEDIA_PUBLISHED,\n  COMPLETED,\n}\n\nexport interface HMSDiagnosticsConnectivityListener extends HMSUpdateListener {\n  onInitSuccess(websocketURL: string): void;\n  onSignallingSuccess(): void;\n  onICESuccess(isPublish: boolean): void;\n  onMediaPublished(track: HMSTrack): void;\n  onICECandidate(candidate: RTCIceCandidate, isPublish: boolean): void;\n  onSelectedICECandidatePairChange(candidatePair: RTCIceCandidatePair, isPublish: boolean): void;\n}\n\nexport interface MediaPermissionCheck {\n  audio?: boolean;\n  video?: boolean;\n}\n\nexport interface HMSDiagnosticsInterface {\n  requestPermission(check: MediaPermissionCheck): Promise<MediaPermissionCheck>;\n  checkBrowserSupport(): void;\n  startMicCheck(args: {\n    inputDevice?: string;\n    onError?: (error: Error) => void;\n    onStop?: () => void;\n    time?: number;\n  }): Promise<void>;\n  getRecordedAudio(): string | undefined;\n  stopMicCheck(): void;\n\n  startCameraCheck(inputDevice?: string): Promise<void>;\n  stopCameraCheck(): void;\n\n  startConnectivityCheck(\n    progress: (state: ConnectivityState) => void,\n    completed: (result: ConnectivityCheckResult) => void,\n    region?: string,\n  ): Promise<void>;\n  stopConnectivityCheck(): Promise<void>;\n}\n\nexport interface ConnectivityCheckResult {\n  testTimestamp: number; // System time in millis (UTC)\n  connectivityState?: ConnectivityState; // This is the initial state\n  signallingReport?: SignallingReport;\n  mediaServerReport?: MediaServerReport;\n  // deviceTestReport?: DeviceTestReport;\n  errors?: Array<HMSException>;\n}\n\nexport interface SignallingReport {\n  isConnected: boolean; // true if websocket was connected successfully\n  isInitConnected: boolean; // True if init call was successful\n  websocketUrl?: string; // websocket url\n}\n\nexport interface MediaServerReport {\n  stats?: DiagnosticsRTCStatsReport; // represents the overall stats of the call\n  isPublishICEConnected: boolean; // True if ICE connected successfully for both publish and subscribe\n  isSubscribeICEConnected: boolean;\n  connectionQualityScore?: number; // Average of all the downlink scores for this call for this peer\n  publishIceCandidatesGathered?: Array<RTCIceCandidate>; // Publish ICE candidates\n  subscribeIceCandidatesGathered: Array<RTCIceCandidate>; // Subscribe ICE candidates\n  publishICECandidatePairSelected?: RTCIceCandidatePair; // publish ICE pair\n  subscribeICECandidatePairSelected?: RTCIceCandidatePair; // subscribe ICE pair\n}\n\nexport interface DiagnosticsRTCStatsReport {\n  combined: DiagnosticsRTCStats;\n  audio: DiagnosticsRTCStats;\n  video: DiagnosticsRTCStats;\n}\n\nexport interface DiagnosticsRTCStats {\n  bytesSent: number;\n  bytesReceived: number;\n  packetsReceived: number;\n  packetsLost: number;\n  bitrateSent: number;\n  bitrateReceived: number;\n  roundTripTime: number;\n  jitter: number;\n}\n","import { HMSHLS, HMSRecording, HMSRoom, HMSRTMP, HMSTranscriptionInfo } from '../../interfaces/room';\n\nexport default class Room implements HMSRoom {\n  id: string;\n  joinedAt?: Date | undefined;\n  templateId?: string | undefined;\n  sessionId?: string;\n  startedAt?: Date;\n  recording: HMSRecording = { server: { running: false }, browser: { running: false }, hls: { running: false } };\n  rtmp: HMSRTMP = { running: false };\n  hls: HMSHLS = { running: false, variants: [] };\n  name?: string;\n  peerCount?: number;\n  description?: string;\n  max_size?: number;\n  large_room_optimization?: boolean;\n  transcriptions?: HMSTranscriptionInfo[] = [];\n  isEffectsEnabled?: boolean;\n  disableNoneLayerRequest?: boolean;\n  isVBEnabled?: boolean;\n  effectsKey?: string;\n  isHipaaEnabled?: boolean;\n  isNoiseCancellationEnabled?: boolean;\n\n  constructor(id: string) {\n    this.id = id;\n  }\n}\n","import { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\n\n/**\n * @param retryCodes codes from the server reponse that needs to be retried\n */\n// eslint-disable-next-line complexity\nexport const fetchWithRetry = async (\n  url: RequestInfo,\n  options: RequestInit,\n  retryCodes?: number[],\n): Promise<Response> => {\n  const MAX_RETRIES = 4;\n  let error = Error('something went wrong during fetch');\n  for (let i = 0; i < MAX_RETRIES; i++) {\n    try {\n      // fetch will throw error if there's a browser-level issue\n      const response = await fetch(url, options);\n      const data = await response.clone().json();\n      // throw error for additional codes to retry based on server's response\n      if (retryCodes && retryCodes.length && !response.ok && retryCodes.includes(data.code)) {\n        throw ErrorFactory.APIErrors.ServerErrors(data.code, HMSAction.GET_TOKEN, data.message, false);\n      }\n\n      return response;\n    } catch (err) {\n      error = err as unknown as Error;\n    }\n  }\n  if (['Failed to fetch', 'NetworkError'].some(message => error.message.includes(message))) {\n    throw ErrorFactory.APIErrors.EndpointUnreachable(HMSAction.GET_TOKEN, error.message);\n  }\n  throw error;\n};\n","import { ConnectivityCheck } from './ConnectivityCheck';\nimport { DEFAULT_TEST_AUDIO_URL, diagnosticsRole, MIC_CHECK_RECORD_DURATION } from './constants';\nimport {\n  ConnectivityCheckResult,\n  ConnectivityState,\n  HMSDiagnosticsInterface,\n  MediaPermissionCheck,\n} from './interfaces';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { BuildGetMediaError } from '../error/utils';\nimport {\n  HMSException,\n  HMSLocalAudioTrack,\n  HMSLocalVideoTrack,\n  HMSPeerType,\n  HMSPeerUpdate,\n  HMSRoomUpdate,\n  HMSUpdateListener,\n} from '../internal';\nimport { HMSAudioTrackSettingsBuilder, HMSTrackSettingsBuilder, HMSVideoTrackSettingsBuilder } from '../media/settings';\nimport { HMSSdk } from '../sdk';\nimport HMSRoom from '../sdk/models/HMSRoom';\nimport { HMSLocalPeer } from '../sdk/models/peer';\nimport { fetchWithRetry } from '../utils/fetch';\nimport { validateMediaDevicesExistence, validateRTCPeerConnection } from '../utils/validations';\n\nexport class Diagnostics implements HMSDiagnosticsInterface {\n  private recordedAudio?: string = DEFAULT_TEST_AUDIO_URL;\n  private mediaRecorder?: MediaRecorder;\n  private connectivityCheck?: ConnectivityCheck;\n  private onStopMicCheck?: () => void;\n\n  constructor(private sdk: HMSSdk, private sdkListener: HMSUpdateListener) {\n    this.sdk.setIsDiagnostics(true);\n    this.initSdkWithLocalPeer();\n  }\n\n  get localPeer() {\n    return this.sdk?.store.getLocalPeer();\n  }\n\n  checkBrowserSupport(): void {\n    validateMediaDevicesExistence();\n    validateRTCPeerConnection();\n  }\n\n  async requestPermission(check: MediaPermissionCheck): Promise<MediaPermissionCheck> {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia(check);\n      stream.getTracks().forEach(track => track.stop());\n      await this.sdk.deviceManager.init(true);\n      return {\n        audio: stream.getAudioTracks().length > 0,\n        video: stream.getVideoTracks().length > 0,\n      };\n    } catch (err) {\n      throw BuildGetMediaError(err as Error, this.sdk.localTrackManager.getErrorType(!!check.video, !!check.audio));\n    }\n  }\n\n  async startCameraCheck(inputDevice?: string) {\n    this.initSdkWithLocalPeer();\n    if (!this.localPeer) {\n      throw new Error('Local peer not found');\n    }\n\n    this.sdk.store.setSimulcastEnabled(false);\n\n    this.localPeer.role = {\n      ...diagnosticsRole,\n      publishParams: { ...diagnosticsRole.publishParams, allowed: ['video'] },\n    };\n    const settings = new HMSTrackSettingsBuilder()\n      .video(new HMSVideoTrackSettingsBuilder().deviceId(inputDevice || 'default').build())\n      .build();\n    const tracks = await this.sdk?.localTrackManager.getLocalTracks({ audio: false, video: true }, settings);\n    const track = tracks?.find(track => track.type === 'video') as HMSLocalVideoTrack;\n\n    if (!track) {\n      throw new Error('No video track found');\n    }\n\n    this.sdk?.deviceManager.init(true);\n    this.localPeer.videoTrack = track;\n    this.sdk?.listener?.onPeerUpdate(HMSPeerUpdate.PEER_LIST, [this.localPeer]);\n  }\n\n  stopCameraCheck(): void {\n    this.localPeer?.videoTrack?.cleanup();\n    if (this.localPeer) {\n      this.localPeer.videoTrack = undefined;\n    }\n  }\n\n  async startMicCheck({\n    inputDevice,\n    onError,\n    onStop,\n    time = MIC_CHECK_RECORD_DURATION,\n  }: {\n    inputDevice?: string;\n    onError?: (error: Error) => void;\n    onStop?: () => void;\n    time?: number;\n  }) {\n    this.initSdkWithLocalPeer((err: Error) => {\n      this.stopMicCheck();\n      onError?.(err);\n    });\n    const track = await this.getLocalAudioTrack(inputDevice);\n    this.sdk?.deviceManager.init(true);\n    if (!this.localPeer) {\n      throw new Error('Local peer not found');\n    }\n    if (!track) {\n      throw new Error('No audio track found');\n    }\n\n    this.localPeer.audioTrack = track;\n    this.sdk?.initPreviewTrackAudioLevelMonitor();\n    this.sdk?.listener?.onPeerUpdate(HMSPeerUpdate.PEER_LIST, [this.localPeer]);\n\n    this.mediaRecorder = new MediaRecorder(track.stream.nativeStream);\n    const chunks: Blob[] = [];\n\n    this.mediaRecorder.ondataavailable = function (e) {\n      chunks.push(e.data);\n    };\n\n    this.mediaRecorder.onstop = () => {\n      const blob = new Blob(chunks, { type: this.mediaRecorder?.mimeType });\n      this.recordedAudio = URL.createObjectURL(blob);\n      this.onStopMicCheck?.();\n    };\n\n    this.mediaRecorder.start();\n\n    const timeoutId = setTimeout(() => {\n      this.stopMicCheck();\n    }, time);\n\n    this.onStopMicCheck = () => {\n      clearTimeout(timeoutId);\n      onStop?.();\n    };\n  }\n\n  stopMicCheck(): void {\n    this.mediaRecorder?.stop();\n    this.localPeer?.audioTrack?.cleanup();\n    if (this.localPeer) {\n      this.localPeer.audioTrack = undefined;\n    }\n  }\n\n  getRecordedAudio() {\n    return this.recordedAudio;\n  }\n\n  async startConnectivityCheck(\n    progress: (state: ConnectivityState) => void,\n    completed: (result: ConnectivityCheckResult) => void,\n    region?: string,\n  ) {\n    if (!this.sdk) {\n      throw new Error('SDK not found');\n    }\n\n    this.connectivityCheck = new ConnectivityCheck(this.sdk, this.sdkListener, progress, completed);\n\n    const authToken = await this.getAuthToken(region);\n    await this.sdk.leave();\n    await this.sdk.join({ authToken, userName: 'diagnostics-test' }, this.connectivityCheck);\n    this.sdk.addConnectionQualityListener({\n      onConnectionQualityUpdate: qualityUpdates => {\n        this.connectivityCheck?.handleConnectionQualityUpdate(qualityUpdates);\n      },\n    });\n  }\n\n  async stopConnectivityCheck(): Promise<void> {\n    return this.connectivityCheck?.cleanupAndReport();\n  }\n\n  private initSdkWithLocalPeer(onError?: (error: Error) => void) {\n    this.sdkListener &&\n      this.sdk?.initStoreAndManagers({\n        ...this.sdkListener,\n        onError: (error: HMSException) => {\n          onError?.(error);\n          this.sdkListener.onError(error);\n        },\n      });\n    const localPeer = new HMSLocalPeer({\n      name: 'diagnostics-peer',\n      role: diagnosticsRole,\n      type: HMSPeerType.REGULAR,\n    });\n\n    this.sdk?.store.addPeer(localPeer);\n\n    const room = new HMSRoom('diagnostics-room');\n    this.sdk.store.setRoom(room);\n    this.sdkListener.onRoomUpdate(HMSRoomUpdate.ROOM_PEER_COUNT_UPDATED, room);\n    this.sdk?.deviceManager.init(true);\n  }\n\n  private async getAuthToken(region?: string): Promise<string> {\n    const tokenAPIURL = new URL('https://api.100ms.live/v2/diagnostics/token');\n    if (region) {\n      tokenAPIURL.searchParams.append('region', region);\n    }\n    const response = await fetchWithRetry(\n      tokenAPIURL.toString(),\n      { method: 'GET' },\n      [429, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511],\n    );\n\n    const data = await response.json();\n\n    if (!response.ok) {\n      throw ErrorFactory.APIErrors.ServerErrors(data.code, HMSAction.GET_TOKEN, data.message, false);\n    }\n\n    const { token } = data;\n    if (!token) {\n      throw Error(data.message);\n    }\n    return token;\n  }\n\n  private async getLocalAudioTrack(inputDevice?: string) {\n    if (!this.localPeer) {\n      return;\n    }\n\n    this.localPeer.role = {\n      ...diagnosticsRole,\n      publishParams: { ...diagnosticsRole.publishParams, allowed: ['audio'] },\n    };\n    const settings = new HMSTrackSettingsBuilder()\n      .audio(new HMSAudioTrackSettingsBuilder().deviceId(inputDevice || 'default').build())\n      .build();\n    const tracks = await this.sdk?.localTrackManager.getLocalTracks({ audio: true, video: false }, settings);\n    return tracks?.find(track => track.type === 'audio') as HMSLocalAudioTrack;\n  }\n}\n","import { PEER_NOTIFICATION_TYPES, POLL_NOTIFICATION_TYPES, TRACK_NOTIFICATION_TYPES } from './common/mapping';\nimport { ActionBatcher } from './sdkUtils/ActionBatcher';\nimport { isRemoteTrack } from './sdkUtils/sdkUtils';\nimport {\n  areArraysEqual,\n  isEntityUpdated,\n  mergeNewPeersInDraft,\n  mergeNewPollsInDraft,\n  mergeNewTracksInDraft,\n  mergeTrackArrayFields,\n} from './sdkUtils/storeMergeUtils';\nimport { SDKToHMS } from './adapter';\nimport { HMSNotifications } from './HMSNotifications';\nimport { HMSPlaylist } from './HMSPlaylist';\nimport { HMSSessionStore } from './HMSSessionStore';\nimport { NamedSetState } from './internalTypes';\nimport { HMSLogger } from '../common/ui-logger';\nimport { BeamSpeakerLabelsLogger } from '../controller/beam/BeamSpeakerLabelsLogger';\nimport { Diagnostics } from '../diagnostics';\nimport { HMSSessionFeedback } from '../end-call-feedback';\nimport { IHMSActions } from '../IHMSActions';\nimport { IHMSStore } from '../IHMSStore';\nimport {\n  HMSAudioMode,\n  HMSAudioPlugin,\n  HMSAudioTrack as SDKHMSAudioTrack,\n  HMSChangeMultiTrackStateParams as SDKHMSChangeMultiTrackStateParams,\n  HMSChangeMultiTrackStateRequest as SDKHMSChangeMultiTrackStateRequest,\n  HMSChangeTrackStateRequest as SDKHMSChangeTrackStateRequest,\n  HMSException as SDKHMSException,\n  HMSLeaveRoomRequest as SDKHMSLeaveRoomRequest,\n  HMSLocalAudioTrack as SDKHMSLocalAudioTrack,\n  HMSLocalTrack as SDKHMSLocalTrack,\n  HMSLocalVideoTrack as SDKHMSLocalVideoTrack,\n  HMSLogLevel,\n  HMSMediaStreamPlugin,\n  HMSPluginSupportResult,\n  HMSRemoteTrack as SDKHMSRemoteTrack,\n  HMSRemoteVideoTrack as SDKHMSRemoteVideoTrack,\n  HMSRoleChangeRequest as SDKHMSRoleChangeRequest,\n  HMSScreenShareConfig,\n  HMSSimulcastLayer,\n  HMSTrack as SDKHMSTrack,\n  HMSVideoPlugin,\n  HMSVideoTrack as SDKHMSVideoTrack,\n  SessionStoreUpdate,\n} from '../internal';\nimport * as sdkTypes from '../internal';\nimport { MessageNotification } from '../notification-manager';\nimport {\n  createDefaultStoreState,\n  HMSChangeMultiTrackStateParams,\n  HMSGenericTypes,\n  HMSMediaSettings,\n  HMSMessage,\n  HMSMessageInput,\n  HMSPeer,\n  HMSPeerID,\n  HMSPeerListIteratorOptions,\n  HMSPlaylistType,\n  HMSRoleName,\n  HMSRoomState,\n  HMSStore,\n  HMSTrack,\n  HMSTrackID,\n  HMSTrackSource,\n  HMSVideoTrack,\n  IHMSPlaylistActions,\n  IHMSSessionStoreActions,\n} from '../schema';\nimport { HMSSdk } from '../sdk';\nimport {\n  HMSRoleChangeRequest,\n  selectIsConnectedToRoom,\n  selectIsInPreview,\n  selectIsLocalScreenShared,\n  selectIsLocalVideoDisplayEnabled,\n  selectIsLocalVideoEnabled,\n  selectLocalAudioTrackID,\n  selectLocalMediaSettings,\n  selectLocalPeer,\n  selectLocalPeerID,\n  selectLocalTrackIDs,\n  selectLocalVideoTrackID,\n  selectPeerByID,\n  selectPeersMap,\n  selectPermissions,\n  selectRolesMap,\n  selectRoomState,\n  selectTrackByID,\n  selectTracksMap,\n  selectVideoTrackByID,\n} from '../selectors';\nimport { FindPeerByNameRequestParams } from '../signal/interfaces';\nimport { HMSStats } from '../webrtc-stats';\n\n/**\n * This class implements the IHMSActions interface for 100ms SDK. It connects with SDK\n * and takes control of data management by letting every action pass through it. The\n * passed in store is ensured to be the single source of truth reflecting current\n * room related data at any point in time.\n *\n * @privateRemarks\n * Things to keep in mind while updating store -\n * 1. Treat setState as an atomic operation, if an action results in multiple changes,\n *    the changes should all happen within single setState function.\n * 2. While updating the state it's very important to not update the reference if\n *    something is unchanged. Copy data in same reference object don't assign new\n *    object.\n * 3. Mental Model(1) - Actions from backend -> Listeners of this class -> update store -> views update themselves\n *    eg. for this - peer added, remote muted etc.\n * 4. Mental Model(2) - Actions from local -> View calls actions -> update store -> views update themselves\n *    eg. local track enabled, join, leave etc.\n * 5. State is immutable, a new copy with new references is created when there is a change,\n *    if you try to modify state outside of setState, there'll be an error.\n */\nexport class HMSSDKActions<T extends HMSGenericTypes = { sessionStore: Record<string, any> }>\n  implements IHMSActions<T>\n{\n  private readonly sdk: HMSSdk;\n  private readonly store: IHMSStore<T>;\n  private isRoomJoinCalled = false;\n  private hmsNotifications: HMSNotifications<T>;\n  private ignoredMessageTypes: string[] = [];\n  private actionBatcher: ActionBatcher<T>;\n  audioPlaylist!: IHMSPlaylistActions;\n  videoPlaylist!: IHMSPlaylistActions;\n  sessionStore: IHMSSessionStoreActions<T['sessionStore']>;\n  private beamSpeakerLabelsLogger?: BeamSpeakerLabelsLogger<T>;\n\n  constructor(store: IHMSStore<T>, sdk: HMSSdk, notificationManager: HMSNotifications<T>) {\n    this.store = store;\n    this.sdk = sdk;\n    this.hmsNotifications = notificationManager;\n\n    this.sessionStore = new HMSSessionStore<T['sessionStore']>(this.sdk, this.setSessionStoreValueLocally.bind(this));\n    this.actionBatcher = new ActionBatcher(store);\n  }\n  submitSessionFeedback(feedback: HMSSessionFeedback, eventEndpoint?: string): Promise<void> {\n    return this.sdk.submitSessionFeedback(feedback, eventEndpoint);\n  }\n\n  getLocalTrack(trackID: string) {\n    return this.sdk.store.getLocalPeerTracks().find(track => track.trackId === trackID);\n  }\n\n  get interactivityCenter() {\n    return this.sdk.getInteractivityCenter();\n  }\n\n  setPlaylistSettings(settings: sdkTypes.HMSPlaylistSettings): void {\n    this.sdk.updatePlaylistSettings(settings);\n  }\n\n  async refreshDevices() {\n    await this.sdk.refreshDevices();\n  }\n\n  async unblockAudio() {\n    await this.sdk.getAudioOutput().unblockAutoplay();\n  }\n\n  async setVolume(value: number, trackId?: HMSTrackID) {\n    if (trackId) {\n      await this.setTrackVolume(value, trackId);\n    } else {\n      await this.sdk.getAudioOutput().setVolume(value);\n      this.syncRoomState('setOutputVolume');\n    }\n  }\n\n  async setAudioOutputDevice(deviceId: string): Promise<void> {\n    const deviceInfo = await this.sdk.getAudioOutput().setDevice(deviceId);\n    if (deviceInfo) {\n      this.setState(draftStore => {\n        draftStore.settings.audioOutputDeviceId = deviceId;\n      }, 'setAudioOutputDevice');\n    }\n  }\n\n  async setPreferredLayer(trackId: string, layer: sdkTypes.HMSPreferredSimulcastLayer) {\n    const track = this.getTrackById(trackId);\n    if (track) {\n      if (track instanceof SDKHMSRemoteVideoTrack) {\n        //@ts-ignore\n        if (layer === HMSSimulcastLayer.NONE) {\n          HMSLogger.d(`layer ${HMSSimulcastLayer.NONE} will be ignored`);\n          return;\n        }\n        const alreadyInSameState = this.store.getState(selectVideoTrackByID(trackId))?.preferredLayer === layer;\n        if (alreadyInSameState) {\n          HMSLogger.d(`preferred layer is already ${layer}`);\n          return;\n        }\n        this.setState(draftStore => {\n          const track = draftStore.tracks[trackId] as HMSVideoTrack;\n          if (track) {\n            track.preferredLayer = layer;\n          }\n        }, 'setPreferredLayer');\n        await track.setPreferredLayer(layer);\n      } else {\n        HMSLogger.d(`track ${trackId} is not a remote video track`);\n      }\n    } else {\n      this.logPossibleInconsistency(`track ${trackId} not present, unable to set preffer layer`);\n    }\n  }\n\n  getNativeTrackById(trackId: string) {\n    return this.sdk.store.getTrackById(trackId)?.nativeTrack;\n  }\n\n  getTrackById(trackId: string) {\n    return this.sdk.store.getTrackById(trackId);\n  }\n\n  getAuthTokenByRoomCode(\n    tokenRequest: sdkTypes.TokenRequest,\n    tokenRequestOptions?: sdkTypes.TokenRequestOptions,\n  ): Promise<string> {\n    return this.sdk.getAuthTokenByRoomCode(tokenRequest, tokenRequestOptions);\n  }\n\n  async preview(config: sdkTypes.HMSPreviewConfig) {\n    const roomState = this.store.getState(selectRoomState);\n    if (roomState === HMSRoomState.Preview || roomState === HMSRoomState.Connecting) {\n      this.logPossibleInconsistency('attempting to call preview while room is in preview/connecting');\n      return;\n    }\n\n    try {\n      if (roomState !== HMSRoomState.Connected) {\n        this.setState(store => {\n          store.room.roomState = HMSRoomState.Connecting;\n        }, 'connecting');\n      }\n      await this.sdkPreviewWithListeners(config);\n    } catch (err) {\n      HMSLogger.e('Cannot show preview. Failed to connect to room - ', err);\n      throw err;\n    }\n  }\n\n  async cancelMidCallPreview() {\n    return this.sdk.cancelMidCallPreview();\n  }\n\n  async join(config: sdkTypes.HMSConfig) {\n    if (this.isRoomJoinCalled) {\n      this.logPossibleInconsistency('room join is called again');\n      return; // ignore\n    }\n    try {\n      this.isRoomJoinCalled = true;\n      this.setState(store => {\n        store.room.roomState = HMSRoomState.Connecting;\n      }, 'join');\n      await this.sdkJoinWithListeners(config);\n    } catch (err) {\n      this.isRoomJoinCalled = false; // so it can be called again if needed\n      HMSLogger.e('Failed to connect to room - ', err);\n      throw err;\n    }\n  }\n\n  async leave() {\n    const isConnectedToRoom = this.store.getState(selectIsConnectedToRoom);\n    let notifyServer = true;\n    if (!isConnectedToRoom) {\n      notifyServer = false;\n      this.logPossibleInconsistency('room leave is called when no room is connected');\n    }\n    const currentRoomState = this.store.getState(selectRoomState);\n    this.setState(store => {\n      store.room.roomState = HMSRoomState.Disconnecting;\n    }, 'leaving');\n    return this.sdk\n      .leave(notifyServer)\n      .then(() => {\n        this.resetState('leave');\n        if (this.beamSpeakerLabelsLogger) {\n          this.beamSpeakerLabelsLogger.stop().catch(HMSLogger.e);\n        }\n        HMSLogger.i('left room');\n      })\n      .catch(err => {\n        HMSLogger.e('error in leaving room - ', err);\n        this.setState(store => {\n          store.room.roomState = currentRoomState;\n        }, 'revertLeave');\n      });\n  }\n\n  async setScreenShareEnabled(enabled: boolean, config?: HMSScreenShareConfig) {\n    // TODO: remove this, purely for backward compatibility\n    if (typeof config === 'boolean') {\n      config = { audioOnly: config };\n    }\n    try {\n      if (enabled) {\n        await this.startScreenShare(config);\n      } else {\n        await this.stopScreenShare();\n      }\n    } catch (error) {\n      this.hmsNotifications.sendError(SDKToHMS.convertException(error as SDKHMSException));\n      throw error;\n    }\n  }\n\n  async addTrack(track: MediaStreamTrack, type: HMSTrackSource = 'regular') {\n    await this.sdk.addTrack(track, type);\n    this.syncRoomState('addTrack');\n  }\n\n  async removeTrack(trackId: string) {\n    await this.sdk.removeTrack(trackId);\n    this.syncRoomState('removeTrack');\n  }\n\n  async setLocalAudioEnabled(enabled: boolean) {\n    const trackID = this.store.getState(selectLocalAudioTrackID);\n    if (trackID) {\n      await this.setEnabledTrack(trackID, enabled);\n    }\n  }\n\n  async setLocalVideoEnabled(enabled: boolean) {\n    const trackID = this.store.getState(selectLocalVideoTrackID);\n    if (trackID) {\n      await this.setEnabledTrack(trackID, enabled);\n    }\n  }\n\n  async setEnabledTrack(trackID: string, enabled: boolean) {\n    // if mute/unmute is clicked multiple times for same operation, ignore repeated ones\n    const alreadyInSameState = this.store.getState().tracks[trackID]?.enabled === enabled;\n    if (alreadyInSameState) {\n      // it could also be a case of possible inconsistency where UI state is out of sync with truth\n      this.logPossibleInconsistency(`local track[${trackID}] enabled state - ${enabled}`);\n      return;\n    }\n    this.setState(store => {\n      // show on UI immediately\n      if (!store.tracks[trackID]) {\n        this.logPossibleInconsistency('track id not found for setEnabled');\n      } else {\n        store.tracks[trackID].displayEnabled = enabled;\n      }\n    }, 'displayEnabled');\n    try {\n      await this.setEnabledSDKTrack(trackID, enabled); // do the operation\n      this.syncRoomState('setEnabled');\n    } catch (err) {\n      // rollback on failure\n      this.setState(store => {\n        store.tracks[trackID].displayEnabled = !enabled;\n      }, 'rollbackDisplayEnabled');\n      this.hmsNotifications.sendError(SDKToHMS.convertException(err as SDKHMSException));\n      throw err;\n    }\n    const type = enabled ? sdkTypes.HMSTrackUpdate.TRACK_UNMUTED : sdkTypes.HMSTrackUpdate.TRACK_MUTED;\n    this.hmsNotifications.sendTrackUpdate(type, trackID);\n  }\n\n  async setAudioSettings(settings: Partial<sdkTypes.HMSAudioTrackSettings>) {\n    const trackID = this.store.getState(selectLocalAudioTrackID);\n\n    if (trackID) {\n      await this.setSDKLocalAudioTrackSettings(trackID, settings);\n      this.syncRoomState('setAudioSettings');\n    }\n  }\n\n  async setVideoSettings(settings: Partial<sdkTypes.HMSVideoTrackSettings>) {\n    const trackID = this.store.getState(selectLocalVideoTrackID);\n    if (trackID) {\n      await this.setSDKLocalVideoTrackSettings(trackID, settings);\n      this.syncRoomState('setVideoSettings');\n    }\n  }\n\n  async switchCamera(): Promise<void> {\n    const trackID = this.store.getState(selectLocalVideoTrackID);\n    if (trackID) {\n      const sdkTrack = this.sdk.store\n        .getLocalPeerTracks()\n        .find(track => track.trackId === trackID) as SDKHMSLocalVideoTrack;\n      if (sdkTrack) {\n        await sdkTrack.switchCamera();\n        this.syncRoomState('switchCamera');\n      }\n    }\n  }\n\n  sendMessage(message: string) {\n    this.sendBroadcastMessage(message);\n  }\n\n  async sendBroadcastMessage(message: string, type?: string) {\n    const { message_id: id, timestamp: time } = await this.sdk.sendBroadcastMessage(message, type);\n    this.updateMessageInStore({ message, type, id, time });\n  }\n\n  async sendGroupMessage(message: string, roles: string[], type?: string) {\n    const storeRoles = this.store.getState(selectRolesMap);\n    const hmsRoles = roles.map(roleName => {\n      return storeRoles[roleName];\n    });\n    const { message_id: id, timestamp: time } = await this.sdk.sendGroupMessage(message, hmsRoles, type);\n    this.updateMessageInStore({ message, recipientRoles: roles, type, id, time });\n  }\n\n  async sendDirectMessage(message: string, peerID: string, type?: string) {\n    const { message_id: id, timestamp: time } = await this.sdk.sendDirectMessage(message, peerID, type);\n    this.updateMessageInStore({ message, recipientPeer: peerID, type, id, time });\n  }\n\n  private updateMessageInStore(messageInput: HMSMessageInput) {\n    if (!messageInput.message) {\n      HMSLogger.w('sendMessage', 'Failed to send message', messageInput);\n      throw Error(`sendMessage Failed - ${JSON.stringify(messageInput)}`);\n    }\n    const ignoreMessage = !!messageInput.type && this.ignoredMessageTypes.includes(messageInput.type);\n    if (ignoreMessage) {\n      return;\n    }\n    const localPeer = this.sdk.getLocalPeer();\n    const hmsMessage: HMSMessage = {\n      read: true,\n      id: messageInput.id,\n      time: new Date(messageInput.time),\n      message: messageInput.message,\n      type: messageInput.type || 'chat',\n      recipientPeer: messageInput.recipientPeer,\n      recipientRoles: messageInput.recipientRoles,\n      senderName: localPeer?.name,\n      sender: localPeer?.peerId,\n      senderRole: localPeer?.role?.name,\n      ignored: false,\n    };\n    // update directly to store without batch\n    this.setState(store => {\n      store.messages.byID[hmsMessage.id] = hmsMessage;\n      store.messages.allIDs.push(hmsMessage.id);\n    }, 'newMessage');\n  }\n\n  setMessageRead(readStatus: boolean, messageId?: string) {\n    this.setState(store => {\n      if (messageId) {\n        if (!store.messages.byID[messageId]) {\n          this.logPossibleInconsistency('no message with id is found');\n        } else {\n          store.messages.byID[messageId].read = readStatus;\n        }\n      } else {\n        store.messages.allIDs.forEach((id: string) => {\n          store.messages.byID[id].read = readStatus;\n        });\n      }\n    }, 'setMessageRead');\n  }\n\n  async attachVideo(trackID: string, videoElement: HTMLVideoElement) {\n    if (this.localAndVideoUnmuting(trackID)) {\n      // wait till video unmute has finished\n      return new Promise<void>(resolve => {\n        const unsub = this.store.subscribe(async enabled => {\n          if (enabled) {\n            await this.attachVideoInternal(trackID, videoElement);\n            unsub();\n            resolve();\n          }\n        }, selectIsLocalVideoEnabled);\n      });\n    } else {\n      await this.attachVideoInternal(trackID, videoElement);\n    }\n  }\n\n  async detachVideo(trackID: string, videoElement: HTMLVideoElement) {\n    const sdkTrack = this.getTrackById(trackID);\n    if (sdkTrack?.type === 'video') {\n      await this.sdk.detachVideo(sdkTrack as SDKHMSVideoTrack, videoElement);\n    } else {\n      if (videoElement) {\n        videoElement.srcObject = null; // so chrome can clean up\n      }\n      HMSLogger.d('possible inconsistency detected - no video track found to remove sink');\n    }\n  }\n\n  async addPluginToVideoTrack(plugin: HMSVideoPlugin, pluginFrameRate?: number): Promise<void> {\n    return this.addRemoveVideoPlugin(plugin, 'add', pluginFrameRate);\n  }\n\n  async addPluginsToVideoStream(plugins: HMSMediaStreamPlugin[]): Promise<void> {\n    return this.addRemoveMediaStreamVideoPlugins(plugins, 'add');\n  }\n\n  async removePluginsFromVideoStream(plugins: HMSMediaStreamPlugin[]): Promise<void> {\n    return this.addRemoveMediaStreamVideoPlugins(plugins, 'remove');\n  }\n\n  async addPluginToAudioTrack(plugin: HMSAudioPlugin): Promise<void> {\n    return this.addRemoveAudioPlugin(plugin, 'add');\n  }\n\n  validateVideoPluginSupport(plugin: HMSVideoPlugin): HMSPluginSupportResult {\n    let result = {} as HMSPluginSupportResult;\n    result.isSupported = false; //Setting default to false\n    if (!plugin) {\n      HMSLogger.w('no plugin passed in for checking support');\n      result.errMsg = 'no plugin passed in for checking support';\n      return result;\n    }\n    const trackID = this.store.getState(selectLocalVideoTrackID);\n    if (!trackID) {\n      HMSLogger.w('video Track not added to local peer yet');\n      result.errMsg = 'call this function only after local peer has video track';\n      return result;\n    }\n    const sdkTrack = this.getTrackById(trackID);\n    if (sdkTrack) {\n      result = (sdkTrack as SDKHMSLocalVideoTrack).validatePlugin(plugin);\n    } else {\n      HMSLogger.w(`track ${trackID} not present, unable to validate plugin`);\n      result.errMsg = `track ${trackID} not present, unable to validate plugin`;\n    }\n\n    return result;\n  }\n\n  validateAudioPluginSupport(plugin: HMSAudioPlugin): HMSPluginSupportResult {\n    let result = {} as HMSPluginSupportResult;\n    result.isSupported = false; //Setting default to false\n    if (!plugin) {\n      HMSLogger.w('no plugin passed in for checking support\"');\n      result.errMsg = 'no plugin passed in for checking support\"';\n      return result;\n    }\n    const trackID = this.store.getState(selectLocalAudioTrackID);\n    if (!trackID) {\n      HMSLogger.w('audio track not added to local peer yet');\n      result.errMsg = 'call this function only after local peer has audio track';\n      return result;\n    }\n    const sdkTrack = this.getTrackById(trackID);\n    if (sdkTrack) {\n      result = (sdkTrack as SDKHMSLocalAudioTrack).validatePlugin(plugin);\n    } else {\n      HMSLogger.w(`track ${trackID} not present, unable to validate plugin`);\n      result.errMsg = `track ${trackID} not present, unable to validate plugin`;\n    }\n\n    return result;\n  }\n\n  async removePluginFromVideoTrack(plugin: HMSVideoPlugin): Promise<void> {\n    return this.addRemoveVideoPlugin(plugin, 'remove');\n  }\n  async removePluginFromAudioTrack(plugin: HMSAudioPlugin): Promise<void> {\n    return this.addRemoveAudioPlugin(plugin, 'remove');\n  }\n\n  async changeRole(forPeerId: string, toRole: string, force = false) {\n    await this.sdk.changeRoleOfPeer(forPeerId, toRole, force);\n  }\n\n  async changeRoleOfPeer(forPeerId: string, toRole: string, force = false) {\n    await this.sdk.changeRoleOfPeer(forPeerId, toRole, force);\n  }\n\n  async changeRoleOfPeersWithRoles(roles: HMSRoleName[], toRole: HMSRoleName) {\n    const rolesToBeChanged = this.sdk.getRoles().filter(role => roles.includes(role.name));\n    await this.sdk.changeRoleOfPeersWithRoles(rolesToBeChanged, toRole);\n  }\n\n  // TODO: separate out role related things in another file\n  async acceptChangeRole(request: HMSRoleChangeRequest) {\n    const sdkPeer: sdkTypes.HMSPeer | undefined = request.requestedBy\n      ? this.getSDKHMSPeer(request.requestedBy.id)\n      : undefined;\n    if (!sdkPeer) {\n      HMSLogger.w(`peer for which role change is requested no longer available - ${request.requestedBy}`);\n    }\n    const sdkRequest = {\n      requestedBy: sdkPeer,\n      role: request.role,\n      token: request.token,\n    };\n    // TODO: hotfix for HMS-3639. Needs a better solution\n    await this.sdk.acceptChangeRole(sdkRequest);\n    this.removeRoleChangeRequest(request);\n  }\n\n  async raiseLocalPeerHand() {\n    await this.sdk.raiseLocalPeerHand();\n  }\n  async lowerLocalPeerHand() {\n    await this.sdk.lowerLocalPeerHand();\n  }\n  async raiseRemotePeerHand(peerId: string) {\n    await this.sdk.raiseRemotePeerHand(peerId);\n  }\n  async lowerRemotePeerHand(peerId: string) {\n    await this.sdk.lowerRemotePeerHand(peerId);\n  }\n\n  async getPeer(peerId: string) {\n    const peer = await this.sdk.getPeer(peerId);\n    if (peer) {\n      return SDKToHMS.convertPeer(peer) as HMSPeer;\n    }\n    return undefined;\n  }\n\n  async findPeerByName(options: FindPeerByNameRequestParams) {\n    const { offset, peers, eof } = await this.sdk.findPeerByName(options);\n    return { offset, eof, peers: peers.map(peer => SDKToHMS.convertPeer(peer) as HMSPeer) };\n  }\n\n  getPeerListIterator(options?: HMSPeerListIteratorOptions) {\n    const iterator = this.sdk.getPeerListIterator(options);\n    return {\n      hasNext: () => iterator.hasNext(),\n      next: async () => {\n        const sdkPeers = await iterator.next();\n        return sdkPeers.map(peer => SDKToHMS.convertPeer(peer) as HMSPeer);\n      },\n      findPeers: async () => {\n        const sdkPeers = await iterator.findPeers();\n        return sdkPeers.map(peer => SDKToHMS.convertPeer(peer) as HMSPeer);\n      },\n      getTotal: () => iterator.getTotal(),\n    };\n  }\n\n  initAppData(appData: Record<string, any>) {\n    this.setState(store => {\n      store.appData = appData;\n    }, 'initAppData');\n  }\n\n  setAppData(key: string, value: any, merge?: boolean) {\n    const isValueObject = value?.constructor.name === 'Object';\n    this.setState(store => {\n      if (store.appData) {\n        if (merge && isValueObject) {\n          Object.assign(store.appData[key], value);\n        } else {\n          store.appData[key] = value;\n        }\n      } else {\n        const newAppData = {\n          [key]: value,\n        };\n        store.appData = newAppData;\n      }\n    }, `setAppData-${key}`);\n  }\n\n  /**\n   * @privateRemarks\n   * there is no corresponding sdk method for rejecting change role but as the store also maintains the full\n   * state of current pending requests, this method allows it to clean up when the request is rejected\n   */\n  rejectChangeRole(request: HMSRoleChangeRequest) {\n    this.removeRoleChangeRequest(request);\n  }\n\n  async endRoom(lock: boolean, reason: string) {\n    const permissions = this.store.getState(selectPermissions);\n    if (!permissions?.endRoom) {\n      HMSLogger.w('You are not allowed to perform this action - endRoom');\n      return;\n    }\n    const currentRoomState = this.store.getState(selectRoomState);\n    this.setState(store => {\n      store.room.roomState = HMSRoomState.Disconnecting;\n    }, 'endingRoom');\n    try {\n      await this.sdk.endRoom(lock, reason);\n      this.resetState('endRoom');\n    } catch (err) {\n      HMSLogger.e('error in ending room - ', err);\n      this.setState(store => {\n        store.room.roomState = currentRoomState;\n      }, 'revertEndRoom');\n    }\n  }\n\n  async removePeer(peerID: string, reason: string) {\n    const localPeerId = this.sdk.getLocalPeer()?.peerId;\n    if (peerID !== localPeerId) {\n      await this.sdk.removePeer(peerID, reason);\n    }\n  }\n\n  async startRTMPOrRecording(params: sdkTypes.RTMPRecordingConfig) {\n    await this.sdk.startRTMPOrRecording(params);\n  }\n\n  async stopRTMPAndRecording() {\n    await this.sdk.stopRTMPAndRecording();\n  }\n\n  async startHLSStreaming(params?: sdkTypes.HLSConfig) {\n    await this.sdk.startHLSStreaming(params);\n  }\n\n  async stopHLSStreaming(params?: sdkTypes.HLSConfig): Promise<void> {\n    await this.sdk.stopHLSStreaming(params);\n  }\n\n  async startTranscription(params: sdkTypes.TranscriptionConfig) {\n    await this.sdk.startTranscription(params);\n  }\n\n  async stopTranscription(params: sdkTypes.TranscriptionConfig): Promise<void> {\n    await this.sdk.stopTranscription(params);\n  }\n\n  async sendHLSTimedMetadata(metadataList: sdkTypes.HLSTimedMetadata[]): Promise<void> {\n    await this.sdk.sendHLSTimedMetadata(metadataList);\n  }\n  async changeName(name: string) {\n    await this.sdk.changeName(name);\n  }\n\n  async changeMetadata(metadata: string | any) {\n    if (typeof metadata !== 'string') {\n      metadata = JSON.stringify(metadata);\n    }\n    await this.sdk.changeMetadata(metadata);\n  }\n\n  async setSessionMetadata(metadata: any) {\n    await this.sdk.setSessionMetadata(metadata);\n    this.setState(draftStore => {\n      draftStore.sessionMetadata = metadata;\n    }, 'setSessionMetadata');\n    this.setSessionStoreValueLocally({ key: 'default', value: metadata }, 'setSessionMetadata');\n  }\n\n  async populateSessionMetadata(): Promise<void> {\n    const metadata = await this.sdk.getSessionMetadata();\n    this.setState(draftStore => {\n      draftStore.sessionMetadata = metadata;\n    }, 'populateSessionMetadata');\n    this.setSessionStoreValueLocally({ key: 'default', value: metadata }, 'populateSessionmetadata');\n  }\n\n  async setRemoteTrackEnabled(trackID: HMSTrackID | HMSTrackID[], enabled: boolean) {\n    if (typeof trackID === 'string') {\n      const track = this.getTrackById(trackID);\n      if (track && isRemoteTrack(track)) {\n        await this.sdk.changeTrackState(track as SDKHMSRemoteTrack, enabled);\n      } else {\n        this.logPossibleInconsistency(`No remote track with ID ${trackID} found for change track state`);\n      }\n    } else if (Array.isArray(trackID)) {\n      trackID.forEach(id => this.setRemoteTrackEnabled(id, enabled));\n    }\n  }\n\n  async setRemoteTracksEnabled(params: HMSChangeMultiTrackStateParams) {\n    const sdkRequest: SDKHMSChangeMultiTrackStateParams = {\n      enabled: params.enabled,\n      type: params.type,\n      source: params.source,\n    };\n    if (params.roles) {\n      const rolesMap = this.store.getState(selectRolesMap);\n      sdkRequest.roles = params.roles.map(role => rolesMap[role]);\n    }\n    await this.sdk.changeMultiTrackState(sdkRequest);\n  }\n\n  setLogLevel(level: HMSLogLevel) {\n    HMSLogger.level = level;\n    this.sdk.setLogLevel(level);\n  }\n\n  setFrameworkInfo(frameworkInfo: sdkTypes.HMSFrameworkInfo) {\n    this.sdk.setFrameworkInfo(frameworkInfo);\n  }\n\n  ignoreMessageTypes(msgTypes: string[], replace = false) {\n    if (replace) {\n      this.ignoredMessageTypes = msgTypes;\n    } else {\n      for (const msgType of msgTypes) {\n        if (!this.ignoredMessageTypes.includes(msgType)) {\n          this.ignoredMessageTypes.push(msgType);\n        }\n      }\n    }\n  }\n\n  async enableBeamSpeakerLabelsLogging() {\n    if (!this.beamSpeakerLabelsLogger) {\n      HMSLogger.i('enabling beam speaker labels logging');\n      this.beamSpeakerLabelsLogger = new BeamSpeakerLabelsLogger(this.store, this);\n      await this.beamSpeakerLabelsLogger.start();\n    }\n  }\n  initDiagnostics() {\n    const diagnostics = new Diagnostics(this.sdk, {\n      onJoin: this.onJoin.bind(this),\n      onPreview: this.onPreview.bind(this),\n      onRoomUpdate: this.onRoomUpdate.bind(this),\n      onPeerUpdate: this.onPeerUpdate.bind(this),\n      onTrackUpdate: this.onTrackUpdate.bind(this),\n      onMessageReceived: this.onMessageReceived.bind(this),\n      onError: this.onError.bind(this),\n      onReconnected: this.onReconnected.bind(this),\n      onReconnecting: this.onReconnecting.bind(this),\n      onRoleChangeRequest: this.onRoleChangeRequest.bind(this),\n      onRoleUpdate: this.onRoleUpdate.bind(this),\n      onDeviceChange: this.onDeviceChange.bind(this),\n      onChangeTrackStateRequest: this.onChangeTrackStateRequest.bind(this),\n      onChangeMultiTrackStateRequest: this.onChangeMultiTrackStateRequest.bind(this),\n      onRemovedFromRoom: this.onRemovedFromRoom.bind(this),\n      onNetworkQuality: this.onNetworkQuality.bind(this),\n      onSessionStoreUpdate: this.onSessionStoreUpdate.bind(this),\n      onPollsUpdate: this.onPollsUpdate.bind(this),\n      onWhiteboardUpdate: this.onWhiteboardUpdate.bind(this),\n    });\n    this.sdk.addAudioListener({\n      onAudioLevelUpdate: this.onAudioLevelUpdate.bind(this),\n    });\n    this.sdk.addConnectionQualityListener({\n      onConnectionQualityUpdate: this.onConnectionQualityUpdate.bind(this),\n    });\n    return diagnostics;\n  }\n\n  private resetState(reason = 'resetState') {\n    this.isRoomJoinCalled = false;\n    HMSLogger.cleanup();\n    this.setState(store => {\n      Object.assign(store, createDefaultStoreState());\n    }, reason);\n  }\n\n  getDebugInfo() {\n    return this.sdk.getDebugInfo();\n  }\n\n  private async sdkJoinWithListeners(config: sdkTypes.HMSConfig) {\n    await this.sdk.join(config, {\n      onJoin: this.onJoin.bind(this),\n      onPreview: this.onPreview.bind(this),\n      onRoomUpdate: this.onRoomUpdate.bind(this),\n      onPeerUpdate: this.onPeerUpdate.bind(this),\n      onTrackUpdate: this.onTrackUpdate.bind(this),\n      onMessageReceived: this.onMessageReceived.bind(this),\n      onError: this.onError.bind(this),\n      onReconnected: this.onReconnected.bind(this),\n      onReconnecting: this.onReconnecting.bind(this),\n      onRoleChangeRequest: this.onRoleChangeRequest.bind(this),\n      onRoleUpdate: this.onRoleUpdate.bind(this),\n      onDeviceChange: this.onDeviceChange.bind(this),\n      onChangeTrackStateRequest: this.onChangeTrackStateRequest.bind(this),\n      onChangeMultiTrackStateRequest: this.onChangeMultiTrackStateRequest.bind(this),\n      onRemovedFromRoom: this.onRemovedFromRoom.bind(this),\n      onNetworkQuality: this.onNetworkQuality.bind(this),\n      onSessionStoreUpdate: this.onSessionStoreUpdate.bind(this),\n      onPollsUpdate: this.onPollsUpdate.bind(this),\n      onWhiteboardUpdate: this.onWhiteboardUpdate.bind(this),\n      onSFUMigration: this.onSFUMigration.bind(this),\n    });\n    this.sdk.addAudioListener({\n      onAudioLevelUpdate: this.onAudioLevelUpdate.bind(this),\n    });\n    this.sdk.addConnectionQualityListener({\n      onConnectionQualityUpdate: this.onConnectionQualityUpdate.bind(this),\n    });\n  }\n\n  private onSFUMigration() {\n    this.syncRoomState('SFUMigration');\n  }\n  private onRemovedFromRoom(request: SDKHMSLeaveRoomRequest) {\n    const requestedBy = this.store.getState(selectPeerByID(request.requestedBy?.peerId));\n    this.hmsNotifications.sendLeaveRoom({\n      ...request,\n      requestedBy: requestedBy || undefined,\n    });\n    const action = request.roomEnded || !requestedBy ? 'roomEnded' : 'removedFromRoom';\n    HMSLogger.i(`resetting state after peer removed ${action}`, request);\n    this.resetState(action);\n  }\n\n  private onDeviceChange(event: sdkTypes.HMSDeviceChangeEvent) {\n    const devices = event.devices;\n    if (!devices) {\n      return;\n    }\n    const localPeer = this.store.getState(selectLocalPeer);\n    this.setState(store => {\n      if (!areArraysEqual(store.devices.audioInput, devices.audioInput)) {\n        store.devices.audioInput = devices.audioInput;\n      }\n      if (!areArraysEqual(store.devices.videoInput, devices.videoInput)) {\n        store.devices.videoInput = devices.videoInput;\n      }\n      if (!areArraysEqual(store.devices.audioOutput, devices.audioOutput)) {\n        store.devices.audioOutput = devices.audioOutput;\n      }\n      const sdkLocalPeer = this.sdk.getLocalPeer();\n      if (localPeer?.id && sdkLocalPeer) {\n        Object.assign(store.settings, this.getMediaSettings(sdkLocalPeer));\n      }\n    }, 'deviceChange');\n    // send notification only on device change - selection is present\n    if (event.selection) {\n      const notification = SDKToHMS.convertDeviceChangeUpdate(event);\n      this.hmsNotifications.sendDeviceChange(notification);\n    }\n  }\n\n  private async sdkPreviewWithListeners(config: sdkTypes.HMSPreviewConfig) {\n    await this.sdk.preview(config, {\n      onPreview: this.onPreview.bind(this),\n      onError: this.onError.bind(this),\n      onReconnected: this.onReconnected.bind(this),\n      onReconnecting: this.onReconnecting.bind(this),\n      onDeviceChange: this.onDeviceChange.bind(this),\n      onRoomUpdate: this.onRoomUpdate.bind(this),\n      onPeerUpdate: this.onPeerUpdate.bind(this),\n      onNetworkQuality: this.onNetworkQuality.bind(this),\n      onTrackUpdate: this.onTrackUpdate.bind(this),\n    });\n    this.sdk.addAudioListener({\n      onAudioLevelUpdate: this.onAudioLevelUpdate.bind(this),\n    });\n  }\n\n  private onNetworkQuality(quality: number) {\n    this.setState(store => {\n      /*\n       * if store does not have peerId yet, fetch from sdk directly.\n       * sdk will have the localpeer already set.\n       */\n      const peerId = store.room.localPeer || this.sdk.getLocalPeer()?.peerId;\n      if (peerId) {\n        store.connectionQualities[peerId] = { peerID: peerId, downlinkQuality: quality };\n      }\n    }, 'ConnectionQuality');\n  }\n\n  private onSessionStoreUpdate(updates: SessionStoreUpdate[]) {\n    this.setSessionStoreValueLocally(updates, 'sessionStoreUpdate');\n  }\n\n  private onPollsUpdate(actionType: sdkTypes.HMSPollsUpdate, polls: sdkTypes.HMSPoll[]) {\n    const actionName = POLL_NOTIFICATION_TYPES[actionType];\n    this.setState(draftStore => {\n      const pollsObject = polls.reduce((acc, poll) => {\n        acc[poll.id] = {\n          ...poll,\n          questions: poll.questions?.map(question => ({\n            ...question,\n            answer: question.answer ? { ...question.answer } : undefined,\n            options: question.options?.map(option => ({ ...option })),\n            responses: question.responses?.map(response => ({ ...response })),\n          })),\n        };\n        return acc;\n      }, {} as { [key: string]: sdkTypes.HMSPoll });\n      mergeNewPollsInDraft(draftStore.polls, pollsObject);\n    }, actionName);\n    polls.forEach(poll => this.hmsNotifications.sendPollUpdate(actionType, poll.id));\n  }\n\n  private onWhiteboardUpdate(whiteboard: sdkTypes.HMSWhiteboard) {\n    this.setState(draftStore => {\n      draftStore.whiteboards[whiteboard.id] = whiteboard;\n    }, 'whiteboardUpdate');\n  }\n\n  private async startScreenShare(config?: HMSScreenShareConfig) {\n    const isScreenShared = this.store.getState(selectIsLocalScreenShared);\n    if (!isScreenShared) {\n      await this.sdk.startScreenShare(() => this.syncRoomState('screenshareStopped'), config);\n      this.syncRoomState('startScreenShare');\n    } else {\n      this.logPossibleInconsistency(\"start screenshare is called while it's on\");\n    }\n  }\n\n  private async stopScreenShare() {\n    const isScreenShared = this.store.getState(selectIsLocalScreenShared);\n    if (isScreenShared) {\n      await this.sdk.stopScreenShare();\n      this.syncRoomState('stopScreenShare');\n    } else {\n      this.logPossibleInconsistency(\"stop screenshare is called while it's not on\");\n    }\n  }\n\n  private async attachVideoInternal(trackID: string, videoElement: HTMLVideoElement) {\n    let sdkTrack = this.getTrackById(trackID);\n    // preview tracks are not added to the sdk store, so access from local peer.\n    if (!sdkTrack) {\n      sdkTrack = this.getLocalTrack(trackID);\n    }\n    if (sdkTrack && sdkTrack.type === 'video') {\n      await this.sdk.attachVideo(sdkTrack as SDKHMSVideoTrack, videoElement);\n    } else {\n      this.logPossibleInconsistency('no video track found to add sink');\n    }\n  }\n\n  /**\n   * This is a very important function as it's responsible for maintaining the source of\n   * truth with maximum efficiency. The efficiency comes from the fact that the only\n   * those portions of the store are updated which have actually changed.\n   * While making a change in this function don't use functions like map, reduce etc.\n   * which return a new copy of the data. Use Object.assign etc. to ensure that if the data\n   * doesn't change reference is also not changed.\n   * The UI and selectors rely on the fact that the store is immutable that is if there is\n   * any change and only if there is a change, they'll get a new copy of the data they're\n   * interested in with a new reference.\n   * @protected\n   */\n  protected syncRoomState(action: string) {\n    action = `${action}_fullSync`;\n    HMSLogger.time(`store-sync-${action}`);\n    const newHmsPeers: Record<HMSPeerID, Partial<HMSPeer>> = {};\n    const newHmsPeerIDs: HMSPeerID[] = []; // to add in room.peers\n    const newHmsTracks: Record<HMSTrackID, Partial<HMSTrack>> = {};\n    const newMediaSettings: Partial<HMSMediaSettings> = {};\n    const newNetworkQuality: Record<HMSPeerID, sdkTypes.HMSConnectionQuality> = {};\n    let newPreview: HMSStore['preview'];\n\n    const sdkPeers: sdkTypes.HMSPeer[] = this.sdk.getPeers();\n\n    // first convert everything in the new format\n    for (const sdkPeer of sdkPeers) {\n      const hmsPeer = SDKToHMS.convertPeer(sdkPeer);\n      newHmsPeers[hmsPeer.id] = hmsPeer;\n      newHmsPeerIDs.push(hmsPeer.id);\n      newNetworkQuality[hmsPeer.id] = {\n        peerID: hmsPeer.id,\n        downlinkQuality: sdkPeer.networkQuality || -1,\n      };\n\n      const sdkTracks = [sdkPeer.audioTrack, sdkPeer.videoTrack, ...sdkPeer.auxiliaryTracks];\n      for (const sdkTrack of sdkTracks) {\n        if (!sdkTrack) {\n          continue;\n        }\n        const hmsTrack = SDKToHMS.convertTrack(sdkTrack);\n        newHmsTracks[hmsTrack.id] = hmsTrack;\n      }\n\n      if (sdkPeer.isLocal) {\n        const localPeer = sdkPeer as sdkTypes.HMSLocalPeer;\n        newPreview = this.getPreviewFields(localPeer);\n        Object.assign(newMediaSettings, this.getMediaSettings(localPeer));\n      }\n    }\n\n    const recording = this.sdk.getRecordingState();\n    const rtmp = this.sdk.getRTMPState();\n    const hls = this.sdk.getHLSState();\n    const transcriptions = this.sdk.getTranscriptionState();\n\n    // then merge them carefully with our store so if something hasn't changed\n    // the reference shouldn't change. Note that the draftStore is an immer draft\n    // object.\n    this.setState(draftStore => {\n      draftStore.room.peers = newHmsPeerIDs;\n      const draftPeers = draftStore.peers;\n      const draftTracks = draftStore.tracks;\n      // the order of below statements are important as merge functions are mutating\n      mergeNewPeersInDraft(draftPeers, newHmsPeers);\n      mergeNewTracksInDraft(draftTracks, newHmsTracks);\n      Object.assign(draftStore.settings, newMediaSettings);\n      if (draftStore.room.isConnected) {\n        Object.assign(draftStore.connectionQualities, newNetworkQuality);\n      }\n\n      /**\n       * if preview is already present merge,\n       * else set as is(which will create/delete)\n       */\n      if (draftStore.preview?.localPeer && newPreview?.localPeer) {\n        Object.assign(draftStore.preview, newPreview);\n      } else {\n        draftStore.preview = newPreview;\n      }\n      Object.assign(draftStore.roles, SDKToHMS.convertRoles(this.sdk.getRoles()));\n      Object.assign(draftStore.playlist, SDKToHMS.convertPlaylist(this.sdk.getPlaylistManager()));\n      Object.assign(draftStore.room, SDKToHMS.convertRecordingStreamingState(recording, rtmp, hls, transcriptions));\n      Object.assign(draftStore.templateAppData, this.sdk.getTemplateAppData());\n    }, action);\n    HMSLogger.timeEnd(`store-sync-${action}`);\n  }\n\n  protected onPreview(sdkRoom: sdkTypes.HMSRoom) {\n    this.setState(store => {\n      Object.assign(store.room, SDKToHMS.convertRoom(sdkRoom, this.sdk.getLocalPeer()?.peerId));\n      store.room.roomState = HMSRoomState.Preview;\n    }, 'previewStart');\n    this.syncRoomState('previewSync');\n  }\n\n  protected onJoin(sdkRoom: sdkTypes.HMSRoom) {\n    const playlistManager = this.sdk.getPlaylistManager();\n    this.audioPlaylist = new HMSPlaylist(\n      playlistManager,\n      HMSPlaylistType.audio,\n      this.syncPlaylistState.bind(this),\n      this.store,\n    );\n    this.videoPlaylist = new HMSPlaylist(\n      playlistManager,\n      HMSPlaylistType.video,\n      this.syncRoomState.bind(this),\n      this.store,\n    );\n    this.syncRoomState('joinSync');\n    this.setState(store => {\n      Object.assign(store.room, SDKToHMS.convertRoom(sdkRoom, this.sdk.getLocalPeer()?.peerId));\n      store.room.isConnected = true;\n      store.room.roomState = HMSRoomState.Connected;\n    }, 'joined');\n\n    playlistManager.onProgress(this.setProgress);\n    playlistManager.onNewTrackStart((item: sdkTypes.HMSPlaylistItem<any>) => {\n      this.syncPlaylistState(`${item.type}PlaylistUpdate`);\n    });\n    playlistManager.onPlaylistEnded((type: HMSPlaylistType) => {\n      this.syncPlaylistState(`${type}PlaylistEnded`);\n    });\n    playlistManager.onCurrentTrackEnded((item: sdkTypes.HMSPlaylistItem<any>) => {\n      this.hmsNotifications.sendPlaylistTrackEnded(SDKToHMS.convertPlaylistItem(playlistManager, item));\n      this.syncPlaylistState(`${item.type}PlaylistItemEnded`);\n    });\n  }\n\n  protected onRoomUpdate(type: sdkTypes.HMSRoomUpdate, room: sdkTypes.HMSRoom) {\n    this.setState(store => {\n      Object.assign(store.room, SDKToHMS.convertRoom(room, this.sdk.getLocalPeer()?.peerId));\n    }, type);\n    if (type === sdkTypes.HMSRoomUpdate.TRANSCRIPTION_STATE_UPDATED) {\n      this.hmsNotifications.sendTranscriptionUpdate(room.transcriptions);\n    }\n  }\n\n  protected onPeerUpdate(type: sdkTypes.HMSPeerUpdate, sdkPeer: sdkTypes.HMSPeer | sdkTypes.HMSPeer[]) {\n    if (\n      [sdkTypes.HMSPeerUpdate.BECAME_DOMINANT_SPEAKER, sdkTypes.HMSPeerUpdate.RESIGNED_DOMINANT_SPEAKER].includes(type)\n    ) {\n      return; // ignore, high frequency update so no point of syncing peers\n    }\n    if (Array.isArray(sdkPeer)) {\n      const storePeers = this.store.getState(selectPeersMap);\n      const newPeerIds = sdkPeer.filter(peer => !storePeers[peer.peerId]);\n      this.syncRoomState('peersJoined');\n      const connected = this.store.getState(selectIsConnectedToRoom);\n      // This is not send unnecessary notifications while in preview\n      // now room state also call peer list to handle large peers\n      if (connected) {\n        const hmsPeers = [];\n        for (const peer of sdkPeer) {\n          const hmsPeer = this.store.getState(selectPeerByID(peer.peerId));\n          if (hmsPeer) {\n            hmsPeers.push(hmsPeer);\n          }\n        }\n        this.hmsNotifications.sendPeerList(hmsPeers);\n      } else {\n        newPeerIds.forEach(peer => {\n          const hmsPeer = this.store.getState(selectPeerByID(peer.peerId));\n          if (hmsPeer) {\n            this.hmsNotifications.sendPeerUpdate(sdkTypes.HMSPeerUpdate.PEER_JOINED, hmsPeer);\n          }\n        });\n      }\n      return;\n    }\n    this.sendPeerUpdateNotification(type, sdkPeer);\n  }\n\n  protected onTrackUpdate(type: sdkTypes.HMSTrackUpdate, track: SDKHMSTrack, peer: sdkTypes.HMSPeer) {\n    // this check is needed because for track removed case, the notification needs to\n    // be send before the track is removed from store\n    if (type === sdkTypes.HMSTrackUpdate.TRACK_REMOVED) {\n      this.hmsNotifications.sendTrackUpdate(type, track.trackId);\n      this.handleTrackRemove(track, peer);\n    } else if ([sdkTypes.HMSTrackUpdate.TRACK_ADDED, sdkTypes.HMSTrackUpdate.TRACK_REMOVED].includes(type)) {\n      const actionName = TRACK_NOTIFICATION_TYPES[type];\n      this.syncRoomState(actionName);\n      this.hmsNotifications.sendTrackUpdate(type, track.trackId);\n    } else {\n      const actionName = TRACK_NOTIFICATION_TYPES[type] || 'trackUpdate';\n      const hmsTrack = SDKToHMS.convertTrack(track);\n      this.setState(draftStore => {\n        const storeTrack = draftStore.tracks[hmsTrack.id];\n        if (isEntityUpdated(storeTrack, hmsTrack)) {\n          mergeTrackArrayFields(storeTrack, hmsTrack);\n          Object.assign(storeTrack, hmsTrack);\n        }\n      }, actionName);\n      this.hmsNotifications.sendTrackUpdate(type, track.trackId);\n    }\n  }\n\n  protected onMessageReceived(message: MessageNotification) {\n    const hmsMessage = SDKToHMS.convertMessage(message, this.store.getState(selectLocalPeerID)) as HMSMessage;\n    hmsMessage.read = false;\n    hmsMessage.ignored = this.ignoredMessageTypes.includes(hmsMessage.type);\n    if (hmsMessage.type === 'hms_transcript') {\n      hmsMessage.ignored = true;\n    }\n    this.putMessageInStore(hmsMessage);\n    this.hmsNotifications.sendMessageReceived(hmsMessage);\n  }\n\n  protected putMessageInStore(hmsMessage: HMSMessage) {\n    if (hmsMessage.ignored) {\n      return;\n    }\n    this.actionBatcher.setState(\n      store => {\n        store.messages.byID[hmsMessage.id] = hmsMessage;\n        store.messages.allIDs.push(hmsMessage.id);\n      },\n      'newMessage',\n      150,\n    );\n  }\n\n  /*\n   * Note: speakers array contain the value only for peers who have audioLevel != 0\n   */\n  protected onAudioLevelUpdate(sdkSpeakers: sdkTypes.HMSSpeaker[]) {\n    this.setState(store => {\n      const trackIDAudioLevelMap: Record<HMSPeerID, number> = {};\n      sdkSpeakers.forEach(sdkSpeaker => {\n        if (!sdkSpeaker.track || !sdkSpeaker.peer) {\n          return;\n        }\n        const trackID = sdkSpeaker.track.trackId;\n        trackIDAudioLevelMap[trackID] = sdkSpeaker.audioLevel;\n        if (!store.speakers[trackID]) {\n          // Set store instances(peers, tracks) references in speaker, not the new ones received.\n          store.speakers[trackID] = {\n            audioLevel: sdkSpeaker.audioLevel,\n            peerID: sdkSpeaker.peer.peerId,\n            trackID: trackID,\n          };\n        }\n      });\n      const speakerEntries = Object.entries(store.speakers);\n      for (const [trackID, speaker] of speakerEntries) {\n        speaker.audioLevel = trackIDAudioLevelMap[trackID] || 0;\n        if (speaker.audioLevel === 0) {\n          delete store.speakers[trackID];\n        }\n      }\n    }, 'audioLevel');\n  }\n\n  /**\n   * The connection quality update is sent for all peers(one needs to know of) every time.\n   */\n  protected onConnectionQualityUpdate(newQualities: sdkTypes.HMSConnectionQuality[]) {\n    this.setState(store => {\n      newQualities.forEach(sdkUpdate => {\n        const peerID = sdkUpdate.peerID;\n        if (!peerID) {\n          return;\n        }\n        if (!store.connectionQualities[peerID]) {\n          store.connectionQualities[peerID] = sdkUpdate;\n        } else {\n          Object.assign(store.connectionQualities[peerID], sdkUpdate);\n        }\n      });\n    }, 'connectionQuality');\n  }\n\n  protected onChangeTrackStateRequest(request: SDKHMSChangeTrackStateRequest) {\n    const requestedBy = this.store.getState(selectPeerByID(request.requestedBy?.peerId));\n    const storeTrackID = this.getStoreLocalTrackIDfromSDKTrack(request.track);\n    const track = this.store.getState(selectTrackByID(storeTrackID));\n\n    if (!track) {\n      return this.logPossibleInconsistency(\n        `Not found track for which track state change was requested, ${request.track}`,\n      );\n    }\n\n    if (!request.enabled) {\n      this.syncRoomState('changeTrackStateRequest');\n    }\n\n    this.hmsNotifications.sendChangeTrackStateRequest({\n      requestedBy: requestedBy || undefined,\n      track,\n      enabled: request.enabled,\n    });\n  }\n\n  protected onChangeMultiTrackStateRequest(request: SDKHMSChangeMultiTrackStateRequest) {\n    const requestedBy = this.store.getState(selectPeerByID(request.requestedBy?.peerId));\n\n    if (!request.enabled) {\n      this.syncRoomState('changeMultiTrackStateRequest');\n    }\n\n    const tracks: HMSTrack[] = [];\n    const tracksMap = this.store.getState(selectTracksMap);\n    for (const track of request.tracks) {\n      const storeTrackID = this.getStoreLocalTrackIDfromSDKTrack(track);\n      if (storeTrackID && tracksMap[storeTrackID]) {\n        tracks.push(tracksMap[storeTrackID]);\n      }\n    }\n\n    this.hmsNotifications.sendChangeMultiTrackStateRequest({\n      requestedBy: requestedBy || undefined,\n      tracks,\n      enabled: request.enabled,\n      type: request.type,\n      source: request.source,\n    });\n  }\n\n  protected onReconnected() {\n    this.syncRoomState('reconnectedSync');\n    this.hmsNotifications.sendReconnected();\n    this.setState(store => {\n      store.room.roomState = store.room.isConnected ? HMSRoomState.Connected : HMSRoomState.Preview;\n    }, 'reconnected');\n  }\n\n  protected onReconnecting(sdkError: SDKHMSException) {\n    const error = SDKToHMS.convertException(sdkError);\n    HMSLogger.e('Reconnection: received error from sdk', error);\n    this.hmsNotifications.sendReconnecting(error);\n    this.setState(store => {\n      store.room.roomState = HMSRoomState.Reconnecting;\n      store.errors.push(error);\n    }, 'reconnecting');\n  }\n\n  protected onError(sdkException: SDKHMSException) {\n    const error = SDKToHMS.convertException(sdkException);\n    if (error.isTerminal) {\n      // terminal error leave room as it is not recoverable\n      this.leave().then(() => HMSLogger.e('error from SDK, left room.'));\n      this.setState(store => {\n        store.room.roomState = HMSRoomState.Failed;\n        store.errors.push(error);\n      }, 'errorTerminal');\n    } else {\n      const numExistingErrors = this.store.getState().errors.length;\n      // just in case there is some infinite loop sending errors\n      if (numExistingErrors < 50) {\n        this.setState(store => {\n          store.errors.push(error);\n        }, 'error');\n      }\n    }\n    this.syncRoomState('errorSync'); //TODO: check if need to be done in a different way\n    // send notification\n    this.hmsNotifications.sendError(error);\n    HMSLogger.e('received error from sdk', error instanceof SDKHMSException ? `${error}` : error);\n  }\n\n  private handleTrackRemove(sdkTrack: SDKHMSTrack, sdkPeer: sdkTypes.HMSPeer) {\n    this.setState(draftStore => {\n      const hmsPeer = draftStore.peers[sdkPeer.peerId];\n      const draftTracks = draftStore.tracks;\n      const trackId = sdkTrack.trackId;\n\n      if (hmsPeer) {\n        if (trackId === hmsPeer.audioTrack) {\n          delete hmsPeer.audioTrack;\n        } else if (trackId === hmsPeer.videoTrack) {\n          delete hmsPeer.videoTrack;\n        } else {\n          const auxiliaryIndex = hmsPeer.auxiliaryTracks.indexOf(trackId);\n          if (auxiliaryIndex > -1) {\n            hmsPeer.auxiliaryTracks.splice(auxiliaryIndex, 1);\n          }\n        }\n      }\n      delete draftTracks[trackId];\n    }, 'trackRemoved');\n  }\n\n  private async setEnabledSDKTrack(trackID: string, enabled: boolean) {\n    const track = this.getLocalTrack(trackID);\n    if (track) {\n      await track.setEnabled(enabled);\n    } else {\n      this.logPossibleInconsistency(`track ${trackID} not present, unable to enabled/disable`);\n    }\n  }\n\n  private async setSDKLocalVideoTrackSettings(trackID: string, settings: Partial<sdkTypes.HMSVideoTrackSettings>) {\n    const track = this.getLocalTrack(trackID) as SDKHMSLocalVideoTrack;\n    if (track) {\n      await track.setSettings(settings);\n    } else {\n      this.logPossibleInconsistency(`local track ${trackID} not present, unable to set settings`);\n    }\n  }\n\n  private async setSDKLocalAudioTrackSettings(trackID: string, settings: Partial<sdkTypes.HMSAudioTrackSettings>) {\n    const track = this.getLocalTrack(trackID) as SDKHMSLocalAudioTrack;\n    if (track) {\n      await track.setSettings(settings);\n    } else {\n      this.logPossibleInconsistency(`local track ${trackID} not present, unable to set settings`);\n    }\n  }\n\n  private getMediaSettings(sdkPeer: sdkTypes.HMSPeer): Partial<HMSMediaSettings> {\n    const settings = this.store.getState(selectLocalMediaSettings);\n    const audioTrack = sdkPeer.audioTrack as SDKHMSLocalAudioTrack;\n    const videoTrack = sdkPeer.videoTrack as SDKHMSLocalVideoTrack;\n    return {\n      audioInputDeviceId: audioTrack?.settings.deviceId || settings.audioInputDeviceId,\n      videoInputDeviceId: videoTrack?.settings.deviceId || settings.videoInputDeviceId,\n      audioOutputDeviceId: this.sdk.getAudioOutput().getDevice()?.deviceId,\n      audioMode: audioTrack?.settings.audioMode || HMSAudioMode.VOICE,\n    };\n  }\n\n  private getPreviewFields(sdkLocalPeer: sdkTypes.HMSLocalPeer): HMSStore['preview'] {\n    // if room is not in preview, clear preview fields\n    if (!sdkLocalPeer.isInPreview()) {\n      return;\n    }\n\n    const hmsLocalPeer = SDKToHMS.convertPeer(sdkLocalPeer);\n\n    return {\n      localPeer: hmsLocalPeer.id,\n      audioTrack: hmsLocalPeer.audioTrack,\n      videoTrack: hmsLocalPeer.videoTrack,\n      asRole: sdkLocalPeer.asRole?.name || sdkLocalPeer.role?.name,\n    };\n  }\n\n  private async setTrackVolume(value: number, trackId: HMSTrackID) {\n    const track = this.getTrackById(trackId);\n    if (track) {\n      if (track instanceof SDKHMSAudioTrack) {\n        await track.setVolume(value);\n        this.setState(draftStore => {\n          const track = draftStore.tracks[trackId];\n          if (track && track.type === 'audio') {\n            track.volume = value;\n          }\n        }, 'trackVolume');\n      } else {\n        HMSLogger.w(`track ${trackId} is not an audio track`);\n      }\n    } else {\n      this.logPossibleInconsistency(`track ${trackId} not present, unable to set volume`);\n    }\n  }\n\n  /**\n   * Tells if the trackID is for local peer and video unmute is in process\n   * @private\n   */\n  private localAndVideoUnmuting(trackID: string) {\n    const localPeer = this.store.getState(selectLocalPeer);\n    if (localPeer?.videoTrack !== trackID) {\n      return false;\n    }\n    const displayEnabled = this.store.getState(selectIsLocalVideoDisplayEnabled);\n    const actuallyEnabled = this.store.getState(selectIsLocalVideoEnabled);\n    return displayEnabled && !actuallyEnabled;\n  }\n\n  private logPossibleInconsistency(inconsistency: string) {\n    HMSLogger.w('possible inconsistency detected - ', inconsistency);\n  }\n\n  private async addRemoveVideoPlugin(plugin: HMSVideoPlugin, action: 'add' | 'remove', pluginFrameRate?: number) {\n    if (!plugin) {\n      HMSLogger.w('Invalid plugin received in store');\n      return;\n    }\n    const trackID = this.store.getState(selectLocalVideoTrackID);\n    if (trackID) {\n      const sdkTrack = this.getLocalTrack(trackID);\n\n      if (sdkTrack) {\n        if (action === 'add') {\n          await (sdkTrack as SDKHMSLocalVideoTrack).addPlugin(plugin, pluginFrameRate);\n        } else if (action === 'remove') {\n          await (sdkTrack as SDKHMSLocalVideoTrack).removePlugin(plugin);\n        }\n        this.syncRoomState(`${action}VideoPlugin`);\n      } else {\n        this.logPossibleInconsistency(`track ${trackID} not present, unable to ${action} plugin`);\n      }\n    }\n  }\n\n  private async addRemoveMediaStreamVideoPlugins(plugins: HMSMediaStreamPlugin[], action: 'add' | 'remove') {\n    if (plugins.length === 0) {\n      HMSLogger.w('Invalid plugin received in store');\n      return;\n    }\n    const trackID = this.store.getState(selectLocalVideoTrackID);\n    if (trackID) {\n      const sdkTrack = this.getLocalTrack(trackID);\n      if (sdkTrack) {\n        if (action === 'add') {\n          await (sdkTrack as SDKHMSLocalVideoTrack).addStreamPlugins(plugins);\n        } else if (action === 'remove') {\n          await (sdkTrack as SDKHMSLocalVideoTrack).removeStreamPlugins(plugins);\n        }\n        this.syncRoomState(`${action}MediaStreamPlugin`);\n      } else {\n        this.logPossibleInconsistency(`track ${trackID} not present, unable to ${action} plugin`);\n      }\n    }\n  }\n\n  //eslint-disable-next-line complexity\n  private async addRemoveAudioPlugin(plugin: HMSAudioPlugin, action: 'add' | 'remove') {\n    try {\n      if (!plugin) {\n        HMSLogger.w('Invalid plugin received in store');\n        return;\n      }\n      const trackID = this.store.getState(selectLocalAudioTrackID);\n      if (trackID) {\n        const sdkTrack = this.getLocalTrack(trackID);\n        if (sdkTrack) {\n          if (action === 'add') {\n            await (sdkTrack as SDKHMSLocalAudioTrack).addPlugin(plugin);\n          } else if (action === 'remove') {\n            await (sdkTrack as SDKHMSLocalAudioTrack).removePlugin(plugin);\n          }\n          this.syncRoomState(`${action}AudioPlugin`);\n        } else {\n          this.logPossibleInconsistency(`track ${trackID} not present, unable to ${action} plugin`);\n        }\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n  /**\n   * convert new role change requests to store format and save.\n   * keep only one request at a time in store till we figure out how to handle multiple requests at the same time\n   */\n  private onRoleChangeRequest(request: SDKHMSRoleChangeRequest) {\n    this.setState(store => {\n      if (store.roleChangeRequests.length === 0) {\n        store.roleChangeRequests.push(SDKToHMS.convertRoleChangeRequest(request));\n      }\n    }, 'roleChangeRequest');\n  }\n\n  private removeRoleChangeRequest(toRemove: HMSRoleChangeRequest) {\n    this.setState(store => {\n      const index = store.roleChangeRequests.findIndex(req => {\n        return req.token === toRemove.token;\n      });\n      if (index !== -1) {\n        store.roleChangeRequests.splice(index, 1);\n      }\n    }, 'removeRoleChangeRequest');\n  }\n\n  private onRoleUpdate() {\n    this.syncRoomState('roleUpdate');\n  }\n\n  private getStoreLocalTrackIDfromSDKTrack(sdkTrack: SDKHMSLocalTrack) {\n    const trackIDs = this.store.getState(selectLocalTrackIDs);\n    return trackIDs.find(trackID => this.getTrackById(trackID)?.trackId === sdkTrack.trackId);\n  }\n\n  private setProgress = ({ type, progress }: sdkTypes.HMSPlaylistProgressEvent) => {\n    this.setState(draftStore => {\n      draftStore.playlist[type].progress = progress;\n      draftStore.playlist[type].currentTime = this.sdk.getPlaylistManager().getCurrentTime(type);\n    }, 'playlistProgress');\n  };\n\n  private syncPlaylistState = (action: string) => {\n    this.setState(draftStore => {\n      Object.assign(draftStore.playlist, SDKToHMS.convertPlaylist(this.sdk.getPlaylistManager()));\n    }, action);\n  };\n\n  // eslint-disable-next-line complexity\n  private sendPeerUpdateNotification = (type: sdkTypes.HMSPeerUpdate, sdkPeer: sdkTypes.HMSPeer) => {\n    let peer = this.store.getState(selectPeerByID(sdkPeer.peerId));\n    const actionName = PEER_NOTIFICATION_TYPES[type] || 'peerUpdate';\n    if (type === sdkTypes.HMSPeerUpdate.ROLE_UPDATED) {\n      this.syncRoomState(actionName);\n      this.updateMidCallPreviewRoomState(type, sdkPeer);\n    } else if ([sdkTypes.HMSPeerUpdate.PEER_JOINED, sdkTypes.HMSPeerUpdate.PEER_LEFT].includes(type)) {\n      this.syncRoomState(actionName);\n      // if peer wasn't available before sync(will happen if event is peer join)\n      if (!peer) {\n        peer = this.store.getState(selectPeerByID(sdkPeer.peerId));\n      }\n    } else if (\n      [\n        sdkTypes.HMSPeerUpdate.HAND_RAISE_CHANGED,\n        sdkTypes.HMSPeerUpdate.PEER_REMOVED,\n        sdkTypes.HMSPeerUpdate.PEER_ADDED,\n      ].includes(type)\n    ) {\n      this.syncRoomState(actionName);\n      if (!peer) {\n        peer = this.store.getState(selectPeerByID(sdkPeer.peerId));\n      }\n    } else {\n      const hmsPeer = SDKToHMS.convertPeer(sdkPeer) as HMSPeer;\n      this.setState(draftStore => {\n        const storePeer = draftStore.peers[hmsPeer.id];\n        if (isEntityUpdated(storePeer, hmsPeer)) {\n          if (areArraysEqual(storePeer.auxiliaryTracks, hmsPeer.auxiliaryTracks)) {\n            storePeer.auxiliaryTracks = hmsPeer.auxiliaryTracks;\n          }\n          Object.assign(storePeer, hmsPeer);\n        }\n        peer = hmsPeer;\n      }, actionName);\n    }\n    this.hmsNotifications.sendPeerUpdate(type, peer);\n  };\n\n  private updateMidCallPreviewRoomState(type: sdkTypes.HMSPeerUpdate, sdkPeer: sdkTypes.HMSPeer) {\n    if (sdkPeer.isLocal && type === sdkTypes.HMSPeerUpdate.ROLE_UPDATED && this.store.getState(selectIsInPreview)) {\n      this.setState(store => {\n        store.room.roomState = HMSRoomState.Connected;\n      }, 'midCallPreviewCompleted');\n    }\n  }\n\n  private setSessionStoreValueLocally(\n    updates: SessionStoreUpdate | SessionStoreUpdate[],\n    actionName = 'setSessionStore',\n  ) {\n    const updatesList: SessionStoreUpdate[] = Array.isArray(updates) ? updates : [updates];\n    this.setState(store => {\n      updatesList.forEach(update => {\n        store.sessionStore[update.key as keyof T['sessionStore']] = update.value;\n      });\n    }, actionName);\n  }\n\n  private getSDKHMSPeer = (peerID: HMSPeerID) => {\n    return this.sdk.getPeerMap()[peerID];\n  };\n\n  /**\n   * setState is separate so any future changes to how state change can be done from one place.\n   * @param fn\n   * @param name\n   */\n  private setState: NamedSetState<HMSStore<T>> = (fn, name) => {\n    return this.store.namedSetState(fn, name);\n  };\n\n  /**\n   * @internal\n   * This will be used by beam to check if the recording should continue, it will pass __hms.stats\n   * It will poll at a fixed interval and start an exit timer if the method fails twice consecutively\n   * The exit timer is stopped if the method returns true before that\n   * @param hmsStats\n   */\n  hasActiveElements(hmsStats: HMSStats): boolean {\n    const isWhiteboardPresent = Object.keys(this.store.getState().whiteboards).length > 0;\n    const isQuizOrPollPresent = Object.keys(this.store.getState().polls).length > 0;\n    const peerCount = Object.keys(this.store.getState().peers).length > 0;\n    const remoteTracks = hmsStats.getState().remoteTrackStats;\n    return (\n      peerCount &&\n      (isWhiteboardPresent ||\n        isQuizOrPollPresent ||\n        Object.values(remoteTracks).some(track => track && typeof track.bitrate === 'number' && track.bitrate > 0))\n    );\n  }\n}\n","import { isBrowser } from '../internal';\n\nexport const storeNameWithTabTitle = (storeName: string) => {\n  return isBrowser ? `${storeName} ${document.title}` : storeName;\n};\n","import AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { EventBus } from '../events/EventBus';\nimport { HMSUpdateListener } from '../interfaces';\nimport { NetworkHealth, ScoreMap } from '../signal/init/models';\nimport HMSLogger from '../utils/logger';\nimport { sleep } from '../utils/timer-utils';\n\nexport class NetworkTestManager {\n  private readonly TAG = '[NetworkTestManager]';\n  private controller = new AbortController();\n  private score?: number;\n  constructor(private eventBus: EventBus, private listener?: HMSUpdateListener) {}\n\n  start = async (networkHealth: NetworkHealth) => {\n    if (!networkHealth) {\n      return;\n    }\n    const { url, timeout, scoreMap } = networkHealth;\n    const signal = this.controller.signal;\n\n    const startTime = Date.now();\n    let downloadedSize = 0;\n    const timeoutPromise = sleep(timeout).then(() => {\n      this.controller.abort();\n    });\n    try {\n      const res = await fetch(`${url}?${Date.now()}`, { signal });\n      const reader = res.body?.getReader();\n      if (!reader) {\n        throw Error('unable to process request');\n      }\n      const readData = async () => {\n        if (!reader) {\n          return;\n        }\n        try {\n          let completed = false;\n          while (!completed) {\n            const { value, done } = await reader.read();\n            completed = done;\n            if (value) {\n              downloadedSize += value.byteLength;\n              this.sendScore({ scoreMap, downloadedSize, startTime });\n            }\n          }\n        } catch (error) {\n          if ((error as Error).name !== 'AbortError') {\n            HMSLogger.d(this.TAG, error);\n          }\n        }\n      };\n\n      return Promise.race([readData(), timeoutPromise])\n        .then(() => {\n          this.sendScore({ scoreMap, downloadedSize, startTime, finished: true });\n        })\n        .catch(error => {\n          HMSLogger.d(this.TAG, error);\n          this.updateScoreToListener(0);\n          this.eventBus.analytics.publish(\n            AnalyticsEventFactory.previewNetworkQuality({ error: (error as Error).message }),\n          );\n        });\n    } catch (error) {\n      if ((error as Error).name !== 'AbortError') {\n        HMSLogger.d(this.TAG, error);\n        this.updateScoreToListener(0);\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.previewNetworkQuality({ error: (error as Error).message }),\n        );\n      } else {\n        HMSLogger.d(this.TAG, error);\n      }\n    }\n  };\n\n  stop = () => {\n    if (!this.controller.signal.aborted) {\n      this.controller.abort();\n    }\n  };\n\n  private sendScore = ({\n    scoreMap,\n    downloadedSize,\n    startTime,\n    finished = false,\n  }: {\n    scoreMap: ScoreMap;\n    downloadedSize: number;\n    startTime: number;\n    finished?: boolean;\n  }) => {\n    const totalTimeInSecs = (Date.now() - startTime) / 1000;\n    const sizeInKB = downloadedSize / 1024;\n    const bitrate = (sizeInKB / totalTimeInSecs) * 8;\n    let calculatedScore = -1;\n    for (const score in scoreMap) {\n      const thresholds = scoreMap[score];\n      if (bitrate >= thresholds.low && (!thresholds.high || bitrate <= thresholds.high)) {\n        calculatedScore = Number(score);\n      }\n    }\n    this.updateScoreToListener(calculatedScore);\n    if (finished) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.previewNetworkQuality({ score: calculatedScore, downLink: bitrate.toFixed(2) }),\n      );\n    }\n  };\n\n  private updateScoreToListener(newQualityScore: number) {\n    if (newQualityScore === this.score) {\n      return;\n    }\n    this.score = newQualityScore;\n    this.listener?.onNetworkQuality?.(newQualityScore);\n  }\n}\n","import { Store } from './store';\nimport { DeviceManager } from '../device-manager';\nimport { DeviceType, HMSRole } from '../interfaces';\nimport InitialSettings from '../interfaces/settings';\nimport { SimulcastLayers } from '../interfaces/simulcast-layers';\nimport { HMSPeerUpdate, HMSTrackUpdate, HMSUpdateListener } from '../interfaces/update-listener';\nimport { HMSLocalTrack } from '../media/tracks';\nimport HMSTransport from '../transport';\n\nexport default class RoleChangeManager {\n  constructor(\n    private store: Store,\n    private transport: HMSTransport,\n    private deviceManager: DeviceManager,\n    private publish: (settings: InitialSettings) => Promise<void>,\n    private removeAuxiliaryTrack: (trackId: string) => void,\n    private listener?: HMSUpdateListener,\n  ) {}\n\n  handleLocalPeerRoleUpdate = async ({ oldRole, newRole }: { oldRole: HMSRole; newRole: HMSRole }) => {\n    const localPeer = this.store.getLocalPeer();\n\n    if (!localPeer) {\n      return;\n    }\n\n    await this.diffRolesAndPublishTracks({ oldRole, newRole });\n    this.listener?.onPeerUpdate(HMSPeerUpdate.ROLE_UPDATED, localPeer);\n  };\n\n  diffRolesAndPublishTracks = async ({ oldRole, newRole }: { oldRole: HMSRole; newRole: HMSRole }) => {\n    const wasPublishing = new Set(oldRole.publishParams.allowed);\n    const isPublishing = new Set(newRole.publishParams.allowed);\n\n    const removeVideo = this.removeTrack(wasPublishing, isPublishing, 'video');\n\n    const removeAudio = this.removeTrack(wasPublishing, isPublishing, 'audio');\n    const removeScreen = this.removeTrack(wasPublishing, isPublishing, 'screen');\n\n    const videoHasSimulcastDifference = this.hasSimulcastDifference(\n      oldRole.publishParams.simulcast?.video,\n      newRole.publishParams.simulcast?.video,\n    );\n    const screenHasSimulcastDifference = this.hasSimulcastDifference(\n      oldRole.publishParams.simulcast?.screen,\n      newRole.publishParams.simulcast?.screen,\n    );\n\n    const prevVideoEnabled = this.store.getLocalPeer()?.videoTrack?.enabled;\n\n    await this.removeAudioTrack(removeAudio);\n    await this.removeVideoTracks(removeVideo || videoHasSimulcastDifference);\n    await this.removeScreenTracks(removeScreen || screenHasSimulcastDifference);\n\n    const settings = this.getSettings();\n\n    if (videoHasSimulcastDifference) {\n      settings.isVideoMuted = !prevVideoEnabled;\n    }\n\n    // call publish with new settings, local track manager will diff policies\n    await this.publish(settings);\n    await this.syncDevices(settings, newRole);\n  };\n\n  private async syncDevices(initialSettings: InitialSettings, newRole: HMSRole) {\n    if ((!initialSettings.isAudioMuted || !initialSettings.isVideoMuted) && newRole.publishParams.allowed.length > 0) {\n      await this.deviceManager.init(true);\n    }\n  }\n  private async removeVideoTracks(removeVideo: boolean) {\n    if (!removeVideo) {\n      return;\n    }\n    const localPeer = this.store.getLocalPeer();\n    // TODO check auxillary tracks for regular audio and video too\n    if (localPeer?.videoTrack) {\n      // TODO: stop processed track and cleanup plugins loop non async\n      // vb can throw change role off otherwise\n      if (localPeer.videoTrack.isPublished) {\n        await this.transport.unpublish([localPeer.videoTrack]);\n      } else {\n        await localPeer.videoTrack.cleanup();\n      }\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, localPeer.videoTrack, localPeer);\n      localPeer.videoTrack = undefined;\n    }\n    await this.removeAuxTracks(track => track.source !== 'screen' && track.type === 'video');\n  }\n\n  private async removeAudioTrack(removeAudio: boolean) {\n    if (!removeAudio) {\n      return;\n    }\n    const localPeer = this.store.getLocalPeer();\n    if (localPeer?.audioTrack) {\n      if (localPeer.audioTrack.isPublished) {\n        await this.transport.unpublish([localPeer.audioTrack]);\n      } else {\n        await localPeer.audioTrack.cleanup();\n      }\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, localPeer.audioTrack, localPeer);\n      localPeer.audioTrack = undefined;\n    }\n    await this.removeAuxTracks(track => track.source !== 'screen' && track.type === 'audio');\n  }\n\n  private async removeScreenTracks(removeScreen: boolean) {\n    if (!removeScreen) {\n      return;\n    }\n    await this.removeAuxTracks(track => track.source === 'screen');\n  }\n\n  private async removeAuxTracks(predicate: (track: HMSLocalTrack) => boolean) {\n    const localPeer = this.store.getLocalPeer();\n    if (localPeer?.auxiliaryTracks) {\n      const localAuxTracks = [...localPeer.auxiliaryTracks];\n      for (const track of localAuxTracks) {\n        if (predicate(track)) {\n          await this.removeAuxiliaryTrack(track.trackId);\n        }\n      }\n    }\n  }\n\n  private removeTrack(wasPublishing: Set<string>, isPublishing: Set<string>, type: string) {\n    return wasPublishing.has(type) && !isPublishing.has(type);\n  }\n\n  private hasSimulcastDifference(oldLayers?: SimulcastLayers, newLayers?: SimulcastLayers) {\n    if (!oldLayers && !newLayers) {\n      return false;\n    }\n    if (oldLayers?.layers?.length !== newLayers?.layers?.length) {\n      return true;\n    }\n\n    // return true if anyone layer has different maxBitrate/maxFramerate\n    return !!oldLayers?.layers?.some(layer => {\n      const newLayer = newLayers?.layers?.find(newLayer => newLayer.rid === layer.rid);\n      return newLayer?.maxBitrate !== layer.maxBitrate || newLayer?.maxFramerate !== layer.maxFramerate;\n    });\n  }\n\n  private getSettings(): InitialSettings {\n    const { isAudioMuted, isVideoMuted } = this.getMutedStatus();\n    const { audioInputDeviceId, audioOutputDeviceId } = this.getAudioDeviceSettings();\n    const videoDeviceId = this.getVideoInputDeviceId();\n    return {\n      isAudioMuted: isAudioMuted,\n      isVideoMuted: isVideoMuted,\n      audioInputDeviceId: audioInputDeviceId,\n      audioOutputDeviceId: audioOutputDeviceId,\n      videoDeviceId: videoDeviceId,\n    };\n  }\n\n  private getMutedStatus(): { isAudioMuted: boolean; isVideoMuted: boolean } {\n    const initialSettings = this.store.getConfig()?.settings;\n    return {\n      isAudioMuted: initialSettings?.isAudioMuted ?? true,\n      isVideoMuted: initialSettings?.isVideoMuted ?? true,\n    };\n  }\n\n  private getAudioDeviceSettings(): { audioInputDeviceId: string; audioOutputDeviceId: string } {\n    const initialSettings = this.store.getConfig()?.settings;\n    const audioInputDeviceId =\n      this.deviceManager.currentSelection[DeviceType.audioInput]?.deviceId ||\n      initialSettings?.audioInputDeviceId ||\n      'default';\n    const audioOutputDeviceId =\n      this.deviceManager.currentSelection[DeviceType.audioOutput]?.deviceId ||\n      initialSettings?.audioOutputDeviceId ||\n      'default';\n\n    return {\n      audioInputDeviceId,\n      audioOutputDeviceId,\n    };\n  }\n\n  private getVideoInputDeviceId(): string {\n    const initialSettings = this.store.getConfig()?.settings;\n    return (\n      this.deviceManager.currentSelection[DeviceType.videoInput]?.deviceId ||\n      initialSettings?.videoDeviceId ||\n      'default'\n    );\n  }\n}\n","import AnalyticsEvent from './AnalyticsEvent';\nimport { IAnalyticsTransportProvider } from './IAnalyticsTransportProvider';\nimport {\n  CLIENT_ANAYLTICS_PROD_ENDPOINT,\n  CLIENT_ANAYLTICS_QA_ENDPOINT,\n  CLIENT_ANAYLTICS_STORAGE_LIMIT,\n} from '../utils/constants';\nimport { LocalStorage } from '../utils/local-storage';\nimport HMSLogger from '../utils/logger';\nimport { ENV } from '../utils/support';\n\ninterface ClientEventBody {\n  event: string;\n  event_id: string;\n  peer: {\n    peer_id?: string;\n    role?: string;\n    joined_at?: number;\n    left_at?: number;\n    room_id?: string;\n    room_name?: string;\n    session_started_at?: number;\n    user_data?: string;\n    user_name?: string;\n    template_id?: string;\n    session_id?: string;\n  };\n  timestamp: number;\n  cluster: {\n    websocket_url: string;\n  };\n  payload: Record<string, any>;\n  device_id: string;\n}\n\nclass ClientAnalyticsTransport implements IAnalyticsTransportProvider {\n  readonly TAG = '[HTTPAnalyticsTransport]';\n  private failedEvents = new LocalStorage<AnalyticsEvent[]>('client-events');\n  isConnected = true;\n  private env: null | ENV = null;\n  private websocketURL = '';\n\n  setEnv(env: ENV) {\n    this.env = env;\n    this.flushFailedEvents();\n  }\n\n  setWebsocketEndpoint(ws: string) {\n    this.websocketURL = ws;\n  }\n\n  sendEvent(event: AnalyticsEvent) {\n    if (!this.env) {\n      this.addEventToStorage(event);\n      return;\n    }\n    const requestBody: ClientEventBody = {\n      event: event.name,\n      payload: event.properties,\n      event_id: String(event.timestamp),\n      peer: event.metadata.peer,\n      timestamp: event.timestamp,\n      device_id: event.device_id,\n      cluster: {\n        websocket_url: this.websocketURL,\n      },\n    };\n    const url = this.env === ENV.PROD ? CLIENT_ANAYLTICS_PROD_ENDPOINT : CLIENT_ANAYLTICS_QA_ENDPOINT;\n    fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${event.metadata.token}`,\n        user_agent_v2: event.metadata.userAgent,\n      },\n      body: JSON.stringify(requestBody),\n    })\n      .then(response => {\n        // Ignore invalid token or expired token messages\n        if (response.status === 401) {\n          this.removeFromStorage(event);\n          return;\n        }\n        if (response.status !== 200) {\n          throw Error(response.statusText);\n        }\n        this.removeFromStorage(event);\n      })\n      .catch(error => {\n        HMSLogger.v(this.TAG, 'Failed to send event', error, event);\n        this.addEventToStorage(event);\n      });\n  }\n  flushFailedEvents() {\n    const events = this.failedEvents.get();\n    events?.forEach(event => this.sendEvent(event));\n  }\n\n  private addEventToStorage(event: AnalyticsEvent): void {\n    const existingEvents = this.failedEvents.get() || [];\n    if (!existingEvents.find(existingEvent => existingEvent.timestamp === event.timestamp)) {\n      if (existingEvents.length === CLIENT_ANAYLTICS_STORAGE_LIMIT) {\n        existingEvents.shift();\n      }\n      existingEvents.push(event);\n      this.failedEvents.set(existingEvents);\n    }\n  }\n\n  private removeFromStorage(event: AnalyticsEvent): void {\n    const events = this.failedEvents.get() || [];\n    const index = events.findIndex(storageEvent => storageEvent.timestamp === event.timestamp);\n    if (index > -1) {\n      events.splice(index, 1);\n      this.failedEvents.set(events);\n    }\n  }\n}\n\nexport const HTTPAnalyticsTransport = new ClientAnalyticsTransport();\n","import { VideoTrackLayerUpdate } from '../connection/channel-messages';\nimport { HMSPeerType } from '../interfaces/peer/hms-peer';\nimport { HMSRole } from '../interfaces/role';\nimport { HMSLocalTrack } from '../media/tracks';\nimport { HMSTrack, HMSTrackSource } from '../media/tracks/HMSTrack';\nimport { PollInfoParams, PollResult, Track } from '../signal/interfaces';\n\n/**\n * Interfaces for message received from BIZ Signal through Websocket.\n * These messages are handled by NotificationManager\n * which will call the corresponding HMSUpdateListener callbacks.\n */\n\nexport interface ServerError {\n  code: number;\n  message?: string;\n}\n\nexport interface TrackStateNotification {\n  tracks: {\n    [track_id: string]: TrackState;\n  };\n  peer: PeerNotificationInfo;\n}\n\nexport interface OnTrackLayerUpdateNotification {\n  tracks: {\n    [track_id: string]: VideoTrackLayerUpdate;\n  };\n}\n\nexport interface PeerNotificationInfo {\n  peer_id: string;\n  role: string;\n  groups: string[];\n  info: Info;\n}\n\nexport interface Info {\n  name: string;\n  data: string;\n  user_id: string;\n  type: HMSPeerType;\n}\n\nexport interface FindPeerByNameInfo {\n  name: string;\n  peer_id: string;\n  role: string;\n  type: HMSPeerType;\n}\n\nexport enum HMSRecordingState {\n  NONE = 'none',\n  INITIALISED = 'initialised',\n  STARTED = 'started',\n  PAUSED = 'paused',\n  RESUMED = 'resumed',\n  STOPPED = 'stopped',\n  FAILED = 'failed',\n}\n\nexport enum HMSStreamingState {\n  NONE = 'none',\n  INITIALISED = 'initialised',\n  STARTED = 'started',\n  STOPPED = 'stopped',\n  FAILED = 'failed',\n}\n\nexport enum HMSTranscriptionState {\n  INITIALISED = 'initialised',\n  STARTED = 'started',\n  STOPPED = 'stopped',\n  FAILED = 'failed',\n}\nexport enum HMSTranscriptionMode {\n  CAPTION = 'caption',\n}\nexport interface WhiteBoardPluginPermissions {\n  permissions?: {\n    // list of roles\n    admin?: Array<string>;\n    writer?: Array<string>;\n    reader?: Array<string>;\n  };\n}\n\nexport interface TranscriptionPluginPermissions {\n  permissions?: {\n    // list of roles\n    admin?: Array<string>;\n  };\n  mode: HMSTranscriptionMode;\n}\n\nexport interface NoiseCancellationPlugin {\n  enabled?: boolean;\n}\nexport enum Plugins {\n  WHITEBOARD = 'whiteboard',\n  TRANSCRIPTIONS = 'transcriptions',\n  NOISE_CANCELLATION = 'noiseCancellation',\n}\n\nexport interface PolicyParams {\n  name: string;\n  known_roles: {\n    [role: string]: HMSRole;\n  };\n  plugins: {\n    [Plugins.WHITEBOARD]?: WhiteBoardPluginPermissions;\n    [Plugins.TRANSCRIPTIONS]?: TranscriptionPluginPermissions[];\n    [Plugins.NOISE_CANCELLATION]?: NoiseCancellationPlugin;\n  };\n  template_id: string;\n  app_data?: Record<string, string>;\n}\n\n/**\n * This is in a format biz sends/received the track metadata\n */\nexport class TrackState implements Track {\n  mute: boolean;\n  type: 'audio' | 'video';\n  source: HMSTrackSource;\n  description: string;\n  track_id: string;\n  stream_id: string;\n\n  constructor(track: HMSLocalTrack | Track) {\n    this.type = track.type;\n    this.source = track.source || 'regular';\n    this.description = '';\n    if (track instanceof HMSTrack) {\n      this.mute = !track.enabled;\n      this.track_id = track.publishedTrackId!;\n      this.stream_id = track.stream.id;\n    } else {\n      this.mute = track.mute;\n      this.track_id = track.track_id;\n      this.stream_id = track.stream_id;\n    }\n  }\n}\n\nexport interface PeerNotification {\n  peer_id: string;\n  info: Info;\n  role: string;\n  joined_at?: number;\n  tracks: {\n    [track_id: string]: TrackState;\n  };\n  groups: string[];\n  realtime?: boolean;\n  is_from_room_state?: boolean;\n}\n\nexport interface TranscriptionNotification {\n  state?: HMSTranscriptionState;\n  mode?: HMSTranscriptionMode;\n  initialised_at?: number;\n  started_at?: number;\n  updated_at?: number;\n  stopped_at?: number;\n  peer?: PeerNotificationInfo;\n  error?: ServerError;\n}\n\nexport interface RoomState {\n  name: string;\n  session_id?: string;\n  started_at?: number;\n  recording?: {\n    sfu: {\n      started_at?: number;\n      enabled: boolean;\n      state?: HMSRecordingState;\n    };\n    browser: {\n      started_at?: number;\n      enabled: boolean;\n      state?: HMSRecordingState;\n    };\n    hls: {\n      initialised_at?: number;\n      started_at?: number;\n      enabled: boolean;\n      state?: HMSRecordingState;\n      config?: {\n        hls_vod: boolean;\n        single_file_per_layer: boolean;\n      };\n    };\n  };\n  streaming?: {\n    enabled: boolean;\n    rtmp: { enabled: boolean; started_at?: number; state?: HMSStreamingState };\n    hls: HLSNotification;\n  };\n  transcriptions?: TranscriptionNotification[];\n}\n\nexport interface PeerListNotification {\n  peers: {\n    [peer_id: string]: PeerNotification;\n  };\n  room: RoomState;\n}\n\nexport interface PeriodicRoomState {\n  peer_count: number;\n  room: RoomState;\n  peers?: {\n    [peer_id: string]: PeerNotification;\n  };\n}\n\ninterface Speaker {\n  peer_id: string;\n  track_id: string;\n  level: number;\n}\n\nexport interface SpeakerList {\n  'speaker-list': Speaker[];\n}\n\ninterface ConnectionQuality {\n  peer_id: string;\n  downlink_score: number;\n}\n\nexport interface ConnectionQualityList {\n  peers: ConnectionQuality[];\n}\n\n/**\n * Represents the role change request received from the server\n */\nexport interface RoleChangeRequestParams {\n  requested_by?: string;\n  role: string;\n  token: string;\n}\n\nexport interface TrackUpdateRequestNotification {\n  requested_by?: string;\n  track_id: string;\n  stream_id: string;\n  mute: boolean;\n}\n\nexport interface ChangeTrackMuteStateNotification {\n  requested_by?: string;\n  roles?: string[];\n  type?: 'audio' | 'video';\n  source?: HMSTrackSource;\n  value: boolean;\n}\n\nexport interface PeerLeaveRequestNotification {\n  requested_by?: string;\n  reason: string;\n  room_end: boolean;\n}\n\nexport interface MessageNotification {\n  peer?: {\n    peer_id: string;\n    groups: string[];\n    role: string;\n    info: {\n      name: string;\n      data: any;\n      user_id: string;\n    };\n  };\n  roles?: string[];\n  message_id: string;\n  private: boolean;\n  timestamp: number;\n  info: MessageNotificationInfo;\n}\n\nexport interface SendMessage {\n  info: MessageNotificationInfo;\n  roles?: string[];\n  peer_id?: string;\n}\n\nexport interface MessageNotificationInfo {\n  message: any;\n  type: string;\n}\nexport enum RecordingNotificationType {\n  SFU = 'sfu',\n  BROWSER = 'Browser',\n  HLS = 'HLS',\n}\nexport interface RecordingNotification {\n  type: RecordingNotificationType;\n  initialised_at?: number; // only used for type hls\n  started_at?: number;\n  peer?: PeerNotificationInfo;\n  error?: ServerError;\n  state?: HMSRecordingState;\n  hls_recording?: HLSRecording; // only used for type hls\n}\n\nexport interface RTMPNotification {\n  peer?: PeerNotificationInfo;\n  error?: ServerError;\n  started_at?: number;\n  state?: HMSStreamingState;\n}\n\nexport interface HLSRecording {\n  hls_vod: boolean;\n  single_file_per_layer: boolean;\n}\n\nexport interface HLSNotification {\n  enabled: boolean;\n  variants?: Array<HLSVariantInfo>;\n  error?: ServerError;\n  hls_recording?: HLSRecording;\n}\n\nexport enum HLSPlaylistType {\n  DVR = 'dvr',\n  NO_DVR = 'no-dvr',\n}\nexport enum HLSStreamType {\n  REGULAR = 'regular',\n  SCREEN = 'screen',\n  COMPOSITE = 'composite',\n}\nexport interface HLSVariantInfo {\n  url: string;\n  meeting_url?: string;\n  playlist_type?: HLSPlaylistType;\n  metadata?: string;\n  started_at?: number;\n  initialised_at?: number;\n  state?: HMSStreamingState;\n  stream_type?: HLSStreamType;\n}\n\nexport interface MetadataChangeNotification {\n  values: {\n    change_version?: number;\n    updated_by?: string;\n    data: any;\n    key: string;\n    updated_at?: number;\n  }[];\n}\n\nexport interface PollStartNotification {\n  polls: PollInfoParams[];\n}\n\nexport type PollStopNotification = PollStartNotification;\n\nexport interface PollStats extends PollResult {\n  poll_id: string;\n}\nexport interface PollStatsNotification {\n  polls: PollStats[];\n}\n\nexport interface RoomInfo {\n  room_id: string;\n  name: string;\n  description: string;\n  max_size: number;\n  large_room_optimization: boolean;\n}\n\nexport interface SessionInfo {\n  session_id: string;\n  room_id: string;\n  peer_count: number;\n  track_count: number;\n}\n\nexport interface WhiteboardInfo {\n  id: string;\n  title?: string;\n  owner?: string;\n  state?: string;\n  attributes?: Array<{ name: string; value: unknown }>;\n}\n\nexport interface NodeInfo {\n  sfu_node_id: string;\n}\n","import { KnownRoles, TrackStateEntry } from './StoreInterfaces';\nimport { HTTPAnalyticsTransport } from '../../analytics/HTTPAnalyticsTransport';\nimport { DeviceStorageManager } from '../../device-manager/DeviceStorage';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport {\n  HMSConfig,\n  HMSFrameworkInfo,\n  HMSPermissionType,\n  HMSPoll,\n  HMSSpeaker,\n  HMSTranscriptionMode,\n  HMSWhiteboard,\n} from '../../interfaces';\nimport { SelectedDevices } from '../../interfaces/devices';\nimport { IErrorListener } from '../../interfaces/error-listener';\nimport {\n  HMSSimulcastLayerDefinition,\n  RID,\n  SimulcastLayer,\n  SimulcastLayers,\n  simulcastMapping,\n} from '../../interfaces/simulcast-layers';\nimport {\n  HMSAudioTrack,\n  HMSLocalTrack,\n  HMSRemoteAudioTrack,\n  HMSRemoteVideoTrack,\n  HMSTrack,\n  HMSTrackSource,\n  HMSTrackType,\n  HMSVideoTrack,\n} from '../../media/tracks';\nimport {\n  NoiseCancellationPlugin,\n  Plugins,\n  PolicyParams,\n  TranscriptionPluginPermissions,\n  WhiteBoardPluginPermissions,\n} from '../../notification-manager';\nimport HMSLogger from '../../utils/logger';\nimport { ENV } from '../../utils/support';\nimport { createUserAgent } from '../../utils/user-agent';\nimport HMSRoom from '../models/HMSRoom';\nimport { HMSLocalPeer, HMSPeer, HMSRemotePeer } from '../models/peer';\n\nclass Store {\n  private TAG = '[Store]:';\n  private room?: HMSRoom;\n  private knownRoles: KnownRoles = {};\n  private localPeerId?: string;\n  private peers: Record<string, HMSPeer> = {};\n  private tracks = new Map<HMSTrack, HMSTrack>();\n  private templateAppData?: Record<string, string>;\n  // Not used currently. Will be used exclusively for preview tracks.\n  // private previewTracks: Record<string, HMSTrack> = {};\n  private peerTrackStates: Record<string, TrackStateEntry> = {};\n  private speakers: HMSSpeaker[] = [];\n  private videoLayers?: SimulcastLayers;\n  // private screenshareLayers?: SimulcastLayers;\n  private config?: HMSConfig;\n  private errorListener?: IErrorListener;\n  private roleDetailsArrived = false;\n  private env: ENV = ENV.PROD;\n  private simulcastEnabled = false;\n  private userAgent: string = createUserAgent(this.env);\n  private polls = new Map<string, HMSPoll>();\n  private whiteboards = new Map<string, HMSWhiteboard>();\n\n  getConfig() {\n    return this.config;\n  }\n\n  setSimulcastEnabled(enabled: boolean) {\n    this.simulcastEnabled = enabled;\n  }\n\n  removeRemoteTracks() {\n    this.tracks.forEach(track => {\n      if (track instanceof HMSRemoteAudioTrack || track instanceof HMSRemoteVideoTrack) {\n        this.removeTrack(track);\n        delete this.peerTrackStates[track.trackId];\n      }\n    });\n  }\n\n  getEnv() {\n    return this.env;\n  }\n\n  getPublishParams() {\n    const peer = this.getLocalPeer();\n    const role = peer?.asRole || peer?.role;\n    return role?.publishParams;\n  }\n\n  getRoom() {\n    return this.room;\n  }\n\n  getPolicyForRole(role: string) {\n    return this.knownRoles[role];\n  }\n\n  getKnownRoles() {\n    return this.knownRoles;\n  }\n\n  getTemplateAppData() {\n    return this.templateAppData;\n  }\n\n  getLocalPeer() {\n    if (this.localPeerId && this.peers[this.localPeerId]) {\n      return this.peers[this.localPeerId] as HMSLocalPeer;\n    }\n    return undefined;\n  }\n\n  getRemotePeers() {\n    return Object.values(this.peers).filter(peer => !peer.isLocal) as HMSRemotePeer[];\n  }\n\n  getPeers(): HMSPeer[] {\n    return Object.values(this.peers);\n  }\n\n  getPeerMap() {\n    return this.peers;\n  }\n\n  getPeerById(peerId: string) {\n    if (this.peers[peerId]) {\n      return this.peers[peerId];\n    }\n    return undefined;\n  }\n\n  getTracksMap() {\n    return this.tracks;\n  }\n\n  getTracks() {\n    return Array.from(this.tracks.values());\n  }\n\n  getVideoTracks() {\n    return this.getTracks().filter(track => track.type === HMSTrackType.VIDEO) as HMSVideoTrack[];\n  }\n\n  getRemoteVideoTracks() {\n    return this.getTracks().filter(track => track instanceof HMSRemoteVideoTrack) as HMSRemoteVideoTrack[];\n  }\n\n  getAudioTracks() {\n    return this.getTracks().filter(track => track.type === HMSTrackType.AUDIO) as HMSAudioTrack[];\n  }\n\n  getPeerTracks(peerId?: string) {\n    const peer = peerId ? this.peers[peerId] : undefined;\n    const tracks: HMSTrack[] = [];\n    peer?.videoTrack && tracks.push(peer.videoTrack);\n    peer?.audioTrack && tracks.push(peer.audioTrack);\n    return tracks.concat(peer?.auxiliaryTracks || []);\n  }\n\n  getLocalPeerTracks() {\n    return this.getPeerTracks(this.localPeerId) as HMSLocalTrack[];\n  }\n\n  hasTrack(track: HMSTrack) {\n    return this.tracks.has(track);\n  }\n\n  getTrackById(trackId: string) {\n    const track = Array.from(this.tracks.values()).find(track => track.trackId === trackId);\n    if (track) {\n      return track;\n    }\n    const localPeer = this.getLocalPeer();\n    /**\n     * handle case of audio level coming from server for local peer's track where local peer\n     * didn't initially gave audio permission. So track.firstTrackId is that of dummy track and\n     * this.tracks[trackId] doesn't exist.\n     * Example repro which this solves -\n     * - call preview with audio muted, unmute audio in preview then join the room, now initial\n     * track id is that from dummy track but the track id which server knows will be different\n     */\n    if (localPeer) {\n      if (localPeer.audioTrack?.isPublishedTrackId(trackId)) {\n        return localPeer.audioTrack;\n      } else if (localPeer.videoTrack?.isPublishedTrackId(trackId)) {\n        return localPeer.videoTrack;\n      }\n    }\n    return undefined;\n  }\n\n  getPeerByTrackId(trackId: string) {\n    const track = Array.from(this.tracks.values()).find(track => track.trackId === trackId);\n    return track?.peerId ? this.peers[track.peerId] : undefined;\n  }\n\n  getSpeakers() {\n    return this.speakers;\n  }\n\n  getSpeakerPeers() {\n    return this.speakers.map(speaker => speaker.peer);\n  }\n\n  getUserAgent() {\n    return this.userAgent;\n  }\n\n  createAndSetUserAgent(frameworkInfo?: HMSFrameworkInfo) {\n    this.userAgent = createUserAgent(this.env, frameworkInfo);\n  }\n\n  setRoom(room: HMSRoom) {\n    this.room = room;\n  }\n\n  setKnownRoles(params: PolicyParams) {\n    this.knownRoles = params.known_roles;\n    this.addPluginsToRoles(params.plugins);\n    this.roleDetailsArrived = true;\n    this.templateAppData = params.app_data;\n    if (!this.simulcastEnabled) {\n      return;\n    }\n    const publishParams = this.knownRoles[params.name]?.publishParams;\n    this.videoLayers = this.convertSimulcastLayers(publishParams.simulcast?.video);\n    // this.screenshareLayers = this.convertSimulcastLayers(publishParams.simulcast?.screen);\n    this.updatePeersPolicy();\n  }\n\n  hasRoleDetailsArrived(): boolean {\n    return this.roleDetailsArrived;\n  }\n\n  // eslint-disable-next-line complexity\n  setConfig(config: HMSConfig) {\n    DeviceStorageManager.rememberDevices(Boolean(config.rememberDeviceSelection));\n    if (config.rememberDeviceSelection) {\n      const devices: SelectedDevices | undefined = DeviceStorageManager.getSelection();\n      if (devices) {\n        if (!config.settings) {\n          config.settings = {};\n        }\n        if (devices.audioInput?.deviceId) {\n          config.settings.audioInputDeviceId = config.settings.audioInputDeviceId || devices.audioInput.deviceId;\n        }\n        if (devices.audioOutput?.deviceId) {\n          config.settings.audioOutputDeviceId = config.settings.audioOutputDeviceId || devices.audioOutput.deviceId;\n        }\n        if (devices.videoInput?.deviceId) {\n          config.settings.videoDeviceId = config.settings.videoDeviceId || devices.videoInput.deviceId;\n        }\n      }\n    }\n    config.autoManageVideo = config.autoManageVideo !== false;\n    config.autoManageWakeLock = config.autoManageWakeLock !== false;\n    this.config = config;\n    this.setEnv();\n  }\n\n  addPeer(peer: HMSPeer) {\n    this.peers[peer.peerId] = peer;\n    if (peer.isLocal) {\n      this.localPeerId = peer.peerId;\n    }\n  }\n\n  /**\n   * @param {HMSTrack} track the published track that has to be added\n   *\n   * Note: Only use this method to add published tracks not preview traks\n   */\n  addTrack(track: HMSTrack) {\n    this.tracks.set(track, track);\n  }\n\n  getTrackState(trackId: string) {\n    return this.peerTrackStates[trackId];\n  }\n\n  setTrackState(trackStateEntry: TrackStateEntry) {\n    this.peerTrackStates[trackStateEntry.trackInfo.track_id] = trackStateEntry;\n  }\n\n  removeTrackState(trackId: string) {\n    delete this.peerTrackStates[trackId];\n  }\n\n  removePeer(peerId: string) {\n    if (this.localPeerId === peerId) {\n      this.localPeerId = undefined;\n    }\n    delete this.peers[peerId];\n  }\n\n  removeTrack(track: HMSTrack) {\n    this.tracks.delete(track);\n  }\n\n  updateSpeakers(speakers: HMSSpeaker[]) {\n    this.speakers = speakers;\n  }\n\n  async updateAudioOutputVolume(value: number) {\n    for (const track of this.getAudioTracks()) {\n      await track.setVolume(value);\n    }\n  }\n\n  async updateAudioOutputDevice(device: MediaDeviceInfo) {\n    const promises: Promise<void>[] = [];\n    this.getAudioTracks().forEach(track => {\n      if (track instanceof HMSRemoteAudioTrack) {\n        promises.push(track.setOutputDevice(device));\n      }\n    });\n    await Promise.all(promises);\n  }\n\n  getSimulcastLayers(source: HMSTrackSource): SimulcastLayer[] {\n    // Enable only when backend enables and source is video or screen. ignore videoplaylist\n    if (!this.simulcastEnabled || !['screen', 'regular'].includes(source)) {\n      return [];\n    }\n    if (source === 'screen') {\n      return []; //this.screenshareLayers?.layers || []; uncomment this when screenshare simulcast supported\n    }\n    return this.videoLayers?.layers || [];\n  }\n\n  /**\n   * Convert maxBitrate from kbps to bps\n   * @internal\n   * @param simulcastLayers\n   * @returns {SimulcastLayers}\n   */\n  private convertSimulcastLayers(simulcastLayers?: SimulcastLayers) {\n    if (!simulcastLayers) {\n      return;\n    }\n    return {\n      ...simulcastLayers,\n      layers: (simulcastLayers.layers || []).map(layer => {\n        return {\n          ...layer,\n          maxBitrate: layer.maxBitrate * 1000,\n        };\n      }),\n    };\n  }\n\n  getSimulcastDefinitionsForPeer(peer: HMSPeer, source: HMSTrackSource) {\n    // TODO: remove screen check when screenshare simulcast is supported\n    if ([!peer || !peer.role, source === 'screen', !this.simulcastEnabled].some(value => !!value)) {\n      return [];\n    }\n\n    const publishParams = this.getPolicyForRole(peer.role!.name).publishParams;\n    let simulcastLayers: SimulcastLayers | undefined;\n    let width: number;\n    let height: number;\n    if (source === 'regular') {\n      simulcastLayers = publishParams.simulcast?.video;\n      width = publishParams.video.width;\n      height = publishParams.video.height;\n    } else if (source === 'screen') {\n      simulcastLayers = publishParams.simulcast?.screen;\n      width = publishParams.screen.width;\n      height = publishParams.screen.height;\n    }\n    return (\n      simulcastLayers?.layers?.map(value => {\n        const layer = simulcastMapping[value.rid as RID];\n        const resolution = {\n          width: Math.floor(width / value.scaleResolutionDownBy),\n          height: Math.floor(height / value.scaleResolutionDownBy),\n        };\n        return {\n          layer,\n          resolution,\n        } as HMSSimulcastLayerDefinition;\n      }) || []\n    );\n  }\n\n  setPoll(poll: HMSPoll) {\n    this.polls.set(poll.id, poll);\n  }\n\n  getPoll(id: string): HMSPoll | undefined {\n    return this.polls.get(id);\n  }\n\n  setWhiteboard(whiteboard: HMSWhiteboard) {\n    this.whiteboards.set(whiteboard.id, whiteboard);\n  }\n\n  getWhiteboards() {\n    return this.whiteboards;\n  }\n\n  getWhiteboard(id?: string): HMSWhiteboard | undefined {\n    return id ? this.whiteboards.get(id) : this.whiteboards.values().next().value;\n  }\n\n  getErrorListener() {\n    return this.errorListener;\n  }\n\n  cleanup() {\n    const tracks = this.getTracks();\n    for (const track of tracks) {\n      track.cleanup();\n    }\n    this.room = undefined;\n    this.config = undefined;\n    this.localPeerId = undefined;\n    this.roleDetailsArrived = false;\n  }\n\n  setErrorListener(listener: IErrorListener) {\n    this.errorListener = listener;\n  }\n\n  private updatePeersPolicy() {\n    this.getPeers().forEach(peer => {\n      if (!peer.role) {\n        this.errorListener?.onError(ErrorFactory.GenericErrors.InvalidRole(HMSAction.VALIDATION, ''));\n        return;\n      }\n      peer.role = this.getPolicyForRole(peer.role.name);\n    });\n  }\n  private addPluginsToRoles(plugins: PolicyParams['plugins']) {\n    if (!plugins) {\n      return;\n    }\n\n    Object.keys(plugins).forEach(plugin => {\n      const pluginName = plugin as keyof PolicyParams['plugins'];\n      switch (pluginName) {\n        case Plugins.WHITEBOARD: {\n          this.addWhiteboardPluginToRole(plugins[pluginName]);\n          break;\n        }\n        case Plugins.TRANSCRIPTIONS: {\n          this.addTranscriptionsPluginToRole(plugins[pluginName]);\n          break;\n        }\n        case Plugins.NOISE_CANCELLATION: {\n          this.handleNoiseCancellationPlugin(plugins[pluginName]);\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    });\n  }\n  private addPermissionToRole = (\n    role: string,\n    pluginName: keyof PolicyParams['plugins'],\n    permission: HMSPermissionType,\n    mode?: HMSTranscriptionMode,\n  ) => {\n    if (!this.knownRoles[role]) {\n      HMSLogger.d(this.TAG, `role ${role} is not present in given roles`, this.knownRoles);\n      return;\n    }\n    const rolePermissions = this.knownRoles[role].permissions;\n    if (pluginName === Plugins.TRANSCRIPTIONS && mode) {\n      // currently only admin is allowed, so no issue\n      rolePermissions[pluginName] = {\n        ...rolePermissions[pluginName],\n        [mode]: [permission],\n      };\n    } else if (pluginName === Plugins.WHITEBOARD) {\n      if (!rolePermissions[pluginName]) {\n        rolePermissions[pluginName] = [];\n      }\n      rolePermissions[pluginName]?.push(permission);\n    }\n  };\n  private addWhiteboardPluginToRole = (plugin?: WhiteBoardPluginPermissions) => {\n    const permissions = plugin?.permissions;\n    permissions?.admin?.forEach(role => this.addPermissionToRole(role, Plugins.WHITEBOARD, 'admin'));\n    permissions?.reader?.forEach(role => this.addPermissionToRole(role, Plugins.WHITEBOARD, 'read'));\n    permissions?.writer?.forEach(role => this.addPermissionToRole(role, Plugins.WHITEBOARD, 'write'));\n  };\n  private addTranscriptionsPluginToRole = (plugin: TranscriptionPluginPermissions[] = []) => {\n    for (const transcription of plugin) {\n      transcription.permissions?.admin?.forEach(role =>\n        this.addPermissionToRole(role, Plugins.TRANSCRIPTIONS, 'admin', transcription.mode),\n      );\n    }\n  };\n  private handleNoiseCancellationPlugin = (plugin?: NoiseCancellationPlugin) => {\n    if (!this.room) {\n      return;\n    }\n    // it will be called again after internalConnect room initialization, even after network disconnection\n    this.room.isNoiseCancellationEnabled = !!plugin?.enabled && !!this.room.isNoiseCancellationEnabled;\n  };\n\n  private setEnv() {\n    const endPoint = this.config?.initEndpoint!;\n    const url = endPoint.split('https://')[1];\n    let env: ENV = ENV.PROD;\n    if (url.startsWith(ENV.PROD)) {\n      env = ENV.PROD;\n    } else if (url.startsWith(ENV.QA)) {\n      env = ENV.QA;\n    } else if (url.startsWith(ENV.DEV)) {\n      env = ENV.DEV;\n    }\n    this.env = env;\n    HTTPAnalyticsTransport.setEnv(env);\n  }\n}\n\nexport { Store };\n","import HMSLogger from '../utils/logger';\n\nexport class WakeLockManager {\n  private readonly TAG = '[WakeLockManager]';\n  private wakeLock: WakeLockSentinel | null = null;\n\n  acquireLock = async () => {\n    await this.requestWakeLock();\n    document?.addEventListener('visibilitychange', this.visibilityHandler);\n  };\n\n  cleanup = async () => {\n    if (this.wakeLock && !this.wakeLock.released) {\n      try {\n        await this.wakeLock.release();\n        HMSLogger.d(this.TAG, 'Wake lock released');\n      } catch (err) {\n        const error = err as Error;\n        HMSLogger.w(this.TAG, 'Error while releasing wake lock', `name=${error.name}, message=${error.message}`);\n      }\n    }\n    document?.removeEventListener('visibilitychange', this.visibilityHandler);\n    this.wakeLock = null;\n  };\n\n  private visibilityHandler = async () => {\n    if (document?.visibilityState === 'visible' && (!this.wakeLock || this.wakeLock.released)) {\n      HMSLogger.d(this.TAG, 'Re-acquiring wake lock due to visibility change');\n      await this.requestWakeLock();\n    }\n  };\n\n  // Function that attempts to request a screen wake lock.\n  private requestWakeLock = async () => {\n    try {\n      if (!('wakeLock' in navigator)) {\n        HMSLogger.d(this.TAG, 'Wake lock feature not supported');\n        return;\n      }\n      this.wakeLock = await navigator.wakeLock.request('screen');\n      HMSLogger.d(this.TAG, 'Wake lock acquired');\n    } catch (err) {\n      const error = err as Error;\n      HMSLogger.w(this.TAG, 'Error acquiring wake lock', `name=${error.name}, message=${error.message}`);\n    }\n  };\n}\n","import AnalyticsEvent from './AnalyticsEvent';\nimport { HMSAnalyticsLevel } from './AnalyticsEventLevel';\nimport { AnalyticsTransport } from './AnalyticsTransport';\nimport { HTTPAnalyticsTransport } from './HTTPAnalyticsTransport';\nimport { Store } from '../sdk/store';\nimport { ANALYTICS_BUFFER_SIZE } from '../utils/constants';\nimport HMSLogger from '../utils/logger';\n\nexport class AnalyticsEventsService {\n  private bufferSize = ANALYTICS_BUFFER_SIZE;\n  private readonly TAG = '[AnalyticsEventsService]';\n\n  private transport: AnalyticsTransport | null = null;\n  private pendingEvents: AnalyticsEvent[] = [];\n\n  level: HMSAnalyticsLevel = HMSAnalyticsLevel.INFO;\n\n  constructor(private store: Store) {}\n\n  setTransport(transport: AnalyticsTransport) {\n    this.transport = transport;\n  }\n\n  reset() {\n    this.transport = null;\n    this.pendingEvents = [];\n  }\n\n  queue(event: AnalyticsEvent) {\n    if (event.level >= this.level) {\n      this.pendingEvents.push(event);\n\n      if (this.pendingEvents.length > this.bufferSize) {\n        const removedEvent = this.pendingEvents.shift();\n        HMSLogger.d(this.TAG, 'Max buffer size reached', 'Removed event to accommodate new events', removedEvent);\n      }\n    }\n    return this;\n  }\n\n  flushFailedClientEvents() {\n    HTTPAnalyticsTransport.flushFailedEvents();\n  }\n\n  flush() {\n    try {\n      while (this.pendingEvents.length > 0) {\n        const event = this.pendingEvents.shift();\n        if (event) {\n          event.metadata.peer.peer_id = this.store.getLocalPeer()?.peerId;\n          event.metadata.userAgent = this.store.getUserAgent();\n          if (this.transport && this.transport.transportProvider.isConnected) {\n            this.transport.sendEvent(event);\n          } else {\n            this.sendClientEventOnHTTP(event);\n          }\n        }\n      }\n    } catch (error) {\n      HMSLogger.w(this.TAG, 'Flush Failed', error);\n    }\n  }\n\n  private sendClientEventOnHTTP(event: AnalyticsEvent) {\n    const room = this.store.getRoom();\n    const localPeer = this.store.getLocalPeer();\n    event.metadata.token = this.store.getConfig()?.authToken;\n    event.metadata.peer = {\n      session_id: room?.sessionId,\n      room_id: room?.id,\n      room_name: room?.name,\n      template_id: room?.templateId,\n      joined_at: room?.joinedAt?.getTime(),\n      session_started_at: room?.startedAt?.getTime(),\n      role: localPeer?.role?.name,\n      user_name: localPeer?.name,\n      user_data: localPeer?.metadata,\n      peer_id: localPeer?.peerId,\n    };\n    HTTPAnalyticsTransport.sendEvent(event);\n  }\n}\n","import { v4 as uuid } from 'uuid';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { DeviceManager } from '../device-manager';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { EventBus } from '../events/EventBus';\nimport { HMSDeviceChangeEvent, HMSTrackUpdate, HMSUpdateListener } from '../interfaces';\nimport { HMSAudioContextHandler } from '../internal';\nimport { HMSRemoteAudioTrack } from '../media/tracks';\nimport { HMSRemotePeer } from '../sdk/models/peer';\nimport { Store } from '../sdk/store';\nimport HMSLogger from '../utils/logger';\nimport { sleep } from '../utils/timer-utils';\n\n/**\n * Following are the errors thrown when autoplay is blocked in different browsers\n * Firefox - DOMException: The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.\n * Safari - NotAllowedError: The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.\n * Chrome - DOMException: play() failed because the user didn't interact with the document first.\n * Brave - DOMException: play() can only be initiated by a user gesture.\n */\ntype AudioSinkState = {\n  autoplayFailed?: boolean;\n  initialized: boolean;\n  // this promise will be set for the first track. remaining tracks will be processed once it's know whether\n  // autoplay is allowed or not\n  autoplayCheckPromise?: Promise<void>;\n};\n\nconst INITIAL_STATE: AudioSinkState = {\n  autoplayFailed: undefined,\n  initialized: false,\n  autoplayCheckPromise: undefined,\n};\n\nexport class AudioSinkManager {\n  private audioSink?: HTMLElement;\n  private autoPausedTracks: Set<HMSRemoteAudioTrack> = new Set();\n  private readonly TAG = '[AudioSinkManager]:';\n  private volume = 100;\n  private state = { ...INITIAL_STATE };\n  private listener?: HMSUpdateListener;\n\n  constructor(private store: Store, private deviceManager: DeviceManager, private eventBus: EventBus) {\n    this.eventBus.audioTrackAdded.subscribe(this.handleTrackAdd);\n    this.eventBus.audioTrackRemoved.subscribe(this.handleTrackRemove);\n    this.eventBus.audioTrackUpdate.subscribe(this.handleTrackUpdate);\n    this.eventBus.deviceChange.subscribe(this.handleAudioDeviceChange);\n    this.eventBus.localVideoUnmutedNatively.subscribe(this.unpauseAudioTracks);\n    this.eventBus.localAudioUnmutedNatively.subscribe(this.unpauseAudioTracks);\n  }\n\n  setListener(listener?: HMSUpdateListener) {\n    this.listener = listener;\n  }\n\n  private get outputDevice() {\n    return this.deviceManager.outputDevice;\n  }\n\n  getVolume() {\n    return this.volume;\n  }\n\n  async setVolume(value: number) {\n    await this.store.updateAudioOutputVolume(value);\n    this.volume = value;\n  }\n\n  /**\n   *  This function is to be called only on user interaction when\n   *  autoplay error is received.\n   */\n  async unblockAutoplay() {\n    if (this.autoPausedTracks.size > 0) {\n      await this.unpauseAudioTracks();\n    }\n    await HMSAudioContextHandler.resumeContext();\n  }\n\n  init(elementId?: string) {\n    if (this.state.initialized || this.audioSink) {\n      return;\n    }\n    this.state.initialized = true;\n    const audioSink = document.createElement('div');\n    audioSink.id = `HMS-SDK-audio-sink-${uuid()}`;\n    const userElement = elementId && document.getElementById(elementId);\n    const audioSinkParent = userElement || document.body;\n    audioSinkParent.append(audioSink);\n\n    this.audioSink = audioSink;\n    HMSLogger.d(this.TAG, 'audio sink created', this.audioSink);\n  }\n\n  cleanup() {\n    this.audioSink?.remove();\n    this.audioSink = undefined;\n    this.eventBus.audioTrackAdded.unsubscribe(this.handleTrackAdd);\n    this.eventBus.audioTrackRemoved.unsubscribe(this.handleTrackRemove);\n    this.eventBus.audioTrackUpdate.unsubscribe(this.handleTrackUpdate);\n    this.eventBus.deviceChange.unsubscribe(this.handleAudioDeviceChange);\n    this.eventBus.localVideoUnmutedNatively.unsubscribe(this.unpauseAudioTracks);\n    this.eventBus.localAudioUnmutedNatively.unsubscribe(this.unpauseAudioTracks);\n    this.autoPausedTracks = new Set();\n    this.state = { ...INITIAL_STATE };\n  }\n\n  private handleAudioPaused = async (event: any) => {\n    // this means the audio paused because of external factors(headset removal, incoming phone call)\n    HMSLogger.d(this.TAG, 'Audio Paused', event.target.id);\n    const audioTrack = this.store.getTrackById(event.target.id);\n    if (audioTrack) {\n      this.autoPausedTracks.add(audioTrack as HMSRemoteAudioTrack);\n    }\n  };\n\n  private handleTrackUpdate = ({ track }: { track: HMSRemoteAudioTrack; enabled: boolean }) => {\n    HMSLogger.d(this.TAG, 'Track updated', `${track}`);\n  };\n\n  private handleTrackAdd = async ({\n    track,\n    peer,\n    callListener = true,\n  }: {\n    track: HMSRemoteAudioTrack;\n    peer: HMSRemotePeer;\n    callListener?: boolean;\n  }) => {\n    const audioEl = document.createElement('audio');\n    audioEl.style.display = 'none';\n    audioEl.id = track.trackId;\n    audioEl.addEventListener('pause', this.handleAudioPaused);\n\n    audioEl.onerror = async () => {\n      HMSLogger.e(this.TAG, 'error on audio element', audioEl.error);\n      const ex = ErrorFactory.TracksErrors.AudioPlaybackError(\n        `Audio playback error for track - ${track.trackId} code - ${audioEl?.error?.code}`,\n      );\n      this.eventBus.analytics.publish(AnalyticsEventFactory.audioPlaybackError(ex));\n      if (audioEl?.error?.code === MediaError.MEDIA_ERR_DECODE) {\n        // try to wait for main execution to complete first\n        this.removeAudioElement(audioEl, track);\n        await sleep(500);\n        await this.handleTrackAdd({ track, peer, callListener: false });\n        if (!this.state.autoplayFailed) {\n          this.eventBus.analytics.publish(\n            AnalyticsEventFactory.audioRecovered('Audio recovered after media decode error'),\n          );\n        }\n      }\n    };\n    track.setAudioElement(audioEl);\n    await track.setVolume(this.volume);\n    HMSLogger.d(this.TAG, 'Audio track added', `${track}`);\n    this.init(); // call to create sink element if not already created\n    this.audioSink?.append(audioEl);\n    this.outputDevice && (await track.setOutputDevice(this.outputDevice));\n    audioEl.srcObject = new MediaStream([track.nativeTrack]);\n    callListener && this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_ADDED, track, peer);\n    await this.handleAutoplayError(track);\n  };\n\n  private handleAutoplayError = async (track: HMSRemoteAudioTrack) => {\n    /**\n     * if it's not known whether autoplay will succeed, wait for it to be known\n     */\n    if (this.state.autoplayFailed === undefined) {\n      if (!this.state.autoplayCheckPromise) {\n        // it's the first track, try to play it, that'll tell us whether autoplay is allowed\n        this.state.autoplayCheckPromise = new Promise<void>(resolve => {\n          this.playAudioFor(track).then(resolve);\n        });\n      }\n      // and wait for the result to be known\n      await this.state.autoplayCheckPromise;\n    }\n    /**\n     * Don't play the track if autoplay failed, add to paused list\n     */\n    if (this.state.autoplayFailed) {\n      this.autoPausedTracks.add(track);\n      return;\n    }\n    await this.playAudioFor(track);\n  };\n\n  private handleAudioDeviceChange = async (event: HMSDeviceChangeEvent) => {\n    // if there is no selection that means this is an init request. No need to do anything\n    if (event.isUserSelection || event.error || !event.selection || event.type === 'video') {\n      return;\n    }\n    await this.unpauseAudioTracks();\n  };\n\n  /**\n   * try to play audio for the passed in track, assume autoplay error happened if play fails\n   * @param track\n   * @private\n   */\n  private async playAudioFor(track: HMSRemoteAudioTrack) {\n    const audioEl = track.getAudioElement();\n    if (!audioEl) {\n      HMSLogger.w(this.TAG, 'No audio element found on track', track.trackId);\n      return;\n    }\n    try {\n      await audioEl.play();\n      this.state.autoplayFailed = false;\n      this.autoPausedTracks.delete(track);\n      HMSLogger.d(this.TAG, 'Played track', `${track}`);\n    } catch (err) {\n      this.autoPausedTracks.add(track);\n      HMSLogger.w(this.TAG, 'Failed to play track', `${track}`, err as Error);\n      const error = err as Error;\n      if (!this.state.autoplayFailed && error.name === 'NotAllowedError') {\n        this.state.autoplayFailed = true;\n        const ex = ErrorFactory.TracksErrors.AutoplayBlocked(HMSAction.AUTOPLAY, '');\n        ex.addNativeError(error);\n        this.eventBus.analytics.publish(AnalyticsEventFactory.autoplayError());\n        this.eventBus.autoplayError.publish(ex);\n      }\n    }\n  }\n\n  private handleTrackRemove = (track: HMSRemoteAudioTrack) => {\n    this.autoPausedTracks.delete(track);\n    const audioEl = document.getElementById(track.trackId) as HTMLAudioElement;\n    if (audioEl) {\n      this.removeAudioElement(audioEl, track);\n    }\n    // Reset autoplay error thrown because if all tracks are removed and a new track is added\n    // Autoplay error is thrown in safari\n    if (this.audioSink && this.audioSink.childElementCount === 0) {\n      this.state.autoplayCheckPromise = undefined;\n      this.state.autoplayFailed = undefined;\n    }\n    HMSLogger.d(this.TAG, 'Audio track removed', `${track}`);\n  };\n\n  private unpauseAudioTracks = async () => {\n    const promises: Promise<void>[] = [];\n    this.autoPausedTracks.forEach(track => {\n      promises.push(this.playAudioFor(track));\n    });\n    // Return after all pending tracks are played\n    await Promise.all(promises);\n  };\n\n  private removeAudioElement = (audioEl: HTMLAudioElement, track: HMSRemoteAudioTrack) => {\n    if (audioEl) {\n      HMSLogger.d(this.TAG, 'removing audio element', `${track}`);\n      audioEl.removeEventListener('pause', this.handleAudioPaused);\n      audioEl.srcObject = null;\n      audioEl.remove();\n      track.setAudioElement(null);\n    }\n  };\n}\n","import AnalyticsEvent from '../analytics/AnalyticsEvent';\nimport { EventBus } from '../events/EventBus';\n\nexport class PluginUsageTracker {\n  private pluginUsage: Map<string, number> = new Map<string, number>();\n  private pluginLastAddedAt: Map<string, number> = new Map<string, number>();\n\n  constructor(private eventBus: EventBus) {\n    this.eventBus.analytics.subscribe(e => this.updatePluginUsageData(e));\n  }\n\n  getPluginUsage = (name: string) => {\n    if (!this.pluginUsage.has(name)) {\n      this.pluginUsage.set(name, 0);\n    }\n    if (this.pluginLastAddedAt.has(name)) {\n      const lastAddedAt = this.pluginLastAddedAt.get(name) || 0;\n      const extraDuration = lastAddedAt ? Date.now() - lastAddedAt : 0;\n      this.pluginUsage.set(name, (this.pluginUsage.get(name) || 0) + extraDuration);\n      this.pluginLastAddedAt.delete(name);\n    }\n    const finalValue = this.pluginUsage.get(name);\n    return finalValue;\n  };\n\n  // eslint-disable-next-line complexity\n  updatePluginUsageData = (event: AnalyticsEvent) => {\n    const name = event.properties?.plugin_name || '';\n    switch (event.name) {\n      case 'mediaPlugin.toggled.on':\n      case 'mediaPlugin.added': {\n        const addedAt = event.properties.added_at || Date.now();\n        this.pluginLastAddedAt.set(name, addedAt);\n        break;\n      }\n      case 'mediaPlugin.toggled.off':\n      case 'mediaPlugin.stats': {\n        if (this.pluginLastAddedAt.has(name)) {\n          const duration = event.properties.duration || (Date.now() - (this.pluginLastAddedAt.get(name) || 0)) / 1000;\n          this.pluginUsage.set(name, (this.pluginUsage.get(name) || 0) + Math.max(duration, 0) * 1000);\n          this.pluginLastAddedAt.delete(name);\n        }\n        break;\n      }\n      default:\n    }\n  };\n\n  cleanup = () => {\n    this.pluginLastAddedAt.clear();\n    this.pluginUsage.clear();\n  };\n}\n","import { DeviceStorageManager } from './DeviceStorage';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSException } from '../error/HMSException';\nimport { EventBus } from '../events/EventBus';\nimport { DeviceMap, HMSDeviceChangeEvent, SelectedDevices } from '../interfaces';\nimport { getAudioDeviceCategory, HMSAudioDeviceCategory, isIOS } from '../internal';\nimport { HMSAudioTrackSettingsBuilder, HMSVideoTrackSettingsBuilder } from '../media/settings';\nimport { HMSLocalAudioTrack, HMSLocalTrack, HMSLocalVideoTrack } from '../media/tracks';\nimport { HMSTrackExceptionTrackType } from '../media/tracks/HMSTrackExceptionTrackType';\nimport { Store } from '../sdk/store';\nimport HMSLogger from '../utils/logger';\nimport { debounce } from '../utils/timer-utils';\n\ntype DeviceAndGroup = Partial<MediaTrackSettings>;\n\ninterface HMSDeviceManager extends DeviceMap {\n  outputDevice?: MediaDeviceInfo;\n  hasWebcamPermission: boolean;\n  hasMicrophonePermission: boolean;\n}\n\nexport class DeviceManager implements HMSDeviceManager {\n  audioInput: InputDeviceInfo[] = [];\n  audioOutput: MediaDeviceInfo[] = [];\n  videoInput: InputDeviceInfo[] = [];\n  outputDevice?: MediaDeviceInfo;\n  // true if user has allowed the permission\n  // false if user has denied the permission or prompt was never shown or ignored\n  // or if the camera/mic is not available in the device\n  hasWebcamPermission = false;\n  hasMicrophonePermission = false;\n\n  currentSelection: SelectedDevices = {\n    audioInput: undefined,\n    videoInput: undefined,\n    audioOutput: undefined,\n  };\n\n  private readonly TAG = '[Device Manager]:';\n  private initialized = false;\n  private videoInputChanged = false;\n  private audioInputChanged = false;\n  private earpieceSelected = false;\n  private timer: ReturnType<typeof setTimeout> | null = null;\n\n  constructor(private store: Store, private eventBus: EventBus) {\n    const isLocalTrackEnabled = ({ enabled, track }: { enabled: boolean; track: HMSLocalTrack }) =>\n      enabled && track.source === 'regular';\n    this.eventBus.localVideoEnabled.waitFor(isLocalTrackEnabled).then(async () => {\n      await this.enumerateDevices();\n      if (this.videoInputChanged) {\n        this.eventBus.deviceChange.publish({ devices: this.getDevices() } as HMSDeviceChangeEvent);\n      }\n    });\n    this.eventBus.localAudioEnabled.waitFor(isLocalTrackEnabled).then(async () => {\n      await this.enumerateDevices();\n      if (this.audioInputChanged) {\n        this.eventBus.deviceChange.publish({ devices: this.getDevices() } as HMSDeviceChangeEvent);\n      }\n    });\n\n    this.eventBus.deviceChange.subscribe(({ type, isUserSelection, selection }) => {\n      if (isUserSelection) {\n        const inputType = type === 'video' ? 'videoInput' : type;\n        const newSelection = this[inputType].find(\n          device => this.createIdentifier(device) === this.createIdentifier(selection),\n        );\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.deviceChange({\n            selection: { [inputType]: newSelection },\n            devices: this.getDevices(),\n            type,\n            isUserSelection,\n          }),\n        );\n      }\n    });\n  }\n\n  updateOutputDevice = async (deviceId?: string, isUserSelection?: boolean) => {\n    const newDevice = this.audioOutput.find(device => device.deviceId === deviceId);\n    if (newDevice) {\n      this.outputDevice = newDevice;\n      await this.store.updateAudioOutputDevice(newDevice);\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          isUserSelection,\n          selection: { audioOutput: newDevice },\n          devices: this.getDevices(),\n          type: 'audioOutput',\n        }),\n      );\n      DeviceStorageManager.updateSelection('audioOutput', { deviceId: newDevice.deviceId, groupId: newDevice.groupId });\n    }\n    return newDevice;\n  };\n\n  async init(force = false, logAnalytics = true) {\n    if (this.initialized && !force) {\n      return;\n    }\n    !this.initialized && navigator.mediaDevices.addEventListener('devicechange', this.handleDeviceChange);\n    this.initialized = true;\n    await this.enumerateDevices();\n    // do it only on initial load.\n    if (!force) {\n      await this.updateToActualDefaultDevice();\n      this.startPollingForDevices();\n    }\n    this.logDevices('Init');\n    await this.setOutputDevice();\n    this.eventBus.deviceChange.publish({\n      devices: this.getDevices(),\n    } as HMSDeviceChangeEvent);\n    if (logAnalytics) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          selection: this.getCurrentSelection(),\n          type: 'list',\n          devices: this.getDevices(),\n        }),\n      );\n    }\n  }\n\n  getDevices(): DeviceMap {\n    return {\n      audioInput: this.audioInput,\n      audioOutput: this.audioOutput,\n      videoInput: this.videoInput,\n    };\n  }\n\n  cleanup() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n    }\n    this.initialized = false;\n    this.earpieceSelected = false;\n    this.audioInput = [];\n    this.audioOutput = [];\n    this.videoInput = [];\n    this.outputDevice = undefined;\n    navigator.mediaDevices.removeEventListener('devicechange', this.handleDeviceChange);\n  }\n\n  getCurrentSelection = (): SelectedDevices => {\n    const localPeer = this.store.getLocalPeer();\n    const audioDevice = this.createIdentifier(localPeer?.audioTrack?.getMediaTrackSettings());\n    const videoDevice = this.createIdentifier(localPeer?.videoTrack?.getMediaTrackSettings());\n    const audioSelection = this.audioInput.find(device => {\n      const id = this.createIdentifier(device);\n      return id === audioDevice;\n    });\n    const videoSelection = this.videoInput.find(device => this.createIdentifier(device) === videoDevice);\n    return {\n      audioInput: audioSelection,\n      videoInput: videoSelection,\n      audioOutput: this.outputDevice,\n    };\n  };\n\n  private createIdentifier(deviceInfo?: DeviceAndGroup) {\n    if (!deviceInfo) {\n      return '';\n    }\n    return `${deviceInfo.deviceId}${deviceInfo.groupId}`;\n  }\n\n  private computeChange = (prevDevices: string[], currentDevices: MediaDeviceInfo[]) => {\n    if (prevDevices.length !== currentDevices.length) {\n      return true;\n    }\n    return currentDevices.some(device => !prevDevices.includes(this.createIdentifier(device)));\n  };\n\n  private enumerateDevices = async () => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices();\n      const prevVideoInput = this.videoInput.map(this.createIdentifier);\n      const prevAudioInput = this.audioInput.map(this.createIdentifier);\n      this.audioInput = [];\n      this.audioOutput = [];\n      this.videoInput = [];\n      devices.forEach(device => {\n        if (device.kind === 'audioinput' && device.label) {\n          this.hasMicrophonePermission = true;\n          this.audioInput.push(device as InputDeviceInfo);\n        } else if (device.kind === 'audiooutput') {\n          this.audioOutput.push(device);\n        } else if (device.kind === 'videoinput' && device.label) {\n          this.hasWebcamPermission = true;\n          this.videoInput.push(device as InputDeviceInfo);\n        }\n      });\n      this.videoInputChanged = this.computeChange(prevVideoInput, this.videoInput);\n      this.audioInputChanged = this.computeChange(prevAudioInput, this.audioInput);\n      DeviceStorageManager.setDevices({\n        videoInput: [...this.videoInput],\n        audioInput: [...this.audioInput],\n        audioOutput: [...this.audioOutput],\n      });\n      this.logDevices('Enumerate Devices');\n    } catch (error) {\n      HMSLogger.e(this.TAG, 'Failed enumerating devices', error);\n    }\n  };\n\n  /**\n   * For example, if a different device, say OBS is selected as default from chrome settings, when you do getUserMedia with default, that is not the device\n   * you get. So update to the browser settings default device\n   * Update only when initial deviceId is not passed\n   */\n  private updateToActualDefaultDevice = async () => {\n    const localPeer = this.store.getLocalPeer();\n    const videoDeviceId = this.store.getConfig()?.settings?.videoDeviceId;\n    if (!videoDeviceId && localPeer?.videoTrack) {\n      await localPeer.videoTrack.setSettings({ deviceId: this.videoInput[0]?.deviceId }, true);\n    }\n    const audioDeviceId = this.store.getConfig()?.settings?.audioInputDeviceId;\n    if (!audioDeviceId && localPeer?.audioTrack) {\n      const getInitialDeviceId = () => {\n        const nonIPhoneDevice = this.audioInput.find(device => !device.label.toLowerCase().includes('iphone'));\n        return isIOS() && nonIPhoneDevice ? nonIPhoneDevice?.deviceId : this.getNewAudioInputDevice()?.deviceId;\n      };\n      const deviceIdToUpdate = getInitialDeviceId();\n      if (deviceIdToUpdate) {\n        await localPeer.audioTrack.setSettings({ deviceId: getInitialDeviceId() }, true);\n      }\n    }\n  };\n\n  private handleDeviceChange = debounce(async () => {\n    await this.enumerateDevices();\n    this.logDevices('After Device Change');\n    const localPeer = this.store.getLocalPeer();\n    await this.setOutputDevice(true);\n    await this.handleAudioInputDeviceChange(localPeer?.audioTrack);\n    await this.handleVideoInputDeviceChange(localPeer?.videoTrack);\n    this.eventBus.analytics.publish(\n      AnalyticsEventFactory.deviceChange({\n        selection: this.getCurrentSelection(),\n        type: 'change',\n        devices: this.getDevices(),\n      }),\n    );\n  }, 500).bind(this);\n\n  /**\n   * Function to get the device after device change\n   * Chrome and Edge provide a default device from which we select the actual device\n   * Firefox and safari give 0th device as system default\n   * @returns {MediaDeviceInfo}\n   */\n  getNewAudioInputDevice() {\n    const manualSelection = this.getManuallySelectedAudioDevice();\n    if (manualSelection) {\n      return manualSelection;\n    }\n    // if manually selected device is not available, reset on the track\n    this.store.getLocalPeer()?.audioTrack?.resetManuallySelectedDeviceId();\n    const defaultDevice = this.audioInput.find(device => device.deviceId === 'default');\n    if (defaultDevice) {\n      // Selecting a non-default device so that the deviceId comparision does not give\n      // false positives when device is removed, because the other available device\n      // get's the deviceId as default once this device is removed\n      const nextDevice = this.audioInput.find(device => {\n        return device.deviceId !== 'default' && defaultDevice.label.includes(device.label);\n      });\n      return nextDevice;\n    }\n    return this.audioInput[0];\n  }\n\n  /**\n   * This method is to select the input/output from same group\n   * same group meaning both input/output are of same device\n   * This method might override the default coming from browser and system so as to select options from same\n   * device type. This is required in certain cases where browser's default is not correct.\n   * Algo:\n   * 1. find the non default input device if selected one is default by matching device label\n   * 2. find the corresponding output device which has the same group id or same label\n   * 3. select the previous selected device if nothing was found\n   * 4. select the default one if no matching device was found and previous device doesn't exist anymore\n   * 5. select the first option if there is no default\n   */\n  async setOutputDevice(deviceChange = false) {\n    const inputDevice = this.getNewAudioInputDevice();\n    const prevSelection = this.createIdentifier(this.outputDevice);\n    this.outputDevice = this.getAudioOutputDeviceMatchingInput(inputDevice);\n    if (!this.outputDevice) {\n      // there is no matching device, let's revert back to the prev selected device\n      this.outputDevice = this.audioOutput.find(device => this.createIdentifier(device) === prevSelection);\n      if (!this.outputDevice) {\n        // prev device doesn't exist as well, select default deviceId device if available, otherwise select 0th device\n        this.outputDevice = this.audioOutput.find(device => device.deviceId === 'default') || this.audioOutput[0];\n      }\n    }\n    await this.store.updateAudioOutputDevice(this.outputDevice);\n    // send event only on device change and device is not same as previous\n    if (deviceChange && prevSelection !== this.createIdentifier(this.outputDevice)) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          selection: { audioOutput: this.outputDevice },\n          devices: this.getDevices(),\n          type: 'audioOutput',\n        }),\n      );\n      this.eventBus.deviceChange.publish({\n        selection: this.outputDevice,\n        type: 'audioOutput',\n        devices: this.getDevices(),\n      } as HMSDeviceChangeEvent);\n    }\n  }\n\n  private handleAudioInputDeviceChange = async (audioTrack?: HMSLocalAudioTrack) => {\n    if (!audioTrack) {\n      HMSLogger.d(this.TAG, 'No Audio track on local peer');\n      return;\n    }\n    // no need to proceed further if input has not changed\n    if (!this.audioInputChanged) {\n      HMSLogger.d(this.TAG, 'No Change in AudioInput Device');\n      return;\n    }\n    const newSelection = this.getNewAudioInputDevice();\n    if (!newSelection || !newSelection.deviceId) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          selection: { audioInput: newSelection },\n          error: ErrorFactory.TracksErrors.SelectedDeviceMissing(HMSTrackExceptionTrackType.AUDIO),\n          devices: this.getDevices(),\n          type: 'audioInput',\n        }),\n      );\n\n      HMSLogger.e(this.TAG, 'Audio device not found');\n      return;\n    }\n    const { settings } = audioTrack;\n    const newAudioTrackSettings = new HMSAudioTrackSettingsBuilder()\n      .codec(settings.codec)\n      .maxBitrate(settings.maxBitrate)\n      .deviceId(newSelection.deviceId)\n      .audioMode(settings.audioMode)\n      .build();\n    try {\n      await audioTrack.setSettings(newAudioTrackSettings, true);\n      this.eventBus.deviceChange.publish({\n        devices: this.getDevices(),\n        selection: newSelection,\n        type: 'audioInput',\n      } as HMSDeviceChangeEvent);\n      this.logDevices('Audio Device Change Success');\n    } catch (error) {\n      HMSLogger.e(this.TAG, '[Audio Device Change]', error);\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          selection: { audioInput: newSelection },\n          devices: this.getDevices(),\n          type: 'audioInput',\n          error: error as HMSException,\n        }),\n      );\n      this.eventBus.deviceChange.publish({\n        error,\n        selection: newSelection,\n        type: 'audioInput',\n        devices: this.getDevices(),\n      } as HMSDeviceChangeEvent);\n    }\n  };\n\n  private handleVideoInputDeviceChange = async (videoTrack?: HMSLocalVideoTrack) => {\n    if (!videoTrack) {\n      HMSLogger.d(this.TAG, 'No video track on local peer');\n      return;\n    }\n    // no need to proceed further if input has not changed\n    if (!this.videoInputChanged) {\n      HMSLogger.d(this.TAG, 'No Change in VideoInput Device');\n      return;\n    }\n    const newSelection = this.videoInput[0];\n    if (!newSelection || !newSelection.deviceId) {\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          selection: { videoInput: newSelection },\n          error: ErrorFactory.TracksErrors.SelectedDeviceMissing(HMSTrackExceptionTrackType.VIDEO),\n          devices: this.getDevices(),\n          type: 'video',\n        }),\n      );\n      HMSLogger.e(this.TAG, 'Video device not found');\n      return;\n    }\n    const { settings } = videoTrack;\n    const newVideoTrackSettings = new HMSVideoTrackSettingsBuilder()\n      .codec(settings.codec)\n      .maxBitrate(settings.maxBitrate)\n      .maxFramerate(settings.maxFramerate)\n      .setWidth(settings.width)\n      .setHeight(settings.height)\n      .deviceId(newSelection.deviceId)\n      .build();\n    try {\n      await videoTrack.setSettings(newVideoTrackSettings, true);\n      // On replace track, enabled will be true. Need to be set to previous state\n      // videoTrack.setEnabled(enabled); // TODO: remove this once verified on qa.\n      this.eventBus.deviceChange.publish({\n        devices: this.getDevices(),\n        selection: newSelection,\n        type: 'video',\n      } as HMSDeviceChangeEvent);\n      this.logDevices('Video Device Change Success');\n    } catch (error) {\n      HMSLogger.e(this.TAG, '[Video Device Change]', error);\n      this.eventBus.analytics.publish(\n        AnalyticsEventFactory.deviceChange({\n          selection: { videoInput: newSelection },\n          devices: this.getDevices(),\n          type: 'video',\n          error: error as HMSException,\n        }),\n      );\n      this.eventBus.deviceChange.publish({\n        error: error as HMSException,\n        type: 'video',\n        selection: newSelection,\n        devices: this.getDevices(),\n      } as HMSDeviceChangeEvent);\n    }\n  };\n\n  getManuallySelectedAudioDevice() {\n    const localPeer = this.store.getLocalPeer();\n    const audioTrack = localPeer?.audioTrack;\n    return this.audioInput.find(device => device.deviceId === audioTrack?.getManuallySelectedDeviceId());\n  }\n\n  // specifically used for mweb\n  categorizeAudioInputDevices() {\n    let bluetoothDevice: InputDeviceInfo | null = null;\n    let speakerPhone: InputDeviceInfo | null = null;\n    let wired: InputDeviceInfo | null = null;\n    let earpiece: InputDeviceInfo | null = null;\n\n    for (const device of this.audioInput) {\n      const deviceCategory = getAudioDeviceCategory(device.label);\n      if (deviceCategory === HMSAudioDeviceCategory.SPEAKERPHONE) {\n        speakerPhone = device;\n      } else if (deviceCategory === HMSAudioDeviceCategory.WIRED) {\n        wired = device;\n      } else if (deviceCategory === HMSAudioDeviceCategory.BLUETOOTH) {\n        bluetoothDevice = device;\n      } else if (deviceCategory === HMSAudioDeviceCategory.EARPIECE) {\n        earpiece = device;\n      }\n    }\n\n    return { bluetoothDevice, speakerPhone, wired, earpiece };\n  }\n\n  private startPollingForDevices = () => {\n    // device change supported, no polling needed\n    if ('ondevicechange' in navigator.mediaDevices) {\n      return;\n    }\n    this.timer = setTimeout(() => {\n      (async () => {\n        await this.enumerateDevices();\n        await this.autoSelectAudioOutput();\n        this.startPollingForDevices();\n      })();\n    }, 5000);\n  };\n\n  /**\n   * Mweb is not able to play via call channel by default, this is to switch from media channel to call channel\n   */\n  // eslint-disable-next-line complexity\n  public autoSelectAudioOutput = async () => {\n    // do this only after join so the earpiece would be selected at the right time\n    if ('ondevicechange' in navigator.mediaDevices || !this.store.getLocalPeer()?.joinedAt) {\n      return;\n    }\n    const { bluetoothDevice, earpiece, speakerPhone, wired } = this.categorizeAudioInputDevices();\n    const localAudioTrack = this.store.getLocalPeer()?.audioTrack;\n    if (!localAudioTrack || !earpiece) {\n      return;\n    }\n    const manualSelection = this.getManuallySelectedAudioDevice();\n    const externalDeviceID =\n      manualSelection?.deviceId || bluetoothDevice?.deviceId || wired?.deviceId || speakerPhone?.deviceId;\n    HMSLogger.d(this.TAG, 'externalDeviceID', externalDeviceID);\n    // already selected appropriate device\n    if (localAudioTrack.settings.deviceId === externalDeviceID && this.earpieceSelected) {\n      return;\n    }\n\n    try {\n      if (!this.earpieceSelected) {\n        if (bluetoothDevice?.deviceId === externalDeviceID) {\n          this.earpieceSelected = true;\n          return;\n        }\n        await localAudioTrack.setSettings({ deviceId: earpiece?.deviceId }, true);\n        this.earpieceSelected = true;\n      }\n      await localAudioTrack.setSettings(\n        {\n          deviceId: externalDeviceID,\n        },\n        true,\n      );\n    } catch (error) {\n      this.eventBus.error.publish(error as HMSException);\n    }\n  };\n\n  // eslint-disable-next-line complexity\n  private getAudioOutputDeviceMatchingInput(inputDevice?: MediaDeviceInfo) {\n    const blacklist = this.store.getConfig()?.settings?.speakerAutoSelectionBlacklist || [];\n    if (blacklist === 'all' || !inputDevice) {\n      return;\n    }\n\n    const inputLabel = inputDevice.label.toLowerCase() || '';\n    if (blacklist.some(label => inputLabel.includes(label.toLowerCase()))) {\n      return;\n    }\n\n    const matchingLabel = this.audioOutput.find(\n      device => inputDevice.deviceId !== 'default' && device.label === inputDevice.label,\n    );\n\n    if (matchingLabel) {\n      return matchingLabel;\n    }\n\n    const matchingGroupId = this.audioOutput.find(device => device.groupId === inputDevice.groupId);\n\n    // Select the device with matching group only when it is the default device\n    // if a earphone without mic is connected, the above would pick system speakers instead of the earphone\n    if (\n      matchingGroupId &&\n      this.audioOutput[0].deviceId === 'default' &&\n      matchingGroupId.groupId === this.audioOutput[0].groupId\n    ) {\n      return matchingGroupId;\n    }\n\n    return;\n  }\n\n  private logDevices(label = '') {\n    HMSLogger.d(\n      this.TAG,\n      label,\n      JSON.stringify(\n        {\n          videoInput: [...this.videoInput],\n          audioInput: [...this.audioInput],\n          audioOutput: [...this.audioOutput],\n          selected: this.getCurrentSelection(),\n        },\n        null,\n        4,\n      ),\n    );\n  }\n}\n","import { DeviceManager } from './DeviceManager';\nimport { AudioSinkManager } from '../audio-sink-manager';\nimport { HMSAudioContextHandler } from '../utils/media';\n\nexport interface IAudioOutputManager {\n  getDevice(): MediaDeviceInfo | undefined;\n  setDevice(deviceId: string): Promise<MediaDeviceInfo | undefined>;\n  getVolume(): number;\n  setVolume(value: number): void;\n}\n\nexport class AudioOutputManager implements IAudioOutputManager {\n  constructor(private deviceManager: DeviceManager, private audioSinkManager: AudioSinkManager) {}\n\n  getVolume() {\n    return this.audioSinkManager.getVolume();\n  }\n\n  setVolume(value: number) {\n    if (value < 0 || value > 100) {\n      throw Error('Please pass a valid number between 0-100');\n    }\n    this.audioSinkManager.setVolume(value);\n  }\n\n  getDevice() {\n    return this.deviceManager.outputDevice;\n  }\n\n  setDevice(deviceId?: string) {\n    return this.deviceManager.updateOutputDevice(deviceId, true);\n  }\n\n  async unblockAutoplay() {\n    await this.audioSinkManager.unblockAutoplay();\n    /**\n     * similar to autoplay error when there's no user interaction,\n     * audio context is paused due to which empty audio tracks do not send any data and therefore it doesn't reach SFU.\n     * resume audio context on user interaction to enable empty audio tracks to send data and be forwarded to remote peers\n     */\n    await HMSAudioContextHandler.resumeContext();\n  }\n}\n","import { HMSSessionFeedback, HMSSessionInfo } from './interface';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { HMSException } from '../internal';\nimport HMSLogger from '../utils/logger';\n\nexport class FeedbackService {\n  private static TAG = '[FeedbackService]';\n  private static handleError(response: Response) {\n    if (response.status === 404) {\n      throw ErrorFactory.APIErrors.EndpointUnreachable(HMSAction.FEEDBACK, response.statusText);\n    }\n    if (response.status >= 400) {\n      throw ErrorFactory.APIErrors.ServerErrors(response.status, HMSAction.FEEDBACK, response?.statusText);\n    }\n    return;\n  }\n\n  static async sendFeedback({\n    token,\n    eventEndpoint = 'https://event.100ms.live',\n    info,\n    feedback,\n  }: {\n    token: string;\n    eventEndpoint?: string;\n    info: HMSSessionInfo;\n    feedback?: HMSSessionFeedback;\n  }): Promise<void> {\n    HMSLogger.d(\n      this.TAG,\n      `sendFeedback: feedbackEndpoint=${eventEndpoint} peerId=${info.peer.peer_id} session=${info.peer.session_id} `,\n    );\n    const url = new URL('v2/client/feedback', eventEndpoint);\n    const body = {\n      ...info,\n      payload: feedback,\n    };\n    try {\n      const response = await fetch(url, {\n        headers: { Authorization: `Bearer ${token}` },\n        body: JSON.stringify(body),\n        method: 'POST',\n      });\n      try {\n        this.handleError(response);\n        return;\n      } catch (err) {\n        HMSLogger.e(this.TAG, 'error', (err as Error).message, response.status);\n        throw err instanceof HMSException\n          ? err\n          : ErrorFactory.APIErrors.ServerErrors(response.status, HMSAction.FEEDBACK, (err as Error).message);\n      }\n    } catch (err) {\n      const error = err as Error;\n      if (['Failed to fetch', 'NetworkError', 'ECONNRESET'].some(message => error.message.includes(message))) {\n        throw ErrorFactory.APIErrors.EndpointUnreachable(HMSAction.FEEDBACK, error.message);\n      }\n      throw error;\n    }\n  }\n}\n","import type { WaitForFilter, WaitForOptions } from 'eventemitter2';\nimport { EventEmitter2 as EventEmitter } from 'eventemitter2';\n\nexport class HMSInternalEvent<T> {\n  constructor(private eventName: string, private eventEmitter: EventEmitter) {}\n\n  publish = (event?: T) => {\n    this.eventEmitter.emit(this.eventName, event);\n  };\n  subscribe = (fn: (event: T) => void | Promise<void>) => {\n    this.eventEmitter.on(this.eventName, fn);\n  };\n  subscribeOnce = (fn: (event: T) => void | Promise<void>) => {\n    this.eventEmitter.once(this.eventName, fn);\n  };\n  unsubscribe = (fn: (event: T) => void | Promise<void>) => {\n    this.eventEmitter.off(this.eventName, fn);\n  };\n  waitFor = (predicate: WaitForFilter) => {\n    return this.eventEmitter.waitFor(this.eventName, {\n      filter: predicate,\n    } as WaitForOptions);\n  };\n  removeAllListeners = () => {\n    this.eventEmitter.removeAllListeners(this.eventName);\n  };\n}\n","import { EventEmitter2 as EventEmitter } from 'eventemitter2';\nimport { HMSInternalEvent } from './HMSInternalEvent';\nimport AnalyticsEvent from '../analytics/AnalyticsEvent';\nimport { HMSException } from '../error/HMSException';\nimport { HMSDeviceChangeEvent, HMSRole } from '../interfaces';\nimport {\n  HMSLocalAudioTrack,\n  HMSLocalVideoTrack,\n  HMSRemoteAudioTrack,\n  HMSRemoteVideoTrack,\n  HMSWebrtcStats,\n} from '../internal';\nimport { PolicyParams } from '../notification-manager/HMSNotifications';\nimport { HMSRemotePeer } from '../sdk/models/peer';\nimport { HMSEvents } from '../utils/constants';\nimport { ITrackAudioLevelUpdate } from '../utils/track-audio-level-monitor';\n\nexport class EventBus {\n  private eventEmitter: EventEmitter = new EventEmitter();\n  readonly analytics: HMSInternalEvent<AnalyticsEvent> = new HMSInternalEvent<AnalyticsEvent>(\n    HMSEvents.ANALYTICS,\n    this.eventEmitter,\n  );\n  readonly deviceChange = new HMSInternalEvent<HMSDeviceChangeEvent>(HMSEvents.DEVICE_CHANGE, this.eventEmitter);\n  readonly localAudioEnabled = new HMSInternalEvent<{ enabled: boolean; track: HMSLocalAudioTrack }>(\n    HMSEvents.LOCAL_AUDIO_ENABLED,\n    this.eventEmitter,\n  );\n  readonly localVideoEnabled = new HMSInternalEvent<{ enabled: boolean; track: HMSLocalVideoTrack }>(\n    HMSEvents.LOCAL_VIDEO_ENABLED,\n    this.eventEmitter,\n  );\n  readonly localVideoUnmutedNatively = new HMSInternalEvent(HMSEvents.LOCAL_VIDEO_UNMUTED_NATIVELY, this.eventEmitter);\n  readonly localAudioUnmutedNatively = new HMSInternalEvent(HMSEvents.LOCAL_AUDIO_UNMUTED_NATIVELY, this.eventEmitter);\n\n  /**\n   * Emitter which processes raw RTC stats from rtcStatsUpdate and calls client callback\n   */\n  readonly statsUpdate = new HMSInternalEvent<HMSWebrtcStats>(HMSEvents.STATS_UPDATE, this.eventEmitter);\n\n  readonly trackDegraded = new HMSInternalEvent<HMSRemoteVideoTrack>(HMSEvents.TRACK_DEGRADED, this.eventEmitter);\n  readonly trackRestored = new HMSInternalEvent<HMSRemoteVideoTrack>(HMSEvents.TRACK_RESTORED, this.eventEmitter);\n\n  /**\n   * Emits audio level updates for audio tracks(used with local track in preview)\n   */\n  readonly trackAudioLevelUpdate = new HMSInternalEvent<ITrackAudioLevelUpdate>(\n    HMSEvents.TRACK_AUDIO_LEVEL_UPDATE,\n    this.eventEmitter,\n  );\n\n  readonly audioPluginFailed = new HMSInternalEvent<HMSException>(HMSEvents.AUDIO_PLUGIN_FAILED, this.eventEmitter);\n\n  readonly localAudioSilence = new HMSInternalEvent<{ track: HMSLocalAudioTrack }>(\n    HMSEvents.LOCAL_AUDIO_SILENCE,\n    this.eventEmitter,\n  );\n\n  readonly policyChange = new HMSInternalEvent<PolicyParams>(HMSEvents.POLICY_CHANGE, this.eventEmitter);\n\n  readonly localRoleUpdate = new HMSInternalEvent<{ oldRole: HMSRole; newRole: HMSRole }>(\n    HMSEvents.LOCAL_ROLE_UPDATE,\n    this.eventEmitter,\n  );\n\n  readonly audioTrackUpdate = new HMSInternalEvent<{ track: HMSRemoteAudioTrack; enabled: boolean }>(\n    HMSEvents.AUDIO_TRACK_UPDATE,\n    this.eventEmitter,\n  );\n\n  readonly audioTrackAdded = new HMSInternalEvent<{ track: HMSRemoteAudioTrack; peer: HMSRemotePeer }>(\n    HMSEvents.AUDIO_TRACK_ADDED,\n    this.eventEmitter,\n  );\n\n  readonly audioTrackRemoved = new HMSInternalEvent<HMSRemoteAudioTrack>(\n    HMSEvents.AUDIO_TRACK_REMOVED,\n    this.eventEmitter,\n  );\n\n  readonly autoplayError = new HMSInternalEvent<HMSException>(HMSEvents.AUTOPLAY_ERROR, this.eventEmitter);\n\n  readonly leave = new HMSInternalEvent<HMSException | undefined>(HMSEvents.LEAVE, this.eventEmitter);\n\n  readonly error = new HMSInternalEvent<HMSException>(HMSEvents.ERROR, this.eventEmitter);\n}\n","import { HMSAudioListener, HMSPeerUpdate, HMSSpeaker, HMSUpdateListener } from '../../interfaces';\nimport { HMSAudioTrack } from '../../media/tracks';\nimport { Store } from '../../sdk/store';\nimport { SpeakerList } from '../HMSNotifications';\n\nexport class ActiveSpeakerManager {\n  constructor(private store: Store, public listener?: HMSUpdateListener, public audioListener?: HMSAudioListener) {}\n\n  handleActiveSpeakers(speakerList: SpeakerList) {\n    const speakers = speakerList['speaker-list'];\n    const hmsSpeakers: HMSSpeaker[] = speakers.map(speaker => ({\n      audioLevel: speaker.level,\n      peer: this.store.getPeerById(speaker.peer_id)!,\n      track: this.store.getTrackById(speaker.track_id) as HMSAudioTrack,\n    }));\n\n    this.audioListener?.onAudioLevelUpdate(hmsSpeakers);\n    this.store.updateSpeakers(hmsSpeakers);\n    const dominantSpeaker = speakers[0];\n\n    if (dominantSpeaker) {\n      const dominantSpeakerPeer = this.store.getPeerById(dominantSpeaker.peer_id);\n      this.listener?.onPeerUpdate(HMSPeerUpdate.BECAME_DOMINANT_SPEAKER, dominantSpeakerPeer!);\n    } else {\n      this.listener?.onPeerUpdate(HMSPeerUpdate.RESIGNED_DOMINANT_SPEAKER, null);\n    }\n  }\n}\n","import { HMSUpdateListener } from '../../interfaces';\nimport HMSLogger from '../../utils/logger';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport { MessageNotification } from '../HMSNotifications';\n\nexport class BroadcastManager {\n  private readonly TAG = '[BroadcastManager]';\n  constructor(public listener?: HMSUpdateListener) {}\n\n  handleNotification(method: string, notification: any) {\n    if (method !== HMSNotificationMethod.BROADCAST) {\n      return;\n    }\n    this.handleBroadcast(notification);\n  }\n\n  private handleBroadcast(messageNotification: MessageNotification) {\n    HMSLogger.d(this.TAG, `Received Message from sender=${messageNotification?.peer?.peer_id}: ${messageNotification}`);\n    this.listener?.onMessageReceived(messageNotification);\n  }\n}\n","import { HMSConnectionQuality, HMSConnectionQualityListener } from '../../interfaces';\nimport { Store } from '../../sdk/store';\nimport { ConnectionQualityList } from '../HMSNotifications';\n\nexport class ConnectionQualityManager {\n  constructor(private store: Store, public listener?: HMSConnectionQualityListener) {}\n\n  handleQualityUpdate(qualityList: ConnectionQualityList) {\n    const peers = qualityList.peers;\n    const hmsPeers: HMSConnectionQuality[] = peers.map(peer => {\n      const storePeer = this.store.getPeerById(peer.peer_id);\n      if (storePeer) {\n        storePeer.updateNetworkQuality(peer.downlink_score);\n      }\n      return {\n        peerID: peer.peer_id,\n        downlinkQuality: peer.downlink_score,\n      };\n    });\n    this.listener?.onConnectionQualityUpdate(hmsPeers);\n  }\n}\n","import { createRemotePeer } from './utils';\nimport { VideoTrackLayerUpdate } from '../../connection/channel-messages';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSRemotePeer, HMSTrackUpdate, HMSUpdateListener } from '../../interfaces';\nimport { HMSRemoteAudioTrack, HMSRemoteTrack, HMSRemoteVideoTrack, HMSTrackType } from '../../media/tracks';\nimport { HMSPeer } from '../../sdk/models/peer';\nimport { Store } from '../../sdk/store';\nimport HMSLogger from '../../utils/logger';\nimport { OnTrackLayerUpdateNotification, TrackState, TrackStateNotification } from '../HMSNotifications';\n\n/**\n * Handles:\n * - Incoming track meta-data from BIZ(signal) to match a track to a peer.\n * - Incoming MediaStreamTracks(wrapped in HMSTracks) from RTCMediaChannel.\n * - Mute/unmute track meta-data updates from BIZ.\n *\n * Since track meta-data and RTC tracks come in asynchronously,\n * we store the track meta-data(TrackState) in SDK Store and tracks temporarily here in tracksToProcess.\n *\n * Once we have both TrackState and track,\n * we add it to peer, send listener.onTrackUpdate and remove it from tracksToProcess.\n *\n * Gotchas:\n * - TRACK_UPDATE comes before TRACK_ADD -> update state, process pending tracks when TRACK_ADD arrives.\n */\nexport class TrackManager {\n  public TAG = '[TrackManager]';\n  private tracksToProcess: Map<string, HMSRemoteTrack> = new Map();\n\n  constructor(public store: Store, public eventBus: EventBus, public listener?: HMSUpdateListener) {}\n\n  /**\n   * Add event from biz on track-add\n   * @param params TrackStateNotification\n   */\n  handleTrackMetadataAdd(params: TrackStateNotification) {\n    HMSLogger.d(this.TAG, `TRACK_METADATA_ADD`, JSON.stringify(params, null, 2));\n\n    for (const trackId in params.tracks) {\n      const trackInfo = params.tracks[trackId];\n      this.store.setTrackState({\n        peerId: params.peer.peer_id,\n        trackInfo,\n      });\n    }\n    this.processPendingTracks();\n  }\n\n  /**\n   * Sets the tracks to peer and returns the peer\n   */\n  handleTrackAdd = (track: HMSRemoteTrack) => {\n    HMSLogger.d(this.TAG, `ONTRACKADD`, `${track}`);\n    this.tracksToProcess.set(track.trackId, track);\n    this.processPendingTracks();\n  };\n\n  handleTrackRemovedPermanently = (notification: TrackStateNotification) => {\n    HMSLogger.d(this.TAG, `ONTRACKREMOVE permanently`, notification);\n    const trackIds = Object.keys(notification.tracks);\n\n    trackIds.forEach(trackId => {\n      const trackStateEntry = this.store.getTrackState(trackId);\n      if (!trackStateEntry) {\n        return;\n      }\n\n      const track = this.store.getTrackById(trackId);\n      if (!track) {\n        HMSLogger.d(this.TAG, 'Track not found in store');\n        return;\n      }\n\n      // emit this event here as peer will already be removed(if left the room) by the time this event is received\n      track.type === HMSTrackType.AUDIO && this.eventBus.audioTrackRemoved.publish(track as HMSRemoteAudioTrack);\n      this.store.removeTrack(track);\n      const hmsPeer = this.store.getPeerById(trackStateEntry.peerId);\n      if (!hmsPeer) {\n        return;\n      }\n      this.removePeerTracks(hmsPeer, track as HMSRemoteTrack);\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, track, hmsPeer);\n    });\n  };\n\n  /**\n   * Sets the track of corresponding peer to null and returns the peer\n   */\n  handleTrackRemove(track: HMSRemoteTrack, remove = true) {\n    HMSLogger.d(this.TAG, `ONTRACKREMOVE`, `${track}`);\n\n    const trackStateEntry = this.store.getTrackState(track.trackId);\n\n    if (!trackStateEntry) {\n      return;\n    }\n\n    const storeHasTrack = this.store.hasTrack(track);\n    if (!storeHasTrack) {\n      HMSLogger.d(this.TAG, 'Track not found in store');\n      return;\n    }\n\n    // remove tracks only when onDemandTracks flag is false\n    if (remove) {\n      this.store.removeTrack(track);\n      const hmsPeer = this.store.getPeerById(trackStateEntry.peerId);\n      if (!hmsPeer) {\n        return;\n      }\n      this.removePeerTracks(hmsPeer, track);\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, track, hmsPeer);\n\n      // emit this event here as peer will already be removed(if left the room) by the time this event is received\n      track.type === HMSTrackType.AUDIO && this.eventBus.audioTrackRemoved.publish(track as HMSRemoteAudioTrack);\n    }\n  }\n\n  handleTrackLayerUpdate = (params: OnTrackLayerUpdateNotification) => {\n    for (const trackId in params.tracks) {\n      const trackEntry = params.tracks[trackId];\n      const track = this.store.getTrackById(trackId);\n      if (!track) {\n        continue;\n      }\n\n      const peer = this.store.getPeerByTrackId(trackId)!;\n      if (!peer) {\n        continue;\n      }\n\n      if (track instanceof HMSRemoteVideoTrack) {\n        this.setLayer(track, trackEntry);\n      }\n    }\n  };\n\n  // eslint-disable-next-line complexity\n  handleTrackUpdate = (params: TrackStateNotification, callListener = true) => {\n    let hmsPeer = this.store.getPeerById(params.peer.peer_id);\n    const notifPeer = params.peer;\n    if (!hmsPeer && !notifPeer) {\n      HMSLogger.d(this.TAG, 'Track Update ignored - Peer not added to store');\n      return;\n    }\n    if (!hmsPeer) {\n      hmsPeer = createRemotePeer(notifPeer, this.store);\n      this.store.addPeer(hmsPeer);\n    }\n\n    for (const trackId in params.tracks) {\n      const currentTrackStateInfo = Object.assign({}, this.store.getTrackState(trackId)?.trackInfo);\n\n      const trackEntry = params.tracks[trackId];\n      const track = this.store.getTrackById(trackId);\n\n      this.store.setTrackState({\n        peerId: params.peer.peer_id,\n        trackInfo: { ...currentTrackStateInfo, ...trackEntry },\n      });\n\n      // TRACK_UPDATE came before TRACK_ADD -> update state, process pending tracks when TRACK_ADD arrives.\n      if (!track || this.tracksToProcess.has(trackId)) {\n        this.processTrackInfo(trackEntry, params.peer.peer_id, callListener);\n        this.processPendingTracks();\n      } else {\n        track.setEnabled(!trackEntry.mute);\n        const eventType = this.processTrackUpdate(track as HMSRemoteTrack, currentTrackStateInfo, trackEntry);\n        if (eventType) {\n          this.listener?.onTrackUpdate(eventType, track, hmsPeer);\n        }\n      }\n    }\n  };\n\n  processTrackInfo = (_trackInfo: TrackState, _peerId: string, _callListener?: boolean) => {};\n\n  processPendingTracks = () => {\n    const tracksCopy = new Map(this.tracksToProcess);\n    tracksCopy.forEach(track => {\n      const state = this.store.getTrackState(track.trackId);\n      if (!state) {\n        HMSLogger.d(this.TAG, 'TrackState not added to store', `peerId - ${track.peerId}`, `trackId -${track.trackId}`);\n        return;\n      }\n\n      const hmsPeer = this.store.getPeerById(state.peerId);\n      if (!hmsPeer) {\n        HMSLogger.d(this.TAG, 'Peer not added to store, peerId', state.peerId);\n        return;\n      }\n\n      track.source = state.trackInfo.source;\n      track.peerId = hmsPeer.peerId;\n      // set log identifier to initial name of the peer\n      track.logIdentifier = hmsPeer.name;\n      track.setEnabled(!state.trackInfo.mute);\n      this.addAudioTrack(hmsPeer, track);\n      this.addVideoTrack(hmsPeer, track);\n      /**\n       * Don't call onTrackUpdate for audio elements immediately because the operations(eg: setVolume) performed\n       * on onTrackUpdate can be overriden in AudioSinkManager when audio element is created\n       **/\n      track.type === HMSTrackType.AUDIO\n        ? this.eventBus.audioTrackAdded.publish({ track: track as HMSRemoteAudioTrack, peer: hmsPeer as HMSRemotePeer })\n        : this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_ADDED, track, hmsPeer);\n      this.tracksToProcess.delete(track.trackId);\n    });\n  };\n\n  private setLayer(track: HMSRemoteVideoTrack, layerUpdate: VideoTrackLayerUpdate) {\n    const peer = this.store.getPeerByTrackId(track.trackId);\n    if (!peer) {\n      return;\n    }\n    const isDegraded = track.setLayerFromServer(layerUpdate);\n    if (isDegraded) {\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_DEGRADED, track, peer);\n    } else {\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_RESTORED, track, peer);\n    }\n  }\n\n  removePeerTracks(hmsPeer: HMSPeer, track: HMSRemoteTrack) {\n    const auxiliaryTrackIndex = hmsPeer.auxiliaryTracks.indexOf(track);\n    if (auxiliaryTrackIndex > -1) {\n      hmsPeer.auxiliaryTracks.splice(auxiliaryTrackIndex, 1);\n      HMSLogger.d(this.TAG, 'auxiliary track removed', `${track}`);\n    } else {\n      if (track.type === HMSTrackType.AUDIO && hmsPeer.audioTrack === track) {\n        hmsPeer.audioTrack = undefined;\n        HMSLogger.d(this.TAG, 'audio track removed', `${track}`);\n      } else if (track.type === HMSTrackType.VIDEO && hmsPeer.videoTrack === track) {\n        hmsPeer.videoTrack = undefined;\n        HMSLogger.d(this.TAG, 'video track removed', `${track}`);\n      }\n    }\n  }\n\n  private addAudioTrack(hmsPeer: HMSPeer, track: HMSRemoteTrack) {\n    if (track.type !== HMSTrackType.AUDIO) {\n      return;\n    }\n    if (track.source === 'regular' && (!hmsPeer.audioTrack || hmsPeer.audioTrack?.trackId === track.trackId)) {\n      hmsPeer.audioTrack = track as HMSRemoteAudioTrack;\n    } else {\n      hmsPeer.auxiliaryTracks.push(track);\n    }\n    this.store.addTrack(track);\n    HMSLogger.d(this.TAG, 'audio track added', `${track}`);\n  }\n\n  addVideoTrack(hmsPeer: HMSPeer, track: HMSRemoteTrack) {\n    if (track.type !== HMSTrackType.VIDEO) {\n      return;\n    }\n    const remoteTrack = track as HMSRemoteVideoTrack;\n    const simulcastDefinitions = this.store.getSimulcastDefinitionsForPeer(hmsPeer, remoteTrack.source!);\n    remoteTrack.setSimulcastDefinitons(simulcastDefinitions);\n    if (this.addAsPrimaryVideoTrack(hmsPeer, remoteTrack)) {\n      if (!hmsPeer.videoTrack) {\n        hmsPeer.videoTrack = remoteTrack;\n      } else {\n        (hmsPeer.videoTrack as HMSRemoteVideoTrack).replaceTrack(remoteTrack);\n      }\n      this.store.addTrack(hmsPeer.videoTrack);\n    } else {\n      const index = hmsPeer.auxiliaryTracks.findIndex(track => track.trackId === remoteTrack.trackId);\n      if (index === -1) {\n        hmsPeer.auxiliaryTracks.push(remoteTrack);\n        this.store.addTrack(remoteTrack);\n      } else {\n        (hmsPeer.auxiliaryTracks[index] as HMSRemoteVideoTrack).replaceTrack(remoteTrack);\n        this.store.addTrack(hmsPeer.auxiliaryTracks[index]);\n      }\n    }\n    HMSLogger.d(this.TAG, 'video track added', `${track}`);\n  }\n\n  addAsPrimaryVideoTrack(hmsPeer: HMSPeer, track: HMSRemoteTrack) {\n    return track.source === 'regular' && (!hmsPeer.videoTrack || hmsPeer.videoTrack?.trackId === track.trackId);\n  }\n\n  private processTrackUpdate(track: HMSRemoteTrack, currentTrackState: TrackState, trackState: TrackState) {\n    let eventType;\n    if (currentTrackState.mute !== trackState.mute) {\n      eventType = trackState.mute ? HMSTrackUpdate.TRACK_MUTED : HMSTrackUpdate.TRACK_UNMUTED;\n      track.type === HMSTrackType.AUDIO &&\n        this.eventBus.audioTrackUpdate.publish({ track: track as HMSRemoteAudioTrack, enabled: !trackState.mute });\n    } else if (currentTrackState.description !== trackState.description) {\n      eventType = HMSTrackUpdate.TRACK_DESCRIPTION_CHANGED;\n    }\n    return eventType;\n  }\n}\n","import { TrackManager } from './TrackManager';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSPeer, HMSTrackUpdate, HMSUpdateListener } from '../../interfaces';\nimport { HMSRemoteStream } from '../../media/streams/HMSRemoteStream';\nimport { HMSRemoteTrack, HMSRemoteVideoTrack } from '../../media/tracks';\nimport { LocalTrackManager } from '../../sdk/LocalTrackManager';\nimport { Store } from '../../sdk/store';\nimport HMSTransport from '../../transport';\nimport HMSLogger from '../../utils/logger';\nimport { isEmptyTrack } from '../../utils/track';\nimport { TrackState, TrackStateNotification } from '../HMSNotifications';\n\nexport class OnDemandTrackManager extends TrackManager {\n  TAG = '[OnDemandTrackManager]';\n\n  constructor(store: Store, eventBus: EventBus, private transport: HMSTransport, listener?: HMSUpdateListener) {\n    super(store, eventBus, listener);\n  }\n\n  handleTrackMetadataAdd(params: TrackStateNotification) {\n    super.handleTrackMetadataAdd(params);\n    for (const trackId in params.tracks) {\n      if (params.tracks[trackId].type === 'video') {\n        this.processTrackInfo(params.tracks[trackId], params.peer.peer_id);\n      }\n    }\n  }\n\n  handleTrackRemove(track: HMSRemoteTrack) {\n    const isRegularVideo = track.type === 'video' && track.source === 'regular';\n    super.handleTrackRemove(track, !isRegularVideo);\n    if (isRegularVideo) {\n      this.processTrackInfo(\n        {\n          track_id: track.trackId,\n          mute: !track.enabled,\n          type: track.type,\n          source: track.source,\n          stream_id: track.stream.id,\n        } as TrackState,\n        track.peerId!,\n        false,\n      );\n    }\n  }\n\n  /**\n   * Add a blank track for the track received from biz so that the UI can render and show video element\n   * which will trigger the prefer-video-track-state request which results in the actual track being\n   * received from the sfu.\n   * This will also be called when track is removed, as it can be removed when none is sent to sfu to\n   * reduce the overall offer size\n   * @param {TrackState} trackInfo\n   * @param {string} peerId\n   * @param {boolean} callListener\n   * @returns\n   */\n  processTrackInfo = (trackInfo: TrackState, peerId: string, callListener = true) => {\n    if (trackInfo.type !== 'video') {\n      return;\n    }\n    const hmsPeer = this.store.getPeerById(peerId);\n    if (!hmsPeer || !this.isPeerRoleSubscribed(peerId)) {\n      HMSLogger.d(this.TAG, `no peer in store for peerId: ${peerId}`);\n      return;\n    }\n    const remoteStream = new HMSRemoteStream(new MediaStream(), this.transport.getSubscribeConnection()!);\n    const emptyTrack = LocalTrackManager.getEmptyVideoTrack();\n    emptyTrack.enabled = !trackInfo.mute;\n    const track = new HMSRemoteVideoTrack(\n      remoteStream,\n      emptyTrack,\n      trackInfo.source,\n      this.store.getRoom()?.disableNoneLayerRequest,\n    );\n    track.setTrackId(trackInfo.track_id);\n    track.peerId = hmsPeer.peerId;\n    track.logIdentifier = hmsPeer.name;\n    this.addVideoTrack(hmsPeer, track);\n    if (callListener) {\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_ADDED, hmsPeer.videoTrack!, hmsPeer);\n    }\n  };\n\n  addAsPrimaryVideoTrack(hmsPeer: HMSPeer, track: HMSRemoteTrack) {\n    if (track.source !== 'regular') {\n      return false;\n    }\n    if (!hmsPeer.videoTrack) {\n      return true;\n    }\n    if (hmsPeer.videoTrack.trackId === track.trackId) {\n      return true;\n    }\n    return hmsPeer.videoTrack.enabled && isEmptyTrack(hmsPeer.videoTrack.nativeTrack);\n  }\n\n  private isPeerRoleSubscribed(peerId?: string) {\n    if (!peerId) {\n      return true;\n    }\n    const localPeer = this.store.getLocalPeer();\n    const peer = this.store.getPeerById(peerId);\n    return peer && localPeer?.role?.subscribeParams?.subscribeToRoles?.includes(peer.role?.name!);\n  }\n}\n","import { PeerManager } from './PeerManager';\nimport { TrackManager } from './TrackManager';\nimport { HMSTrackUpdate, HMSUpdateListener } from '../../interfaces';\nimport { HMSPeer } from '../../sdk/models/peer';\nimport { Store } from '../../sdk/store';\nimport HMSLogger from '../../utils/logger';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport { PeerListNotification, PeerNotification, PeriodicRoomState } from '../HMSNotifications';\n\n/**\n * Handles:\n * - Initial Peer List - get peer and track meta-data for peers who are already in the room when you join\n * - Reconnect Peer List - Handle peer and track changes in the room missed out due to reconnection\n *\n * Cases to handle in reconnect peer list:\n * - Add additional peers as peer join\n * - Remove missing peers as peer leave\n * - For existing peers:\n *    - Add new tracks as track add\n *    - Remove missing tracks as track remove\n *    - Track state change(enabled) as track update\n */\nexport class PeerListManager {\n  private readonly TAG = '[PeerListManager]';\n  constructor(\n    private store: Store,\n    private peerManager: PeerManager,\n    private trackManager: TrackManager,\n    public listener?: HMSUpdateListener,\n  ) {}\n\n  handleNotification(method: string, notification: any, isReconnecting: boolean) {\n    if (method === HMSNotificationMethod.PEER_LIST) {\n      const peerList = notification as PeerListNotification;\n      if (isReconnecting) {\n        HMSLogger.d(this.TAG, `RECONNECT_PEER_LIST event`, JSON.stringify(peerList, null, 2));\n        this.handleReconnectPeerList(peerList);\n      } else {\n        // TODO: Don't call initial peerlist if atleast 1room state had happen\n        HMSLogger.d(this.TAG, `PEER_LIST event`, JSON.stringify(peerList, null, 2));\n        this.handleInitialPeerList(peerList);\n      }\n    } else if (method === HMSNotificationMethod.ROOM_STATE) {\n      const roomState = notification as PeriodicRoomState;\n      this.handlePreviewRoomState(roomState);\n    }\n  }\n\n  private handleInitialPeerList = (peerList: PeerListNotification) => {\n    const peers = Object.values(peerList.peers);\n    this.peerManager.handlePeerList(peers);\n  };\n\n  private handleReconnectPeerList = (peerList: PeerListNotification) => {\n    this.handleRepeatedPeerList(peerList.peers);\n  };\n\n  private handlePreviewRoomState = (roomState: PeriodicRoomState) => {\n    if (!this.store.hasRoleDetailsArrived()) {\n      // we can't process the peers yet we don't know enough about them(role info)\n      return;\n    }\n    const roomPeers = roomState.peers;\n    if (roomPeers === null || roomPeers === undefined) {\n      // in this case, room state doesn't say anything about the peers,\n      // there can be optimisations in place to not send this field when it's unchanged from previously sent value.\n      // If there are no peers either roomState.peers will be empty object\n      // or peer_count will be 0(handled below)\n      if (roomState.peer_count === 0) {\n        this.handleRepeatedPeerList({});\n      }\n      return;\n    }\n    // we don't get tracks inside the peer object in room state, we're adding\n    // an empty value here so rest of the code flow can ignore this change, the below\n    // can be changed when tracks will be sent as a separate object in future\n    Object.keys(roomPeers).forEach(peer => {\n      roomPeers[peer].tracks = {};\n      roomPeers[peer].is_from_room_state = true;\n    });\n    this.handleRepeatedPeerList(roomPeers);\n  };\n\n  private handleRepeatedPeerList = (peersMap: Record<string, PeerNotification>) => {\n    const currentPeerList = this.store.getRemotePeers();\n    const peers = Object.values(peersMap);\n    const peersToRemove = currentPeerList.filter(hmsPeer => !peersMap[hmsPeer.peerId]);\n    if (peersToRemove.length > 0) {\n      HMSLogger.d(this.TAG, `${peersToRemove}`);\n    }\n\n    // Send peer-leave updates to all the missing peers\n    peersToRemove.forEach(peer => {\n      const peerNotification: PeerNotification = {\n        peer_id: peer.peerId,\n        role: peer.role?.name || '',\n        info: {\n          name: peer.name,\n          data: peer.metadata || '',\n          user_id: peer.customerUserId || '',\n          type: peer.type,\n        },\n        tracks: {},\n        groups: [],\n        realtime: peer.realtime,\n      };\n\n      this.peerManager.handlePeerLeave(peerNotification);\n    });\n\n    const peerList: PeerNotification[] = [];\n    // Check for any tracks which are added/removed\n    peers.forEach(newPeerNotification => {\n      const oldPeer = this.store.getPeerById(newPeerNotification.peer_id);\n      const newPeerTrackStates = Object.values(newPeerNotification.tracks);\n\n      if (oldPeer) {\n        // Peer already present in room, we take diff between the tracks\n        const tracks = this.store.getPeerTracks(oldPeer.peerId);\n\n        // Remove all the tracks which are not present in the peer.tracks\n        tracks.forEach(track => {\n          if (!newPeerNotification.tracks[track.trackId]) {\n            this.removePeerTrack(oldPeer, track.trackId);\n            this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, track, oldPeer);\n          }\n        });\n\n        // Add track-metadata for all the new tracks\n        newPeerTrackStates.forEach(trackData => {\n          if (!this.store.getTrackById(trackData.track_id)) {\n            // NOTE: We assume that, once the connection is re-established,\n            //  transport layer will send a native onTrackAdd\n            this.store.setTrackState({\n              peerId: oldPeer.peerId,\n              trackInfo: trackData,\n            });\n          }\n        });\n\n        // Handle RTC track add and track state change.\n        this.trackManager.handleTrackUpdate(\n          {\n            peer: newPeerNotification,\n            tracks: newPeerNotification.tracks,\n          },\n          false,\n        );\n\n        // Update peer's role locally, new role is received from the reconnect peer-list\n        this.peerManager.handlePeerUpdate(newPeerNotification);\n        peerList.push(newPeerNotification);\n      } else {\n        // New peer joined while reconnecting\n        peerList.push(newPeerNotification);\n      }\n    });\n    if (peerList.length > 0) {\n      this.peerManager.handlePeerList(peerList);\n    }\n  };\n\n  private removePeerTrack(peer: HMSPeer, trackId: string) {\n    HMSLogger.d(this.TAG, `removing track - ${trackId} from ${peer}`);\n    if (peer.audioTrack?.trackId === trackId) {\n      peer.audioTrack = undefined;\n    } else if (peer.videoTrack?.trackId === trackId) {\n      peer.videoTrack = undefined;\n    } else {\n      const trackIndex = peer.auxiliaryTracks.findIndex(track => track.trackId === trackId);\n      trackIndex >= 0 && peer.auxiliaryTracks.splice(trackIndex, 1);\n    }\n  }\n}\n","export const convertDateNumToDate = (dateNum?: number): Date | undefined => {\n  return dateNum ? new Date(dateNum) : undefined;\n};\n","import { TrackManager } from './TrackManager';\nimport { createRemotePeer } from './utils';\nimport { HMSPeerUpdate, HMSTrackUpdate, HMSUpdateListener } from '../../interfaces';\nimport { HMSRemoteVideoTrack } from '../../media/tracks';\nimport { HMSPeer, HMSRemotePeer } from '../../sdk/models/peer';\nimport { Store } from '../../sdk/store';\nimport { HAND_RAISE_GROUP_NAME } from '../../utils/constants';\nimport { convertDateNumToDate } from '../../utils/date';\nimport HMSLogger from '../../utils/logger';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport { PeerNotification } from '../HMSNotifications';\n\n/**\n * Handles:\n * - New peer join\n * - Peer Leave\n * - Role update for peer\n *\n * Notes:\n * - Peer join comes with track meta-data,\n * we add it to the store and call TrackManager to process it when RTC Track comes in.\n */\nexport class PeerManager {\n  private readonly TAG = '[PeerManager]';\n  constructor(private store: Store, private trackManager: TrackManager, public listener?: HMSUpdateListener) {}\n\n  handleNotification(method: string, notification: any) {\n    switch (method) {\n      case HMSNotificationMethod.PEER_JOIN: {\n        const peer = notification as PeerNotification;\n        this.handlePeerJoin(peer);\n        break;\n      }\n\n      case HMSNotificationMethod.PEER_LEAVE: {\n        const peer = notification as PeerNotification;\n        this.handlePeerLeave(peer);\n        break;\n      }\n      case HMSNotificationMethod.PEER_UPDATE:\n        this.handlePeerUpdate(notification as PeerNotification);\n        break;\n      default:\n        break;\n    }\n  }\n\n  handlePeerList = (peers: PeerNotification[]) => {\n    if (peers.length === 0) {\n      this.listener?.onPeerUpdate(HMSPeerUpdate.PEER_LIST, []);\n      return;\n    }\n    const hmsPeers: HMSRemotePeer[] = [];\n    const newPeers = new Set(peers.map(peer => peer.peer_id));\n    this.store.getRemotePeers().forEach(({ peerId, fromRoomState }) => {\n      /**\n       * Remove only if the peer join happened from preview roomstate update. This will prevent the peer joined\n       * from peer-join event post join from being removed from the store.\n       */\n      if (!newPeers.has(peerId) && fromRoomState) {\n        this.store.removePeer(peerId);\n      }\n    });\n    for (const peer of peers) {\n      hmsPeers.push(this.makePeer(peer));\n    }\n    this.listener?.onPeerUpdate(HMSPeerUpdate.PEER_LIST, hmsPeers);\n    this.trackManager.processPendingTracks();\n  };\n\n  handlePeerJoin = (peer: PeerNotification) => {\n    const hmsPeer = this.makePeer(peer);\n\n    this.listener?.onPeerUpdate(HMSPeerUpdate.PEER_JOINED, hmsPeer);\n    this.trackManager.processPendingTracks();\n  };\n\n  handlePeerLeave = (peer: PeerNotification) => {\n    const hmsPeer = this.store.getPeerById(peer.peer_id);\n    this.store.removePeer(peer.peer_id);\n    HMSLogger.d(this.TAG, `PEER_LEAVE`, peer.peer_id, `remainingPeers=${this.store.getPeers().length}`);\n\n    if (!hmsPeer) {\n      return;\n    }\n\n    if (hmsPeer.audioTrack) {\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, hmsPeer.audioTrack, hmsPeer);\n    }\n\n    if (hmsPeer.videoTrack) {\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, hmsPeer.videoTrack, hmsPeer);\n    }\n\n    hmsPeer.auxiliaryTracks?.forEach(track => {\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, track, hmsPeer);\n    });\n\n    this.listener?.onPeerUpdate(HMSPeerUpdate.PEER_LEFT, hmsPeer);\n  };\n\n  // eslint-disable-next-line complexity\n  handlePeerUpdate(notification: PeerNotification) {\n    let peer = this.store.getPeerById(notification.peer_id);\n    if (!peer && notification.realtime) {\n      // create peer if not already created in store\n      peer = this.makePeer(notification);\n      this.listener?.onPeerUpdate(\n        peer.isHandRaised ? HMSPeerUpdate.HAND_RAISE_CHANGED : HMSPeerUpdate.PEER_ADDED,\n        peer,\n      );\n      return;\n    }\n\n    // if peer is present but not realtime now, remove it from store\n    if (peer && !peer.isLocal && !notification.realtime) {\n      this.store.removePeer(peer.peerId);\n      this.listener?.onPeerUpdate(HMSPeerUpdate.PEER_REMOVED, peer);\n      return;\n    }\n\n    if (!peer) {\n      HMSLogger.d(this.TAG, `peer ${notification.peer_id} not found`);\n      return;\n    }\n\n    if (peer.role && peer.role.name !== notification.role) {\n      const newRole = this.store.getPolicyForRole(notification.role);\n      peer.updateRole(newRole);\n      this.updateSimulcastLayersForPeer(peer);\n      this.listener?.onPeerUpdate(HMSPeerUpdate.ROLE_UPDATED, peer);\n    }\n    const wasHandRaised = peer.isHandRaised;\n    peer.updateGroups(notification.groups);\n    const isHandRaised = notification.groups?.includes(HAND_RAISE_GROUP_NAME);\n    if (wasHandRaised !== isHandRaised) {\n      this.listener?.onPeerUpdate(HMSPeerUpdate.HAND_RAISE_CHANGED, peer);\n    }\n    this.handlePeerInfoUpdate({ peer, ...notification.info });\n  }\n\n  handlePeerInfoUpdate({ peer, name, data }: { peer?: HMSPeer; name?: string; data?: string }) {\n    if (!peer) {\n      return;\n    }\n    if (name && peer.name !== name) {\n      peer.updateName(name);\n      this.listener?.onPeerUpdate(HMSPeerUpdate.NAME_UPDATED, peer);\n    }\n    if (data && peer.metadata !== data) {\n      peer.updateMetadata(data);\n      this.listener?.onPeerUpdate(HMSPeerUpdate.METADATA_UPDATED, peer);\n    }\n  }\n\n  private makePeer(peer: PeerNotification) {\n    let hmsPeer = this.store.getPeerById(peer.peer_id) as HMSRemotePeer;\n    if (!hmsPeer) {\n      hmsPeer = createRemotePeer(peer, this.store);\n      hmsPeer.realtime = peer.realtime;\n      hmsPeer.joinedAt = convertDateNumToDate(peer.joined_at);\n      hmsPeer.fromRoomState = !!peer.is_from_room_state;\n      this.store.addPeer(hmsPeer);\n      HMSLogger.d(this.TAG, `adding to the peerList`, `${hmsPeer}`);\n    }\n\n    for (const trackId in peer.tracks) {\n      const trackInfo = peer.tracks[trackId];\n      this.store.setTrackState({\n        peerId: peer.peer_id,\n        trackInfo,\n      });\n      if (trackInfo.type === 'video') {\n        this.trackManager.processTrackInfo(trackInfo, peer.peer_id, false);\n      }\n    }\n    return hmsPeer;\n  }\n\n  private updateSimulcastLayersForPeer(peer: HMSPeer) {\n    this.store.getPeerTracks(peer.peerId).forEach(track => {\n      if (track.type === 'video' && ['regular', 'screen'].includes(track.source!)) {\n        const remoteTrack = track as HMSRemoteVideoTrack;\n        const simulcastDefinitions = this.store.getSimulcastDefinitionsForPeer(peer, remoteTrack.source!);\n        remoteTrack.setSimulcastDefinitons(simulcastDefinitions);\n      }\n    });\n  }\n}\n","import { EventBus } from '../../events/EventBus';\nimport { Store } from '../../sdk/store';\nimport HMSLogger from '../../utils/logger';\nimport { PolicyParams } from '../HMSNotifications';\n\n/**\n * Handles:\n * - Set policy with publishParams, simulcast layers to store\n * - Emit 'local-peer-role-update' to trigger RoleChangeManager to publish/unpublish local tracks\n * - Emit 'policy-change' to finish preview before calling listener.onPreview\n */\nexport class PolicyChangeManager {\n  constructor(private store: Store, private eventBus: EventBus) {}\n\n  handlePolicyChange(params: PolicyParams) {\n    const localPeer = this.store.getLocalPeer();\n\n    if (localPeer && !localPeer.role) {\n      const newRole = params.known_roles[params.name];\n      localPeer.updateRole(newRole);\n    }\n\n    this.store.setKnownRoles(params);\n    const room = this.store.getRoom();\n    if (room) {\n      room.templateId = params.template_id;\n    } else {\n      HMSLogger.w('[PolicyChangeManager]', 'on policy change - room not present');\n    }\n    // handle when role is not present in known_roles\n    // const publishParams = params.known_roles[params.name]?.publishParams;\n    // this.store.setPublishParams(publishParams);\n\n    this.updateLocalPeerRole(params);\n    this.eventBus.policyChange.publish(params);\n  }\n\n  private updateLocalPeerRole(params: PolicyParams) {\n    const localPeer = this.store.getLocalPeer();\n    if (localPeer?.role && localPeer.role.name !== params.name) {\n      const newRole = this.store.getPolicyForRole(params.name);\n      const oldRole = localPeer.role;\n      localPeer.updateRole(newRole);\n      if (newRole.name === localPeer.asRole?.name) {\n        delete localPeer.asRole;\n      }\n      this.eventBus.localRoleUpdate.publish({ oldRole, newRole });\n    }\n  }\n}\n","/**\n * Thresholds for the network quality scores in kbps.\n * ex: { 1: { low: 300, high: 400 }}\n */\nexport type ScoreMap = Record<\n  number,\n  {\n    low: number;\n    high?: number;\n  }\n>;\n\n/**\n * Informantion necessary to test network quality. it provides a url to be\n * downloaded and timeout for the url download. And also the scores to be\n * assigned based on the downloaded data and time.\n */\nexport interface NetworkHealth {\n  url: string;\n  timeout: number;\n  scoreMap: ScoreMap;\n}\nexport interface InitConfig {\n  readonly endpoint: string;\n  readonly log_level: string;\n  readonly policy: string;\n  readonly rtcConfiguration: RTCConfiguration;\n  readonly pingTimeout?: number;\n  readonly config: {\n    readonly enabledFlags?: Array<InitFlags>;\n    readonly networkHealth: NetworkHealth;\n    readonly publishStats?: {\n      readonly maxSampleWindowSize: number;\n      readonly maxSamplePushInterval: number;\n    };\n    readonly subscribeStats?: {\n      readonly maxSampleWindowSize: number;\n      readonly maxSamplePushInterval: number;\n    };\n    readonly dtlsStateTimeouts?: {\n      readonly connecting: number;\n      readonly failed: number;\n    };\n    readonly vb?: {\n      readonly effectsKey: string;\n    };\n  };\n}\n\nexport enum InitFlags {\n  FLAG_SERVER_SUB_DEGRADATION = 'subscribeDegradation',\n  FLAG_SERVER_SIMULCAST = 'simulcast',\n  FLAG_NON_WEBRTC_DISABLE_OFFER = 'nonWebRTCDisableOffer',\n  FLAG_PUBLISH_STATS = 'publishStats',\n  FLAG_SUBSCRIBE_STATS = 'subscribeStats',\n  FLAG_ON_DEMAND_TRACKS = 'onDemandTracks',\n  // Don't unsubscribe for beam to prevent a/v sync in case of active speaker\n  FLAG_DISABLE_VIDEO_TRACK_AUTO_UNSUBSCRIBE = 'disableVideoTrackAutoUnsubscribe',\n  FLAG_WHITEBOARD_ENABLED = 'whiteboardEnabled',\n  FLAG_EFFECTS_SDK_ENABLED = 'effectsSDKEnabled',\n  FLAG_VB_ENABLED = 'vb',\n  FLAG_HIPAA_ENABLED = 'hipaa',\n  FLAG_NOISE_CANCELLATION = 'noiseCancellation',\n  FLAG_SCALE_SCREENSHARE_BASED_ON_PIXELS = 'scaleScreenshareBasedOnPixels',\n  FLAG_DISABLE_NONE_LAYER_REQUEST = 'disableNoneLayerRequest',\n}\n","import { WHITEBOARD_ORIGIN, WHITEBOARD_QA_ORIGIN } from './constants';\nimport { ENV } from './support';\n\nexport const constructWhiteboardURL = (token: string, addr: string, env?: ENV) => {\n  const origin = env === ENV.QA ? WHITEBOARD_QA_ORIGIN : WHITEBOARD_ORIGIN;\n\n  const url = new URL(origin);\n  url.searchParams.set('endpoint', `https://${addr}`);\n  url.searchParams.set('token', token);\n\n  return url.toString();\n};\n","import { HMSWhiteboard, InteractivityListener } from '../../interfaces';\nimport { HMSWhiteboardInteractivityCenter } from '../../interfaces/session-store/interactivity-center';\nimport { Store } from '../../sdk/store';\nimport { InitFlags } from '../../signal/init/models';\nimport { HMSWhiteboardCreateOptions } from '../../signal/interfaces';\nimport HMSTransport from '../../transport';\nimport HMSLogger from '../../utils/logger';\nimport { constructWhiteboardURL } from '../../utils/whiteboard';\n\nexport class WhiteboardInteractivityCenter implements HMSWhiteboardInteractivityCenter {\n  private TAG = '[HMSWhiteboardInteractivityCenter]';\n  constructor(\n    private readonly transport: HMSTransport,\n    private store: Store,\n    private listener?: InteractivityListener,\n  ) {}\n\n  // @TODO: remove when whiteboard released for general audience\n  get isEnabled() {\n    return this.transport.isFlagEnabled(InitFlags.FLAG_WHITEBOARD_ENABLED);\n  }\n\n  async open(createOptions?: HMSWhiteboardCreateOptions) {\n    if (!this.isEnabled) {\n      return HMSLogger.w(this.TAG, 'Whiteboard is not enabled for customer');\n    }\n    const prevWhiteboard = this.store.getWhiteboard(createOptions?.id);\n    let id = prevWhiteboard?.id;\n\n    if (!prevWhiteboard) {\n      const response = await this.transport.signal.createWhiteboard(this.getCreateOptionsWithDefaults(createOptions));\n      id = response.id;\n    }\n    if (!id) {\n      throw new Error(`Whiteboard ID: ${id} not found`);\n    }\n\n    const response = await this.transport.signal.getWhiteboard({ id });\n    const whiteboard: HMSWhiteboard = {\n      ...prevWhiteboard,\n      title: createOptions?.title,\n      attributes: createOptions?.attributes,\n      id: response.id,\n      url: constructWhiteboardURL(response.token, response.addr, this.store.getEnv()),\n      token: response.token,\n      addr: response.addr,\n      owner: response.owner,\n      permissions: response.permissions || [],\n      open: true,\n    };\n\n    this.store.setWhiteboard(whiteboard);\n    this.listener?.onWhiteboardUpdate(whiteboard);\n  }\n\n  async close(id?: string) {\n    if (!this.isEnabled) {\n      return HMSLogger.w(this.TAG, 'Whiteboard is not enabled for customer');\n    }\n\n    const prevWhiteboard = this.store.getWhiteboard(id);\n    if (!prevWhiteboard) {\n      throw new Error(`Whiteboard ID: ${id} not found`);\n    }\n    const whiteboard: HMSWhiteboard = { id: prevWhiteboard.id, title: prevWhiteboard.title, open: false };\n\n    this.store.setWhiteboard(whiteboard);\n    this.listener?.onWhiteboardUpdate(whiteboard);\n  }\n\n  setListener(listener?: InteractivityListener) {\n    this.listener = listener;\n  }\n\n  async handleLocalRoleUpdate() {\n    const whiteboards = this.store.getWhiteboards();\n\n    for (const whiteboard of whiteboards.values()) {\n      if (whiteboard.url) {\n        const response = await this.transport.signal.getWhiteboard({ id: whiteboard.id });\n        const localPeer = this.store.getLocalPeer();\n        const isOwner = localPeer?.customerUserId === response.owner;\n        const open = isOwner\n          ? localPeer.role?.permissions.whiteboard?.includes('admin')\n          : response.permissions.length > 0;\n        const newWhiteboard: HMSWhiteboard = {\n          ...whiteboard,\n          id: response.id,\n          url: constructWhiteboardURL(response.token, response.addr, this.store.getEnv()),\n          token: response.token,\n          addr: response.addr,\n          owner: response.owner,\n          permissions: response.permissions,\n          open,\n        };\n\n        this.store.setWhiteboard(newWhiteboard);\n        this.listener?.onWhiteboardUpdate(newWhiteboard);\n      }\n    }\n  }\n\n  private getCreateOptionsWithDefaults(createOptions?: HMSWhiteboardCreateOptions): HMSWhiteboardCreateOptions {\n    const roles = Object.values(this.store.getKnownRoles());\n    const reader: Array<string> = [];\n    const writer: Array<string> = [];\n    const admin: Array<string> = [];\n\n    roles.forEach(role => {\n      if (role.permissions.whiteboard?.includes('read')) {\n        reader.push(role.name);\n      }\n      if (role.permissions.whiteboard?.includes('write')) {\n        writer.push(role.name);\n      }\n      if (role.permissions.whiteboard?.includes('admin')) {\n        admin.push(role.name);\n      }\n    });\n\n    return {\n      title: createOptions?.title || `${this.store.getRoom()?.id} Whiteboard`,\n      reader: createOptions?.reader || reader,\n      writer: createOptions?.writer || writer,\n      admin: createOptions?.admin || admin,\n    };\n  }\n}\n","import { WhiteboardInteractivityCenter } from './HMSWhiteboardCenter';\nimport {\n  HMSInteractivityCenter,\n  HMSPollQuestionCreateParams,\n  HMSPollsUpdate,\n  InteractivityListener,\n} from '../../interfaces';\nimport {\n  HMSPoll,\n  HMSPollCreateParams,\n  HMSPollQuestionAnswer,\n  HMSPollQuestionOption,\n  HMSPollQuestionResponse,\n  HMSPollQuestionResponseCreateParams,\n  HMSPollQuestionType,\n  HMSPollStates,\n  HMSPollUserTrackingMode,\n  HMSQuizLeaderboardResponse,\n} from '../../interfaces/session-store/polls';\nimport { Store } from '../../sdk/store';\nimport { PollInfoParams, PollQuestionParams, PollResponseParams } from '../../signal/interfaces';\nimport HMSTransport from '../../transport';\nimport { convertDateNumToDate } from '../../utils/date';\n\nexport class InteractivityCenter implements HMSInteractivityCenter {\n  whiteboard: WhiteboardInteractivityCenter;\n  constructor(private transport: HMSTransport, private store: Store, private listener?: InteractivityListener) {\n    this.whiteboard = new WhiteboardInteractivityCenter(transport, store, listener);\n  }\n\n  setListener(listener?: InteractivityListener) {\n    this.listener = listener;\n    this.whiteboard.setListener(listener);\n  }\n\n  async createPoll(pollParams: HMSPollCreateParams) {\n    const HMS_USER_TRACKING_MODE_MAP: Record<HMSPollUserTrackingMode, string> = {\n      customerID: 'userid',\n      peerID: 'peerid',\n      userName: 'username',\n    };\n\n    const { poll_id: serverPollID } = await this.transport.signal.setPollInfo({\n      ...pollParams,\n      mode: pollParams.mode ? HMS_USER_TRACKING_MODE_MAP[pollParams.mode] : undefined,\n      poll_id: pollParams.id,\n      vote: pollParams.rolesThatCanVote,\n      responses: pollParams.rolesThatCanViewResponses,\n    });\n\n    if (!pollParams.id) {\n      pollParams.id = serverPollID;\n    }\n\n    if (Array.isArray(pollParams.questions)) {\n      await this.addQuestionsToPoll(pollParams.id, pollParams.questions);\n    }\n\n    const questions = await this.transport.signal.getPollQuestions({ poll_id: pollParams.id, index: 0, count: 50 });\n\n    const poll = createHMSPollFromPollParams({\n      ...pollParams,\n      poll_id: pollParams.id,\n      state: 'created',\n      created_by: this.store.getLocalPeer()?.peerId,\n    });\n\n    poll.questions = questions.questions.map(({ question, options, answer }) => ({ ...question, options, answer }));\n    this.listener?.onPollsUpdate(HMSPollsUpdate.POLL_CREATED, [poll]);\n  }\n\n  async startPoll(poll: string | HMSPollCreateParams): Promise<void> {\n    if (typeof poll === 'string') {\n      await this.transport.signal.startPoll({ poll_id: poll });\n    } else {\n      await this.createPoll(poll);\n      await this.transport.signal.startPoll({ poll_id: poll.id });\n    }\n  }\n\n  async addQuestionsToPoll(pollID: string, questions: HMSPollQuestionCreateParams[]): Promise<void> {\n    if (questions.length > 0) {\n      await this.transport.signal.setPollQuestions({\n        poll_id: pollID,\n        questions: questions.map((question, index) => this.createQuestionSetParams(question, index)),\n      });\n    }\n  }\n\n  async stopPoll(pollID: string): Promise<void> {\n    await this.transport.signal.stopPoll({ poll_id: pollID });\n  }\n\n  async addResponsesToPoll(pollID: string, responses: HMSPollQuestionResponseCreateParams[]) {\n    const poll = this.store.getPoll(pollID);\n    if (!poll) {\n      throw new Error('Invalid poll ID - Poll not found');\n    }\n    const responsesParams: PollResponseParams[] = responses.map(response => {\n      const question = this.getQuestionInPoll(poll, response.questionIndex);\n      if (question.type === HMSPollQuestionType.SINGLE_CHOICE) {\n        response.option = response.option || response.options?.[0] || -1;\n        delete response.text;\n        delete response.options;\n      } else if (question.type === HMSPollQuestionType.MULTIPLE_CHOICE) {\n        response.options?.sort();\n        delete response.text;\n        delete response.option;\n      } else {\n        delete response.option;\n        delete response.options;\n      }\n\n      if (response.skipped) {\n        delete response.option;\n        delete response.options;\n        delete response.text;\n      }\n\n      return { duration: 0, type: question.type, question: response.questionIndex, ...response };\n    });\n\n    await this.transport.signal.setPollResponses({ poll_id: pollID, responses: responsesParams });\n  }\n\n  async fetchLeaderboard(pollID: string, offset: number, count: number): Promise<HMSQuizLeaderboardResponse> {\n    const poll = this.store.getPoll(pollID);\n    if (!poll) {\n      throw new Error('Invalid poll ID - Poll not found');\n    }\n\n    const localPeerPermissions = this.store.getLocalPeer()?.role?.permissions;\n    const canViewSummary = !!(localPeerPermissions?.pollRead || localPeerPermissions?.pollWrite);\n\n    if (poll.anonymous || poll.state !== HMSPollStates.STOPPED || !canViewSummary) {\n      return { entries: [], hasNext: false };\n    }\n    const pollLeaderboard = await this.transport.signal.fetchPollLeaderboard({\n      poll_id: poll.id,\n      count,\n      offset,\n    });\n\n    const summary = {\n      avgScore: pollLeaderboard.avg_score,\n      avgTime: pollLeaderboard.avg_time,\n      votedUsers: pollLeaderboard.voted_users,\n      totalUsers: pollLeaderboard.total_users,\n      correctUsers: pollLeaderboard.correct_users,\n    };\n\n    const leaderboardEntries = pollLeaderboard.questions.map(question => {\n      return {\n        position: question.position,\n        totalResponses: question.total_responses,\n        correctResponses: question.correct_responses,\n        duration: question.duration,\n        peer: question.peer,\n        score: question.score,\n      };\n    });\n\n    return { entries: leaderboardEntries, hasNext: !pollLeaderboard.last, summary };\n  }\n\n  async getPollResponses(poll: HMSPoll, self: boolean) {\n    const serverResponseParams = await this.transport.signal.getPollResponses({\n      poll_id: poll.id,\n      index: 0,\n      count: 50,\n      self,\n    });\n    const pollCopy = JSON.parse(JSON.stringify(poll));\n    serverResponseParams.responses?.forEach(({ response, peer, final }) => {\n      const question = poll?.questions?.find(question => question.index === response.question);\n      if (question) {\n        const pollResponse: HMSPollQuestionResponse = {\n          id: response.response_id,\n          questionIndex: response.question,\n          option: response.option,\n          options: response.options,\n          text: response.text,\n          responseFinal: final,\n          peer: { peerid: peer.peerid, userHash: peer.hash, userid: peer.userid, username: peer.username },\n          skipped: response.skipped,\n          type: response.type,\n          update: response.update,\n        };\n        const existingResponses = question.responses && !self ? [...question.responses] : [];\n\n        if (pollCopy.questions?.[response.question - 1]) {\n          pollCopy.questions[response.question - 1].responses = [...existingResponses, pollResponse];\n        }\n      }\n    });\n    this.store.setPoll(pollCopy);\n    this.listener?.onPollsUpdate(HMSPollsUpdate.POLL_STATS_UPDATED, [pollCopy]);\n  }\n  async getPolls(): Promise<HMSPoll[]> {\n    const launchedPollsList = await this.transport.signal.getPollsList({ count: 50, state: 'started' });\n    const polls: HMSPoll[] = [];\n    const canViewAllPolls = this.store.getLocalPeer()?.role?.permissions.pollWrite;\n\n    let visiblePolls = [...launchedPollsList.polls];\n    if (canViewAllPolls) {\n      const draftPollsList = await this.transport.signal.getPollsList({ count: 50, state: 'created' });\n      const completedPollsList = await this.transport.signal.getPollsList({ count: 50, state: 'stopped' });\n      visiblePolls = [...draftPollsList.polls, ...visiblePolls, ...completedPollsList.polls];\n    }\n\n    for (const pollParams of visiblePolls) {\n      const questions = await this.transport.signal.getPollQuestions({\n        poll_id: pollParams.poll_id,\n        index: 0,\n        count: 50,\n      });\n      const poll = createHMSPollFromPollParams(pollParams);\n      const existingPoll = this.store.getPoll(pollParams.poll_id);\n      poll.questions = questions.questions.map(({ question, options, answer }, index) => ({\n        ...question,\n        options,\n        answer,\n        responses: existingPoll?.questions?.[index]?.responses,\n      }));\n      polls.push(poll);\n      this.store.setPoll(poll);\n    }\n\n    this.listener?.onPollsUpdate(HMSPollsUpdate.POLLS_LIST, polls);\n    return polls;\n  }\n\n  // eslint-disable-next-line complexity\n  private createQuestionSetParams(questionParams: HMSPollQuestionCreateParams, index: number): PollQuestionParams {\n    // early return if the question has been saved before in a draft\n    if (questionParams.index) {\n      const optionsWithIndex = questionParams.options?.map((option, index) => {\n        return { ...option, index: index + 1 };\n      });\n      return {\n        question: { ...questionParams, index: index + 1 },\n        options: optionsWithIndex,\n        answer: questionParams.answer,\n      };\n    }\n    const question: PollQuestionParams['question'] = { ...questionParams, index: index + 1 };\n    let options: HMSPollQuestionOption[] | undefined;\n    const answer: HMSPollQuestionAnswer = questionParams.answer || { hidden: false };\n\n    if (\n      Array.isArray(questionParams.options) &&\n      [HMSPollQuestionType.SINGLE_CHOICE, HMSPollQuestionType.MULTIPLE_CHOICE].includes(questionParams.type)\n    ) {\n      options = questionParams.options?.map((option, index) => ({\n        index: index + 1,\n        text: option.text,\n        weight: option.weight,\n      }));\n\n      if (questionParams.type === HMSPollQuestionType.SINGLE_CHOICE) {\n        answer.option = questionParams.options.findIndex(option => option.isCorrectAnswer) + 1 || undefined;\n      } else {\n        answer.options = questionParams.options\n          .map((option, index) => (option.isCorrectAnswer ? index + 1 : undefined))\n          .filter((val): val is number => !!val);\n      }\n    } else {\n      delete answer?.options;\n      delete answer?.option;\n    }\n\n    return { question, options, answer };\n  }\n\n  private getQuestionInPoll(poll: HMSPoll, questionIndex: number) {\n    const question = poll?.questions?.find(question => question.index === questionIndex);\n    if (!question) {\n      throw new Error('Invalid question index - Question not found in poll');\n    }\n\n    return question;\n  }\n}\n\nexport const createHMSPollFromPollParams = (pollParams: PollInfoParams): HMSPoll => {\n  const BIZ_USER_TRACKING_MODE_MAP: Record<string, HMSPollUserTrackingMode> = {\n    userid: 'customerID',\n    peerid: 'peerID',\n    username: 'userName',\n  };\n\n  return {\n    id: pollParams.poll_id,\n    title: pollParams.title,\n    startedBy: pollParams.started_by,\n    createdBy: pollParams.created_by,\n    anonymous: pollParams.anonymous,\n    type: pollParams.type,\n    duration: pollParams.duration,\n    locked: pollParams.locked, // poll is locked automatically when it starts\n    mode: pollParams.mode ? BIZ_USER_TRACKING_MODE_MAP[pollParams.mode] : undefined,\n    visibility: pollParams.visibility,\n    rolesThatCanVote: pollParams.vote || [],\n    rolesThatCanViewResponses: pollParams.responses || [],\n    state: pollParams.state,\n    stoppedBy: pollParams.stopped_by,\n    startedAt: convertDateNumToDate(pollParams.started_at),\n    stoppedAt: convertDateNumToDate(pollParams.stopped_at),\n    createdAt: convertDateNumToDate(pollParams.created_at),\n  };\n};\n","import { HMSPoll, HMSPollQuestionResponse, HMSPollsUpdate, HMSUpdateListener } from '../../interfaces';\nimport { Store } from '../../sdk/store';\nimport { createHMSPollFromPollParams } from '../../session-store/interactivity-center/HMSInteractivityCenter';\nimport { PollResult } from '../../signal/interfaces';\nimport HMSTransport from '../../transport';\nimport { convertDateNumToDate } from '../../utils/date';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport { PollStartNotification, PollStatsNotification, PollStopNotification } from '../HMSNotifications';\n\nexport class PollsManager {\n  constructor(private store: Store, private transport: HMSTransport, public listener?: HMSUpdateListener) {}\n\n  handleNotification(method: string, notification: any) {\n    switch (method) {\n      case HMSNotificationMethod.POLL_START: {\n        this.handlePollStart(notification as PollStartNotification);\n        break;\n      }\n\n      case HMSNotificationMethod.POLL_STOP: {\n        this.handlePollStop(notification as PollStopNotification);\n        break;\n      }\n      case HMSNotificationMethod.POLL_STATS:\n        this.handlePollStats(notification as PollStatsNotification);\n\n        break;\n      default:\n        break;\n    }\n  }\n\n  private async handlePollStart(notification: PollStartNotification) {\n    const polls: HMSPoll[] = [];\n\n    for (const pollParams of notification.polls) {\n      const pollInStore = this.store.getPoll(pollParams.poll_id);\n\n      if (pollInStore && pollInStore.state === 'started') {\n        this.listener?.onPollsUpdate(HMSPollsUpdate.POLL_STARTED, [pollInStore]);\n        return;\n      }\n\n      const questions = await this.transport.signal.getPollQuestions({\n        poll_id: pollParams.poll_id,\n        index: 0,\n        count: 50,\n      });\n\n      const poll = createHMSPollFromPollParams(pollParams);\n      poll.questions = questions.questions.map(({ question, options, answer }) => ({ ...question, options, answer }));\n\n      await this.updatePollResponses(poll, true);\n\n      polls.push(poll);\n      this.store.setPoll(poll);\n    }\n    this.listener?.onPollsUpdate(HMSPollsUpdate.POLL_STARTED, polls);\n  }\n\n  private async handlePollStop(notification: PollStopNotification) {\n    const stoppedPolls: HMSPoll[] = [];\n\n    for (const poll of notification.polls) {\n      const savedPoll = this.store.getPoll(poll.poll_id);\n      if (savedPoll) {\n        savedPoll.state = 'stopped';\n        savedPoll.stoppedAt = convertDateNumToDate(poll.stopped_at);\n        savedPoll.stoppedBy = poll.stopped_by;\n\n        const pollResult = await this.transport.signal.getPollResult({ poll_id: poll.poll_id });\n        this.updatePollResult(savedPoll, pollResult);\n        stoppedPolls.push(savedPoll);\n      }\n    }\n\n    if (stoppedPolls.length > 0) {\n      this.listener?.onPollsUpdate(HMSPollsUpdate.POLL_STOPPED, stoppedPolls);\n    }\n  }\n\n  private async handlePollStats(notification: PollStatsNotification) {\n    const updatedPolls: HMSPoll[] = [];\n    for (const updatedPoll of notification.polls) {\n      const savedPoll = this.store.getPoll(updatedPoll.poll_id);\n      if (!savedPoll) {\n        return;\n      }\n\n      this.updatePollResult(savedPoll, updatedPoll);\n      updatedPolls.push(savedPoll);\n    }\n\n    if (updatedPolls.length > 0) {\n      this.listener?.onPollsUpdate(HMSPollsUpdate.POLL_STATS_UPDATED, updatedPolls);\n    }\n  }\n\n  private updatePollResult(savedPoll: HMSPoll, pollResult: PollResult) {\n    savedPoll.result = { ...savedPoll.result };\n    savedPoll.result.totalUsers = pollResult.user_count;\n    savedPoll.result.maxUsers = pollResult.max_user;\n    savedPoll.result.totalResponses = pollResult.total_response;\n\n    pollResult.questions?.forEach(updatedQuestion => {\n      const savedQuestion = savedPoll.questions?.find(question => question.index === updatedQuestion.question);\n      if (!savedQuestion) {\n        return;\n      }\n      savedQuestion.result = { ...savedQuestion.result };\n      savedQuestion.result.correctResponses = updatedQuestion.correct;\n      savedQuestion.result.skippedCount = updatedQuestion.skipped;\n      savedQuestion.result.totalResponses = updatedQuestion.total;\n\n      updatedQuestion.options?.forEach((updatedVoteCount, index) => {\n        const savedOption = savedQuestion.options?.[index];\n        if (savedOption && savedOption.voteCount !== updatedVoteCount) {\n          savedOption.voteCount = updatedVoteCount;\n        }\n      });\n    });\n  }\n\n  private async updatePollResponses(poll: HMSPoll, self: boolean) {\n    const serverResponseParams = await this.transport.signal.getPollResponses({\n      poll_id: poll.id,\n      index: 0,\n      count: 50,\n      self,\n    });\n\n    serverResponseParams.responses?.forEach(({ response, peer, final }) => {\n      const question = poll?.questions?.find(question => question.index === response.question);\n      if (!question) {\n        return;\n      }\n      const pollResponse: HMSPollQuestionResponse = {\n        id: response.response_id,\n        questionIndex: response.question,\n        option: response.option,\n        options: response.options,\n        text: response.text,\n        responseFinal: final,\n        peer: { peerid: peer.peerid, userHash: peer.hash, userid: peer.userid, username: peer.username },\n        skipped: response.skipped,\n        type: response.type,\n        update: response.update,\n      };\n\n      if (Array.isArray(question.responses) && question.responses.length > 0) {\n        if (!question.responses.find(({ id }) => id === pollResponse.id)) {\n          question.responses.push(pollResponse);\n        }\n      } else {\n        question.responses = [pollResponse];\n      }\n    });\n  }\n}\n","import { HMSRemotePeer, HMSRoleChangeRequest, HMSUpdateListener } from '../../interfaces';\nimport { HMSLocalTrack, HMSTrackSource } from '../../media/tracks';\nimport { Store } from '../../sdk/store';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport {\n  ChangeTrackMuteStateNotification,\n  RoleChangeRequestParams,\n  TrackUpdateRequestNotification,\n} from '../HMSNotifications';\n\n/**\n * Handles request from remote peers to change something on the local side. For eg. role change, track mute/unmute.\n */\nexport class RequestManager {\n  constructor(private store: Store, public listener?: HMSUpdateListener) {}\n\n  handleNotification(method: string, notification: any) {\n    switch (method) {\n      case HMSNotificationMethod.ROLE_CHANGE_REQUEST:\n        this.handleRoleChangeRequest(notification as RoleChangeRequestParams);\n        break;\n\n      case HMSNotificationMethod.TRACK_UPDATE_REQUEST:\n        this.handleTrackUpdateRequest(notification as TrackUpdateRequestNotification);\n        break;\n\n      case HMSNotificationMethod.CHANGE_TRACK_MUTE_STATE_UPDATE:\n        this.handleChangeTrackStateRequest(notification as ChangeTrackMuteStateNotification);\n        break;\n      default:\n        return;\n    }\n  }\n\n  private handleRoleChangeRequest(notification: RoleChangeRequestParams) {\n    const request: HMSRoleChangeRequest = {\n      requestedBy: notification.requested_by\n        ? (this.store.getPeerById(notification.requested_by) as HMSRemotePeer)\n        : undefined,\n      role: this.store.getPolicyForRole(notification.role),\n      token: notification.token,\n    };\n\n    this.listener?.onRoleChangeRequest(request);\n  }\n\n  // eslint-disable-next-line complexity\n  private handleTrackUpdateRequest(trackUpdateRequest: TrackUpdateRequestNotification) {\n    const { requested_by, track_id, mute } = trackUpdateRequest;\n    const peer = requested_by ? this.store.getPeerById(requested_by) : undefined;\n    const track = this.store.getLocalPeerTracks().find(track => track.publishedTrackId === track_id);\n\n    if (!track) {\n      return;\n    }\n\n    const sendNotification = () => {\n      this.listener?.onChangeTrackStateRequest({ requestedBy: peer as HMSRemotePeer, track, enabled: !mute });\n    };\n\n    if (mute) {\n      // if track is already in the same state as change state, do nothing\n      if (track.enabled === !mute) {\n        return;\n      }\n      /**\n       * Directly mute track when request arrives\n       */\n      track.setEnabled(!mute).then(sendNotification);\n    } else {\n      /**\n       * Notify UI to unmute for requesting consent\n       */\n      sendNotification();\n    }\n  }\n\n  private handleChangeTrackStateRequest(request: ChangeTrackMuteStateNotification) {\n    const { type, source, value, requested_by } = request;\n    const peer = requested_by ? this.store.getPeerById(requested_by) : undefined;\n\n    // value true means the track has to be muted\n    const enabled = !value;\n    const tracksToBeUpdated = this.getTracksToBeUpdated({ type, source, enabled });\n    //Do nothing if all tracks are already in same state as the request\n    if (tracksToBeUpdated.length === 0) {\n      return;\n    }\n    // if track is to be muted, mute and send the notification, otherwise send notification\n    if (!enabled) {\n      const promises: Promise<void>[] = [];\n\n      for (const track of tracksToBeUpdated) {\n        promises.push(track.setEnabled(false));\n      }\n      Promise.all(promises).then(() => {\n        this.listener?.onChangeMultiTrackStateRequest({\n          requestedBy: peer as HMSRemotePeer,\n          tracks: tracksToBeUpdated,\n          enabled: false,\n        });\n      });\n    } else {\n      this.listener?.onChangeMultiTrackStateRequest({\n        requestedBy: peer as HMSRemotePeer,\n        tracks: tracksToBeUpdated,\n        type,\n        source,\n        enabled: true,\n      });\n    }\n  }\n\n  /**\n   * Filter the local tracks based on type, source and enabled state\n   * @returns {HMSLocalTrack[]}\n   */\n  private getTracksToBeUpdated({\n    type,\n    source,\n    enabled,\n  }: {\n    type?: 'audio' | 'video';\n    source?: HMSTrackSource;\n    enabled: boolean;\n  }) {\n    const localPeerTracks = this.store.getLocalPeerTracks();\n    let tracks: HMSLocalTrack[] = localPeerTracks;\n    if (type) {\n      tracks = tracks.filter(track => track.type === type);\n    }\n    if (source) {\n      tracks = tracks.filter(track => track.source === source);\n    }\n    // filter out tracks which are already in the desired state\n    return tracks.filter(track => track.enabled !== enabled);\n  }\n}\n","import { HMSAction } from '../../error/HMSAction';\nimport { HMSException } from '../../error/HMSException';\nimport {\n  HLSVariant,\n  HMSBrowserRecording,\n  HMSHLS,\n  HMSHLSRecording,\n  HMSRoomUpdate,\n  HMSSFURecording,\n  HMSTranscriptionInfo,\n  HMSUpdateListener,\n} from '../../interfaces';\nimport { ServerError } from '../../interfaces/internal';\nimport { Store } from '../../sdk/store';\nimport { convertDateNumToDate } from '../../utils/date';\nimport HMSLogger from '../../utils/logger';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport {\n  HLSNotification,\n  HMSRecordingState,\n  HMSStreamingState,\n  PeerListNotification,\n  PeriodicRoomState,\n  RecordingNotification,\n  RecordingNotificationType,\n  RoomInfo,\n  RoomState,\n  RTMPNotification,\n  SessionInfo,\n  TranscriptionNotification,\n} from '../HMSNotifications';\n\nexport class RoomUpdateManager {\n  private readonly TAG = '[RoomUpdateManager]';\n\n  constructor(private store: Store, public listener?: HMSUpdateListener) {}\n\n  // eslint-disable-next-line complexity\n  handleNotification(method: HMSNotificationMethod, notification: any) {\n    switch (method) {\n      case HMSNotificationMethod.PEER_LIST:\n        this.onRoomState((notification as PeerListNotification).room);\n        break;\n      case HMSNotificationMethod.RTMP_UPDATE:\n        this.updateRTMPStatus(notification as RTMPNotification);\n        break;\n      case HMSNotificationMethod.RECORDING_UPDATE:\n        this.updateRecordingStatus(notification as RecordingNotification);\n        break;\n      case HMSNotificationMethod.ROOM_STATE:\n        this.handlePreviewRoomState(notification as PeriodicRoomState);\n        break;\n      case HMSNotificationMethod.ROOM_INFO:\n        this.handleRoomInfo(notification as RoomInfo);\n        break;\n      case HMSNotificationMethod.SESSION_INFO:\n        this.handleSessionInfo(notification as SessionInfo);\n        break;\n      case HMSNotificationMethod.HLS_UPDATE:\n        this.updateHLSStatus(notification as HLSNotification);\n        break;\n      case HMSNotificationMethod.TRANSCRIPTION_UPDATE:\n        this.handleTranscriptionStatus([notification as TranscriptionNotification]);\n        break;\n      default:\n        break;\n    }\n  }\n\n  private handleRoomInfo(notification: RoomInfo) {\n    const room = this.store.getRoom();\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on session info - room not present');\n      return;\n    }\n    room.description = notification.description;\n    room.large_room_optimization = notification.large_room_optimization;\n    room.max_size = notification.max_size;\n    room.name = notification.name;\n  }\n\n  private handleSessionInfo(notification: SessionInfo) {\n    const room = this.store.getRoom();\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on session info - room not present');\n      return;\n    }\n    room.sessionId = notification.session_id;\n    if (room.peerCount !== notification.peer_count) {\n      room.peerCount = notification.peer_count;\n      this.listener?.onRoomUpdate(HMSRoomUpdate.ROOM_PEER_COUNT_UPDATED, room);\n    }\n  }\n\n  private handlePreviewRoomState(notification: PeriodicRoomState) {\n    const { room } = notification;\n    this.onRoomState(room);\n  }\n\n  private onRoomState(roomNotification: RoomState) {\n    const { recording, streaming, transcriptions, session_id, started_at, name } = roomNotification;\n    const room = this.store.getRoom();\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on room state - room not present');\n      return;\n    }\n\n    room.name = name;\n\n    room.rtmp.running = this.isStreamingRunning(streaming?.rtmp?.state);\n    room.rtmp.startedAt = convertDateNumToDate(streaming?.rtmp?.started_at);\n    room.rtmp.state = streaming?.rtmp?.state;\n\n    room.recording.server = this.getPeerListSFURecording(recording);\n    room.recording.browser = this.getPeerListBrowserRecording(recording);\n    room.recording.hls = this.getPeerListHLSRecording(recording);\n\n    room.hls = this.convertHls(streaming?.hls);\n\n    room.transcriptions = this.addTranscriptionDetail(transcriptions);\n\n    room.sessionId = session_id;\n    room.startedAt = convertDateNumToDate(started_at);\n    this.listener?.onRoomUpdate(HMSRoomUpdate.RECORDING_STATE_UPDATED, room);\n  }\n\n  private addTranscriptionDetail(transcriptions?: TranscriptionNotification[]): HMSTranscriptionInfo[] {\n    if (!transcriptions) {\n      return [];\n    }\n    return transcriptions.map((transcription: TranscriptionNotification) => {\n      return {\n        state: transcription.state,\n        mode: transcription.mode,\n        initialised_at: convertDateNumToDate(transcription.initialised_at),\n        started_at: convertDateNumToDate(transcription.started_at),\n        stopped_at: convertDateNumToDate(transcription.stopped_at),\n        updated_at: convertDateNumToDate(transcription.updated_at),\n        error: this.toSdkError(transcription?.error),\n      };\n    });\n  }\n  private isRecordingRunning(state?: HMSRecordingState): boolean {\n    if (!state) {\n      return false;\n    }\n    return ![\n      HMSRecordingState.NONE,\n      HMSRecordingState.PAUSED,\n      HMSRecordingState.STOPPED,\n      HMSRecordingState.FAILED,\n    ].includes(state);\n  }\n\n  private isStreamingRunning(state?: HMSStreamingState): boolean {\n    if (!state) {\n      return false;\n    }\n    return ![HMSStreamingState.NONE, HMSStreamingState.STOPPED, HMSStreamingState.FAILED].includes(state);\n  }\n\n  private initHLS(notification?: HLSNotification): HMSHLS {\n    const room = this.store.getRoom();\n    const hls: HMSHLS = {\n      running: true,\n      variants: [],\n    };\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on hls - room not present');\n      return hls;\n    }\n    if (!notification?.variants) {\n      return hls;\n    }\n    notification.variants.forEach((variant: HLSVariant, index: number) => {\n      if (variant.state !== HMSStreamingState.INITIALISED) {\n        hls.variants.push({\n          meetingURL: variant?.meetingURL,\n          url: variant?.url,\n          metadata: variant?.metadata,\n          playlist_type: variant?.playlist_type,\n          startedAt: convertDateNumToDate(notification?.variants?.[index].started_at),\n          initialisedAt: convertDateNumToDate(notification?.variants?.[index].initialised_at),\n          state: variant.state,\n          stream_type: variant?.stream_type,\n        });\n      } else {\n        hls.variants.push({\n          initialisedAt: convertDateNumToDate(notification?.variants?.[index].initialised_at),\n          url: '',\n        });\n      }\n    });\n    return hls;\n  }\n  private updateHLSStatus(notification: HLSNotification) {\n    const room = this.store.getRoom();\n    const running =\n      notification.variants && notification.variants.length > 0\n        ? notification.variants.some(variant => this.isStreamingRunning(variant.state))\n        : false;\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on hls - room not present');\n      return;\n    }\n    notification.enabled = running;\n    room.hls = this.convertHls(notification);\n    this.listener?.onRoomUpdate(HMSRoomUpdate.HLS_STREAMING_STATE_UPDATED, room);\n  }\n\n  private handleTranscriptionStatus(notification: TranscriptionNotification[]) {\n    const room = this.store.getRoom();\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on transcription - room not present');\n      return;\n    }\n    room.transcriptions = this.addTranscriptionDetail(notification) || [];\n    this.listener?.onRoomUpdate(HMSRoomUpdate.TRANSCRIPTION_STATE_UPDATED, room);\n  }\n  private convertHls(hlsNotification?: HLSNotification) {\n    // only checking for zeroth variant intialized\n    const isInitialised =\n      hlsNotification?.variants && hlsNotification.variants.length > 0\n        ? hlsNotification.variants.some(variant => variant.state === HMSStreamingState.INITIALISED)\n        : false;\n    // handling for initialized state\n    if (isInitialised) {\n      return this.initHLS(hlsNotification);\n    }\n    const hls: HMSHLS = {\n      running: !!hlsNotification?.enabled,\n      variants: [],\n      error: this.toSdkError(hlsNotification?.error),\n    };\n    hlsNotification?.variants?.forEach(variant => {\n      hls.variants.push({\n        meetingURL: variant?.meeting_url,\n        url: variant?.url,\n        metadata: variant?.metadata,\n        playlist_type: variant?.playlist_type,\n        startedAt: convertDateNumToDate(variant?.started_at),\n        initialisedAt: convertDateNumToDate(variant?.initialised_at),\n        state: variant.state,\n        stream_type: variant?.stream_type,\n      });\n    });\n    return hls;\n  }\n\n  private getHLSRecording(hlsNotification?: RecordingNotification): HMSHLSRecording {\n    let hlsRecording: HMSHLSRecording = { running: false };\n    const running = this.isRecordingRunning(hlsNotification?.state);\n    if (running || hlsNotification?.state === HMSRecordingState.PAUSED) {\n      hlsRecording = {\n        running,\n        singleFilePerLayer: !!hlsNotification?.hls_recording?.single_file_per_layer,\n        hlsVod: !!hlsNotification?.hls_recording?.hls_vod,\n        startedAt: convertDateNumToDate(hlsNotification?.started_at),\n        initialisedAt: convertDateNumToDate(hlsNotification?.initialised_at),\n        state: hlsNotification?.state,\n        error: this.toSdkError(hlsNotification?.error),\n      };\n    }\n    return hlsRecording;\n  }\n\n  private getPeerListHLSRecording(recording?: RoomState['recording']): HMSHLSRecording {\n    const hlsNotification = recording?.hls;\n    const running = this.isRecordingRunning(hlsNotification?.state);\n    return {\n      running,\n      startedAt: convertDateNumToDate(hlsNotification?.started_at),\n      initialisedAt: convertDateNumToDate(hlsNotification?.initialised_at),\n      state: hlsNotification?.state,\n      singleFilePerLayer: hlsNotification?.config?.single_file_per_layer,\n      hlsVod: hlsNotification?.config?.hls_vod,\n    };\n  }\n  private getPeerListBrowserRecording(recording?: RoomState['recording']): HMSBrowserRecording {\n    const browserNotification = recording?.browser;\n    const running = this.isRecordingRunning(browserNotification?.state);\n    return {\n      running,\n      startedAt: convertDateNumToDate(browserNotification?.started_at),\n      state: browserNotification?.state,\n    };\n  }\n  private getPeerListSFURecording(recording?: RoomState['recording']): HMSSFURecording {\n    const sfuNotification = recording?.sfu;\n    const running = this.isRecordingRunning(sfuNotification?.state);\n    return {\n      running,\n      startedAt: convertDateNumToDate(sfuNotification?.started_at),\n      state: sfuNotification?.state,\n    };\n  }\n\n  private updateRecordingStatus(notification: RecordingNotification) {\n    const room = this.store.getRoom();\n    const running = this.isRecordingRunning(notification.state);\n    if (!room) {\n      HMSLogger.w(this.TAG, `set recording status running=${running} - room not present`);\n      return;\n    }\n\n    let action: HMSRoomUpdate;\n    if (notification.type === RecordingNotificationType.SFU) {\n      room.recording.server = {\n        running,\n        startedAt: running ? convertDateNumToDate(notification.started_at) : undefined,\n        error: this.toSdkError(notification.error),\n        state: notification.state,\n      };\n      action = HMSRoomUpdate.SERVER_RECORDING_STATE_UPDATED;\n    } else if (notification.type === RecordingNotificationType.HLS) {\n      room.recording.hls = this.getHLSRecording(notification);\n      action = HMSRoomUpdate.RECORDING_STATE_UPDATED;\n    } else {\n      room.recording.browser = {\n        running,\n        startedAt: running ? convertDateNumToDate(notification.started_at) : undefined,\n        error: this.toSdkError(notification.error),\n        state: notification?.state,\n      };\n      action = HMSRoomUpdate.BROWSER_RECORDING_STATE_UPDATED;\n    }\n    this.listener?.onRoomUpdate(action, room);\n  }\n\n  private updateRTMPStatus(notification: RTMPNotification) {\n    const room = this.store.getRoom();\n    const running = this.isStreamingRunning(notification.state);\n    if (!room) {\n      HMSLogger.w(this.TAG, 'on policy change - room not present');\n      return;\n    }\n    if (!running) {\n      room.rtmp = {\n        running,\n        state: notification.state,\n        error: this.toSdkError(notification.error),\n      };\n      this.listener?.onRoomUpdate(HMSRoomUpdate.RTMP_STREAMING_STATE_UPDATED, room);\n      return;\n    }\n    room.rtmp = {\n      running,\n      startedAt: running ? convertDateNumToDate(notification.started_at) : undefined,\n      state: notification.state,\n      error: this.toSdkError(notification.error),\n    };\n    this.listener?.onRoomUpdate(HMSRoomUpdate.RTMP_STREAMING_STATE_UPDATED, room);\n  }\n\n  private toSdkError(error?: ServerError): HMSException | undefined {\n    if (!error?.code) {\n      return undefined;\n    }\n    const errMsg = error.message || 'error in streaming/recording';\n    const sdkError = new HMSException(error.code, 'ServerErrors', HMSAction.NONE, errMsg, errMsg);\n    HMSLogger.e(this.TAG, 'error in streaming/recording', sdkError);\n    return sdkError;\n  }\n}\n","import { HMSUpdateListener, SessionStoreUpdate } from '../../interfaces';\nimport { Store } from '../../sdk/store';\nimport { convertDateNumToDate } from '../../utils/date';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport { MetadataChangeNotification } from '../HMSNotifications';\n\nexport class SessionMetadataManager {\n  constructor(private store: Store, public listener?: HMSUpdateListener) {}\n\n  handleNotification(method: string, notification: any) {\n    if (method !== HMSNotificationMethod.METADATA_CHANGE) {\n      return;\n    }\n    this.handleMetadataChange(notification);\n  }\n\n  private handleMetadataChange(notification: MetadataChangeNotification) {\n    const updates: SessionStoreUpdate[] = notification.values.map(update => ({\n      key: update.key,\n      value: update.data,\n      updatedAt: convertDateNumToDate(update.updated_at),\n      updatedBy: update.updated_by ? this.store.getPeerById(update.updated_by) : undefined,\n    }));\n    this.listener?.onSessionStoreUpdate(updates);\n  }\n}\n","import { HMSUpdateListener, HMSWhiteboard } from '../../interfaces';\nimport { Store } from '../../sdk/store';\nimport HMSTransport from '../../transport';\nimport { constructWhiteboardURL } from '../../utils/whiteboard';\nimport { HMSNotificationMethod } from '../HMSNotificationMethod';\nimport { WhiteboardInfo } from '../HMSNotifications';\n\nexport class WhiteboardManager {\n  constructor(private store: Store, private transport: HMSTransport, public listener?: HMSUpdateListener) {}\n\n  handleNotification(method: string, notification: any) {\n    switch (method) {\n      case HMSNotificationMethod.WHITEBOARD_UPDATE: {\n        this.handleWhiteboardUpdate(notification as WhiteboardInfo);\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  private async handleWhiteboardUpdate(notification: WhiteboardInfo) {\n    const localPeer = this.store.getLocalPeer();\n    const prev = this.store.getWhiteboard(notification.id);\n    const isOwner = notification.owner === localPeer?.peerId || notification.owner === localPeer?.customerUserId;\n    const open = notification.state === 'open';\n    const whiteboard: HMSWhiteboard = {\n      id: notification.id,\n      title: notification.title,\n      attributes: notification.attributes,\n    };\n    whiteboard.open = isOwner ? prev?.open : open;\n    whiteboard.owner = whiteboard.open ? notification.owner : undefined;\n\n    if (whiteboard.open) {\n      if (isOwner) {\n        whiteboard.url = prev?.url;\n        whiteboard.token = prev?.token;\n        whiteboard.addr = prev?.addr;\n        whiteboard.permissions = prev?.permissions;\n      } else {\n        const response = await this.transport.signal.getWhiteboard({ id: notification.id });\n        whiteboard.url = constructWhiteboardURL(response.token, response.addr, this.store.getEnv());\n        whiteboard.token = response.token;\n        whiteboard.addr = response.addr;\n        whiteboard.permissions = response.permissions;\n        whiteboard.open = response.permissions.length > 0;\n      }\n    }\n\n    this.store.setWhiteboard(whiteboard);\n    this.listener?.onWhiteboardUpdate(whiteboard);\n  }\n}\n","import { ActiveSpeakerManager } from './managers/ActiveSpeakerManager';\nimport { BroadcastManager } from './managers/BroadcastManager';\nimport { ConnectionQualityManager } from './managers/ConnectionQualityManager';\nimport { OnDemandTrackManager } from './managers/onDemandTrackManager';\nimport { PeerListManager } from './managers/PeerListManager';\nimport { PeerManager } from './managers/PeerManager';\nimport { PolicyChangeManager } from './managers/PolicyChangeManager';\nimport { PollsManager } from './managers/PollsManager';\nimport { RequestManager } from './managers/RequestManager';\nimport { RoomUpdateManager } from './managers/RoomUpdateManager';\nimport { SessionMetadataManager } from './managers/SessionMetadataManager';\nimport { TrackManager } from './managers/TrackManager';\nimport { WhiteboardManager } from './managers/WhiteboardManager';\nimport { HMSNotificationMethod } from './HMSNotificationMethod';\nimport {\n  ConnectionQualityList,\n  NodeInfo,\n  OnTrackLayerUpdateNotification,\n  PolicyParams,\n  SpeakerList,\n  TrackStateNotification,\n} from './HMSNotifications';\nimport { EventBus } from '../events/EventBus';\nimport { HMSAudioListener, HMSConnectionQualityListener, HMSUpdateListener } from '../interfaces';\nimport { HMSRemoteTrack } from '../media/tracks';\nimport { Store } from '../sdk/store';\nimport { InitFlags } from '../signal/init/models';\nimport HMSTransport from '../transport';\nimport HMSLogger from '../utils/logger';\n\nexport class NotificationManager {\n  private readonly TAG = '[HMSNotificationManager]';\n  private trackManager: TrackManager;\n  private peerManager: PeerManager;\n  private peerListManager: PeerListManager;\n  private activeSpeakerManager: ActiveSpeakerManager;\n  private connectionQualityManager: ConnectionQualityManager;\n  private broadcastManager: BroadcastManager;\n  private policyChangeManager: PolicyChangeManager;\n  private requestManager: RequestManager;\n  private roomUpdateManager: RoomUpdateManager;\n  private sessionMetadataManager: SessionMetadataManager;\n  private pollsManager: PollsManager;\n  private whiteboardManager: WhiteboardManager;\n  /**\n   * room state can be sent before join in preview stage as well but that is outdated, based on\n   * eventual consistency and doesn't have all data. If we get at least one consistent room update\n   * from that point onwards we can rely on live server updates and ignore periodic room state messages\n   */\n  private hasConsistentRoomStateArrived = false;\n\n  constructor(\n    private store: Store,\n    eventBus: EventBus,\n    private transport: HMSTransport,\n    private listener?: HMSUpdateListener,\n    private audioListener?: HMSAudioListener,\n    private connectionQualityListener?: HMSConnectionQualityListener,\n  ) {\n    const isOnDemandTracksEnabled = this.transport.isFlagEnabled(InitFlags.FLAG_ON_DEMAND_TRACKS);\n    this.trackManager = isOnDemandTracksEnabled\n      ? new OnDemandTrackManager(this.store, eventBus, this.transport, this.listener)\n      : new TrackManager(this.store, eventBus, this.listener);\n\n    this.peerManager = new PeerManager(this.store, this.trackManager, this.listener);\n    this.peerListManager = new PeerListManager(this.store, this.peerManager, this.trackManager, this.listener);\n    this.broadcastManager = new BroadcastManager(this.listener);\n    this.policyChangeManager = new PolicyChangeManager(this.store, eventBus);\n    this.requestManager = new RequestManager(this.store, this.listener);\n    this.activeSpeakerManager = new ActiveSpeakerManager(this.store, this.listener, this.audioListener);\n    this.connectionQualityManager = new ConnectionQualityManager(this.store, this.connectionQualityListener);\n    this.roomUpdateManager = new RoomUpdateManager(this.store, this.listener);\n    this.sessionMetadataManager = new SessionMetadataManager(this.store, this.listener);\n    this.pollsManager = new PollsManager(this.store, this.transport, this.listener);\n    this.whiteboardManager = new WhiteboardManager(this.store, this.transport, this.listener);\n  }\n\n  setListener(listener?: HMSUpdateListener) {\n    this.listener = listener;\n    this.trackManager.listener = listener;\n    this.peerManager.listener = listener;\n    this.peerListManager.listener = listener;\n    this.broadcastManager.listener = listener;\n    this.requestManager.listener = listener;\n    this.activeSpeakerManager.listener = listener;\n    this.roomUpdateManager.listener = listener;\n    this.sessionMetadataManager.listener = listener;\n    this.pollsManager.listener = listener;\n    this.whiteboardManager.listener = listener;\n  }\n\n  setAudioListener(audioListener?: HMSAudioListener) {\n    this.audioListener = audioListener;\n    this.activeSpeakerManager.audioListener = audioListener;\n  }\n\n  setConnectionQualityListener(qualityListener?: HMSConnectionQualityListener) {\n    this.connectionQualityListener = qualityListener;\n    this.connectionQualityManager.listener = qualityListener;\n  }\n\n  handleNotification(message: { method: string; params: any }, isReconnecting = false) {\n    const method = message.method as HMSNotificationMethod;\n    const notification = message.params;\n\n    if (\n      ![\n        HMSNotificationMethod.ACTIVE_SPEAKERS,\n        HMSNotificationMethod.SFU_STATS,\n        HMSNotificationMethod.CONNECTION_QUALITY,\n        undefined, // this is is to ignore notifications without any method\n      ].includes(method)\n    ) {\n      HMSLogger.d(this.TAG, `Received notification - ${method}`, { notification });\n    }\n    if (method === HMSNotificationMethod.SFU_STATS) {\n      if (window.HMS?.ON_SFU_STATS && typeof window.HMS?.ON_SFU_STATS === 'function') {\n        window.HMS.ON_SFU_STATS(message.params);\n      }\n    }\n\n    if (this.ignoreNotification(method)) {\n      return;\n    }\n\n    this.roomUpdateManager.handleNotification(method, notification);\n    this.peerManager.handleNotification(method, notification);\n    this.requestManager.handleNotification(method, notification);\n    this.peerListManager.handleNotification(method, notification, isReconnecting);\n    this.broadcastManager.handleNotification(method, notification);\n    this.sessionMetadataManager.handleNotification(method, notification);\n    this.pollsManager.handleNotification(method, notification);\n    this.whiteboardManager.handleNotification(method, notification);\n    this.handleIsolatedMethods(method, notification);\n  }\n\n  // eslint-disable-next-line complexity\n  handleIsolatedMethods(method: string, notification: any) {\n    switch (method) {\n      case HMSNotificationMethod.TRACK_METADATA_ADD: {\n        this.trackManager.handleTrackMetadataAdd(notification as TrackStateNotification);\n        break;\n      }\n      case HMSNotificationMethod.TRACK_UPDATE: {\n        this.trackManager.handleTrackUpdate(notification as TrackStateNotification);\n        break;\n      }\n      case HMSNotificationMethod.TRACK_REMOVE: {\n        if (!notification.peer) {\n          HMSLogger.d(this.TAG, `Ignoring sfu notification - ${method}`, { notification });\n          return;\n        }\n        this.trackManager.handleTrackRemovedPermanently(notification as TrackStateNotification);\n        break;\n      }\n      case HMSNotificationMethod.ON_SFU_TRACK_LAYER_UPDATE: {\n        this.trackManager.handleTrackLayerUpdate(notification as OnTrackLayerUpdateNotification);\n        break;\n      }\n      case HMSNotificationMethod.ACTIVE_SPEAKERS:\n        this.activeSpeakerManager.handleActiveSpeakers(notification as SpeakerList);\n        break;\n\n      case HMSNotificationMethod.CONNECTION_QUALITY:\n        this.connectionQualityManager.handleQualityUpdate(notification as ConnectionQualityList);\n        break;\n\n      case HMSNotificationMethod.POLICY_CHANGE:\n        this.policyChangeManager.handlePolicyChange(notification as PolicyParams);\n        break;\n\n      case HMSNotificationMethod.NODE_INFO:\n        this.transport.setSFUNodeId((notification as NodeInfo).sfu_node_id);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  ignoreNotification = (method: string): boolean => {\n    if (method === HMSNotificationMethod.PEER_LIST) {\n      this.hasConsistentRoomStateArrived = true;\n    } else if (method === HMSNotificationMethod.ROOM_STATE) {\n      // ignore periodic inconsistent room state if consistent one has arrived at least once\n      return this.hasConsistentRoomStateArrived;\n    }\n    return false;\n  };\n\n  handleTrackAdd = (track: HMSRemoteTrack) => {\n    this.trackManager.handleTrackAdd(track);\n  };\n\n  handleTrackRemove = (track: HMSRemoteTrack) => {\n    this.trackManager.handleTrackRemove(track);\n  };\n\n  updateLocalPeer = ({ name, metadata }: { name?: string; metadata?: string }) => {\n    const peer = this.store.getLocalPeer();\n    this.peerManager.handlePeerInfoUpdate({ peer, name, data: metadata });\n  };\n}\n","import { HMSSessionStore } from '../interfaces';\nimport HMSTransport from '../transport';\nimport { convertDateNumToDate } from '../utils/date';\n\nexport class SessionStore implements HMSSessionStore {\n  private observedKeys: Set<string> = new Set();\n\n  constructor(private transport: HMSTransport) {}\n\n  async get(key: string) {\n    const { data, updated_at } = await this.transport.signal.getSessionMetadata(key);\n\n    return { value: data, updatedAt: convertDateNumToDate(updated_at) };\n  }\n\n  async set(key: string, data: any) {\n    const { data: value, updated_at } = await this.transport.signal.setSessionMetadata({ key, data });\n    const updatedAt = convertDateNumToDate(updated_at);\n    return { value, updatedAt };\n  }\n\n  async observe(keys: string[]) {\n    const prevObservedKeys = new Set(this.observedKeys);\n    keys.forEach(key => this.observedKeys.add(key));\n\n    if (this.observedKeys.size !== prevObservedKeys.size) {\n      try {\n        await this.transport.signal.listenMetadataChange(Array.from(this.observedKeys));\n      } catch (e) {\n        this.observedKeys = prevObservedKeys;\n        throw e;\n      }\n    }\n  }\n\n  async unobserve(keys: string[]) {\n    const prevObservedKeys = new Set(this.observedKeys);\n    this.observedKeys = new Set([...this.observedKeys].filter(key => !keys.includes(key)));\n\n    if (this.observedKeys.size !== prevObservedKeys.size) {\n      try {\n        await this.transport.signal.listenMetadataChange(Array.from(this.observedKeys));\n      } catch (e) {\n        this.observedKeys = prevObservedKeys;\n        throw e;\n      }\n    }\n  }\n}\n","import { HMSICEServer } from '../../interfaces';\n\nexport class JoinParameters {\n  constructor(\n    public authToken: string,\n    public peerId: string,\n    public peerName: string = '',\n    public data: string = '',\n    public endpoint: string = 'https://prod-init.100ms.live/init',\n    public autoSubscribeVideo: boolean = false,\n    public iceServers?: HMSICEServer[],\n  ) {}\n}\n","export enum TransportFailureCategory {\n  ConnectFailed,\n  SignalDisconnect,\n  JoinWSMessageFailed,\n  PublishIceConnectionFailed,\n  SubscribeIceConnectionFailed,\n}\n\nexport const Dependencies = {\n  [TransportFailureCategory.ConnectFailed]: [],\n  [TransportFailureCategory.SignalDisconnect]: [],\n  [TransportFailureCategory.JoinWSMessageFailed]: [TransportFailureCategory.SignalDisconnect],\n  [TransportFailureCategory.PublishIceConnectionFailed]: [TransportFailureCategory.SignalDisconnect],\n  [TransportFailureCategory.SubscribeIceConnectionFailed]: [TransportFailureCategory.SignalDisconnect],\n};\n","export enum TransportState {\n  Disconnected = 'Disconnected',\n  Connecting = 'Connecting',\n  Joined = 'Joined',\n  Preview = 'Preview',\n  Failed = 'Failed',\n  Reconnecting = 'Reconnecting',\n  Leaving = 'Leaving',\n}\n","export interface PromiseCallbacks<T, K = void> {\n  resolve: (value: T) => void;\n  reject: (reason?: any) => void;\n  metadata?: K;\n}\n\nexport class PromiseWithCallbacks<T> {\n  promise: Promise<T>;\n  resolve!: (value: T) => void;\n  reject!: (reason?: any) => void;\n\n  constructor(cb: (resolve: (value: T) => void, reject: (reason?: any) => void) => any) {\n    this.promise = new Promise<T>((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n      cb(resolve, reject);\n    });\n  }\n}\n","import { Dependencies as TFCDependencies, TransportFailureCategory as TFC } from './models/TransportFailureCategory';\nimport { TransportState } from './models/TransportState';\nimport { HMSException } from '../error/HMSException';\nimport { MAX_TRANSPORT_RETRY_TIME } from '../utils/constants';\nimport HMSLogger from '../utils/logger';\nimport { PromiseWithCallbacks } from '../utils/promise';\n\n/**\n * Task which is executed by [RetryScheduler.schedule] until max retry count\n * is reached.\n *\n * Any exception raised while executing the task assumes that task is failed.\n * Failed tasks are retried if max retry count is not reached.\n *\n * @returns True if the task if successful, otherwise False\n *\n *\n */\ntype RetryTask = () => Promise<boolean>;\n\ninterface ScheduleTaskParams {\n  category: TFC;\n  error: HMSException;\n  task: RetryTask;\n  originalState: TransportState;\n  maxRetryTime?: number;\n  changeState?: boolean;\n}\n\nexport class RetryScheduler {\n  private readonly TAG = '[RetryScheduler]';\n  private inProgress = new Map<TFC, PromiseWithCallbacks<number>>();\n  private retryTaskIds: number[] = [];\n\n  constructor(\n    private onStateChange: (state: TransportState, error?: HMSException) => Promise<void>,\n    private sendEvent: (error: HMSException, category: TFC) => void,\n  ) {}\n\n  async schedule({\n    category,\n    error,\n    task,\n    originalState,\n    maxRetryTime = MAX_TRANSPORT_RETRY_TIME,\n    changeState = true,\n  }: ScheduleTaskParams) {\n    await this.scheduleTask({ category, error, changeState, task, originalState, maxRetryTime, failedAt: Date.now() });\n  }\n\n  reset() {\n    this.retryTaskIds.forEach(future => clearTimeout(future));\n    this.retryTaskIds = [];\n    this.inProgress.clear();\n  }\n\n  isTaskInProgress(category: TFC) {\n    return !!this.inProgress.get(category);\n  }\n\n  // eslint-disable-next-line complexity\n  private async scheduleTask({\n    category,\n    error,\n    changeState,\n    task,\n    originalState,\n    failedAt,\n    maxRetryTime = MAX_TRANSPORT_RETRY_TIME,\n    failedRetryCount = 0,\n  }: ScheduleTaskParams & { failedAt: number; failedRetryCount?: number }): Promise<void> {\n    HMSLogger.d(this.TAG, 'schedule: ', { category: TFC[category], error });\n\n    // First schedule call\n    if (failedRetryCount === 0) {\n      const inProgressTask = this.inProgress.get(category);\n      if (inProgressTask) {\n        HMSLogger.d(this.TAG, `schedule: Already a task for ${TFC[category]} scheduled, waiting for its completion`);\n        await inProgressTask.promise;\n        return;\n      }\n\n      const taskPromise = new PromiseWithCallbacks<number>((_, __) => {});\n      this.inProgress.set(category, taskPromise);\n\n      this.sendEvent(error, category);\n    }\n\n    let hasFailedDependency = false;\n    const dependencies = TFCDependencies[category];\n\n    for (const dependencyIndexString in dependencies) {\n      const dependency = dependencies[parseInt(dependencyIndexString)];\n      try {\n        const dependencyTask = this.inProgress.get(dependency);\n        if (dependencyTask) {\n          HMSLogger.d(\n            this.TAG,\n            `schedule: Suspending retry task of ${TFC[category]}, waiting for ${TFC[dependency]} to recover`,\n          );\n          await dependencyTask.promise;\n          HMSLogger.d(\n            this.TAG,\n            `schedule: Resuming retry task ${TFC[category]} as it's dependency ${TFC[dependency]} is recovered`,\n          );\n        }\n      } catch (ex) {\n        HMSLogger.d(\n          this.TAG,\n          `schedule: Stopping retry task of ${TFC[category]} as it's dependency ${TFC[dependency]} failed to recover`,\n        );\n        hasFailedDependency = true;\n        break;\n      }\n    }\n\n    const handleTerminalError = (error: HMSException) => {\n      // @NOTE: Don't reject to throw error for dependencies, use onStateChange\n      // const taskPromise = this.inProgress.get(category);\n      this.inProgress.delete(category);\n      // taskPromise?.reject(error);\n      this.sendEvent(error, category);\n\n      this.reset();\n\n      if (changeState) {\n        this.onStateChange(TransportState.Failed, error);\n      } else {\n        throw error;\n      }\n\n      return;\n    };\n\n    const timeElapsedSinceError = Date.now() - failedAt;\n    if (timeElapsedSinceError >= maxRetryTime || hasFailedDependency) {\n      error.description += `. [${TFC[category]}] Could not recover after ${timeElapsedSinceError} milliseconds`;\n\n      if (hasFailedDependency) {\n        error.description += ` Could not recover all of it's required dependencies - [${(dependencies as Array<TFC>)\n          .map(dep => TFC[dep])\n          .toString()}]`;\n      }\n      error.isTerminal = true;\n      return handleTerminalError(error);\n    }\n\n    if (changeState) {\n      this.onStateChange(TransportState.Reconnecting, error);\n    }\n\n    const delay = this.getDelayForRetryCount(category);\n\n    HMSLogger.d(\n      this.TAG,\n      `schedule: [${TFC[category]}] [failedRetryCount=${failedRetryCount}] Scheduling retry task in ${delay}ms`,\n    );\n\n    let taskSucceeded: boolean;\n    try {\n      taskSucceeded = await this.setTimeoutPromise(task, delay);\n    } catch (ex) {\n      taskSucceeded = false;\n      const error = ex as HMSException;\n\n      if (error.isTerminal) {\n        HMSLogger.e(this.TAG, `[${TFC[category]}] Un-caught terminal exception ${error.name} in retry-task`, ex);\n        return handleTerminalError(error);\n      } else {\n        HMSLogger.w(\n          this.TAG,\n          `[${TFC[category]}] Un-caught exception ${error.name} in retry-task, initiating retry`,\n          ex,\n        );\n      }\n    }\n\n    if (taskSucceeded) {\n      const taskPromise = this.inProgress.get(category);\n      this.inProgress.delete(category);\n      taskPromise?.resolve(failedRetryCount);\n\n      if (changeState && this.inProgress.size === 0) {\n        this.onStateChange(originalState);\n      }\n      HMSLogger.d(\n        this.TAG,\n        `schedule: [${TFC[category]}] [failedRetryCount=${failedRetryCount}] Recovered ♻️ after ${timeElapsedSinceError}ms`,\n      );\n    } else {\n      await this.scheduleTask({\n        category,\n        error,\n        changeState,\n        task,\n        originalState,\n        maxRetryTime,\n        failedAt,\n        failedRetryCount: failedRetryCount + 1,\n      });\n    }\n  }\n\n  private getDelayForRetryCount(category: TFC) {\n    const jitter = category === TFC.JoinWSMessageFailed ? Math.random() * 2 : Math.random();\n    let delaySeconds = 0;\n    if (category === TFC.JoinWSMessageFailed) {\n      // linear backoff(2 + jitter for every retry)\n      delaySeconds = 2 + jitter;\n    } else if (category === TFC.SignalDisconnect) {\n      delaySeconds = 1;\n    }\n    return delaySeconds * 1000;\n  }\n\n  private async setTimeoutPromise<T>(task: () => Promise<T>, delay: number): Promise<T> {\n    return new Promise((resolve, reject) => {\n      const timeoutId = window.setTimeout(async () => {\n        try {\n          const value: T = await task();\n          value && this.retryTaskIds.splice(this.retryTaskIds.indexOf(timeoutId), 1);\n          resolve(value);\n        } catch (error) {\n          reject(error);\n        }\n      }, delay);\n\n      this.retryTaskIds.push(timeoutId);\n    });\n  }\n}\n","import { ANALYTICS_BUFFER_SIZE } from '../../utils/constants';\nimport { LocalStorage } from '../../utils/local-storage';\nimport { Queue } from '../../utils/queue';\nimport AnalyticsEvent from '../AnalyticsEvent';\n\nexport class LocalStorageEvents extends Queue<AnalyticsEvent> {\n  private localStorage = new LocalStorage<AnalyticsEvent[]>('hms-analytics');\n\n  constructor() {\n    super(ANALYTICS_BUFFER_SIZE);\n    // @TODO: Currently we don't send failed events of old sessions. So reset localstorage for every session.\n    // Once support for failed events from old sessions is added, remove clear and init queue from localstorage.\n    this.localStorage.clear();\n    this.initLocalStorageQueue();\n  }\n\n  enqueue(event: AnalyticsEvent) {\n    super.enqueue(event);\n    this.localStorage.set(this.storage);\n  }\n\n  dequeue() {\n    const removedEvent = super.dequeue();\n    this.localStorage.set(this.storage);\n    return removedEvent;\n  }\n\n  private initLocalStorageQueue() {\n    this.localStorage.get()?.forEach(event => {\n      const eventInstance = new AnalyticsEvent(event);\n      super.enqueue(eventInstance);\n    });\n  }\n}\n","import AnalyticsEvent from './AnalyticsEvent';\nimport { HTTPAnalyticsTransport } from './HTTPAnalyticsTransport';\nimport { IAnalyticsTransportProvider } from './IAnalyticsTransportProvider';\nimport HMSLogger from '../utils/logger';\nimport { Queue } from '../utils/queue';\n\nexport abstract class AnalyticsTransport {\n  abstract transportProvider: IAnalyticsTransportProvider;\n  abstract failedEvents: Queue<AnalyticsEvent>;\n  private readonly TAG = '[AnalyticsTransport]';\n\n  private eventCount = 0;\n  private lastResetTime: number = Date.now();\n  private readonly MAX_EVENTS_PER_MINUTE: number = 200;\n  private readonly RESET_INTERVAL_MS: number = 60000;\n\n  private checkRateLimit() {\n    const now = Date.now();\n    if (now - this.lastResetTime >= this.RESET_INTERVAL_MS) {\n      this.eventCount = 0;\n      this.lastResetTime = now;\n    }\n    if (this.eventCount >= this.MAX_EVENTS_PER_MINUTE) {\n      throw new Error('Too many events being sent, please check the implementation.');\n    }\n    this.eventCount++;\n  }\n\n  sendEvent(event: AnalyticsEvent) {\n    try {\n      this.checkRateLimit();\n    } catch (e) {\n      HMSLogger.w(this.TAG, 'Rate limit exceeded', e);\n      throw e;\n    }\n    try {\n      this.sendSingleEvent(event);\n      this.flushFailedEvents();\n    } catch (error) {\n      HMSLogger.w(this.TAG, 'sendEvent failed', error);\n    }\n  }\n\n  flushFailedEvents(currentPeerId?: string) {\n    try {\n      HMSLogger.d(this.TAG, 'Flushing failed events', this.failedEvents);\n      while (this.failedEvents.size() > 0) {\n        const event = this.failedEvents.dequeue();\n        if (event) {\n          const isEventFromCurrentPeer = event.metadata?.peer.peer_id === currentPeerId;\n          if (isEventFromCurrentPeer || !event.metadata.peer.peer_id) {\n            this.sendSingleEvent(event);\n          } else {\n            HTTPAnalyticsTransport.sendEvent(event);\n          }\n        }\n      }\n    } catch (error) {\n      HMSLogger.w(this.TAG, 'flushFailedEvents failed', error);\n    }\n  }\n\n  private sendSingleEvent(event: AnalyticsEvent) {\n    try {\n      this.transportProvider.sendEvent(event);\n      HMSLogger.d(this.TAG, 'Sent event', event.name, event);\n    } catch (error) {\n      HMSLogger.w(this.TAG, `${this.transportProvider.TAG}.sendEvent failed, adding to local storage events`, {\n        event,\n        error,\n      });\n      this.failedEvents.enqueue(event);\n      throw error;\n    }\n  }\n}\n","import { LocalStorageEvents } from './LocalStoageEvents';\nimport JsonRpcSignal from '../../signal/jsonrpc';\nimport { AnalyticsTransport } from '../AnalyticsTransport';\n\nexport class SignalAnalyticsTransport extends AnalyticsTransport {\n  failedEvents = new LocalStorageEvents();\n\n  constructor(public transportProvider: JsonRpcSignal) {\n    super();\n  }\n}\n","import {\n  LocalAudioTrackAnalytics,\n  LocalBaseSample,\n  LocalVideoSample,\n  LocalVideoTrackAnalytics,\n  PublishAnalyticPayload,\n  RemoteAudioSample,\n  RemoteAudioTrackAnalytics,\n  RemoteVideoSample,\n  RemoteVideoTrackAnalytics,\n  SubscribeAnalyticPayload,\n} from './interfaces';\nimport { EventBus } from '../../events/EventBus';\nimport { HMSTrackStats } from '../../interfaces';\nimport { HMSTrack } from '../../internal';\nimport { HMSWebrtcStats } from '../../rtc-stats';\nimport { Store } from '../../sdk/store';\nimport HMSLogger from '../../utils/logger';\nimport { sleep } from '../../utils/timer-utils';\n\nexport abstract class BaseStatsAnalytics {\n  private shouldSendEvent = false;\n  protected sequenceNum = 1;\n  protected abstract trackAnalytics: Map<string, RunningTrackAnalytics>;\n\n  constructor(\n    protected store: Store,\n    protected eventBus: EventBus,\n    protected readonly sampleWindowSize: number,\n    protected readonly pushInterval: number,\n  ) {\n    this.start();\n  }\n\n  start() {\n    if (this.shouldSendEvent) {\n      return;\n    }\n    this.stop();\n    this.shouldSendEvent = true;\n    this.eventBus.statsUpdate.subscribe(this.handleStatsUpdate.bind(this));\n    this.startLoop().catch(e => HMSLogger.e('[StatsAnalytics]', e.message));\n  }\n\n  stop = () => {\n    if (this.shouldSendEvent) {\n      this.sendEvent();\n    }\n    this.eventBus.statsUpdate.unsubscribe(this.handleStatsUpdate.bind(this));\n    this.shouldSendEvent = false;\n  };\n\n  private async startLoop() {\n    while (this.shouldSendEvent) {\n      await sleep(this.pushInterval * 1000);\n      this.sendEvent();\n    }\n  }\n\n  protected sendEvent(): void {\n    this.trackAnalytics.forEach(trackAnalytic => {\n      trackAnalytic.clearSamples();\n    });\n  }\n\n  protected cleanTrackAnalyticsAndCreateSample(shouldCreateSample: boolean) {\n    // delete track analytics if track is not present in store and no samples are present\n    this.trackAnalytics.forEach(trackAnalytic => {\n      if (!this.store.hasTrack(trackAnalytic.track) && !(trackAnalytic.samples.length > 0)) {\n        this.trackAnalytics.delete(trackAnalytic.track_id);\n      }\n    });\n\n    if (shouldCreateSample) {\n      this.trackAnalytics.forEach(trackAnalytic => {\n        trackAnalytic.createSample();\n      });\n    }\n  }\n\n  protected abstract toAnalytics(): PublishAnalyticPayload | SubscribeAnalyticPayload;\n\n  protected abstract handleStatsUpdate(hmsStats: HMSWebrtcStats): void;\n}\n\nexport type TempStats = HMSTrackStats & {\n  availableOutgoingBitrate?: number;\n  calculatedJitterBufferDelay?: number;\n  avSync?: number;\n  expectedFrameHeight?: number;\n  expectedFrameWidth?: number;\n};\n\nexport abstract class RunningTrackAnalytics {\n  readonly sampleWindowSize: number;\n  track: HMSTrack;\n  track_id: string;\n  source: string;\n  ssrc: string;\n  kind: string;\n  rid?: string;\n\n  samples: (LocalBaseSample | LocalVideoSample | RemoteAudioSample | RemoteVideoSample)[] = [];\n  protected tempStats: TempStats[] = [];\n  protected prevLatestStat?: TempStats;\n\n  constructor({\n    track,\n    ssrc,\n    rid,\n    kind,\n    sampleWindowSize,\n  }: {\n    track: HMSTrack;\n    ssrc: string;\n    kind: string;\n    rid?: string;\n    sampleWindowSize: number;\n  }) {\n    this.track = track;\n    this.ssrc = ssrc;\n    this.rid = rid;\n    this.kind = kind;\n    this.track_id = this.track.trackId;\n    this.source = this.track.source!;\n    this.sampleWindowSize = sampleWindowSize;\n  }\n\n  pushTempStat(stat: TempStats) {\n    this.tempStats.push(stat);\n  }\n\n  createSample() {\n    if (this.tempStats.length === 0) {\n      return;\n    }\n\n    this.samples.push(this.collateSample());\n    this.prevLatestStat = this.getLatestStat();\n    this.tempStats.length = 0;\n  }\n\n  clearSamples() {\n    this.samples.length = 0;\n  }\n\n  abstract shouldCreateSample: () => boolean;\n\n  protected abstract collateSample: () => LocalBaseSample | LocalVideoSample | RemoteAudioSample | RemoteVideoSample;\n\n  protected abstract toAnalytics: () =>\n    | LocalAudioTrackAnalytics\n    | LocalVideoTrackAnalytics\n    | RemoteAudioTrackAnalytics\n    | RemoteVideoTrackAnalytics;\n\n  getLatestStat() {\n    return this.tempStats[this.tempStats.length - 1];\n  }\n\n  protected getFirstStat() {\n    return this.tempStats[0];\n  }\n\n  protected calculateSum(key: keyof TempStats) {\n    const checkStat = this.getLatestStat()[key];\n    if (typeof checkStat !== 'number') {\n      return;\n    }\n    return this.tempStats.reduce((partialSum, stat) => {\n      return partialSum + ((stat[key] || 0) as number);\n    }, 0);\n  }\n\n  protected calculateAverage(key: keyof TempStats, round = true) {\n    const sum = this.calculateSum(key);\n    const avg = sum !== undefined ? sum / this.tempStats.length : undefined;\n    return avg ? (round ? Math.round(avg) : avg) : undefined;\n  }\n\n  protected calculateDifferenceForSample(key: keyof TempStats) {\n    const firstValue = Number(this.prevLatestStat?.[key]) || 0;\n    const latestValue = Number(this.getLatestStat()[key]) || 0;\n\n    return latestValue - firstValue;\n  }\n\n  protected calculateDifferenceAverage(key: keyof TempStats, round = true) {\n    const avg = this.calculateDifferenceForSample(key) / this.tempStats.length;\n    return round ? Math.round(avg) : avg;\n  }\n\n  protected calculateInstancesOfHigh(key: keyof TempStats, threshold: number) {\n    const checkStat = this.getLatestStat()[key];\n    if (typeof checkStat !== 'number') {\n      return;\n    }\n\n    return this.tempStats.reduce((partialSum, stat) => {\n      return partialSum + (((stat[key] || 0) as number) > threshold ? 1 : 0);\n    }, 0);\n  }\n}\n\nexport const hasResolutionChanged = (newStat: TempStats, prevStat: TempStats) =>\n  newStat && prevStat && (newStat.frameWidth !== prevStat.frameWidth || newStat.frameHeight !== prevStat.frameHeight);\n\nexport const hasEnabledStateChanged = (newStat: TempStats, prevStat: TempStats) =>\n  newStat && prevStat && newStat.enabled !== prevStat.enabled;\n\nexport const removeUndefinedFromObject = <T extends Record<string, any>>(data: T) => {\n  return Object.entries(data)\n    .filter(([, value]) => value !== undefined)\n    .reduce((obj, [key, value]) => {\n      obj[key as keyof T] = value;\n      return obj;\n    }, {} as T);\n};\n","import {\n  BaseStatsAnalytics,\n  hasEnabledStateChanged,\n  hasResolutionChanged,\n  removeUndefinedFromObject,\n  RunningTrackAnalytics,\n} from './BaseStatsAnalytics';\nimport {\n  LocalAudioTrackAnalytics,\n  LocalBaseSample,\n  LocalVideoSample,\n  LocalVideoTrackAnalytics,\n  PublishAnalyticPayload,\n} from './interfaces';\nimport { HMSTrackStats } from '../../interfaces';\nimport { HMSWebrtcStats } from '../../rtc-stats';\nimport { PUBLISH_STATS_SAMPLE_WINDOW } from '../../utils/constants';\nimport AnalyticsEventFactory from '../AnalyticsEventFactory';\n\nexport class PublishStatsAnalytics extends BaseStatsAnalytics {\n  protected trackAnalytics: Map<string, RunningLocalTrackAnalytics> = new Map();\n\n  protected toAnalytics(): PublishAnalyticPayload {\n    const audio: LocalAudioTrackAnalytics[] = [];\n    const video: LocalVideoTrackAnalytics[] = [];\n    this.trackAnalytics.forEach(trackAnalytic => {\n      if (trackAnalytic.track.type === 'audio') {\n        audio.push(trackAnalytic.toAnalytics());\n      } else if (trackAnalytic.track.type === 'video') {\n        video.push(trackAnalytic.toAnalytics());\n      }\n    });\n    return {\n      audio,\n      video,\n      joined_at: this.store.getRoom()?.joinedAt?.getTime()!,\n      sequence_num: this.sequenceNum++,\n      max_window_sec: PUBLISH_STATS_SAMPLE_WINDOW,\n    };\n  }\n\n  protected sendEvent() {\n    this.eventBus.analytics.publish(AnalyticsEventFactory.publishStats(this.toAnalytics()));\n    super.sendEvent();\n  }\n\n  protected handleStatsUpdate(hmsStats: HMSWebrtcStats) {\n    let shouldCreateSample = false;\n\n    const localTracksStats = hmsStats.getLocalTrackStats();\n    Object.keys(localTracksStats).forEach(trackIDBeingSent => {\n      const trackStats = localTracksStats[trackIDBeingSent];\n      const track = this.store.getLocalPeerTracks().find(track => track.getTrackIDBeingSent() === trackIDBeingSent);\n      Object.keys(trackStats).forEach(statId => {\n        const layerStats = trackStats[statId];\n        if (!track) {\n          return;\n        }\n        const identifier = this.getTrackIdentifier(track.trackId, layerStats);\n        const newTempStats = {\n          ...layerStats,\n          availableOutgoingBitrate: hmsStats.getLocalPeerStats()?.publish?.availableOutgoingBitrate,\n        };\n        if (identifier && this.trackAnalytics.has(identifier)) {\n          this.trackAnalytics.get(identifier)?.pushTempStat(newTempStats);\n        } else {\n          if (track) {\n            const trackAnalytics = new RunningLocalTrackAnalytics({\n              track,\n              sampleWindowSize: this.sampleWindowSize,\n              rid: layerStats.rid,\n              ssrc: layerStats.ssrc.toString(),\n              kind: layerStats.kind,\n            });\n            trackAnalytics.pushTempStat(newTempStats);\n            this.trackAnalytics.set(this.getTrackIdentifier(track.trackId, layerStats), trackAnalytics);\n          }\n        }\n\n        const trackAnalytics = this.trackAnalytics.get(identifier);\n        if (trackAnalytics?.shouldCreateSample()) {\n          shouldCreateSample = true;\n        }\n      });\n    });\n\n    this.cleanTrackAnalyticsAndCreateSample(shouldCreateSample);\n  }\n\n  private getTrackIdentifier(trackId: string, stats: HMSTrackStats) {\n    return stats.rid ? `${trackId}:${stats.rid}` : trackId;\n  }\n}\n\nclass RunningLocalTrackAnalytics extends RunningTrackAnalytics {\n  samples: (LocalBaseSample | LocalVideoSample)[] = [];\n\n  protected collateSample = (): LocalBaseSample | LocalVideoSample => {\n    const latestStat = this.getLatestStat();\n\n    const qualityLimitationDurations = latestStat.qualityLimitationDurations;\n    const total_quality_limitation = qualityLimitationDurations && {\n      bandwidth_sec: qualityLimitationDurations.bandwidth,\n      cpu_sec: qualityLimitationDurations.cpu,\n      other_sec: qualityLimitationDurations.other,\n    };\n\n    const resolution = latestStat.frameHeight\n      ? {\n          height_px: this.getLatestStat().frameHeight,\n          width_px: this.getLatestStat().frameWidth,\n        }\n      : undefined;\n    const avg_jitter = this.calculateAverage('jitter', false);\n    const avg_jitter_ms = avg_jitter ? Math.round(avg_jitter * 1000) : undefined;\n\n    const avg_round_trip_time = this.calculateAverage('roundTripTime', false);\n    const avg_round_trip_time_ms = avg_round_trip_time ? Math.round(avg_round_trip_time * 1000) : undefined;\n\n    return removeUndefinedFromObject({\n      timestamp: Date.now(),\n      avg_available_outgoing_bitrate_bps: this.calculateAverage('availableOutgoingBitrate'),\n      avg_bitrate_bps: this.calculateAverage('bitrate'),\n      avg_fps: this.calculateAverage('framesPerSecond'),\n      total_packets_lost: this.getLatestStat().packetsLost,\n      total_packets_sent: this.getLatestStat().packetsSent,\n      total_packet_sent_delay_sec: parseFloat(this.calculateDifferenceForSample('totalPacketSendDelay').toFixed(4)),\n      total_fir_count: this.calculateDifferenceForSample('firCount'),\n      total_pli_count: this.calculateDifferenceForSample('pliCount'),\n      total_nack_count: this.calculateDifferenceForSample('nackCount'),\n      avg_jitter_ms,\n      avg_round_trip_time_ms,\n      total_quality_limitation,\n      resolution,\n    });\n  };\n\n  shouldCreateSample = () => {\n    const length = this.tempStats.length;\n    const newStat = this.tempStats[length - 1];\n    const prevStat = this.tempStats[length - 2];\n\n    return (\n      length === PUBLISH_STATS_SAMPLE_WINDOW ||\n      hasEnabledStateChanged(newStat, prevStat) ||\n      (newStat.kind === 'video' && hasResolutionChanged(newStat, prevStat))\n    );\n  };\n\n  toAnalytics = (): LocalAudioTrackAnalytics | LocalVideoTrackAnalytics => {\n    return {\n      track_id: this.track_id,\n      ssrc: this.ssrc,\n      source: this.source,\n      rid: this.rid,\n      samples: this.samples,\n    };\n  };\n}\n","import {\n  BaseStatsAnalytics,\n  hasEnabledStateChanged,\n  hasResolutionChanged,\n  removeUndefinedFromObject,\n  RunningTrackAnalytics,\n  TempStats,\n} from './BaseStatsAnalytics';\nimport {\n  RemoteAudioSample,\n  RemoteAudioTrackAnalytics,\n  RemoteVideoSample,\n  RemoteVideoTrackAnalytics,\n  SubscribeAnalyticPayload,\n} from './interfaces';\nimport { HMSTrackStats } from '../../interfaces';\nimport { HMSRemoteVideoTrack } from '../../internal';\nimport { HMSWebrtcStats } from '../../rtc-stats';\nimport { MAX_SAFE_INTEGER, SUBSCRIBE_STATS_SAMPLE_WINDOW } from '../../utils/constants';\nimport AnalyticsEventFactory from '../AnalyticsEventFactory';\n\nexport class SubscribeStatsAnalytics extends BaseStatsAnalytics {\n  protected trackAnalytics: Map<string, RunningRemoteTrackAnalytics> = new Map();\n\n  protected toAnalytics(): SubscribeAnalyticPayload {\n    const audio: RemoteAudioTrackAnalytics[] = [];\n    const video: RemoteVideoTrackAnalytics[] = [];\n    this.trackAnalytics.forEach(trackAnalytic => {\n      if (trackAnalytic.track.type === 'audio') {\n        audio.push(trackAnalytic.toAnalytics());\n      } else if (trackAnalytic.track.type === 'video') {\n        video.push(trackAnalytic.toAnalytics());\n      }\n    });\n    return {\n      audio,\n      video,\n      joined_at: this.store.getRoom()?.joinedAt?.getTime()!,\n      sequence_num: this.sequenceNum++,\n      max_window_sec: SUBSCRIBE_STATS_SAMPLE_WINDOW,\n    };\n  }\n\n  protected sendEvent() {\n    this.eventBus.analytics.publish(AnalyticsEventFactory.subscribeStats(this.toAnalytics()));\n    super.sendEvent();\n  }\n\n  protected handleStatsUpdate(hmsStats: HMSWebrtcStats) {\n    const remoteTracksStats = hmsStats.getAllRemoteTracksStats();\n    let shouldCreateSample = false;\n    Object.keys(remoteTracksStats).forEach(trackID => {\n      const track = this.store.getTrackById(trackID);\n      const trackStats = remoteTracksStats[trackID];\n      const prevTrackStats = this.trackAnalytics.get(trackID)?.getLatestStat();\n\n      // eslint-disable-next-line complexity\n      const getCalculatedJitterBufferDelay = (trackStats: HMSTrackStats, prevTrackStats?: TempStats) => {\n        const prevJBDelay = prevTrackStats?.jitterBufferDelay || 0;\n        const prevJBEmittedCount = prevTrackStats?.jitterBufferEmittedCount || 0;\n        const currentJBDelay = (trackStats?.jitterBufferDelay || 0) - prevJBDelay;\n        const currentJBEmittedCount = (trackStats?.jitterBufferEmittedCount || 0) - prevJBEmittedCount;\n\n        return currentJBEmittedCount > 0\n          ? (currentJBDelay * 1000) / currentJBEmittedCount\n          : prevTrackStats?.calculatedJitterBufferDelay || 0;\n      };\n\n      const calculatedJitterBufferDelay = getCalculatedJitterBufferDelay(trackStats, prevTrackStats);\n\n      const avSync = this.calculateAvSyncForStat(trackStats, hmsStats);\n      const newTempStat: TempStats = { ...trackStats, calculatedJitterBufferDelay, avSync };\n      if (trackStats.kind === 'video') {\n        const definition = (track as HMSRemoteVideoTrack).getPreferredLayerDefinition();\n        newTempStat.expectedFrameHeight = definition?.resolution.height;\n        newTempStat.expectedFrameWidth = definition?.resolution.width;\n      }\n      if (this.trackAnalytics.has(trackID)) {\n        this.trackAnalytics.get(trackID)?.pushTempStat(newTempStat);\n      } else {\n        if (track) {\n          const trackAnalytics = new RunningRemoteTrackAnalytics({\n            track,\n            sampleWindowSize: this.sampleWindowSize,\n            ssrc: trackStats.ssrc.toString(),\n            kind: trackStats.kind,\n          });\n          trackAnalytics.pushTempStat(newTempStat);\n          this.trackAnalytics.set(trackID, trackAnalytics);\n        }\n      }\n      const trackAnalytics = this.trackAnalytics.get(trackID);\n      if (trackAnalytics?.shouldCreateSample()) {\n        shouldCreateSample = true;\n      }\n    });\n\n    this.cleanTrackAnalyticsAndCreateSample(shouldCreateSample);\n  }\n\n  // eslint-disable-next-line complexity\n  private calculateAvSyncForStat(trackStats: HMSTrackStats, hmsStats: HMSWebrtcStats) {\n    if (!trackStats.peerID || !trackStats.estimatedPlayoutTimestamp || trackStats.kind !== 'video') {\n      return;\n    }\n    const peer = this.store.getPeerById(trackStats.peerID);\n    const audioTrack = peer?.audioTrack;\n    const videoTrack = peer?.videoTrack;\n    /**\n     * 1. Send value as MAX_SAFE_INTEGER when either audio or value track is muted for the entire window\n     * 2. When both audio and video are unmuted for a part of window , then divide the difference by those many number of samples only\n     */\n    const areBothTracksEnabled = audioTrack && videoTrack && audioTrack.enabled && videoTrack.enabled;\n    if (!areBothTracksEnabled) {\n      return MAX_SAFE_INTEGER;\n    }\n    const audioStats = hmsStats.getRemoteTrackStats(audioTrack.trackId);\n    if (!audioStats) {\n      return MAX_SAFE_INTEGER;\n    }\n    if (!audioStats.estimatedPlayoutTimestamp) {\n      return;\n    }\n\n    // https://w3c.github.io/webrtc-stats/#dom-rtcinboundrtpstreamstats-estimatedplayouttimestamp\n    return audioStats.estimatedPlayoutTimestamp - trackStats.estimatedPlayoutTimestamp;\n  }\n}\n\nclass RunningRemoteTrackAnalytics extends RunningTrackAnalytics {\n  samples: (RemoteAudioSample | RemoteVideoSample)[] = [];\n\n  protected collateSample = (): RemoteAudioSample | RemoteVideoSample => {\n    const latestStat = this.getLatestStat();\n    const firstStat = this.getFirstStat();\n\n    const baseSample = {\n      timestamp: Date.now(),\n      total_pli_count: this.calculateDifferenceForSample('pliCount'),\n      total_nack_count: this.calculateDifferenceForSample('nackCount'),\n      avg_jitter_buffer_delay: this.calculateAverage('calculatedJitterBufferDelay', false),\n    };\n\n    if (latestStat.kind === 'video') {\n      return removeUndefinedFromObject<RemoteVideoSample>({\n        ...baseSample,\n        avg_av_sync_ms: this.calculateAvgAvSyncForSample(),\n        avg_frames_received_per_sec: this.calculateDifferenceAverage('framesReceived'),\n        avg_frames_dropped_per_sec: this.calculateDifferenceAverage('framesDropped'),\n        avg_frames_decoded_per_sec: this.calculateDifferenceAverage('framesDecoded'),\n        frame_width: this.calculateAverage('frameWidth'),\n        frame_height: this.calculateAverage('frameHeight'),\n        expected_frame_width: this.calculateAverage('expectedFrameWidth'),\n        expected_frame_height: this.calculateAverage('expectedFrameHeight'),\n        pause_count: this.calculateDifferenceForSample('pauseCount'),\n        pause_duration_seconds: this.calculateDifferenceForSample('totalPausesDuration'),\n        freeze_count: this.calculateDifferenceForSample('freezeCount'),\n        freeze_duration_seconds: this.calculateDifferenceForSample('totalFreezesDuration'),\n      });\n    } else {\n      const audio_concealed_samples =\n        (latestStat.concealedSamples || 0) -\n        (latestStat.silentConcealedSamples || 0) -\n        ((firstStat.concealedSamples || 0) - (firstStat.silentConcealedSamples || 0));\n\n      return removeUndefinedFromObject<RemoteAudioSample>({\n        ...baseSample,\n        audio_level: this.calculateInstancesOfHigh('audioLevel', 0.05),\n        audio_concealed_samples,\n        audio_total_samples_received: this.calculateDifferenceForSample('totalSamplesReceived'),\n        audio_concealment_events: this.calculateDifferenceForSample('concealmentEvents'),\n        fec_packets_discarded: this.calculateDifferenceForSample('fecPacketsDiscarded'),\n        fec_packets_received: this.calculateDifferenceForSample('fecPacketsReceived'),\n        total_samples_duration: this.calculateDifferenceForSample('totalSamplesDuration'),\n        total_packets_received: this.calculateDifferenceForSample('packetsReceived'),\n        total_packets_lost: this.calculateDifferenceForSample('packetsLost'),\n      });\n    }\n  };\n\n  shouldCreateSample = () => {\n    const length = this.tempStats.length;\n    const newStat = this.tempStats[length - 1];\n    const prevStat = this.tempStats[length - 2];\n\n    return (\n      length === SUBSCRIBE_STATS_SAMPLE_WINDOW ||\n      hasEnabledStateChanged(newStat, prevStat) ||\n      (newStat.kind === 'video' && hasResolutionChanged(newStat, prevStat))\n    );\n  };\n\n  toAnalytics = (): RemoteAudioTrackAnalytics | RemoteVideoTrackAnalytics => {\n    return {\n      track_id: this.track_id,\n      ssrc: this.ssrc,\n      source: this.source,\n      rid: this.rid,\n      samples: this.samples,\n    };\n  };\n\n  private calculateAvgAvSyncForSample() {\n    const avSyncValues = this.tempStats.map(stat => stat.avSync);\n    const validAvSyncValues: number[] = avSyncValues.filter(\n      (value): value is number => value !== undefined && value !== MAX_SAFE_INTEGER,\n    );\n    if (validAvSyncValues.length === 0) {\n      return MAX_SAFE_INTEGER;\n    }\n    return validAvSyncValues.reduce((a, b) => a + b, 0) / validAvSyncValues.length;\n  }\n}\n","// Sent in trickle messages as target - biz understands only 0 and 1\nexport enum HMSConnectionRole {\n  Publish = 0,\n  Subscribe = 1,\n}\n\nexport interface HMSTrickle {\n  candidate: RTCIceCandidateInit;\n  target: HMSConnectionRole;\n}\n","import * as sdpTransform from 'sdp-transform';\nimport { isPresent } from './validations';\nimport { TrackState } from '../notification-manager';\n\n/**\n * @DISCUSS: Should we have a wrapper over RTCSessionDescriptionInit(SDP) and have these methods in it?\n */\n\nexport function fixMsid(desc: RTCSessionDescriptionInit, tracks?: Map<string, TrackState>): RTCSessionDescriptionInit {\n  const parsedSdp = sdpTransform.parse(desc.sdp!);\n\n  if (!parsedSdp.origin?.username.startsWith('mozilla')) {\n    // This isn't firefox, so we return the original offer without doing anything\n    return desc;\n  }\n\n  const mediaTracks = tracks ? Array.from(tracks.values()) : [];\n\n  parsedSdp.media.forEach(m => {\n    const streamId = m.msid?.split(' ')[0];\n    // check for both type and streamid as both video and screenshare have same type but different stream_id\n    const trackId = mediaTracks.find(val => val.type === m.type && val.stream_id === streamId)?.track_id;\n    if (trackId) {\n      m.msid = m.msid?.replace(/\\s(.+)/, ` ${trackId}`);\n    }\n  });\n\n  return { type: desc.type, sdp: sdpTransform.write(parsedSdp) };\n}\n\n/**\n * Get the track ID from the SDP using the transceiver's mid from RTCTrackEvent\n * @TODO: This could take more processing time in a large room and when the SDP is big.\n * Consider using this for Firefox only?\n */\nexport function getSdpTrackIdForMid(\n  desc?: RTCSessionDescriptionInit | null,\n  mid?: RTCRtpTransceiver['mid'],\n): string | undefined {\n  if (!desc?.sdp || !mid) {\n    return undefined;\n  }\n  const parsedSdp = sdpTransform.parse(desc.sdp);\n  const trackSection = parsedSdp.media.find(media => isPresent(media.mid) && parseInt(media.mid!) === parseInt(mid));\n  const trackId = trackSection?.msid?.split(' ')[1];\n  return trackId;\n}\n\nexport function enableOpusDtx(desc: RTCSessionDescriptionInit): RTCSessionDescriptionInit {\n  if (desc.sdp!.includes('usedtx=1')) {\n    return desc;\n  }\n\n  return { type: desc.type, sdp: desc.sdp!.replace('useinbandfec=1', 'useinbandfec=1;usedtx=1') };\n}\n","import IConnectionObserver, { RTCIceCandidatePair } from './IConnectionObserver';\nimport { HMSConnectionRole } from './model';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { HMSAudioTrackSettings, HMSVideoTrackSettings } from '../media/settings';\nimport { HMSLocalTrack, HMSLocalVideoTrack } from '../media/tracks';\nimport { TrackState } from '../notification-manager';\nimport JsonRpcSignal from '../signal/jsonrpc';\nimport HMSLogger from '../utils/logger';\nimport { enableOpusDtx, fixMsid } from '../utils/session-description';\n\nconst TAG = '[HMSConnection]';\n\nexport default abstract class HMSConnection {\n  readonly role: HMSConnectionRole;\n  protected readonly signal: JsonRpcSignal;\n\n  protected abstract readonly observer: IConnectionObserver;\n  abstract readonly nativeConnection: RTCPeerConnection;\n  /**\n   * We keep a list of pending IceCandidates received\n   * from the signalling server. When the peer-connection\n   * is initialized we call [addIceCandidate] for each.\n   *\n   * WARN:\n   *  - [HMSPublishConnection] keeps the complete list of candidates (for\n   *      ice-connection failed/disconnect) forever.\n   *  - [HMSSubscribeConnection] clears this list as soon as we call [addIceCandidate]\n   */\n  readonly candidates = new Array<RTCIceCandidateInit>();\n  // @ts-ignore\n  sfuNodeId?: string;\n\n  selectedCandidatePair?: RTCIceCandidatePair;\n\n  protected constructor(role: HMSConnectionRole, signal: JsonRpcSignal) {\n    this.role = role;\n    this.signal = signal;\n  }\n\n  public get iceConnectionState(): RTCIceConnectionState {\n    return this.nativeConnection.iceConnectionState;\n  }\n\n  public get connectionState(): RTCPeerConnectionState {\n    return this.nativeConnection.connectionState;\n  }\n\n  private get action() {\n    return this.role === HMSConnectionRole.Publish ? HMSAction.PUBLISH : HMSAction.SUBSCRIBE;\n  }\n\n  setSfuNodeId(nodeId?: string) {\n    this.sfuNodeId = nodeId;\n  }\n\n  addTransceiver(track: MediaStreamTrack, init: RTCRtpTransceiverInit): RTCRtpTransceiver {\n    return this.nativeConnection.addTransceiver(track, init);\n  }\n\n  async createOffer(tracks?: Map<string, TrackState>, options?: RTCOfferOptions): Promise<RTCSessionDescriptionInit> {\n    try {\n      const offer = await this.nativeConnection.createOffer(options);\n      HMSLogger.d(TAG, `[role=${this.role}] createOffer offer=${JSON.stringify(offer, null, 1)}`);\n      return enableOpusDtx(fixMsid(offer, tracks));\n    } catch (error) {\n      throw ErrorFactory.WebrtcErrors.CreateOfferFailed(this.action, (error as Error).message);\n    }\n  }\n\n  async createAnswer(options: RTCOfferOptions | undefined = undefined): Promise<RTCSessionDescriptionInit> {\n    try {\n      const answer = await this.nativeConnection.createAnswer(options);\n      HMSLogger.d(TAG, `[role=${this.role}] createAnswer answer=${JSON.stringify(answer, null, 1)}`);\n      return answer;\n    } catch (error) {\n      throw ErrorFactory.WebrtcErrors.CreateAnswerFailed(this.action, (error as Error).message);\n    }\n  }\n\n  async setLocalDescription(description: RTCSessionDescriptionInit): Promise<void> {\n    try {\n      HMSLogger.d(TAG, `[role=${this.role}] setLocalDescription description=${JSON.stringify(description, null, 1)}`);\n      await this.nativeConnection.setLocalDescription(description);\n    } catch (error) {\n      throw ErrorFactory.WebrtcErrors.SetLocalDescriptionFailed(this.action, (error as Error).message);\n    }\n  }\n\n  async setRemoteDescription(description: RTCSessionDescriptionInit): Promise<void> {\n    try {\n      HMSLogger.d(TAG, `[role=${this.role}] setRemoteDescription description=${JSON.stringify(description, null, 1)}`);\n      await this.nativeConnection.setRemoteDescription(description);\n    } catch (error) {\n      throw ErrorFactory.WebrtcErrors.SetRemoteDescriptionFailed(this.action, (error as Error).message);\n    }\n  }\n\n  async addIceCandidate(candidate: RTCIceCandidateInit): Promise<void> {\n    if (this.nativeConnection.signalingState === 'closed') {\n      HMSLogger.d(TAG, `[role=${this.role}] addIceCandidate signalling state closed`);\n      return;\n    }\n    HMSLogger.d(TAG, `[role=${this.role}] addIceCandidate candidate=${JSON.stringify(candidate, null, 1)}`);\n    await this.nativeConnection.addIceCandidate(candidate);\n  }\n\n  public get remoteDescription(): RTCSessionDescription | null {\n    return this.nativeConnection.remoteDescription;\n  }\n\n  getSenders(): Array<RTCRtpSender> {\n    return this.nativeConnection.getSenders();\n  }\n\n  handleSelectedIceCandidatePairs() {\n    /**\n     * for the very first peer in the room we don't have any subscribe ice candidates\n     * because the peer hasn't subscribed to anything.\n     *\n     * For all peers joining after this peer, we have published and subscribed at the time of join itself\n     * so we're able to log both publish and subscribe ice candidates.\n     * Added try catch for the whole section as the getSenders and getReceivers is throwing errors in load test\n     */\n    try {\n      const transmitters = this.role === HMSConnectionRole.Publish ? this.getSenders() : this.getReceivers();\n\n      transmitters.forEach(transmitter => {\n        const kindOfTrack = transmitter.track?.kind;\n        if (transmitter.transport) {\n          const iceTransport = transmitter.transport.iceTransport;\n\n          const handleSelectedCandidate = () => {\n            // @ts-expect-error\n            if (typeof iceTransport.getSelectedCandidatePair === 'function') {\n              // @ts-expect-error\n              this.selectedCandidatePair = iceTransport.getSelectedCandidatePair();\n              if (this.selectedCandidatePair) {\n                this.observer.onSelectedCandidatePairChange(this.selectedCandidatePair);\n                HMSLogger.d(\n                  TAG,\n                  `${HMSConnectionRole[this.role]} connection`,\n                  `selected ${kindOfTrack || 'unknown'} candidate pair`,\n                  JSON.stringify(this.selectedCandidatePair, null, 2),\n                );\n              }\n            }\n          };\n\n          // @ts-expect-error\n          if (typeof iceTransport.onselectedcandidatepairchange === 'function') {\n            // @ts-expect-error\n            iceTransport.onselectedcandidatepairchange = handleSelectedCandidate;\n          }\n          handleSelectedCandidate();\n        }\n      });\n    } catch (error) {\n      HMSLogger.w(\n        TAG,\n        `Error in logging selected ice candidate pair for ${HMSConnectionRole[this.role]} connection`,\n        error,\n      );\n    }\n  }\n\n  removeTrack(sender: RTCRtpSender) {\n    if (this.nativeConnection.signalingState !== 'closed') {\n      this.nativeConnection.removeTrack(sender);\n    }\n  }\n\n  // eslint-disable-next-line\n  async setMaxBitrateAndFramerate(\n    track: HMSLocalTrack,\n    updatedSettings?: HMSAudioTrackSettings | HMSVideoTrackSettings,\n  ) {\n    const maxBitrate = updatedSettings?.maxBitrate || track.settings.maxBitrate;\n    const maxFramerate = track instanceof HMSLocalVideoTrack && track.settings.maxFramerate;\n    const sender = this.getSenders().find(s => s?.track?.id === track.getTrackIDBeingSent());\n\n    if (sender) {\n      const params = sender.getParameters();\n      // modify only for non-simulcast encodings\n      if (params.encodings.length === 1) {\n        if (maxBitrate) {\n          params.encodings[0].maxBitrate = maxBitrate * 1000;\n        }\n        if (maxFramerate) {\n          // @ts-ignore\n          params.encodings[0].maxFramerate = maxFramerate;\n        }\n      }\n      await sender.setParameters(params);\n    } else {\n      HMSLogger.w(\n        TAG,\n        `no sender found to setMaxBitrate for track - ${track.trackId}, sentTrackId - ${track.getTrackIDBeingSent()}`,\n      );\n    }\n  }\n\n  async getStats() {\n    return await this.nativeConnection.getStats();\n  }\n\n  close() {\n    this.nativeConnection.close();\n  }\n\n  private getReceivers() {\n    return this.nativeConnection.getReceivers();\n  }\n}\n","import { IPublishConnectionObserver } from './IPublishConnectionObserver';\nimport JsonRpcSignal from '../../signal/jsonrpc';\nimport { API_DATA_CHANNEL } from '../../utils/constants';\nimport HMSLogger from '../../utils/logger';\nimport HMSConnection from '../HMSConnection';\nimport { HMSConnectionRole } from '../model';\n\nexport default class HMSPublishConnection extends HMSConnection {\n  private readonly TAG = '[HMSPublishConnection]';\n  protected readonly observer: IPublishConnectionObserver;\n  readonly nativeConnection: RTCPeerConnection;\n  readonly channel: RTCDataChannel;\n\n  constructor(signal: JsonRpcSignal, config: RTCConfiguration, observer: IPublishConnectionObserver) {\n    super(HMSConnectionRole.Publish, signal);\n    this.observer = observer;\n\n    this.nativeConnection = new RTCPeerConnection(config);\n    this.channel = this.nativeConnection.createDataChannel(API_DATA_CHANNEL, {\n      protocol: 'SCTP',\n    });\n    this.channel.onerror = ev => HMSLogger.e(this.TAG, `publish data channel onerror ${ev}`, ev);\n\n    this.nativeConnection.onicecandidate = ({ candidate }) => {\n      if (candidate) {\n        this.observer.onIceCandidate(candidate);\n        signal.trickle(this.role, candidate);\n      }\n    };\n\n    this.nativeConnection.oniceconnectionstatechange = () => {\n      this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState);\n    };\n\n    this.nativeConnection.onconnectionstatechange = () => {\n      this.observer.onConnectionStateChange(this.nativeConnection.connectionState);\n\n      // here it replaces the original listener if already present and\n      // handles cases where sctp transport is reinitialised\n      if (this.nativeConnection.sctp) {\n        this.nativeConnection.sctp.transport.onstatechange = () => {\n          this.observer.onDTLSTransportStateChange(this.nativeConnection.sctp?.transport.state);\n        };\n        this.nativeConnection.sctp.transport.onerror = (event: Event) => {\n          this.observer.onDTLSTransportError(\n            new Error((event as RTCErrorEvent)?.error?.errorDetail) || 'DTLS Transport failed',\n          );\n        };\n      }\n    };\n  }\n\n  close() {\n    super.close();\n    this.channel.close();\n  }\n\n  initAfterJoin() {\n    this.nativeConnection.onnegotiationneeded = async () => {\n      HMSLogger.d(this.TAG, `onnegotiationneeded`);\n      await this.observer.onRenegotiationNeeded();\n    };\n  }\n}\n","import HMSLogger from '../utils/logger';\n\nexport interface DataChannelObserver {\n  onMessage(value: string): void;\n}\n\nexport default class HMSDataChannel {\n  private readonly TAG = '[HMSDataChannel]';\n  private readonly nativeChannel: RTCDataChannel;\n  private readonly observer: DataChannelObserver;\n  private readonly metadata: string;\n\n  public get id() {\n    return this.nativeChannel.id;\n  }\n\n  public get label() {\n    return this.nativeChannel.label;\n  }\n\n  public get readyState() {\n    return this.nativeChannel.readyState;\n  }\n\n  constructor(nativeChannel: RTCDataChannel, observer: DataChannelObserver, metadata = '') {\n    this.nativeChannel = nativeChannel;\n    this.observer = observer;\n    this.metadata = metadata;\n\n    nativeChannel.onmessage = e => {\n      // HMSLogger.d(this.TAG, `[${this.metadata}] onMessage: label=${this.label}, message=${e.data}`);\n      this.observer.onMessage(e.data);\n    };\n  }\n\n  send(message: string) {\n    HMSLogger.d(this.TAG, `[${this.metadata}] Sending [size=${message.length}] message=${message}`);\n    this.nativeChannel.send(message);\n  }\n\n  close() {\n    this.nativeChannel.close();\n  }\n}\n","import EventEmitter from 'eventemitter2';\nimport { v4 as uuid } from 'uuid';\nimport ISubscribeConnectionObserver from './ISubscribeConnectionObserver';\nimport { HMSRemoteStream, HMSSimulcastLayer } from '../../internal';\nimport { HMSRemoteAudioTrack } from '../../media/tracks/HMSRemoteAudioTrack';\nimport { HMSRemoteVideoTrack } from '../../media/tracks/HMSRemoteVideoTrack';\nimport { InitFlags } from '../../signal/init/models';\nimport JsonRpcSignal from '../../signal/jsonrpc';\nimport { API_DATA_CHANNEL } from '../../utils/constants';\nimport HMSLogger from '../../utils/logger';\nimport { getSdpTrackIdForMid } from '../../utils/session-description';\nimport { workerSleep } from '../../utils/timer-utils';\nimport { PreferAudioLayerParams, PreferLayerResponse, PreferVideoLayerParams } from '../channel-messages';\nimport HMSConnection from '../HMSConnection';\nimport HMSDataChannel from '../HMSDataChannel';\nimport { HMSConnectionRole } from '../model';\n\nexport default class HMSSubscribeConnection extends HMSConnection {\n  private readonly TAG = '[HMSSubscribeConnection]';\n  private readonly remoteStreams = new Map<string, HMSRemoteStream>();\n  protected readonly observer: ISubscribeConnectionObserver;\n  private readonly MAX_RETRIES = 3;\n\n  readonly nativeConnection: RTCPeerConnection;\n\n  private pendingMessageQueue: string[] = [];\n\n  private apiChannel?: HMSDataChannel;\n  private eventEmitter = new EventEmitter({ maxListeners: 60 });\n\n  private initNativeConnectionCallbacks() {\n    this.nativeConnection.oniceconnectionstatechange = () => {\n      this.observer.onIceConnectionChange(this.nativeConnection.iceConnectionState);\n    };\n\n    // @TODO(eswar): Remove this. Use iceconnectionstate change with interval and threshold.\n    this.nativeConnection.onconnectionstatechange = () => {\n      this.observer.onConnectionStateChange(this.nativeConnection.connectionState);\n    };\n\n    this.nativeConnection.ondatachannel = e => {\n      if (e.channel.label !== API_DATA_CHANNEL) {\n        // TODO: this.observer.onDataChannel(e.channel);\n        return;\n      }\n\n      this.apiChannel = new HMSDataChannel(\n        e.channel,\n        {\n          onMessage: (value: string) => {\n            this.eventEmitter.emit('message', value);\n            this.observer.onApiChannelMessage(value);\n          },\n        },\n        `role=${this.role}`,\n      );\n\n      e.channel.onopen = this.handlePendingApiMessages;\n    };\n\n    this.nativeConnection.onicecandidate = e => {\n      if (e.candidate !== null) {\n        this.observer.onIceCandidate(e.candidate);\n        this.signal.trickle(this.role, e.candidate);\n      }\n    };\n\n    this.nativeConnection.ontrack = e => {\n      const stream = e.streams[0];\n      const streamId = stream.id;\n\n      if (!this.remoteStreams.has(streamId)) {\n        const remote = new HMSRemoteStream(stream, this);\n        this.remoteStreams.set(streamId, remote);\n      }\n\n      stream.addEventListener('removetrack', (ev: MediaStreamTrackEvent) => {\n        if (ev.track.id !== e.track.id) {\n          return;\n        }\n        /*\n         * this match has to be with nativetrack.id instead of track.trackId as the latter refers to sdp track id for\n         * ease of correlating update messages coming from the backend. The two track ids are usually the same, but\n         * can be different for some browsers. checkout sdptrackid field in HMSTrack for more details.\n         */\n        const toRemoveTrackIdx = remote.tracks.findIndex(\n          track => track.nativeTrack.id === ev.track.id && e.transceiver.mid === track.transceiver?.mid,\n        );\n        if (toRemoveTrackIdx >= 0) {\n          const toRemoveTrack = remote.tracks[toRemoveTrackIdx];\n          this.observer.onTrackRemove(toRemoveTrack);\n          remote.tracks.splice(toRemoveTrackIdx, 1);\n          // If the length becomes 0 we assume that stream is removed entirely\n          if (remote.tracks.length === 0) {\n            this.remoteStreams.delete(streamId);\n          }\n        }\n      });\n\n      const remote = this.remoteStreams.get(streamId)!;\n      const isAudioTrack = e.track.kind === 'audio';\n      const TrackCls = isAudioTrack ? HMSRemoteAudioTrack : HMSRemoteVideoTrack;\n      const track = isAudioTrack\n        ? new TrackCls(remote, e.track)\n        : new TrackCls(remote, e.track, undefined, this.isFlagEnabled(InitFlags.FLAG_DISABLE_NONE_LAYER_REQUEST));\n      // reset the simulcast layer to none when new video tracks are added, UI will subscribe when required\n      if (e.track.kind === 'video') {\n        remote.setVideoLayerLocally(HMSSimulcastLayer.NONE, 'addTrack', 'subscribeConnection');\n      }\n      track.transceiver = e.transceiver;\n      const trackId = getSdpTrackIdForMid(this.remoteDescription, e.transceiver?.mid);\n      trackId && track.setSdpTrackId(trackId);\n      remote.tracks.push(track);\n      this.observer.onTrackAdd(track);\n    };\n  }\n\n  constructor(\n    signal: JsonRpcSignal,\n    config: RTCConfiguration,\n    private isFlagEnabled: (flag: InitFlags) => boolean,\n    observer: ISubscribeConnectionObserver,\n  ) {\n    super(HMSConnectionRole.Subscribe, signal);\n    this.observer = observer;\n\n    this.nativeConnection = new RTCPeerConnection(config);\n    this.initNativeConnectionCallbacks();\n  }\n\n  sendOverApiDataChannel(message: string) {\n    if (this.apiChannel && this.apiChannel.readyState === 'open') {\n      this.apiChannel.send(message);\n    } else {\n      HMSLogger.w(this.TAG, `API Data channel not ${this.apiChannel ? 'open' : 'present'}, queueing`, message);\n      this.pendingMessageQueue.push(message);\n    }\n  }\n\n  async sendOverApiDataChannelWithResponse<T extends PreferAudioLayerParams | PreferVideoLayerParams>(\n    message: T,\n    requestId?: string,\n  ): Promise<PreferLayerResponse> {\n    const id = uuid();\n    if (message.method === 'prefer-video-track-state') {\n      const disableAutoUnsubscribe = this.isFlagEnabled(InitFlags.FLAG_DISABLE_VIDEO_TRACK_AUTO_UNSUBSCRIBE);\n      if (disableAutoUnsubscribe && message.params.max_spatial_layer === HMSSimulcastLayer.NONE) {\n        HMSLogger.d(this.TAG, 'video auto unsubscribe is disabled, request is ignored');\n        return { id } as PreferLayerResponse;\n      }\n    }\n    const request = JSON.stringify({\n      id: requestId || id,\n      jsonrpc: '2.0',\n      ...message,\n    });\n    return this.sendMessage(request, id);\n  }\n\n  close() {\n    super.close();\n    this.apiChannel?.close();\n  }\n\n  private handlePendingApiMessages = () => {\n    this.eventEmitter.emit('open', true);\n    if (this.pendingMessageQueue.length > 0) {\n      HMSLogger.d(this.TAG, 'Found pending message queue, sending messages');\n      this.pendingMessageQueue.forEach(msg => this.sendOverApiDataChannel(msg));\n      this.pendingMessageQueue.length = 0;\n    }\n  };\n\n  // eslint-disable-next-line complexity\n  private sendMessage = async (request: string, requestId: string): Promise<PreferLayerResponse> => {\n    if (this.apiChannel?.readyState !== 'open') {\n      await this.eventEmitter.waitFor('open');\n    }\n    let response: PreferLayerResponse;\n    for (let i = 0; i < this.MAX_RETRIES; i++) {\n      this.apiChannel!.send(request);\n      response = await this.waitForResponse(requestId);\n      const error = response.error;\n      if (error) {\n        // Don't retry or do anything, track is already removed\n        if (error.code === 404) {\n          HMSLogger.d(this.TAG, `Track not found ${requestId}`, { request, try: i + 1, error });\n          break;\n        }\n        HMSLogger.d(this.TAG, `Failed sending ${requestId}`, { request, try: i + 1, error });\n        const shouldRetry = error.code / 100 === 5 || error.code === 429;\n        if (!shouldRetry) {\n          throw Error(`code=${error.code}, message=${error.message}`);\n        }\n        const delay = (2 + Math.random() * 2) * 1000;\n        await workerSleep(delay);\n      } else {\n        break;\n      }\n    }\n    return response!;\n  };\n\n  private waitForResponse = async (requestId: string): Promise<PreferLayerResponse> => {\n    const res = await this.eventEmitter.waitFor('message', function (value) {\n      return value.includes(requestId);\n    });\n    const response = JSON.parse(res[0] as string);\n    HMSLogger.d(this.TAG, `response for ${requestId} -`, JSON.stringify(response, null, 2));\n    return response;\n  };\n}\n","import { HMSICEServer } from '../interfaces';\n\nexport const transformIceServerConfig = (defaultConfig?: RTCIceServer[], iceServers?: HMSICEServer[]) => {\n  if (!iceServers || iceServers.length === 0) {\n    return defaultConfig;\n  }\n  const transformedIceServers = iceServers.map(server => {\n    return { urls: server.urls, credentialType: 'password', credential: server.password, username: server.userName };\n  });\n  return transformedIceServers;\n};\n","import { InitConfig } from './models';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { HMSICEServer } from '../../interfaces';\nimport { HMSException } from '../../internal';\nimport { transformIceServerConfig } from '../../utils/ice-server-config';\nimport HMSLogger from '../../utils/logger';\n\nconst TAG = '[InitService]';\nexport default class InitService {\n  private static handleError(response: Response, body: { code: number; message: string }) {\n    switch (response.status) {\n      case 404:\n        throw ErrorFactory.APIErrors.EndpointUnreachable(HMSAction.INIT, body.message || response.statusText);\n      case 200:\n        break;\n      default:\n        throw ErrorFactory.APIErrors.ServerErrors(\n          body.code || response.status,\n          HMSAction.INIT,\n          body.message || response?.statusText,\n        );\n    }\n  }\n\n  static async fetchInitConfig({\n    token,\n    peerId,\n    userAgent,\n    initEndpoint = 'https://prod-init.100ms.live',\n    region = '',\n    iceServers,\n  }: {\n    token: string;\n    peerId: string;\n    userAgent: string;\n    initEndpoint?: string;\n    region?: string;\n    iceServers?: HMSICEServer[];\n  }): Promise<InitConfig> {\n    HMSLogger.d(TAG, `fetchInitConfig: initEndpoint=${initEndpoint} token=${token} peerId=${peerId} region=${region} `);\n    const url = getUrl(initEndpoint, peerId, userAgent, region);\n    try {\n      const response = await fetch(url, {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n      try {\n        const config = await response.clone().json();\n        this.handleError(response, config);\n        HMSLogger.d(TAG, `config is ${JSON.stringify(config, null, 2)}`);\n        return transformInitConfig(config, iceServers);\n      } catch (err) {\n        const text = await response.text();\n        HMSLogger.e(TAG, 'json error', (err as Error).message, text);\n        throw err instanceof HMSException\n          ? err\n          : ErrorFactory.APIErrors.ServerErrors(response.status, HMSAction.INIT, (err as Error).message);\n      }\n    } catch (err) {\n      const error = err as Error;\n      if (['Failed to fetch', 'NetworkError', 'ECONNRESET'].some(message => error.message.includes(message))) {\n        throw ErrorFactory.APIErrors.EndpointUnreachable(HMSAction.INIT, error.message);\n      }\n      throw error;\n    }\n  }\n}\n\nexport function getUrl(endpoint: string, peerId: string, userAgent: string, region?: string) {\n  try {\n    const url = new URL('/init', endpoint);\n\n    if (region && region.trim().length > 0) {\n      url.searchParams.set('region', region.trim());\n    }\n    url.searchParams.set('peer_id', peerId);\n    url.searchParams.set('user_agent_v2', userAgent);\n    return url.toString();\n  } catch (err) {\n    const error = err as Error;\n    HMSLogger.e(TAG, error.name, error.message);\n    throw error;\n  }\n}\n\nexport function transformInitConfig(config: any, iceServers?: HMSICEServer[]): InitConfig {\n  return {\n    ...config,\n    rtcConfiguration: {\n      ...config.rtcConfiguration,\n      iceServers: transformIceServerConfig(config.rtcConfiguration?.ice_servers, iceServers),\n    },\n  };\n}\n","import { v4 as uuid } from 'uuid';\nimport { convertSignalMethodtoErrorAction, HMSSignalMethod, JsonRpcRequest, JsonRpcResponse } from './models';\nimport AnalyticsEvent from '../../analytics/AnalyticsEvent';\nimport { HMSConnectionRole, HMSTrickle } from '../../connection/model';\nimport { ErrorFactory } from '../../error/ErrorFactory';\nimport { HMSAction } from '../../error/HMSAction';\nimport { HMSException } from '../../error/HMSException';\nimport { PeerNotificationInfo, SendMessage } from '../../notification-manager';\nimport {\n  DEFAULT_SIGNAL_PING_INTERVAL,\n  DEFAULT_SIGNAL_PING_TIMEOUT,\n  LEAVE_REASON,\n  PONG_RESPONSE_TIMES_SIZE,\n} from '../../utils/constants';\nimport HMSLogger from '../../utils/logger';\nimport { PromiseCallbacks } from '../../utils/promise';\nimport { Queue } from '../../utils/queue';\nimport { isPageHidden } from '../../utils/support';\nimport { workerSleep } from '../../utils/timer-utils';\nimport {\n  AcceptRoleChangeParams,\n  BroadcastResponse,\n  CreateWhiteboardResponse,\n  FindPeerByNameRequestParams,\n  FindPeerByNameResponse,\n  FindPeersRequestParams,\n  GetPeerRequestParams,\n  GetSessionMetadataResponse,\n  GetWhiteboardResponse,\n  HLSRequestParams,\n  HLSTimedMetadataParams,\n  HMSPermissionType,\n  HMSWhiteboardCreateOptions,\n  JoinLeaveGroupResponse,\n  MultiTrackUpdateRequestParams,\n  PeerIterRequestParams,\n  PeersIterationResponse,\n  PollInfoGetParams,\n  PollInfoGetResponse,\n  PollInfoSetParams,\n  PollInfoSetResponse,\n  PollLeaderboardGetParams,\n  PollLeaderboardGetResponse,\n  PollListParams,\n  PollListResponse,\n  PollQuestionsGetParams,\n  PollQuestionsGetResponse,\n  PollQuestionsSetParams,\n  PollQuestionsSetResponse,\n  PollResponseSetParams,\n  PollResponseSetResponse,\n  PollResponsesGetParams,\n  PollResponsesGetResponse,\n  PollResultParams,\n  PollResultResponse,\n  PollStartParams,\n  PollStartResponse,\n  PollStopParams,\n  PollStopResponse,\n  RemovePeerRequest,\n  RequestForBulkRoleChangeParams,\n  RequestForRoleChangeParams,\n  SetSessionMetadataParams,\n  SetSessionMetadataResponse,\n  StartRTMPOrRecordingRequestParams,\n  StartTranscriptionRequestParams,\n  Track,\n  TrackUpdateRequestParams,\n  UpdatePeerRequestParams,\n} from '../interfaces';\nimport { ISignalEventsObserver } from '../ISignalEventsObserver';\n\nexport default class JsonRpcSignal {\n  readonly TAG = '[SIGNAL]: ';\n  readonly observer: ISignalEventsObserver;\n  readonly pongResponseTimes = new Queue<number>(PONG_RESPONSE_TIMES_SIZE);\n\n  /**\n   * Sometimes before [join] is completed, there could be a lot of trickles\n   * Sending [HMSTrickle]` before [join] web socket message leads to\n   * error: [500] no rtc transport exists for this Peer\n   *\n   * We keep a list of pending trickles and send them immediately after [join]\n   * is done.\n   */\n  private isJoinCompleted = false;\n  private pendingTrickle: Array<HMSTrickle> = [];\n\n  private socket: WebSocket | null = null;\n\n  private callbacks = new Map<string, PromiseCallbacks<string, { method: HMSSignalMethod }>>();\n\n  private _isConnected = false;\n  private id = 0;\n  private sfuNodeId: string | undefined;\n\n  private onCloseHandler: (event: CloseEvent) => void = () => {};\n\n  public get isConnected(): boolean {\n    return this._isConnected;\n  }\n\n  setSfuNodeId(sfuNodeId?: string) {\n    this.sfuNodeId = sfuNodeId;\n  }\n\n  public setIsConnected(newValue: boolean, reason = '') {\n    HMSLogger.d(this.TAG, `isConnected set id: ${this.id}, oldValue: ${this._isConnected}, newValue: ${newValue}`);\n    if (this._isConnected === newValue) {\n      return;\n    }\n\n    if (this._isConnected && !newValue) {\n      // went offline\n      this._isConnected = newValue;\n      this.rejectPendingCalls(reason);\n      this.observer.onOffline(reason);\n    } else if (!this._isConnected && newValue) {\n      // went online\n      this._isConnected = newValue;\n      this.observer.onOnline();\n    }\n  }\n\n  constructor(observer: ISignalEventsObserver) {\n    this.observer = observer;\n    window.addEventListener('offline', this.offlineListener);\n    window.addEventListener('online', this.onlineListener);\n\n    this.onMessageHandler = this.onMessageHandler.bind(this);\n  }\n\n  getPongResponseTimes() {\n    return this.pongResponseTimes.toList();\n  }\n\n  private async internalCall<T>(method: string, params: any): Promise<T> {\n    const id = uuid();\n    const message = { method, params, id, jsonrpc: '2.0' } as JsonRpcRequest;\n\n    this.socket?.send(JSON.stringify(message));\n\n    try {\n      const response = await new Promise<any>((resolve, reject) => {\n        this.callbacks.set(id, { resolve, reject, metadata: { method: method as HMSSignalMethod } });\n      });\n\n      return response;\n    } catch (ex) {\n      if (ex instanceof HMSException) {\n        throw ex;\n      }\n\n      const error = ex as JsonRpcResponse['error'];\n      throw ErrorFactory.WebsocketMethodErrors.ServerErrors(\n        Number(error.code),\n        convertSignalMethodtoErrorAction(method as HMSSignalMethod),\n        error.message,\n      );\n    }\n  }\n\n  private notify(method: string, params: any) {\n    const message = { method, params };\n\n    if (this.socket?.readyState === WebSocket.OPEN) {\n      this.socket?.send(JSON.stringify(message));\n    }\n  }\n\n  open(uri: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      let promiseSettled = false;\n      // cleanup\n      if (this.socket) {\n        this.socket.close();\n        this.socket.removeEventListener('close', this.onCloseHandler);\n        this.socket.removeEventListener('message', this.onMessageHandler);\n      }\n\n      this.socket = new WebSocket(uri); // @DISCUSS: Inject WebSocket as a dependency so that it can be easier to mock and test\n\n      const errorListener = () => {\n        /**\n         * there was an error received from websocket leading to disconnection, this can happen either if server\n         * disconnects the websocket for some reason, there is a network disconnect or a firewall/antivirus on user's\n         * device is breaking the websocket connecting(which can happen even after a successful connect).\n         */\n        HMSLogger.e(this.TAG, 'Error from websocket');\n        promiseSettled = true;\n        // above error does not contain any description hence not sent here\n        reject(\n          ErrorFactory.WebSocketConnectionErrors.FailedToConnect(HMSAction.JOIN, `Error opening websocket connection`),\n        );\n      };\n\n      this.onCloseHandler = (event: CloseEvent) => {\n        HMSLogger.w(`Websocket closed code=${event.code}`);\n        if (promiseSettled) {\n          this.setIsConnected(false, `code: ${event.code}${event.code !== 1000 ? ', unexpected websocket close' : ''}`);\n        } else {\n          promiseSettled = true;\n          reject(\n            ErrorFactory.WebSocketConnectionErrors.AbnormalClose(\n              HMSAction.JOIN,\n              `Error opening websocket connection - websocket closed unexpectedly with code=${event.code}`,\n            ),\n          );\n        }\n      };\n\n      this.socket.addEventListener('error', errorListener);\n\n      const openHandler = () => {\n        promiseSettled = true;\n        resolve();\n        this.setIsConnected(true);\n        this.id++;\n        this.socket?.removeEventListener('open', openHandler);\n        this.socket?.removeEventListener('error', errorListener);\n        this.pingPongLoop(this.id);\n      };\n\n      this.socket.addEventListener('open', openHandler);\n      this.socket.addEventListener('close', this.onCloseHandler);\n      this.socket.addEventListener('message', this.onMessageHandler);\n    });\n  }\n\n  async close(): Promise<void> {\n    window.removeEventListener('offline', this.offlineListener);\n    window.removeEventListener('online', this.onlineListener);\n\n    // For `1000` Refer: https://tools.ietf.org/html/rfc6455#section-7.4.1\n    if (this.socket) {\n      this.socket.close(1000, 'Normal Close');\n      this.setIsConnected(false, 'code: 1000, normal websocket close');\n      this.socket.removeEventListener('close', this.onCloseHandler);\n      this.socket.removeEventListener('message', this.onMessageHandler);\n    } else {\n      this.setIsConnected(false, 'websocket not connected yet');\n    }\n  }\n\n  async join(\n    name: string,\n    data: string,\n    disableVidAutoSub: boolean,\n    serverSubDegrade: boolean,\n    simulcast: boolean,\n    onDemandTracks: boolean,\n    offer?: RTCSessionDescriptionInit,\n  ): Promise<RTCSessionDescriptionInit & { sfu_node_id: string | undefined }> {\n    if (!this.isConnected) {\n      throw ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(\n        HMSAction.JOIN,\n        'Failed to send join over WS connection',\n      );\n    }\n    const params = {\n      name,\n      disableVidAutoSub,\n      data,\n      offer,\n      server_sub_degrade: serverSubDegrade,\n      simulcast,\n      onDemandTracks,\n    };\n    const response: RTCSessionDescriptionInit & { sfu_node_id: string | undefined } = await this.internalCall(\n      HMSSignalMethod.JOIN,\n      params,\n    );\n\n    this.isJoinCompleted = true;\n    this.pendingTrickle.forEach(({ target, candidate }) => this.trickle(target, candidate));\n    this.pendingTrickle.length = 0;\n\n    HMSLogger.d(this.TAG, `join: response=${JSON.stringify(response, null, 1)}`);\n    return response;\n  }\n\n  trickle(target: HMSConnectionRole, candidate: RTCIceCandidateInit) {\n    if (this.isJoinCompleted) {\n      this.notify(HMSSignalMethod.TRICKLE, { target, candidate, sfu_node_id: this.sfuNodeId });\n    } else {\n      this.pendingTrickle.push({ target, candidate });\n    }\n  }\n\n  async offer(desc: RTCSessionDescriptionInit, tracks: Map<string, any>): Promise<RTCSessionDescriptionInit> {\n    const response = await this.call(HMSSignalMethod.OFFER, {\n      desc,\n      tracks: Object.fromEntries(tracks),\n      sfu_node_id: this.sfuNodeId,\n    });\n    return response as RTCSessionDescriptionInit;\n  }\n\n  answer(desc: RTCSessionDescriptionInit) {\n    this.notify(HMSSignalMethod.ANSWER, { desc, sfu_node_id: this.sfuNodeId });\n  }\n\n  trackUpdate(tracks: Map<string, Track>) {\n    this.notify(HMSSignalMethod.TRACK_UPDATE, { tracks: Object.fromEntries(tracks) });\n  }\n\n  async broadcast(message: SendMessage) {\n    return await this.call<BroadcastResponse>(HMSSignalMethod.BROADCAST, message);\n  }\n\n  leave(reason: LEAVE_REASON) {\n    this.notify(HMSSignalMethod.LEAVE, { client_reason: reason });\n  }\n\n  async endRoom(lock: boolean, reason: string) {\n    await this.call(HMSSignalMethod.END_ROOM, { lock, reason });\n  }\n\n  sendEvent(event: AnalyticsEvent) {\n    if (!this.isConnected) {\n      throw Error(`${this.TAG} not connected. Could not send event ${event}`);\n    }\n    this.notify(HMSSignalMethod.ANALYTICS, event.toSignalParams());\n  }\n\n  ping(timeout: number): Promise<number> {\n    const pingTime = Date.now();\n    const timer: Promise<number> = new Promise(resolve => {\n      setTimeout(() => {\n        resolve(Date.now() - pingTime);\n      }, timeout + 1);\n    });\n    const pongTimeDiff = this.internalCall(HMSSignalMethod.PING, { timestamp: pingTime })\n      .then(() => Date.now() - pingTime)\n      .catch(() => Date.now() - pingTime);\n\n    return Promise.race([timer, pongTimeDiff]);\n  }\n\n  async requestRoleChange(params: RequestForRoleChangeParams) {\n    await this.call(HMSSignalMethod.ROLE_CHANGE_REQUEST, params);\n  }\n\n  async requestBulkRoleChange(params: RequestForBulkRoleChangeParams) {\n    await this.call(HMSSignalMethod.ROLE_CHANGE_REQUEST, params);\n  }\n\n  async acceptRoleChangeRequest(params: AcceptRoleChangeParams) {\n    await this.call(HMSSignalMethod.ROLE_CHANGE, params);\n  }\n\n  async requestTrackStateChange(params: TrackUpdateRequestParams) {\n    await this.call(HMSSignalMethod.TRACK_UPDATE_REQUEST, params);\n  }\n\n  async requestMultiTrackStateChange(params: MultiTrackUpdateRequestParams) {\n    await this.call(HMSSignalMethod.CHANGE_TRACK_MUTE_STATE_REQUEST, params);\n  }\n\n  async removePeer(params: RemovePeerRequest) {\n    await this.call(HMSSignalMethod.PEER_LEAVE_REQUEST, params);\n  }\n\n  async startRTMPOrRecording(params: StartRTMPOrRecordingRequestParams) {\n    await this.call(HMSSignalMethod.START_RTMP_OR_RECORDING_REQUEST, { ...params });\n  }\n\n  async stopRTMPAndRecording() {\n    await this.call(HMSSignalMethod.STOP_RTMP_AND_RECORDING_REQUEST, {});\n  }\n\n  async startHLSStreaming(params: HLSRequestParams): Promise<void> {\n    await this.call(HMSSignalMethod.START_HLS_STREAMING, { ...params });\n  }\n\n  async stopHLSStreaming(params?: HLSRequestParams): Promise<void> {\n    await this.call(HMSSignalMethod.STOP_HLS_STREAMING, { ...params });\n  }\n\n  async startTranscription(params: StartTranscriptionRequestParams) {\n    await this.call(HMSSignalMethod.START_TRANSCRIPTION, { ...params });\n  }\n\n  async stopTranscription(params: StartTranscriptionRequestParams) {\n    await this.call(HMSSignalMethod.STOP_TRANSCRIPTION, { ...params });\n  }\n\n  async sendHLSTimedMetadata(params?: HLSTimedMetadataParams): Promise<void> {\n    await this.call(HMSSignalMethod.HLS_TIMED_METADATA, { ...params });\n  }\n\n  async updatePeer(params: UpdatePeerRequestParams) {\n    await this.call(HMSSignalMethod.UPDATE_PEER_METADATA, { ...params });\n  }\n\n  async getPeer(params: GetPeerRequestParams): Promise<PeerNotificationInfo | undefined> {\n    return await this.call(HMSSignalMethod.GET_PEER, { ...params });\n  }\n\n  async joinGroup(name: string): Promise<JoinLeaveGroupResponse> {\n    return await this.call(HMSSignalMethod.GROUP_JOIN, { name });\n  }\n\n  async leaveGroup(name: string): Promise<JoinLeaveGroupResponse> {\n    return await this.call(HMSSignalMethod.GROUP_LEAVE, { name });\n  }\n\n  async addToGroup(peerId: string, name: string) {\n    await this.call(HMSSignalMethod.GROUP_ADD, { name, peer_id: peerId });\n  }\n\n  async removeFromGroup(peerId: string, name: string): Promise<void> {\n    await this.call(HMSSignalMethod.GROUP_REMOVE, { name, peer_id: peerId });\n  }\n\n  async peerIterNext(params: PeerIterRequestParams): Promise<PeersIterationResponse> {\n    return await this.call(HMSSignalMethod.PEER_ITER_NEXT, params);\n  }\n\n  async findPeers(params: FindPeersRequestParams): Promise<PeersIterationResponse> {\n    return await this.call(HMSSignalMethod.FIND_PEER, params);\n  }\n\n  async findPeerByName(params: FindPeerByNameRequestParams): Promise<FindPeerByNameResponse> {\n    return await this.call(HMSSignalMethod.SEARCH_BY_NAME, params);\n  }\n\n  setSessionMetadata(params: SetSessionMetadataParams) {\n    if (!this.isConnected) {\n      throw ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(\n        HMSAction.RECONNECT_SIGNAL,\n        'Failed to set session store value due to network disconnection',\n      );\n    }\n    return this.call<SetSessionMetadataResponse>(HMSSignalMethod.SET_METADATA, { ...params });\n  }\n\n  listenMetadataChange(keys: string[]): Promise<void> {\n    if (!this.isConnected) {\n      throw ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(\n        HMSAction.RECONNECT_SIGNAL,\n        'Failed to observe session store key due to network disconnection',\n      );\n    }\n    return this.call(HMSSignalMethod.LISTEN_METADATA_CHANGE, { keys });\n  }\n\n  getSessionMetadata(key?: string) {\n    if (!this.isConnected) {\n      throw ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(\n        HMSAction.RECONNECT_SIGNAL,\n        'Failed to set session store value due to network disconnection',\n      );\n    }\n    return this.call<GetSessionMetadataResponse>(HMSSignalMethod.GET_METADATA, { key });\n  }\n\n  setPollInfo(params: PollInfoSetParams) {\n    return this.call<PollInfoSetResponse>(HMSSignalMethod.POLL_INFO_SET, { ...params });\n  }\n\n  getPollInfo(params: PollInfoGetParams) {\n    return this.call<PollInfoGetResponse>(HMSSignalMethod.POLL_INFO_GET, { ...params });\n  }\n\n  setPollQuestions(params: PollQuestionsSetParams) {\n    return this.call<PollQuestionsSetResponse>(HMSSignalMethod.POLL_QUESTIONS_SET, { ...params });\n  }\n\n  startPoll(params: PollStartParams) {\n    return this.call<PollStartResponse>(HMSSignalMethod.POLL_START, { ...params });\n  }\n\n  stopPoll(params: PollStopParams) {\n    return this.call<PollStopResponse>(HMSSignalMethod.POLL_STOP, { ...params });\n  }\n\n  getPollQuestions(params: PollQuestionsGetParams): Promise<PollQuestionsGetResponse> {\n    return this.call<PollQuestionsGetResponse>(HMSSignalMethod.POLL_QUESTIONS_GET, { ...params });\n  }\n\n  setPollResponses(params: PollResponseSetParams): Promise<PollResponseSetResponse> {\n    return this.call<PollResponseSetResponse>(HMSSignalMethod.POLL_RESPONSE_SET, { ...params });\n  }\n\n  getPollResponses(params: PollResponsesGetParams): Promise<PollResponsesGetResponse> {\n    return this.call<PollResponsesGetResponse>(HMSSignalMethod.POLL_RESPONSES, { ...params });\n  }\n\n  getPollsList(params: PollListParams): Promise<PollListResponse> {\n    return this.call<PollListResponse>(HMSSignalMethod.POLL_LIST, { ...params });\n  }\n\n  getPollResult(params: PollResultParams): Promise<PollResultResponse> {\n    return this.call<PollResultResponse>(HMSSignalMethod.POLL_RESULT, { ...params });\n  }\n\n  createWhiteboard(params: HMSWhiteboardCreateOptions) {\n    this.validateConnection();\n    return this.call<CreateWhiteboardResponse>(HMSSignalMethod.WHITEBOARD_CREATE, { ...params });\n  }\n\n  getWhiteboard(params: { id: string; permission?: Array<HMSPermissionType> }) {\n    this.validateConnection();\n    return this.call<GetWhiteboardResponse>(HMSSignalMethod.WHITEBOARD_GET, { ...params });\n  }\n\n  fetchPollLeaderboard(params: PollLeaderboardGetParams): Promise<PollLeaderboardGetResponse> {\n    return this.call<PollLeaderboardGetResponse>(HMSSignalMethod.POLL_LEADERBOARD, { ...params });\n  }\n\n  private validateConnection() {\n    if (!this.isConnected) {\n      throw ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(\n        HMSAction.RECONNECT_SIGNAL,\n        'Failed to send message due to network disconnection',\n      );\n    }\n  }\n\n  private onMessageHandler(event: MessageEvent) {\n    const text: string = event.data;\n    const response = JSON.parse(text);\n    this.resolvePingOnAnyResponse();\n    if (response.id) {\n      this.handleResponseWithId(response);\n    } else if (response.method) {\n      this.handleResponseWithMethod(response);\n    } else {\n      throw Error(`WebSocket message has no 'method' or 'id' field, message=${response}`);\n    }\n  }\n\n  private handleResponseWithId(response: any) {\n    /** This is a response to [call] */\n    const typedResponse = response as JsonRpcResponse;\n    const id: string = typedResponse.id;\n    if (this.callbacks.has(id)) {\n      const cb = this.callbacks.get(id)!;\n      this.callbacks.delete(id);\n      if (typedResponse.result) {\n        cb.resolve(typedResponse.result);\n      } else {\n        cb.reject(typedResponse.error);\n      }\n    } else {\n      this.observer.onNotification(typedResponse);\n    }\n  }\n\n  private handleResponseWithMethod(response: any) {\n    switch (response.method) {\n      case HMSSignalMethod.OFFER:\n        this.observer.onOffer(response.params);\n        break;\n      case HMSSignalMethod.TRICKLE:\n        this.observer.onTrickle(response.params);\n        break;\n      case HMSSignalMethod.SERVER_ERROR:\n        this.observer.onServerError(\n          ErrorFactory.WebsocketMethodErrors.ServerErrors(\n            Number(response.params.code),\n            HMSSignalMethod.SERVER_ERROR,\n            response.params.message,\n          ),\n        );\n        break;\n      case HMSSignalMethod.SERVER_WARNING:\n        HMSLogger.w(this.TAG, response.params);\n        break;\n      default:\n        this.observer.onNotification(response);\n        break;\n    }\n  }\n\n  private resolvePingOnAnyResponse = () => {\n    this.callbacks.forEach((callback, key) => {\n      if (callback.metadata?.method === HMSSignalMethod.PING) {\n        //@ts-ignore\n        callback.resolve({ timestamp: Date.now() });\n        this.callbacks.delete(key);\n      }\n    });\n  };\n\n  private rejectPendingCalls(reason = '') {\n    this.callbacks.forEach((callback, id) => {\n      if (callback.metadata?.method !== HMSSignalMethod.PING) {\n        HMSLogger.e(this.TAG, `rejecting pending callback ${callback.metadata?.method}, id=${id}`);\n        callback.reject(\n          ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(\n            callback.metadata?.method\n              ? convertSignalMethodtoErrorAction(callback.metadata?.method)\n              : HMSAction.RECONNECT_SIGNAL,\n            reason,\n          ),\n        );\n        this.callbacks.delete(id);\n      }\n    });\n  }\n\n  private async pingPongLoop(id: number) {\n    const pingTimeout = window.HMS?.PING_TIMEOUT || DEFAULT_SIGNAL_PING_TIMEOUT;\n    if (this.isConnected) {\n      const pongTimeDiff = await this.ping(pingTimeout);\n      this.pongResponseTimes.enqueue(pongTimeDiff);\n      if (pongTimeDiff > pingTimeout) {\n        HMSLogger.d(this.TAG, `Pong timeout ${id}, pageHidden=${isPageHidden()}`);\n        if (this.id === id) {\n          this.setIsConnected(false, 'ping pong failure');\n        }\n      } else {\n        setTimeout(() => this.pingPongLoop(id), window.HMS?.PING_INTERVAL || DEFAULT_SIGNAL_PING_INTERVAL);\n      }\n    }\n  }\n\n  private async call<T>(method: HMSSignalMethod, params: Record<string, any>): Promise<T> {\n    const MAX_RETRIES = 3;\n    let error: HMSException = ErrorFactory.WebsocketMethodErrors.ServerErrors(500, method, `Default ${method} error`);\n    let retry;\n    for (retry = 1; retry <= MAX_RETRIES; retry++) {\n      try {\n        this.validateConnection();\n        HMSLogger.d(this.TAG, `Try number ${retry} sending ${method}`, params);\n        return await this.internalCall(method, params);\n      } catch (err) {\n        error = err as HMSException;\n        HMSLogger.e(this.TAG, `Failed sending ${method} try: ${retry}`, { method, params, error });\n        // 1003 is websocket disconnect - could be because you are offline - retry with delay in this case as well\n        const shouldRetry = parseInt(`${error.code / 100}`) === 5 || error.code === 429 || error.code === 1003;\n        if (!shouldRetry) {\n          break;\n        }\n\n        const delay = (2 + Math.random() * 2) * 1000;\n        await workerSleep(delay);\n      }\n    }\n    HMSLogger.e(`Sending ${method} over WS failed after ${Math.min(retry, MAX_RETRIES)} retries`, {\n      method,\n      params,\n      error,\n    });\n    throw error;\n  }\n\n  private offlineListener = () => {\n    HMSLogger.d(this.TAG, 'Window network offline');\n    this.setIsConnected(false, 'Window network offline');\n  };\n\n  private onlineListener = () => {\n    HMSLogger.d(this.TAG, 'Window network online');\n    this.observer.onNetworkOnline();\n  };\n}\n","// @ts-nocheck\nimport { isBrowser } from './support';\n\nexport const getNetworkInfo = () => {\n  if (!isBrowser || typeof navigator.connection === 'undefined') {\n    return;\n  }\n\n  const connection = navigator.connection;\n  const networkInfo = {\n    downlink: connection.downlink,\n    downlinkMax: connection.downlinkMax,\n    effectiveType: connection.effectiveType,\n    rtt: connection.rtt,\n    saveData: connection.saveData,\n    type: connection.type,\n  };\n  return networkInfo;\n};\n","import { JoinParameters } from './models/JoinParameters';\nimport { TransportFailureCategory } from './models/TransportFailureCategory';\nimport { TransportState } from './models/TransportState';\nimport ITransportObserver from './ITransportObserver';\nimport { RetryScheduler } from './RetryScheduler';\nimport { AdditionalAnalyticsProperties } from '../analytics/AdditionalAnalyticsProperties';\nimport AnalyticsEvent from '../analytics/AnalyticsEvent';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { AnalyticsEventsService } from '../analytics/AnalyticsEventsService';\nimport { AnalyticsTimer, TimedEvent } from '../analytics/AnalyticsTimer';\nimport { HTTPAnalyticsTransport } from '../analytics/HTTPAnalyticsTransport';\nimport { SignalAnalyticsTransport } from '../analytics/signal-transport/SignalAnalyticsTransport';\nimport { PublishStatsAnalytics, SubscribeStatsAnalytics } from '../analytics/stats';\nimport { PluginUsageTracker } from '../common/PluginUsageTracker';\nimport { HMSConnectionRole, HMSTrickle } from '../connection/model';\nimport { IPublishConnectionObserver } from '../connection/publish/IPublishConnectionObserver';\nimport HMSPublishConnection from '../connection/publish/publishConnection';\nimport ISubscribeConnectionObserver from '../connection/subscribe/ISubscribeConnectionObserver';\nimport HMSSubscribeConnection from '../connection/subscribe/subscribeConnection';\nimport { DeviceManager } from '../device-manager';\nimport { HMSDiagnosticsConnectivityListener } from '../diagnostics/interfaces';\nimport { ErrorCodes } from '../error/ErrorCodes';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { HMSException } from '../error/HMSException';\nimport { EventBus } from '../events/EventBus';\nimport { HMSICEServer, HMSRole, HMSTrackUpdate, HMSUpdateListener } from '../interfaces';\nimport { HMSLocalStream } from '../media/streams/HMSLocalStream';\nimport { HMSLocalTrack, HMSLocalVideoTrack, HMSTrack } from '../media/tracks';\nimport { TrackState } from '../notification-manager';\nimport { HMSWebrtcInternals } from '../rtc-stats/HMSWebrtcInternals';\nimport { Store } from '../sdk/store';\nimport InitService from '../signal/init';\nimport { InitConfig, InitFlags } from '../signal/init/models';\nimport { ISignalEventsObserver } from '../signal/ISignalEventsObserver';\nimport JsonRpcSignal from '../signal/jsonrpc';\nimport {\n  ICE_DISCONNECTION_TIMEOUT,\n  LEAVE_REASON,\n  PROTOCOL_SPEC,\n  PROTOCOL_VERSION,\n  PUBLISH_STATS_PUSH_INTERVAL,\n  PUBLISH_STATS_SAMPLE_WINDOW,\n  RENEGOTIATION_CALLBACK_ID,\n  SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID,\n  SUBSCRIBE_STATS_PUSH_INTERVAL,\n  SUBSCRIBE_STATS_SAMPLE_WINDOW,\n  SUBSCRIBE_TIMEOUT,\n} from '../utils/constants';\nimport HMSLogger from '../utils/logger';\nimport { getNetworkInfo } from '../utils/network-info';\nimport { PromiseCallbacks } from '../utils/promise';\n\nconst TAG = '[HMSTransport]:';\n\n// @DISCUSS: action and extra are not used at all.\ninterface CallbackTriple {\n  promise: PromiseCallbacks<boolean>;\n  action: HMSAction;\n  extra: any;\n}\n\ninterface NegotiateJoinParams {\n  name: string;\n  data: string;\n  autoSubscribeVideo: boolean;\n}\n\nexport default class HMSTransport {\n  private state: TransportState = TransportState.Disconnected;\n  private trackStates: Map<string, TrackState> = new Map();\n  private publishConnection: HMSPublishConnection | null = null;\n  private subscribeConnection: HMSSubscribeConnection | null = null;\n  private initConfig?: InitConfig;\n  private endpoint!: string;\n  private joinParameters?: JoinParameters;\n  private retryScheduler: RetryScheduler;\n  private webrtcInternals?: HMSWebrtcInternals;\n  private publishStatsAnalytics?: PublishStatsAnalytics;\n  private subscribeStatsAnalytics?: SubscribeStatsAnalytics;\n  private maxSubscribeBitrate = 0;\n  private connectivityListener?: HMSDiagnosticsConnectivityListener;\n  private sfuNodeId?: string;\n  joinRetryCount = 0;\n  private publishDisconnectTimer = 0;\n  private listener?: HMSUpdateListener;\n  private onScreenshareStop = () => {};\n  private screenStream = new Set<MediaStream>();\n\n  constructor(\n    private observer: ITransportObserver,\n    private deviceManager: DeviceManager,\n    private store: Store,\n    private eventBus: EventBus,\n    private analyticsEventsService: AnalyticsEventsService,\n    private analyticsTimer: AnalyticsTimer,\n    private pluginUsageTracker: PluginUsageTracker,\n  ) {\n    this.webrtcInternals = new HMSWebrtcInternals(this.store, this.eventBus);\n\n    const onStateChange = async (state: TransportState, error?: HMSException) => {\n      if (state !== this.state) {\n        this.state = state;\n        await this.observer.onStateChange(this.state, error);\n      }\n    };\n    this.retryScheduler = new RetryScheduler(onStateChange, this.sendErrorAnalyticsEvent.bind(this));\n\n    this.eventBus.statsUpdate.subscribe(stats => {\n      const currentSubscribeBitrate = stats.getLocalPeerStats()?.subscribe?.bitrate || 0;\n      this.maxSubscribeBitrate = Math.max(this.maxSubscribeBitrate, currentSubscribeBitrate);\n    });\n\n    this.eventBus.localAudioEnabled.subscribe(({ track, enabled }) => this.trackUpdate(track, enabled));\n    this.eventBus.localVideoEnabled.subscribe(({ track, enabled }) => this.trackUpdate(track, enabled));\n  }\n\n  /**\n   * Map of callbacks used to wait for an event to fire.\n   * Used here for:\n   *  1. publish/unpublish waits for [IPublishConnectionObserver.onRenegotiationNeeded] to complete\n   */\n  private readonly callbacks = new Map<string, CallbackTriple>();\n\n  setListener = (listener: HMSUpdateListener) => {\n    this.listener = listener;\n  };\n\n  setOnScreenshareStop = (onStop: () => void) => {\n    this.onScreenshareStop = onStop;\n  };\n\n  getWebsocketEndpoint(): string | undefined {\n    if (!this.initConfig) {\n      return;\n    }\n    return this.initConfig.endpoint;\n  }\n\n  private signalObserver: ISignalEventsObserver = {\n    // eslint-disable-next-line complexity\n    onOffer: async (jsep: RTCSessionDescriptionInit & { sfu_node_id?: string }) => {\n      try {\n        if (!this.subscribeConnection) {\n          return;\n        }\n        if (\n          jsep.sfu_node_id &&\n          this.subscribeConnection.sfuNodeId &&\n          this.subscribeConnection.sfuNodeId !== jsep.sfu_node_id\n        ) {\n          HMSLogger.d(TAG, 'ignoring old offer');\n          return;\n        }\n        await this.subscribeConnection.setRemoteDescription(jsep);\n        HMSLogger.d(\n          TAG,\n          `[SUBSCRIBE] Adding ${this.subscribeConnection.candidates.length} ice-candidates`,\n          this.subscribeConnection.candidates,\n        );\n        for (const candidate of this.subscribeConnection.candidates) {\n          await this.subscribeConnection.addIceCandidate(candidate);\n        }\n        this.subscribeConnection.candidates.length = 0;\n        const answer = await this.subscribeConnection.createAnswer();\n        await this.subscribeConnection.setLocalDescription(answer);\n        this.signal.answer(answer);\n        HMSLogger.d(TAG, '[role=SUBSCRIBE] onOffer renegotiation DONE ✅');\n      } catch (err) {\n        HMSLogger.d(TAG, '[role=SUBSCRIBE] onOffer renegotiation FAILED ❌', err);\n        this.state = TransportState.Failed;\n        let ex: HMSException;\n        if (err instanceof HMSException) {\n          ex = err;\n        } else {\n          ex = ErrorFactory.GenericErrors.Unknown(HMSAction.SUBSCRIBE, (err as Error).message);\n        }\n        this.observer.onFailure(ex);\n        this.eventBus.analytics.publish(AnalyticsEventFactory.subscribeFail(ex));\n      }\n    },\n\n    onTrickle: async (trickle: HMSTrickle) => {\n      const connection =\n        trickle.target === HMSConnectionRole.Publish ? this.publishConnection : this.subscribeConnection;\n      if (!connection?.remoteDescription) {\n        // ICE candidates can't be added without any remote session description\n        connection?.candidates.push(trickle.candidate);\n      } else {\n        await connection.addIceCandidate(trickle.candidate);\n      }\n    },\n\n    onNotification: (message: any) => this.observer.onNotification(message),\n\n    onServerError: async (error: HMSException) => {\n      await this.observer.onStateChange(TransportState.Failed, error);\n    },\n\n    onFailure: (error: HMSException) => {\n      // @DISCUSS: Should we remove this? Pong failure would have already scheduled signal retry.\n      if (this.joinParameters) {\n        this.retryScheduler.schedule({\n          category: TransportFailureCategory.SignalDisconnect,\n          error,\n          task: this.retrySignalDisconnectTask,\n          originalState: this.state,\n        });\n      }\n    },\n\n    onOffline: async (reason: string) => {\n      HMSLogger.d(TAG, 'socket offline', TransportState[this.state]);\n      try {\n        if (this.state !== TransportState.Leaving && this.joinParameters) {\n          this.retryScheduler.schedule({\n            category: TransportFailureCategory.SignalDisconnect,\n            error: ErrorFactory.WebSocketConnectionErrors.WebSocketConnectionLost(HMSAction.RECONNECT_SIGNAL, reason),\n            task: this.retrySignalDisconnectTask,\n            originalState: this.state,\n          });\n        }\n      } catch (e) {\n        console.error(e);\n      }\n    },\n\n    // this is called when socket connection is successful\n    onOnline: () => {\n      HMSLogger.d(TAG, 'socket online', TransportState[this.state]);\n      this.analyticsSignalTransport.flushFailedEvents(this.store.getLocalPeer()?.peerId);\n    },\n    // this is called when window.online event is triggered\n    onNetworkOnline: () => {\n      this.analyticsEventsService.flushFailedClientEvents();\n    },\n  };\n\n  public readonly signal = new JsonRpcSignal(this.signalObserver);\n  private analyticsSignalTransport = new SignalAnalyticsTransport(this.signal);\n\n  private publishDtlsStateTimer = 0;\n  private lastPublishDtlsState: RTCDtlsTransportState = 'new';\n\n  getWebrtcInternals() {\n    return this.webrtcInternals;\n  }\n\n  isFlagEnabled(flag: InitFlags) {\n    const config = this.initConfig?.config;\n    const flags = config?.enabledFlags || [];\n    return flags.includes(flag);\n  }\n\n  setConnectivityListener(listener: HMSDiagnosticsConnectivityListener) {\n    this.connectivityListener = listener;\n  }\n\n  async preview(\n    token: string,\n    endpoint: string,\n    peerId: string,\n    customData: { name: string; metaData: string },\n    autoSubscribeVideo = false,\n    iceServers?: HMSICEServer[],\n  ): Promise<InitConfig | void> {\n    const initConfig = await this.connect(token, endpoint, peerId, customData, autoSubscribeVideo, iceServers);\n    this.state = TransportState.Preview;\n    this.observer.onStateChange(this.state);\n    return initConfig;\n  }\n\n  async join(\n    authToken: string,\n    peerId: string,\n    customData: { name: string; metaData: string },\n    initEndpoint: string,\n    autoSubscribeVideo = false,\n    iceServers?: HMSICEServer[],\n  ): Promise<void> {\n    HMSLogger.d(TAG, 'join: started ⏰');\n    try {\n      if (!this.signal.isConnected || !this.initConfig) {\n        await this.connect(authToken, initEndpoint, peerId, customData, autoSubscribeVideo, iceServers);\n      }\n\n      this.validateNotDisconnected('connect');\n\n      if (this.initConfig) {\n        await this.waitForLocalRoleAvailability();\n        await this.createConnectionsAndNegotiateJoin(customData, autoSubscribeVideo);\n        this.initStatsAnalytics();\n\n        HMSLogger.d(TAG, '✅ join: Negotiated over PUBLISH connection');\n      }\n    } catch (error) {\n      HMSLogger.e(TAG, `join: failed ❌ [token=${authToken}]`, error);\n      this.state = TransportState.Failed;\n      const ex = error as HMSException;\n      // set isTerminal to true if not already when error code is 500(internal biz server error)\n      ex.isTerminal = ex.isTerminal || ex.code === 500;\n      await this.observer.onStateChange(this.state, ex);\n      throw ex;\n    }\n\n    HMSLogger.d(TAG, '✅ join: successful');\n    this.state = TransportState.Joined;\n    this.observer.onStateChange(this.state);\n  }\n\n  async connect(\n    token: string,\n    endpoint: string,\n    peerId: string,\n    customData: { name: string; metaData: string },\n    autoSubscribeVideo = false,\n    iceServers?: HMSICEServer[],\n  ): Promise<InitConfig | void> {\n    this.setTransportStateForConnect();\n    this.joinParameters = new JoinParameters(\n      token,\n      peerId,\n      customData.name,\n      customData.metaData,\n      endpoint,\n      autoSubscribeVideo,\n      iceServers,\n    );\n    try {\n      const response = await this.internalConnect(token, endpoint, peerId, iceServers);\n      return response;\n    } catch (error) {\n      const shouldRetry =\n        error instanceof HMSException &&\n        ([\n          ErrorCodes.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST,\n          ErrorCodes.WebSocketConnectionErrors.FAILED_TO_CONNECT,\n          ErrorCodes.WebSocketConnectionErrors.ABNORMAL_CLOSE,\n          ErrorCodes.APIErrors.ENDPOINT_UNREACHABLE,\n        ].includes(error.code) ||\n          error.code.toString().startsWith('5') ||\n          error.code.toString().startsWith('429'));\n\n      if (shouldRetry) {\n        const task = async () => {\n          await this.internalConnect(token, endpoint, peerId, iceServers);\n          return Boolean(this.initConfig && this.initConfig.endpoint);\n        };\n\n        await this.retryScheduler.schedule({\n          category: TransportFailureCategory.ConnectFailed,\n          error,\n          task,\n          originalState: this.state,\n          changeState: false,\n        });\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  async leave(notifyServer: boolean, reason = LEAVE_REASON.USER_REQUEST): Promise<void> {\n    this.retryScheduler.reset();\n    this.joinParameters = undefined;\n    HMSLogger.d(TAG, 'leaving in transport');\n    try {\n      const usage = this.pluginUsageTracker.getPluginUsage('HMSKrispPlugin');\n      if (usage) {\n        this.eventBus.analytics.publish(AnalyticsEventFactory.getKrispUsage(usage));\n      }\n      this.state = TransportState.Leaving;\n      this.publishStatsAnalytics?.stop();\n      this.subscribeStatsAnalytics?.stop();\n      this.webrtcInternals?.cleanup();\n      this.clearPeerConnections();\n      if (notifyServer) {\n        try {\n          this.signal.leave(reason);\n          HMSLogger.d(TAG, 'signal leave done');\n        } catch (err) {\n          HMSLogger.w(TAG, 'failed to send leave on websocket to server', err);\n        }\n      }\n      this.analyticsEventsService.flushFailedClientEvents();\n      this.analyticsEventsService.reset();\n      await this.signal.close();\n    } catch (err) {\n      this.eventBus.analytics.publish(AnalyticsEventFactory.disconnect(err as Error));\n      HMSLogger.e(TAG, 'leave: FAILED ❌', err);\n    } finally {\n      this.state = TransportState.Disconnected;\n      this.observer.onStateChange(this.state);\n    }\n  }\n\n  handleLocalRoleUpdate = async ({ oldRole, newRole }: { oldRole: HMSRole; newRole: HMSRole }) => {\n    const changedFromNonWebRTCToWebRTC = !this.doesRoleNeedWebRTC(oldRole) && this.doesRoleNeedWebRTC(newRole);\n    if (!changedFromNonWebRTCToWebRTC) {\n      return;\n    }\n\n    HMSLogger.d(\n      TAG,\n      'Local peer role updated to webrtc role, creating PeerConnections and performing inital publish negotiation ⏳',\n    );\n    this.createPeerConnections();\n    await this.negotiateOnFirstPublish();\n  };\n\n  async publish(tracks: Array<HMSLocalTrack>): Promise<void> {\n    for (const track of tracks) {\n      try {\n        await this.publishTrack(track);\n        this.connectivityListener?.onMediaPublished(track);\n      } catch (error) {\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.publish({\n            devices: this.deviceManager.getDevices(),\n            error: error as Error,\n          }),\n        );\n      }\n    }\n  }\n\n  async unpublish(tracks: Array<HMSLocalTrack>): Promise<void> {\n    for (const track of tracks) {\n      await this.unpublishTrack(track);\n    }\n  }\n\n  setSFUNodeId(id?: string) {\n    this.signal.setSfuNodeId(id);\n    if (!this.sfuNodeId) {\n      this.sfuNodeId = id;\n      this.publishConnection?.setSfuNodeId(id);\n      this.subscribeConnection?.setSfuNodeId(id);\n    } else if (id && this.sfuNodeId !== id) {\n      this.sfuNodeId = id;\n      this.handleSFUMigration();\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  async handleSFUMigration() {\n    HMSLogger.time('sfu migration');\n    this.clearPeerConnections();\n    const peers = this.store.getPeerMap();\n    this.store.removeRemoteTracks();\n    for (const peerId in peers) {\n      const peer = peers[peerId];\n      if (peer.isLocal) {\n        continue;\n      }\n      peer.audioTrack = undefined;\n      peer.videoTrack = undefined;\n      peer.auxiliaryTracks = [];\n    }\n\n    const localPeer = this.store.getLocalPeer();\n    if (!localPeer) {\n      return;\n    }\n    this.createPeerConnections();\n    this.trackStates.clear();\n    await this.negotiateOnFirstPublish();\n    const streamMap = new Map<string, HMSLocalStream>();\n    if (localPeer.audioTrack) {\n      const stream = localPeer.audioTrack.stream as HMSLocalStream;\n      if (!streamMap.get(stream.id)) {\n        streamMap.set(stream.id, new HMSLocalStream(new MediaStream()));\n      }\n      const newTrack = localPeer.audioTrack.clone(streamMap.get(stream.id)!);\n      this.store.removeTrack(localPeer.audioTrack);\n      localPeer.audioTrack.cleanup();\n      await this.publishTrack(newTrack);\n      localPeer.audioTrack = newTrack;\n    }\n\n    if (localPeer.videoTrack) {\n      const stream = localPeer.videoTrack.stream as HMSLocalStream;\n      if (!streamMap.get(stream.id)) {\n        streamMap.set(stream.id, new HMSLocalStream(new MediaStream()));\n      }\n      this.store.removeTrack(localPeer.videoTrack);\n      const newTrack = localPeer.videoTrack.clone(streamMap.get(stream.id)!);\n      localPeer.videoTrack.cleanup();\n      await this.publishTrack(newTrack);\n      localPeer.videoTrack = newTrack;\n    }\n\n    const auxTracks = [];\n    while (localPeer.auxiliaryTracks.length > 0) {\n      const track = localPeer.auxiliaryTracks.shift();\n      if (track) {\n        const stream = track.stream as HMSLocalStream;\n        if (!streamMap.get(stream.id)) {\n          /**\n           *  For screenshare, you need to clone the current stream only, cloning the track will not work otherwise, it will have all\n           *  correct states but bytes sent and all other stats would be 0\n           **/\n          streamMap.set(\n            stream.id,\n            new HMSLocalStream(track.source === 'screen' ? stream.nativeStream.clone() : new MediaStream()),\n          );\n        }\n        this.store.removeTrack(track);\n        const newTrack = track.clone(streamMap.get(stream.id)!);\n        if (newTrack.type === 'video' && newTrack.source === 'screen') {\n          /**\n           * Store all the stream so they can be stopped when screenshare stopped. Stopping before is not helping\n           */\n          this.screenStream.add(stream.nativeStream);\n          this.screenStream.add(newTrack.stream.nativeStream);\n          newTrack.nativeTrack.addEventListener('ended', this.onScreenshareStop);\n        }\n        track.cleanup();\n        await this.publishTrack(newTrack);\n        auxTracks.push(newTrack);\n      }\n    }\n    localPeer.auxiliaryTracks = auxTracks;\n    streamMap.clear();\n    this.listener?.onSFUMigration?.();\n    HMSLogger.timeEnd('sfu migration');\n  }\n\n  /**\n   * TODO: check if track.publishedTrackId be used instead of the hack to match with track with same type and\n   * source. The hack won't work if there are multiple tracks with same source and type.\n   */\n  trackUpdate(track: HMSLocalTrack, enabled: boolean) {\n    const currentTrackStates = Array.from(this.trackStates.values());\n    const originalTrackState = currentTrackStates.find(\n      trackState => track.type === trackState.type && track.source === trackState.source,\n    );\n    /**\n     * on call interruption, we just send disabled track update to biz to send to remote peers WITHOUT sending to the local peer\n     * in this case, track.enabled would still be true which is why we are using the value from the localVideoEnabled event\n     *  */\n    if (originalTrackState) {\n      const newTrackState = new TrackState({\n        ...originalTrackState,\n        mute: !enabled,\n      });\n      this.trackStates.set(originalTrackState.track_id, newTrackState);\n      HMSLogger.d(TAG, 'Track Update', this.trackStates, track);\n      this.signal.trackUpdate(new Map([[originalTrackState.track_id, newTrackState]]));\n      const peer = this.store.getLocalPeer();\n      // don't send update in case of call interruption\n      if (peer && enabled === track.enabled) {\n        this.listener?.onTrackUpdate(enabled ? HMSTrackUpdate.TRACK_UNMUTED : HMSTrackUpdate.TRACK_MUTED, track, peer);\n      }\n    }\n  }\n\n  private async publishTrack(track: HMSLocalTrack): Promise<void> {\n    track.publishedTrackId = track.getTrackIDBeingSent();\n    HMSLogger.d(\n      TAG,\n      `⏳ publishTrack: trackId=${track.trackId}, toPublishTrackId=${track.publishedTrackId}`,\n      `${track}`,\n    );\n    this.trackStates.set(track.publishedTrackId, new TrackState(track));\n    const p = new Promise<boolean>((resolve, reject) => {\n      this.callbacks.set(RENEGOTIATION_CALLBACK_ID, {\n        promise: { resolve, reject },\n        action: HMSAction.PUBLISH,\n        extra: {},\n      });\n    });\n    const stream = track.stream as HMSLocalStream;\n    stream.setConnection(this.publishConnection!);\n    const simulcastLayers = this.store.getSimulcastLayers(track.source!);\n    stream.addTransceiver(track, simulcastLayers);\n    HMSLogger.time(`publish-${track.trackId}-${track.type}`);\n    await p;\n    HMSLogger.timeEnd(`publish-${track.trackId}-${track.type}`);\n    // add track to store after publish\n    this.store.addTrack(track);\n\n    await stream\n      .setMaxBitrateAndFramerate(track)\n      .then(() => {\n        HMSLogger.d(\n          TAG,\n          `Setting maxBitrate=${track.settings.maxBitrate} kpbs${\n            track instanceof HMSLocalVideoTrack ? ` and maxFramerate=${track.settings.maxFramerate}` : ''\n          } for ${track.source} ${track.type} ${track.trackId}`,\n        );\n      })\n      .catch(error => HMSLogger.w(TAG, 'Failed setting maxBitrate and maxFramerate', error));\n\n    track.isPublished = true;\n\n    HMSLogger.d(TAG, `✅ publishTrack: trackId=${track.trackId}`, `${track}`, this.callbacks);\n  }\n\n  private async unpublishTrack(track: HMSLocalTrack): Promise<void> {\n    HMSLogger.d(TAG, `⏳ unpublishTrack: trackId=${track.trackId}`, `${track}`);\n    if (track.publishedTrackId && this.trackStates.has(track.publishedTrackId)) {\n      this.trackStates.delete(track.publishedTrackId);\n    } else {\n      // TODO: hotfix to unpublish replaced video track id, solve it properly\n      // it won't work when there are multiple regular video tracks, hmslocalvideotrack can store\n      // the original initial track id for a proper fix\n      const currentTrackStates = Array.from(this.trackStates.values());\n      const originalTrackState = currentTrackStates.find(\n        trackState => track.type === trackState.type && track.source === trackState.source,\n      );\n      if (originalTrackState) {\n        this.trackStates.delete(originalTrackState.track_id);\n      }\n    }\n    const p = new Promise<boolean>((resolve, reject) => {\n      this.callbacks.set(RENEGOTIATION_CALLBACK_ID, {\n        promise: { resolve, reject },\n        action: HMSAction.UNPUBLISH,\n        extra: {},\n      });\n    });\n    const stream = track.stream as HMSLocalStream;\n    stream.removeSender(track);\n    await p;\n    await track.cleanup();\n    if (track.source === 'screen' && this.screenStream) {\n      // stop older screenshare tracks to remove the screenshare banner\n      this.screenStream.forEach(stream => {\n        stream.getTracks().forEach(_track => {\n          _track.stop();\n        });\n        this.screenStream.delete(stream);\n      });\n    }\n    // remove track from store on unpublish\n    this.store.removeTrack(track);\n    HMSLogger.d(TAG, `✅ unpublishTrack: trackId=${track.trackId}`, this.callbacks);\n  }\n\n  private async clearPeerConnections() {\n    clearTimeout(this.publishDtlsStateTimer);\n    this.publishDtlsStateTimer = 0;\n    clearTimeout(this.publishDisconnectTimer);\n    this.publishDisconnectTimer = 0;\n    this.lastPublishDtlsState = 'new';\n    this.publishConnection?.close();\n    this.subscribeConnection?.close();\n    this.publishConnection = null;\n    this.subscribeConnection = null;\n  }\n\n  private waitForLocalRoleAvailability() {\n    if (this.store.hasRoleDetailsArrived()) {\n      return;\n    } else {\n      return new Promise<void>(resolve => {\n        this.eventBus.policyChange.subscribeOnce(() => resolve());\n      });\n    }\n  }\n\n  private async createConnectionsAndNegotiateJoin(\n    customData: { name: string; metaData: string },\n    autoSubscribeVideo = false,\n  ) {\n    const isWebRTC = this.doesLocalPeerNeedWebRTC();\n    if (isWebRTC) {\n      this.createPeerConnections();\n    }\n\n    this.analyticsTimer.start(TimedEvent.JOIN_RESPONSE);\n    await this.negotiateJoinWithRetry({\n      name: customData.name,\n      data: customData.metaData,\n      autoSubscribeVideo,\n      isWebRTC,\n    });\n    this.analyticsTimer.end(TimedEvent.JOIN_RESPONSE);\n  }\n\n  private createPeerConnections() {\n    const logConnectionState = (\n      role: HMSConnectionRole,\n      newState: RTCIceConnectionState | RTCPeerConnectionState,\n      ice = false,\n    ) => {\n      const log = ['disconnected', 'failed'].includes(newState)\n        ? HMSLogger.w.bind(HMSLogger)\n        : HMSLogger.d.bind(HMSLogger);\n\n      log(TAG, `${HMSConnectionRole[role]} ${ice ? 'ice' : ''} connection state change: ${newState}`);\n    };\n    if (this.initConfig) {\n      const publishConnectionObserver: IPublishConnectionObserver = {\n        onRenegotiationNeeded: async () => {\n          await this.performPublishRenegotiation();\n        },\n\n        // eslint-disable-next-line complexity\n        onDTLSTransportStateChange: (state?: RTCDtlsTransportState) => {\n          const log = state === 'failed' ? HMSLogger.w.bind(HMSLogger) : HMSLogger.d.bind(HMSLogger);\n          log(TAG, `Publisher on dtls transport state change: ${state}`);\n\n          if (!state || this.lastPublishDtlsState === state) {\n            return;\n          }\n\n          this.lastPublishDtlsState = state;\n          if (this.publishDtlsStateTimer !== 0) {\n            clearTimeout(this.publishDtlsStateTimer);\n            this.publishDtlsStateTimer = 0;\n          }\n\n          if (state !== 'connecting' && state !== 'failed') {\n            return;\n          }\n\n          const timeout = this.initConfig?.config?.dtlsStateTimeouts?.[state];\n          if (!timeout || timeout <= 0) {\n            return;\n          }\n\n          // if we're in connecting check again after timeout\n          // hotfix: mitigate https://100ms.atlassian.net/browse/LIVE-1924\n          this.publishDtlsStateTimer = window.setTimeout(() => {\n            const newState = this.publishConnection?.nativeConnection.connectionState;\n            if (newState && state && newState === state) {\n              // stuck in either `connecting` or `failed` state for long time\n              const err = ErrorFactory.WebrtcErrors.ICEFailure(\n                HMSAction.PUBLISH,\n                `DTLS transport state ${state} timeout:${timeout}ms`,\n                true,\n              );\n              this.eventBus.analytics.publish(AnalyticsEventFactory.disconnect(err));\n              this.observer.onFailure(err);\n            }\n          }, timeout);\n        },\n\n        onDTLSTransportError: (error: Error) => {\n          HMSLogger.e(TAG, `onDTLSTransportError ${error.name} ${error.message}`, error);\n          this.eventBus.analytics.publish(AnalyticsEventFactory.disconnect(error));\n        },\n\n        onIceConnectionChange: async (newState: RTCIceConnectionState) => {\n          logConnectionState(HMSConnectionRole.Publish, newState, true);\n        },\n\n        onConnectionStateChange: async (newState: RTCPeerConnectionState) => {\n          logConnectionState(HMSConnectionRole.Publish, newState, false);\n          if (newState === 'new') {\n            return;\n          }\n\n          if (newState === 'connected') {\n            this.connectivityListener?.onICESuccess(true);\n            this.publishConnection?.handleSelectedIceCandidatePairs();\n          } else if (newState === 'failed') {\n            await this.handleIceConnectionFailure(\n              HMSConnectionRole.Publish,\n              ErrorFactory.WebrtcErrors.ICEFailure(\n                HMSAction.PUBLISH,\n                `local candidate - ${this.publishConnection?.selectedCandidatePair?.local?.candidate}; remote candidate - ${this.publishConnection?.selectedCandidatePair?.remote?.candidate}`,\n              ),\n            );\n          } else {\n            this.publishDisconnectTimer = window.setTimeout(() => {\n              if (this.publishConnection?.connectionState !== 'connected') {\n                this.handleIceConnectionFailure(\n                  HMSConnectionRole.Publish,\n                  ErrorFactory.WebrtcErrors.ICEDisconnected(\n                    HMSAction.PUBLISH,\n                    `local candidate - ${this.publishConnection?.selectedCandidatePair?.local?.candidate}; remote candidate - ${this.publishConnection?.selectedCandidatePair?.remote?.candidate}`,\n                  ),\n                );\n              }\n            }, ICE_DISCONNECTION_TIMEOUT);\n          }\n        },\n\n        onIceCandidate: candidate => {\n          this.connectivityListener?.onICECandidate(candidate, true);\n        },\n\n        onSelectedCandidatePairChange: candidatePair => {\n          this.connectivityListener?.onSelectedICECandidatePairChange(candidatePair, true);\n        },\n      };\n\n      const subscribeConnectionObserver: ISubscribeConnectionObserver = {\n        onApiChannelMessage: (message: string) => {\n          this.observer.onNotification(JSON.parse(message));\n        },\n\n        onTrackAdd: (track: HMSTrack) => {\n          HMSLogger.d(TAG, '[Subscribe] onTrackAdd', `${track}`);\n          this.observer.onTrackAdd(track);\n        },\n\n        onTrackRemove: (track: HMSTrack) => {\n          HMSLogger.d(TAG, '[Subscribe] onTrackRemove', `${track}`);\n          this.observer.onTrackRemove(track);\n        },\n\n        onIceConnectionChange: async (newState: RTCIceConnectionState) => {\n          logConnectionState(HMSConnectionRole.Subscribe, newState, true);\n\n          if (newState === 'connected') {\n            const callback = this.callbacks.get(SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID);\n            this.callbacks.delete(SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID);\n\n            this.connectivityListener?.onICESuccess(false);\n            if (callback) {\n              callback.promise.resolve(true);\n            }\n          }\n        },\n\n        onConnectionStateChange: async (newState: RTCPeerConnectionState) => {\n          logConnectionState(HMSConnectionRole.Subscribe, newState, false);\n\n          if (newState === 'failed') {\n            await this.handleIceConnectionFailure(\n              HMSConnectionRole.Subscribe,\n              ErrorFactory.WebrtcErrors.ICEFailure(\n                HMSAction.SUBSCRIBE,\n                `local candidate - ${this.subscribeConnection?.selectedCandidatePair?.local?.candidate}; remote candidate - ${this.subscribeConnection?.selectedCandidatePair?.remote?.candidate}`,\n              ),\n            );\n          } else if (newState === 'disconnected') {\n            setTimeout(() => {\n              if (this.subscribeConnection?.connectionState === 'disconnected') {\n                this.handleIceConnectionFailure(\n                  HMSConnectionRole.Subscribe,\n                  ErrorFactory.WebrtcErrors.ICEDisconnected(\n                    HMSAction.SUBSCRIBE,\n                    `local candidate - ${this.subscribeConnection?.selectedCandidatePair?.local?.candidate}; remote candidate - ${this.subscribeConnection?.selectedCandidatePair?.remote?.candidate}`,\n                  ),\n                );\n              }\n            }, ICE_DISCONNECTION_TIMEOUT);\n          } else if (newState === 'connected') {\n            this.subscribeConnection?.handleSelectedIceCandidatePairs();\n            const callback = this.callbacks.get(SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID);\n            this.callbacks.delete(SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID);\n\n            if (callback) {\n              callback.promise.resolve(true);\n            }\n          }\n        },\n\n        onIceCandidate: candidate => {\n          this.connectivityListener?.onICECandidate(candidate, false);\n        },\n\n        onSelectedCandidatePairChange: candidatePair => {\n          this.connectivityListener?.onSelectedICECandidatePairChange(candidatePair, false);\n        },\n      };\n      if (!this.publishConnection) {\n        this.publishConnection = new HMSPublishConnection(\n          this.signal,\n          this.initConfig.rtcConfiguration,\n          publishConnectionObserver,\n        );\n      }\n\n      if (!this.subscribeConnection) {\n        this.subscribeConnection = new HMSSubscribeConnection(\n          this.signal,\n          this.initConfig.rtcConfiguration,\n          this.isFlagEnabled.bind(this),\n          subscribeConnectionObserver,\n        );\n      }\n    }\n\n    this.webrtcInternals?.setPeerConnections({\n      publish: this.publishConnection?.nativeConnection,\n      subscribe: this.subscribeConnection?.nativeConnection,\n    });\n  }\n\n  private async negotiateJoinWithRetry({\n    name,\n    data,\n    autoSubscribeVideo,\n    isWebRTC = true,\n  }: NegotiateJoinParams & { isWebRTC: boolean }) {\n    try {\n      await this.negotiateJoin({ name, data, autoSubscribeVideo, isWebRTC });\n    } catch (error) {\n      HMSLogger.e(TAG, 'Join negotiation failed ❌', error);\n      const hmsError =\n        error instanceof HMSException\n          ? error\n          : ErrorFactory.WebsocketMethodErrors.ServerErrors(\n              500,\n              HMSAction.JOIN,\n              `Websocket join error - ${(error as Error).message}`,\n            );\n      const shouldRetry =\n        parseInt(`${hmsError.code / 100}`) === 5 ||\n        [ErrorCodes.WebSocketConnectionErrors.WEBSOCKET_CONNECTION_LOST, 429].includes(hmsError.code);\n\n      if (hmsError.code === 410) {\n        hmsError.isTerminal = true;\n      }\n\n      if (shouldRetry) {\n        this.joinRetryCount = 0;\n        hmsError.isTerminal = false;\n        const task = async () => {\n          this.joinRetryCount++;\n          return await this.negotiateJoin({ name, data, autoSubscribeVideo, isWebRTC });\n        };\n\n        await this.retryScheduler.schedule({\n          category: TransportFailureCategory.JoinWSMessageFailed,\n          error: hmsError,\n          task,\n          originalState: TransportState.Joined,\n          changeState: false,\n        });\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  private async negotiateJoin({\n    name,\n    data,\n    autoSubscribeVideo,\n    isWebRTC = true,\n  }: NegotiateJoinParams & { isWebRTC: boolean }): Promise<boolean> {\n    if (isWebRTC) {\n      return await this.negotiateJoinWebRTC({ name, data, autoSubscribeVideo });\n    } else {\n      return await this.negotiateJoinNonWebRTC({ name, data, autoSubscribeVideo });\n    }\n  }\n\n  private async negotiateJoinWebRTC({ name, data, autoSubscribeVideo }: NegotiateJoinParams): Promise<boolean> {\n    HMSLogger.d(TAG, '⏳ join: Negotiating over PUBLISH connection');\n    if (!this.publishConnection) {\n      HMSLogger.e(TAG, 'Publish peer connection not found, cannot negotiate');\n      return false;\n    }\n    const offer = await this.publishConnection.createOffer();\n    await this.publishConnection.setLocalDescription(offer);\n    const serverSubDegrade = this.isFlagEnabled(InitFlags.FLAG_SERVER_SUB_DEGRADATION);\n    const simulcast = this.isFlagEnabled(InitFlags.FLAG_SERVER_SIMULCAST);\n    const onDemandTracks = this.isFlagEnabled(InitFlags.FLAG_ON_DEMAND_TRACKS);\n    const answer = await this.signal.join(\n      name,\n      data,\n      !autoSubscribeVideo,\n      serverSubDegrade,\n      simulcast,\n      onDemandTracks,\n      offer,\n    );\n    this.setSFUNodeId(answer?.sfu_node_id);\n    await this.publishConnection.setRemoteDescription(answer);\n    for (const candidate of this.publishConnection.candidates) {\n      await this.publishConnection.addIceCandidate(candidate);\n    }\n\n    this.publishConnection.initAfterJoin();\n    return !!answer;\n  }\n\n  private async negotiateJoinNonWebRTC({ name, data, autoSubscribeVideo }: NegotiateJoinParams): Promise<boolean> {\n    HMSLogger.d(TAG, '⏳ join: Negotiating Non-WebRTC');\n    const serverSubDegrade = this.isFlagEnabled(InitFlags.FLAG_SERVER_SUB_DEGRADATION);\n    const simulcast = this.isFlagEnabled(InitFlags.FLAG_SERVER_SIMULCAST);\n    const onDemandTracks = this.isFlagEnabled(InitFlags.FLAG_ON_DEMAND_TRACKS);\n    const response = await this.signal.join(\n      name,\n      data,\n      !autoSubscribeVideo,\n      serverSubDegrade,\n      simulcast,\n      onDemandTracks,\n    );\n    this.setSFUNodeId(response?.sfu_node_id);\n    return !!response;\n  }\n\n  /**\n   * Negotiate on first publish after changing role from non-webrtc peer to webrtc peer by sending offer\n   */\n  private async negotiateOnFirstPublish() {\n    HMSLogger.d(TAG, '⏳ Negotiating offer over PUBLISH connection');\n    if (!this.publishConnection) {\n      HMSLogger.e(TAG, 'Publish peer connection not found, cannot negotiate');\n      return false;\n    }\n    try {\n      const offer = await this.publishConnection.createOffer(this.trackStates);\n      await this.publishConnection.setLocalDescription(offer);\n      const answer = await this.signal.offer(offer, this.trackStates);\n      await this.publishConnection.setRemoteDescription(answer);\n      for (const candidate of this.publishConnection.candidates) {\n        await this.publishConnection.addIceCandidate(candidate);\n      }\n\n      this.publishConnection.initAfterJoin();\n      return !!answer;\n    } catch (ex) {\n      // resolve for now as this might happen during migration\n      if (ex instanceof HMSException && ex.code === 421) {\n        return true;\n      }\n      throw ex;\n    }\n  }\n\n  private async performPublishRenegotiation(constraints?: RTCOfferOptions) {\n    HMSLogger.d(TAG, `⏳ [role=PUBLISH] onRenegotiationNeeded START`, this.trackStates);\n    const callback = this.callbacks.get(RENEGOTIATION_CALLBACK_ID);\n    if (!callback) {\n      HMSLogger.w(TAG, 'no callback found for renegotiation');\n      return;\n    }\n\n    if (!this.publishConnection) {\n      HMSLogger.e(TAG, 'Publish peer connection not found, cannot renegotiate');\n      return;\n    }\n\n    try {\n      const offer = await this.publishConnection.createOffer(this.trackStates, constraints);\n      await this.publishConnection.setLocalDescription(offer);\n      HMSLogger.time(`renegotiation-offer-exchange`);\n      const answer = await this.signal.offer(offer, this.trackStates);\n      this.callbacks.delete(RENEGOTIATION_CALLBACK_ID);\n      HMSLogger.timeEnd(`renegotiation-offer-exchange`);\n      await this.publishConnection.setRemoteDescription(answer);\n      callback.promise.resolve(true);\n      HMSLogger.d(TAG, `[role=PUBLISH] onRenegotiationNeeded DONE ✅`);\n    } catch (err) {\n      let ex: HMSException;\n      if (err instanceof HMSException) {\n        ex = err;\n      } else {\n        ex = ErrorFactory.GenericErrors.Unknown(HMSAction.PUBLISH, (err as Error).message);\n      }\n\n      // resolve for now as this might happen during migration\n      if (ex.code === 421) {\n        callback.promise.resolve(true);\n      } else {\n        callback.promise.reject(ex);\n      }\n      HMSLogger.d(TAG, `[role=PUBLISH] onRenegotiationNeeded FAILED ❌`);\n    }\n  }\n\n  private async handleIceConnectionFailure(role: HMSConnectionRole, error: HMSException) {\n    // ice retry is already in progress(from disconnect state)\n    if (\n      this.retryScheduler.isTaskInProgress(\n        HMSConnectionRole.Publish\n          ? TransportFailureCategory.PublishIceConnectionFailed\n          : TransportFailureCategory.SubscribeIceConnectionFailed,\n      )\n    ) {\n      return;\n    }\n\n    if (role === HMSConnectionRole.Publish) {\n      this.retryScheduler.schedule({\n        category: TransportFailureCategory.PublishIceConnectionFailed,\n        error,\n        task: this.retryPublishIceFailedTask,\n        originalState: TransportState.Joined,\n      });\n    } else {\n      this.retryScheduler.schedule({\n        category: TransportFailureCategory.SubscribeIceConnectionFailed,\n        error,\n        task: this.retrySubscribeIceFailedTask,\n        originalState: TransportState.Joined,\n      });\n    }\n  }\n\n  private async internalConnect(token: string, initEndpoint: string, peerId: string, iceServers?: HMSICEServer[]) {\n    HMSLogger.d(TAG, 'connect: started ⏰');\n    const connectRequestedAt = new Date();\n    try {\n      this.analyticsTimer.start(TimedEvent.INIT);\n      this.initConfig = await InitService.fetchInitConfig({\n        token,\n        peerId,\n        userAgent: this.store.getUserAgent(),\n        initEndpoint,\n        iceServers,\n      });\n      this.connectivityListener?.onInitSuccess(this.initConfig.endpoint);\n      const room = this.store.getRoom();\n      if (room) {\n        room.effectsKey = this.initConfig.config.vb?.effectsKey;\n        room.isEffectsEnabled = this.isFlagEnabled(InitFlags.FLAG_EFFECTS_SDK_ENABLED);\n        room.disableNoneLayerRequest = this.isFlagEnabled(InitFlags.FLAG_DISABLE_NONE_LAYER_REQUEST);\n        room.isVBEnabled = this.isFlagEnabled(InitFlags.FLAG_VB_ENABLED);\n        room.isHipaaEnabled = this.isFlagEnabled(InitFlags.FLAG_HIPAA_ENABLED);\n        room.isNoiseCancellationEnabled = this.isFlagEnabled(InitFlags.FLAG_NOISE_CANCELLATION);\n      }\n      this.analyticsTimer.end(TimedEvent.INIT);\n      HTTPAnalyticsTransport.setWebsocketEndpoint(this.initConfig.endpoint);\n      // if leave was called while init was going on, don't open websocket\n      this.validateNotDisconnected('post init');\n      await this.openSignal(token, peerId);\n      this.observer.onConnected();\n      this.connectivityListener?.onSignallingSuccess();\n      this.store.setSimulcastEnabled(this.isFlagEnabled(InitFlags.FLAG_SERVER_SIMULCAST));\n      HMSLogger.d(TAG, 'Adding Analytics Transport: JsonRpcSignal');\n      this.analyticsEventsService.setTransport(this.analyticsSignalTransport);\n      this.analyticsEventsService.flush();\n      return this.initConfig;\n    } catch (error) {\n      if (this.state !== TransportState.Reconnecting) {\n        this.eventBus.analytics.publish(\n          AnalyticsEventFactory.connect(\n            error as Error,\n            this.getAdditionalAnalyticsProperties(),\n            connectRequestedAt,\n            new Date(),\n            initEndpoint,\n          ),\n        );\n      }\n      HMSLogger.e(TAG, '❌ internal connect: failed', error);\n      throw error;\n    }\n  }\n\n  // leave could be called between any two async tasks, which would make\n  // the state disconnected instead of connecting, throw error for those cases.\n  private validateNotDisconnected(stage: string) {\n    if (this.state === TransportState.Disconnected) {\n      HMSLogger.w(TAG, 'aborting join as transport state is disconnected');\n      throw ErrorFactory.GenericErrors.ValidationFailed(`leave called before join could complete - stage=${stage}`);\n    }\n  }\n\n  private async openSignal(token: string, peerId: string) {\n    if (!this.initConfig) {\n      throw ErrorFactory.APIErrors.InitConfigNotAvailable(HMSAction.INIT, 'Init Config not found');\n    }\n\n    HMSLogger.d(TAG, '⏳ internal connect: connecting to ws endpoint', this.initConfig.endpoint);\n    const url = new URL(this.initConfig.endpoint);\n    url.searchParams.set('peer', peerId);\n    url.searchParams.set('token', token);\n    url.searchParams.set('user_agent_v2', this.store.getUserAgent());\n    url.searchParams.set('protocol_version', PROTOCOL_VERSION);\n    url.searchParams.set('protocol_spec', PROTOCOL_SPEC);\n\n    this.endpoint = url.toString();\n    this.analyticsTimer.start(TimedEvent.WEBSOCKET_CONNECT);\n    await this.signal.open(this.endpoint);\n    this.analyticsTimer.end(TimedEvent.WEBSOCKET_CONNECT);\n    this.analyticsTimer.start(TimedEvent.ON_POLICY_CHANGE);\n    this.analyticsTimer.start(TimedEvent.ROOM_STATE);\n    HMSLogger.d(TAG, '✅ internal connect: connected to ws endpoint');\n  }\n\n  private initStatsAnalytics() {\n    if (this.isFlagEnabled(InitFlags.FLAG_PUBLISH_STATS)) {\n      this.publishStatsAnalytics = new PublishStatsAnalytics(\n        this.store,\n        this.eventBus,\n        this.getValueFromInitConfig('publishStats', 'maxSampleWindowSize', PUBLISH_STATS_SAMPLE_WINDOW),\n        this.getValueFromInitConfig('publishStats', 'maxSamplePushInterval', PUBLISH_STATS_PUSH_INTERVAL),\n      );\n\n      this.getWebrtcInternals()?.start();\n    }\n\n    if (this.isFlagEnabled(InitFlags.FLAG_SUBSCRIBE_STATS)) {\n      this.subscribeStatsAnalytics = new SubscribeStatsAnalytics(\n        this.store,\n        this.eventBus,\n        this.getValueFromInitConfig('subscribeStats', 'maxSampleWindowSize', SUBSCRIBE_STATS_SAMPLE_WINDOW),\n        this.getValueFromInitConfig('subscribeStats', 'maxSamplePushInterval', SUBSCRIBE_STATS_PUSH_INTERVAL),\n      );\n\n      this.getWebrtcInternals()?.start();\n    }\n  }\n\n  private getValueFromInitConfig(\n    baseKey: 'publishStats' | 'subscribeStats',\n    subKey: 'maxSampleWindowSize' | 'maxSamplePushInterval',\n    defaultValue: number,\n  ) {\n    return this.initConfig?.config[baseKey]?.[subKey] || defaultValue;\n  }\n\n  /**\n   * Role does not need WebRTC(peer connections to communicate to SFU) if it cannot publish or subscribe to anything\n   * @returns boolean denoting if a peer cannot publish(video, audio or screen) and cannot subscribe to any role\n   */\n  private doesRoleNeedWebRTC(role: HMSRole) {\n    if (!this.isFlagEnabled(InitFlags.FLAG_NON_WEBRTC_DISABLE_OFFER)) {\n      return true;\n    }\n\n    const isPublishing = Boolean(role.publishParams.allowed && role.publishParams.allowed?.length > 0);\n    const isSubscribing = Boolean(\n      role.subscribeParams.subscribeToRoles && role.subscribeParams.subscribeToRoles?.length > 0,\n    );\n\n    return isPublishing || isSubscribing;\n  }\n\n  private doesLocalPeerNeedWebRTC() {\n    const localRole = this.store.getLocalPeer()?.role;\n    if (!localRole) {\n      return true;\n    }\n\n    return this.doesRoleNeedWebRTC(localRole);\n  }\n\n  private retryPublishIceFailedTask = async () => {\n    /**\n     * Proceed with the retry even if the connection state is connected as the offer could have failed\n     * which will cause missing tiles if it is not sent again.\n     * Do iceRestart only if not connected\n     */\n    if (this.publishConnection) {\n      const p = new Promise<boolean>((resolve, reject) => {\n        this.callbacks.set(RENEGOTIATION_CALLBACK_ID, {\n          promise: { resolve, reject },\n          action: HMSAction.RESTART_ICE,\n          extra: {},\n        });\n      });\n      await this.performPublishRenegotiation({ iceRestart: this.publishConnection.connectionState !== 'connected' });\n      await p;\n    }\n\n    return true;\n  };\n\n  private retrySubscribeIceFailedTask = async () => {\n    if (this.subscribeConnection && this.subscribeConnection.connectionState !== 'connected') {\n      const p = new Promise<boolean>((resolve, reject) => {\n        // Use subscribe constant string\n        this.callbacks.set(SUBSCRIBE_ICE_CONNECTION_CALLBACK_ID, {\n          promise: { resolve, reject },\n          action: HMSAction.RESTART_ICE,\n          extra: {},\n        });\n      });\n\n      const timeout = new Promise(resolve => {\n        setTimeout(resolve, SUBSCRIBE_TIMEOUT, false);\n      });\n\n      return Promise.race([p, timeout]) as Promise<boolean>;\n    }\n\n    return true;\n  };\n\n  private retrySignalDisconnectTask = async () => {\n    HMSLogger.d(TAG, 'retrySignalDisconnectTask', { signalConnected: this.signal.isConnected });\n    // Check if ws is disconnected - otherwise if only publishIce fails\n    // and ws connect is success then we don't need to reconnect to WebSocket\n    if (!this.signal.isConnected) {\n      await this.internalConnect(\n        this.joinParameters!.authToken,\n        this.joinParameters!.endpoint,\n        this.joinParameters!.peerId,\n        this.joinParameters!.iceServers,\n      );\n    }\n\n    // Only retry publish failed task after joining the call - not needed in preview signal reconnect\n    const ok = this.store.getRoom()?.joinedAt\n      ? this.signal.isConnected && (await this.retryPublishIceFailedTask())\n      : this.signal.isConnected;\n    // Send track update to sync local track state changes during reconnection\n    this.signal.trackUpdate(this.trackStates);\n\n    return ok;\n  };\n\n  private setTransportStateForConnect() {\n    if (this.state === TransportState.Failed) {\n      this.state = TransportState.Disconnected;\n    }\n\n    if (this.state !== TransportState.Disconnected && this.state !== TransportState.Reconnecting) {\n      throw ErrorFactory.WebsocketMethodErrors.AlreadyJoined(\n        HMSAction.JOIN,\n        `Cannot join a meeting in ${this.state} state`,\n      );\n    }\n\n    if (this.state === TransportState.Disconnected) {\n      this.state = TransportState.Connecting;\n      this.observer.onStateChange(this.state);\n    }\n  }\n\n  private sendErrorAnalyticsEvent(error: HMSException, category: TransportFailureCategory) {\n    const additionalProps = this.getAdditionalAnalyticsProperties();\n    let event: AnalyticsEvent;\n    switch (category) {\n      case TransportFailureCategory.ConnectFailed:\n        event = AnalyticsEventFactory.connect(error, additionalProps);\n        break;\n      case TransportFailureCategory.SignalDisconnect:\n        event = AnalyticsEventFactory.disconnect(error, additionalProps);\n        break;\n      case TransportFailureCategory.JoinWSMessageFailed:\n        event = AnalyticsEventFactory.join({\n          error,\n          time: this.analyticsTimer.getTimeTaken(TimedEvent.JOIN),\n          init_response_time: this.analyticsTimer.getTimeTaken(TimedEvent.INIT),\n          ws_connect_time: this.analyticsTimer.getTimeTaken(TimedEvent.WEBSOCKET_CONNECT),\n          on_policy_change_time: this.analyticsTimer.getTimeTaken(TimedEvent.ON_POLICY_CHANGE),\n          local_audio_track_time: this.analyticsTimer.getTimeTaken(TimedEvent.LOCAL_AUDIO_TRACK),\n          local_video_track_time: this.analyticsTimer.getTimeTaken(TimedEvent.LOCAL_VIDEO_TRACK),\n          retries_join: this.joinRetryCount,\n        });\n        break;\n      case TransportFailureCategory.PublishIceConnectionFailed:\n        event = AnalyticsEventFactory.publish({ error });\n        break;\n      case TransportFailureCategory.SubscribeIceConnectionFailed:\n        event = AnalyticsEventFactory.subscribeFail(error);\n        break;\n    }\n    this.eventBus.analytics.publish(event!);\n  }\n\n  getSubscribeConnection() {\n    return this.subscribeConnection;\n  }\n\n  getAdditionalAnalyticsProperties(): AdditionalAnalyticsProperties {\n    const network_info = getNetworkInfo();\n    const document_hidden = typeof document !== 'undefined' && document.hidden;\n    const num_degraded_tracks = this.store.getRemoteVideoTracks().filter(track => track.degraded).length;\n    const publishBitrate = this.getWebrtcInternals()?.getCurrentStats()?.getLocalPeerStats()?.publish?.bitrate;\n    const subscribeBitrate = this.getWebrtcInternals()?.getCurrentStats()?.getLocalPeerStats()?.subscribe?.bitrate;\n\n    return {\n      network_info,\n      document_hidden,\n      num_degraded_tracks,\n      bitrate: {\n        publish: publishBitrate,\n        subscribe: subscribeBitrate,\n      },\n      max_sub_bitrate: this.maxSubscribeBitrate,\n      recent_pong_response_times: this.signal.getPongResponseTimes(),\n      transport_state: this.state,\n    };\n  }\n}\n","import { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\n\nexport interface AuthToken {\n  roomId: string;\n  userId: string;\n  role: string;\n}\n\nexport default function decodeJWT(token?: string): AuthToken {\n  if (!token || token.length === 0) {\n    throw ErrorFactory.APIErrors.InvalidTokenFormat(\n      HMSAction.INIT,\n      'Token cannot be an empty string or undefined or null',\n    );\n  }\n\n  const parts = token.split('.');\n  if (parts.length !== 3) {\n    throw ErrorFactory.APIErrors.InvalidTokenFormat(\n      HMSAction.INIT,\n      `Expected 3 '.' separate fields - header, payload and signature respectively`,\n    );\n  }\n\n  const payloadStr = atob(parts[1]);\n  try {\n    const payload = JSON.parse(payloadStr);\n    return {\n      roomId: payload.room_id,\n      userId: payload.user_id,\n      role: payload.role,\n    } as AuthToken;\n  } catch (err) {\n    throw ErrorFactory.APIErrors.InvalidTokenFormat(\n      HMSAction.INIT,\n      `couldn't parse to json - ${(err as Error).message}`,\n    );\n  }\n}\n","import HMSRoom from './models/HMSRoom';\nimport { HMSLocalPeer } from './models/peer';\nimport { HMSPeerListIterator } from './HMSPeerListIterator';\nimport { LocalTrackManager } from './LocalTrackManager';\nimport { NetworkTestManager } from './NetworkTestManager';\nimport RoleChangeManager from './RoleChangeManager';\nimport { Store } from './store';\nimport { WakeLockManager } from './WakeLockManager';\nimport AnalyticsEvent from '../analytics/AnalyticsEvent';\nimport AnalyticsEventFactory from '../analytics/AnalyticsEventFactory';\nimport { HMSAnalyticsLevel } from '../analytics/AnalyticsEventLevel';\nimport { AnalyticsEventsService } from '../analytics/AnalyticsEventsService';\nimport { AnalyticsTimer, TimedEvent } from '../analytics/AnalyticsTimer';\nimport { AudioSinkManager } from '../audio-sink-manager';\nimport { PluginUsageTracker } from '../common/PluginUsageTracker';\nimport { DeviceManager } from '../device-manager';\nimport { AudioOutputManager } from '../device-manager/AudioOutputManager';\nimport { DeviceStorageManager } from '../device-manager/DeviceStorage';\nimport { HMSDiagnosticsConnectivityListener } from '../diagnostics/interfaces';\nimport { FeedbackService, HMSSessionFeedback, HMSSessionInfo } from '../end-call-feedback';\nimport { ErrorCodes } from '../error/ErrorCodes';\nimport { ErrorFactory } from '../error/ErrorFactory';\nimport { HMSAction } from '../error/HMSAction';\nimport { HMSException } from '../error/HMSException';\nimport { EventBus } from '../events/EventBus';\nimport {\n  HMSAudioCodec,\n  HMSChangeMultiTrackStateParams,\n  HMSConfig,\n  HMSConnectionQualityListener,\n  HMSDeviceChangeEvent,\n  HMSFrameworkInfo,\n  HMSMessageInput,\n  HMSPeerType,\n  HMSPlaylistSettings,\n  HMSPlaylistType,\n  HMSPreviewConfig,\n  HMSRole,\n  HMSRoleChangeRequest,\n  HMSScreenShareConfig,\n  HMSVideoCodec,\n  TokenRequest,\n  TokenRequestOptions,\n} from '../interfaces';\nimport { DeviceChangeListener } from '../interfaces/devices';\nimport { IErrorListener } from '../interfaces/error-listener';\nimport { HLSConfig, HLSTimedMetadata } from '../interfaces/hls-config';\nimport { HMSInterface } from '../interfaces/hms';\nimport { HMSLeaveRoomRequest } from '../interfaces/leave-room-request';\nimport { HMSPeerListIteratorOptions } from '../interfaces/peer-list-iterator';\nimport { HMSPreviewListener } from '../interfaces/preview-listener';\nimport { RTMPRecordingConfig } from '../interfaces/rtmp-recording-config';\nimport InitialSettings from '../interfaces/settings';\nimport { HMSAudioListener, HMSPeerUpdate, HMSTrackUpdate, HMSUpdateListener } from '../interfaces/update-listener';\nimport { PlaylistManager, TranscriptionConfig } from '../internal';\nimport { HMSAudioTrackSettingsBuilder, HMSVideoTrackSettingsBuilder } from '../media/settings';\nimport { HMSLocalStream } from '../media/streams/HMSLocalStream';\nimport {\n  HMSLocalAudioTrack,\n  HMSLocalTrack,\n  HMSLocalVideoTrack,\n  HMSRemoteTrack,\n  HMSTrackSource,\n  HMSTrackType,\n  HMSVideoTrack,\n} from '../media/tracks';\nimport {\n  HMSNotificationMethod,\n  PeerLeaveRequestNotification,\n  PeerNotificationInfo,\n  SendMessage,\n} from '../notification-manager';\nimport { createRemotePeer } from '../notification-manager/managers/utils';\nimport { NotificationManager } from '../notification-manager/NotificationManager';\nimport { DebugInfo } from '../schema';\nimport { SessionStore } from '../session-store';\nimport { InteractivityCenter } from '../session-store/interactivity-center';\nimport { InitConfig, InitFlags } from '../signal/init/models';\nimport {\n  FindPeerByNameRequestParams,\n  HLSRequestParams,\n  HLSTimedMetadataParams,\n  HLSVariant,\n  StartRTMPOrRecordingRequestParams,\n  StartTranscriptionRequestParams,\n} from '../signal/interfaces';\nimport HMSTransport from '../transport';\nimport ITransportObserver from '../transport/ITransportObserver';\nimport { TransportState } from '../transport/models/TransportState';\nimport { getAnalyticsDeviceId } from '../utils/analytics-deviceId';\nimport {\n  DEFAULT_PLAYLIST_AUDIO_BITRATE,\n  DEFAULT_PLAYLIST_VIDEO_BITRATE,\n  HAND_RAISE_GROUP_NAME,\n  LEAVE_REASON,\n} from '../utils/constants';\nimport { fetchWithRetry } from '../utils/fetch';\nimport decodeJWT from '../utils/jwt';\nimport HMSLogger, { HMSLogLevel } from '../utils/logger';\nimport { HMSAudioContextHandler } from '../utils/media';\nimport { isNode } from '../utils/support';\nimport { workerSleep } from '../utils/timer-utils';\nimport { validateMediaDevicesExistence, validatePublishParams, validateRTCPeerConnection } from '../utils/validations';\n\nconst INITIAL_STATE = {\n  published: false,\n  isInitialised: false,\n  isReconnecting: false,\n  isPreviewInProgress: false,\n  isPreviewCalled: false,\n  isJoinInProgress: false,\n  deviceManagersInitialised: false,\n};\n\nexport class HMSSdk implements HMSInterface {\n  private transport!: HMSTransport;\n  private readonly TAG = '[HMSSdk]:';\n  public listener?: HMSUpdateListener;\n  private errorListener?: IErrorListener;\n  private deviceChangeListener?: DeviceChangeListener;\n  private audioListener?: HMSAudioListener;\n  public store!: Store;\n  private notificationManager?: NotificationManager;\n  /** @internal */\n  public deviceManager!: DeviceManager;\n  private audioSinkManager!: AudioSinkManager;\n  private playlistManager!: PlaylistManager;\n  private audioOutput!: AudioOutputManager;\n  private transportState: TransportState = TransportState.Disconnected;\n  private roleChangeManager?: RoleChangeManager;\n  /** @internal */\n  public localTrackManager!: LocalTrackManager;\n  private analyticsEventsService!: AnalyticsEventsService;\n  private analyticsTimer = new AnalyticsTimer();\n  private eventBus!: EventBus;\n  private networkTestManager!: NetworkTestManager;\n  private wakeLockManager!: WakeLockManager;\n  private sessionStore!: SessionStore;\n  private interactivityCenter!: InteractivityCenter;\n  private pluginUsageTracker!: PluginUsageTracker;\n  private sdkState = { ...INITIAL_STATE };\n  private frameworkInfo?: HMSFrameworkInfo;\n  private isDiagnostics = false;\n  /**\n   * will be set post join\n   * this will not be reset on leave but after feedback success\n   * we will just clean token after successful submit feedback\n   * will be replaced when a newer join happens.\n   */\n  private sessionPeerInfo?: HMSSessionInfo;\n\n  private playlistSettings: HMSPlaylistSettings = {\n    video: {\n      bitrate: DEFAULT_PLAYLIST_VIDEO_BITRATE,\n    },\n    audio: {\n      bitrate: DEFAULT_PLAYLIST_AUDIO_BITRATE,\n    },\n  };\n\n  private setSessionPeerInfo(websocketURL: string, peer?: HMSLocalPeer) {\n    const room = this.store.getRoom();\n    if (!peer || !room) {\n      HMSLogger.e(this.TAG, 'setSessionPeerInfo> Local peer or room is undefined');\n      return;\n    }\n    this.sessionPeerInfo = {\n      peer: {\n        peer_id: peer.peerId,\n        role: peer.role?.name,\n        joined_at: peer.joinedAt?.valueOf() || 0,\n        room_name: room.name,\n        session_started_at: room.startedAt?.valueOf() || 0,\n        user_data: peer.customerUserId,\n        user_name: peer.name,\n        template_id: room.templateId,\n        session_id: room.sessionId,\n        token: this.store.getConfig()?.authToken,\n      },\n      agent: this.store.getUserAgent(),\n      device_id: getAnalyticsDeviceId(),\n      cluster: {\n        websocket_url: websocketURL,\n      },\n      timestamp: Date.now(),\n    };\n  }\n  private initNotificationManager() {\n    if (!this.notificationManager) {\n      this.notificationManager = new NotificationManager(\n        this.store,\n        this.eventBus,\n        this.transport!,\n        this.listener,\n        this.audioListener,\n      );\n    }\n  }\n\n  /** @internal */\n  initStoreAndManagers(listener: HMSPreviewListener | HMSUpdateListener | HMSDiagnosticsConnectivityListener) {\n    this.listener = listener as unknown as HMSUpdateListener;\n    this.errorListener = listener;\n    this.deviceChangeListener = listener;\n    this.store?.setErrorListener(this.errorListener);\n\n    if (this.sdkState.isInitialised) {\n      /**\n       * Set listener after both join and preview, since they can have different listeners\n       */\n      this.notificationManager?.setListener(this.listener);\n      this.audioSinkManager.setListener(this.listener);\n      this.interactivityCenter.setListener(this.listener);\n      this.transport.setListener(this.listener);\n      return;\n    }\n\n    this.sdkState.isInitialised = true;\n    this.store = new Store();\n    this.store.setErrorListener(this.errorListener);\n    this.eventBus = new EventBus();\n    this.pluginUsageTracker = new PluginUsageTracker(this.eventBus);\n    this.wakeLockManager = new WakeLockManager();\n    this.networkTestManager = new NetworkTestManager(this.eventBus, this.listener);\n    this.playlistManager = new PlaylistManager(this, this.eventBus);\n    this.deviceManager = new DeviceManager(this.store, this.eventBus);\n    this.audioSinkManager = new AudioSinkManager(this.store, this.deviceManager, this.eventBus);\n    this.audioOutput = new AudioOutputManager(this.deviceManager, this.audioSinkManager);\n    this.audioSinkManager.setListener(this.listener);\n    this.eventBus.autoplayError.subscribe(this.handleAutoplayError);\n    this.localTrackManager = new LocalTrackManager(\n      this.store,\n      this.observer,\n      this.deviceManager,\n      this.eventBus,\n      this.analyticsTimer,\n    );\n    this.analyticsEventsService = new AnalyticsEventsService(this.store);\n    this.transport = new HMSTransport(\n      this.observer,\n      this.deviceManager,\n      this.store,\n      this.eventBus,\n      this.analyticsEventsService,\n      this.analyticsTimer,\n      this.pluginUsageTracker,\n    );\n    // add diagnostics callbacks if present\n    if ('onInitSuccess' in listener) {\n      this.transport.setConnectivityListener(listener);\n    }\n    this.sessionStore = new SessionStore(this.transport);\n    this.interactivityCenter = new InteractivityCenter(this.transport, this.store, this.listener);\n    /**\n     * Note: Subscribe to events here right after creating stores and managers\n     * to not miss events that are published before the handlers are subscribed.\n     */\n    this.eventBus.analytics.subscribe(this.sendAnalyticsEvent);\n    this.eventBus.deviceChange.subscribe(this.handleDeviceChange);\n    this.eventBus.localVideoUnmutedNatively.subscribe(this.unpauseRemoteVideoTracks);\n    this.eventBus.localAudioUnmutedNatively.subscribe(this.unpauseRemoteVideoTracks);\n    this.eventBus.audioPluginFailed.subscribe(this.handleAudioPluginError);\n    this.eventBus.error.subscribe(this.handleError);\n  }\n\n  private validateJoined(name: string) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(HMSAction.VALIDATION, `Not connected - ${name}`);\n    }\n  }\n\n  // @ts-ignore\n  private sendHLSAnalytics(error: HMSException) {\n    this.sendAnalyticsEvent(AnalyticsEventFactory.hlsPlayerError(error));\n  }\n\n  async refreshDevices() {\n    this.validateJoined('refreshDevices');\n    await this.deviceManager.init(true);\n  }\n\n  getWebrtcInternals() {\n    return this.transport?.getWebrtcInternals();\n  }\n\n  getDebugInfo(): DebugInfo | undefined {\n    if (!this.transport) {\n      HMSLogger.e(this.TAG, `Transport is not defined`);\n      throw new Error('getDebugInfo can only be called after join');\n    }\n    const websocketURL = this.transport.getWebsocketEndpoint();\n    const enabledFlags = Object.values(InitFlags).filter(flag => this.transport.isFlagEnabled(flag));\n    const initEndpoint = this.store.getConfig()?.initEndpoint;\n    return {\n      websocketURL,\n      enabledFlags,\n      initEndpoint,\n    };\n  }\n\n  getSessionStore() {\n    return this.sessionStore;\n  }\n\n  getPlaylistManager(): PlaylistManager {\n    return this.playlistManager;\n  }\n\n  getRecordingState() {\n    return this.store.getRoom()?.recording;\n  }\n\n  getRTMPState() {\n    return this.store.getRoom()?.rtmp;\n  }\n\n  getHLSState() {\n    return this.store.getRoom()?.hls;\n  }\n\n  getTranscriptionState() {\n    return this.store.getRoom()?.transcriptions;\n  }\n\n  getTemplateAppData() {\n    return this.store.getTemplateAppData();\n  }\n\n  getInteractivityCenter() {\n    return this.interactivityCenter;\n  }\n\n  getPeerListIterator(options?: HMSPeerListIteratorOptions) {\n    return new HMSPeerListIterator(this.transport, this.store, options);\n  }\n\n  updatePlaylistSettings(options: HMSPlaylistSettings) {\n    if (options.video) {\n      Object.assign(this.playlistSettings.video, options.video);\n    }\n    if (options.audio) {\n      Object.assign(this.playlistSettings.audio, options.audio);\n    }\n  }\n\n  private handleAutoplayError = (error: HMSException) => {\n    this.errorListener?.onError?.(error);\n  };\n\n  private get localPeer(): HMSLocalPeer | undefined {\n    return this.store?.getLocalPeer();\n  }\n\n  private observer: ITransportObserver = {\n    onNotification: (message: any) => {\n      if (message.method === HMSNotificationMethod.PEER_LEAVE_REQUEST) {\n        this.handlePeerLeaveRequest(message.params as PeerLeaveRequestNotification);\n        return;\n      }\n\n      switch (message.method) {\n        case HMSNotificationMethod.POLICY_CHANGE:\n          this.analyticsTimer.end(TimedEvent.ON_POLICY_CHANGE);\n          break;\n        case HMSNotificationMethod.PEER_LIST:\n          this.analyticsTimer.end(TimedEvent.PEER_LIST);\n          this.sendJoinAnalyticsEvent(this.sdkState.isPreviewCalled);\n          break;\n        case HMSNotificationMethod.ROOM_STATE:\n          this.analyticsTimer.end(TimedEvent.ROOM_STATE);\n          break;\n        default:\n      }\n\n      this.notificationManager?.handleNotification(message, this.sdkState.isReconnecting);\n    },\n\n    onConnected: () => {\n      this.initNotificationManager();\n    },\n\n    onTrackAdd: (track: HMSRemoteTrack) => {\n      this.notificationManager?.handleTrackAdd(track);\n    },\n\n    onTrackRemove: (track: HMSRemoteTrack) => {\n      this.notificationManager?.handleTrackRemove(track);\n    },\n\n    onFailure: (exception: HMSException) => {\n      this.errorListener?.onError(exception);\n    },\n\n    onStateChange: async (state: TransportState, error?: HMSException) => {\n      const handleFailedState = async (error?: HMSException) => {\n        await this.internalLeave(true, error);\n        /**\n         * no need to call onError here when preview/join is in progress\n         * since preview/join will call onError when they receive leave event from the above call\n         */\n        if (!this.sdkState.isPreviewInProgress && !this.sdkState.isJoinInProgress) {\n          this.errorListener?.onError?.(error!);\n        }\n        this.sdkState.isReconnecting = false;\n      };\n\n      switch (state) {\n        case TransportState.Preview:\n        case TransportState.Joined:\n          this.initNotificationManager();\n          if (this.transportState === TransportState.Reconnecting) {\n            this.listener?.onReconnected();\n          }\n          break;\n        case TransportState.Failed:\n          await handleFailedState(error);\n          break;\n        case TransportState.Reconnecting:\n          this.sdkState.isReconnecting = true;\n          this.listener?.onReconnecting(error!);\n          break;\n      }\n\n      this.transportState = state;\n      HMSLogger.d(this.TAG, 'Transport State Change', this.transportState);\n    },\n  };\n\n  private handlePeerLeaveRequest = (message: PeerLeaveRequestNotification) => {\n    const peer = message.requested_by ? this.store.getPeerById(message.requested_by) : undefined;\n    const request: HMSLeaveRoomRequest = {\n      roomEnded: message.room_end,\n      reason: message.reason,\n      requestedBy: peer,\n    };\n    this.listener?.onRemovedFromRoom(request);\n    this.internalLeave(false);\n  };\n\n  async preview(config: HMSPreviewConfig, listener: HMSPreviewListener) {\n    validateMediaDevicesExistence();\n    validateRTCPeerConnection();\n\n    if (this.sdkState.isPreviewInProgress) {\n      return Promise.reject(\n        ErrorFactory.GenericErrors.PreviewAlreadyInProgress(HMSAction.PREVIEW, 'Preview already called'),\n      );\n    }\n\n    if ([TransportState.Joined, TransportState.Reconnecting].includes(this.transportState)) {\n      return this.midCallPreview(config.asRole, config.settings);\n    }\n\n    this.analyticsTimer.start(TimedEvent.PREVIEW);\n    this.setUpPreview(config, listener);\n\n    let initSuccessful = false;\n    let networkTestFinished = false;\n    const timerId = setTimeout(() => {\n      // If init or network is not done by 3s send -1\n      if (!initSuccessful || !networkTestFinished) {\n        this.listener?.onNetworkQuality?.(-1);\n      }\n    }, 3000);\n    return new Promise<void>((resolve, reject) => {\n      const policyHandler = async () => {\n        if (this.localPeer) {\n          const newRole = config.asRole && this.store.getPolicyForRole(config.asRole);\n          this.localPeer.asRole = newRole || this.localPeer.role;\n        }\n        const tracks = await this.localTrackManager.getTracksToPublish(config.settings);\n        tracks.forEach(track => {\n          this.setLocalPeerTrack(track);\n          if (track.isTrackNotPublishing()) {\n            const error = ErrorFactory.TracksErrors.NoDataInTrack(\n              `${track.type} track has no data. muted: ${track.nativeTrack.muted}, readyState: ${track.nativeTrack.readyState}`,\n            );\n            HMSLogger.e(this.TAG, error);\n            this.sendAnalyticsEvent(\n              AnalyticsEventFactory.publish({\n                devices: this.deviceManager.getDevices(),\n                error: error,\n              }),\n            );\n            this.listener?.onError(error);\n          }\n        });\n        this.localPeer?.audioTrack && this.initPreviewTrackAudioLevelMonitor();\n        await this.initDeviceManagers();\n        this.sdkState.isPreviewInProgress = false;\n        this.analyticsTimer.end(TimedEvent.PREVIEW);\n        const room = this.store.getRoom();\n        if (room) {\n          listener.onPreview(room, tracks);\n        }\n        this.sendPreviewAnalyticsEvent();\n        resolve();\n      };\n\n      this.eventBus.policyChange.subscribeOnce(policyHandler);\n      this.eventBus.leave.subscribeOnce(this.handlePreviewError);\n      this.eventBus.leave.subscribeOnce(ex => reject(ex as HMSException));\n\n      this.transport\n        .preview(\n          config.authToken,\n          config.initEndpoint!,\n          this.localPeer!.peerId,\n          { name: config.userName, metaData: config.metaData || '' },\n          config.autoVideoSubscribe,\n          config.iceServers,\n        )\n        .then((initConfig: InitConfig | void) => {\n          initSuccessful = true;\n          clearTimeout(timerId);\n          if (initConfig && config.captureNetworkQualityInPreview) {\n            this.networkTestManager.start(initConfig.config?.networkHealth).then(() => {\n              networkTestFinished = true;\n            });\n          }\n        })\n        .catch(ex => {\n          this.handlePreviewError(ex);\n          reject(ex);\n        });\n    });\n  }\n\n  private handlePreviewError = (ex?: HMSException) => {\n    this.analyticsTimer.end(TimedEvent.PREVIEW);\n    ex && this.errorListener?.onError(ex);\n    this.sendPreviewAnalyticsEvent(ex);\n    this.sdkState.isPreviewInProgress = false;\n  };\n\n  private async midCallPreview(asRole?: string, settings?: InitialSettings): Promise<void> {\n    if (!this.localPeer || this.transportState !== TransportState.Joined) {\n      throw ErrorFactory.GenericErrors.NotConnected(HMSAction.VALIDATION, 'Not connected - midCallPreview');\n    }\n\n    const newRole = asRole && this.store.getPolicyForRole(asRole);\n    if (!newRole) {\n      throw ErrorFactory.GenericErrors.InvalidRole(HMSAction.PREVIEW, `role ${asRole} does not exist in policy`);\n    }\n    this.localPeer.asRole = newRole;\n\n    const tracks = await this.localTrackManager.getTracksToPublish(settings);\n    tracks.forEach(track => this.setLocalPeerTrack(track));\n    this.localPeer?.audioTrack && this.initPreviewTrackAudioLevelMonitor();\n    await this.initDeviceManagers();\n\n    this.listener?.onPreview(this.store.getRoom()!, tracks);\n  }\n\n  async cancelMidCallPreview() {\n    if (!this.localPeer || !this.localPeer.isInPreview()) {\n      HMSLogger.w(this.TAG, 'Cannot cancel mid call preview as preview is not in progress');\n    }\n\n    if (this.localPeer?.asRole && this.localPeer.role) {\n      const oldRole = this.localPeer.asRole;\n      const newRole = this.localPeer.role;\n      delete this.localPeer.asRole;\n      await this.roleChangeManager?.diffRolesAndPublishTracks({\n        oldRole,\n        newRole,\n      });\n\n      this.listener?.onPeerUpdate(HMSPeerUpdate.ROLE_UPDATED, this.localPeer);\n    }\n  }\n\n  private handleDeviceChange = (event: HMSDeviceChangeEvent) => {\n    if (event.isUserSelection) {\n      return;\n    }\n    HMSLogger.d(this.TAG, 'Device Change event', event);\n    this.deviceChangeListener?.onDeviceChange?.(event);\n    const disableTrackOnError = () => {\n      if (event.error && event.type) {\n        const track = event.type.includes('audio') ? this.localPeer?.audioTrack : this.localPeer?.videoTrack;\n        this.errorListener?.onError(event.error);\n        if (\n          [\n            ErrorCodes.TracksErrors.CANT_ACCESS_CAPTURE_DEVICE,\n            ErrorCodes.TracksErrors.DEVICE_IN_USE,\n            ErrorCodes.TracksErrors.DEVICE_NOT_AVAILABLE,\n          ].includes(event.error.code) &&\n          track\n        ) {\n          track.setEnabled(false);\n          this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_MUTED, track, this.localPeer!);\n        }\n      }\n    };\n    disableTrackOnError();\n  };\n\n  private handleAudioPluginError = (error: HMSException) => {\n    HMSLogger.e(this.TAG, 'Audio Plugin Error event', error);\n    this.errorListener?.onError(error);\n  };\n\n  /**\n   * This is to handle errors thrown from internal handling of audio video track changes\n   * For example, handling visibility change and making a new gum can throw an error which is currently\n   * unhandled. This will notify the app of the error.\n   * @param {HMSException} error\n   */\n  private handleError = (error: HMSException) => {\n    HMSLogger.e(this.TAG, error);\n    this.errorListener?.onError(error);\n  };\n\n  // eslint-disable-next-line complexity\n  async join(config: HMSConfig, listener: HMSUpdateListener) {\n    validateMediaDevicesExistence();\n    validateRTCPeerConnection();\n\n    if (this.sdkState.isPreviewInProgress) {\n      throw ErrorFactory.GenericErrors.NotReady(HMSAction.JOIN, \"Preview is in progress, can't join\");\n    }\n\n    // remove terminal error handling from preview(do not send preview.failed after join on disconnect)\n    this.eventBus?.leave?.unsubscribe(this.handlePreviewError);\n    this.analyticsTimer.start(TimedEvent.JOIN);\n    this.sdkState.isJoinInProgress = true;\n\n    const { roomId, userId, role } = decodeJWT(config.authToken);\n    const previewRole = this.localPeer?.asRole?.name || this.localPeer?.role?.name;\n    this.networkTestManager?.stop();\n    this.commonSetup(config, roomId, listener);\n    this.removeDevicesFromConfig(config);\n    this.store.setConfig(config);\n    /** set after config since we need config to get env for user agent */\n    this.store.createAndSetUserAgent(this.frameworkInfo);\n    HMSAudioContextHandler.resumeContext();\n    // acquire screen lock to stay awake while in call\n    const storeConfig = this.store.getConfig();\n    if (storeConfig?.autoManageWakeLock) {\n      this.wakeLockManager.acquireLock();\n    }\n\n    if (!this.localPeer) {\n      this.createAndAddLocalPeerToStore(config, role, userId);\n    } else {\n      this.localPeer.name = config.userName;\n      this.localPeer.role = this.store.getPolicyForRole(role);\n      this.localPeer.customerUserId = userId;\n      this.localPeer.metadata = config.metaData;\n      delete this.localPeer.asRole;\n    }\n\n    this.roleChangeManager = new RoleChangeManager(\n      this.store,\n      this.transport,\n      this.deviceManager,\n      this.getAndPublishTracks.bind(this),\n      this.removeTrack.bind(this),\n      this.listener,\n    );\n    this.eventBus.localRoleUpdate.subscribe(this.handleLocalRoleUpdate);\n\n    HMSLogger.d(this.TAG, `⏳ Joining room ${roomId}`);\n\n    HMSLogger.time(`join-room-${roomId}`);\n\n    try {\n      await this.transport.join(\n        config.authToken,\n        this.localPeer!.peerId,\n        { name: config.userName, metaData: config.metaData! },\n        config.initEndpoint!,\n        config.autoVideoSubscribe,\n        config.iceServers,\n      );\n      HMSLogger.d(this.TAG, `✅ Joined room ${roomId}`);\n      this.analyticsTimer.start(TimedEvent.PEER_LIST);\n      await this.notifyJoin();\n      this.sdkState.isJoinInProgress = false;\n      await this.publish(config.settings, previewRole);\n      await this.deviceManager.autoSelectAudioOutput();\n      // Throw autoplay error even if audio context is suspended as it will be used in Audio Plugins which can lead to no audio\n      if (HMSAudioContextHandler.getAudioContext().state === 'suspended') {\n        this.listener?.onError(ErrorFactory.TracksErrors.AutoplayBlocked(HMSAction.JOIN));\n      }\n    } catch (error) {\n      this.analyticsTimer.end(TimedEvent.JOIN);\n      this.sdkState.isJoinInProgress = false;\n      this.listener?.onError(error as HMSException);\n      this.sendJoinAnalyticsEvent(this.sdkState.isPreviewCalled, error as HMSException);\n      HMSLogger.e(this.TAG, 'Unable to join room', error);\n      throw error;\n    }\n    HMSLogger.timeEnd(`join-room-${roomId}`);\n  }\n\n  private stringifyMetadata(config: HMSConfig) {\n    if (config.metaData && typeof config.metaData !== 'string') {\n      config.metaData = JSON.stringify(config.metaData);\n    } else if (!config.metaData) {\n      config.metaData = '';\n    }\n  }\n\n  private cleanup() {\n    this.cleanDeviceManagers();\n    this.eventBus.analytics.unsubscribe(this.sendAnalyticsEvent);\n    this.eventBus.localVideoUnmutedNatively.unsubscribe(this.unpauseRemoteVideoTracks);\n    this.eventBus.localAudioUnmutedNatively.unsubscribe(this.unpauseRemoteVideoTracks);\n    this.eventBus.error.unsubscribe(this.handleError);\n    this.analyticsTimer.cleanup();\n    DeviceStorageManager.cleanup();\n    this.playlistManager.cleanup();\n    this.wakeLockManager?.cleanup();\n    LocalTrackManager.cleanup();\n    this.notificationManager = undefined;\n    HMSLogger.cleanup();\n    this.sdkState = { ...INITIAL_STATE };\n    /**\n     * when leave is called after preview itself without join.\n     * Store won't have the tracks in this case\n     */\n    if (this.localPeer) {\n      this.localPeer.audioTrack?.cleanup();\n      this.localPeer.audioTrack = undefined;\n      this.localPeer.videoTrack?.cleanup();\n      this.localPeer.videoTrack = undefined;\n    }\n    this.store.cleanup();\n    this.listener = undefined;\n    if (this.roleChangeManager) {\n      this.eventBus.localRoleUpdate.unsubscribe(this.handleLocalRoleUpdate);\n    }\n  }\n\n  leave(notifyServer?: boolean) {\n    return this.internalLeave(notifyServer);\n  }\n\n  // eslint-disable-next-line complexity\n  private async internalLeave(notifyServer = true, error?: HMSException) {\n    const room = this.store?.getRoom();\n    if (room) {\n      // Wait for preview or join to finish to prevent any race conditions happening because preview/join are called multiple times\n      // This can happen when useEffects are not properly handled in case of react apps\n      // when error is terminal this will go into infinite loop so error?.isTerminal check is needed\n      while ((this.sdkState.isPreviewInProgress || this.sdkState.isJoinInProgress) && !error?.isTerminal) {\n        await workerSleep(100);\n      }\n      const roomId = room.id;\n      // setSessionJoin\n      this.setSessionPeerInfo(this.transport.getWebsocketEndpoint() || '', this.localPeer);\n      this.networkTestManager?.stop();\n      this.eventBus.leave.publish(error);\n      const peerId = this.localPeer?.peerId;\n      HMSLogger.d(this.TAG, `⏳ Leaving room ${roomId}, peerId=${peerId}`);\n      // browsers often put limitation on amount of time a function set on window onBeforeUnload can take in case of\n      // tab refresh or close. Therefore prioritise the leave action over anything else, if tab is closed/refreshed\n      // we would want leave to succeed to stop stucked peer for others. The followup cleanup however is important\n      // for cases where uses stays on the page post leave.\n      await this.transport?.leave(notifyServer, error ? LEAVE_REASON.SDK_REQUEST : LEAVE_REASON.USER_REQUEST);\n      this.cleanup();\n      HMSLogger.d(this.TAG, `✅ Left room ${roomId}, peerId=${peerId}`);\n    }\n  }\n\n  async getAuthTokenByRoomCode(tokenRequest: TokenRequest, tokenRequestOptions?: TokenRequestOptions): Promise<string> {\n    const tokenAPIURL = (tokenRequestOptions || {}).endpoint || 'https://auth.100ms.live/v2/token';\n    this.analyticsTimer.start(TimedEvent.GET_TOKEN);\n    const response = await fetchWithRetry(\n      tokenAPIURL,\n      {\n        method: 'POST',\n        body: JSON.stringify({ code: tokenRequest.roomCode, user_id: tokenRequest.userId }),\n      },\n      [429, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511],\n    );\n\n    const data = await response.json();\n    this.analyticsTimer.end(TimedEvent.GET_TOKEN);\n\n    if (!response.ok) {\n      throw ErrorFactory.APIErrors.ServerErrors(data.code, HMSAction.GET_TOKEN, data.message, false);\n    }\n\n    const { token } = data;\n    if (!token) {\n      throw Error(data.message);\n    }\n    return token;\n  }\n\n  getLocalPeer() {\n    return this.store.getLocalPeer();\n  }\n\n  getPeers() {\n    return this.store.getPeers();\n  }\n\n  getPeerMap() {\n    return this.store.getPeerMap();\n  }\n\n  getAudioOutput() {\n    return this.audioOutput;\n  }\n\n  sendMessage(type: string, message: string) {\n    this.sendMessageInternal({ message, type });\n  }\n\n  async sendBroadcastMessage(message: string, type?: string) {\n    return await this.sendMessageInternal({ message, type });\n  }\n\n  async sendGroupMessage(message: string, roles: HMSRole[], type?: string) {\n    const knownRoles = this.store.getKnownRoles();\n    const recipientRoles =\n      roles.filter(role => {\n        return knownRoles[role.name];\n      }) || [];\n    if (recipientRoles.length === 0) {\n      throw ErrorFactory.GenericErrors.ValidationFailed('No valid role is present', roles);\n    }\n    return await this.sendMessageInternal({ message, recipientRoles: roles, type });\n  }\n\n  async sendDirectMessage(message: string, peerId: string, type?: string) {\n    if (this.localPeer?.peerId === peerId) {\n      throw ErrorFactory.GenericErrors.ValidationFailed('Cannot send message to self');\n    }\n    const isLargeRoom = !!this.store.getRoom()?.large_room_optimization;\n    let recipientPeer = this.store.getPeerById(peerId);\n    if (!recipientPeer) {\n      if (isLargeRoom) {\n        const peer = await this.transport.signal.getPeer({ peer_id: peerId });\n        if (!peer) {\n          throw ErrorFactory.GenericErrors.ValidationFailed('Invalid peer - peer not present in the room', peerId);\n        }\n        recipientPeer = createRemotePeer(peer, this.store);\n      } else {\n        throw ErrorFactory.GenericErrors.ValidationFailed('Invalid peer - peer not present in the room', peerId);\n      }\n    }\n\n    return await this.sendMessageInternal({ message, recipientPeer, type });\n  }\n  async submitSessionFeedback(feedback: HMSSessionFeedback, eventEndpoint?: string) {\n    if (!this.sessionPeerInfo) {\n      HMSLogger.e(this.TAG, 'submitSessionFeedback> session is undefined');\n      throw new Error('session is undefined');\n    }\n    const token = this.sessionPeerInfo.peer.token;\n    if (!token) {\n      HMSLogger.e(this.TAG, 'submitSessionFeedback> token is undefined');\n      throw new Error('Internal error, token is not present');\n    }\n    try {\n      await FeedbackService.sendFeedback({\n        token: token,\n        info: this.sessionPeerInfo,\n        feedback,\n        eventEndpoint,\n      });\n      HMSLogger.i(this.TAG, 'submitSessionFeedback> submitted feedback');\n      this.sessionPeerInfo = undefined;\n    } catch (e) {\n      HMSLogger.e(this.TAG, 'submitSessionFeedback> error occured ', e);\n      throw new Error('Unable to submit feedback');\n    }\n  }\n  async getPeer(peerId: string) {\n    const response = await this.transport.signal.getPeer({ peer_id: peerId });\n    if (response) {\n      return createRemotePeer(response, this.store);\n    }\n    return undefined;\n  }\n\n  async findPeerByName({ query, limit = 10, offset }: FindPeerByNameRequestParams) {\n    const {\n      peers,\n      offset: responseOffset,\n      eof,\n    } = await this.transport.signal.findPeerByName({ query: query?.toLowerCase(), limit, offset });\n    if (peers.length > 0) {\n      return {\n        offset: responseOffset,\n        eof,\n        peers: peers.map(peerInfo => {\n          return createRemotePeer(\n            {\n              peer_id: peerInfo.peer_id,\n              role: peerInfo.role,\n              groups: [],\n              info: {\n                name: peerInfo.name,\n                data: '',\n                user_id: '',\n                type: peerInfo.type,\n              },\n            } as PeerNotificationInfo,\n            this.store,\n          );\n        }),\n      };\n    }\n    return { offset: responseOffset, peers: [] };\n  }\n\n  private async sendMessageInternal({ recipientRoles, recipientPeer, type = 'chat', message }: HMSMessageInput) {\n    if (message.replace(/\\u200b/g, ' ').trim() === '') {\n      HMSLogger.w(this.TAG, 'sendMessage', 'Ignoring empty message send');\n      throw ErrorFactory.GenericErrors.ValidationFailed('Empty message not allowed');\n    }\n    const sendParams: SendMessage = {\n      info: {\n        message,\n        type,\n      },\n    };\n    if (recipientRoles?.length) {\n      sendParams.roles = recipientRoles.map(role => role.name);\n    }\n    if (recipientPeer?.peerId) {\n      sendParams.peer_id = recipientPeer.peerId;\n    }\n    HMSLogger.d(this.TAG, 'Sending Message: ', sendParams);\n    return await this.transport.signal.broadcast(sendParams);\n  }\n\n  async startScreenShare(onStop: () => void, config?: HMSScreenShareConfig) {\n    const publishParams = this.store.getPublishParams();\n    if (!publishParams) {\n      return;\n    }\n\n    const { allowed } = publishParams;\n    const canPublishScreen = allowed && allowed.includes('screen');\n\n    if (!canPublishScreen) {\n      HMSLogger.e(this.TAG, `Role ${this.localPeer?.role} cannot share screen`);\n      return;\n    }\n\n    if (this.localPeer?.auxiliaryTracks?.find(track => track.source === 'screen')) {\n      throw Error('Cannot share multiple screens');\n    }\n\n    const tracks = await this.getScreenshareTracks(onStop, config);\n    if (!this.localPeer) {\n      HMSLogger.d(this.TAG, 'Screenshared when not connected');\n      tracks.forEach(track => {\n        track.cleanup();\n      });\n      return;\n    }\n    this.transport.setOnScreenshareStop(() => {\n      this.stopEndedScreenshare(onStop);\n    });\n    await this.transport.publish(tracks);\n    tracks.forEach(track => {\n      track.peerId = this.localPeer?.peerId;\n      this.localPeer?.auxiliaryTracks.push(track);\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_ADDED, track, this.localPeer!);\n    });\n  }\n\n  private async stopEndedScreenshare(onStop: () => void) {\n    HMSLogger.d(this.TAG, `✅ Screenshare ended natively`);\n    await this.stopScreenShare();\n    onStop();\n  }\n\n  async stopScreenShare() {\n    HMSLogger.d(this.TAG, `✅ Screenshare ended from app`);\n    const screenTracks = this.localPeer?.auxiliaryTracks.filter(t => t.source === 'screen');\n    if (screenTracks) {\n      for (const track of screenTracks) {\n        await this.removeTrack(track.trackId);\n      }\n    }\n  }\n\n  async addTrack(track: MediaStreamTrack, source: HMSTrackSource = 'regular'): Promise<void> {\n    if (!track) {\n      HMSLogger.w(this.TAG, 'Please pass a valid MediaStreamTrack');\n      return;\n    }\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(HMSAction.VALIDATION, 'No local peer present, cannot addTrack');\n    }\n    const isTrackPresent = this.localPeer.auxiliaryTracks.find(t => t.trackId === track.id);\n    if (isTrackPresent) {\n      return;\n    }\n\n    const type = track.kind;\n    const nativeStream = new MediaStream([track]);\n    const stream = new HMSLocalStream(nativeStream);\n\n    const TrackKlass = type === 'audio' ? HMSLocalAudioTrack : HMSLocalVideoTrack;\n    const hmsTrack = new TrackKlass(stream, track, source, this.eventBus);\n    await this.applySettings(hmsTrack);\n    await this.setPlaylistSettings({\n      track,\n      hmsTrack,\n      source,\n    });\n\n    await this.transport?.publish([hmsTrack]);\n    hmsTrack.peerId = this.localPeer?.peerId;\n    this.localPeer?.auxiliaryTracks.push(hmsTrack);\n    this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_ADDED, hmsTrack, this.localPeer!);\n  }\n\n  async removeTrack(trackId: string, internal = false) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(HMSAction.VALIDATION, 'No local peer present, cannot removeTrack');\n    }\n    const trackIndex = this.localPeer.auxiliaryTracks.findIndex(t => t.trackId === trackId);\n    if (trackIndex > -1) {\n      const track = this.localPeer.auxiliaryTracks[trackIndex];\n      if (track.isPublished) {\n        await this.transport!.unpublish([track]);\n      } else {\n        await track.cleanup();\n      }\n      // Stop local playback when playlist track is removed\n      if (!internal) {\n        this.stopPlaylist(track);\n      }\n      this.localPeer.auxiliaryTracks.splice(trackIndex, 1);\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_REMOVED, track, this.localPeer);\n    } else {\n      HMSLogger.w(this.TAG, `No track found for ${trackId}`);\n    }\n  }\n\n  setAnalyticsLevel(level: HMSAnalyticsLevel) {\n    this.analyticsEventsService.level = level;\n  }\n\n  setLogLevel(level: HMSLogLevel) {\n    HMSLogger.level = level;\n  }\n\n  addAudioListener(audioListener: HMSAudioListener) {\n    this.audioListener = audioListener;\n    this.notificationManager?.setAudioListener(audioListener);\n  }\n\n  addConnectionQualityListener(qualityListener: HMSConnectionQualityListener) {\n    this.notificationManager?.setConnectionQualityListener(qualityListener);\n  }\n\n  /** @internal */\n  setIsDiagnostics(isDiagnostics: boolean) {\n    this.isDiagnostics = isDiagnostics;\n  }\n\n  async changeRole(forPeerId: string, toRole: string, force = false) {\n    await this.transport?.signal.requestRoleChange({\n      requested_for: forPeerId,\n      role: toRole,\n      force,\n    });\n  }\n\n  async changeRoleOfPeer(forPeerId: string, toRole: string, force = false) {\n    await this.transport?.signal.requestRoleChange({\n      requested_for: forPeerId,\n      role: toRole,\n      force,\n    });\n  }\n\n  async changeRoleOfPeersWithRoles(roles: HMSRole[], toRole: string) {\n    if (roles.length <= 0 || !toRole) {\n      return;\n    }\n    await this.transport?.signal.requestBulkRoleChange({\n      roles: roles.map((role: HMSRole) => role.name),\n      role: toRole,\n      force: true,\n    });\n  }\n\n  async acceptChangeRole(request: HMSRoleChangeRequest) {\n    await this.transport?.signal.acceptRoleChangeRequest({\n      requested_by: request.requestedBy?.peerId,\n      role: request.role.name,\n      token: request.token,\n    });\n  }\n\n  async endRoom(lock: boolean, reason: string) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(HMSAction.VALIDATION, 'No local peer present, cannot end room');\n    }\n    await this.transport?.signal.endRoom(lock, reason);\n    await this.leave();\n  }\n\n  async removePeer(peerId: string, reason: string) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(HMSAction.VALIDATION, 'No local peer present, cannot remove peer');\n    }\n    await this.transport?.signal.removePeer({ requested_for: peerId, reason });\n  }\n\n  async startRTMPOrRecording(params: RTMPRecordingConfig) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(\n        HMSAction.VALIDATION,\n        'No local peer present, cannot start streaming or recording',\n      );\n    }\n    const signalParams: StartRTMPOrRecordingRequestParams = {\n      meeting_url: params.meetingURL,\n      record: params.record,\n    };\n\n    if (params.rtmpURLs?.length) {\n      signalParams.rtmp_urls = params.rtmpURLs;\n    }\n\n    if (params.resolution) {\n      signalParams.resolution = params.resolution;\n    }\n\n    await this.transport?.signal.startRTMPOrRecording(signalParams);\n  }\n\n  async stopRTMPAndRecording() {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(\n        HMSAction.VALIDATION,\n        'No local peer present, cannot stop streaming or recording',\n      );\n    }\n\n    await this.transport?.signal.stopRTMPAndRecording();\n  }\n\n  async startHLSStreaming(params?: HLSConfig) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(\n        HMSAction.VALIDATION,\n        'No local peer present, cannot start HLS streaming',\n      );\n    }\n    const hlsParams: HLSRequestParams = {};\n    if (params && params.variants && params.variants.length > 0) {\n      hlsParams.variants = params.variants.map(variant => {\n        const hlsVariant: HLSVariant = { meeting_url: variant.meetingURL };\n        if (variant.metadata) {\n          hlsVariant.metadata = variant.metadata;\n        }\n        return hlsVariant;\n      });\n    }\n    if (params?.recording) {\n      hlsParams.hls_recording = {\n        single_file_per_layer: params.recording.singleFilePerLayer,\n        hls_vod: params.recording.hlsVod,\n      };\n    }\n    await this.transport?.signal.startHLSStreaming(hlsParams);\n  }\n\n  async stopHLSStreaming(params?: HLSConfig) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(\n        HMSAction.VALIDATION,\n        'No local peer present, cannot stop HLS streaming',\n      );\n    }\n    if (params) {\n      const hlsParams: HLSRequestParams = {\n        variants: params?.variants?.map(variant => {\n          const hlsVariant: HLSVariant = { meeting_url: variant.meetingURL };\n          if (variant.metadata) {\n            hlsVariant.metadata = variant.metadata;\n          }\n          return hlsVariant;\n        }),\n      };\n      await this.transport?.signal.stopHLSStreaming(hlsParams);\n    }\n    await this.transport?.signal.stopHLSStreaming();\n  }\n\n  async startTranscription(params: TranscriptionConfig) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(\n        HMSAction.VALIDATION,\n        'No local peer present, cannot start transcriptions',\n      );\n    }\n    const transcriptionParams: StartTranscriptionRequestParams = {\n      mode: params.mode,\n    };\n    await this.transport?.signal.startTranscription(transcriptionParams);\n  }\n\n  async stopTranscription(params: TranscriptionConfig) {\n    if (!this.localPeer) {\n      throw ErrorFactory.GenericErrors.NotConnected(\n        HMSAction.VALIDATION,\n        'No local peer present, cannot stop transcriptions',\n      );\n    }\n    if (!params) {\n      throw ErrorFactory.GenericErrors.Signalling(HMSAction.VALIDATION, 'No mode is passed to stop the transcription');\n    }\n    const transcriptionParams: StartTranscriptionRequestParams = {\n      mode: params.mode,\n    };\n    await this.transport?.signal.stopTranscription(transcriptionParams);\n  }\n\n  async sendHLSTimedMetadata(metadataList: HLSTimedMetadata[]) {\n    this.validateJoined('sendHLSTimedMetadata');\n    if (metadataList.length > 0) {\n      const hlsMtParams: HLSTimedMetadataParams = {\n        metadata_objs: metadataList,\n      };\n      await this.transport?.signal.sendHLSTimedMetadata(hlsMtParams);\n    }\n  }\n\n  async changeName(name: string) {\n    this.validateJoined('changeName');\n    const peer = this.store.getLocalPeer();\n    if (peer && peer.name !== name) {\n      await this.transport?.signal.updatePeer({\n        name: name,\n      });\n      this.notificationManager?.updateLocalPeer({ name });\n    }\n  }\n\n  async changeMetadata(metadata: string) {\n    this.validateJoined('changeMetadata');\n    await this.transport?.signal.updatePeer({\n      data: metadata,\n    });\n    this.notificationManager?.updateLocalPeer({ metadata });\n  }\n\n  async setSessionMetadata(metadata: any) {\n    await this.transport?.signal.setSessionMetadata({ key: 'default', data: metadata });\n  }\n\n  async getSessionMetadata() {\n    const response = await this.transport?.signal.getSessionMetadata('default');\n    return response.data;\n  }\n\n  getRoles(): HMSRole[] {\n    return Object.values(this.store.getKnownRoles());\n  }\n\n  async changeTrackState(forRemoteTrack: HMSRemoteTrack, enabled: boolean) {\n    if (forRemoteTrack.type === HMSTrackType.VIDEO && forRemoteTrack.source !== 'regular') {\n      HMSLogger.w(this.TAG, `Muting non-regular video tracks is currently not supported`);\n      return;\n    }\n\n    if (forRemoteTrack.enabled === enabled) {\n      HMSLogger.w(this.TAG, `Aborting change track state, track already has enabled - ${enabled}`, forRemoteTrack);\n      return;\n    }\n\n    if (!this.store.getTrackById(forRemoteTrack.trackId)) {\n      throw ErrorFactory.GenericErrors.ValidationFailed('No track found for change track state', forRemoteTrack);\n    }\n\n    const peer = this.store.getPeerByTrackId(forRemoteTrack.trackId);\n\n    if (!peer) {\n      throw ErrorFactory.GenericErrors.ValidationFailed('No peer found for change track state', forRemoteTrack);\n    }\n\n    await this.transport?.signal.requestTrackStateChange({\n      requested_for: peer.peerId,\n      track_id: forRemoteTrack.trackId,\n      stream_id: forRemoteTrack.stream.id,\n      mute: !enabled,\n    });\n  }\n\n  async changeMultiTrackState(params: HMSChangeMultiTrackStateParams) {\n    if (typeof params.enabled !== 'boolean') {\n      throw ErrorFactory.GenericErrors.ValidationFailed('Pass a boolean for enabled');\n    }\n    const { enabled, roles, type, source } = params;\n    await this.transport?.signal.requestMultiTrackStateChange({\n      value: !enabled,\n      type,\n      source,\n      roles: roles?.map(role => role?.name),\n    });\n  }\n\n  async raiseLocalPeerHand() {\n    this.validateJoined('raiseLocalPeerHand');\n    await this.transport?.signal.joinGroup(HAND_RAISE_GROUP_NAME);\n  }\n  async lowerLocalPeerHand() {\n    this.validateJoined('lowerLocalPeerHand');\n    await this.transport?.signal.leaveGroup(HAND_RAISE_GROUP_NAME);\n  }\n  async raiseRemotePeerHand(peerId: string) {\n    await this.transport?.signal.addToGroup(peerId, HAND_RAISE_GROUP_NAME);\n  }\n  async lowerRemotePeerHand(peerId: string) {\n    await this.transport?.signal.removeFromGroup(peerId, HAND_RAISE_GROUP_NAME);\n  }\n\n  setFrameworkInfo(frameworkInfo: HMSFrameworkInfo) {\n    this.frameworkInfo = { ...this.frameworkInfo, ...frameworkInfo };\n  }\n\n  async attachVideo(track: HMSVideoTrack, videoElement: HTMLVideoElement) {\n    const config = this.store.getConfig();\n    if (config?.autoManageVideo) {\n      track.attach(videoElement);\n    } else {\n      await track.addSink(videoElement);\n    }\n  }\n\n  async detachVideo(track: HMSVideoTrack, videoElement: HTMLVideoElement) {\n    const config = this.store.getConfig();\n    if (config?.autoManageVideo) {\n      track.detach(videoElement);\n    } else {\n      await track.removeSink(videoElement);\n    }\n  }\n\n  private async publish(initialSettings?: InitialSettings, oldRole?: string) {\n    if ([this.store.getPublishParams(), !this.sdkState.published, !isNode].every(value => !!value)) {\n      // if preview asRole(oldRole) is used, use roleChangeManager to diff policy and publish, else do normal publish\n      const publishAction =\n        oldRole && oldRole !== this.localPeer?.role?.name\n          ? () =>\n              this.roleChangeManager?.diffRolesAndPublishTracks({\n                oldRole: this.store.getPolicyForRole(oldRole),\n                newRole: this.localPeer!.role!,\n              })\n          : () => this.getAndPublishTracks(initialSettings);\n\n      await publishAction?.()?.catch(error => {\n        HMSLogger.e(this.TAG, 'Error in publish', error);\n        this.listener?.onError(error);\n      });\n    }\n  }\n\n  private async getAndPublishTracks(initialSettings?: InitialSettings) {\n    const tracks = await this.localTrackManager.getTracksToPublish(initialSettings);\n    await this.setAndPublishTracks(tracks);\n    this.localPeer?.audioTrack?.initAudioLevelMonitor();\n    this.sdkState.published = true;\n  }\n\n  private handleLocalRoleUpdate = async ({ oldRole, newRole }: { oldRole: HMSRole; newRole: HMSRole }) => {\n    this.deviceManager.currentSelection = this.deviceManager.getCurrentSelection();\n    await this.transport.handleLocalRoleUpdate({ oldRole, newRole });\n    await this.roleChangeManager?.handleLocalPeerRoleUpdate({ oldRole, newRole });\n    await this.interactivityCenter.whiteboard.handleLocalRoleUpdate();\n  };\n\n  private async setAndPublishTracks(tracks: HMSLocalTrack[]) {\n    for (const track of tracks) {\n      await this.transport.publish([track]);\n      if (track.isTrackNotPublishing()) {\n        const error = ErrorFactory.TracksErrors.NoDataInTrack(\n          `${track.type} track has no data. muted: ${track.nativeTrack.muted}, readyState: ${track.nativeTrack.readyState}`,\n        );\n        HMSLogger.e(this.TAG, error);\n        this.sendAnalyticsEvent(\n          AnalyticsEventFactory.publish({\n            devices: this.deviceManager.getDevices(),\n            error: error,\n          }),\n        );\n        this.listener?.onError(error);\n      }\n      this.setLocalPeerTrack(track);\n      this.listener?.onTrackUpdate(HMSTrackUpdate.TRACK_ADDED, track, this.localPeer!);\n    }\n    await this.initDeviceManagers();\n  }\n\n  private setLocalPeerTrack(track: HMSLocalTrack) {\n    track.peerId = this.localPeer?.peerId;\n    switch (track.type) {\n      case HMSTrackType.AUDIO:\n        this.localPeer!.audioTrack = track as HMSLocalAudioTrack;\n        break;\n\n      case HMSTrackType.VIDEO:\n        this.localPeer!.videoTrack = track as HMSLocalVideoTrack;\n        break;\n    }\n  }\n\n  private async initDeviceManagers() {\n    // No need to initialise and add listeners if already initialised in preview\n    if (this.sdkState.deviceManagersInitialised) {\n      return;\n    }\n    this.sdkState.deviceManagersInitialised = true;\n    await this.deviceManager.init();\n    if (!(await this.deviceManager.updateOutputDevice(this.store.getConfig()?.settings?.audioOutputDeviceId))) {\n      await this.deviceManager.updateOutputDevice(DeviceStorageManager.getSelection()?.audioOutput?.deviceId);\n    }\n    this.audioSinkManager.init(this.store.getConfig()?.audioSinkElementId);\n  }\n\n  private cleanDeviceManagers() {\n    this.eventBus.deviceChange.unsubscribe(this.handleDeviceChange);\n    this.eventBus.audioPluginFailed.unsubscribe(this.handleAudioPluginError);\n    this.eventBus.autoplayError.unsubscribe(this.handleAutoplayError);\n    this.deviceManager.cleanup();\n    this.audioSinkManager.cleanup();\n  }\n\n  /** @internal */\n  initPreviewTrackAudioLevelMonitor() {\n    const localAudioTrack = this.localPeer?.audioTrack;\n    localAudioTrack?.initAudioLevelMonitor();\n    this.eventBus.trackAudioLevelUpdate.subscribe(audioLevelUpdate => {\n      const hmsSpeakers =\n        audioLevelUpdate && audioLevelUpdate.track.trackId === localAudioTrack?.trackId\n          ? [{ audioLevel: audioLevelUpdate.audioLevel, peer: this.localPeer!, track: localAudioTrack! }]\n          : [];\n      this.store.updateSpeakers(hmsSpeakers);\n      this.audioListener?.onAudioLevelUpdate(hmsSpeakers);\n    });\n    this.eventBus.localAudioSilence.subscribe(this.sendAudioPresenceFailed);\n  }\n\n  private notifyJoin() {\n    const localPeer = this.store.getLocalPeer();\n    const room = this.store.getRoom();\n    if (!room) {\n      HMSLogger.w(this.TAG, 'notify join - room not present');\n      return;\n    }\n\n    room.joinedAt = new Date();\n    if (localPeer) {\n      localPeer.joinedAt = room.joinedAt;\n    }\n\n    if (localPeer?.role) {\n      this.analyticsTimer.end(TimedEvent.JOIN);\n      this.listener?.onJoin(room);\n      return;\n    }\n\n    return new Promise<void>((resolve, reject) => {\n      this.eventBus.policyChange.subscribeOnce(() => {\n        this.analyticsTimer.end(TimedEvent.JOIN);\n        this.listener?.onJoin(room);\n        resolve();\n      });\n\n      this.eventBus.leave.subscribeOnce(ex => {\n        reject(ex);\n      });\n    });\n  }\n\n  /**\n   * Init store and other managers, setup listeners, create local peer, room\n   * @param {HMSConfig} config\n   * @param {HMSPreviewListener} listener\n   */\n  private setUpPreview(config: HMSPreviewConfig, listener: HMSPreviewListener) {\n    this.sdkState.isPreviewCalled = true;\n    this.sdkState.isPreviewInProgress = true;\n    const { roomId, userId, role } = decodeJWT(config.authToken);\n    this.commonSetup(config, roomId, listener);\n    this.store.setConfig(config);\n    /** set after config since we need config to get env for user agent */\n    this.store.createAndSetUserAgent(this.frameworkInfo);\n    this.createAndAddLocalPeerToStore(config, role, userId, config.asRole);\n  }\n\n  /**\n   * Set bitrate and dimensions for playlist track\n   */\n  private async setPlaylistSettings({\n    track,\n    hmsTrack,\n    source,\n  }: {\n    track: MediaStreamTrack;\n    hmsTrack: HMSLocalAudioTrack | HMSLocalVideoTrack;\n    source: string;\n  }) {\n    if (source === 'videoplaylist') {\n      const settings: { maxBitrate?: number; width?: number; height?: number } = {};\n      if (track.kind === 'audio') {\n        settings.maxBitrate = this.playlistSettings.audio?.bitrate || DEFAULT_PLAYLIST_AUDIO_BITRATE;\n      } else {\n        settings.maxBitrate = this.playlistSettings.video?.bitrate || DEFAULT_PLAYLIST_VIDEO_BITRATE;\n        const { width, height } = track.getSettings();\n        settings.width = width;\n        settings.height = height;\n      }\n      // TODO: rt update from policy once policy is updated\n      await hmsTrack.setSettings(settings);\n    } else if (source === 'audioplaylist') {\n      // TODO: rt update from policy once policy is updated\n      await hmsTrack.setSettings({ maxBitrate: 64 });\n    }\n  }\n\n  /**\n   * @param {HMSConfig} config\n   * @param {string} role\n   * @param {string} userId\n   */\n  private createAndAddLocalPeerToStore(config: HMSConfig, role: string, userId: string, asRole?: string) {\n    const policy = this.store.getPolicyForRole(role);\n    const asRolePolicy = asRole ? this.store.getPolicyForRole(asRole) : undefined;\n    const localPeer = new HMSLocalPeer({\n      name: config.userName || '',\n      customerUserId: userId,\n      metadata: config.metaData || '',\n      role: policy,\n      // default value is the original role if user didn't pass asRole in config\n      asRole: asRolePolicy || policy,\n      type: HMSPeerType.REGULAR,\n    });\n\n    this.store.addPeer(localPeer);\n  }\n\n  /**\n   * init managers and set listeners - common for join and preview\n   * @param {HMSConfig} config\n   * @param {string} roomId\n   * @param {HMSPreviewListener | HMSUpdateListener} listener\n   */\n  private commonSetup(config: HMSConfig, roomId: string, listener: HMSPreviewListener | HMSUpdateListener) {\n    this.stringifyMetadata(config);\n    if (!config.initEndpoint) {\n      config.initEndpoint = 'https://prod-init.100ms.live';\n    }\n\n    this.initStoreAndManagers(listener);\n    if (!this.store.getRoom()) {\n      this.store.setRoom(new HMSRoom(roomId));\n    }\n  }\n\n  /**\n   * Remove deviceId's passed in config for join if preview was already called\n   * @param {HMSConfig} config\n   */\n  private removeDevicesFromConfig(config: HMSConfig) {\n    const storedConfig = this.store.getConfig();\n    if (storedConfig && config.settings) {\n      // preview was called\n      delete config.settings.audioOutputDeviceId;\n      delete config.settings.videoDeviceId;\n      delete config.settings.audioInputDeviceId;\n    }\n  }\n\n  /**\n   * Get screenshare based on policy and audioOnly flag\n   * @param {function} onStop\n   * @param config\n   * @returns\n   */\n  private async getScreenshareTracks(onStop: () => void, config?: HMSScreenShareConfig) {\n    const isOptimizedScreenShare = this.transport.isFlagEnabled(InitFlags.FLAG_SCALE_SCREENSHARE_BASED_ON_PIXELS);\n    const [videoTrack, audioTrack] = await this.localTrackManager.getLocalScreen(config, isOptimizedScreenShare);\n\n    const handleEnded = () => {\n      this.stopEndedScreenshare(onStop);\n    };\n\n    const tracks = [];\n    if (config?.audioOnly) {\n      videoTrack.nativeTrack.stop();\n      if (!audioTrack) {\n        throw ErrorFactory.TracksErrors.NothingToReturn(\n          HMSAction.TRACK,\n          'Select share audio when sharing screen',\n          'No audio found',\n        );\n      }\n      tracks.push(audioTrack);\n      audioTrack.nativeTrack.addEventListener('ended', handleEnded);\n    } else {\n      tracks.push(videoTrack);\n      videoTrack.nativeTrack.addEventListener('ended', handleEnded);\n      // audio track is not always available\n      if (audioTrack) {\n        tracks.push(audioTrack);\n      }\n    }\n    return tracks;\n  }\n\n  private unpauseRemoteVideoTracks = () => {\n    this.store.getRemoteVideoTracks().forEach(track => track.handleTrackUnmute());\n  };\n\n  private sendAudioPresenceFailed = () => {\n    const error = ErrorFactory.TracksErrors.NoAudioDetected(HMSAction.PREVIEW);\n    HMSLogger.w(this.TAG, 'Audio Presence Failure', this.transportState, error);\n    // this.sendAnalyticsEvent(\n    //   AnalyticsEventFactory.audioDetectionFail(error, this.deviceManager.getCurrentSelection().audioInput),\n    // );\n    if (this.isDiagnostics) {\n      this.listener?.onError(error);\n    }\n  };\n\n  private sendJoinAnalyticsEvent = (is_preview_called = false, error?: HMSException) => {\n    this.eventBus.analytics.publish(\n      AnalyticsEventFactory.join({\n        error,\n        ...this.analyticsTimer.getTimes(),\n        time: this.analyticsTimer.getTimeTaken(TimedEvent.JOIN),\n        is_preview_called,\n        retries_join: this.transport.joinRetryCount,\n      }),\n    );\n  };\n\n  private sendPreviewAnalyticsEvent = (error?: HMSException) => {\n    this.eventBus.analytics.publish(\n      AnalyticsEventFactory.preview({\n        error,\n        ...this.analyticsTimer.getTimes(),\n        time: this.analyticsTimer.getTimeTaken(TimedEvent.PREVIEW),\n      }),\n    );\n  };\n\n  private sendAnalyticsEvent = (event: AnalyticsEvent) => {\n    // don't send analytics for diagnostics\n    if (this.isDiagnostics) {\n      return;\n    }\n    this.analyticsEventsService.queue(event).flush();\n  };\n\n  private stopPlaylist(track: HMSLocalTrack) {\n    if (track.source === 'audioplaylist') {\n      this.playlistManager.stop(HMSPlaylistType.audio);\n    } else if (track.source === 'videoplaylist') {\n      this.playlistManager.stop(HMSPlaylistType.video);\n    }\n  }\n\n  // eslint-disable-next-line complexity\n  private async applySettings(track: HMSLocalTrack) {\n    validatePublishParams(this.store);\n    const publishParams = this.store.getPublishParams();\n    // this is not needed but added for avoiding ? later\n    if (!publishParams) {\n      return;\n    }\n    if (track instanceof HMSLocalVideoTrack) {\n      const publishKey = track.source === 'regular' ? 'video' : track.source === 'screen' ? 'screen' : '';\n      if (!publishKey || !publishParams.allowed.includes(publishKey)) {\n        return;\n      }\n      const video = publishParams[publishKey];\n      if (!video) {\n        return;\n      }\n      const settings = new HMSVideoTrackSettingsBuilder()\n        .codec(video.codec as HMSVideoCodec)\n        .maxBitrate(video.bitRate)\n        .maxFramerate(video.frameRate)\n        .setWidth(video.width)\n        .setHeight(video.height)\n        .build();\n\n      await track.setSettings(settings);\n    } else if (track instanceof HMSLocalAudioTrack) {\n      if (!publishParams.allowed.includes('audio')) {\n        return;\n      }\n      const settings = new HMSAudioTrackSettingsBuilder()\n        .codec(publishParams.audio.codec as HMSAudioCodec)\n        .maxBitrate(publishParams.audio.bitRate)\n        .build();\n      await track.setSettings(settings);\n    }\n  }\n}\n","import { produce } from 'immer';\nimport shallow from 'zustand/shallow';\nimport create, {\n  EqualityChecker,\n  PartialState,\n  SetState,\n  State,\n  StateSelector,\n  StateSliceListener,\n  StoreApi,\n} from 'zustand/vanilla';\nimport { HMSNotifications } from './HMSNotifications';\nimport { HMSSDKActions } from './HMSSDKActions';\nimport { NamedSetState } from './internalTypes';\nimport { storeNameWithTabTitle } from '../common/storeName';\nimport { HMSDiagnosticsInterface } from '../diagnostics/interfaces';\nimport { IHMSActions } from '../IHMSActions';\nimport { IHMSStatsStoreReadOnly, IHMSStore, IHMSStoreReadOnly, IStore } from '../IHMSStore';\nimport { isBrowser } from '../internal';\nimport { createDefaultStoreState, HMSGenericTypes, HMSStore } from '../schema';\nimport { IHMSNotifications } from '../schema/notification';\nimport { HMSSdk } from '../sdk';\nimport { HMSStats } from '../webrtc-stats';\n\ndeclare global {\n  interface Window {\n    __hms: HMSReactiveStore;\n    __triggerBeamEvent__: (args: any) => void;\n  }\n}\n\nexport class HMSReactiveStore<T extends HMSGenericTypes = { sessionStore: Record<string, any> }> {\n  private readonly sdk?: HMSSdk;\n  private readonly actions: IHMSActions<T>;\n  private readonly store: IHMSStore<T>;\n  private readonly notifications: HMSNotifications<T>;\n  private stats?: HMSStats;\n  private diagnostics?: HMSDiagnosticsInterface;\n  /** @TODO store flag for both HMSStore and HMSInternalsStore */\n  private initialTriggerOnSubscribe: boolean;\n\n  constructor(hmsStore?: IHMSStore<T>, hmsActions?: IHMSActions<T>, hmsNotifications?: HMSNotifications<T>) {\n    if (hmsStore) {\n      this.store = hmsStore;\n    } else {\n      this.store = HMSReactiveStore.createNewHMSStore<HMSStore<T>>(\n        storeNameWithTabTitle('HMSStore'),\n        createDefaultStoreState,\n      );\n    }\n    if (hmsNotifications) {\n      this.notifications = hmsNotifications;\n    } else {\n      this.notifications = new HMSNotifications(this.store);\n    }\n    if (hmsActions) {\n      this.actions = hmsActions;\n    } else {\n      this.sdk = new HMSSdk();\n      this.actions = new HMSSDKActions(this.store, this.sdk, this.notifications);\n    }\n\n    // @ts-ignore\n    this.actions.setFrameworkInfo({ type: 'js', sdkVersion: require('../../package.json').version });\n\n    this.initialTriggerOnSubscribe = false;\n\n    if (isBrowser) {\n      // @ts-ignore\n      window.__hms = this;\n    }\n  }\n\n  /**\n   * By default, store.subscribe does not call the handler with the current state at time of subscription,\n   * this behaviour can be modified by calling this function. What it means is that instead of calling the\n   * handler only for changes which happen post subscription we'll also call it exactly once at the time\n   * of subscription with the current state. This behaviour is similar to that of BehaviourSubject in RxJS.\n   * This will be an irreversible change\n   *\n   * Note: you don't need this if you're using our React hooks, it takes care of this requirement.\n   */\n  triggerOnSubscribe(): void {\n    if (this.initialTriggerOnSubscribe) {\n      // already done\n      return;\n    }\n    HMSReactiveStore.makeStoreTriggerOnSubscribe(this.store);\n    this.initialTriggerOnSubscribe = true;\n  }\n\n  /**\n   * A reactive store which has a subscribe method you can use in combination with selectors\n   * to subscribe to a subset of the store. The store serves as a single source of truth for\n   * all data related to the corresponding HMS Room.\n   */\n  getStore(): IHMSStoreReadOnly {\n    return this.store;\n  }\n\n  /**\n   * Any action which may modify the store or may need to talk to the SDK will happen\n   * through the IHMSActions instance returned by this\n   *\n   * @deprecated use getActions\n   */\n  getHMSActions(): IHMSActions<T> {\n    return this.actions;\n  }\n\n  /**\n   * Any action which may modify the store or may need to talk to the SDK will happen\n   * through the IHMSActions instance returned by this\n   */\n  getActions(): IHMSActions<T> {\n    return this.actions;\n  }\n\n  /**\n   * This return notification handler function to which you can pass your callback to\n   * receive notifications like peer joined, peer left, etc. to show in your UI or use\n   * for analytics\n   */\n  getNotifications(): IHMSNotifications {\n    return { onNotification: this.notifications.onNotification };\n  }\n\n  getStats = (): IHMSStatsStoreReadOnly => {\n    if (!this.stats) {\n      this.stats = new HMSStats(this.store as unknown as IHMSStore, this.sdk);\n    }\n    return this.stats;\n  };\n\n  getDiagnosticsSDK = (): HMSDiagnosticsInterface => {\n    if (!this.diagnostics) {\n      this.diagnostics = this.actions.initDiagnostics();\n    }\n\n    return this.diagnostics;\n  };\n\n  /**\n   * @internal\n   */\n  static createNewHMSStore<T extends State>(storeName: string, defaultCreatorFn: () => T): IStore<T> {\n    const hmsStore = create<T>(() => defaultCreatorFn());\n    // make set state immutable, by passing functions through immer\n    const savedSetState = hmsStore.setState;\n    hmsStore.setState = (partial: any) => {\n      const nextState = typeof partial === 'function' ? produce(partial) : partial;\n      savedSetState(nextState);\n    };\n    // add option to pass selector to getState\n    const prevGetState = hmsStore.getState;\n    // eslint-disable-next-line complexity\n    hmsStore.getState = <StateSlice>(selector?: StateSelector<T, StateSlice>) => {\n      return selector ? selector(prevGetState()) : prevGetState();\n    };\n    HMSReactiveStore.compareWithShallowCheckInSubscribe(hmsStore);\n    const namedSetState = HMSReactiveStore.setUpDevtools(hmsStore, storeName);\n    return { ...hmsStore, namedSetState };\n  }\n\n  /**\n   * @internal\n   */\n  static makeStoreTriggerOnSubscribe<T extends State>(store: IStore<T>) {\n    const prevSubscribe = store.subscribe;\n    store.subscribe = <StateSlice>(\n      listener: StateSliceListener<StateSlice>,\n      selector?: StateSelector<T, StateSlice>,\n      equalityFn?: EqualityChecker<StateSlice>,\n    ): (() => void) => {\n      // initial call, the prev state will always be null for this\n      listener(store.getState(selector), undefined as unknown as StateSlice);\n      // then subscribe\n      return prevSubscribe(listener, selector!, equalityFn);\n    };\n  }\n\n  /**\n   * use shallow equality check by default for subscribe to optimize for array/object selectors.\n   * by default zustand does only reference matching so something like, getPeers for eg. would trigger\n   * the corresponding component even if peers didn't actually change, as selectPeers creates a new array every time.\n   * Although the array reference changes, the order of peers and peer objects don't themselves change in this case,\n   * and a shallow check avoids that triggering.\n   * @private\n   */\n  private static compareWithShallowCheckInSubscribe<T extends State>(hmsStore: StoreApi<T>) {\n    const prevSubscribe = hmsStore.subscribe;\n    hmsStore.subscribe = <StateSlice>(\n      listener: StateSliceListener<StateSlice>,\n      selector?: StateSelector<T, StateSlice>,\n      equalityFn?: EqualityChecker<StateSlice>,\n    ): (() => void) => {\n      if (!selector) {\n        selector = (store): StateSlice => store as unknown as StateSlice;\n      }\n      equalityFn = equalityFn || shallow;\n      return prevSubscribe(listener, selector, equalityFn);\n    };\n  }\n\n  /**\n   * @private\n   * @privateRemarks\n   * sets up redux devtools for the store, so redux extension can be used to visualize the store.\n   * zustand's default devtool middleware only enhances the set function, we're here creating another nameSetState in\n   * IHMStore which behaves like setState but takes an extra parameter for action name\n   * https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Methods.md\n   * modified version of zustand's devtools - https://github.com/pmndrs/zustand/blob/v3.5.7/src/middleware.ts#L46\n   */\n  private static setUpDevtools<T extends State>(api: StoreApi<T>, prefix: string): NamedSetState<T> {\n    let extension;\n    try {\n      extension = (window as any).__REDUX_DEVTOOLS_EXTENSION__ || (window as any).top.__REDUX_DEVTOOLS_EXTENSION__;\n    } catch {}\n    if (!extension) {\n      return (fn: any) => {\n        api.setState(fn);\n      };\n    }\n    const devtools = extension.connect(HMSReactiveStore.devtoolsOptions(prefix));\n    devtools.prefix = prefix ? `${prefix} > ` : '';\n    const savedSetState = api.setState;\n    api.setState = (fn: any) => {\n      savedSetState(fn);\n      devtools.send(`${devtools.prefix}setState`, api.getState());\n    };\n\n    devtools.subscribe(HMSReactiveStore.devtoolsSubscribe(devtools, api, savedSetState));\n\n    devtools.send('setUpStore', api.getState());\n\n    return (fn: any, action?: string) => {\n      savedSetState(fn);\n      const actionName = action ? action : `${devtools.prefix}action`;\n      devtools.send(actionName, api.getState());\n    };\n  }\n\n  /**\n   * https://github.com/zalmoxisus/redux-devtools-extension/blob/master/docs/API/Arguments.md\n   */\n  private static devtoolsOptions(prefix: string) {\n    return {\n      name: prefix,\n      actionsBlacklist: ['audioLevel', 'playlistProgress', 'connectionQuality'], // very high frequency update, pollutes the action history\n    };\n  }\n\n  /**\n   * redux devtools allows for time travel debugging where it sends an action to update the store, users can\n   * also export and import state in the devtools, listen to the corresponding functions from devtools and take\n   * required action.\n   * @param devtools - reference to devtools extension object\n   * @param api\n   * @param savedSetState - setState saved before its modified to update devtools\n   * @private\n   */\n  private static devtoolsSubscribe<T extends State>(devtools: any, api: StoreApi<T>, savedSetState: SetState<T>) {\n    // disabling complexity check instead of refactoring so as to keep the code close to zustand's and make\n    // any future update based on upstream changes easier.\n    // eslint-disable-next-line complexity\n    return (message: any) => {\n      if (message.type === 'DISPATCH' && message.state) {\n        const ignoreState = ['JUMP_TO_ACTION', 'JUMP_TO_STATE'].includes(message.payload.type);\n        if (!ignoreState) {\n          // manual dispatch from the extension\n          api.setState(JSON.parse(message.state));\n        } else {\n          // for time travel, no need to add new state changes in devtools\n          savedSetState(JSON.parse(message.state));\n        }\n      } else if (message.type === 'DISPATCH' && message.payload?.type === 'COMMIT') {\n        devtools.init(api.getState());\n      } else if (message.type === 'DISPATCH' && message.payload?.type === 'IMPORT_STATE') {\n        const actions = message.payload.nextLiftedState?.actionsById;\n        const computedStates = message.payload.nextLiftedState?.computedStates || [];\n\n        computedStates.forEach(({ state }: { state: PartialState<T> }, index: number) => {\n          const action = actions[index] || `${devtools.prefix}setState`;\n          if (index === 0) {\n            devtools.init(state);\n          } else {\n            savedSetState(state);\n            devtools.send(action, api.getState());\n          }\n        });\n      }\n    };\n  }\n}\n","import { IHMSStatsStore, IHMSStore } from '../IHMSStore';\nimport { HMSPeerStats, HMSTrackStats } from '../interfaces';\nimport { mergeLocalTrackStats, mergeNewIndividualStatsInDraft } from '../reactive-store/sdkUtils/storeMergeUtils';\nimport { HMSWebrtcStats } from '../rtc-stats';\nimport { createDefaultStatsStore, HMSPeerID, HMSRoomState, HMSTrack, HMSTrackID } from '../schema';\nimport { HMSSdk } from '../sdk';\nimport {\n  selectLocalAudioTrackID,\n  selectLocalPeerID,\n  selectLocalVideoTrackID,\n  selectRoomState,\n  selectTracksMap,\n} from '../selectors';\n\ntype Unsubscribe = (() => void) | undefined;\nexport const subscribeToSdkWebrtcStats = (sdk: HMSSdk, webrtcStore: IHMSStatsStore, store: IHMSStore) => {\n  // also used as flag to check if webrtc internals has been initialised\n  let unsubscribe: Unsubscribe;\n  /**\n   * Connected to room, webrtc internals can be initialized\n   */\n  if (store.getState(selectRoomState) === HMSRoomState.Connected) {\n    unsubscribe = initAndSubscribeWebrtcStore(sdk, webrtcStore, store);\n  }\n\n  /**\n   * Subscribe to room state for 2 purposes:\n   * - unsubscribe on leave\n   * - if internals is called before join is completed, init internals when roomState changes to connected\n   */\n  store.subscribe(roomState => {\n    if ([HMSRoomState.Connected, HMSRoomState.Reconnecting].includes(roomState)) {\n      if (!unsubscribe) {\n        unsubscribe = initAndSubscribeWebrtcStore(sdk, webrtcStore, store);\n      }\n      // room state can go to disconnecting and back to connected if leave fails, we don't want to resubscribe in that case\n    } else if ([HMSRoomState.Disconnected, HMSRoomState.Failed].includes(roomState)) {\n      if (unsubscribe) {\n        resetHMSStatsStore(webrtcStore, roomState);\n        unsubscribe();\n        // set flag to defined after unsubscribing to enable subscribing again\n        unsubscribe = undefined;\n      }\n    }\n  }, selectRoomState);\n};\n\nconst initAndSubscribeWebrtcStore = (sdk: HMSSdk, webrtcStore: IHMSStatsStore, store: IHMSStore) => {\n  const unsubLocalPeer = updateLocalPeerInWebrtcStore(store, webrtcStore);\n\n  sdk.getWebrtcInternals()?.start();\n  const unsubSdkStats = sdk\n    .getWebrtcInternals()\n    ?.onStatsChange(stats => updateWebrtcStoreStats(webrtcStore, stats, store, sdk));\n\n  return () => {\n    unsubLocalPeer();\n    unsubSdkStats && unsubSdkStats();\n  };\n};\n\nconst updateLocalPeerInWebrtcStore = (store: IHMSStore, webrtcStore: IHMSStatsStore) => {\n  let unsubID: Unsubscribe, unsubVideoTrackID: Unsubscribe, unsubAudioTrackID: Unsubscribe;\n  if (store.getState(selectLocalPeerID)) {\n    webrtcStore.namedSetState(draft => {\n      draft.localPeer.id = store.getState(selectLocalPeerID);\n    }, 'localpeer-id');\n  } else {\n    unsubID = store.subscribe(localPeerID => {\n      localPeerID &&\n        webrtcStore.namedSetState(draft => {\n          draft.localPeer.id = localPeerID;\n        }, 'localpeer-id');\n    }, selectLocalPeerID);\n  }\n\n  if (store.getState(selectLocalVideoTrackID)) {\n    webrtcStore.namedSetState(draft => {\n      draft.localPeer.videoTrack = store.getState(selectLocalVideoTrackID);\n    }, 'localpeer-videotrack-id');\n  } else {\n    unsubVideoTrackID = store.subscribe(videoTrackID => {\n      videoTrackID &&\n        webrtcStore.namedSetState(draft => {\n          draft.localPeer.videoTrack = videoTrackID;\n        }, 'localpeer-videotrack-id');\n    }, selectLocalVideoTrackID);\n  }\n\n  if (store.getState(selectLocalAudioTrackID)) {\n    webrtcStore.namedSetState(draft => {\n      draft.localPeer.audioTrack = store.getState(selectLocalAudioTrackID);\n    }, 'localpeer-audiotrack-id');\n  } else {\n    unsubAudioTrackID = store.subscribe(audioTrackID => {\n      audioTrackID &&\n        webrtcStore.namedSetState(draft => {\n          draft.localPeer.audioTrack = audioTrackID;\n        }, 'localpeer-audiotrack-id');\n    }, selectLocalAudioTrackID);\n  }\n\n  return () => {\n    unsubID?.();\n    unsubVideoTrackID?.();\n    unsubAudioTrackID?.();\n  };\n};\n\nconst updateWebrtcStoreStats = (\n  webrtcStore: IHMSStatsStore,\n  stats: HMSWebrtcStats,\n  hmsStore: IHMSStore,\n  sdk: HMSSdk,\n) => {\n  const tracks: Record<HMSTrackID, HMSTrack> = hmsStore.getState(selectTracksMap);\n  webrtcStore.namedSetState(store => {\n    const localPeerID = hmsStore.getState(selectLocalPeerID);\n    const newTrackStats: Record<HMSTrackID, HMSTrackStats> = {};\n    const trackIDs = Object.keys(tracks).filter(trackID => tracks[trackID].peerId !== localPeerID);\n\n    for (const trackID of trackIDs) {\n      const sdkTrackStats = stats.getRemoteTrackStats(trackID);\n      if (sdkTrackStats) {\n        newTrackStats[trackID] = sdkTrackStats;\n      }\n    }\n\n    mergeNewIndividualStatsInDraft<HMSTrackID, HMSTrackStats>(store.remoteTrackStats, newTrackStats);\n\n    // @TODO: Include all peer stats, own ticket, transmit local peer stats to other peer's using biz\n    const newPeerStats = { [localPeerID]: stats.getLocalPeerStats() };\n    mergeNewIndividualStatsInDraft<HMSPeerID, HMSPeerStats>(store.peerStats, newPeerStats);\n    // @ts-ignore\n    mergeLocalTrackStats(store.localTrackStats, stats.getLocalTrackStats(), sdk.store.getLocalPeerTracks());\n  }, 'webrtc-stats');\n};\n\nconst resetHMSStatsStore = (store: IHMSStatsStore, reason = 'resetState') => {\n  store.namedSetState(draft => {\n    Object.assign(draft, createDefaultStatsStore());\n  }, reason);\n};\n","import { Subscribe } from 'zustand/vanilla';\nimport { HMSReactiveStore } from './internal';\nimport { subscribeToSdkWebrtcStats } from './webrtc-stats-store';\nimport { storeNameWithTabTitle } from '../common/storeName';\nimport { GetState, IHMSStatsStore, IHMSStatsStoreReadOnly, IHMSStore } from '../IHMSStore';\nimport { createDefaultStatsStore, HMSStatsStore } from '../schema';\nimport { HMSSdk } from '../sdk';\nimport { selectRoomState } from '../selectors';\n\n/**\n * @internal\n */\nexport class HMSStats implements IHMSStatsStoreReadOnly {\n  readonly getState: GetState<HMSStatsStore>;\n  readonly subscribe: Subscribe<HMSStatsStore>;\n  readonly getPublishPeerConnection: () => Promise<RTCPeerConnection | undefined>;\n  readonly getSubscribePeerConnection: () => Promise<RTCPeerConnection | undefined>;\n  private readonly store: IHMSStatsStore;\n\n  constructor(private hmsStore: IHMSStore, private sdk?: HMSSdk) {\n    this.store = HMSReactiveStore.createNewHMSStore<HMSStatsStore>(\n      storeNameWithTabTitle('HMSStatsStore'),\n      createDefaultStatsStore,\n    );\n\n    this.getState = this.store.getState;\n    this.subscribe = this.store.subscribe;\n\n    this.getPublishPeerConnection = () =>\n      new Promise<RTCPeerConnection | undefined>(resolve => {\n        if (this.hmsStore.getState(selectRoomState) === 'Connected') {\n          resolve(this.sdk?.getWebrtcInternals()?.getPublishPeerConnection());\n        } else {\n          this.hmsStore.subscribe(roomState => {\n            if (roomState === 'Connected') {\n              resolve(this.sdk?.getWebrtcInternals()?.getPublishPeerConnection());\n            }\n          }, selectRoomState);\n        }\n      });\n\n    this.getSubscribePeerConnection = () =>\n      new Promise<RTCPeerConnection | undefined>(resolve => {\n        if (this.hmsStore.getState(selectRoomState) === 'Connected') {\n          resolve(this.sdk?.getWebrtcInternals()?.getSubscribePeerConnection());\n        } else {\n          this.hmsStore.subscribe(roomState => {\n            if (roomState === 'Connected') {\n              resolve(this.sdk?.getWebrtcInternals()?.getSubscribePeerConnection());\n            }\n          }, selectRoomState);\n        }\n      });\n\n    if (!this.sdk) {\n      return;\n    }\n\n    subscribeToSdkWebrtcStats(this.sdk, this.store, this.hmsStore);\n  }\n}\n","import { createSelector } from 'reselect';\nimport { HMSPreferredSimulcastLayer, RID, simulcastMapping } from '../internal';\nimport { HMSPeerID, HMSStatsStore, HMSTrackID } from '../schema';\nimport { byIDCurry } from '../selectors/common';\n\nconst selectLocalPeerID = (store: HMSStatsStore) => store.localPeer.id;\nconst selectLocalAudioTrackID = (store: HMSStatsStore) => store.localPeer.audioTrack;\nconst selectLocalVideoTrackID = (store: HMSStatsStore) => store.localPeer.videoTrack;\nconst selectPeerID = (_store: HMSStatsStore, peerID: HMSPeerID | undefined) => peerID;\nconst selectTrackID = (_store: HMSStatsStore, trackID: HMSTrackID | undefined) => trackID;\nconst selectRemoteTrackStatsMap = (store: HMSStatsStore) => store.remoteTrackStats;\nconst selectPeerStatsMap = (store: HMSStatsStore) => store.peerStats;\nconst selectLocalTrackStatsMap = (store: HMSStatsStore) => store.localTrackStats;\n\n/**\n * Local peer stats selectors\n */\nconst localPeerStats = createSelector(\n  [selectPeerStatsMap, selectLocalPeerID],\n  (storePeerStats, localPeerID) => storePeerStats[localPeerID],\n);\n\n/**\n *  The total number of packets lost during the call\n */\nconst packetsLost = createSelector(localPeerStats, localPeerStats => localPeerStats?.subscribe?.packetsLost);\n\nconst jitter = createSelector(localPeerStats, localPeerStats => localPeerStats?.subscribe?.jitter);\n\n/**\n * The bitrate at which all the local tracks are being published at\n */\nconst publishBitrate = createSelector(localPeerStats, localPeerStats => localPeerStats?.publish?.bitrate);\n\n/**\n * The bitrate at which all the remote tracks are being received at\n */\nconst subscribeBitrate = createSelector(localPeerStats, localPeerStats => localPeerStats?.subscribe?.bitrate);\n\n/**\n * The total bitrate available for publishing\n */\nconst availablePublishBitrate = createSelector(\n  localPeerStats,\n  localPeerStats => localPeerStats?.publish?.availableOutgoingBitrate,\n);\n\n/**\n * The total bitrate available for subscribing to remote peers\n */\nconst availableSubscribeBitrate = createSelector(\n  localPeerStats,\n  localPeerStats => localPeerStats?.subscribe?.availableIncomingBitrate,\n);\n\n/**\n * The total bytes sent by the local peer\n */\nconst totalBytesSent = createSelector(localPeerStats, localPeerStats => localPeerStats?.publish?.bytesSent);\n\n/**\n * The total bytes received by the local peer\n */\nconst totalBytesReceived = createSelector(localPeerStats, localPeerStats => localPeerStats?.subscribe?.bytesReceived);\n\n/**\n * By ID Selectors\n * To be used for remote tracks\n */\n\nconst selectPeerStatsByIDBare = createSelector([selectPeerStatsMap, selectPeerID], (storePeerStats, peerID) =>\n  peerID ? storePeerStats[peerID] : undefined,\n);\n\nconst selectTrackStatsByIDBare = createSelector(\n  [selectRemoteTrackStatsMap, selectTrackID],\n  (storeTrackStats, trackID) => (trackID ? storeTrackStats[trackID] : undefined),\n);\n\nconst selectLocalTrackStatsByIDBare = createSelector(\n  [selectLocalTrackStatsMap, selectTrackID],\n  (storeLocalTrackStats, trackID) => (trackID ? storeLocalTrackStats[trackID] : undefined),\n);\n\n/**\n * Stats(bitrate, bytes sent/received, etc...) for a single peer given the peer ID\n */\nconst peerStatsByID = byIDCurry(selectPeerStatsByIDBare);\n\n/**\n * Stats(bitrate, bytes sent/received, framerate, FPS, etc...) for a remote track\n */\nconst trackStatsByID = byIDCurry(selectTrackStatsByIDBare);\n\n/**\n * Local track stats selectors\n */\n\nconst localAudioTrackStats = createSelector(\n  [selectLocalTrackStatsMap, selectLocalAudioTrackID],\n  (trackStats, trackID) => (trackID ? trackStats[trackID]?.[0] : undefined),\n);\n\nconst localAudioTrackStatsByID = byIDCurry(\n  createSelector(selectLocalTrackStatsByIDBare, trackStats => trackStats?.[0]),\n);\n\nconst localVideoTrackStats = createSelector(\n  [selectLocalTrackStatsMap, selectLocalVideoTrackID],\n  (trackStats, trackID) => (trackID ? trackStats[trackID]?.[0] : undefined),\n);\n\nconst localVideoTrackStatsByID = byIDCurry(createSelector(selectLocalTrackStatsByIDBare, trackStats => trackStats));\n\nconst localVideoTrackStatsByLayer = (layer?: HMSPreferredSimulcastLayer) =>\n  byIDCurry(\n    createSelector(selectLocalTrackStatsByIDBare, stats => {\n      const rid = (Object.keys(simulcastMapping) as RID[]).find(key => simulcastMapping[key] === layer);\n      return layer ? stats?.find(stat => stat.rid === rid) || stats?.[0] : stats?.[0];\n    }),\n  );\n\nexport const selectHMSStats = {\n  localPeerStats,\n  packetsLost,\n  jitter,\n  publishBitrate,\n  subscribeBitrate,\n  availablePublishBitrate,\n  availableSubscribeBitrate,\n  totalBytesSent,\n  totalBytesReceived,\n  peerStatsByID,\n  trackStatsByID,\n  localAudioTrackStatsByID,\n  localVideoTrackStatsByID,\n  localVideoTrackStatsByLayer,\n  localAudioTrackStats,\n  localVideoTrackStats,\n};\n","/**\n* @vue/reactivity v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { hasChanged, extend, isArray, isIntegerKey, isSymbol, isMap, hasOwn, isObject, makeMap, toRawType, capitalize, def, isFunction, EMPTY_OBJ, isSet, isPlainObject, NOOP, remove } from '@vue/shared';\n\nfunction warn(msg, ...args) {\n  console.warn(`[Vue warn] ${msg}`, ...args);\n}\n\nlet activeEffectScope;\nclass EffectScope {\n  constructor(detached = false) {\n    this.detached = detached;\n    /**\n     * @internal\n     */\n    this._active = true;\n    /**\n     * @internal\n     */\n    this.effects = [];\n    /**\n     * @internal\n     */\n    this.cleanups = [];\n    this._isPaused = false;\n    this.parent = activeEffectScope;\n    if (!detached && activeEffectScope) {\n      this.index = (activeEffectScope.scopes || (activeEffectScope.scopes = [])).push(\n        this\n      ) - 1;\n    }\n  }\n  get active() {\n    return this._active;\n  }\n  pause() {\n    if (this._active) {\n      this._isPaused = true;\n      let i, l;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].pause();\n        }\n      }\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].pause();\n      }\n    }\n  }\n  /**\n   * Resumes the effect scope, including all child scopes and effects.\n   */\n  resume() {\n    if (this._active) {\n      if (this._isPaused) {\n        this._isPaused = false;\n        let i, l;\n        if (this.scopes) {\n          for (i = 0, l = this.scopes.length; i < l; i++) {\n            this.scopes[i].resume();\n          }\n        }\n        for (i = 0, l = this.effects.length; i < l; i++) {\n          this.effects[i].resume();\n        }\n      }\n    }\n  }\n  run(fn) {\n    if (this._active) {\n      const currentEffectScope = activeEffectScope;\n      try {\n        activeEffectScope = this;\n        return fn();\n      } finally {\n        activeEffectScope = currentEffectScope;\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(`cannot run an inactive effect scope.`);\n    }\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  on() {\n    activeEffectScope = this;\n  }\n  /**\n   * This should only be called on non-detached scopes\n   * @internal\n   */\n  off() {\n    activeEffectScope = this.parent;\n  }\n  stop(fromParent) {\n    if (this._active) {\n      this._active = false;\n      let i, l;\n      for (i = 0, l = this.effects.length; i < l; i++) {\n        this.effects[i].stop();\n      }\n      this.effects.length = 0;\n      for (i = 0, l = this.cleanups.length; i < l; i++) {\n        this.cleanups[i]();\n      }\n      this.cleanups.length = 0;\n      if (this.scopes) {\n        for (i = 0, l = this.scopes.length; i < l; i++) {\n          this.scopes[i].stop(true);\n        }\n        this.scopes.length = 0;\n      }\n      if (!this.detached && this.parent && !fromParent) {\n        const last = this.parent.scopes.pop();\n        if (last && last !== this) {\n          this.parent.scopes[this.index] = last;\n          last.index = this.index;\n        }\n      }\n      this.parent = void 0;\n    }\n  }\n}\nfunction effectScope(detached) {\n  return new EffectScope(detached);\n}\nfunction getCurrentScope() {\n  return activeEffectScope;\n}\nfunction onScopeDispose(fn, failSilently = false) {\n  if (activeEffectScope) {\n    activeEffectScope.cleanups.push(fn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onScopeDispose() is called when there is no active effect scope to be associated with.`\n    );\n  }\n}\n\nlet activeSub;\nconst EffectFlags = {\n  \"ACTIVE\": 1,\n  \"1\": \"ACTIVE\",\n  \"RUNNING\": 2,\n  \"2\": \"RUNNING\",\n  \"TRACKING\": 4,\n  \"4\": \"TRACKING\",\n  \"NOTIFIED\": 8,\n  \"8\": \"NOTIFIED\",\n  \"DIRTY\": 16,\n  \"16\": \"DIRTY\",\n  \"ALLOW_RECURSE\": 32,\n  \"32\": \"ALLOW_RECURSE\",\n  \"PAUSED\": 64,\n  \"64\": \"PAUSED\"\n};\nconst pausedQueueEffects = /* @__PURE__ */ new WeakSet();\nclass ReactiveEffect {\n  constructor(fn) {\n    this.fn = fn;\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 1 | 4;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    /**\n     * @internal\n     */\n    this.cleanup = void 0;\n    this.scheduler = void 0;\n    if (activeEffectScope && activeEffectScope.active) {\n      activeEffectScope.effects.push(this);\n    }\n  }\n  pause() {\n    this.flags |= 64;\n  }\n  resume() {\n    if (this.flags & 64) {\n      this.flags &= ~64;\n      if (pausedQueueEffects.has(this)) {\n        pausedQueueEffects.delete(this);\n        this.trigger();\n      }\n    }\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    if (this.flags & 2 && !(this.flags & 32)) {\n      return;\n    }\n    if (!(this.flags & 8)) {\n      batch(this);\n    }\n  }\n  run() {\n    if (!(this.flags & 1)) {\n      return this.fn();\n    }\n    this.flags |= 2;\n    cleanupEffect(this);\n    prepareDeps(this);\n    const prevEffect = activeSub;\n    const prevShouldTrack = shouldTrack;\n    activeSub = this;\n    shouldTrack = true;\n    try {\n      return this.fn();\n    } finally {\n      if (!!(process.env.NODE_ENV !== \"production\") && activeSub !== this) {\n        warn(\n          \"Active effect was not restored correctly - this is likely a Vue internal bug.\"\n        );\n      }\n      cleanupDeps(this);\n      activeSub = prevEffect;\n      shouldTrack = prevShouldTrack;\n      this.flags &= ~2;\n    }\n  }\n  stop() {\n    if (this.flags & 1) {\n      for (let link = this.deps; link; link = link.nextDep) {\n        removeSub(link);\n      }\n      this.deps = this.depsTail = void 0;\n      cleanupEffect(this);\n      this.onStop && this.onStop();\n      this.flags &= ~1;\n    }\n  }\n  trigger() {\n    if (this.flags & 64) {\n      pausedQueueEffects.add(this);\n    } else if (this.scheduler) {\n      this.scheduler();\n    } else {\n      this.runIfDirty();\n    }\n  }\n  /**\n   * @internal\n   */\n  runIfDirty() {\n    if (isDirty(this)) {\n      this.run();\n    }\n  }\n  get dirty() {\n    return isDirty(this);\n  }\n}\nlet batchDepth = 0;\nlet batchedSub;\nlet batchedComputed;\nfunction batch(sub, isComputed = false) {\n  sub.flags |= 8;\n  if (isComputed) {\n    sub.next = batchedComputed;\n    batchedComputed = sub;\n    return;\n  }\n  sub.next = batchedSub;\n  batchedSub = sub;\n}\nfunction startBatch() {\n  batchDepth++;\n}\nfunction endBatch() {\n  if (--batchDepth > 0) {\n    return;\n  }\n  if (batchedComputed) {\n    let e = batchedComputed;\n    batchedComputed = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      e = next;\n    }\n  }\n  let error;\n  while (batchedSub) {\n    let e = batchedSub;\n    batchedSub = void 0;\n    while (e) {\n      const next = e.next;\n      e.next = void 0;\n      e.flags &= ~8;\n      if (e.flags & 1) {\n        try {\n          ;\n          e.trigger();\n        } catch (err) {\n          if (!error) error = err;\n        }\n      }\n      e = next;\n    }\n  }\n  if (error) throw error;\n}\nfunction prepareDeps(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    link.version = -1;\n    link.prevActiveLink = link.dep.activeLink;\n    link.dep.activeLink = link;\n  }\n}\nfunction cleanupDeps(sub) {\n  let head;\n  let tail = sub.depsTail;\n  let link = tail;\n  while (link) {\n    const prev = link.prevDep;\n    if (link.version === -1) {\n      if (link === tail) tail = prev;\n      removeSub(link);\n      removeDep(link);\n    } else {\n      head = link;\n    }\n    link.dep.activeLink = link.prevActiveLink;\n    link.prevActiveLink = void 0;\n    link = prev;\n  }\n  sub.deps = head;\n  sub.depsTail = tail;\n}\nfunction isDirty(sub) {\n  for (let link = sub.deps; link; link = link.nextDep) {\n    if (link.dep.version !== link.version || link.dep.computed && (refreshComputed(link.dep.computed) || link.dep.version !== link.version)) {\n      return true;\n    }\n  }\n  if (sub._dirty) {\n    return true;\n  }\n  return false;\n}\nfunction refreshComputed(computed) {\n  if (computed.flags & 4 && !(computed.flags & 16)) {\n    return;\n  }\n  computed.flags &= ~16;\n  if (computed.globalVersion === globalVersion) {\n    return;\n  }\n  computed.globalVersion = globalVersion;\n  const dep = computed.dep;\n  computed.flags |= 2;\n  if (dep.version > 0 && !computed.isSSR && computed.deps && !isDirty(computed)) {\n    computed.flags &= ~2;\n    return;\n  }\n  const prevSub = activeSub;\n  const prevShouldTrack = shouldTrack;\n  activeSub = computed;\n  shouldTrack = true;\n  try {\n    prepareDeps(computed);\n    const value = computed.fn(computed._value);\n    if (dep.version === 0 || hasChanged(value, computed._value)) {\n      computed._value = value;\n      dep.version++;\n    }\n  } catch (err) {\n    dep.version++;\n    throw err;\n  } finally {\n    activeSub = prevSub;\n    shouldTrack = prevShouldTrack;\n    cleanupDeps(computed);\n    computed.flags &= ~2;\n  }\n}\nfunction removeSub(link, soft = false) {\n  const { dep, prevSub, nextSub } = link;\n  if (prevSub) {\n    prevSub.nextSub = nextSub;\n    link.prevSub = void 0;\n  }\n  if (nextSub) {\n    nextSub.prevSub = prevSub;\n    link.nextSub = void 0;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && dep.subsHead === link) {\n    dep.subsHead = nextSub;\n  }\n  if (dep.subs === link) {\n    dep.subs = prevSub;\n    if (!prevSub && dep.computed) {\n      dep.computed.flags &= ~4;\n      for (let l = dep.computed.deps; l; l = l.nextDep) {\n        removeSub(l, true);\n      }\n    }\n  }\n  if (!soft && !--dep.sc && dep.map) {\n    dep.map.delete(dep.key);\n  }\n}\nfunction removeDep(link) {\n  const { prevDep, nextDep } = link;\n  if (prevDep) {\n    prevDep.nextDep = nextDep;\n    link.prevDep = void 0;\n  }\n  if (nextDep) {\n    nextDep.prevDep = prevDep;\n    link.nextDep = void 0;\n  }\n}\nfunction effect(fn, options) {\n  if (fn.effect instanceof ReactiveEffect) {\n    fn = fn.effect.fn;\n  }\n  const e = new ReactiveEffect(fn);\n  if (options) {\n    extend(e, options);\n  }\n  try {\n    e.run();\n  } catch (err) {\n    e.stop();\n    throw err;\n  }\n  const runner = e.run.bind(e);\n  runner.effect = e;\n  return runner;\n}\nfunction stop(runner) {\n  runner.effect.stop();\n}\nlet shouldTrack = true;\nconst trackStack = [];\nfunction pauseTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = false;\n}\nfunction enableTracking() {\n  trackStack.push(shouldTrack);\n  shouldTrack = true;\n}\nfunction resetTracking() {\n  const last = trackStack.pop();\n  shouldTrack = last === void 0 ? true : last;\n}\nfunction onEffectCleanup(fn, failSilently = false) {\n  if (activeSub instanceof ReactiveEffect) {\n    activeSub.cleanup = fn;\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onEffectCleanup() was called when there was no active effect to associate with.`\n    );\n  }\n}\nfunction cleanupEffect(e) {\n  const { cleanup } = e;\n  e.cleanup = void 0;\n  if (cleanup) {\n    const prevSub = activeSub;\n    activeSub = void 0;\n    try {\n      cleanup();\n    } finally {\n      activeSub = prevSub;\n    }\n  }\n}\n\nlet globalVersion = 0;\nclass Link {\n  constructor(sub, dep) {\n    this.sub = sub;\n    this.dep = dep;\n    this.version = dep.version;\n    this.nextDep = this.prevDep = this.nextSub = this.prevSub = this.prevActiveLink = void 0;\n  }\n}\nclass Dep {\n  constructor(computed) {\n    this.computed = computed;\n    this.version = 0;\n    /**\n     * Link between this dep and the current active effect\n     */\n    this.activeLink = void 0;\n    /**\n     * Doubly linked list representing the subscribing effects (tail)\n     */\n    this.subs = void 0;\n    /**\n     * For object property deps cleanup\n     */\n    this.map = void 0;\n    this.key = void 0;\n    /**\n     * Subscriber counter\n     */\n    this.sc = 0;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.subsHead = void 0;\n    }\n  }\n  track(debugInfo) {\n    if (!activeSub || !shouldTrack || activeSub === this.computed) {\n      return;\n    }\n    let link = this.activeLink;\n    if (link === void 0 || link.sub !== activeSub) {\n      link = this.activeLink = new Link(activeSub, this);\n      if (!activeSub.deps) {\n        activeSub.deps = activeSub.depsTail = link;\n      } else {\n        link.prevDep = activeSub.depsTail;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n      }\n      addSub(link);\n    } else if (link.version === -1) {\n      link.version = this.version;\n      if (link.nextDep) {\n        const next = link.nextDep;\n        next.prevDep = link.prevDep;\n        if (link.prevDep) {\n          link.prevDep.nextDep = next;\n        }\n        link.prevDep = activeSub.depsTail;\n        link.nextDep = void 0;\n        activeSub.depsTail.nextDep = link;\n        activeSub.depsTail = link;\n        if (activeSub.deps === link) {\n          activeSub.deps = next;\n        }\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && activeSub.onTrack) {\n      activeSub.onTrack(\n        extend(\n          {\n            effect: activeSub\n          },\n          debugInfo\n        )\n      );\n    }\n    return link;\n  }\n  trigger(debugInfo) {\n    this.version++;\n    globalVersion++;\n    this.notify(debugInfo);\n  }\n  notify(debugInfo) {\n    startBatch();\n    try {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (let head = this.subsHead; head; head = head.nextSub) {\n          if (head.sub.onTrigger && !(head.sub.flags & 8)) {\n            head.sub.onTrigger(\n              extend(\n                {\n                  effect: head.sub\n                },\n                debugInfo\n              )\n            );\n          }\n        }\n      }\n      for (let link = this.subs; link; link = link.prevSub) {\n        if (link.sub.notify()) {\n          ;\n          link.sub.dep.notify();\n        }\n      }\n    } finally {\n      endBatch();\n    }\n  }\n}\nfunction addSub(link) {\n  link.dep.sc++;\n  if (link.sub.flags & 4) {\n    const computed = link.dep.computed;\n    if (computed && !link.dep.subs) {\n      computed.flags |= 4 | 16;\n      for (let l = computed.deps; l; l = l.nextDep) {\n        addSub(l);\n      }\n    }\n    const currentTail = link.dep.subs;\n    if (currentTail !== link) {\n      link.prevSub = currentTail;\n      if (currentTail) currentTail.nextSub = link;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && link.dep.subsHead === void 0) {\n      link.dep.subsHead = link;\n    }\n    link.dep.subs = link;\n  }\n}\nconst targetMap = /* @__PURE__ */ new WeakMap();\nconst ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Object iterate\" : \"\"\n);\nconst MAP_KEY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Map keys iterate\" : \"\"\n);\nconst ARRAY_ITERATE_KEY = Symbol(\n  !!(process.env.NODE_ENV !== \"production\") ? \"Array iterate\" : \"\"\n);\nfunction track(target, type, key) {\n  if (shouldTrack && activeSub) {\n    let depsMap = targetMap.get(target);\n    if (!depsMap) {\n      targetMap.set(target, depsMap = /* @__PURE__ */ new Map());\n    }\n    let dep = depsMap.get(key);\n    if (!dep) {\n      depsMap.set(key, dep = new Dep());\n      dep.map = depsMap;\n      dep.key = key;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      dep.track({\n        target,\n        type,\n        key\n      });\n    } else {\n      dep.track();\n    }\n  }\n}\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\n  const depsMap = targetMap.get(target);\n  if (!depsMap) {\n    globalVersion++;\n    return;\n  }\n  const run = (dep) => {\n    if (dep) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        dep.trigger({\n          target,\n          type,\n          key,\n          newValue,\n          oldValue,\n          oldTarget\n        });\n      } else {\n        dep.trigger();\n      }\n    }\n  };\n  startBatch();\n  if (type === \"clear\") {\n    depsMap.forEach(run);\n  } else {\n    const targetIsArray = isArray(target);\n    const isArrayIndex = targetIsArray && isIntegerKey(key);\n    if (targetIsArray && key === \"length\") {\n      const newLength = Number(newValue);\n      depsMap.forEach((dep, key2) => {\n        if (key2 === \"length\" || key2 === ARRAY_ITERATE_KEY || !isSymbol(key2) && key2 >= newLength) {\n          run(dep);\n        }\n      });\n    } else {\n      if (key !== void 0 || depsMap.has(void 0)) {\n        run(depsMap.get(key));\n      }\n      if (isArrayIndex) {\n        run(depsMap.get(ARRAY_ITERATE_KEY));\n      }\n      switch (type) {\n        case \"add\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          } else if (isArrayIndex) {\n            run(depsMap.get(\"length\"));\n          }\n          break;\n        case \"delete\":\n          if (!targetIsArray) {\n            run(depsMap.get(ITERATE_KEY));\n            if (isMap(target)) {\n              run(depsMap.get(MAP_KEY_ITERATE_KEY));\n            }\n          }\n          break;\n        case \"set\":\n          if (isMap(target)) {\n            run(depsMap.get(ITERATE_KEY));\n          }\n          break;\n      }\n    }\n  }\n  endBatch();\n}\nfunction getDepFromReactive(object, key) {\n  const depMap = targetMap.get(object);\n  return depMap && depMap.get(key);\n}\n\nfunction reactiveReadArray(array) {\n  const raw = toRaw(array);\n  if (raw === array) return raw;\n  track(raw, \"iterate\", ARRAY_ITERATE_KEY);\n  return isShallow(array) ? raw : raw.map(toReactive);\n}\nfunction shallowReadArray(arr) {\n  track(arr = toRaw(arr), \"iterate\", ARRAY_ITERATE_KEY);\n  return arr;\n}\nconst arrayInstrumentations = {\n  __proto__: null,\n  [Symbol.iterator]() {\n    return iterator(this, Symbol.iterator, toReactive);\n  },\n  concat(...args) {\n    return reactiveReadArray(this).concat(\n      ...args.map((x) => isArray(x) ? reactiveReadArray(x) : x)\n    );\n  },\n  entries() {\n    return iterator(this, \"entries\", (value) => {\n      value[1] = toReactive(value[1]);\n      return value;\n    });\n  },\n  every(fn, thisArg) {\n    return apply(this, \"every\", fn, thisArg, void 0, arguments);\n  },\n  filter(fn, thisArg) {\n    return apply(this, \"filter\", fn, thisArg, (v) => v.map(toReactive), arguments);\n  },\n  find(fn, thisArg) {\n    return apply(this, \"find\", fn, thisArg, toReactive, arguments);\n  },\n  findIndex(fn, thisArg) {\n    return apply(this, \"findIndex\", fn, thisArg, void 0, arguments);\n  },\n  findLast(fn, thisArg) {\n    return apply(this, \"findLast\", fn, thisArg, toReactive, arguments);\n  },\n  findLastIndex(fn, thisArg) {\n    return apply(this, \"findLastIndex\", fn, thisArg, void 0, arguments);\n  },\n  // flat, flatMap could benefit from ARRAY_ITERATE but are not straight-forward to implement\n  forEach(fn, thisArg) {\n    return apply(this, \"forEach\", fn, thisArg, void 0, arguments);\n  },\n  includes(...args) {\n    return searchProxy(this, \"includes\", args);\n  },\n  indexOf(...args) {\n    return searchProxy(this, \"indexOf\", args);\n  },\n  join(separator) {\n    return reactiveReadArray(this).join(separator);\n  },\n  // keys() iterator only reads `length`, no optimisation required\n  lastIndexOf(...args) {\n    return searchProxy(this, \"lastIndexOf\", args);\n  },\n  map(fn, thisArg) {\n    return apply(this, \"map\", fn, thisArg, void 0, arguments);\n  },\n  pop() {\n    return noTracking(this, \"pop\");\n  },\n  push(...args) {\n    return noTracking(this, \"push\", args);\n  },\n  reduce(fn, ...args) {\n    return reduce(this, \"reduce\", fn, args);\n  },\n  reduceRight(fn, ...args) {\n    return reduce(this, \"reduceRight\", fn, args);\n  },\n  shift() {\n    return noTracking(this, \"shift\");\n  },\n  // slice could use ARRAY_ITERATE but also seems to beg for range tracking\n  some(fn, thisArg) {\n    return apply(this, \"some\", fn, thisArg, void 0, arguments);\n  },\n  splice(...args) {\n    return noTracking(this, \"splice\", args);\n  },\n  toReversed() {\n    return reactiveReadArray(this).toReversed();\n  },\n  toSorted(comparer) {\n    return reactiveReadArray(this).toSorted(comparer);\n  },\n  toSpliced(...args) {\n    return reactiveReadArray(this).toSpliced(...args);\n  },\n  unshift(...args) {\n    return noTracking(this, \"unshift\", args);\n  },\n  values() {\n    return iterator(this, \"values\", toReactive);\n  }\n};\nfunction iterator(self, method, wrapValue) {\n  const arr = shallowReadArray(self);\n  const iter = arr[method]();\n  if (arr !== self && !isShallow(self)) {\n    iter._next = iter.next;\n    iter.next = () => {\n      const result = iter._next();\n      if (result.value) {\n        result.value = wrapValue(result.value);\n      }\n      return result;\n    };\n  }\n  return iter;\n}\nconst arrayProto = Array.prototype;\nfunction apply(self, method, fn, thisArg, wrappedRetFn, args) {\n  const arr = shallowReadArray(self);\n  const needsWrap = arr !== self && !isShallow(self);\n  const methodFn = arr[method];\n  if (methodFn !== arrayProto[method]) {\n    const result2 = methodFn.apply(self, args);\n    return needsWrap ? toReactive(result2) : result2;\n  }\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (needsWrap) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, toReactive(item), index, self);\n      };\n    } else if (fn.length > 2) {\n      wrappedFn = function(item, index) {\n        return fn.call(this, item, index, self);\n      };\n    }\n  }\n  const result = methodFn.call(arr, wrappedFn, thisArg);\n  return needsWrap && wrappedRetFn ? wrappedRetFn(result) : result;\n}\nfunction reduce(self, method, fn, args) {\n  const arr = shallowReadArray(self);\n  let wrappedFn = fn;\n  if (arr !== self) {\n    if (!isShallow(self)) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, toReactive(item), index, self);\n      };\n    } else if (fn.length > 3) {\n      wrappedFn = function(acc, item, index) {\n        return fn.call(this, acc, item, index, self);\n      };\n    }\n  }\n  return arr[method](wrappedFn, ...args);\n}\nfunction searchProxy(self, method, args) {\n  const arr = toRaw(self);\n  track(arr, \"iterate\", ARRAY_ITERATE_KEY);\n  const res = arr[method](...args);\n  if ((res === -1 || res === false) && isProxy(args[0])) {\n    args[0] = toRaw(args[0]);\n    return arr[method](...args);\n  }\n  return res;\n}\nfunction noTracking(self, method, args = []) {\n  pauseTracking();\n  startBatch();\n  const res = toRaw(self)[method].apply(self, args);\n  endBatch();\n  resetTracking();\n  return res;\n}\n\nconst isNonTrackableKeys = /* @__PURE__ */ makeMap(`__proto__,__v_isRef,__isVue`);\nconst builtInSymbols = new Set(\n  /* @__PURE__ */ Object.getOwnPropertyNames(Symbol).filter((key) => key !== \"arguments\" && key !== \"caller\").map((key) => Symbol[key]).filter(isSymbol)\n);\nfunction hasOwnProperty(key) {\n  if (!isSymbol(key)) key = String(key);\n  const obj = toRaw(this);\n  track(obj, \"has\", key);\n  return obj.hasOwnProperty(key);\n}\nclass BaseReactiveHandler {\n  constructor(_isReadonly = false, _isShallow = false) {\n    this._isReadonly = _isReadonly;\n    this._isShallow = _isShallow;\n  }\n  get(target, key, receiver) {\n    if (key === \"__v_skip\") return target[\"__v_skip\"];\n    const isReadonly2 = this._isReadonly, isShallow2 = this._isShallow;\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_isShallow\") {\n      return isShallow2;\n    } else if (key === \"__v_raw\") {\n      if (receiver === (isReadonly2 ? isShallow2 ? shallowReadonlyMap : readonlyMap : isShallow2 ? shallowReactiveMap : reactiveMap).get(target) || // receiver is not the reactive proxy, but has the same prototype\n      // this means the receiver is a user proxy of the reactive proxy\n      Object.getPrototypeOf(target) === Object.getPrototypeOf(receiver)) {\n        return target;\n      }\n      return;\n    }\n    const targetIsArray = isArray(target);\n    if (!isReadonly2) {\n      let fn;\n      if (targetIsArray && (fn = arrayInstrumentations[key])) {\n        return fn;\n      }\n      if (key === \"hasOwnProperty\") {\n        return hasOwnProperty;\n      }\n    }\n    const res = Reflect.get(\n      target,\n      key,\n      // if this is a proxy wrapping a ref, return methods using the raw ref\n      // as receiver so that we don't have to call `toRaw` on the ref in all\n      // its class methods\n      isRef(target) ? target : receiver\n    );\n    if (isSymbol(key) ? builtInSymbols.has(key) : isNonTrackableKeys(key)) {\n      return res;\n    }\n    if (!isReadonly2) {\n      track(target, \"get\", key);\n    }\n    if (isShallow2) {\n      return res;\n    }\n    if (isRef(res)) {\n      return targetIsArray && isIntegerKey(key) ? res : res.value;\n    }\n    if (isObject(res)) {\n      return isReadonly2 ? readonly(res) : reactive(res);\n    }\n    return res;\n  }\n}\nclass MutableReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(false, isShallow2);\n  }\n  set(target, key, value, receiver) {\n    let oldValue = target[key];\n    if (!this._isShallow) {\n      const isOldValueReadonly = isReadonly(oldValue);\n      if (!isShallow(value) && !isReadonly(value)) {\n        oldValue = toRaw(oldValue);\n        value = toRaw(value);\n      }\n      if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\n        if (isOldValueReadonly) {\n          return false;\n        } else {\n          oldValue.value = value;\n          return true;\n        }\n      }\n    }\n    const hadKey = isArray(target) && isIntegerKey(key) ? Number(key) < target.length : hasOwn(target, key);\n    const result = Reflect.set(\n      target,\n      key,\n      value,\n      isRef(target) ? target : receiver\n    );\n    if (target === toRaw(receiver)) {\n      if (!hadKey) {\n        trigger(target, \"add\", key, value);\n      } else if (hasChanged(value, oldValue)) {\n        trigger(target, \"set\", key, value, oldValue);\n      }\n    }\n    return result;\n  }\n  deleteProperty(target, key) {\n    const hadKey = hasOwn(target, key);\n    const oldValue = target[key];\n    const result = Reflect.deleteProperty(target, key);\n    if (result && hadKey) {\n      trigger(target, \"delete\", key, void 0, oldValue);\n    }\n    return result;\n  }\n  has(target, key) {\n    const result = Reflect.has(target, key);\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\n      track(target, \"has\", key);\n    }\n    return result;\n  }\n  ownKeys(target) {\n    track(\n      target,\n      \"iterate\",\n      isArray(target) ? \"length\" : ITERATE_KEY\n    );\n    return Reflect.ownKeys(target);\n  }\n}\nclass ReadonlyReactiveHandler extends BaseReactiveHandler {\n  constructor(isShallow2 = false) {\n    super(true, isShallow2);\n  }\n  set(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Set operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n  deleteProperty(target, key) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `Delete operation on key \"${String(key)}\" failed: target is readonly.`,\n        target\n      );\n    }\n    return true;\n  }\n}\nconst mutableHandlers = /* @__PURE__ */ new MutableReactiveHandler();\nconst readonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler();\nconst shallowReactiveHandlers = /* @__PURE__ */ new MutableReactiveHandler(true);\nconst shallowReadonlyHandlers = /* @__PURE__ */ new ReadonlyReactiveHandler(true);\n\nconst toShallow = (value) => value;\nconst getProto = (v) => Reflect.getPrototypeOf(v);\nfunction createIterableMethod(method, isReadonly2, isShallow2) {\n  return function(...args) {\n    const target = this[\"__v_raw\"];\n    const rawTarget = toRaw(target);\n    const targetIsMap = isMap(rawTarget);\n    const isPair = method === \"entries\" || method === Symbol.iterator && targetIsMap;\n    const isKeyOnly = method === \"keys\" && targetIsMap;\n    const innerIterator = target[method](...args);\n    const wrap = isShallow2 ? toShallow : isReadonly2 ? toReadonly : toReactive;\n    !isReadonly2 && track(\n      rawTarget,\n      \"iterate\",\n      isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY\n    );\n    return {\n      // iterator protocol\n      next() {\n        const { value, done } = innerIterator.next();\n        return done ? { value, done } : {\n          value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\n          done\n        };\n      },\n      // iterable protocol\n      [Symbol.iterator]() {\n        return this;\n      }\n    };\n  };\n}\nfunction createReadonlyMethod(type) {\n  return function(...args) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      const key = args[0] ? `on key \"${args[0]}\" ` : ``;\n      warn(\n        `${capitalize(type)} operation ${key}failed: target is readonly.`,\n        toRaw(this)\n      );\n    }\n    return type === \"delete\" ? false : type === \"clear\" ? void 0 : this;\n  };\n}\nfunction createInstrumentations(readonly, shallow) {\n  const instrumentations = {\n    get(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"get\", key);\n        }\n        track(rawTarget, \"get\", rawKey);\n      }\n      const { has } = getProto(rawTarget);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      if (has.call(rawTarget, key)) {\n        return wrap(target.get(key));\n      } else if (has.call(rawTarget, rawKey)) {\n        return wrap(target.get(rawKey));\n      } else if (target !== rawTarget) {\n        target.get(key);\n      }\n    },\n    get size() {\n      const target = this[\"__v_raw\"];\n      !readonly && track(toRaw(target), \"iterate\", ITERATE_KEY);\n      return Reflect.get(target, \"size\", target);\n    },\n    has(key) {\n      const target = this[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const rawKey = toRaw(key);\n      if (!readonly) {\n        if (hasChanged(key, rawKey)) {\n          track(rawTarget, \"has\", key);\n        }\n        track(rawTarget, \"has\", rawKey);\n      }\n      return key === rawKey ? target.has(key) : target.has(key) || target.has(rawKey);\n    },\n    forEach(callback, thisArg) {\n      const observed = this;\n      const target = observed[\"__v_raw\"];\n      const rawTarget = toRaw(target);\n      const wrap = shallow ? toShallow : readonly ? toReadonly : toReactive;\n      !readonly && track(rawTarget, \"iterate\", ITERATE_KEY);\n      return target.forEach((value, key) => {\n        return callback.call(thisArg, wrap(value), wrap(key), observed);\n      });\n    }\n  };\n  extend(\n    instrumentations,\n    readonly ? {\n      add: createReadonlyMethod(\"add\"),\n      set: createReadonlyMethod(\"set\"),\n      delete: createReadonlyMethod(\"delete\"),\n      clear: createReadonlyMethod(\"clear\")\n    } : {\n      add(value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const proto = getProto(target);\n        const hadKey = proto.has.call(target, value);\n        if (!hadKey) {\n          target.add(value);\n          trigger(target, \"add\", value, value);\n        }\n        return this;\n      },\n      set(key, value) {\n        if (!shallow && !isShallow(value) && !isReadonly(value)) {\n          value = toRaw(value);\n        }\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get.call(target, key);\n        target.set(key, value);\n        if (!hadKey) {\n          trigger(target, \"add\", key, value);\n        } else if (hasChanged(value, oldValue)) {\n          trigger(target, \"set\", key, value, oldValue);\n        }\n        return this;\n      },\n      delete(key) {\n        const target = toRaw(this);\n        const { has, get } = getProto(target);\n        let hadKey = has.call(target, key);\n        if (!hadKey) {\n          key = toRaw(key);\n          hadKey = has.call(target, key);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkIdentityKeys(target, has, key);\n        }\n        const oldValue = get ? get.call(target, key) : void 0;\n        const result = target.delete(key);\n        if (hadKey) {\n          trigger(target, \"delete\", key, void 0, oldValue);\n        }\n        return result;\n      },\n      clear() {\n        const target = toRaw(this);\n        const hadItems = target.size !== 0;\n        const oldTarget = !!(process.env.NODE_ENV !== \"production\") ? isMap(target) ? new Map(target) : new Set(target) : void 0;\n        const result = target.clear();\n        if (hadItems) {\n          trigger(\n            target,\n            \"clear\",\n            void 0,\n            void 0,\n            oldTarget\n          );\n        }\n        return result;\n      }\n    }\n  );\n  const iteratorMethods = [\n    \"keys\",\n    \"values\",\n    \"entries\",\n    Symbol.iterator\n  ];\n  iteratorMethods.forEach((method) => {\n    instrumentations[method] = createIterableMethod(method, readonly, shallow);\n  });\n  return instrumentations;\n}\nfunction createInstrumentationGetter(isReadonly2, shallow) {\n  const instrumentations = createInstrumentations(isReadonly2, shallow);\n  return (target, key, receiver) => {\n    if (key === \"__v_isReactive\") {\n      return !isReadonly2;\n    } else if (key === \"__v_isReadonly\") {\n      return isReadonly2;\n    } else if (key === \"__v_raw\") {\n      return target;\n    }\n    return Reflect.get(\n      hasOwn(instrumentations, key) && key in target ? instrumentations : target,\n      key,\n      receiver\n    );\n  };\n}\nconst mutableCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, false)\n};\nconst shallowCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(false, true)\n};\nconst readonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, false)\n};\nconst shallowReadonlyCollectionHandlers = {\n  get: /* @__PURE__ */ createInstrumentationGetter(true, true)\n};\nfunction checkIdentityKeys(target, has, key) {\n  const rawKey = toRaw(key);\n  if (rawKey !== key && has.call(target, rawKey)) {\n    const type = toRawType(target);\n    warn(\n      `Reactive ${type} contains both the raw and reactive versions of the same object${type === `Map` ? ` as keys` : ``}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`\n    );\n  }\n}\n\nconst reactiveMap = /* @__PURE__ */ new WeakMap();\nconst shallowReactiveMap = /* @__PURE__ */ new WeakMap();\nconst readonlyMap = /* @__PURE__ */ new WeakMap();\nconst shallowReadonlyMap = /* @__PURE__ */ new WeakMap();\nfunction targetTypeMap(rawType) {\n  switch (rawType) {\n    case \"Object\":\n    case \"Array\":\n      return 1 /* COMMON */;\n    case \"Map\":\n    case \"Set\":\n    case \"WeakMap\":\n    case \"WeakSet\":\n      return 2 /* COLLECTION */;\n    default:\n      return 0 /* INVALID */;\n  }\n}\nfunction getTargetType(value) {\n  return value[\"__v_skip\"] || !Object.isExtensible(value) ? 0 /* INVALID */ : targetTypeMap(toRawType(value));\n}\nfunction reactive(target) {\n  if (isReadonly(target)) {\n    return target;\n  }\n  return createReactiveObject(\n    target,\n    false,\n    mutableHandlers,\n    mutableCollectionHandlers,\n    reactiveMap\n  );\n}\nfunction shallowReactive(target) {\n  return createReactiveObject(\n    target,\n    false,\n    shallowReactiveHandlers,\n    shallowCollectionHandlers,\n    shallowReactiveMap\n  );\n}\nfunction readonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    readonlyHandlers,\n    readonlyCollectionHandlers,\n    readonlyMap\n  );\n}\nfunction shallowReadonly(target) {\n  return createReactiveObject(\n    target,\n    true,\n    shallowReadonlyHandlers,\n    shallowReadonlyCollectionHandlers,\n    shallowReadonlyMap\n  );\n}\nfunction createReactiveObject(target, isReadonly2, baseHandlers, collectionHandlers, proxyMap) {\n  if (!isObject(target)) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\n        `value cannot be made ${isReadonly2 ? \"readonly\" : \"reactive\"}: ${String(\n          target\n        )}`\n      );\n    }\n    return target;\n  }\n  if (target[\"__v_raw\"] && !(isReadonly2 && target[\"__v_isReactive\"])) {\n    return target;\n  }\n  const existingProxy = proxyMap.get(target);\n  if (existingProxy) {\n    return existingProxy;\n  }\n  const targetType = getTargetType(target);\n  if (targetType === 0 /* INVALID */) {\n    return target;\n  }\n  const proxy = new Proxy(\n    target,\n    targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers\n  );\n  proxyMap.set(target, proxy);\n  return proxy;\n}\nfunction isReactive(value) {\n  if (isReadonly(value)) {\n    return isReactive(value[\"__v_raw\"]);\n  }\n  return !!(value && value[\"__v_isReactive\"]);\n}\nfunction isReadonly(value) {\n  return !!(value && value[\"__v_isReadonly\"]);\n}\nfunction isShallow(value) {\n  return !!(value && value[\"__v_isShallow\"]);\n}\nfunction isProxy(value) {\n  return value ? !!value[\"__v_raw\"] : false;\n}\nfunction toRaw(observed) {\n  const raw = observed && observed[\"__v_raw\"];\n  return raw ? toRaw(raw) : observed;\n}\nfunction markRaw(value) {\n  if (!hasOwn(value, \"__v_skip\") && Object.isExtensible(value)) {\n    def(value, \"__v_skip\", true);\n  }\n  return value;\n}\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\n\nfunction isRef(r) {\n  return r ? r[\"__v_isRef\"] === true : false;\n}\nfunction ref(value) {\n  return createRef(value, false);\n}\nfunction shallowRef(value) {\n  return createRef(value, true);\n}\nfunction createRef(rawValue, shallow) {\n  if (isRef(rawValue)) {\n    return rawValue;\n  }\n  return new RefImpl(rawValue, shallow);\n}\nclass RefImpl {\n  constructor(value, isShallow2) {\n    this.dep = new Dep();\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isShallow\"] = false;\n    this._rawValue = isShallow2 ? value : toRaw(value);\n    this._value = isShallow2 ? value : toReactive(value);\n    this[\"__v_isShallow\"] = isShallow2;\n  }\n  get value() {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this.dep.track({\n        target: this,\n        type: \"get\",\n        key: \"value\"\n      });\n    } else {\n      this.dep.track();\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    const oldValue = this._rawValue;\n    const useDirectValue = this[\"__v_isShallow\"] || isShallow(newValue) || isReadonly(newValue);\n    newValue = useDirectValue ? newValue : toRaw(newValue);\n    if (hasChanged(newValue, oldValue)) {\n      this._rawValue = newValue;\n      this._value = useDirectValue ? newValue : toReactive(newValue);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        this.dep.trigger({\n          target: this,\n          type: \"set\",\n          key: \"value\",\n          newValue,\n          oldValue\n        });\n      } else {\n        this.dep.trigger();\n      }\n    }\n  }\n}\nfunction triggerRef(ref2) {\n  if (ref2.dep) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      ref2.dep.trigger({\n        target: ref2,\n        type: \"set\",\n        key: \"value\",\n        newValue: ref2._value\n      });\n    } else {\n      ref2.dep.trigger();\n    }\n  }\n}\nfunction unref(ref2) {\n  return isRef(ref2) ? ref2.value : ref2;\n}\nfunction toValue(source) {\n  return isFunction(source) ? source() : unref(source);\n}\nconst shallowUnwrapHandlers = {\n  get: (target, key, receiver) => key === \"__v_raw\" ? target : unref(Reflect.get(target, key, receiver)),\n  set: (target, key, value, receiver) => {\n    const oldValue = target[key];\n    if (isRef(oldValue) && !isRef(value)) {\n      oldValue.value = value;\n      return true;\n    } else {\n      return Reflect.set(target, key, value, receiver);\n    }\n  }\n};\nfunction proxyRefs(objectWithRefs) {\n  return isReactive(objectWithRefs) ? objectWithRefs : new Proxy(objectWithRefs, shallowUnwrapHandlers);\n}\nclass CustomRefImpl {\n  constructor(factory) {\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n    const dep = this.dep = new Dep();\n    const { get, set } = factory(dep.track.bind(dep), dep.trigger.bind(dep));\n    this._get = get;\n    this._set = set;\n  }\n  get value() {\n    return this._value = this._get();\n  }\n  set value(newVal) {\n    this._set(newVal);\n  }\n}\nfunction customRef(factory) {\n  return new CustomRefImpl(factory);\n}\nfunction toRefs(object) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isProxy(object)) {\n    warn(`toRefs() expects a reactive object but received a plain one.`);\n  }\n  const ret = isArray(object) ? new Array(object.length) : {};\n  for (const key in object) {\n    ret[key] = propertyToRef(object, key);\n  }\n  return ret;\n}\nclass ObjectRefImpl {\n  constructor(_object, _key, _defaultValue) {\n    this._object = _object;\n    this._key = _key;\n    this._defaultValue = _defaultValue;\n    this[\"__v_isRef\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    const val = this._object[this._key];\n    return this._value = val === void 0 ? this._defaultValue : val;\n  }\n  set value(newVal) {\n    this._object[this._key] = newVal;\n  }\n  get dep() {\n    return getDepFromReactive(toRaw(this._object), this._key);\n  }\n}\nclass GetterRefImpl {\n  constructor(_getter) {\n    this._getter = _getter;\n    this[\"__v_isRef\"] = true;\n    this[\"__v_isReadonly\"] = true;\n    this._value = void 0;\n  }\n  get value() {\n    return this._value = this._getter();\n  }\n}\nfunction toRef(source, key, defaultValue) {\n  if (isRef(source)) {\n    return source;\n  } else if (isFunction(source)) {\n    return new GetterRefImpl(source);\n  } else if (isObject(source) && arguments.length > 1) {\n    return propertyToRef(source, key, defaultValue);\n  } else {\n    return ref(source);\n  }\n}\nfunction propertyToRef(source, key, defaultValue) {\n  const val = source[key];\n  return isRef(val) ? val : new ObjectRefImpl(source, key, defaultValue);\n}\n\nclass ComputedRefImpl {\n  constructor(fn, setter, isSSR) {\n    this.fn = fn;\n    this.setter = setter;\n    /**\n     * @internal\n     */\n    this._value = void 0;\n    /**\n     * @internal\n     */\n    this.dep = new Dep(this);\n    /**\n     * @internal\n     */\n    this.__v_isRef = true;\n    // TODO isolatedDeclarations \"__v_isReadonly\"\n    // A computed is also a subscriber that tracks other deps\n    /**\n     * @internal\n     */\n    this.deps = void 0;\n    /**\n     * @internal\n     */\n    this.depsTail = void 0;\n    /**\n     * @internal\n     */\n    this.flags = 16;\n    /**\n     * @internal\n     */\n    this.globalVersion = globalVersion - 1;\n    /**\n     * @internal\n     */\n    this.next = void 0;\n    // for backwards compat\n    this.effect = this;\n    this[\"__v_isReadonly\"] = !setter;\n    this.isSSR = isSSR;\n  }\n  /**\n   * @internal\n   */\n  notify() {\n    this.flags |= 16;\n    if (!(this.flags & 8) && // avoid infinite self recursion\n    activeSub !== this) {\n      batch(this, true);\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) ;\n  }\n  get value() {\n    const link = !!(process.env.NODE_ENV !== \"production\") ? this.dep.track({\n      target: this,\n      type: \"get\",\n      key: \"value\"\n    }) : this.dep.track();\n    refreshComputed(this);\n    if (link) {\n      link.version = this.dep.version;\n    }\n    return this._value;\n  }\n  set value(newValue) {\n    if (this.setter) {\n      this.setter(newValue);\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn(\"Write operation failed: computed value is readonly\");\n    }\n  }\n}\nfunction computed(getterOrOptions, debugOptions, isSSR = false) {\n  let getter;\n  let setter;\n  if (isFunction(getterOrOptions)) {\n    getter = getterOrOptions;\n  } else {\n    getter = getterOrOptions.get;\n    setter = getterOrOptions.set;\n  }\n  const cRef = new ComputedRefImpl(getter, setter, isSSR);\n  if (!!(process.env.NODE_ENV !== \"production\") && debugOptions && !isSSR) {\n    cRef.onTrack = debugOptions.onTrack;\n    cRef.onTrigger = debugOptions.onTrigger;\n  }\n  return cRef;\n}\n\nconst TrackOpTypes = {\n  \"GET\": \"get\",\n  \"HAS\": \"has\",\n  \"ITERATE\": \"iterate\"\n};\nconst TriggerOpTypes = {\n  \"SET\": \"set\",\n  \"ADD\": \"add\",\n  \"DELETE\": \"delete\",\n  \"CLEAR\": \"clear\"\n};\nconst ReactiveFlags = {\n  \"SKIP\": \"__v_skip\",\n  \"IS_REACTIVE\": \"__v_isReactive\",\n  \"IS_READONLY\": \"__v_isReadonly\",\n  \"IS_SHALLOW\": \"__v_isShallow\",\n  \"RAW\": \"__v_raw\",\n  \"IS_REF\": \"__v_isRef\"\n};\n\nconst WatchErrorCodes = {\n  \"WATCH_GETTER\": 2,\n  \"2\": \"WATCH_GETTER\",\n  \"WATCH_CALLBACK\": 3,\n  \"3\": \"WATCH_CALLBACK\",\n  \"WATCH_CLEANUP\": 4,\n  \"4\": \"WATCH_CLEANUP\"\n};\nconst INITIAL_WATCHER_VALUE = {};\nconst cleanupMap = /* @__PURE__ */ new WeakMap();\nlet activeWatcher = void 0;\nfunction getCurrentWatcher() {\n  return activeWatcher;\n}\nfunction onWatcherCleanup(cleanupFn, failSilently = false, owner = activeWatcher) {\n  if (owner) {\n    let cleanups = cleanupMap.get(owner);\n    if (!cleanups) cleanupMap.set(owner, cleanups = []);\n    cleanups.push(cleanupFn);\n  } else if (!!(process.env.NODE_ENV !== \"production\") && !failSilently) {\n    warn(\n      `onWatcherCleanup() was called when there was no active watcher to associate with.`\n    );\n  }\n}\nfunction watch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, once, scheduler, augmentJob, call } = options;\n  const warnInvalidSource = (s) => {\n    (options.onWarn || warn)(\n      `Invalid watch source: `,\n      s,\n      `A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.`\n    );\n  };\n  const reactiveGetter = (source2) => {\n    if (deep) return source2;\n    if (isShallow(source2) || deep === false || deep === 0)\n      return traverse(source2, 1);\n    return traverse(source2);\n  };\n  let effect;\n  let getter;\n  let cleanup;\n  let boundCleanup;\n  let forceTrigger = false;\n  let isMultiSource = false;\n  if (isRef(source)) {\n    getter = () => source.value;\n    forceTrigger = isShallow(source);\n  } else if (isReactive(source)) {\n    getter = () => reactiveGetter(source);\n    forceTrigger = true;\n  } else if (isArray(source)) {\n    isMultiSource = true;\n    forceTrigger = source.some((s) => isReactive(s) || isShallow(s));\n    getter = () => source.map((s) => {\n      if (isRef(s)) {\n        return s.value;\n      } else if (isReactive(s)) {\n        return reactiveGetter(s);\n      } else if (isFunction(s)) {\n        return call ? call(s, 2) : s();\n      } else {\n        !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(s);\n      }\n    });\n  } else if (isFunction(source)) {\n    if (cb) {\n      getter = call ? () => call(source, 2) : source;\n    } else {\n      getter = () => {\n        if (cleanup) {\n          pauseTracking();\n          try {\n            cleanup();\n          } finally {\n            resetTracking();\n          }\n        }\n        const currentEffect = activeWatcher;\n        activeWatcher = effect;\n        try {\n          return call ? call(source, 3, [boundCleanup]) : source(boundCleanup);\n        } finally {\n          activeWatcher = currentEffect;\n        }\n      };\n    }\n  } else {\n    getter = NOOP;\n    !!(process.env.NODE_ENV !== \"production\") && warnInvalidSource(source);\n  }\n  if (cb && deep) {\n    const baseGetter = getter;\n    const depth = deep === true ? Infinity : deep;\n    getter = () => traverse(baseGetter(), depth);\n  }\n  const scope = getCurrentScope();\n  const watchHandle = () => {\n    effect.stop();\n    if (scope && scope.active) {\n      remove(scope.effects, effect);\n    }\n  };\n  if (once && cb) {\n    const _cb = cb;\n    cb = (...args) => {\n      _cb(...args);\n      watchHandle();\n    };\n  }\n  let oldValue = isMultiSource ? new Array(source.length).fill(INITIAL_WATCHER_VALUE) : INITIAL_WATCHER_VALUE;\n  const job = (immediateFirstRun) => {\n    if (!(effect.flags & 1) || !effect.dirty && !immediateFirstRun) {\n      return;\n    }\n    if (cb) {\n      const newValue = effect.run();\n      if (deep || forceTrigger || (isMultiSource ? newValue.some((v, i) => hasChanged(v, oldValue[i])) : hasChanged(newValue, oldValue))) {\n        if (cleanup) {\n          cleanup();\n        }\n        const currentWatcher = activeWatcher;\n        activeWatcher = effect;\n        try {\n          const args = [\n            newValue,\n            // pass undefined as the old value when it's changed for the first time\n            oldValue === INITIAL_WATCHER_VALUE ? void 0 : isMultiSource && oldValue[0] === INITIAL_WATCHER_VALUE ? [] : oldValue,\n            boundCleanup\n          ];\n          call ? call(cb, 3, args) : (\n            // @ts-expect-error\n            cb(...args)\n          );\n          oldValue = newValue;\n        } finally {\n          activeWatcher = currentWatcher;\n        }\n      }\n    } else {\n      effect.run();\n    }\n  };\n  if (augmentJob) {\n    augmentJob(job);\n  }\n  effect = new ReactiveEffect(getter);\n  effect.scheduler = scheduler ? () => scheduler(job, false) : job;\n  boundCleanup = (fn) => onWatcherCleanup(fn, false, effect);\n  cleanup = effect.onStop = () => {\n    const cleanups = cleanupMap.get(effect);\n    if (cleanups) {\n      if (call) {\n        call(cleanups, 4);\n      } else {\n        for (const cleanup2 of cleanups) cleanup2();\n      }\n      cleanupMap.delete(effect);\n    }\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    effect.onTrack = options.onTrack;\n    effect.onTrigger = options.onTrigger;\n  }\n  if (cb) {\n    if (immediate) {\n      job(true);\n    } else {\n      oldValue = effect.run();\n    }\n  } else if (scheduler) {\n    scheduler(job.bind(null, true), true);\n  } else {\n    effect.run();\n  }\n  watchHandle.pause = effect.pause.bind(effect);\n  watchHandle.resume = effect.resume.bind(effect);\n  watchHandle.stop = watchHandle;\n  return watchHandle;\n}\nfunction traverse(value, depth = Infinity, seen) {\n  if (depth <= 0 || !isObject(value) || value[\"__v_skip\"]) {\n    return value;\n  }\n  seen = seen || /* @__PURE__ */ new Set();\n  if (seen.has(value)) {\n    return value;\n  }\n  seen.add(value);\n  depth--;\n  if (isRef(value)) {\n    traverse(value.value, depth, seen);\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      traverse(value[i], depth, seen);\n    }\n  } else if (isSet(value) || isMap(value)) {\n    value.forEach((v) => {\n      traverse(v, depth, seen);\n    });\n  } else if (isPlainObject(value)) {\n    for (const key in value) {\n      traverse(value[key], depth, seen);\n    }\n    for (const key of Object.getOwnPropertySymbols(value)) {\n      if (Object.prototype.propertyIsEnumerable.call(value, key)) {\n        traverse(value[key], depth, seen);\n      }\n    }\n  }\n  return value;\n}\n\nexport { ARRAY_ITERATE_KEY, EffectFlags, EffectScope, ITERATE_KEY, MAP_KEY_ITERATE_KEY, ReactiveEffect, ReactiveFlags, TrackOpTypes, TriggerOpTypes, WatchErrorCodes, computed, customRef, effect, effectScope, enableTracking, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onEffectCleanup, onScopeDispose, onWatcherCleanup, pauseTracking, proxyRefs, reactive, reactiveReadArray, readonly, ref, resetTracking, shallowReactive, shallowReadArray, shallowReadonly, shallowRef, stop, toRaw, toReactive, toReadonly, toRef, toRefs, toValue, track, traverse, trigger, triggerRef, unref, watch };\n","/**\n* @vue/runtime-core v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { pauseTracking, resetTracking, isRef, toRaw, traverse, shallowRef, readonly, isReactive, ref, isShallow, shallowReadArray, toReactive, shallowReadonly, track, reactive, shallowReactive, trigger, ReactiveEffect, watch as watch$1, customRef, isProxy, proxyRefs, markRaw, EffectScope, computed as computed$1, isReadonly } from '@vue/reactivity';\nexport { EffectScope, ReactiveEffect, TrackOpTypes, TriggerOpTypes, customRef, effect, effectScope, getCurrentScope, getCurrentWatcher, isProxy, isReactive, isReadonly, isRef, isShallow, markRaw, onScopeDispose, onWatcherCleanup, proxyRefs, reactive, readonly, ref, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, toValue, triggerRef, unref } from '@vue/reactivity';\nimport { isString, isFunction, isPromise, isArray, EMPTY_OBJ, NOOP, getGlobalThis, extend, isBuiltInDirective, hasOwn, remove, def, isOn, isReservedProp, normalizeClass, stringifyStyle, normalizeStyle, isKnownSvgAttr, isBooleanAttr, isKnownHtmlAttr, includeBooleanAttr, isRenderableAttrValue, getEscapedCssVarName, isObject, isRegExp, invokeArrayFns, toHandlerKey, capitalize, camelize, isSymbol, isGloballyAllowed, NO, hyphenate, EMPTY_ARR, toRawType, makeMap, hasChanged, looseToNumber, isModelListener, toNumber } from '@vue/shared';\nexport { camelize, capitalize, normalizeClass, normalizeProps, normalizeStyle, toDisplayString, toHandlerKey } from '@vue/shared';\n\nconst stack = [];\nfunction pushWarningContext(vnode) {\n  stack.push(vnode);\n}\nfunction popWarningContext() {\n  stack.pop();\n}\nlet isWarning = false;\nfunction warn$1(msg, ...args) {\n  if (isWarning) return;\n  isWarning = true;\n  pauseTracking();\n  const instance = stack.length ? stack[stack.length - 1].component : null;\n  const appWarnHandler = instance && instance.appContext.config.warnHandler;\n  const trace = getComponentTrace();\n  if (appWarnHandler) {\n    callWithErrorHandling(\n      appWarnHandler,\n      instance,\n      11,\n      [\n        // eslint-disable-next-line no-restricted-syntax\n        msg + args.map((a) => {\n          var _a, _b;\n          return (_b = (_a = a.toString) == null ? void 0 : _a.call(a)) != null ? _b : JSON.stringify(a);\n        }).join(\"\"),\n        instance && instance.proxy,\n        trace.map(\n          ({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`\n        ).join(\"\\n\"),\n        trace\n      ]\n    );\n  } else {\n    const warnArgs = [`[Vue warn]: ${msg}`, ...args];\n    if (trace.length && // avoid spamming console during tests\n    true) {\n      warnArgs.push(`\n`, ...formatTrace(trace));\n    }\n    console.warn(...warnArgs);\n  }\n  resetTracking();\n  isWarning = false;\n}\nfunction getComponentTrace() {\n  let currentVNode = stack[stack.length - 1];\n  if (!currentVNode) {\n    return [];\n  }\n  const normalizedStack = [];\n  while (currentVNode) {\n    const last = normalizedStack[0];\n    if (last && last.vnode === currentVNode) {\n      last.recurseCount++;\n    } else {\n      normalizedStack.push({\n        vnode: currentVNode,\n        recurseCount: 0\n      });\n    }\n    const parentInstance = currentVNode.component && currentVNode.component.parent;\n    currentVNode = parentInstance && parentInstance.vnode;\n  }\n  return normalizedStack;\n}\nfunction formatTrace(trace) {\n  const logs = [];\n  trace.forEach((entry, i) => {\n    logs.push(...i === 0 ? [] : [`\n`], ...formatTraceEntry(entry));\n  });\n  return logs;\n}\nfunction formatTraceEntry({ vnode, recurseCount }) {\n  const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;\n  const isRoot = vnode.component ? vnode.component.parent == null : false;\n  const open = ` at <${formatComponentName(\n    vnode.component,\n    vnode.type,\n    isRoot\n  )}`;\n  const close = `>` + postfix;\n  return vnode.props ? [open, ...formatProps(vnode.props), close] : [open + close];\n}\nfunction formatProps(props) {\n  const res = [];\n  const keys = Object.keys(props);\n  keys.slice(0, 3).forEach((key) => {\n    res.push(...formatProp(key, props[key]));\n  });\n  if (keys.length > 3) {\n    res.push(` ...`);\n  }\n  return res;\n}\nfunction formatProp(key, value, raw) {\n  if (isString(value)) {\n    value = JSON.stringify(value);\n    return raw ? value : [`${key}=${value}`];\n  } else if (typeof value === \"number\" || typeof value === \"boolean\" || value == null) {\n    return raw ? value : [`${key}=${value}`];\n  } else if (isRef(value)) {\n    value = formatProp(key, toRaw(value.value), true);\n    return raw ? value : [`${key}=Ref<`, value, `>`];\n  } else if (isFunction(value)) {\n    return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];\n  } else {\n    value = toRaw(value);\n    return raw ? value : [`${key}=`, value];\n  }\n}\nfunction assertNumber(val, type) {\n  if (!!!(process.env.NODE_ENV !== \"production\")) return;\n  if (val === void 0) {\n    return;\n  } else if (typeof val !== \"number\") {\n    warn$1(`${type} is not a valid number - got ${JSON.stringify(val)}.`);\n  } else if (isNaN(val)) {\n    warn$1(`${type} is NaN - the duration expression might be incorrect.`);\n  }\n}\n\nconst ErrorCodes = {\n  \"SETUP_FUNCTION\": 0,\n  \"0\": \"SETUP_FUNCTION\",\n  \"RENDER_FUNCTION\": 1,\n  \"1\": \"RENDER_FUNCTION\",\n  \"NATIVE_EVENT_HANDLER\": 5,\n  \"5\": \"NATIVE_EVENT_HANDLER\",\n  \"COMPONENT_EVENT_HANDLER\": 6,\n  \"6\": \"COMPONENT_EVENT_HANDLER\",\n  \"VNODE_HOOK\": 7,\n  \"7\": \"VNODE_HOOK\",\n  \"DIRECTIVE_HOOK\": 8,\n  \"8\": \"DIRECTIVE_HOOK\",\n  \"TRANSITION_HOOK\": 9,\n  \"9\": \"TRANSITION_HOOK\",\n  \"APP_ERROR_HANDLER\": 10,\n  \"10\": \"APP_ERROR_HANDLER\",\n  \"APP_WARN_HANDLER\": 11,\n  \"11\": \"APP_WARN_HANDLER\",\n  \"FUNCTION_REF\": 12,\n  \"12\": \"FUNCTION_REF\",\n  \"ASYNC_COMPONENT_LOADER\": 13,\n  \"13\": \"ASYNC_COMPONENT_LOADER\",\n  \"SCHEDULER\": 14,\n  \"14\": \"SCHEDULER\",\n  \"COMPONENT_UPDATE\": 15,\n  \"15\": \"COMPONENT_UPDATE\",\n  \"APP_UNMOUNT_CLEANUP\": 16,\n  \"16\": \"APP_UNMOUNT_CLEANUP\"\n};\nconst ErrorTypeStrings$1 = {\n  [\"sp\"]: \"serverPrefetch hook\",\n  [\"bc\"]: \"beforeCreate hook\",\n  [\"c\"]: \"created hook\",\n  [\"bm\"]: \"beforeMount hook\",\n  [\"m\"]: \"mounted hook\",\n  [\"bu\"]: \"beforeUpdate hook\",\n  [\"u\"]: \"updated\",\n  [\"bum\"]: \"beforeUnmount hook\",\n  [\"um\"]: \"unmounted hook\",\n  [\"a\"]: \"activated hook\",\n  [\"da\"]: \"deactivated hook\",\n  [\"ec\"]: \"errorCaptured hook\",\n  [\"rtc\"]: \"renderTracked hook\",\n  [\"rtg\"]: \"renderTriggered hook\",\n  [0]: \"setup function\",\n  [1]: \"render function\",\n  [2]: \"watcher getter\",\n  [3]: \"watcher callback\",\n  [4]: \"watcher cleanup function\",\n  [5]: \"native event handler\",\n  [6]: \"component event handler\",\n  [7]: \"vnode hook\",\n  [8]: \"directive hook\",\n  [9]: \"transition hook\",\n  [10]: \"app errorHandler\",\n  [11]: \"app warnHandler\",\n  [12]: \"ref function\",\n  [13]: \"async component loader\",\n  [14]: \"scheduler flush\",\n  [15]: \"component update\",\n  [16]: \"app unmount cleanup function\"\n};\nfunction callWithErrorHandling(fn, instance, type, args) {\n  try {\n    return args ? fn(...args) : fn();\n  } catch (err) {\n    handleError(err, instance, type);\n  }\n}\nfunction callWithAsyncErrorHandling(fn, instance, type, args) {\n  if (isFunction(fn)) {\n    const res = callWithErrorHandling(fn, instance, type, args);\n    if (res && isPromise(res)) {\n      res.catch((err) => {\n        handleError(err, instance, type);\n      });\n    }\n    return res;\n  }\n  if (isArray(fn)) {\n    const values = [];\n    for (let i = 0; i < fn.length; i++) {\n      values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));\n    }\n    return values;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `Invalid value type passed to callWithAsyncErrorHandling(): ${typeof fn}`\n    );\n  }\n}\nfunction handleError(err, instance, type, throwInDev = true) {\n  const contextVNode = instance ? instance.vnode : null;\n  const { errorHandler, throwUnhandledErrorInProduction } = instance && instance.appContext.config || EMPTY_OBJ;\n  if (instance) {\n    let cur = instance.parent;\n    const exposedInstance = instance.proxy;\n    const errorInfo = !!(process.env.NODE_ENV !== \"production\") ? ErrorTypeStrings$1[type] : `https://vuejs.org/error-reference/#runtime-${type}`;\n    while (cur) {\n      const errorCapturedHooks = cur.ec;\n      if (errorCapturedHooks) {\n        for (let i = 0; i < errorCapturedHooks.length; i++) {\n          if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {\n            return;\n          }\n        }\n      }\n      cur = cur.parent;\n    }\n    if (errorHandler) {\n      pauseTracking();\n      callWithErrorHandling(errorHandler, null, 10, [\n        err,\n        exposedInstance,\n        errorInfo\n      ]);\n      resetTracking();\n      return;\n    }\n  }\n  logError(err, type, contextVNode, throwInDev, throwUnhandledErrorInProduction);\n}\nfunction logError(err, type, contextVNode, throwInDev = true, throwInProd = false) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const info = ErrorTypeStrings$1[type];\n    if (contextVNode) {\n      pushWarningContext(contextVNode);\n    }\n    warn$1(`Unhandled error${info ? ` during execution of ${info}` : ``}`);\n    if (contextVNode) {\n      popWarningContext();\n    }\n    if (throwInDev) {\n      throw err;\n    } else {\n      console.error(err);\n    }\n  } else if (throwInProd) {\n    throw err;\n  } else {\n    console.error(err);\n  }\n}\n\nconst queue = [];\nlet flushIndex = -1;\nconst pendingPostFlushCbs = [];\nlet activePostFlushCbs = null;\nlet postFlushIndex = 0;\nconst resolvedPromise = /* @__PURE__ */ Promise.resolve();\nlet currentFlushPromise = null;\nconst RECURSION_LIMIT = 100;\nfunction nextTick(fn) {\n  const p = currentFlushPromise || resolvedPromise;\n  return fn ? p.then(this ? fn.bind(this) : fn) : p;\n}\nfunction findInsertionIndex(id) {\n  let start = flushIndex + 1;\n  let end = queue.length;\n  while (start < end) {\n    const middle = start + end >>> 1;\n    const middleJob = queue[middle];\n    const middleJobId = getId(middleJob);\n    if (middleJobId < id || middleJobId === id && middleJob.flags & 2) {\n      start = middle + 1;\n    } else {\n      end = middle;\n    }\n  }\n  return start;\n}\nfunction queueJob(job) {\n  if (!(job.flags & 1)) {\n    const jobId = getId(job);\n    const lastJob = queue[queue.length - 1];\n    if (!lastJob || // fast path when the job id is larger than the tail\n    !(job.flags & 2) && jobId >= getId(lastJob)) {\n      queue.push(job);\n    } else {\n      queue.splice(findInsertionIndex(jobId), 0, job);\n    }\n    job.flags |= 1;\n    queueFlush();\n  }\n}\nfunction queueFlush() {\n  if (!currentFlushPromise) {\n    currentFlushPromise = resolvedPromise.then(flushJobs);\n  }\n}\nfunction queuePostFlushCb(cb) {\n  if (!isArray(cb)) {\n    if (activePostFlushCbs && cb.id === -1) {\n      activePostFlushCbs.splice(postFlushIndex + 1, 0, cb);\n    } else if (!(cb.flags & 1)) {\n      pendingPostFlushCbs.push(cb);\n      cb.flags |= 1;\n    }\n  } else {\n    pendingPostFlushCbs.push(...cb);\n  }\n  queueFlush();\n}\nfunction flushPreFlushCbs(instance, seen, i = flushIndex + 1) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    seen = seen || /* @__PURE__ */ new Map();\n  }\n  for (; i < queue.length; i++) {\n    const cb = queue[i];\n    if (cb && cb.flags & 2) {\n      if (instance && cb.id !== instance.uid) {\n        continue;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && checkRecursiveUpdates(seen, cb)) {\n        continue;\n      }\n      queue.splice(i, 1);\n      i--;\n      if (cb.flags & 4) {\n        cb.flags &= ~1;\n      }\n      cb();\n      if (!(cb.flags & 4)) {\n        cb.flags &= ~1;\n      }\n    }\n  }\n}\nfunction flushPostFlushCbs(seen) {\n  if (pendingPostFlushCbs.length) {\n    const deduped = [...new Set(pendingPostFlushCbs)].sort(\n      (a, b) => getId(a) - getId(b)\n    );\n    pendingPostFlushCbs.length = 0;\n    if (activePostFlushCbs) {\n      activePostFlushCbs.push(...deduped);\n      return;\n    }\n    activePostFlushCbs = deduped;\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      seen = seen || /* @__PURE__ */ new Map();\n    }\n    for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {\n      const cb = activePostFlushCbs[postFlushIndex];\n      if (!!(process.env.NODE_ENV !== \"production\") && checkRecursiveUpdates(seen, cb)) {\n        continue;\n      }\n      if (cb.flags & 4) {\n        cb.flags &= ~1;\n      }\n      if (!(cb.flags & 8)) cb();\n      cb.flags &= ~1;\n    }\n    activePostFlushCbs = null;\n    postFlushIndex = 0;\n  }\n}\nconst getId = (job) => job.id == null ? job.flags & 2 ? -1 : Infinity : job.id;\nfunction flushJobs(seen) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    seen = seen || /* @__PURE__ */ new Map();\n  }\n  const check = !!(process.env.NODE_ENV !== \"production\") ? (job) => checkRecursiveUpdates(seen, job) : NOOP;\n  try {\n    for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {\n      const job = queue[flushIndex];\n      if (job && !(job.flags & 8)) {\n        if (!!(process.env.NODE_ENV !== \"production\") && check(job)) {\n          continue;\n        }\n        if (job.flags & 4) {\n          job.flags &= ~1;\n        }\n        callWithErrorHandling(\n          job,\n          job.i,\n          job.i ? 15 : 14\n        );\n        if (!(job.flags & 4)) {\n          job.flags &= ~1;\n        }\n      }\n    }\n  } finally {\n    for (; flushIndex < queue.length; flushIndex++) {\n      const job = queue[flushIndex];\n      if (job) {\n        job.flags &= ~1;\n      }\n    }\n    flushIndex = -1;\n    queue.length = 0;\n    flushPostFlushCbs(seen);\n    currentFlushPromise = null;\n    if (queue.length || pendingPostFlushCbs.length) {\n      flushJobs(seen);\n    }\n  }\n}\nfunction checkRecursiveUpdates(seen, fn) {\n  const count = seen.get(fn) || 0;\n  if (count > RECURSION_LIMIT) {\n    const instance = fn.i;\n    const componentName = instance && getComponentName(instance.type);\n    handleError(\n      `Maximum recursive updates exceeded${componentName ? ` in component <${componentName}>` : ``}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,\n      null,\n      10\n    );\n    return true;\n  }\n  seen.set(fn, count + 1);\n  return false;\n}\n\nlet isHmrUpdating = false;\nconst hmrDirtyComponents = /* @__PURE__ */ new Map();\nif (!!(process.env.NODE_ENV !== \"production\")) {\n  getGlobalThis().__VUE_HMR_RUNTIME__ = {\n    createRecord: tryWrap(createRecord),\n    rerender: tryWrap(rerender),\n    reload: tryWrap(reload)\n  };\n}\nconst map = /* @__PURE__ */ new Map();\nfunction registerHMR(instance) {\n  const id = instance.type.__hmrId;\n  let record = map.get(id);\n  if (!record) {\n    createRecord(id, instance.type);\n    record = map.get(id);\n  }\n  record.instances.add(instance);\n}\nfunction unregisterHMR(instance) {\n  map.get(instance.type.__hmrId).instances.delete(instance);\n}\nfunction createRecord(id, initialDef) {\n  if (map.has(id)) {\n    return false;\n  }\n  map.set(id, {\n    initialDef: normalizeClassComponent(initialDef),\n    instances: /* @__PURE__ */ new Set()\n  });\n  return true;\n}\nfunction normalizeClassComponent(component) {\n  return isClassComponent(component) ? component.__vccOpts : component;\n}\nfunction rerender(id, newRender) {\n  const record = map.get(id);\n  if (!record) {\n    return;\n  }\n  record.initialDef.render = newRender;\n  [...record.instances].forEach((instance) => {\n    if (newRender) {\n      instance.render = newRender;\n      normalizeClassComponent(instance.type).render = newRender;\n    }\n    instance.renderCache = [];\n    isHmrUpdating = true;\n    instance.update();\n    isHmrUpdating = false;\n  });\n}\nfunction reload(id, newComp) {\n  const record = map.get(id);\n  if (!record) return;\n  newComp = normalizeClassComponent(newComp);\n  updateComponentDef(record.initialDef, newComp);\n  const instances = [...record.instances];\n  for (let i = 0; i < instances.length; i++) {\n    const instance = instances[i];\n    const oldComp = normalizeClassComponent(instance.type);\n    let dirtyInstances = hmrDirtyComponents.get(oldComp);\n    if (!dirtyInstances) {\n      if (oldComp !== record.initialDef) {\n        updateComponentDef(oldComp, newComp);\n      }\n      hmrDirtyComponents.set(oldComp, dirtyInstances = /* @__PURE__ */ new Set());\n    }\n    dirtyInstances.add(instance);\n    instance.appContext.propsCache.delete(instance.type);\n    instance.appContext.emitsCache.delete(instance.type);\n    instance.appContext.optionsCache.delete(instance.type);\n    if (instance.ceReload) {\n      dirtyInstances.add(instance);\n      instance.ceReload(newComp.styles);\n      dirtyInstances.delete(instance);\n    } else if (instance.parent) {\n      queueJob(() => {\n        isHmrUpdating = true;\n        instance.parent.update();\n        isHmrUpdating = false;\n        dirtyInstances.delete(instance);\n      });\n    } else if (instance.appContext.reload) {\n      instance.appContext.reload();\n    } else if (typeof window !== \"undefined\") {\n      window.location.reload();\n    } else {\n      console.warn(\n        \"[HMR] Root or manually mounted instance modified. Full reload required.\"\n      );\n    }\n    if (instance.root.ce && instance !== instance.root) {\n      instance.root.ce._removeChildStyle(oldComp);\n    }\n  }\n  queuePostFlushCb(() => {\n    hmrDirtyComponents.clear();\n  });\n}\nfunction updateComponentDef(oldComp, newComp) {\n  extend(oldComp, newComp);\n  for (const key in oldComp) {\n    if (key !== \"__file\" && !(key in newComp)) {\n      delete oldComp[key];\n    }\n  }\n}\nfunction tryWrap(fn) {\n  return (id, arg) => {\n    try {\n      return fn(id, arg);\n    } catch (e) {\n      console.error(e);\n      console.warn(\n        `[HMR] Something went wrong during Vue component hot-reload. Full reload required.`\n      );\n    }\n  };\n}\n\nlet devtools$1;\nlet buffer = [];\nlet devtoolsNotInstalled = false;\nfunction emit$1(event, ...args) {\n  if (devtools$1) {\n    devtools$1.emit(event, ...args);\n  } else if (!devtoolsNotInstalled) {\n    buffer.push({ event, args });\n  }\n}\nfunction setDevtoolsHook$1(hook, target) {\n  var _a, _b;\n  devtools$1 = hook;\n  if (devtools$1) {\n    devtools$1.enabled = true;\n    buffer.forEach(({ event, args }) => devtools$1.emit(event, ...args));\n    buffer = [];\n  } else if (\n    // handle late devtools injection - only do this if we are in an actual\n    // browser environment to avoid the timer handle stalling test runner exit\n    // (#4815)\n    typeof window !== \"undefined\" && // some envs mock window but not fully\n    window.HTMLElement && // also exclude jsdom\n    // eslint-disable-next-line no-restricted-syntax\n    !((_b = (_a = window.navigator) == null ? void 0 : _a.userAgent) == null ? void 0 : _b.includes(\"jsdom\"))\n  ) {\n    const replay = target.__VUE_DEVTOOLS_HOOK_REPLAY__ = target.__VUE_DEVTOOLS_HOOK_REPLAY__ || [];\n    replay.push((newHook) => {\n      setDevtoolsHook$1(newHook, target);\n    });\n    setTimeout(() => {\n      if (!devtools$1) {\n        target.__VUE_DEVTOOLS_HOOK_REPLAY__ = null;\n        devtoolsNotInstalled = true;\n        buffer = [];\n      }\n    }, 3e3);\n  } else {\n    devtoolsNotInstalled = true;\n    buffer = [];\n  }\n}\nfunction devtoolsInitApp(app, version) {\n  emit$1(\"app:init\" /* APP_INIT */, app, version, {\n    Fragment,\n    Text,\n    Comment,\n    Static\n  });\n}\nfunction devtoolsUnmountApp(app) {\n  emit$1(\"app:unmount\" /* APP_UNMOUNT */, app);\n}\nconst devtoolsComponentAdded = /* @__PURE__ */ createDevtoolsComponentHook(\"component:added\" /* COMPONENT_ADDED */);\nconst devtoolsComponentUpdated = /* @__PURE__ */ createDevtoolsComponentHook(\"component:updated\" /* COMPONENT_UPDATED */);\nconst _devtoolsComponentRemoved = /* @__PURE__ */ createDevtoolsComponentHook(\n  \"component:removed\" /* COMPONENT_REMOVED */\n);\nconst devtoolsComponentRemoved = (component) => {\n  if (devtools$1 && typeof devtools$1.cleanupBuffer === \"function\" && // remove the component if it wasn't buffered\n  !devtools$1.cleanupBuffer(component)) {\n    _devtoolsComponentRemoved(component);\n  }\n};\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction createDevtoolsComponentHook(hook) {\n  return (component) => {\n    emit$1(\n      hook,\n      component.appContext.app,\n      component.uid,\n      component.parent ? component.parent.uid : void 0,\n      component\n    );\n  };\n}\nconst devtoolsPerfStart = /* @__PURE__ */ createDevtoolsPerformanceHook(\"perf:start\" /* PERFORMANCE_START */);\nconst devtoolsPerfEnd = /* @__PURE__ */ createDevtoolsPerformanceHook(\"perf:end\" /* PERFORMANCE_END */);\nfunction createDevtoolsPerformanceHook(hook) {\n  return (component, type, time) => {\n    emit$1(hook, component.appContext.app, component.uid, component, type, time);\n  };\n}\nfunction devtoolsComponentEmit(component, event, params) {\n  emit$1(\n    \"component:emit\" /* COMPONENT_EMIT */,\n    component.appContext.app,\n    component,\n    event,\n    params\n  );\n}\n\nlet currentRenderingInstance = null;\nlet currentScopeId = null;\nfunction setCurrentRenderingInstance(instance) {\n  const prev = currentRenderingInstance;\n  currentRenderingInstance = instance;\n  currentScopeId = instance && instance.type.__scopeId || null;\n  return prev;\n}\nfunction pushScopeId(id) {\n  currentScopeId = id;\n}\nfunction popScopeId() {\n  currentScopeId = null;\n}\nconst withScopeId = (_id) => withCtx;\nfunction withCtx(fn, ctx = currentRenderingInstance, isNonScopedSlot) {\n  if (!ctx) return fn;\n  if (fn._n) {\n    return fn;\n  }\n  const renderFnWithContext = (...args) => {\n    if (renderFnWithContext._d) {\n      setBlockTracking(-1);\n    }\n    const prevInstance = setCurrentRenderingInstance(ctx);\n    let res;\n    try {\n      res = fn(...args);\n    } finally {\n      setCurrentRenderingInstance(prevInstance);\n      if (renderFnWithContext._d) {\n        setBlockTracking(1);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      devtoolsComponentUpdated(ctx);\n    }\n    return res;\n  };\n  renderFnWithContext._n = true;\n  renderFnWithContext._c = true;\n  renderFnWithContext._d = true;\n  return renderFnWithContext;\n}\n\nfunction validateDirectiveName(name) {\n  if (isBuiltInDirective(name)) {\n    warn$1(\"Do not use built-in directive ids as custom directive id: \" + name);\n  }\n}\nfunction withDirectives(vnode, directives) {\n  if (currentRenderingInstance === null) {\n    !!(process.env.NODE_ENV !== \"production\") && warn$1(`withDirectives can only be used inside render functions.`);\n    return vnode;\n  }\n  const instance = getComponentPublicInstance(currentRenderingInstance);\n  const bindings = vnode.dirs || (vnode.dirs = []);\n  for (let i = 0; i < directives.length; i++) {\n    let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];\n    if (dir) {\n      if (isFunction(dir)) {\n        dir = {\n          mounted: dir,\n          updated: dir\n        };\n      }\n      if (dir.deep) {\n        traverse(value);\n      }\n      bindings.push({\n        dir,\n        instance,\n        value,\n        oldValue: void 0,\n        arg,\n        modifiers\n      });\n    }\n  }\n  return vnode;\n}\nfunction invokeDirectiveHook(vnode, prevVNode, instance, name) {\n  const bindings = vnode.dirs;\n  const oldBindings = prevVNode && prevVNode.dirs;\n  for (let i = 0; i < bindings.length; i++) {\n    const binding = bindings[i];\n    if (oldBindings) {\n      binding.oldValue = oldBindings[i].value;\n    }\n    let hook = binding.dir[name];\n    if (hook) {\n      pauseTracking();\n      callWithAsyncErrorHandling(hook, instance, 8, [\n        vnode.el,\n        binding,\n        vnode,\n        prevVNode\n      ]);\n      resetTracking();\n    }\n  }\n}\n\nconst TeleportEndKey = Symbol(\"_vte\");\nconst isTeleport = (type) => type.__isTeleport;\nconst isTeleportDisabled = (props) => props && (props.disabled || props.disabled === \"\");\nconst isTeleportDeferred = (props) => props && (props.defer || props.defer === \"\");\nconst isTargetSVG = (target) => typeof SVGElement !== \"undefined\" && target instanceof SVGElement;\nconst isTargetMathML = (target) => typeof MathMLElement === \"function\" && target instanceof MathMLElement;\nconst resolveTarget = (props, select) => {\n  const targetSelector = props && props.to;\n  if (isString(targetSelector)) {\n    if (!select) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Current renderer does not support string target for Teleports. (missing querySelector renderer option)`\n      );\n      return null;\n    } else {\n      const target = select(targetSelector);\n      if (!!(process.env.NODE_ENV !== \"production\") && !target && !isTeleportDisabled(props)) {\n        warn$1(\n          `Failed to locate Teleport target with selector \"${targetSelector}\". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`\n        );\n      }\n      return target;\n    }\n  } else {\n    if (!!(process.env.NODE_ENV !== \"production\") && !targetSelector && !isTeleportDisabled(props)) {\n      warn$1(`Invalid Teleport target: ${targetSelector}`);\n    }\n    return targetSelector;\n  }\n};\nconst TeleportImpl = {\n  name: \"Teleport\",\n  __isTeleport: true,\n  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, internals) {\n    const {\n      mc: mountChildren,\n      pc: patchChildren,\n      pbc: patchBlockChildren,\n      o: { insert, querySelector, createText, createComment }\n    } = internals;\n    const disabled = isTeleportDisabled(n2.props);\n    let { shapeFlag, children, dynamicChildren } = n2;\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (n1 == null) {\n      const placeholder = n2.el = !!(process.env.NODE_ENV !== \"production\") ? createComment(\"teleport start\") : createText(\"\");\n      const mainAnchor = n2.anchor = !!(process.env.NODE_ENV !== \"production\") ? createComment(\"teleport end\") : createText(\"\");\n      insert(placeholder, container, anchor);\n      insert(mainAnchor, container, anchor);\n      const mount = (container2, anchor2) => {\n        if (shapeFlag & 16) {\n          if (parentComponent && parentComponent.isCE) {\n            parentComponent.ce._teleportTarget = container2;\n          }\n          mountChildren(\n            children,\n            container2,\n            anchor2,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        }\n      };\n      const mountToTarget = () => {\n        const target = n2.target = resolveTarget(n2.props, querySelector);\n        const targetAnchor = prepareAnchor(target, n2, createText, insert);\n        if (target) {\n          if (namespace !== \"svg\" && isTargetSVG(target)) {\n            namespace = \"svg\";\n          } else if (namespace !== \"mathml\" && isTargetMathML(target)) {\n            namespace = \"mathml\";\n          }\n          if (!disabled) {\n            mount(target, targetAnchor);\n            updateCssVars(n2, false);\n          }\n        } else if (!!(process.env.NODE_ENV !== \"production\") && !disabled) {\n          warn$1(\n            \"Invalid Teleport target on mount:\",\n            target,\n            `(${typeof target})`\n          );\n        }\n      };\n      if (disabled) {\n        mount(container, mainAnchor);\n        updateCssVars(n2, true);\n      }\n      if (isTeleportDeferred(n2.props)) {\n        queuePostRenderEffect(() => {\n          mountToTarget();\n          n2.el.__isMounted = true;\n        }, parentSuspense);\n      } else {\n        mountToTarget();\n      }\n    } else {\n      if (isTeleportDeferred(n2.props) && !n1.el.__isMounted) {\n        queuePostRenderEffect(() => {\n          TeleportImpl.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n          delete n1.el.__isMounted;\n        }, parentSuspense);\n        return;\n      }\n      n2.el = n1.el;\n      n2.targetStart = n1.targetStart;\n      const mainAnchor = n2.anchor = n1.anchor;\n      const target = n2.target = n1.target;\n      const targetAnchor = n2.targetAnchor = n1.targetAnchor;\n      const wasDisabled = isTeleportDisabled(n1.props);\n      const currentContainer = wasDisabled ? container : target;\n      const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;\n      if (namespace === \"svg\" || isTargetSVG(target)) {\n        namespace = \"svg\";\n      } else if (namespace === \"mathml\" || isTargetMathML(target)) {\n        namespace = \"mathml\";\n      }\n      if (dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          currentContainer,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds\n        );\n        traverseStaticChildren(n1, n2, true);\n      } else if (!optimized) {\n        patchChildren(\n          n1,\n          n2,\n          currentContainer,\n          currentAnchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          false\n        );\n      }\n      if (disabled) {\n        if (!wasDisabled) {\n          moveTeleport(\n            n2,\n            container,\n            mainAnchor,\n            internals,\n            1\n          );\n        } else {\n          if (n2.props && n1.props && n2.props.to !== n1.props.to) {\n            n2.props.to = n1.props.to;\n          }\n        }\n      } else {\n        if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {\n          const nextTarget = n2.target = resolveTarget(\n            n2.props,\n            querySelector\n          );\n          if (nextTarget) {\n            moveTeleport(\n              n2,\n              nextTarget,\n              null,\n              internals,\n              0\n            );\n          } else if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn$1(\n              \"Invalid Teleport target on update:\",\n              target,\n              `(${typeof target})`\n            );\n          }\n        } else if (wasDisabled) {\n          moveTeleport(\n            n2,\n            target,\n            targetAnchor,\n            internals,\n            1\n          );\n        }\n      }\n      updateCssVars(n2, disabled);\n    }\n  },\n  remove(vnode, parentComponent, parentSuspense, { um: unmount, o: { remove: hostRemove } }, doRemove) {\n    const {\n      shapeFlag,\n      children,\n      anchor,\n      targetStart,\n      targetAnchor,\n      target,\n      props\n    } = vnode;\n    if (target) {\n      hostRemove(targetStart);\n      hostRemove(targetAnchor);\n    }\n    doRemove && hostRemove(anchor);\n    if (shapeFlag & 16) {\n      const shouldRemove = doRemove || !isTeleportDisabled(props);\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        unmount(\n          child,\n          parentComponent,\n          parentSuspense,\n          shouldRemove,\n          !!child.dynamicChildren\n        );\n      }\n    }\n  },\n  move: moveTeleport,\n  hydrate: hydrateTeleport\n};\nfunction moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2) {\n  if (moveType === 0) {\n    insert(vnode.targetAnchor, container, parentAnchor);\n  }\n  const { el, anchor, shapeFlag, children, props } = vnode;\n  const isReorder = moveType === 2;\n  if (isReorder) {\n    insert(el, container, parentAnchor);\n  }\n  if (!isReorder || isTeleportDisabled(props)) {\n    if (shapeFlag & 16) {\n      for (let i = 0; i < children.length; i++) {\n        move(\n          children[i],\n          container,\n          parentAnchor,\n          2\n        );\n      }\n    }\n  }\n  if (isReorder) {\n    insert(anchor, container, parentAnchor);\n  }\n}\nfunction hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, {\n  o: { nextSibling, parentNode, querySelector, insert, createText }\n}, hydrateChildren) {\n  const target = vnode.target = resolveTarget(\n    vnode.props,\n    querySelector\n  );\n  if (target) {\n    const disabled = isTeleportDisabled(vnode.props);\n    const targetNode = target._lpa || target.firstChild;\n    if (vnode.shapeFlag & 16) {\n      if (disabled) {\n        vnode.anchor = hydrateChildren(\n          nextSibling(node),\n          vnode,\n          parentNode(node),\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n        vnode.targetStart = targetNode;\n        vnode.targetAnchor = targetNode && nextSibling(targetNode);\n      } else {\n        vnode.anchor = nextSibling(node);\n        let targetAnchor = targetNode;\n        while (targetAnchor) {\n          if (targetAnchor && targetAnchor.nodeType === 8) {\n            if (targetAnchor.data === \"teleport start anchor\") {\n              vnode.targetStart = targetAnchor;\n            } else if (targetAnchor.data === \"teleport anchor\") {\n              vnode.targetAnchor = targetAnchor;\n              target._lpa = vnode.targetAnchor && nextSibling(vnode.targetAnchor);\n              break;\n            }\n          }\n          targetAnchor = nextSibling(targetAnchor);\n        }\n        if (!vnode.targetAnchor) {\n          prepareAnchor(target, vnode, createText, insert);\n        }\n        hydrateChildren(\n          targetNode && nextSibling(targetNode),\n          vnode,\n          target,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n      }\n    }\n    updateCssVars(vnode, disabled);\n  }\n  return vnode.anchor && nextSibling(vnode.anchor);\n}\nconst Teleport = TeleportImpl;\nfunction updateCssVars(vnode, isDisabled) {\n  const ctx = vnode.ctx;\n  if (ctx && ctx.ut) {\n    let node, anchor;\n    if (isDisabled) {\n      node = vnode.el;\n      anchor = vnode.anchor;\n    } else {\n      node = vnode.targetStart;\n      anchor = vnode.targetAnchor;\n    }\n    while (node && node !== anchor) {\n      if (node.nodeType === 1) node.setAttribute(\"data-v-owner\", ctx.uid);\n      node = node.nextSibling;\n    }\n    ctx.ut();\n  }\n}\nfunction prepareAnchor(target, vnode, createText, insert) {\n  const targetStart = vnode.targetStart = createText(\"\");\n  const targetAnchor = vnode.targetAnchor = createText(\"\");\n  targetStart[TeleportEndKey] = targetAnchor;\n  if (target) {\n    insert(targetStart, target);\n    insert(targetAnchor, target);\n  }\n  return targetAnchor;\n}\n\nconst leaveCbKey = Symbol(\"_leaveCb\");\nconst enterCbKey = Symbol(\"_enterCb\");\nfunction useTransitionState() {\n  const state = {\n    isMounted: false,\n    isLeaving: false,\n    isUnmounting: false,\n    leavingVNodes: /* @__PURE__ */ new Map()\n  };\n  onMounted(() => {\n    state.isMounted = true;\n  });\n  onBeforeUnmount(() => {\n    state.isUnmounting = true;\n  });\n  return state;\n}\nconst TransitionHookValidator = [Function, Array];\nconst BaseTransitionPropsValidators = {\n  mode: String,\n  appear: Boolean,\n  persisted: Boolean,\n  // enter\n  onBeforeEnter: TransitionHookValidator,\n  onEnter: TransitionHookValidator,\n  onAfterEnter: TransitionHookValidator,\n  onEnterCancelled: TransitionHookValidator,\n  // leave\n  onBeforeLeave: TransitionHookValidator,\n  onLeave: TransitionHookValidator,\n  onAfterLeave: TransitionHookValidator,\n  onLeaveCancelled: TransitionHookValidator,\n  // appear\n  onBeforeAppear: TransitionHookValidator,\n  onAppear: TransitionHookValidator,\n  onAfterAppear: TransitionHookValidator,\n  onAppearCancelled: TransitionHookValidator\n};\nconst recursiveGetSubtree = (instance) => {\n  const subTree = instance.subTree;\n  return subTree.component ? recursiveGetSubtree(subTree.component) : subTree;\n};\nconst BaseTransitionImpl = {\n  name: `BaseTransition`,\n  props: BaseTransitionPropsValidators,\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const state = useTransitionState();\n    return () => {\n      const children = slots.default && getTransitionRawChildren(slots.default(), true);\n      if (!children || !children.length) {\n        return;\n      }\n      const child = findNonCommentChild(children);\n      const rawProps = toRaw(props);\n      const { mode } = rawProps;\n      if (!!(process.env.NODE_ENV !== \"production\") && mode && mode !== \"in-out\" && mode !== \"out-in\" && mode !== \"default\") {\n        warn$1(`invalid <transition> mode: ${mode}`);\n      }\n      if (state.isLeaving) {\n        return emptyPlaceholder(child);\n      }\n      const innerChild = getInnerChild$1(child);\n      if (!innerChild) {\n        return emptyPlaceholder(child);\n      }\n      let enterHooks = resolveTransitionHooks(\n        innerChild,\n        rawProps,\n        state,\n        instance,\n        // #11061, ensure enterHooks is fresh after clone\n        (hooks) => enterHooks = hooks\n      );\n      if (innerChild.type !== Comment) {\n        setTransitionHooks(innerChild, enterHooks);\n      }\n      let oldInnerChild = instance.subTree && getInnerChild$1(instance.subTree);\n      if (oldInnerChild && oldInnerChild.type !== Comment && !isSameVNodeType(innerChild, oldInnerChild) && recursiveGetSubtree(instance).type !== Comment) {\n        let leavingHooks = resolveTransitionHooks(\n          oldInnerChild,\n          rawProps,\n          state,\n          instance\n        );\n        setTransitionHooks(oldInnerChild, leavingHooks);\n        if (mode === \"out-in\" && innerChild.type !== Comment) {\n          state.isLeaving = true;\n          leavingHooks.afterLeave = () => {\n            state.isLeaving = false;\n            if (!(instance.job.flags & 8)) {\n              instance.update();\n            }\n            delete leavingHooks.afterLeave;\n            oldInnerChild = void 0;\n          };\n          return emptyPlaceholder(child);\n        } else if (mode === \"in-out\" && innerChild.type !== Comment) {\n          leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {\n            const leavingVNodesCache = getLeavingNodesForType(\n              state,\n              oldInnerChild\n            );\n            leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;\n            el[leaveCbKey] = () => {\n              earlyRemove();\n              el[leaveCbKey] = void 0;\n              delete enterHooks.delayedLeave;\n              oldInnerChild = void 0;\n            };\n            enterHooks.delayedLeave = () => {\n              delayedLeave();\n              delete enterHooks.delayedLeave;\n              oldInnerChild = void 0;\n            };\n          };\n        } else {\n          oldInnerChild = void 0;\n        }\n      } else if (oldInnerChild) {\n        oldInnerChild = void 0;\n      }\n      return child;\n    };\n  }\n};\nfunction findNonCommentChild(children) {\n  let child = children[0];\n  if (children.length > 1) {\n    let hasFound = false;\n    for (const c of children) {\n      if (c.type !== Comment) {\n        if (!!(process.env.NODE_ENV !== \"production\") && hasFound) {\n          warn$1(\n            \"<transition> can only be used on a single element or component. Use <transition-group> for lists.\"\n          );\n          break;\n        }\n        child = c;\n        hasFound = true;\n        if (!!!(process.env.NODE_ENV !== \"production\")) break;\n      }\n    }\n  }\n  return child;\n}\nconst BaseTransition = BaseTransitionImpl;\nfunction getLeavingNodesForType(state, vnode) {\n  const { leavingVNodes } = state;\n  let leavingVNodesCache = leavingVNodes.get(vnode.type);\n  if (!leavingVNodesCache) {\n    leavingVNodesCache = /* @__PURE__ */ Object.create(null);\n    leavingVNodes.set(vnode.type, leavingVNodesCache);\n  }\n  return leavingVNodesCache;\n}\nfunction resolveTransitionHooks(vnode, props, state, instance, postClone) {\n  const {\n    appear,\n    mode,\n    persisted = false,\n    onBeforeEnter,\n    onEnter,\n    onAfterEnter,\n    onEnterCancelled,\n    onBeforeLeave,\n    onLeave,\n    onAfterLeave,\n    onLeaveCancelled,\n    onBeforeAppear,\n    onAppear,\n    onAfterAppear,\n    onAppearCancelled\n  } = props;\n  const key = String(vnode.key);\n  const leavingVNodesCache = getLeavingNodesForType(state, vnode);\n  const callHook = (hook, args) => {\n    hook && callWithAsyncErrorHandling(\n      hook,\n      instance,\n      9,\n      args\n    );\n  };\n  const callAsyncHook = (hook, args) => {\n    const done = args[1];\n    callHook(hook, args);\n    if (isArray(hook)) {\n      if (hook.every((hook2) => hook2.length <= 1)) done();\n    } else if (hook.length <= 1) {\n      done();\n    }\n  };\n  const hooks = {\n    mode,\n    persisted,\n    beforeEnter(el) {\n      let hook = onBeforeEnter;\n      if (!state.isMounted) {\n        if (appear) {\n          hook = onBeforeAppear || onBeforeEnter;\n        } else {\n          return;\n        }\n      }\n      if (el[leaveCbKey]) {\n        el[leaveCbKey](\n          true\n          /* cancelled */\n        );\n      }\n      const leavingVNode = leavingVNodesCache[key];\n      if (leavingVNode && isSameVNodeType(vnode, leavingVNode) && leavingVNode.el[leaveCbKey]) {\n        leavingVNode.el[leaveCbKey]();\n      }\n      callHook(hook, [el]);\n    },\n    enter(el) {\n      let hook = onEnter;\n      let afterHook = onAfterEnter;\n      let cancelHook = onEnterCancelled;\n      if (!state.isMounted) {\n        if (appear) {\n          hook = onAppear || onEnter;\n          afterHook = onAfterAppear || onAfterEnter;\n          cancelHook = onAppearCancelled || onEnterCancelled;\n        } else {\n          return;\n        }\n      }\n      let called = false;\n      const done = el[enterCbKey] = (cancelled) => {\n        if (called) return;\n        called = true;\n        if (cancelled) {\n          callHook(cancelHook, [el]);\n        } else {\n          callHook(afterHook, [el]);\n        }\n        if (hooks.delayedLeave) {\n          hooks.delayedLeave();\n        }\n        el[enterCbKey] = void 0;\n      };\n      if (hook) {\n        callAsyncHook(hook, [el, done]);\n      } else {\n        done();\n      }\n    },\n    leave(el, remove) {\n      const key2 = String(vnode.key);\n      if (el[enterCbKey]) {\n        el[enterCbKey](\n          true\n          /* cancelled */\n        );\n      }\n      if (state.isUnmounting) {\n        return remove();\n      }\n      callHook(onBeforeLeave, [el]);\n      let called = false;\n      const done = el[leaveCbKey] = (cancelled) => {\n        if (called) return;\n        called = true;\n        remove();\n        if (cancelled) {\n          callHook(onLeaveCancelled, [el]);\n        } else {\n          callHook(onAfterLeave, [el]);\n        }\n        el[leaveCbKey] = void 0;\n        if (leavingVNodesCache[key2] === vnode) {\n          delete leavingVNodesCache[key2];\n        }\n      };\n      leavingVNodesCache[key2] = vnode;\n      if (onLeave) {\n        callAsyncHook(onLeave, [el, done]);\n      } else {\n        done();\n      }\n    },\n    clone(vnode2) {\n      const hooks2 = resolveTransitionHooks(\n        vnode2,\n        props,\n        state,\n        instance,\n        postClone\n      );\n      if (postClone) postClone(hooks2);\n      return hooks2;\n    }\n  };\n  return hooks;\n}\nfunction emptyPlaceholder(vnode) {\n  if (isKeepAlive(vnode)) {\n    vnode = cloneVNode(vnode);\n    vnode.children = null;\n    return vnode;\n  }\n}\nfunction getInnerChild$1(vnode) {\n  if (!isKeepAlive(vnode)) {\n    if (isTeleport(vnode.type) && vnode.children) {\n      return findNonCommentChild(vnode.children);\n    }\n    return vnode;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && vnode.component) {\n    return vnode.component.subTree;\n  }\n  const { shapeFlag, children } = vnode;\n  if (children) {\n    if (shapeFlag & 16) {\n      return children[0];\n    }\n    if (shapeFlag & 32 && isFunction(children.default)) {\n      return children.default();\n    }\n  }\n}\nfunction setTransitionHooks(vnode, hooks) {\n  if (vnode.shapeFlag & 6 && vnode.component) {\n    vnode.transition = hooks;\n    setTransitionHooks(vnode.component.subTree, hooks);\n  } else if (vnode.shapeFlag & 128) {\n    vnode.ssContent.transition = hooks.clone(vnode.ssContent);\n    vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);\n  } else {\n    vnode.transition = hooks;\n  }\n}\nfunction getTransitionRawChildren(children, keepComment = false, parentKey) {\n  let ret = [];\n  let keyedFragmentCount = 0;\n  for (let i = 0; i < children.length; i++) {\n    let child = children[i];\n    const key = parentKey == null ? child.key : String(parentKey) + String(child.key != null ? child.key : i);\n    if (child.type === Fragment) {\n      if (child.patchFlag & 128) keyedFragmentCount++;\n      ret = ret.concat(\n        getTransitionRawChildren(child.children, keepComment, key)\n      );\n    } else if (keepComment || child.type !== Comment) {\n      ret.push(key != null ? cloneVNode(child, { key }) : child);\n    }\n  }\n  if (keyedFragmentCount > 1) {\n    for (let i = 0; i < ret.length; i++) {\n      ret[i].patchFlag = -2;\n    }\n  }\n  return ret;\n}\n\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineComponent(options, extraOptions) {\n  return isFunction(options) ? (\n    // #8236: extend call and options.name access are considered side-effects\n    // by Rollup, so we have to wrap it in a pure-annotated IIFE.\n    /* @__PURE__ */ (() => extend({ name: options.name }, extraOptions, { setup: options }))()\n  ) : options;\n}\n\nfunction useId() {\n  const i = getCurrentInstance();\n  if (i) {\n    return (i.appContext.config.idPrefix || \"v\") + \"-\" + i.ids[0] + i.ids[1]++;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `useId() is called when there is no active component instance to be associated with.`\n    );\n  }\n  return \"\";\n}\nfunction markAsyncBoundary(instance) {\n  instance.ids = [instance.ids[0] + instance.ids[2]++ + \"-\", 0, 0];\n}\n\nconst knownTemplateRefs = /* @__PURE__ */ new WeakSet();\nfunction useTemplateRef(key) {\n  const i = getCurrentInstance();\n  const r = shallowRef(null);\n  if (i) {\n    const refs = i.refs === EMPTY_OBJ ? i.refs = {} : i.refs;\n    let desc;\n    if (!!(process.env.NODE_ENV !== \"production\") && (desc = Object.getOwnPropertyDescriptor(refs, key)) && !desc.configurable) {\n      warn$1(`useTemplateRef('${key}') already exists.`);\n    } else {\n      Object.defineProperty(refs, key, {\n        enumerable: true,\n        get: () => r.value,\n        set: (val) => r.value = val\n      });\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `useTemplateRef() is called when there is no active component instance to be associated with.`\n    );\n  }\n  const ret = !!(process.env.NODE_ENV !== \"production\") ? readonly(r) : r;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    knownTemplateRefs.add(ret);\n  }\n  return ret;\n}\n\nfunction setRef(rawRef, oldRawRef, parentSuspense, vnode, isUnmount = false) {\n  if (isArray(rawRef)) {\n    rawRef.forEach(\n      (r, i) => setRef(\n        r,\n        oldRawRef && (isArray(oldRawRef) ? oldRawRef[i] : oldRawRef),\n        parentSuspense,\n        vnode,\n        isUnmount\n      )\n    );\n    return;\n  }\n  if (isAsyncWrapper(vnode) && !isUnmount) {\n    if (vnode.shapeFlag & 512 && vnode.type.__asyncResolved && vnode.component.subTree.component) {\n      setRef(rawRef, oldRawRef, parentSuspense, vnode.component.subTree);\n    }\n    return;\n  }\n  const refValue = vnode.shapeFlag & 4 ? getComponentPublicInstance(vnode.component) : vnode.el;\n  const value = isUnmount ? null : refValue;\n  const { i: owner, r: ref } = rawRef;\n  if (!!(process.env.NODE_ENV !== \"production\") && !owner) {\n    warn$1(\n      `Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.`\n    );\n    return;\n  }\n  const oldRef = oldRawRef && oldRawRef.r;\n  const refs = owner.refs === EMPTY_OBJ ? owner.refs = {} : owner.refs;\n  const setupState = owner.setupState;\n  const rawSetupState = toRaw(setupState);\n  const canSetSetupRef = setupState === EMPTY_OBJ ? () => false : (key) => {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (hasOwn(rawSetupState, key) && !isRef(rawSetupState[key])) {\n        warn$1(\n          `Template ref \"${key}\" used on a non-ref value. It will not work in the production build.`\n        );\n      }\n      if (knownTemplateRefs.has(rawSetupState[key])) {\n        return false;\n      }\n    }\n    return hasOwn(rawSetupState, key);\n  };\n  if (oldRef != null && oldRef !== ref) {\n    if (isString(oldRef)) {\n      refs[oldRef] = null;\n      if (canSetSetupRef(oldRef)) {\n        setupState[oldRef] = null;\n      }\n    } else if (isRef(oldRef)) {\n      oldRef.value = null;\n    }\n  }\n  if (isFunction(ref)) {\n    callWithErrorHandling(ref, owner, 12, [value, refs]);\n  } else {\n    const _isString = isString(ref);\n    const _isRef = isRef(ref);\n    if (_isString || _isRef) {\n      const doSet = () => {\n        if (rawRef.f) {\n          const existing = _isString ? canSetSetupRef(ref) ? setupState[ref] : refs[ref] : ref.value;\n          if (isUnmount) {\n            isArray(existing) && remove(existing, refValue);\n          } else {\n            if (!isArray(existing)) {\n              if (_isString) {\n                refs[ref] = [refValue];\n                if (canSetSetupRef(ref)) {\n                  setupState[ref] = refs[ref];\n                }\n              } else {\n                ref.value = [refValue];\n                if (rawRef.k) refs[rawRef.k] = ref.value;\n              }\n            } else if (!existing.includes(refValue)) {\n              existing.push(refValue);\n            }\n          }\n        } else if (_isString) {\n          refs[ref] = value;\n          if (canSetSetupRef(ref)) {\n            setupState[ref] = value;\n          }\n        } else if (_isRef) {\n          ref.value = value;\n          if (rawRef.k) refs[rawRef.k] = value;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Invalid template ref type:\", ref, `(${typeof ref})`);\n        }\n      };\n      if (value) {\n        doSet.id = -1;\n        queuePostRenderEffect(doSet, parentSuspense);\n      } else {\n        doSet();\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(\"Invalid template ref type:\", ref, `(${typeof ref})`);\n    }\n  }\n}\n\nlet hasLoggedMismatchError = false;\nconst logMismatchError = () => {\n  if (hasLoggedMismatchError) {\n    return;\n  }\n  console.error(\"Hydration completed but contains mismatches.\");\n  hasLoggedMismatchError = true;\n};\nconst isSVGContainer = (container) => container.namespaceURI.includes(\"svg\") && container.tagName !== \"foreignObject\";\nconst isMathMLContainer = (container) => container.namespaceURI.includes(\"MathML\");\nconst getContainerType = (container) => {\n  if (container.nodeType !== 1) return void 0;\n  if (isSVGContainer(container)) return \"svg\";\n  if (isMathMLContainer(container)) return \"mathml\";\n  return void 0;\n};\nconst isComment = (node) => node.nodeType === 8;\nfunction createHydrationFunctions(rendererInternals) {\n  const {\n    mt: mountComponent,\n    p: patch,\n    o: {\n      patchProp,\n      createText,\n      nextSibling,\n      parentNode,\n      remove,\n      insert,\n      createComment\n    }\n  } = rendererInternals;\n  const hydrate = (vnode, container) => {\n    if (!container.hasChildNodes()) {\n      (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n        `Attempting to hydrate existing markup but container is empty. Performing full mount instead.`\n      );\n      patch(null, vnode, container);\n      flushPostFlushCbs();\n      container._vnode = vnode;\n      return;\n    }\n    hydrateNode(container.firstChild, vnode, null, null, null);\n    flushPostFlushCbs();\n    container._vnode = vnode;\n  };\n  const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {\n    optimized = optimized || !!vnode.dynamicChildren;\n    const isFragmentStart = isComment(node) && node.data === \"[\";\n    const onMismatch = () => handleMismatch(\n      node,\n      vnode,\n      parentComponent,\n      parentSuspense,\n      slotScopeIds,\n      isFragmentStart\n    );\n    const { type, ref, shapeFlag, patchFlag } = vnode;\n    let domType = node.nodeType;\n    vnode.el = node;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      def(node, \"__vnode\", vnode, true);\n      def(node, \"__vueParentComponent\", parentComponent, true);\n    }\n    if (patchFlag === -2) {\n      optimized = false;\n      vnode.dynamicChildren = null;\n    }\n    let nextNode = null;\n    switch (type) {\n      case Text:\n        if (domType !== 3) {\n          if (vnode.children === \"\") {\n            insert(vnode.el = createText(\"\"), parentNode(node), node);\n            nextNode = node;\n          } else {\n            nextNode = onMismatch();\n          }\n        } else {\n          if (node.data !== vnode.children) {\n            (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n              `Hydration text mismatch in`,\n              node.parentNode,\n              `\n  - rendered on server: ${JSON.stringify(\n                node.data\n              )}\n  - expected on client: ${JSON.stringify(vnode.children)}`\n            );\n            logMismatchError();\n            node.data = vnode.children;\n          }\n          nextNode = nextSibling(node);\n        }\n        break;\n      case Comment:\n        if (isTemplateNode(node)) {\n          nextNode = nextSibling(node);\n          replaceNode(\n            vnode.el = node.content.firstChild,\n            node,\n            parentComponent\n          );\n        } else if (domType !== 8 || isFragmentStart) {\n          nextNode = onMismatch();\n        } else {\n          nextNode = nextSibling(node);\n        }\n        break;\n      case Static:\n        if (isFragmentStart) {\n          node = nextSibling(node);\n          domType = node.nodeType;\n        }\n        if (domType === 1 || domType === 3) {\n          nextNode = node;\n          const needToAdoptContent = !vnode.children.length;\n          for (let i = 0; i < vnode.staticCount; i++) {\n            if (needToAdoptContent)\n              vnode.children += nextNode.nodeType === 1 ? nextNode.outerHTML : nextNode.data;\n            if (i === vnode.staticCount - 1) {\n              vnode.anchor = nextNode;\n            }\n            nextNode = nextSibling(nextNode);\n          }\n          return isFragmentStart ? nextSibling(nextNode) : nextNode;\n        } else {\n          onMismatch();\n        }\n        break;\n      case Fragment:\n        if (!isFragmentStart) {\n          nextNode = onMismatch();\n        } else {\n          nextNode = hydrateFragment(\n            node,\n            vnode,\n            parentComponent,\n            parentSuspense,\n            slotScopeIds,\n            optimized\n          );\n        }\n        break;\n      default:\n        if (shapeFlag & 1) {\n          if ((domType !== 1 || vnode.type.toLowerCase() !== node.tagName.toLowerCase()) && !isTemplateNode(node)) {\n            nextNode = onMismatch();\n          } else {\n            nextNode = hydrateElement(\n              node,\n              vnode,\n              parentComponent,\n              parentSuspense,\n              slotScopeIds,\n              optimized\n            );\n          }\n        } else if (shapeFlag & 6) {\n          vnode.slotScopeIds = slotScopeIds;\n          const container = parentNode(node);\n          if (isFragmentStart) {\n            nextNode = locateClosingAnchor(node);\n          } else if (isComment(node) && node.data === \"teleport start\") {\n            nextNode = locateClosingAnchor(node, node.data, \"teleport end\");\n          } else {\n            nextNode = nextSibling(node);\n          }\n          mountComponent(\n            vnode,\n            container,\n            null,\n            parentComponent,\n            parentSuspense,\n            getContainerType(container),\n            optimized\n          );\n          if (isAsyncWrapper(vnode) && !vnode.type.__asyncResolved) {\n            let subTree;\n            if (isFragmentStart) {\n              subTree = createVNode(Fragment);\n              subTree.anchor = nextNode ? nextNode.previousSibling : container.lastChild;\n            } else {\n              subTree = node.nodeType === 3 ? createTextVNode(\"\") : createVNode(\"div\");\n            }\n            subTree.el = node;\n            vnode.component.subTree = subTree;\n          }\n        } else if (shapeFlag & 64) {\n          if (domType !== 8) {\n            nextNode = onMismatch();\n          } else {\n            nextNode = vnode.type.hydrate(\n              node,\n              vnode,\n              parentComponent,\n              parentSuspense,\n              slotScopeIds,\n              optimized,\n              rendererInternals,\n              hydrateChildren\n            );\n          }\n        } else if (shapeFlag & 128) {\n          nextNode = vnode.type.hydrate(\n            node,\n            vnode,\n            parentComponent,\n            parentSuspense,\n            getContainerType(parentNode(node)),\n            slotScopeIds,\n            optimized,\n            rendererInternals,\n            hydrateNode\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) {\n          warn$1(\"Invalid HostVNode type:\", type, `(${typeof type})`);\n        }\n    }\n    if (ref != null) {\n      setRef(ref, null, parentSuspense, vnode);\n    }\n    return nextNode;\n  };\n  const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    optimized = optimized || !!vnode.dynamicChildren;\n    const { type, props, patchFlag, shapeFlag, dirs, transition } = vnode;\n    const forcePatch = type === \"input\" || type === \"option\";\n    if (!!(process.env.NODE_ENV !== \"production\") || forcePatch || patchFlag !== -1) {\n      if (dirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"created\");\n      }\n      let needCallTransitionHooks = false;\n      if (isTemplateNode(el)) {\n        needCallTransitionHooks = needTransition(\n          null,\n          // no need check parentSuspense in hydration\n          transition\n        ) && parentComponent && parentComponent.vnode.props && parentComponent.vnode.props.appear;\n        const content = el.content.firstChild;\n        if (needCallTransitionHooks) {\n          transition.beforeEnter(content);\n        }\n        replaceNode(content, el, parentComponent);\n        vnode.el = el = content;\n      }\n      if (shapeFlag & 16 && // skip if element has innerHTML / textContent\n      !(props && (props.innerHTML || props.textContent))) {\n        let next = hydrateChildren(\n          el.firstChild,\n          vnode,\n          el,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n        let hasWarned = false;\n        while (next) {\n          if (!isMismatchAllowed(el, 1 /* CHILDREN */)) {\n            if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && !hasWarned) {\n              warn$1(\n                `Hydration children mismatch on`,\n                el,\n                `\nServer rendered element contains more child nodes than client vdom.`\n              );\n              hasWarned = true;\n            }\n            logMismatchError();\n          }\n          const cur = next;\n          next = next.nextSibling;\n          remove(cur);\n        }\n      } else if (shapeFlag & 8) {\n        let clientText = vnode.children;\n        if (clientText[0] === \"\\n\" && (el.tagName === \"PRE\" || el.tagName === \"TEXTAREA\")) {\n          clientText = clientText.slice(1);\n        }\n        if (el.textContent !== clientText) {\n          if (!isMismatchAllowed(el, 0 /* TEXT */)) {\n            (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n              `Hydration text content mismatch on`,\n              el,\n              `\n  - rendered on server: ${el.textContent}\n  - expected on client: ${vnode.children}`\n            );\n            logMismatchError();\n          }\n          el.textContent = vnode.children;\n        }\n      }\n      if (props) {\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__ || forcePatch || !optimized || patchFlag & (16 | 32)) {\n          const isCustomElement = el.tagName.includes(\"-\");\n          for (const key in props) {\n            if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && // #11189 skip if this node has directives that have created hooks\n            // as it could have mutated the DOM in any possible way\n            !(dirs && dirs.some((d) => d.dir.created)) && propHasMismatch(el, key, props[key], vnode, parentComponent)) {\n              logMismatchError();\n            }\n            if (forcePatch && (key.endsWith(\"value\") || key === \"indeterminate\") || isOn(key) && !isReservedProp(key) || // force hydrate v-bind with .prop modifiers\n            key[0] === \".\" || isCustomElement) {\n              patchProp(el, key, null, props[key], void 0, parentComponent);\n            }\n          }\n        } else if (props.onClick) {\n          patchProp(\n            el,\n            \"onClick\",\n            null,\n            props.onClick,\n            void 0,\n            parentComponent\n          );\n        } else if (patchFlag & 4 && isReactive(props.style)) {\n          for (const key in props.style) props.style[key];\n        }\n      }\n      let vnodeHooks;\n      if (vnodeHooks = props && props.onVnodeBeforeMount) {\n        invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n      }\n      if (dirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"beforeMount\");\n      }\n      if ((vnodeHooks = props && props.onVnodeMounted) || dirs || needCallTransitionHooks) {\n        queueEffectWithSuspense(() => {\n          vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);\n          needCallTransitionHooks && transition.enter(el);\n          dirs && invokeDirectiveHook(vnode, null, parentComponent, \"mounted\");\n        }, parentSuspense);\n      }\n    }\n    return el.nextSibling;\n  };\n  const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    optimized = optimized || !!parentVNode.dynamicChildren;\n    const children = parentVNode.children;\n    const l = children.length;\n    let hasWarned = false;\n    for (let i = 0; i < l; i++) {\n      const vnode = optimized ? children[i] : children[i] = normalizeVNode(children[i]);\n      const isText = vnode.type === Text;\n      if (node) {\n        if (isText && !optimized) {\n          if (i + 1 < l && normalizeVNode(children[i + 1]).type === Text) {\n            insert(\n              createText(\n                node.data.slice(vnode.children.length)\n              ),\n              container,\n              nextSibling(node)\n            );\n            node.data = vnode.children;\n          }\n        }\n        node = hydrateNode(\n          node,\n          vnode,\n          parentComponent,\n          parentSuspense,\n          slotScopeIds,\n          optimized\n        );\n      } else if (isText && !vnode.children) {\n        insert(vnode.el = createText(\"\"), container);\n      } else {\n        if (!isMismatchAllowed(container, 1 /* CHILDREN */)) {\n          if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && !hasWarned) {\n            warn$1(\n              `Hydration children mismatch on`,\n              container,\n              `\nServer rendered element contains fewer child nodes than client vdom.`\n            );\n            hasWarned = true;\n          }\n          logMismatchError();\n        }\n        patch(\n          null,\n          vnode,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          getContainerType(container),\n          slotScopeIds\n        );\n      }\n    }\n    return node;\n  };\n  const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\n    const { slotScopeIds: fragmentSlotScopeIds } = vnode;\n    if (fragmentSlotScopeIds) {\n      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;\n    }\n    const container = parentNode(node);\n    const next = hydrateChildren(\n      nextSibling(node),\n      vnode,\n      container,\n      parentComponent,\n      parentSuspense,\n      slotScopeIds,\n      optimized\n    );\n    if (next && isComment(next) && next.data === \"]\") {\n      return nextSibling(vnode.anchor = next);\n    } else {\n      logMismatchError();\n      insert(vnode.anchor = createComment(`]`), container, next);\n      return next;\n    }\n  };\n  const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {\n    if (!isMismatchAllowed(node.parentElement, 1 /* CHILDREN */)) {\n      (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_HYDRATION_MISMATCH_DETAILS__) && warn$1(\n        `Hydration node mismatch:\n- rendered on server:`,\n        node,\n        node.nodeType === 3 ? `(text)` : isComment(node) && node.data === \"[\" ? `(start of fragment)` : ``,\n        `\n- expected on client:`,\n        vnode.type\n      );\n      logMismatchError();\n    }\n    vnode.el = null;\n    if (isFragment) {\n      const end = locateClosingAnchor(node);\n      while (true) {\n        const next2 = nextSibling(node);\n        if (next2 && next2 !== end) {\n          remove(next2);\n        } else {\n          break;\n        }\n      }\n    }\n    const next = nextSibling(node);\n    const container = parentNode(node);\n    remove(node);\n    patch(\n      null,\n      vnode,\n      container,\n      next,\n      parentComponent,\n      parentSuspense,\n      getContainerType(container),\n      slotScopeIds\n    );\n    if (parentComponent) {\n      parentComponent.vnode.el = vnode.el;\n      updateHOCHostEl(parentComponent, vnode.el);\n    }\n    return next;\n  };\n  const locateClosingAnchor = (node, open = \"[\", close = \"]\") => {\n    let match = 0;\n    while (node) {\n      node = nextSibling(node);\n      if (node && isComment(node)) {\n        if (node.data === open) match++;\n        if (node.data === close) {\n          if (match === 0) {\n            return nextSibling(node);\n          } else {\n            match--;\n          }\n        }\n      }\n    }\n    return node;\n  };\n  const replaceNode = (newNode, oldNode, parentComponent) => {\n    const parentNode2 = oldNode.parentNode;\n    if (parentNode2) {\n      parentNode2.replaceChild(newNode, oldNode);\n    }\n    let parent = parentComponent;\n    while (parent) {\n      if (parent.vnode.el === oldNode) {\n        parent.vnode.el = parent.subTree.el = newNode;\n      }\n      parent = parent.parent;\n    }\n  };\n  const isTemplateNode = (node) => {\n    return node.nodeType === 1 && node.tagName === \"TEMPLATE\";\n  };\n  return [hydrate, hydrateNode];\n}\nfunction propHasMismatch(el, key, clientValue, vnode, instance) {\n  let mismatchType;\n  let mismatchKey;\n  let actual;\n  let expected;\n  if (key === \"class\") {\n    actual = el.getAttribute(\"class\");\n    expected = normalizeClass(clientValue);\n    if (!isSetEqual(toClassSet(actual || \"\"), toClassSet(expected))) {\n      mismatchType = 2 /* CLASS */;\n      mismatchKey = `class`;\n    }\n  } else if (key === \"style\") {\n    actual = el.getAttribute(\"style\") || \"\";\n    expected = isString(clientValue) ? clientValue : stringifyStyle(normalizeStyle(clientValue));\n    const actualMap = toStyleMap(actual);\n    const expectedMap = toStyleMap(expected);\n    if (vnode.dirs) {\n      for (const { dir, value } of vnode.dirs) {\n        if (dir.name === \"show\" && !value) {\n          expectedMap.set(\"display\", \"none\");\n        }\n      }\n    }\n    if (instance) {\n      resolveCssVars(instance, vnode, expectedMap);\n    }\n    if (!isMapEqual(actualMap, expectedMap)) {\n      mismatchType = 3 /* STYLE */;\n      mismatchKey = \"style\";\n    }\n  } else if (el instanceof SVGElement && isKnownSvgAttr(key) || el instanceof HTMLElement && (isBooleanAttr(key) || isKnownHtmlAttr(key))) {\n    if (isBooleanAttr(key)) {\n      actual = el.hasAttribute(key);\n      expected = includeBooleanAttr(clientValue);\n    } else if (clientValue == null) {\n      actual = el.hasAttribute(key);\n      expected = false;\n    } else {\n      if (el.hasAttribute(key)) {\n        actual = el.getAttribute(key);\n      } else if (key === \"value\" && el.tagName === \"TEXTAREA\") {\n        actual = el.value;\n      } else {\n        actual = false;\n      }\n      expected = isRenderableAttrValue(clientValue) ? String(clientValue) : false;\n    }\n    if (actual !== expected) {\n      mismatchType = 4 /* ATTRIBUTE */;\n      mismatchKey = key;\n    }\n  }\n  if (mismatchType != null && !isMismatchAllowed(el, mismatchType)) {\n    const format = (v) => v === false ? `(not rendered)` : `${mismatchKey}=\"${v}\"`;\n    const preSegment = `Hydration ${MismatchTypeString[mismatchType]} mismatch on`;\n    const postSegment = `\n  - rendered on server: ${format(actual)}\n  - expected on client: ${format(expected)}\n  Note: this mismatch is check-only. The DOM will not be rectified in production due to performance overhead.\n  You should fix the source of the mismatch.`;\n    {\n      warn$1(preSegment, el, postSegment);\n    }\n    return true;\n  }\n  return false;\n}\nfunction toClassSet(str) {\n  return new Set(str.trim().split(/\\s+/));\n}\nfunction isSetEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const s of a) {\n    if (!b.has(s)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction toStyleMap(str) {\n  const styleMap = /* @__PURE__ */ new Map();\n  for (const item of str.split(\";\")) {\n    let [key, value] = item.split(\":\");\n    key = key.trim();\n    value = value && value.trim();\n    if (key && value) {\n      styleMap.set(key, value);\n    }\n  }\n  return styleMap;\n}\nfunction isMapEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n  for (const [key, value] of a) {\n    if (value !== b.get(key)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction resolveCssVars(instance, vnode, expectedMap) {\n  const root = instance.subTree;\n  if (instance.getCssVars && (vnode === root || root && root.type === Fragment && root.children.includes(vnode))) {\n    const cssVars = instance.getCssVars();\n    for (const key in cssVars) {\n      expectedMap.set(\n        `--${getEscapedCssVarName(key, false)}`,\n        String(cssVars[key])\n      );\n    }\n  }\n  if (vnode === root && instance.parent) {\n    resolveCssVars(instance.parent, instance.vnode, expectedMap);\n  }\n}\nconst allowMismatchAttr = \"data-allow-mismatch\";\nconst MismatchTypeString = {\n  [0 /* TEXT */]: \"text\",\n  [1 /* CHILDREN */]: \"children\",\n  [2 /* CLASS */]: \"class\",\n  [3 /* STYLE */]: \"style\",\n  [4 /* ATTRIBUTE */]: \"attribute\"\n};\nfunction isMismatchAllowed(el, allowedType) {\n  if (allowedType === 0 /* TEXT */ || allowedType === 1 /* CHILDREN */) {\n    while (el && !el.hasAttribute(allowMismatchAttr)) {\n      el = el.parentElement;\n    }\n  }\n  const allowedAttr = el && el.getAttribute(allowMismatchAttr);\n  if (allowedAttr == null) {\n    return false;\n  } else if (allowedAttr === \"\") {\n    return true;\n  } else {\n    const list = allowedAttr.split(\",\");\n    if (allowedType === 0 /* TEXT */ && list.includes(\"children\")) {\n      return true;\n    }\n    return allowedAttr.split(\",\").includes(MismatchTypeString[allowedType]);\n  }\n}\n\nconst requestIdleCallback = getGlobalThis().requestIdleCallback || ((cb) => setTimeout(cb, 1));\nconst cancelIdleCallback = getGlobalThis().cancelIdleCallback || ((id) => clearTimeout(id));\nconst hydrateOnIdle = (timeout = 1e4) => (hydrate) => {\n  const id = requestIdleCallback(hydrate, { timeout });\n  return () => cancelIdleCallback(id);\n};\nfunction elementIsVisibleInViewport(el) {\n  const { top, left, bottom, right } = el.getBoundingClientRect();\n  const { innerHeight, innerWidth } = window;\n  return (top > 0 && top < innerHeight || bottom > 0 && bottom < innerHeight) && (left > 0 && left < innerWidth || right > 0 && right < innerWidth);\n}\nconst hydrateOnVisible = (opts) => (hydrate, forEach) => {\n  const ob = new IntersectionObserver((entries) => {\n    for (const e of entries) {\n      if (!e.isIntersecting) continue;\n      ob.disconnect();\n      hydrate();\n      break;\n    }\n  }, opts);\n  forEach((el) => {\n    if (!(el instanceof Element)) return;\n    if (elementIsVisibleInViewport(el)) {\n      hydrate();\n      ob.disconnect();\n      return false;\n    }\n    ob.observe(el);\n  });\n  return () => ob.disconnect();\n};\nconst hydrateOnMediaQuery = (query) => (hydrate) => {\n  if (query) {\n    const mql = matchMedia(query);\n    if (mql.matches) {\n      hydrate();\n    } else {\n      mql.addEventListener(\"change\", hydrate, { once: true });\n      return () => mql.removeEventListener(\"change\", hydrate);\n    }\n  }\n};\nconst hydrateOnInteraction = (interactions = []) => (hydrate, forEach) => {\n  if (isString(interactions)) interactions = [interactions];\n  let hasHydrated = false;\n  const doHydrate = (e) => {\n    if (!hasHydrated) {\n      hasHydrated = true;\n      teardown();\n      hydrate();\n      e.target.dispatchEvent(new e.constructor(e.type, e));\n    }\n  };\n  const teardown = () => {\n    forEach((el) => {\n      for (const i of interactions) {\n        el.removeEventListener(i, doHydrate);\n      }\n    });\n  };\n  forEach((el) => {\n    for (const i of interactions) {\n      el.addEventListener(i, doHydrate, { once: true });\n    }\n  });\n  return teardown;\n};\nfunction forEachElement(node, cb) {\n  if (isComment(node) && node.data === \"[\") {\n    let depth = 1;\n    let next = node.nextSibling;\n    while (next) {\n      if (next.nodeType === 1) {\n        const result = cb(next);\n        if (result === false) {\n          break;\n        }\n      } else if (isComment(next)) {\n        if (next.data === \"]\") {\n          if (--depth === 0) break;\n        } else if (next.data === \"[\") {\n          depth++;\n        }\n      }\n      next = next.nextSibling;\n    }\n  } else {\n    cb(node);\n  }\n}\n\nconst isAsyncWrapper = (i) => !!i.type.__asyncLoader;\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineAsyncComponent(source) {\n  if (isFunction(source)) {\n    source = { loader: source };\n  }\n  const {\n    loader,\n    loadingComponent,\n    errorComponent,\n    delay = 200,\n    hydrate: hydrateStrategy,\n    timeout,\n    // undefined = never times out\n    suspensible = true,\n    onError: userOnError\n  } = source;\n  let pendingRequest = null;\n  let resolvedComp;\n  let retries = 0;\n  const retry = () => {\n    retries++;\n    pendingRequest = null;\n    return load();\n  };\n  const load = () => {\n    let thisRequest;\n    return pendingRequest || (thisRequest = pendingRequest = loader().catch((err) => {\n      err = err instanceof Error ? err : new Error(String(err));\n      if (userOnError) {\n        return new Promise((resolve, reject) => {\n          const userRetry = () => resolve(retry());\n          const userFail = () => reject(err);\n          userOnError(err, userRetry, userFail, retries + 1);\n        });\n      } else {\n        throw err;\n      }\n    }).then((comp) => {\n      if (thisRequest !== pendingRequest && pendingRequest) {\n        return pendingRequest;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && !comp) {\n        warn$1(\n          `Async component loader resolved to undefined. If you are using retry(), make sure to return its return value.`\n        );\n      }\n      if (comp && (comp.__esModule || comp[Symbol.toStringTag] === \"Module\")) {\n        comp = comp.default;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && comp && !isObject(comp) && !isFunction(comp)) {\n        throw new Error(`Invalid async component load result: ${comp}`);\n      }\n      resolvedComp = comp;\n      return comp;\n    }));\n  };\n  return defineComponent({\n    name: \"AsyncComponentWrapper\",\n    __asyncLoader: load,\n    __asyncHydrate(el, instance, hydrate) {\n      const doHydrate = hydrateStrategy ? () => {\n        const teardown = hydrateStrategy(\n          hydrate,\n          (cb) => forEachElement(el, cb)\n        );\n        if (teardown) {\n          (instance.bum || (instance.bum = [])).push(teardown);\n        }\n      } : hydrate;\n      if (resolvedComp) {\n        doHydrate();\n      } else {\n        load().then(() => !instance.isUnmounted && doHydrate());\n      }\n    },\n    get __asyncResolved() {\n      return resolvedComp;\n    },\n    setup() {\n      const instance = currentInstance;\n      markAsyncBoundary(instance);\n      if (resolvedComp) {\n        return () => createInnerComp(resolvedComp, instance);\n      }\n      const onError = (err) => {\n        pendingRequest = null;\n        handleError(\n          err,\n          instance,\n          13,\n          !errorComponent\n        );\n      };\n      if (suspensible && instance.suspense || isInSSRComponentSetup) {\n        return load().then((comp) => {\n          return () => createInnerComp(comp, instance);\n        }).catch((err) => {\n          onError(err);\n          return () => errorComponent ? createVNode(errorComponent, {\n            error: err\n          }) : null;\n        });\n      }\n      const loaded = ref(false);\n      const error = ref();\n      const delayed = ref(!!delay);\n      if (delay) {\n        setTimeout(() => {\n          delayed.value = false;\n        }, delay);\n      }\n      if (timeout != null) {\n        setTimeout(() => {\n          if (!loaded.value && !error.value) {\n            const err = new Error(\n              `Async component timed out after ${timeout}ms.`\n            );\n            onError(err);\n            error.value = err;\n          }\n        }, timeout);\n      }\n      load().then(() => {\n        loaded.value = true;\n        if (instance.parent && isKeepAlive(instance.parent.vnode)) {\n          instance.parent.update();\n        }\n      }).catch((err) => {\n        onError(err);\n        error.value = err;\n      });\n      return () => {\n        if (loaded.value && resolvedComp) {\n          return createInnerComp(resolvedComp, instance);\n        } else if (error.value && errorComponent) {\n          return createVNode(errorComponent, {\n            error: error.value\n          });\n        } else if (loadingComponent && !delayed.value) {\n          return createVNode(loadingComponent);\n        }\n      };\n    }\n  });\n}\nfunction createInnerComp(comp, parent) {\n  const { ref: ref2, props, children, ce } = parent.vnode;\n  const vnode = createVNode(comp, props, children);\n  vnode.ref = ref2;\n  vnode.ce = ce;\n  delete parent.vnode.ce;\n  return vnode;\n}\n\nconst isKeepAlive = (vnode) => vnode.type.__isKeepAlive;\nconst KeepAliveImpl = {\n  name: `KeepAlive`,\n  // Marker for special handling inside the renderer. We are not using a ===\n  // check directly on KeepAlive in the renderer, because importing it directly\n  // would prevent it from being tree-shaken.\n  __isKeepAlive: true,\n  props: {\n    include: [String, RegExp, Array],\n    exclude: [String, RegExp, Array],\n    max: [String, Number]\n  },\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const sharedContext = instance.ctx;\n    if (!sharedContext.renderer) {\n      return () => {\n        const children = slots.default && slots.default();\n        return children && children.length === 1 ? children[0] : children;\n      };\n    }\n    const cache = /* @__PURE__ */ new Map();\n    const keys = /* @__PURE__ */ new Set();\n    let current = null;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      instance.__v_cache = cache;\n    }\n    const parentSuspense = instance.suspense;\n    const {\n      renderer: {\n        p: patch,\n        m: move,\n        um: _unmount,\n        o: { createElement }\n      }\n    } = sharedContext;\n    const storageContainer = createElement(\"div\");\n    sharedContext.activate = (vnode, container, anchor, namespace, optimized) => {\n      const instance2 = vnode.component;\n      move(vnode, container, anchor, 0, parentSuspense);\n      patch(\n        instance2.vnode,\n        vnode,\n        container,\n        anchor,\n        instance2,\n        parentSuspense,\n        namespace,\n        vnode.slotScopeIds,\n        optimized\n      );\n      queuePostRenderEffect(() => {\n        instance2.isDeactivated = false;\n        if (instance2.a) {\n          invokeArrayFns(instance2.a);\n        }\n        const vnodeHook = vnode.props && vnode.props.onVnodeMounted;\n        if (vnodeHook) {\n          invokeVNodeHook(vnodeHook, instance2.parent, vnode);\n        }\n      }, parentSuspense);\n      if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentAdded(instance2);\n      }\n    };\n    sharedContext.deactivate = (vnode) => {\n      const instance2 = vnode.component;\n      invalidateMount(instance2.m);\n      invalidateMount(instance2.a);\n      move(vnode, storageContainer, null, 1, parentSuspense);\n      queuePostRenderEffect(() => {\n        if (instance2.da) {\n          invokeArrayFns(instance2.da);\n        }\n        const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;\n        if (vnodeHook) {\n          invokeVNodeHook(vnodeHook, instance2.parent, vnode);\n        }\n        instance2.isDeactivated = true;\n      }, parentSuspense);\n      if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n        devtoolsComponentAdded(instance2);\n      }\n    };\n    function unmount(vnode) {\n      resetShapeFlag(vnode);\n      _unmount(vnode, instance, parentSuspense, true);\n    }\n    function pruneCache(filter) {\n      cache.forEach((vnode, key) => {\n        const name = getComponentName(vnode.type);\n        if (name && !filter(name)) {\n          pruneCacheEntry(key);\n        }\n      });\n    }\n    function pruneCacheEntry(key) {\n      const cached = cache.get(key);\n      if (cached && (!current || !isSameVNodeType(cached, current))) {\n        unmount(cached);\n      } else if (current) {\n        resetShapeFlag(current);\n      }\n      cache.delete(key);\n      keys.delete(key);\n    }\n    watch(\n      () => [props.include, props.exclude],\n      ([include, exclude]) => {\n        include && pruneCache((name) => matches(include, name));\n        exclude && pruneCache((name) => !matches(exclude, name));\n      },\n      // prune post-render after `current` has been updated\n      { flush: \"post\", deep: true }\n    );\n    let pendingCacheKey = null;\n    const cacheSubtree = () => {\n      if (pendingCacheKey != null) {\n        if (isSuspense(instance.subTree.type)) {\n          queuePostRenderEffect(() => {\n            cache.set(pendingCacheKey, getInnerChild(instance.subTree));\n          }, instance.subTree.suspense);\n        } else {\n          cache.set(pendingCacheKey, getInnerChild(instance.subTree));\n        }\n      }\n    };\n    onMounted(cacheSubtree);\n    onUpdated(cacheSubtree);\n    onBeforeUnmount(() => {\n      cache.forEach((cached) => {\n        const { subTree, suspense } = instance;\n        const vnode = getInnerChild(subTree);\n        if (cached.type === vnode.type && cached.key === vnode.key) {\n          resetShapeFlag(vnode);\n          const da = vnode.component.da;\n          da && queuePostRenderEffect(da, suspense);\n          return;\n        }\n        unmount(cached);\n      });\n    });\n    return () => {\n      pendingCacheKey = null;\n      if (!slots.default) {\n        return current = null;\n      }\n      const children = slots.default();\n      const rawVNode = children[0];\n      if (children.length > 1) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(`KeepAlive should contain exactly one component child.`);\n        }\n        current = null;\n        return children;\n      } else if (!isVNode(rawVNode) || !(rawVNode.shapeFlag & 4) && !(rawVNode.shapeFlag & 128)) {\n        current = null;\n        return rawVNode;\n      }\n      let vnode = getInnerChild(rawVNode);\n      if (vnode.type === Comment) {\n        current = null;\n        return vnode;\n      }\n      const comp = vnode.type;\n      const name = getComponentName(\n        isAsyncWrapper(vnode) ? vnode.type.__asyncResolved || {} : comp\n      );\n      const { include, exclude, max } = props;\n      if (include && (!name || !matches(include, name)) || exclude && name && matches(exclude, name)) {\n        vnode.shapeFlag &= ~256;\n        current = vnode;\n        return rawVNode;\n      }\n      const key = vnode.key == null ? comp : vnode.key;\n      const cachedVNode = cache.get(key);\n      if (vnode.el) {\n        vnode = cloneVNode(vnode);\n        if (rawVNode.shapeFlag & 128) {\n          rawVNode.ssContent = vnode;\n        }\n      }\n      pendingCacheKey = key;\n      if (cachedVNode) {\n        vnode.el = cachedVNode.el;\n        vnode.component = cachedVNode.component;\n        if (vnode.transition) {\n          setTransitionHooks(vnode, vnode.transition);\n        }\n        vnode.shapeFlag |= 512;\n        keys.delete(key);\n        keys.add(key);\n      } else {\n        keys.add(key);\n        if (max && keys.size > parseInt(max, 10)) {\n          pruneCacheEntry(keys.values().next().value);\n        }\n      }\n      vnode.shapeFlag |= 256;\n      current = vnode;\n      return isSuspense(rawVNode.type) ? rawVNode : vnode;\n    };\n  }\n};\nconst KeepAlive = KeepAliveImpl;\nfunction matches(pattern, name) {\n  if (isArray(pattern)) {\n    return pattern.some((p) => matches(p, name));\n  } else if (isString(pattern)) {\n    return pattern.split(\",\").includes(name);\n  } else if (isRegExp(pattern)) {\n    pattern.lastIndex = 0;\n    return pattern.test(name);\n  }\n  return false;\n}\nfunction onActivated(hook, target) {\n  registerKeepAliveHook(hook, \"a\", target);\n}\nfunction onDeactivated(hook, target) {\n  registerKeepAliveHook(hook, \"da\", target);\n}\nfunction registerKeepAliveHook(hook, type, target = currentInstance) {\n  const wrappedHook = hook.__wdc || (hook.__wdc = () => {\n    let current = target;\n    while (current) {\n      if (current.isDeactivated) {\n        return;\n      }\n      current = current.parent;\n    }\n    return hook();\n  });\n  injectHook(type, wrappedHook, target);\n  if (target) {\n    let current = target.parent;\n    while (current && current.parent) {\n      if (isKeepAlive(current.parent.vnode)) {\n        injectToKeepAliveRoot(wrappedHook, type, target, current);\n      }\n      current = current.parent;\n    }\n  }\n}\nfunction injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {\n  const injected = injectHook(\n    type,\n    hook,\n    keepAliveRoot,\n    true\n    /* prepend */\n  );\n  onUnmounted(() => {\n    remove(keepAliveRoot[type], injected);\n  }, target);\n}\nfunction resetShapeFlag(vnode) {\n  vnode.shapeFlag &= ~256;\n  vnode.shapeFlag &= ~512;\n}\nfunction getInnerChild(vnode) {\n  return vnode.shapeFlag & 128 ? vnode.ssContent : vnode;\n}\n\nfunction injectHook(type, hook, target = currentInstance, prepend = false) {\n  if (target) {\n    const hooks = target[type] || (target[type] = []);\n    const wrappedHook = hook.__weh || (hook.__weh = (...args) => {\n      pauseTracking();\n      const reset = setCurrentInstance(target);\n      const res = callWithAsyncErrorHandling(hook, target, type, args);\n      reset();\n      resetTracking();\n      return res;\n    });\n    if (prepend) {\n      hooks.unshift(wrappedHook);\n    } else {\n      hooks.push(wrappedHook);\n    }\n    return wrappedHook;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    const apiName = toHandlerKey(ErrorTypeStrings$1[type].replace(/ hook$/, \"\"));\n    warn$1(\n      `${apiName} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup().` + (` If you are using async setup(), make sure to register lifecycle hooks before the first await statement.` )\n    );\n  }\n}\nconst createHook = (lifecycle) => (hook, target = currentInstance) => {\n  if (!isInSSRComponentSetup || lifecycle === \"sp\") {\n    injectHook(lifecycle, (...args) => hook(...args), target);\n  }\n};\nconst onBeforeMount = createHook(\"bm\");\nconst onMounted = createHook(\"m\");\nconst onBeforeUpdate = createHook(\n  \"bu\"\n);\nconst onUpdated = createHook(\"u\");\nconst onBeforeUnmount = createHook(\n  \"bum\"\n);\nconst onUnmounted = createHook(\"um\");\nconst onServerPrefetch = createHook(\n  \"sp\"\n);\nconst onRenderTriggered = createHook(\"rtg\");\nconst onRenderTracked = createHook(\"rtc\");\nfunction onErrorCaptured(hook, target = currentInstance) {\n  injectHook(\"ec\", hook, target);\n}\n\nconst COMPONENTS = \"components\";\nconst DIRECTIVES = \"directives\";\nfunction resolveComponent(name, maybeSelfReference) {\n  return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;\n}\nconst NULL_DYNAMIC_COMPONENT = Symbol.for(\"v-ndc\");\nfunction resolveDynamicComponent(component) {\n  if (isString(component)) {\n    return resolveAsset(COMPONENTS, component, false) || component;\n  } else {\n    return component || NULL_DYNAMIC_COMPONENT;\n  }\n}\nfunction resolveDirective(name) {\n  return resolveAsset(DIRECTIVES, name);\n}\nfunction resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {\n  const instance = currentRenderingInstance || currentInstance;\n  if (instance) {\n    const Component = instance.type;\n    if (type === COMPONENTS) {\n      const selfName = getComponentName(\n        Component,\n        false\n      );\n      if (selfName && (selfName === name || selfName === camelize(name) || selfName === capitalize(camelize(name)))) {\n        return Component;\n      }\n    }\n    const res = (\n      // local registration\n      // check instance[type] first which is resolved for options API\n      resolve(instance[type] || Component[type], name) || // global registration\n      resolve(instance.appContext[type], name)\n    );\n    if (!res && maybeSelfReference) {\n      return Component;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") && warnMissing && !res) {\n      const extra = type === COMPONENTS ? `\nIf this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.` : ``;\n      warn$1(`Failed to resolve ${type.slice(0, -1)}: ${name}${extra}`);\n    }\n    return res;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(\n      `resolve${capitalize(type.slice(0, -1))} can only be used in render() or setup().`\n    );\n  }\n}\nfunction resolve(registry, name) {\n  return registry && (registry[name] || registry[camelize(name)] || registry[capitalize(camelize(name))]);\n}\n\nfunction renderList(source, renderItem, cache, index) {\n  let ret;\n  const cached = cache && cache[index];\n  const sourceIsArray = isArray(source);\n  if (sourceIsArray || isString(source)) {\n    const sourceIsReactiveArray = sourceIsArray && isReactive(source);\n    let needsWrap = false;\n    if (sourceIsReactiveArray) {\n      needsWrap = !isShallow(source);\n      source = shallowReadArray(source);\n    }\n    ret = new Array(source.length);\n    for (let i = 0, l = source.length; i < l; i++) {\n      ret[i] = renderItem(\n        needsWrap ? toReactive(source[i]) : source[i],\n        i,\n        void 0,\n        cached && cached[i]\n      );\n    }\n  } else if (typeof source === \"number\") {\n    if (!!(process.env.NODE_ENV !== \"production\") && !Number.isInteger(source)) {\n      warn$1(`The v-for range expect an integer value but got ${source}.`);\n    }\n    ret = new Array(source);\n    for (let i = 0; i < source; i++) {\n      ret[i] = renderItem(i + 1, i, void 0, cached && cached[i]);\n    }\n  } else if (isObject(source)) {\n    if (source[Symbol.iterator]) {\n      ret = Array.from(\n        source,\n        (item, i) => renderItem(item, i, void 0, cached && cached[i])\n      );\n    } else {\n      const keys = Object.keys(source);\n      ret = new Array(keys.length);\n      for (let i = 0, l = keys.length; i < l; i++) {\n        const key = keys[i];\n        ret[i] = renderItem(source[key], key, i, cached && cached[i]);\n      }\n    }\n  } else {\n    ret = [];\n  }\n  if (cache) {\n    cache[index] = ret;\n  }\n  return ret;\n}\n\nfunction createSlots(slots, dynamicSlots) {\n  for (let i = 0; i < dynamicSlots.length; i++) {\n    const slot = dynamicSlots[i];\n    if (isArray(slot)) {\n      for (let j = 0; j < slot.length; j++) {\n        slots[slot[j].name] = slot[j].fn;\n      }\n    } else if (slot) {\n      slots[slot.name] = slot.key ? (...args) => {\n        const res = slot.fn(...args);\n        if (res) res.key = slot.key;\n        return res;\n      } : slot.fn;\n    }\n  }\n  return slots;\n}\n\nfunction renderSlot(slots, name, props = {}, fallback, noSlotted) {\n  if (currentRenderingInstance.ce || currentRenderingInstance.parent && isAsyncWrapper(currentRenderingInstance.parent) && currentRenderingInstance.parent.ce) {\n    if (name !== \"default\") props.name = name;\n    return openBlock(), createBlock(\n      Fragment,\n      null,\n      [createVNode(\"slot\", props, fallback && fallback())],\n      64\n    );\n  }\n  let slot = slots[name];\n  if (!!(process.env.NODE_ENV !== \"production\") && slot && slot.length > 1) {\n    warn$1(\n      `SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template.`\n    );\n    slot = () => [];\n  }\n  if (slot && slot._c) {\n    slot._d = false;\n  }\n  openBlock();\n  const validSlotContent = slot && ensureValidVNode(slot(props));\n  const slotKey = props.key || // slot content array of a dynamic conditional slot may have a branch\n  // key attached in the `createSlots` helper, respect that\n  validSlotContent && validSlotContent.key;\n  const rendered = createBlock(\n    Fragment,\n    {\n      key: (slotKey && !isSymbol(slotKey) ? slotKey : `_${name}`) + // #7256 force differentiate fallback content from actual content\n      (!validSlotContent && fallback ? \"_fb\" : \"\")\n    },\n    validSlotContent || (fallback ? fallback() : []),\n    validSlotContent && slots._ === 1 ? 64 : -2\n  );\n  if (!noSlotted && rendered.scopeId) {\n    rendered.slotScopeIds = [rendered.scopeId + \"-s\"];\n  }\n  if (slot && slot._c) {\n    slot._d = true;\n  }\n  return rendered;\n}\nfunction ensureValidVNode(vnodes) {\n  return vnodes.some((child) => {\n    if (!isVNode(child)) return true;\n    if (child.type === Comment) return false;\n    if (child.type === Fragment && !ensureValidVNode(child.children))\n      return false;\n    return true;\n  }) ? vnodes : null;\n}\n\nfunction toHandlers(obj, preserveCaseIfNecessary) {\n  const ret = {};\n  if (!!(process.env.NODE_ENV !== \"production\") && !isObject(obj)) {\n    warn$1(`v-on with no argument expects an object value.`);\n    return ret;\n  }\n  for (const key in obj) {\n    ret[preserveCaseIfNecessary && /[A-Z]/.test(key) ? `on:${key}` : toHandlerKey(key)] = obj[key];\n  }\n  return ret;\n}\n\nconst getPublicInstance = (i) => {\n  if (!i) return null;\n  if (isStatefulComponent(i)) return getComponentPublicInstance(i);\n  return getPublicInstance(i.parent);\n};\nconst publicPropertiesMap = (\n  // Move PURE marker to new line to workaround compiler discarding it\n  // due to type annotation\n  /* @__PURE__ */ extend(/* @__PURE__ */ Object.create(null), {\n    $: (i) => i,\n    $el: (i) => i.vnode.el,\n    $data: (i) => i.data,\n    $props: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.props) : i.props,\n    $attrs: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.attrs) : i.attrs,\n    $slots: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.slots) : i.slots,\n    $refs: (i) => !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(i.refs) : i.refs,\n    $parent: (i) => getPublicInstance(i.parent),\n    $root: (i) => getPublicInstance(i.root),\n    $host: (i) => i.ce,\n    $emit: (i) => i.emit,\n    $options: (i) => __VUE_OPTIONS_API__ ? resolveMergedOptions(i) : i.type,\n    $forceUpdate: (i) => i.f || (i.f = () => {\n      queueJob(i.update);\n    }),\n    $nextTick: (i) => i.n || (i.n = nextTick.bind(i.proxy)),\n    $watch: (i) => __VUE_OPTIONS_API__ ? instanceWatch.bind(i) : NOOP\n  })\n);\nconst isReservedPrefix = (key) => key === \"_\" || key === \"$\";\nconst hasSetupBinding = (state, key) => state !== EMPTY_OBJ && !state.__isScriptSetup && hasOwn(state, key);\nconst PublicInstanceProxyHandlers = {\n  get({ _: instance }, key) {\n    if (key === \"__v_skip\") {\n      return true;\n    }\n    const { ctx, setupState, data, props, accessCache, type, appContext } = instance;\n    if (!!(process.env.NODE_ENV !== \"production\") && key === \"__isVue\") {\n      return true;\n    }\n    let normalizedProps;\n    if (key[0] !== \"$\") {\n      const n = accessCache[key];\n      if (n !== void 0) {\n        switch (n) {\n          case 1 /* SETUP */:\n            return setupState[key];\n          case 2 /* DATA */:\n            return data[key];\n          case 4 /* CONTEXT */:\n            return ctx[key];\n          case 3 /* PROPS */:\n            return props[key];\n        }\n      } else if (hasSetupBinding(setupState, key)) {\n        accessCache[key] = 1 /* SETUP */;\n        return setupState[key];\n      } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n        accessCache[key] = 2 /* DATA */;\n        return data[key];\n      } else if (\n        // only cache other properties when instance has declared (thus stable)\n        // props\n        (normalizedProps = instance.propsOptions[0]) && hasOwn(normalizedProps, key)\n      ) {\n        accessCache[key] = 3 /* PROPS */;\n        return props[key];\n      } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n        accessCache[key] = 4 /* CONTEXT */;\n        return ctx[key];\n      } else if (!__VUE_OPTIONS_API__ || shouldCacheAccess) {\n        accessCache[key] = 0 /* OTHER */;\n      }\n    }\n    const publicGetter = publicPropertiesMap[key];\n    let cssModule, globalProperties;\n    if (publicGetter) {\n      if (key === \"$attrs\") {\n        track(instance.attrs, \"get\", \"\");\n        !!(process.env.NODE_ENV !== \"production\") && markAttrsAccessed();\n      } else if (!!(process.env.NODE_ENV !== \"production\") && key === \"$slots\") {\n        track(instance, \"get\", key);\n      }\n      return publicGetter(instance);\n    } else if (\n      // css module (injected by vue-loader)\n      (cssModule = type.__cssModules) && (cssModule = cssModule[key])\n    ) {\n      return cssModule;\n    } else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\n      accessCache[key] = 4 /* CONTEXT */;\n      return ctx[key];\n    } else if (\n      // global properties\n      globalProperties = appContext.config.globalProperties, hasOwn(globalProperties, key)\n    ) {\n      {\n        return globalProperties[key];\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\") && currentRenderingInstance && (!isString(key) || // #1091 avoid internal isRef/isVNode checks on component instance leading\n    // to infinite warning loop\n    key.indexOf(\"__v\") !== 0)) {\n      if (data !== EMPTY_OBJ && isReservedPrefix(key[0]) && hasOwn(data, key)) {\n        warn$1(\n          `Property ${JSON.stringify(\n            key\n          )} must be accessed via $data because it starts with a reserved character (\"$\" or \"_\") and is not proxied on the render context.`\n        );\n      } else if (instance === currentRenderingInstance) {\n        warn$1(\n          `Property ${JSON.stringify(key)} was accessed during render but is not defined on instance.`\n        );\n      }\n    }\n  },\n  set({ _: instance }, key, value) {\n    const { data, setupState, ctx } = instance;\n    if (hasSetupBinding(setupState, key)) {\n      setupState[key] = value;\n      return true;\n    } else if (!!(process.env.NODE_ENV !== \"production\") && setupState.__isScriptSetup && hasOwn(setupState, key)) {\n      warn$1(`Cannot mutate <script setup> binding \"${key}\" from Options API.`);\n      return false;\n    } else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\n      data[key] = value;\n      return true;\n    } else if (hasOwn(instance.props, key)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`Attempting to mutate prop \"${key}\". Props are readonly.`);\n      return false;\n    }\n    if (key[0] === \"$\" && key.slice(1) in instance) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Attempting to mutate public property \"${key}\". Properties starting with $ are reserved and readonly.`\n      );\n      return false;\n    } else {\n      if (!!(process.env.NODE_ENV !== \"production\") && key in instance.appContext.config.globalProperties) {\n        Object.defineProperty(ctx, key, {\n          enumerable: true,\n          configurable: true,\n          value\n        });\n      } else {\n        ctx[key] = value;\n      }\n    }\n    return true;\n  },\n  has({\n    _: { data, setupState, accessCache, ctx, appContext, propsOptions }\n  }, key) {\n    let normalizedProps;\n    return !!accessCache[key] || data !== EMPTY_OBJ && hasOwn(data, key) || hasSetupBinding(setupState, key) || (normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key) || hasOwn(ctx, key) || hasOwn(publicPropertiesMap, key) || hasOwn(appContext.config.globalProperties, key);\n  },\n  defineProperty(target, key, descriptor) {\n    if (descriptor.get != null) {\n      target._.accessCache[key] = 0;\n    } else if (hasOwn(descriptor, \"value\")) {\n      this.set(target, key, descriptor.value, null);\n    }\n    return Reflect.defineProperty(target, key, descriptor);\n  }\n};\nif (!!(process.env.NODE_ENV !== \"production\") && true) {\n  PublicInstanceProxyHandlers.ownKeys = (target) => {\n    warn$1(\n      `Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead.`\n    );\n    return Reflect.ownKeys(target);\n  };\n}\nconst RuntimeCompiledPublicInstanceProxyHandlers = /* @__PURE__ */ extend({}, PublicInstanceProxyHandlers, {\n  get(target, key) {\n    if (key === Symbol.unscopables) {\n      return;\n    }\n    return PublicInstanceProxyHandlers.get(target, key, target);\n  },\n  has(_, key) {\n    const has = key[0] !== \"_\" && !isGloballyAllowed(key);\n    if (!!(process.env.NODE_ENV !== \"production\") && !has && PublicInstanceProxyHandlers.has(_, key)) {\n      warn$1(\n        `Property ${JSON.stringify(\n          key\n        )} should not start with _ which is a reserved prefix for Vue internals.`\n      );\n    }\n    return has;\n  }\n});\nfunction createDevRenderContext(instance) {\n  const target = {};\n  Object.defineProperty(target, `_`, {\n    configurable: true,\n    enumerable: false,\n    get: () => instance\n  });\n  Object.keys(publicPropertiesMap).forEach((key) => {\n    Object.defineProperty(target, key, {\n      configurable: true,\n      enumerable: false,\n      get: () => publicPropertiesMap[key](instance),\n      // intercepted by the proxy so no need for implementation,\n      // but needed to prevent set errors\n      set: NOOP\n    });\n  });\n  return target;\n}\nfunction exposePropsOnRenderContext(instance) {\n  const {\n    ctx,\n    propsOptions: [propsOptions]\n  } = instance;\n  if (propsOptions) {\n    Object.keys(propsOptions).forEach((key) => {\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => instance.props[key],\n        set: NOOP\n      });\n    });\n  }\n}\nfunction exposeSetupStateOnRenderContext(instance) {\n  const { ctx, setupState } = instance;\n  Object.keys(toRaw(setupState)).forEach((key) => {\n    if (!setupState.__isScriptSetup) {\n      if (isReservedPrefix(key[0])) {\n        warn$1(\n          `setup() return property ${JSON.stringify(\n            key\n          )} should not start with \"$\" or \"_\" which are reserved prefixes for Vue internals.`\n        );\n        return;\n      }\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => setupState[key],\n        set: NOOP\n      });\n    }\n  });\n}\n\nconst warnRuntimeUsage = (method) => warn$1(\n  `${method}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`\n);\nfunction defineProps() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineProps`);\n  }\n  return null;\n}\nfunction defineEmits() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineEmits`);\n  }\n  return null;\n}\nfunction defineExpose(exposed) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineExpose`);\n  }\n}\nfunction defineOptions(options) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineOptions`);\n  }\n}\nfunction defineSlots() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`defineSlots`);\n  }\n  return null;\n}\nfunction defineModel() {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(\"defineModel\");\n  }\n}\nfunction withDefaults(props, defaults) {\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    warnRuntimeUsage(`withDefaults`);\n  }\n  return null;\n}\nfunction useSlots() {\n  return getContext().slots;\n}\nfunction useAttrs() {\n  return getContext().attrs;\n}\nfunction getContext() {\n  const i = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !i) {\n    warn$1(`useContext() called without active instance.`);\n  }\n  return i.setupContext || (i.setupContext = createSetupContext(i));\n}\nfunction normalizePropsOrEmits(props) {\n  return isArray(props) ? props.reduce(\n    (normalized, p) => (normalized[p] = null, normalized),\n    {}\n  ) : props;\n}\nfunction mergeDefaults(raw, defaults) {\n  const props = normalizePropsOrEmits(raw);\n  for (const key in defaults) {\n    if (key.startsWith(\"__skip\")) continue;\n    let opt = props[key];\n    if (opt) {\n      if (isArray(opt) || isFunction(opt)) {\n        opt = props[key] = { type: opt, default: defaults[key] };\n      } else {\n        opt.default = defaults[key];\n      }\n    } else if (opt === null) {\n      opt = props[key] = { default: defaults[key] };\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`props default key \"${key}\" has no corresponding declaration.`);\n    }\n    if (opt && defaults[`__skip_${key}`]) {\n      opt.skipFactory = true;\n    }\n  }\n  return props;\n}\nfunction mergeModels(a, b) {\n  if (!a || !b) return a || b;\n  if (isArray(a) && isArray(b)) return a.concat(b);\n  return extend({}, normalizePropsOrEmits(a), normalizePropsOrEmits(b));\n}\nfunction createPropsRestProxy(props, excludedKeys) {\n  const ret = {};\n  for (const key in props) {\n    if (!excludedKeys.includes(key)) {\n      Object.defineProperty(ret, key, {\n        enumerable: true,\n        get: () => props[key]\n      });\n    }\n  }\n  return ret;\n}\nfunction withAsyncContext(getAwaitable) {\n  const ctx = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !ctx) {\n    warn$1(\n      `withAsyncContext called without active current instance. This is likely a bug.`\n    );\n  }\n  let awaitable = getAwaitable();\n  unsetCurrentInstance();\n  if (isPromise(awaitable)) {\n    awaitable = awaitable.catch((e) => {\n      setCurrentInstance(ctx);\n      throw e;\n    });\n  }\n  return [awaitable, () => setCurrentInstance(ctx)];\n}\n\nfunction createDuplicateChecker() {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (type, key) => {\n    if (cache[key]) {\n      warn$1(`${type} property \"${key}\" is already defined in ${cache[key]}.`);\n    } else {\n      cache[key] = type;\n    }\n  };\n}\nlet shouldCacheAccess = true;\nfunction applyOptions(instance) {\n  const options = resolveMergedOptions(instance);\n  const publicThis = instance.proxy;\n  const ctx = instance.ctx;\n  shouldCacheAccess = false;\n  if (options.beforeCreate) {\n    callHook(options.beforeCreate, instance, \"bc\");\n  }\n  const {\n    // state\n    data: dataOptions,\n    computed: computedOptions,\n    methods,\n    watch: watchOptions,\n    provide: provideOptions,\n    inject: injectOptions,\n    // lifecycle\n    created,\n    beforeMount,\n    mounted,\n    beforeUpdate,\n    updated,\n    activated,\n    deactivated,\n    beforeDestroy,\n    beforeUnmount,\n    destroyed,\n    unmounted,\n    render,\n    renderTracked,\n    renderTriggered,\n    errorCaptured,\n    serverPrefetch,\n    // public API\n    expose,\n    inheritAttrs,\n    // assets\n    components,\n    directives,\n    filters\n  } = options;\n  const checkDuplicateProperties = !!(process.env.NODE_ENV !== \"production\") ? createDuplicateChecker() : null;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const [propsOptions] = instance.propsOptions;\n    if (propsOptions) {\n      for (const key in propsOptions) {\n        checkDuplicateProperties(\"Props\" /* PROPS */, key);\n      }\n    }\n  }\n  if (injectOptions) {\n    resolveInjections(injectOptions, ctx, checkDuplicateProperties);\n  }\n  if (methods) {\n    for (const key in methods) {\n      const methodHandler = methods[key];\n      if (isFunction(methodHandler)) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          Object.defineProperty(ctx, key, {\n            value: methodHandler.bind(publicThis),\n            configurable: true,\n            enumerable: true,\n            writable: true\n          });\n        } else {\n          ctx[key] = methodHandler.bind(publicThis);\n        }\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          checkDuplicateProperties(\"Methods\" /* METHODS */, key);\n        }\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn$1(\n          `Method \"${key}\" has type \"${typeof methodHandler}\" in the component definition. Did you reference the function correctly?`\n        );\n      }\n    }\n  }\n  if (dataOptions) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isFunction(dataOptions)) {\n      warn$1(\n        `The data option must be a function. Plain object usage is no longer supported.`\n      );\n    }\n    const data = dataOptions.call(publicThis, publicThis);\n    if (!!(process.env.NODE_ENV !== \"production\") && isPromise(data)) {\n      warn$1(\n        `data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>.`\n      );\n    }\n    if (!isObject(data)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`data() should return an object.`);\n    } else {\n      instance.data = reactive(data);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        for (const key in data) {\n          checkDuplicateProperties(\"Data\" /* DATA */, key);\n          if (!isReservedPrefix(key[0])) {\n            Object.defineProperty(ctx, key, {\n              configurable: true,\n              enumerable: true,\n              get: () => data[key],\n              set: NOOP\n            });\n          }\n        }\n      }\n    }\n  }\n  shouldCacheAccess = true;\n  if (computedOptions) {\n    for (const key in computedOptions) {\n      const opt = computedOptions[key];\n      const get = isFunction(opt) ? opt.bind(publicThis, publicThis) : isFunction(opt.get) ? opt.get.bind(publicThis, publicThis) : NOOP;\n      if (!!(process.env.NODE_ENV !== \"production\") && get === NOOP) {\n        warn$1(`Computed property \"${key}\" has no getter.`);\n      }\n      const set = !isFunction(opt) && isFunction(opt.set) ? opt.set.bind(publicThis) : !!(process.env.NODE_ENV !== \"production\") ? () => {\n        warn$1(\n          `Write operation failed: computed property \"${key}\" is readonly.`\n        );\n      } : NOOP;\n      const c = computed({\n        get,\n        set\n      });\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => c.value,\n        set: (v) => c.value = v\n      });\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        checkDuplicateProperties(\"Computed\" /* COMPUTED */, key);\n      }\n    }\n  }\n  if (watchOptions) {\n    for (const key in watchOptions) {\n      createWatcher(watchOptions[key], ctx, publicThis, key);\n    }\n  }\n  if (provideOptions) {\n    const provides = isFunction(provideOptions) ? provideOptions.call(publicThis) : provideOptions;\n    Reflect.ownKeys(provides).forEach((key) => {\n      provide(key, provides[key]);\n    });\n  }\n  if (created) {\n    callHook(created, instance, \"c\");\n  }\n  function registerLifecycleHook(register, hook) {\n    if (isArray(hook)) {\n      hook.forEach((_hook) => register(_hook.bind(publicThis)));\n    } else if (hook) {\n      register(hook.bind(publicThis));\n    }\n  }\n  registerLifecycleHook(onBeforeMount, beforeMount);\n  registerLifecycleHook(onMounted, mounted);\n  registerLifecycleHook(onBeforeUpdate, beforeUpdate);\n  registerLifecycleHook(onUpdated, updated);\n  registerLifecycleHook(onActivated, activated);\n  registerLifecycleHook(onDeactivated, deactivated);\n  registerLifecycleHook(onErrorCaptured, errorCaptured);\n  registerLifecycleHook(onRenderTracked, renderTracked);\n  registerLifecycleHook(onRenderTriggered, renderTriggered);\n  registerLifecycleHook(onBeforeUnmount, beforeUnmount);\n  registerLifecycleHook(onUnmounted, unmounted);\n  registerLifecycleHook(onServerPrefetch, serverPrefetch);\n  if (isArray(expose)) {\n    if (expose.length) {\n      const exposed = instance.exposed || (instance.exposed = {});\n      expose.forEach((key) => {\n        Object.defineProperty(exposed, key, {\n          get: () => publicThis[key],\n          set: (val) => publicThis[key] = val\n        });\n      });\n    } else if (!instance.exposed) {\n      instance.exposed = {};\n    }\n  }\n  if (render && instance.render === NOOP) {\n    instance.render = render;\n  }\n  if (inheritAttrs != null) {\n    instance.inheritAttrs = inheritAttrs;\n  }\n  if (components) instance.components = components;\n  if (directives) instance.directives = directives;\n  if (serverPrefetch) {\n    markAsyncBoundary(instance);\n  }\n}\nfunction resolveInjections(injectOptions, ctx, checkDuplicateProperties = NOOP) {\n  if (isArray(injectOptions)) {\n    injectOptions = normalizeInject(injectOptions);\n  }\n  for (const key in injectOptions) {\n    const opt = injectOptions[key];\n    let injected;\n    if (isObject(opt)) {\n      if (\"default\" in opt) {\n        injected = inject(\n          opt.from || key,\n          opt.default,\n          true\n        );\n      } else {\n        injected = inject(opt.from || key);\n      }\n    } else {\n      injected = inject(opt);\n    }\n    if (isRef(injected)) {\n      Object.defineProperty(ctx, key, {\n        enumerable: true,\n        configurable: true,\n        get: () => injected.value,\n        set: (v) => injected.value = v\n      });\n    } else {\n      ctx[key] = injected;\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      checkDuplicateProperties(\"Inject\" /* INJECT */, key);\n    }\n  }\n}\nfunction callHook(hook, instance, type) {\n  callWithAsyncErrorHandling(\n    isArray(hook) ? hook.map((h) => h.bind(instance.proxy)) : hook.bind(instance.proxy),\n    instance,\n    type\n  );\n}\nfunction createWatcher(raw, ctx, publicThis, key) {\n  let getter = key.includes(\".\") ? createPathGetter(publicThis, key) : () => publicThis[key];\n  if (isString(raw)) {\n    const handler = ctx[raw];\n    if (isFunction(handler)) {\n      {\n        watch(getter, handler);\n      }\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`Invalid watch handler specified by key \"${raw}\"`, handler);\n    }\n  } else if (isFunction(raw)) {\n    {\n      watch(getter, raw.bind(publicThis));\n    }\n  } else if (isObject(raw)) {\n    if (isArray(raw)) {\n      raw.forEach((r) => createWatcher(r, ctx, publicThis, key));\n    } else {\n      const handler = isFunction(raw.handler) ? raw.handler.bind(publicThis) : ctx[raw.handler];\n      if (isFunction(handler)) {\n        watch(getter, handler, raw);\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn$1(`Invalid watch handler specified by key \"${raw.handler}\"`, handler);\n      }\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`Invalid watch option: \"${key}\"`, raw);\n  }\n}\nfunction resolveMergedOptions(instance) {\n  const base = instance.type;\n  const { mixins, extends: extendsOptions } = base;\n  const {\n    mixins: globalMixins,\n    optionsCache: cache,\n    config: { optionMergeStrategies }\n  } = instance.appContext;\n  const cached = cache.get(base);\n  let resolved;\n  if (cached) {\n    resolved = cached;\n  } else if (!globalMixins.length && !mixins && !extendsOptions) {\n    {\n      resolved = base;\n    }\n  } else {\n    resolved = {};\n    if (globalMixins.length) {\n      globalMixins.forEach(\n        (m) => mergeOptions(resolved, m, optionMergeStrategies, true)\n      );\n    }\n    mergeOptions(resolved, base, optionMergeStrategies);\n  }\n  if (isObject(base)) {\n    cache.set(base, resolved);\n  }\n  return resolved;\n}\nfunction mergeOptions(to, from, strats, asMixin = false) {\n  const { mixins, extends: extendsOptions } = from;\n  if (extendsOptions) {\n    mergeOptions(to, extendsOptions, strats, true);\n  }\n  if (mixins) {\n    mixins.forEach(\n      (m) => mergeOptions(to, m, strats, true)\n    );\n  }\n  for (const key in from) {\n    if (asMixin && key === \"expose\") {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `\"expose\" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.`\n      );\n    } else {\n      const strat = internalOptionMergeStrats[key] || strats && strats[key];\n      to[key] = strat ? strat(to[key], from[key]) : from[key];\n    }\n  }\n  return to;\n}\nconst internalOptionMergeStrats = {\n  data: mergeDataFn,\n  props: mergeEmitsOrPropsOptions,\n  emits: mergeEmitsOrPropsOptions,\n  // objects\n  methods: mergeObjectOptions,\n  computed: mergeObjectOptions,\n  // lifecycle\n  beforeCreate: mergeAsArray,\n  created: mergeAsArray,\n  beforeMount: mergeAsArray,\n  mounted: mergeAsArray,\n  beforeUpdate: mergeAsArray,\n  updated: mergeAsArray,\n  beforeDestroy: mergeAsArray,\n  beforeUnmount: mergeAsArray,\n  destroyed: mergeAsArray,\n  unmounted: mergeAsArray,\n  activated: mergeAsArray,\n  deactivated: mergeAsArray,\n  errorCaptured: mergeAsArray,\n  serverPrefetch: mergeAsArray,\n  // assets\n  components: mergeObjectOptions,\n  directives: mergeObjectOptions,\n  // watch\n  watch: mergeWatchOptions,\n  // provide / inject\n  provide: mergeDataFn,\n  inject: mergeInject\n};\nfunction mergeDataFn(to, from) {\n  if (!from) {\n    return to;\n  }\n  if (!to) {\n    return from;\n  }\n  return function mergedDataFn() {\n    return (extend)(\n      isFunction(to) ? to.call(this, this) : to,\n      isFunction(from) ? from.call(this, this) : from\n    );\n  };\n}\nfunction mergeInject(to, from) {\n  return mergeObjectOptions(normalizeInject(to), normalizeInject(from));\n}\nfunction normalizeInject(raw) {\n  if (isArray(raw)) {\n    const res = {};\n    for (let i = 0; i < raw.length; i++) {\n      res[raw[i]] = raw[i];\n    }\n    return res;\n  }\n  return raw;\n}\nfunction mergeAsArray(to, from) {\n  return to ? [...new Set([].concat(to, from))] : from;\n}\nfunction mergeObjectOptions(to, from) {\n  return to ? extend(/* @__PURE__ */ Object.create(null), to, from) : from;\n}\nfunction mergeEmitsOrPropsOptions(to, from) {\n  if (to) {\n    if (isArray(to) && isArray(from)) {\n      return [.../* @__PURE__ */ new Set([...to, ...from])];\n    }\n    return extend(\n      /* @__PURE__ */ Object.create(null),\n      normalizePropsOrEmits(to),\n      normalizePropsOrEmits(from != null ? from : {})\n    );\n  } else {\n    return from;\n  }\n}\nfunction mergeWatchOptions(to, from) {\n  if (!to) return from;\n  if (!from) return to;\n  const merged = extend(/* @__PURE__ */ Object.create(null), to);\n  for (const key in from) {\n    merged[key] = mergeAsArray(to[key], from[key]);\n  }\n  return merged;\n}\n\nfunction createAppContext() {\n  return {\n    app: null,\n    config: {\n      isNativeTag: NO,\n      performance: false,\n      globalProperties: {},\n      optionMergeStrategies: {},\n      errorHandler: void 0,\n      warnHandler: void 0,\n      compilerOptions: {}\n    },\n    mixins: [],\n    components: {},\n    directives: {},\n    provides: /* @__PURE__ */ Object.create(null),\n    optionsCache: /* @__PURE__ */ new WeakMap(),\n    propsCache: /* @__PURE__ */ new WeakMap(),\n    emitsCache: /* @__PURE__ */ new WeakMap()\n  };\n}\nlet uid$1 = 0;\nfunction createAppAPI(render, hydrate) {\n  return function createApp(rootComponent, rootProps = null) {\n    if (!isFunction(rootComponent)) {\n      rootComponent = extend({}, rootComponent);\n    }\n    if (rootProps != null && !isObject(rootProps)) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(`root props passed to app.mount() must be an object.`);\n      rootProps = null;\n    }\n    const context = createAppContext();\n    const installedPlugins = /* @__PURE__ */ new WeakSet();\n    const pluginCleanupFns = [];\n    let isMounted = false;\n    const app = context.app = {\n      _uid: uid$1++,\n      _component: rootComponent,\n      _props: rootProps,\n      _container: null,\n      _context: context,\n      _instance: null,\n      version,\n      get config() {\n        return context.config;\n      },\n      set config(v) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `app.config cannot be replaced. Modify individual options instead.`\n          );\n        }\n      },\n      use(plugin, ...options) {\n        if (installedPlugins.has(plugin)) {\n          !!(process.env.NODE_ENV !== \"production\") && warn$1(`Plugin has already been applied to target app.`);\n        } else if (plugin && isFunction(plugin.install)) {\n          installedPlugins.add(plugin);\n          plugin.install(app, ...options);\n        } else if (isFunction(plugin)) {\n          installedPlugins.add(plugin);\n          plugin(app, ...options);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `A plugin must either be a function or an object with an \"install\" function.`\n          );\n        }\n        return app;\n      },\n      mixin(mixin) {\n        if (__VUE_OPTIONS_API__) {\n          if (!context.mixins.includes(mixin)) {\n            context.mixins.push(mixin);\n          } else if (!!(process.env.NODE_ENV !== \"production\")) {\n            warn$1(\n              \"Mixin has already been applied to target app\" + (mixin.name ? `: ${mixin.name}` : \"\")\n            );\n          }\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Mixins are only available in builds supporting Options API\");\n        }\n        return app;\n      },\n      component(name, component) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          validateComponentName(name, context.config);\n        }\n        if (!component) {\n          return context.components[name];\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") && context.components[name]) {\n          warn$1(`Component \"${name}\" has already been registered in target app.`);\n        }\n        context.components[name] = component;\n        return app;\n      },\n      directive(name, directive) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          validateDirectiveName(name);\n        }\n        if (!directive) {\n          return context.directives[name];\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") && context.directives[name]) {\n          warn$1(`Directive \"${name}\" has already been registered in target app.`);\n        }\n        context.directives[name] = directive;\n        return app;\n      },\n      mount(rootContainer, isHydrate, namespace) {\n        if (!isMounted) {\n          if (!!(process.env.NODE_ENV !== \"production\") && rootContainer.__vue_app__) {\n            warn$1(\n              `There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling \\`app.unmount()\\` first.`\n            );\n          }\n          const vnode = app._ceVNode || createVNode(rootComponent, rootProps);\n          vnode.appContext = context;\n          if (namespace === true) {\n            namespace = \"svg\";\n          } else if (namespace === false) {\n            namespace = void 0;\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            context.reload = () => {\n              render(\n                cloneVNode(vnode),\n                rootContainer,\n                namespace\n              );\n            };\n          }\n          if (isHydrate && hydrate) {\n            hydrate(vnode, rootContainer);\n          } else {\n            render(vnode, rootContainer, namespace);\n          }\n          isMounted = true;\n          app._container = rootContainer;\n          rootContainer.__vue_app__ = app;\n          if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n            app._instance = vnode.component;\n            devtoolsInitApp(app, version);\n          }\n          return getComponentPublicInstance(vnode.component);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\n            `App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. \\`const createMyApp = () => createApp(App)\\``\n          );\n        }\n      },\n      onUnmount(cleanupFn) {\n        if (!!(process.env.NODE_ENV !== \"production\") && typeof cleanupFn !== \"function\") {\n          warn$1(\n            `Expected function as first argument to app.onUnmount(), but got ${typeof cleanupFn}`\n          );\n        }\n        pluginCleanupFns.push(cleanupFn);\n      },\n      unmount() {\n        if (isMounted) {\n          callWithAsyncErrorHandling(\n            pluginCleanupFns,\n            app._instance,\n            16\n          );\n          render(null, app._container);\n          if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n            app._instance = null;\n            devtoolsUnmountApp(app);\n          }\n          delete app._container.__vue_app__;\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(`Cannot unmount an app that is not mounted.`);\n        }\n      },\n      provide(key, value) {\n        if (!!(process.env.NODE_ENV !== \"production\") && key in context.provides) {\n          warn$1(\n            `App already provides property with key \"${String(key)}\". It will be overwritten with the new value.`\n          );\n        }\n        context.provides[key] = value;\n        return app;\n      },\n      runWithContext(fn) {\n        const lastApp = currentApp;\n        currentApp = app;\n        try {\n          return fn();\n        } finally {\n          currentApp = lastApp;\n        }\n      }\n    };\n    return app;\n  };\n}\nlet currentApp = null;\n\nfunction provide(key, value) {\n  if (!currentInstance) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`provide() can only be used inside setup().`);\n    }\n  } else {\n    let provides = currentInstance.provides;\n    const parentProvides = currentInstance.parent && currentInstance.parent.provides;\n    if (parentProvides === provides) {\n      provides = currentInstance.provides = Object.create(parentProvides);\n    }\n    provides[key] = value;\n  }\n}\nfunction inject(key, defaultValue, treatDefaultAsFactory = false) {\n  const instance = currentInstance || currentRenderingInstance;\n  if (instance || currentApp) {\n    const provides = currentApp ? currentApp._context.provides : instance ? instance.parent == null ? instance.vnode.appContext && instance.vnode.appContext.provides : instance.parent.provides : void 0;\n    if (provides && key in provides) {\n      return provides[key];\n    } else if (arguments.length > 1) {\n      return treatDefaultAsFactory && isFunction(defaultValue) ? defaultValue.call(instance && instance.proxy) : defaultValue;\n    } else if (!!(process.env.NODE_ENV !== \"production\")) {\n      warn$1(`injection \"${String(key)}\" not found.`);\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`inject() can only be used inside setup() or functional components.`);\n  }\n}\nfunction hasInjectionContext() {\n  return !!(currentInstance || currentRenderingInstance || currentApp);\n}\n\nconst internalObjectProto = {};\nconst createInternalObject = () => Object.create(internalObjectProto);\nconst isInternalObject = (obj) => Object.getPrototypeOf(obj) === internalObjectProto;\n\nfunction initProps(instance, rawProps, isStateful, isSSR = false) {\n  const props = {};\n  const attrs = createInternalObject();\n  instance.propsDefaults = /* @__PURE__ */ Object.create(null);\n  setFullProps(instance, rawProps, props, attrs);\n  for (const key in instance.propsOptions[0]) {\n    if (!(key in props)) {\n      props[key] = void 0;\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    validateProps(rawProps || {}, props, instance);\n  }\n  if (isStateful) {\n    instance.props = isSSR ? props : shallowReactive(props);\n  } else {\n    if (!instance.type.props) {\n      instance.props = attrs;\n    } else {\n      instance.props = props;\n    }\n  }\n  instance.attrs = attrs;\n}\nfunction isInHmrContext(instance) {\n  while (instance) {\n    if (instance.type.__hmrId) return true;\n    instance = instance.parent;\n  }\n}\nfunction updateProps(instance, rawProps, rawPrevProps, optimized) {\n  const {\n    props,\n    attrs,\n    vnode: { patchFlag }\n  } = instance;\n  const rawCurrentProps = toRaw(props);\n  const [options] = instance.propsOptions;\n  let hasAttrsChanged = false;\n  if (\n    // always force full diff in dev\n    // - #1942 if hmr is enabled with sfc component\n    // - vite#872 non-sfc component used by sfc component\n    !(!!(process.env.NODE_ENV !== \"production\") && isInHmrContext(instance)) && (optimized || patchFlag > 0) && !(patchFlag & 16)\n  ) {\n    if (patchFlag & 8) {\n      const propsToUpdate = instance.vnode.dynamicProps;\n      for (let i = 0; i < propsToUpdate.length; i++) {\n        let key = propsToUpdate[i];\n        if (isEmitListener(instance.emitsOptions, key)) {\n          continue;\n        }\n        const value = rawProps[key];\n        if (options) {\n          if (hasOwn(attrs, key)) {\n            if (value !== attrs[key]) {\n              attrs[key] = value;\n              hasAttrsChanged = true;\n            }\n          } else {\n            const camelizedKey = camelize(key);\n            props[camelizedKey] = resolvePropValue(\n              options,\n              rawCurrentProps,\n              camelizedKey,\n              value,\n              instance,\n              false\n            );\n          }\n        } else {\n          if (value !== attrs[key]) {\n            attrs[key] = value;\n            hasAttrsChanged = true;\n          }\n        }\n      }\n    }\n  } else {\n    if (setFullProps(instance, rawProps, props, attrs)) {\n      hasAttrsChanged = true;\n    }\n    let kebabKey;\n    for (const key in rawCurrentProps) {\n      if (!rawProps || // for camelCase\n      !hasOwn(rawProps, key) && // it's possible the original props was passed in as kebab-case\n      // and converted to camelCase (#955)\n      ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey))) {\n        if (options) {\n          if (rawPrevProps && // for camelCase\n          (rawPrevProps[key] !== void 0 || // for kebab-case\n          rawPrevProps[kebabKey] !== void 0)) {\n            props[key] = resolvePropValue(\n              options,\n              rawCurrentProps,\n              key,\n              void 0,\n              instance,\n              true\n            );\n          }\n        } else {\n          delete props[key];\n        }\n      }\n    }\n    if (attrs !== rawCurrentProps) {\n      for (const key in attrs) {\n        if (!rawProps || !hasOwn(rawProps, key) && true) {\n          delete attrs[key];\n          hasAttrsChanged = true;\n        }\n      }\n    }\n  }\n  if (hasAttrsChanged) {\n    trigger(instance.attrs, \"set\", \"\");\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    validateProps(rawProps || {}, props, instance);\n  }\n}\nfunction setFullProps(instance, rawProps, props, attrs) {\n  const [options, needCastKeys] = instance.propsOptions;\n  let hasAttrsChanged = false;\n  let rawCastValues;\n  if (rawProps) {\n    for (let key in rawProps) {\n      if (isReservedProp(key)) {\n        continue;\n      }\n      const value = rawProps[key];\n      let camelKey;\n      if (options && hasOwn(options, camelKey = camelize(key))) {\n        if (!needCastKeys || !needCastKeys.includes(camelKey)) {\n          props[camelKey] = value;\n        } else {\n          (rawCastValues || (rawCastValues = {}))[camelKey] = value;\n        }\n      } else if (!isEmitListener(instance.emitsOptions, key)) {\n        if (!(key in attrs) || value !== attrs[key]) {\n          attrs[key] = value;\n          hasAttrsChanged = true;\n        }\n      }\n    }\n  }\n  if (needCastKeys) {\n    const rawCurrentProps = toRaw(props);\n    const castValues = rawCastValues || EMPTY_OBJ;\n    for (let i = 0; i < needCastKeys.length; i++) {\n      const key = needCastKeys[i];\n      props[key] = resolvePropValue(\n        options,\n        rawCurrentProps,\n        key,\n        castValues[key],\n        instance,\n        !hasOwn(castValues, key)\n      );\n    }\n  }\n  return hasAttrsChanged;\n}\nfunction resolvePropValue(options, props, key, value, instance, isAbsent) {\n  const opt = options[key];\n  if (opt != null) {\n    const hasDefault = hasOwn(opt, \"default\");\n    if (hasDefault && value === void 0) {\n      const defaultValue = opt.default;\n      if (opt.type !== Function && !opt.skipFactory && isFunction(defaultValue)) {\n        const { propsDefaults } = instance;\n        if (key in propsDefaults) {\n          value = propsDefaults[key];\n        } else {\n          const reset = setCurrentInstance(instance);\n          value = propsDefaults[key] = defaultValue.call(\n            null,\n            props\n          );\n          reset();\n        }\n      } else {\n        value = defaultValue;\n      }\n      if (instance.ce) {\n        instance.ce._setProp(key, value);\n      }\n    }\n    if (opt[0 /* shouldCast */]) {\n      if (isAbsent && !hasDefault) {\n        value = false;\n      } else if (opt[1 /* shouldCastTrue */] && (value === \"\" || value === hyphenate(key))) {\n        value = true;\n      }\n    }\n  }\n  return value;\n}\nconst mixinPropsCache = /* @__PURE__ */ new WeakMap();\nfunction normalizePropsOptions(comp, appContext, asMixin = false) {\n  const cache = __VUE_OPTIONS_API__ && asMixin ? mixinPropsCache : appContext.propsCache;\n  const cached = cache.get(comp);\n  if (cached) {\n    return cached;\n  }\n  const raw = comp.props;\n  const normalized = {};\n  const needCastKeys = [];\n  let hasExtends = false;\n  if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n    const extendProps = (raw2) => {\n      hasExtends = true;\n      const [props, keys] = normalizePropsOptions(raw2, appContext, true);\n      extend(normalized, props);\n      if (keys) needCastKeys.push(...keys);\n    };\n    if (!asMixin && appContext.mixins.length) {\n      appContext.mixins.forEach(extendProps);\n    }\n    if (comp.extends) {\n      extendProps(comp.extends);\n    }\n    if (comp.mixins) {\n      comp.mixins.forEach(extendProps);\n    }\n  }\n  if (!raw && !hasExtends) {\n    if (isObject(comp)) {\n      cache.set(comp, EMPTY_ARR);\n    }\n    return EMPTY_ARR;\n  }\n  if (isArray(raw)) {\n    for (let i = 0; i < raw.length; i++) {\n      if (!!(process.env.NODE_ENV !== \"production\") && !isString(raw[i])) {\n        warn$1(`props must be strings when using array syntax.`, raw[i]);\n      }\n      const normalizedKey = camelize(raw[i]);\n      if (validatePropName(normalizedKey)) {\n        normalized[normalizedKey] = EMPTY_OBJ;\n      }\n    }\n  } else if (raw) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isObject(raw)) {\n      warn$1(`invalid props options`, raw);\n    }\n    for (const key in raw) {\n      const normalizedKey = camelize(key);\n      if (validatePropName(normalizedKey)) {\n        const opt = raw[key];\n        const prop = normalized[normalizedKey] = isArray(opt) || isFunction(opt) ? { type: opt } : extend({}, opt);\n        const propType = prop.type;\n        let shouldCast = false;\n        let shouldCastTrue = true;\n        if (isArray(propType)) {\n          for (let index = 0; index < propType.length; ++index) {\n            const type = propType[index];\n            const typeName = isFunction(type) && type.name;\n            if (typeName === \"Boolean\") {\n              shouldCast = true;\n              break;\n            } else if (typeName === \"String\") {\n              shouldCastTrue = false;\n            }\n          }\n        } else {\n          shouldCast = isFunction(propType) && propType.name === \"Boolean\";\n        }\n        prop[0 /* shouldCast */] = shouldCast;\n        prop[1 /* shouldCastTrue */] = shouldCastTrue;\n        if (shouldCast || hasOwn(prop, \"default\")) {\n          needCastKeys.push(normalizedKey);\n        }\n      }\n    }\n  }\n  const res = [normalized, needCastKeys];\n  if (isObject(comp)) {\n    cache.set(comp, res);\n  }\n  return res;\n}\nfunction validatePropName(key) {\n  if (key[0] !== \"$\" && !isReservedProp(key)) {\n    return true;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    warn$1(`Invalid prop name: \"${key}\" is a reserved property.`);\n  }\n  return false;\n}\nfunction getType(ctor) {\n  if (ctor === null) {\n    return \"null\";\n  }\n  if (typeof ctor === \"function\") {\n    return ctor.name || \"\";\n  } else if (typeof ctor === \"object\") {\n    const name = ctor.constructor && ctor.constructor.name;\n    return name || \"\";\n  }\n  return \"\";\n}\nfunction validateProps(rawProps, props, instance) {\n  const resolvedValues = toRaw(props);\n  const options = instance.propsOptions[0];\n  const camelizePropsKey = Object.keys(rawProps).map((key) => camelize(key));\n  for (const key in options) {\n    let opt = options[key];\n    if (opt == null) continue;\n    validateProp(\n      key,\n      resolvedValues[key],\n      opt,\n      !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(resolvedValues) : resolvedValues,\n      !camelizePropsKey.includes(key)\n    );\n  }\n}\nfunction validateProp(name, value, prop, props, isAbsent) {\n  const { type, required, validator, skipCheck } = prop;\n  if (required && isAbsent) {\n    warn$1('Missing required prop: \"' + name + '\"');\n    return;\n  }\n  if (value == null && !required) {\n    return;\n  }\n  if (type != null && type !== true && !skipCheck) {\n    let isValid = false;\n    const types = isArray(type) ? type : [type];\n    const expectedTypes = [];\n    for (let i = 0; i < types.length && !isValid; i++) {\n      const { valid, expectedType } = assertType(value, types[i]);\n      expectedTypes.push(expectedType || \"\");\n      isValid = valid;\n    }\n    if (!isValid) {\n      warn$1(getInvalidTypeMessage(name, value, expectedTypes));\n      return;\n    }\n  }\n  if (validator && !validator(value, props)) {\n    warn$1('Invalid prop: custom validator check failed for prop \"' + name + '\".');\n  }\n}\nconst isSimpleType = /* @__PURE__ */ makeMap(\n  \"String,Number,Boolean,Function,Symbol,BigInt\"\n);\nfunction assertType(value, type) {\n  let valid;\n  const expectedType = getType(type);\n  if (expectedType === \"null\") {\n    valid = value === null;\n  } else if (isSimpleType(expectedType)) {\n    const t = typeof value;\n    valid = t === expectedType.toLowerCase();\n    if (!valid && t === \"object\") {\n      valid = value instanceof type;\n    }\n  } else if (expectedType === \"Object\") {\n    valid = isObject(value);\n  } else if (expectedType === \"Array\") {\n    valid = isArray(value);\n  } else {\n    valid = value instanceof type;\n  }\n  return {\n    valid,\n    expectedType\n  };\n}\nfunction getInvalidTypeMessage(name, value, expectedTypes) {\n  if (expectedTypes.length === 0) {\n    return `Prop type [] for prop \"${name}\" won't match anything. Did you mean to use type Array instead?`;\n  }\n  let message = `Invalid prop: type check failed for prop \"${name}\". Expected ${expectedTypes.map(capitalize).join(\" | \")}`;\n  const expectedType = expectedTypes[0];\n  const receivedType = toRawType(value);\n  const expectedValue = styleValue(value, expectedType);\n  const receivedValue = styleValue(value, receivedType);\n  if (expectedTypes.length === 1 && isExplicable(expectedType) && !isBoolean(expectedType, receivedType)) {\n    message += ` with value ${expectedValue}`;\n  }\n  message += `, got ${receivedType} `;\n  if (isExplicable(receivedType)) {\n    message += `with value ${receivedValue}.`;\n  }\n  return message;\n}\nfunction styleValue(value, type) {\n  if (type === \"String\") {\n    return `\"${value}\"`;\n  } else if (type === \"Number\") {\n    return `${Number(value)}`;\n  } else {\n    return `${value}`;\n  }\n}\nfunction isExplicable(type) {\n  const explicitTypes = [\"string\", \"number\", \"boolean\"];\n  return explicitTypes.some((elem) => type.toLowerCase() === elem);\n}\nfunction isBoolean(...args) {\n  return args.some((elem) => elem.toLowerCase() === \"boolean\");\n}\n\nconst isInternalKey = (key) => key[0] === \"_\" || key === \"$stable\";\nconst normalizeSlotValue = (value) => isArray(value) ? value.map(normalizeVNode) : [normalizeVNode(value)];\nconst normalizeSlot = (key, rawSlot, ctx) => {\n  if (rawSlot._n) {\n    return rawSlot;\n  }\n  const normalized = withCtx((...args) => {\n    if (!!(process.env.NODE_ENV !== \"production\") && currentInstance && (!ctx || ctx.root === currentInstance.root)) {\n      warn$1(\n        `Slot \"${key}\" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`\n      );\n    }\n    return normalizeSlotValue(rawSlot(...args));\n  }, ctx);\n  normalized._c = false;\n  return normalized;\n};\nconst normalizeObjectSlots = (rawSlots, slots, instance) => {\n  const ctx = rawSlots._ctx;\n  for (const key in rawSlots) {\n    if (isInternalKey(key)) continue;\n    const value = rawSlots[key];\n    if (isFunction(value)) {\n      slots[key] = normalizeSlot(key, value, ctx);\n    } else if (value != null) {\n      if (!!(process.env.NODE_ENV !== \"production\") && true) {\n        warn$1(\n          `Non-function value encountered for slot \"${key}\". Prefer function slots for better performance.`\n        );\n      }\n      const normalized = normalizeSlotValue(value);\n      slots[key] = () => normalized;\n    }\n  }\n};\nconst normalizeVNodeSlots = (instance, children) => {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isKeepAlive(instance.vnode) && true) {\n    warn$1(\n      `Non-function value encountered for default slot. Prefer function slots for better performance.`\n    );\n  }\n  const normalized = normalizeSlotValue(children);\n  instance.slots.default = () => normalized;\n};\nconst assignSlots = (slots, children, optimized) => {\n  for (const key in children) {\n    if (optimized || key !== \"_\") {\n      slots[key] = children[key];\n    }\n  }\n};\nconst initSlots = (instance, children, optimized) => {\n  const slots = instance.slots = createInternalObject();\n  if (instance.vnode.shapeFlag & 32) {\n    const type = children._;\n    if (type) {\n      assignSlots(slots, children, optimized);\n      if (optimized) {\n        def(slots, \"_\", type, true);\n      }\n    } else {\n      normalizeObjectSlots(children, slots);\n    }\n  } else if (children) {\n    normalizeVNodeSlots(instance, children);\n  }\n};\nconst updateSlots = (instance, children, optimized) => {\n  const { vnode, slots } = instance;\n  let needDeletionCheck = true;\n  let deletionComparisonTarget = EMPTY_OBJ;\n  if (vnode.shapeFlag & 32) {\n    const type = children._;\n    if (type) {\n      if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n        assignSlots(slots, children, optimized);\n        trigger(instance, \"set\", \"$slots\");\n      } else if (optimized && type === 1) {\n        needDeletionCheck = false;\n      } else {\n        assignSlots(slots, children, optimized);\n      }\n    } else {\n      needDeletionCheck = !children.$stable;\n      normalizeObjectSlots(children, slots);\n    }\n    deletionComparisonTarget = children;\n  } else if (children) {\n    normalizeVNodeSlots(instance, children);\n    deletionComparisonTarget = { default: 1 };\n  }\n  if (needDeletionCheck) {\n    for (const key in slots) {\n      if (!isInternalKey(key) && deletionComparisonTarget[key] == null) {\n        delete slots[key];\n      }\n    }\n  }\n};\n\nlet supported;\nlet perf;\nfunction startMeasure(instance, type) {\n  if (instance.appContext.config.performance && isSupported()) {\n    perf.mark(`vue-${type}-${instance.uid}`);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsPerfStart(instance, type, isSupported() ? perf.now() : Date.now());\n  }\n}\nfunction endMeasure(instance, type) {\n  if (instance.appContext.config.performance && isSupported()) {\n    const startTag = `vue-${type}-${instance.uid}`;\n    const endTag = startTag + `:end`;\n    perf.mark(endTag);\n    perf.measure(\n      `<${formatComponentName(instance, instance.type)}> ${type}`,\n      startTag,\n      endTag\n    );\n    perf.clearMarks(startTag);\n    perf.clearMarks(endTag);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsPerfEnd(instance, type, isSupported() ? perf.now() : Date.now());\n  }\n}\nfunction isSupported() {\n  if (supported !== void 0) {\n    return supported;\n  }\n  if (typeof window !== \"undefined\" && window.performance) {\n    supported = true;\n    perf = window.performance;\n  } else {\n    supported = false;\n  }\n  return supported;\n}\n\nfunction initFeatureFlags() {\n  const needWarn = [];\n  if (typeof __VUE_OPTIONS_API__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_OPTIONS_API__`);\n    getGlobalThis().__VUE_OPTIONS_API__ = true;\n  }\n  if (typeof __VUE_PROD_DEVTOOLS__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_PROD_DEVTOOLS__`);\n    getGlobalThis().__VUE_PROD_DEVTOOLS__ = false;\n  }\n  if (typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__ !== \"boolean\") {\n    !!(process.env.NODE_ENV !== \"production\") && needWarn.push(`__VUE_PROD_HYDRATION_MISMATCH_DETAILS__`);\n    getGlobalThis().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__ = false;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && needWarn.length) {\n    const multi = needWarn.length > 1;\n    console.warn(\n      `Feature flag${multi ? `s` : ``} ${needWarn.join(\", \")} ${multi ? `are` : `is`} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.\n\nFor more details, see https://link.vuejs.org/feature-flags.`\n    );\n  }\n}\n\nconst queuePostRenderEffect = queueEffectWithSuspense ;\nfunction createRenderer(options) {\n  return baseCreateRenderer(options);\n}\nfunction createHydrationRenderer(options) {\n  return baseCreateRenderer(options, createHydrationFunctions);\n}\nfunction baseCreateRenderer(options, createHydrationFns) {\n  {\n    initFeatureFlags();\n  }\n  const target = getGlobalThis();\n  target.__VUE__ = true;\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    setDevtoolsHook$1(target.__VUE_DEVTOOLS_GLOBAL_HOOK__, target);\n  }\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    patchProp: hostPatchProp,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    createComment: hostCreateComment,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n    setScopeId: hostSetScopeId = NOOP,\n    insertStaticContent: hostInsertStaticContent\n  } = options;\n  const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, namespace = void 0, slotScopeIds = null, optimized = !!(process.env.NODE_ENV !== \"production\") && isHmrUpdating ? false : !!n2.dynamicChildren) => {\n    if (n1 === n2) {\n      return;\n    }\n    if (n1 && !isSameVNodeType(n1, n2)) {\n      anchor = getNextHostNode(n1);\n      unmount(n1, parentComponent, parentSuspense, true);\n      n1 = null;\n    }\n    if (n2.patchFlag === -2) {\n      optimized = false;\n      n2.dynamicChildren = null;\n    }\n    const { type, ref, shapeFlag } = n2;\n    switch (type) {\n      case Text:\n        processText(n1, n2, container, anchor);\n        break;\n      case Comment:\n        processCommentNode(n1, n2, container, anchor);\n        break;\n      case Static:\n        if (n1 == null) {\n          mountStaticNode(n2, container, anchor, namespace);\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          patchStaticNode(n1, n2, container, namespace);\n        }\n        break;\n      case Fragment:\n        processFragment(\n          n1,\n          n2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        break;\n      default:\n        if (shapeFlag & 1) {\n          processElement(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (shapeFlag & 6) {\n          processComponent(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (shapeFlag & 64) {\n          type.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        } else if (shapeFlag & 128) {\n          type.process(\n            n1,\n            n2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized,\n            internals\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\")) {\n          warn$1(\"Invalid VNode type:\", type, `(${typeof type})`);\n        }\n    }\n    if (ref != null && parentComponent) {\n      setRef(ref, n1 && n1.ref, parentSuspense, n2 || n1, !n2);\n    }\n  };\n  const processText = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        n2.el = hostCreateText(n2.children),\n        container,\n        anchor\n      );\n    } else {\n      const el = n2.el = n1.el;\n      if (n2.children !== n1.children) {\n        hostSetText(el, n2.children);\n      }\n    }\n  };\n  const processCommentNode = (n1, n2, container, anchor) => {\n    if (n1 == null) {\n      hostInsert(\n        n2.el = hostCreateComment(n2.children || \"\"),\n        container,\n        anchor\n      );\n    } else {\n      n2.el = n1.el;\n    }\n  };\n  const mountStaticNode = (n2, container, anchor, namespace) => {\n    [n2.el, n2.anchor] = hostInsertStaticContent(\n      n2.children,\n      container,\n      anchor,\n      namespace,\n      n2.el,\n      n2.anchor\n    );\n  };\n  const patchStaticNode = (n1, n2, container, namespace) => {\n    if (n2.children !== n1.children) {\n      const anchor = hostNextSibling(n1.anchor);\n      removeStaticNode(n1);\n      [n2.el, n2.anchor] = hostInsertStaticContent(\n        n2.children,\n        container,\n        anchor,\n        namespace\n      );\n    } else {\n      n2.el = n1.el;\n      n2.anchor = n1.anchor;\n    }\n  };\n  const moveStaticNode = ({ el, anchor }, container, nextSibling) => {\n    let next;\n    while (el && el !== anchor) {\n      next = hostNextSibling(el);\n      hostInsert(el, container, nextSibling);\n      el = next;\n    }\n    hostInsert(anchor, container, nextSibling);\n  };\n  const removeStaticNode = ({ el, anchor }) => {\n    let next;\n    while (el && el !== anchor) {\n      next = hostNextSibling(el);\n      hostRemove(el);\n      el = next;\n    }\n    hostRemove(anchor);\n  };\n  const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    if (n2.type === \"svg\") {\n      namespace = \"svg\";\n    } else if (n2.type === \"math\") {\n      namespace = \"mathml\";\n    }\n    if (n1 == null) {\n      mountElement(\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    } else {\n      patchElement(\n        n1,\n        n2,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n  };\n  const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    let el;\n    let vnodeHook;\n    const { props, shapeFlag, transition, dirs } = vnode;\n    el = vnode.el = hostCreateElement(\n      vnode.type,\n      namespace,\n      props && props.is,\n      props\n    );\n    if (shapeFlag & 8) {\n      hostSetElementText(el, vnode.children);\n    } else if (shapeFlag & 16) {\n      mountChildren(\n        vnode.children,\n        el,\n        null,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(vnode, namespace),\n        slotScopeIds,\n        optimized\n      );\n    }\n    if (dirs) {\n      invokeDirectiveHook(vnode, null, parentComponent, \"created\");\n    }\n    setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);\n    if (props) {\n      for (const key in props) {\n        if (key !== \"value\" && !isReservedProp(key)) {\n          hostPatchProp(el, key, null, props[key], namespace, parentComponent);\n        }\n      }\n      if (\"value\" in props) {\n        hostPatchProp(el, \"value\", null, props.value, namespace);\n      }\n      if (vnodeHook = props.onVnodeBeforeMount) {\n        invokeVNodeHook(vnodeHook, parentComponent, vnode);\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      def(el, \"__vnode\", vnode, true);\n      def(el, \"__vueParentComponent\", parentComponent, true);\n    }\n    if (dirs) {\n      invokeDirectiveHook(vnode, null, parentComponent, \"beforeMount\");\n    }\n    const needCallTransitionHooks = needTransition(parentSuspense, transition);\n    if (needCallTransitionHooks) {\n      transition.beforeEnter(el);\n    }\n    hostInsert(el, container, anchor);\n    if ((vnodeHook = props && props.onVnodeMounted) || needCallTransitionHooks || dirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        needCallTransitionHooks && transition.enter(el);\n        dirs && invokeDirectiveHook(vnode, null, parentComponent, \"mounted\");\n      }, parentSuspense);\n    }\n  };\n  const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {\n    if (scopeId) {\n      hostSetScopeId(el, scopeId);\n    }\n    if (slotScopeIds) {\n      for (let i = 0; i < slotScopeIds.length; i++) {\n        hostSetScopeId(el, slotScopeIds[i]);\n      }\n    }\n    if (parentComponent) {\n      let subTree = parentComponent.subTree;\n      if (!!(process.env.NODE_ENV !== \"production\") && subTree.patchFlag > 0 && subTree.patchFlag & 2048) {\n        subTree = filterSingleRoot(subTree.children) || subTree;\n      }\n      if (vnode === subTree || isSuspense(subTree.type) && (subTree.ssContent === vnode || subTree.ssFallback === vnode)) {\n        const parentVNode = parentComponent.vnode;\n        setScopeId(\n          el,\n          parentVNode,\n          parentVNode.scopeId,\n          parentVNode.slotScopeIds,\n          parentComponent.parent\n        );\n      }\n    }\n  };\n  const mountChildren = (children, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      const child = children[i] = optimized ? cloneIfMounted(children[i]) : normalizeVNode(children[i]);\n      patch(\n        null,\n        child,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n  };\n  const patchElement = (n1, n2, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    const el = n2.el = n1.el;\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      el.__vnode = n2;\n    }\n    let { patchFlag, dynamicChildren, dirs } = n2;\n    patchFlag |= n1.patchFlag & 16;\n    const oldProps = n1.props || EMPTY_OBJ;\n    const newProps = n2.props || EMPTY_OBJ;\n    let vnodeHook;\n    parentComponent && toggleRecurse(parentComponent, false);\n    if (vnodeHook = newProps.onVnodeBeforeUpdate) {\n      invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n    }\n    if (dirs) {\n      invokeDirectiveHook(n2, n1, parentComponent, \"beforeUpdate\");\n    }\n    parentComponent && toggleRecurse(parentComponent, true);\n    if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) {\n      patchFlag = 0;\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (oldProps.innerHTML && newProps.innerHTML == null || oldProps.textContent && newProps.textContent == null) {\n      hostSetElementText(el, \"\");\n    }\n    if (dynamicChildren) {\n      patchBlockChildren(\n        n1.dynamicChildren,\n        dynamicChildren,\n        el,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(n2, namespace),\n        slotScopeIds\n      );\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        traverseStaticChildren(n1, n2);\n      }\n    } else if (!optimized) {\n      patchChildren(\n        n1,\n        n2,\n        el,\n        null,\n        parentComponent,\n        parentSuspense,\n        resolveChildrenNamespace(n2, namespace),\n        slotScopeIds,\n        false\n      );\n    }\n    if (patchFlag > 0) {\n      if (patchFlag & 16) {\n        patchProps(el, oldProps, newProps, parentComponent, namespace);\n      } else {\n        if (patchFlag & 2) {\n          if (oldProps.class !== newProps.class) {\n            hostPatchProp(el, \"class\", null, newProps.class, namespace);\n          }\n        }\n        if (patchFlag & 4) {\n          hostPatchProp(el, \"style\", oldProps.style, newProps.style, namespace);\n        }\n        if (patchFlag & 8) {\n          const propsToUpdate = n2.dynamicProps;\n          for (let i = 0; i < propsToUpdate.length; i++) {\n            const key = propsToUpdate[i];\n            const prev = oldProps[key];\n            const next = newProps[key];\n            if (next !== prev || key === \"value\") {\n              hostPatchProp(el, key, prev, next, namespace, parentComponent);\n            }\n          }\n        }\n      }\n      if (patchFlag & 1) {\n        if (n1.children !== n2.children) {\n          hostSetElementText(el, n2.children);\n        }\n      }\n    } else if (!optimized && dynamicChildren == null) {\n      patchProps(el, oldProps, newProps, parentComponent, namespace);\n    }\n    if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\n        dirs && invokeDirectiveHook(n2, n1, parentComponent, \"updated\");\n      }, parentSuspense);\n    }\n  };\n  const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, namespace, slotScopeIds) => {\n    for (let i = 0; i < newChildren.length; i++) {\n      const oldVNode = oldChildren[i];\n      const newVNode = newChildren[i];\n      const container = (\n        // oldVNode may be an errored async setup() component inside Suspense\n        // which will not have a mounted element\n        oldVNode.el && // - In the case of a Fragment, we need to provide the actual parent\n        // of the Fragment itself so it can move its children.\n        (oldVNode.type === Fragment || // - In the case of different nodes, there is going to be a replacement\n        // which also requires the correct parent container\n        !isSameVNodeType(oldVNode, newVNode) || // - In the case of a component, it could contain anything.\n        oldVNode.shapeFlag & (6 | 64)) ? hostParentNode(oldVNode.el) : (\n          // In other cases, the parent container is not actually used so we\n          // just pass the block element here to avoid a DOM parentNode call.\n          fallbackContainer\n        )\n      );\n      patch(\n        oldVNode,\n        newVNode,\n        container,\n        null,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        true\n      );\n    }\n  };\n  const patchProps = (el, oldProps, newProps, parentComponent, namespace) => {\n    if (oldProps !== newProps) {\n      if (oldProps !== EMPTY_OBJ) {\n        for (const key in oldProps) {\n          if (!isReservedProp(key) && !(key in newProps)) {\n            hostPatchProp(\n              el,\n              key,\n              oldProps[key],\n              null,\n              namespace,\n              parentComponent\n            );\n          }\n        }\n      }\n      for (const key in newProps) {\n        if (isReservedProp(key)) continue;\n        const next = newProps[key];\n        const prev = oldProps[key];\n        if (next !== prev && key !== \"value\") {\n          hostPatchProp(el, key, prev, next, namespace, parentComponent);\n        }\n      }\n      if (\"value\" in newProps) {\n        hostPatchProp(el, \"value\", oldProps.value, newProps.value, namespace);\n      }\n    }\n  };\n  const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    const fragmentStartAnchor = n2.el = n1 ? n1.el : hostCreateText(\"\");\n    const fragmentEndAnchor = n2.anchor = n1 ? n1.anchor : hostCreateText(\"\");\n    let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;\n    if (!!(process.env.NODE_ENV !== \"production\") && // #5523 dev root fragment may inherit directives\n    (isHmrUpdating || patchFlag & 2048)) {\n      patchFlag = 0;\n      optimized = false;\n      dynamicChildren = null;\n    }\n    if (fragmentSlotScopeIds) {\n      slotScopeIds = slotScopeIds ? slotScopeIds.concat(fragmentSlotScopeIds) : fragmentSlotScopeIds;\n    }\n    if (n1 == null) {\n      hostInsert(fragmentStartAnchor, container, anchor);\n      hostInsert(fragmentEndAnchor, container, anchor);\n      mountChildren(\n        // #10007\n        // such fragment like `<></>` will be compiled into\n        // a fragment which doesn't have a children.\n        // In this case fallback to an empty array\n        n2.children || [],\n        container,\n        fragmentEndAnchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    } else {\n      if (patchFlag > 0 && patchFlag & 64 && dynamicChildren && // #2715 the previous fragment could've been a BAILed one as a result\n      // of renderSlot() with no valid children\n      n1.dynamicChildren) {\n        patchBlockChildren(\n          n1.dynamicChildren,\n          dynamicChildren,\n          container,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds\n        );\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          traverseStaticChildren(n1, n2);\n        } else if (\n          // #2080 if the stable fragment has a key, it's a <template v-for> that may\n          //  get moved around. Make sure all root level vnodes inherit el.\n          // #2134 or if it's a component root, it may also get moved around\n          // as the component is being moved.\n          n2.key != null || parentComponent && n2 === parentComponent.subTree\n        ) {\n          traverseStaticChildren(\n            n1,\n            n2,\n            true\n            /* shallow */\n          );\n        }\n      } else {\n        patchChildren(\n          n1,\n          n2,\n          container,\n          fragmentEndAnchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      }\n    }\n  };\n  const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    n2.slotScopeIds = slotScopeIds;\n    if (n1 == null) {\n      if (n2.shapeFlag & 512) {\n        parentComponent.ctx.activate(\n          n2,\n          container,\n          anchor,\n          namespace,\n          optimized\n        );\n      } else {\n        mountComponent(\n          n2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          optimized\n        );\n      }\n    } else {\n      updateComponent(n1, n2, optimized);\n    }\n  };\n  const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, namespace, optimized) => {\n    const instance = (initialVNode.component = createComponentInstance(\n      initialVNode,\n      parentComponent,\n      parentSuspense\n    ));\n    if (!!(process.env.NODE_ENV !== \"production\") && instance.type.__hmrId) {\n      registerHMR(instance);\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      pushWarningContext(initialVNode);\n      startMeasure(instance, `mount`);\n    }\n    if (isKeepAlive(initialVNode)) {\n      instance.ctx.renderer = internals;\n    }\n    {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        startMeasure(instance, `init`);\n      }\n      setupComponent(instance, false, optimized);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        endMeasure(instance, `init`);\n      }\n    }\n    if (instance.asyncDep) {\n      if (!!(process.env.NODE_ENV !== \"production\") && isHmrUpdating) initialVNode.el = null;\n      parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect, optimized);\n      if (!initialVNode.el) {\n        const placeholder = instance.subTree = createVNode(Comment);\n        processCommentNode(null, placeholder, container, anchor);\n      }\n    } else {\n      setupRenderEffect(\n        instance,\n        initialVNode,\n        container,\n        anchor,\n        parentSuspense,\n        namespace,\n        optimized\n      );\n    }\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      popWarningContext();\n      endMeasure(instance, `mount`);\n    }\n  };\n  const updateComponent = (n1, n2, optimized) => {\n    const instance = n2.component = n1.component;\n    if (shouldUpdateComponent(n1, n2, optimized)) {\n      if (instance.asyncDep && !instance.asyncResolved) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(n2);\n        }\n        updateComponentPreRender(instance, n2, optimized);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n        return;\n      } else {\n        instance.next = n2;\n        instance.update();\n      }\n    } else {\n      n2.el = n1.el;\n      instance.vnode = n2;\n    }\n  };\n  const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, namespace, optimized) => {\n    const componentUpdateFn = () => {\n      if (!instance.isMounted) {\n        let vnodeHook;\n        const { el, props } = initialVNode;\n        const { bm, m, parent, root, type } = instance;\n        const isAsyncWrapperVNode = isAsyncWrapper(initialVNode);\n        toggleRecurse(instance, false);\n        if (bm) {\n          invokeArrayFns(bm);\n        }\n        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeBeforeMount)) {\n          invokeVNodeHook(vnodeHook, parent, initialVNode);\n        }\n        toggleRecurse(instance, true);\n        if (el && hydrateNode) {\n          const hydrateSubTree = () => {\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              startMeasure(instance, `render`);\n            }\n            instance.subTree = renderComponentRoot(instance);\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              endMeasure(instance, `render`);\n            }\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              startMeasure(instance, `hydrate`);\n            }\n            hydrateNode(\n              el,\n              instance.subTree,\n              instance,\n              parentSuspense,\n              null\n            );\n            if (!!(process.env.NODE_ENV !== \"production\")) {\n              endMeasure(instance, `hydrate`);\n            }\n          };\n          if (isAsyncWrapperVNode && type.__asyncHydrate) {\n            type.__asyncHydrate(\n              el,\n              instance,\n              hydrateSubTree\n            );\n          } else {\n            hydrateSubTree();\n          }\n        } else {\n          if (root.ce) {\n            root.ce._injectChildStyle(type);\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            startMeasure(instance, `render`);\n          }\n          const subTree = instance.subTree = renderComponentRoot(instance);\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            endMeasure(instance, `render`);\n          }\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            startMeasure(instance, `patch`);\n          }\n          patch(\n            null,\n            subTree,\n            container,\n            anchor,\n            instance,\n            parentSuspense,\n            namespace\n          );\n          if (!!(process.env.NODE_ENV !== \"production\")) {\n            endMeasure(instance, `patch`);\n          }\n          initialVNode.el = subTree.el;\n        }\n        if (m) {\n          queuePostRenderEffect(m, parentSuspense);\n        }\n        if (!isAsyncWrapperVNode && (vnodeHook = props && props.onVnodeMounted)) {\n          const scopedInitialVNode = initialVNode;\n          queuePostRenderEffect(\n            () => invokeVNodeHook(vnodeHook, parent, scopedInitialVNode),\n            parentSuspense\n          );\n        }\n        if (initialVNode.shapeFlag & 256 || parent && isAsyncWrapper(parent.vnode) && parent.vnode.shapeFlag & 256) {\n          instance.a && queuePostRenderEffect(instance.a, parentSuspense);\n        }\n        instance.isMounted = true;\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n          devtoolsComponentAdded(instance);\n        }\n        initialVNode = container = anchor = null;\n      } else {\n        let { next, bu, u, parent, vnode } = instance;\n        {\n          const nonHydratedAsyncRoot = locateNonHydratedAsyncRoot(instance);\n          if (nonHydratedAsyncRoot) {\n            if (next) {\n              next.el = vnode.el;\n              updateComponentPreRender(instance, next, optimized);\n            }\n            nonHydratedAsyncRoot.asyncDep.then(() => {\n              if (!instance.isUnmounted) {\n                componentUpdateFn();\n              }\n            });\n            return;\n          }\n        }\n        let originNext = next;\n        let vnodeHook;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(next || instance.vnode);\n        }\n        toggleRecurse(instance, false);\n        if (next) {\n          next.el = vnode.el;\n          updateComponentPreRender(instance, next, optimized);\n        } else {\n          next = vnode;\n        }\n        if (bu) {\n          invokeArrayFns(bu);\n        }\n        if (vnodeHook = next.props && next.props.onVnodeBeforeUpdate) {\n          invokeVNodeHook(vnodeHook, parent, next, vnode);\n        }\n        toggleRecurse(instance, true);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `render`);\n        }\n        const nextTree = renderComponentRoot(instance);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `render`);\n        }\n        const prevTree = instance.subTree;\n        instance.subTree = nextTree;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `patch`);\n        }\n        patch(\n          prevTree,\n          nextTree,\n          // parent may have changed if it's in a teleport\n          hostParentNode(prevTree.el),\n          // anchor may have changed if it's in a fragment\n          getNextHostNode(prevTree),\n          instance,\n          parentSuspense,\n          namespace\n        );\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `patch`);\n        }\n        next.el = nextTree.el;\n        if (originNext === null) {\n          updateHOCHostEl(instance, nextTree.el);\n        }\n        if (u) {\n          queuePostRenderEffect(u, parentSuspense);\n        }\n        if (vnodeHook = next.props && next.props.onVnodeUpdated) {\n          queuePostRenderEffect(\n            () => invokeVNodeHook(vnodeHook, parent, next, vnode),\n            parentSuspense\n          );\n        }\n        if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n          devtoolsComponentUpdated(instance);\n        }\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n      }\n    };\n    instance.scope.on();\n    const effect = instance.effect = new ReactiveEffect(componentUpdateFn);\n    instance.scope.off();\n    const update = instance.update = effect.run.bind(effect);\n    const job = instance.job = effect.runIfDirty.bind(effect);\n    job.i = instance;\n    job.id = instance.uid;\n    effect.scheduler = () => queueJob(job);\n    toggleRecurse(instance, true);\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      effect.onTrack = instance.rtc ? (e) => invokeArrayFns(instance.rtc, e) : void 0;\n      effect.onTrigger = instance.rtg ? (e) => invokeArrayFns(instance.rtg, e) : void 0;\n    }\n    update();\n  };\n  const updateComponentPreRender = (instance, nextVNode, optimized) => {\n    nextVNode.component = instance;\n    const prevProps = instance.vnode.props;\n    instance.vnode = nextVNode;\n    instance.next = null;\n    updateProps(instance, nextVNode.props, prevProps, optimized);\n    updateSlots(instance, nextVNode.children, optimized);\n    pauseTracking();\n    flushPreFlushCbs(instance);\n    resetTracking();\n  };\n  const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized = false) => {\n    const c1 = n1 && n1.children;\n    const prevShapeFlag = n1 ? n1.shapeFlag : 0;\n    const c2 = n2.children;\n    const { patchFlag, shapeFlag } = n2;\n    if (patchFlag > 0) {\n      if (patchFlag & 128) {\n        patchKeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        return;\n      } else if (patchFlag & 256) {\n        patchUnkeyedChildren(\n          c1,\n          c2,\n          container,\n          anchor,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        return;\n      }\n    }\n    if (shapeFlag & 8) {\n      if (prevShapeFlag & 16) {\n        unmountChildren(c1, parentComponent, parentSuspense);\n      }\n      if (c2 !== c1) {\n        hostSetElementText(container, c2);\n      }\n    } else {\n      if (prevShapeFlag & 16) {\n        if (shapeFlag & 16) {\n          patchKeyedChildren(\n            c1,\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else {\n          unmountChildren(c1, parentComponent, parentSuspense, true);\n        }\n      } else {\n        if (prevShapeFlag & 8) {\n          hostSetElementText(container, \"\");\n        }\n        if (shapeFlag & 16) {\n          mountChildren(\n            c2,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        }\n      }\n    }\n  };\n  const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    c1 = c1 || EMPTY_ARR;\n    c2 = c2 || EMPTY_ARR;\n    const oldLength = c1.length;\n    const newLength = c2.length;\n    const commonLength = Math.min(oldLength, newLength);\n    let i;\n    for (i = 0; i < commonLength; i++) {\n      const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n      patch(\n        c1[i],\n        nextChild,\n        container,\n        null,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n    }\n    if (oldLength > newLength) {\n      unmountChildren(\n        c1,\n        parentComponent,\n        parentSuspense,\n        true,\n        false,\n        commonLength\n      );\n    } else {\n      mountChildren(\n        c2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized,\n        commonLength\n      );\n    }\n  };\n  const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized) => {\n    let i = 0;\n    const l2 = c2.length;\n    let e1 = c1.length - 1;\n    let e2 = l2 - 1;\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[i];\n      const n2 = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n      if (isSameVNodeType(n1, n2)) {\n        patch(\n          n1,\n          n2,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      } else {\n        break;\n      }\n      i++;\n    }\n    while (i <= e1 && i <= e2) {\n      const n1 = c1[e1];\n      const n2 = c2[e2] = optimized ? cloneIfMounted(c2[e2]) : normalizeVNode(c2[e2]);\n      if (isSameVNodeType(n1, n2)) {\n        patch(\n          n1,\n          n2,\n          container,\n          null,\n          parentComponent,\n          parentSuspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n      } else {\n        break;\n      }\n      e1--;\n      e2--;\n    }\n    if (i > e1) {\n      if (i <= e2) {\n        const nextPos = e2 + 1;\n        const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;\n        while (i <= e2) {\n          patch(\n            null,\n            c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]),\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          i++;\n        }\n      }\n    } else if (i > e2) {\n      while (i <= e1) {\n        unmount(c1[i], parentComponent, parentSuspense, true);\n        i++;\n      }\n    } else {\n      const s1 = i;\n      const s2 = i;\n      const keyToNewIndexMap = /* @__PURE__ */ new Map();\n      for (i = s2; i <= e2; i++) {\n        const nextChild = c2[i] = optimized ? cloneIfMounted(c2[i]) : normalizeVNode(c2[i]);\n        if (nextChild.key != null) {\n          if (!!(process.env.NODE_ENV !== \"production\") && keyToNewIndexMap.has(nextChild.key)) {\n            warn$1(\n              `Duplicate keys found during update:`,\n              JSON.stringify(nextChild.key),\n              `Make sure keys are unique.`\n            );\n          }\n          keyToNewIndexMap.set(nextChild.key, i);\n        }\n      }\n      let j;\n      let patched = 0;\n      const toBePatched = e2 - s2 + 1;\n      let moved = false;\n      let maxNewIndexSoFar = 0;\n      const newIndexToOldIndexMap = new Array(toBePatched);\n      for (i = 0; i < toBePatched; i++) newIndexToOldIndexMap[i] = 0;\n      for (i = s1; i <= e1; i++) {\n        const prevChild = c1[i];\n        if (patched >= toBePatched) {\n          unmount(prevChild, parentComponent, parentSuspense, true);\n          continue;\n        }\n        let newIndex;\n        if (prevChild.key != null) {\n          newIndex = keyToNewIndexMap.get(prevChild.key);\n        } else {\n          for (j = s2; j <= e2; j++) {\n            if (newIndexToOldIndexMap[j - s2] === 0 && isSameVNodeType(prevChild, c2[j])) {\n              newIndex = j;\n              break;\n            }\n          }\n        }\n        if (newIndex === void 0) {\n          unmount(prevChild, parentComponent, parentSuspense, true);\n        } else {\n          newIndexToOldIndexMap[newIndex - s2] = i + 1;\n          if (newIndex >= maxNewIndexSoFar) {\n            maxNewIndexSoFar = newIndex;\n          } else {\n            moved = true;\n          }\n          patch(\n            prevChild,\n            c2[newIndex],\n            container,\n            null,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          patched++;\n        }\n      }\n      const increasingNewIndexSequence = moved ? getSequence(newIndexToOldIndexMap) : EMPTY_ARR;\n      j = increasingNewIndexSequence.length - 1;\n      for (i = toBePatched - 1; i >= 0; i--) {\n        const nextIndex = s2 + i;\n        const nextChild = c2[nextIndex];\n        const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;\n        if (newIndexToOldIndexMap[i] === 0) {\n          patch(\n            null,\n            nextChild,\n            container,\n            anchor,\n            parentComponent,\n            parentSuspense,\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n        } else if (moved) {\n          if (j < 0 || i !== increasingNewIndexSequence[j]) {\n            move(nextChild, container, anchor, 2);\n          } else {\n            j--;\n          }\n        }\n      }\n    }\n  };\n  const move = (vnode, container, anchor, moveType, parentSuspense = null) => {\n    const { el, type, transition, children, shapeFlag } = vnode;\n    if (shapeFlag & 6) {\n      move(vnode.component.subTree, container, anchor, moveType);\n      return;\n    }\n    if (shapeFlag & 128) {\n      vnode.suspense.move(container, anchor, moveType);\n      return;\n    }\n    if (shapeFlag & 64) {\n      type.move(vnode, container, anchor, internals);\n      return;\n    }\n    if (type === Fragment) {\n      hostInsert(el, container, anchor);\n      for (let i = 0; i < children.length; i++) {\n        move(children[i], container, anchor, moveType);\n      }\n      hostInsert(vnode.anchor, container, anchor);\n      return;\n    }\n    if (type === Static) {\n      moveStaticNode(vnode, container, anchor);\n      return;\n    }\n    const needTransition2 = moveType !== 2 && shapeFlag & 1 && transition;\n    if (needTransition2) {\n      if (moveType === 0) {\n        transition.beforeEnter(el);\n        hostInsert(el, container, anchor);\n        queuePostRenderEffect(() => transition.enter(el), parentSuspense);\n      } else {\n        const { leave, delayLeave, afterLeave } = transition;\n        const remove2 = () => hostInsert(el, container, anchor);\n        const performLeave = () => {\n          leave(el, () => {\n            remove2();\n            afterLeave && afterLeave();\n          });\n        };\n        if (delayLeave) {\n          delayLeave(el, remove2, performLeave);\n        } else {\n          performLeave();\n        }\n      }\n    } else {\n      hostInsert(el, container, anchor);\n    }\n  };\n  const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {\n    const {\n      type,\n      props,\n      ref,\n      children,\n      dynamicChildren,\n      shapeFlag,\n      patchFlag,\n      dirs,\n      cacheIndex\n    } = vnode;\n    if (patchFlag === -2) {\n      optimized = false;\n    }\n    if (ref != null) {\n      setRef(ref, null, parentSuspense, vnode, true);\n    }\n    if (cacheIndex != null) {\n      parentComponent.renderCache[cacheIndex] = void 0;\n    }\n    if (shapeFlag & 256) {\n      parentComponent.ctx.deactivate(vnode);\n      return;\n    }\n    const shouldInvokeDirs = shapeFlag & 1 && dirs;\n    const shouldInvokeVnodeHook = !isAsyncWrapper(vnode);\n    let vnodeHook;\n    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeBeforeUnmount)) {\n      invokeVNodeHook(vnodeHook, parentComponent, vnode);\n    }\n    if (shapeFlag & 6) {\n      unmountComponent(vnode.component, parentSuspense, doRemove);\n    } else {\n      if (shapeFlag & 128) {\n        vnode.suspense.unmount(parentSuspense, doRemove);\n        return;\n      }\n      if (shouldInvokeDirs) {\n        invokeDirectiveHook(vnode, null, parentComponent, \"beforeUnmount\");\n      }\n      if (shapeFlag & 64) {\n        vnode.type.remove(\n          vnode,\n          parentComponent,\n          parentSuspense,\n          internals,\n          doRemove\n        );\n      } else if (dynamicChildren && // #5154\n      // when v-once is used inside a block, setBlockTracking(-1) marks the\n      // parent block with hasOnce: true\n      // so that it doesn't take the fast path during unmount - otherwise\n      // components nested in v-once are never unmounted.\n      !dynamicChildren.hasOnce && // #1153: fast path should not be taken for non-stable (v-for) fragments\n      (type !== Fragment || patchFlag > 0 && patchFlag & 64)) {\n        unmountChildren(\n          dynamicChildren,\n          parentComponent,\n          parentSuspense,\n          false,\n          true\n        );\n      } else if (type === Fragment && patchFlag & (128 | 256) || !optimized && shapeFlag & 16) {\n        unmountChildren(children, parentComponent, parentSuspense);\n      }\n      if (doRemove) {\n        remove(vnode);\n      }\n    }\n    if (shouldInvokeVnodeHook && (vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {\n      queuePostRenderEffect(() => {\n        vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\n        shouldInvokeDirs && invokeDirectiveHook(vnode, null, parentComponent, \"unmounted\");\n      }, parentSuspense);\n    }\n  };\n  const remove = (vnode) => {\n    const { type, el, anchor, transition } = vnode;\n    if (type === Fragment) {\n      if (!!(process.env.NODE_ENV !== \"production\") && vnode.patchFlag > 0 && vnode.patchFlag & 2048 && transition && !transition.persisted) {\n        vnode.children.forEach((child) => {\n          if (child.type === Comment) {\n            hostRemove(child.el);\n          } else {\n            remove(child);\n          }\n        });\n      } else {\n        removeFragment(el, anchor);\n      }\n      return;\n    }\n    if (type === Static) {\n      removeStaticNode(vnode);\n      return;\n    }\n    const performRemove = () => {\n      hostRemove(el);\n      if (transition && !transition.persisted && transition.afterLeave) {\n        transition.afterLeave();\n      }\n    };\n    if (vnode.shapeFlag & 1 && transition && !transition.persisted) {\n      const { leave, delayLeave } = transition;\n      const performLeave = () => leave(el, performRemove);\n      if (delayLeave) {\n        delayLeave(vnode.el, performRemove, performLeave);\n      } else {\n        performLeave();\n      }\n    } else {\n      performRemove();\n    }\n  };\n  const removeFragment = (cur, end) => {\n    let next;\n    while (cur !== end) {\n      next = hostNextSibling(cur);\n      hostRemove(cur);\n      cur = next;\n    }\n    hostRemove(end);\n  };\n  const unmountComponent = (instance, parentSuspense, doRemove) => {\n    if (!!(process.env.NODE_ENV !== \"production\") && instance.type.__hmrId) {\n      unregisterHMR(instance);\n    }\n    const { bum, scope, job, subTree, um, m, a } = instance;\n    invalidateMount(m);\n    invalidateMount(a);\n    if (bum) {\n      invokeArrayFns(bum);\n    }\n    scope.stop();\n    if (job) {\n      job.flags |= 8;\n      unmount(subTree, instance, parentSuspense, doRemove);\n    }\n    if (um) {\n      queuePostRenderEffect(um, parentSuspense);\n    }\n    queuePostRenderEffect(() => {\n      instance.isUnmounted = true;\n    }, parentSuspense);\n    if (parentSuspense && parentSuspense.pendingBranch && !parentSuspense.isUnmounted && instance.asyncDep && !instance.asyncResolved && instance.suspenseId === parentSuspense.pendingId) {\n      parentSuspense.deps--;\n      if (parentSuspense.deps === 0) {\n        parentSuspense.resolve();\n      }\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      devtoolsComponentRemoved(instance);\n    }\n  };\n  const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {\n    for (let i = start; i < children.length; i++) {\n      unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);\n    }\n  };\n  const getNextHostNode = (vnode) => {\n    if (vnode.shapeFlag & 6) {\n      return getNextHostNode(vnode.component.subTree);\n    }\n    if (vnode.shapeFlag & 128) {\n      return vnode.suspense.next();\n    }\n    const el = hostNextSibling(vnode.anchor || vnode.el);\n    const teleportEnd = el && el[TeleportEndKey];\n    return teleportEnd ? hostNextSibling(teleportEnd) : el;\n  };\n  let isFlushing = false;\n  const render = (vnode, container, namespace) => {\n    if (vnode == null) {\n      if (container._vnode) {\n        unmount(container._vnode, null, null, true);\n      }\n    } else {\n      patch(\n        container._vnode || null,\n        vnode,\n        container,\n        null,\n        null,\n        null,\n        namespace\n      );\n    }\n    container._vnode = vnode;\n    if (!isFlushing) {\n      isFlushing = true;\n      flushPreFlushCbs();\n      flushPostFlushCbs();\n      isFlushing = false;\n    }\n  };\n  const internals = {\n    p: patch,\n    um: unmount,\n    m: move,\n    r: remove,\n    mt: mountComponent,\n    mc: mountChildren,\n    pc: patchChildren,\n    pbc: patchBlockChildren,\n    n: getNextHostNode,\n    o: options\n  };\n  let hydrate;\n  let hydrateNode;\n  if (createHydrationFns) {\n    [hydrate, hydrateNode] = createHydrationFns(\n      internals\n    );\n  }\n  return {\n    render,\n    hydrate,\n    createApp: createAppAPI(render, hydrate)\n  };\n}\nfunction resolveChildrenNamespace({ type, props }, currentNamespace) {\n  return currentNamespace === \"svg\" && type === \"foreignObject\" || currentNamespace === \"mathml\" && type === \"annotation-xml\" && props && props.encoding && props.encoding.includes(\"html\") ? void 0 : currentNamespace;\n}\nfunction toggleRecurse({ effect, job }, allowed) {\n  if (allowed) {\n    effect.flags |= 32;\n    job.flags |= 4;\n  } else {\n    effect.flags &= ~32;\n    job.flags &= ~4;\n  }\n}\nfunction needTransition(parentSuspense, transition) {\n  return (!parentSuspense || parentSuspense && !parentSuspense.pendingBranch) && transition && !transition.persisted;\n}\nfunction traverseStaticChildren(n1, n2, shallow = false) {\n  const ch1 = n1.children;\n  const ch2 = n2.children;\n  if (isArray(ch1) && isArray(ch2)) {\n    for (let i = 0; i < ch1.length; i++) {\n      const c1 = ch1[i];\n      let c2 = ch2[i];\n      if (c2.shapeFlag & 1 && !c2.dynamicChildren) {\n        if (c2.patchFlag <= 0 || c2.patchFlag === 32) {\n          c2 = ch2[i] = cloneIfMounted(ch2[i]);\n          c2.el = c1.el;\n        }\n        if (!shallow && c2.patchFlag !== -2)\n          traverseStaticChildren(c1, c2);\n      }\n      if (c2.type === Text) {\n        c2.el = c1.el;\n      }\n      if (!!(process.env.NODE_ENV !== \"production\") && c2.type === Comment && !c2.el) {\n        c2.el = c1.el;\n      }\n    }\n  }\n}\nfunction getSequence(arr) {\n  const p = arr.slice();\n  const result = [0];\n  let i, j, u, v, c;\n  const len = arr.length;\n  for (i = 0; i < len; i++) {\n    const arrI = arr[i];\n    if (arrI !== 0) {\n      j = result[result.length - 1];\n      if (arr[j] < arrI) {\n        p[i] = j;\n        result.push(i);\n        continue;\n      }\n      u = 0;\n      v = result.length - 1;\n      while (u < v) {\n        c = u + v >> 1;\n        if (arr[result[c]] < arrI) {\n          u = c + 1;\n        } else {\n          v = c;\n        }\n      }\n      if (arrI < arr[result[u]]) {\n        if (u > 0) {\n          p[i] = result[u - 1];\n        }\n        result[u] = i;\n      }\n    }\n  }\n  u = result.length;\n  v = result[u - 1];\n  while (u-- > 0) {\n    result[u] = v;\n    v = p[v];\n  }\n  return result;\n}\nfunction locateNonHydratedAsyncRoot(instance) {\n  const subComponent = instance.subTree.component;\n  if (subComponent) {\n    if (subComponent.asyncDep && !subComponent.asyncResolved) {\n      return subComponent;\n    } else {\n      return locateNonHydratedAsyncRoot(subComponent);\n    }\n  }\n}\nfunction invalidateMount(hooks) {\n  if (hooks) {\n    for (let i = 0; i < hooks.length; i++)\n      hooks[i].flags |= 8;\n  }\n}\n\nconst ssrContextKey = Symbol.for(\"v-scx\");\nconst useSSRContext = () => {\n  {\n    const ctx = inject(ssrContextKey);\n    if (!ctx) {\n      !!(process.env.NODE_ENV !== \"production\") && warn$1(\n        `Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build.`\n      );\n    }\n    return ctx;\n  }\n};\n\nfunction watchEffect(effect, options) {\n  return doWatch(effect, null, options);\n}\nfunction watchPostEffect(effect, options) {\n  return doWatch(\n    effect,\n    null,\n    !!(process.env.NODE_ENV !== \"production\") ? extend({}, options, { flush: \"post\" }) : { flush: \"post\" }\n  );\n}\nfunction watchSyncEffect(effect, options) {\n  return doWatch(\n    effect,\n    null,\n    !!(process.env.NODE_ENV !== \"production\") ? extend({}, options, { flush: \"sync\" }) : { flush: \"sync\" }\n  );\n}\nfunction watch(source, cb, options) {\n  if (!!(process.env.NODE_ENV !== \"production\") && !isFunction(cb)) {\n    warn$1(\n      `\\`watch(fn, options?)\\` signature has been moved to a separate API. Use \\`watchEffect(fn, options?)\\` instead. \\`watch\\` now only supports \\`watch(source, cb, options?) signature.`\n    );\n  }\n  return doWatch(source, cb, options);\n}\nfunction doWatch(source, cb, options = EMPTY_OBJ) {\n  const { immediate, deep, flush, once } = options;\n  if (!!(process.env.NODE_ENV !== \"production\") && !cb) {\n    if (immediate !== void 0) {\n      warn$1(\n        `watch() \"immediate\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n    if (deep !== void 0) {\n      warn$1(\n        `watch() \"deep\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n    if (once !== void 0) {\n      warn$1(\n        `watch() \"once\" option is only respected when using the watch(source, callback, options?) signature.`\n      );\n    }\n  }\n  const baseWatchOptions = extend({}, options);\n  if (!!(process.env.NODE_ENV !== \"production\")) baseWatchOptions.onWarn = warn$1;\n  const runsImmediately = cb && immediate || !cb && flush !== \"post\";\n  let ssrCleanup;\n  if (isInSSRComponentSetup) {\n    if (flush === \"sync\") {\n      const ctx = useSSRContext();\n      ssrCleanup = ctx.__watcherHandles || (ctx.__watcherHandles = []);\n    } else if (!runsImmediately) {\n      const watchStopHandle = () => {\n      };\n      watchStopHandle.stop = NOOP;\n      watchStopHandle.resume = NOOP;\n      watchStopHandle.pause = NOOP;\n      return watchStopHandle;\n    }\n  }\n  const instance = currentInstance;\n  baseWatchOptions.call = (fn, type, args) => callWithAsyncErrorHandling(fn, instance, type, args);\n  let isPre = false;\n  if (flush === \"post\") {\n    baseWatchOptions.scheduler = (job) => {\n      queuePostRenderEffect(job, instance && instance.suspense);\n    };\n  } else if (flush !== \"sync\") {\n    isPre = true;\n    baseWatchOptions.scheduler = (job, isFirstRun) => {\n      if (isFirstRun) {\n        job();\n      } else {\n        queueJob(job);\n      }\n    };\n  }\n  baseWatchOptions.augmentJob = (job) => {\n    if (cb) {\n      job.flags |= 4;\n    }\n    if (isPre) {\n      job.flags |= 2;\n      if (instance) {\n        job.id = instance.uid;\n        job.i = instance;\n      }\n    }\n  };\n  const watchHandle = watch$1(source, cb, baseWatchOptions);\n  if (isInSSRComponentSetup) {\n    if (ssrCleanup) {\n      ssrCleanup.push(watchHandle);\n    } else if (runsImmediately) {\n      watchHandle();\n    }\n  }\n  return watchHandle;\n}\nfunction instanceWatch(source, value, options) {\n  const publicThis = this.proxy;\n  const getter = isString(source) ? source.includes(\".\") ? createPathGetter(publicThis, source) : () => publicThis[source] : source.bind(publicThis, publicThis);\n  let cb;\n  if (isFunction(value)) {\n    cb = value;\n  } else {\n    cb = value.handler;\n    options = value;\n  }\n  const reset = setCurrentInstance(this);\n  const res = doWatch(getter, cb.bind(publicThis), options);\n  reset();\n  return res;\n}\nfunction createPathGetter(ctx, path) {\n  const segments = path.split(\".\");\n  return () => {\n    let cur = ctx;\n    for (let i = 0; i < segments.length && cur; i++) {\n      cur = cur[segments[i]];\n    }\n    return cur;\n  };\n}\n\nfunction useModel(props, name, options = EMPTY_OBJ) {\n  const i = getCurrentInstance();\n  if (!!(process.env.NODE_ENV !== \"production\") && !i) {\n    warn$1(`useModel() called without active instance.`);\n    return ref();\n  }\n  const camelizedName = camelize(name);\n  if (!!(process.env.NODE_ENV !== \"production\") && !i.propsOptions[0][camelizedName]) {\n    warn$1(`useModel() called with prop \"${name}\" which is not declared.`);\n    return ref();\n  }\n  const hyphenatedName = hyphenate(name);\n  const modifiers = getModelModifiers(props, camelizedName);\n  const res = customRef((track, trigger) => {\n    let localValue;\n    let prevSetValue = EMPTY_OBJ;\n    let prevEmittedValue;\n    watchSyncEffect(() => {\n      const propValue = props[camelizedName];\n      if (hasChanged(localValue, propValue)) {\n        localValue = propValue;\n        trigger();\n      }\n    });\n    return {\n      get() {\n        track();\n        return options.get ? options.get(localValue) : localValue;\n      },\n      set(value) {\n        const emittedValue = options.set ? options.set(value) : value;\n        if (!hasChanged(emittedValue, localValue) && !(prevSetValue !== EMPTY_OBJ && hasChanged(value, prevSetValue))) {\n          return;\n        }\n        const rawProps = i.vnode.props;\n        if (!(rawProps && // check if parent has passed v-model\n        (name in rawProps || camelizedName in rawProps || hyphenatedName in rawProps) && (`onUpdate:${name}` in rawProps || `onUpdate:${camelizedName}` in rawProps || `onUpdate:${hyphenatedName}` in rawProps))) {\n          localValue = value;\n          trigger();\n        }\n        i.emit(`update:${name}`, emittedValue);\n        if (hasChanged(value, emittedValue) && hasChanged(value, prevSetValue) && !hasChanged(emittedValue, prevEmittedValue)) {\n          trigger();\n        }\n        prevSetValue = value;\n        prevEmittedValue = emittedValue;\n      }\n    };\n  });\n  res[Symbol.iterator] = () => {\n    let i2 = 0;\n    return {\n      next() {\n        if (i2 < 2) {\n          return { value: i2++ ? modifiers || EMPTY_OBJ : res, done: false };\n        } else {\n          return { done: true };\n        }\n      }\n    };\n  };\n  return res;\n}\nconst getModelModifiers = (props, modelName) => {\n  return modelName === \"modelValue\" || modelName === \"model-value\" ? props.modelModifiers : props[`${modelName}Modifiers`] || props[`${camelize(modelName)}Modifiers`] || props[`${hyphenate(modelName)}Modifiers`];\n};\n\nfunction emit(instance, event, ...rawArgs) {\n  if (instance.isUnmounted) return;\n  const props = instance.vnode.props || EMPTY_OBJ;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const {\n      emitsOptions,\n      propsOptions: [propsOptions]\n    } = instance;\n    if (emitsOptions) {\n      if (!(event in emitsOptions) && true) {\n        if (!propsOptions || !(toHandlerKey(camelize(event)) in propsOptions)) {\n          warn$1(\n            `Component emitted event \"${event}\" but it is neither declared in the emits option nor as an \"${toHandlerKey(camelize(event))}\" prop.`\n          );\n        }\n      } else {\n        const validator = emitsOptions[event];\n        if (isFunction(validator)) {\n          const isValid = validator(...rawArgs);\n          if (!isValid) {\n            warn$1(\n              `Invalid event arguments: event validation failed for event \"${event}\".`\n            );\n          }\n        }\n      }\n    }\n  }\n  let args = rawArgs;\n  const isModelListener = event.startsWith(\"update:\");\n  const modifiers = isModelListener && getModelModifiers(props, event.slice(7));\n  if (modifiers) {\n    if (modifiers.trim) {\n      args = rawArgs.map((a) => isString(a) ? a.trim() : a);\n    }\n    if (modifiers.number) {\n      args = rawArgs.map(looseToNumber);\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n    devtoolsComponentEmit(instance, event, args);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const lowerCaseEvent = event.toLowerCase();\n    if (lowerCaseEvent !== event && props[toHandlerKey(lowerCaseEvent)]) {\n      warn$1(\n        `Event \"${lowerCaseEvent}\" is emitted in component ${formatComponentName(\n          instance,\n          instance.type\n        )} but the handler is registered for \"${event}\". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use \"${hyphenate(\n          event\n        )}\" instead of \"${event}\".`\n      );\n    }\n  }\n  let handlerName;\n  let handler = props[handlerName = toHandlerKey(event)] || // also try camelCase event handler (#2249)\n  props[handlerName = toHandlerKey(camelize(event))];\n  if (!handler && isModelListener) {\n    handler = props[handlerName = toHandlerKey(hyphenate(event))];\n  }\n  if (handler) {\n    callWithAsyncErrorHandling(\n      handler,\n      instance,\n      6,\n      args\n    );\n  }\n  const onceHandler = props[handlerName + `Once`];\n  if (onceHandler) {\n    if (!instance.emitted) {\n      instance.emitted = {};\n    } else if (instance.emitted[handlerName]) {\n      return;\n    }\n    instance.emitted[handlerName] = true;\n    callWithAsyncErrorHandling(\n      onceHandler,\n      instance,\n      6,\n      args\n    );\n  }\n}\nfunction normalizeEmitsOptions(comp, appContext, asMixin = false) {\n  const cache = appContext.emitsCache;\n  const cached = cache.get(comp);\n  if (cached !== void 0) {\n    return cached;\n  }\n  const raw = comp.emits;\n  let normalized = {};\n  let hasExtends = false;\n  if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\n    const extendEmits = (raw2) => {\n      const normalizedFromExtend = normalizeEmitsOptions(raw2, appContext, true);\n      if (normalizedFromExtend) {\n        hasExtends = true;\n        extend(normalized, normalizedFromExtend);\n      }\n    };\n    if (!asMixin && appContext.mixins.length) {\n      appContext.mixins.forEach(extendEmits);\n    }\n    if (comp.extends) {\n      extendEmits(comp.extends);\n    }\n    if (comp.mixins) {\n      comp.mixins.forEach(extendEmits);\n    }\n  }\n  if (!raw && !hasExtends) {\n    if (isObject(comp)) {\n      cache.set(comp, null);\n    }\n    return null;\n  }\n  if (isArray(raw)) {\n    raw.forEach((key) => normalized[key] = null);\n  } else {\n    extend(normalized, raw);\n  }\n  if (isObject(comp)) {\n    cache.set(comp, normalized);\n  }\n  return normalized;\n}\nfunction isEmitListener(options, key) {\n  if (!options || !isOn(key)) {\n    return false;\n  }\n  key = key.slice(2).replace(/Once$/, \"\");\n  return hasOwn(options, key[0].toLowerCase() + key.slice(1)) || hasOwn(options, hyphenate(key)) || hasOwn(options, key);\n}\n\nlet accessedAttrs = false;\nfunction markAttrsAccessed() {\n  accessedAttrs = true;\n}\nfunction renderComponentRoot(instance) {\n  const {\n    type: Component,\n    vnode,\n    proxy,\n    withProxy,\n    propsOptions: [propsOptions],\n    slots,\n    attrs,\n    emit,\n    render,\n    renderCache,\n    props,\n    data,\n    setupState,\n    ctx,\n    inheritAttrs\n  } = instance;\n  const prev = setCurrentRenderingInstance(instance);\n  let result;\n  let fallthroughAttrs;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    accessedAttrs = false;\n  }\n  try {\n    if (vnode.shapeFlag & 4) {\n      const proxyToUse = withProxy || proxy;\n      const thisProxy = !!(process.env.NODE_ENV !== \"production\") && setupState.__isScriptSetup ? new Proxy(proxyToUse, {\n        get(target, key, receiver) {\n          warn$1(\n            `Property '${String(\n              key\n            )}' was accessed via 'this'. Avoid using 'this' in templates.`\n          );\n          return Reflect.get(target, key, receiver);\n        }\n      }) : proxyToUse;\n      result = normalizeVNode(\n        render.call(\n          thisProxy,\n          proxyToUse,\n          renderCache,\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          setupState,\n          data,\n          ctx\n        )\n      );\n      fallthroughAttrs = attrs;\n    } else {\n      const render2 = Component;\n      if (!!(process.env.NODE_ENV !== \"production\") && attrs === props) {\n        markAttrsAccessed();\n      }\n      result = normalizeVNode(\n        render2.length > 1 ? render2(\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          !!(process.env.NODE_ENV !== \"production\") ? {\n            get attrs() {\n              markAttrsAccessed();\n              return shallowReadonly(attrs);\n            },\n            slots,\n            emit\n          } : { attrs, slots, emit }\n        ) : render2(\n          !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(props) : props,\n          null\n        )\n      );\n      fallthroughAttrs = Component.props ? attrs : getFunctionalFallthrough(attrs);\n    }\n  } catch (err) {\n    blockStack.length = 0;\n    handleError(err, instance, 1);\n    result = createVNode(Comment);\n  }\n  let root = result;\n  let setRoot = void 0;\n  if (!!(process.env.NODE_ENV !== \"production\") && result.patchFlag > 0 && result.patchFlag & 2048) {\n    [root, setRoot] = getChildRoot(result);\n  }\n  if (fallthroughAttrs && inheritAttrs !== false) {\n    const keys = Object.keys(fallthroughAttrs);\n    const { shapeFlag } = root;\n    if (keys.length) {\n      if (shapeFlag & (1 | 6)) {\n        if (propsOptions && keys.some(isModelListener)) {\n          fallthroughAttrs = filterModelListeners(\n            fallthroughAttrs,\n            propsOptions\n          );\n        }\n        root = cloneVNode(root, fallthroughAttrs, false, true);\n      } else if (!!(process.env.NODE_ENV !== \"production\") && !accessedAttrs && root.type !== Comment) {\n        const allAttrs = Object.keys(attrs);\n        const eventAttrs = [];\n        const extraAttrs = [];\n        for (let i = 0, l = allAttrs.length; i < l; i++) {\n          const key = allAttrs[i];\n          if (isOn(key)) {\n            if (!isModelListener(key)) {\n              eventAttrs.push(key[2].toLowerCase() + key.slice(3));\n            }\n          } else {\n            extraAttrs.push(key);\n          }\n        }\n        if (extraAttrs.length) {\n          warn$1(\n            `Extraneous non-props attributes (${extraAttrs.join(\", \")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`\n          );\n        }\n        if (eventAttrs.length) {\n          warn$1(\n            `Extraneous non-emits event listeners (${eventAttrs.join(\", \")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the \"emits\" option.`\n          );\n        }\n      }\n    }\n  }\n  if (vnode.dirs) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isElementRoot(root)) {\n      warn$1(\n        `Runtime directive used on component with non-element root node. The directives will not function as intended.`\n      );\n    }\n    root = cloneVNode(root, null, false, true);\n    root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;\n  }\n  if (vnode.transition) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !isElementRoot(root)) {\n      warn$1(\n        `Component inside <Transition> renders non-element root node that cannot be animated.`\n      );\n    }\n    setTransitionHooks(root, vnode.transition);\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && setRoot) {\n    setRoot(root);\n  } else {\n    result = root;\n  }\n  setCurrentRenderingInstance(prev);\n  return result;\n}\nconst getChildRoot = (vnode) => {\n  const rawChildren = vnode.children;\n  const dynamicChildren = vnode.dynamicChildren;\n  const childRoot = filterSingleRoot(rawChildren, false);\n  if (!childRoot) {\n    return [vnode, void 0];\n  } else if (!!(process.env.NODE_ENV !== \"production\") && childRoot.patchFlag > 0 && childRoot.patchFlag & 2048) {\n    return getChildRoot(childRoot);\n  }\n  const index = rawChildren.indexOf(childRoot);\n  const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;\n  const setRoot = (updatedRoot) => {\n    rawChildren[index] = updatedRoot;\n    if (dynamicChildren) {\n      if (dynamicIndex > -1) {\n        dynamicChildren[dynamicIndex] = updatedRoot;\n      } else if (updatedRoot.patchFlag > 0) {\n        vnode.dynamicChildren = [...dynamicChildren, updatedRoot];\n      }\n    }\n  };\n  return [normalizeVNode(childRoot), setRoot];\n};\nfunction filterSingleRoot(children, recurse = true) {\n  let singleRoot;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (isVNode(child)) {\n      if (child.type !== Comment || child.children === \"v-if\") {\n        if (singleRoot) {\n          return;\n        } else {\n          singleRoot = child;\n          if (!!(process.env.NODE_ENV !== \"production\") && recurse && singleRoot.patchFlag > 0 && singleRoot.patchFlag & 2048) {\n            return filterSingleRoot(singleRoot.children);\n          }\n        }\n      }\n    } else {\n      return;\n    }\n  }\n  return singleRoot;\n}\nconst getFunctionalFallthrough = (attrs) => {\n  let res;\n  for (const key in attrs) {\n    if (key === \"class\" || key === \"style\" || isOn(key)) {\n      (res || (res = {}))[key] = attrs[key];\n    }\n  }\n  return res;\n};\nconst filterModelListeners = (attrs, props) => {\n  const res = {};\n  for (const key in attrs) {\n    if (!isModelListener(key) || !(key.slice(9) in props)) {\n      res[key] = attrs[key];\n    }\n  }\n  return res;\n};\nconst isElementRoot = (vnode) => {\n  return vnode.shapeFlag & (6 | 1) || vnode.type === Comment;\n};\nfunction shouldUpdateComponent(prevVNode, nextVNode, optimized) {\n  const { props: prevProps, children: prevChildren, component } = prevVNode;\n  const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;\n  const emits = component.emitsOptions;\n  if (!!(process.env.NODE_ENV !== \"production\") && (prevChildren || nextChildren) && isHmrUpdating) {\n    return true;\n  }\n  if (nextVNode.dirs || nextVNode.transition) {\n    return true;\n  }\n  if (optimized && patchFlag >= 0) {\n    if (patchFlag & 1024) {\n      return true;\n    }\n    if (patchFlag & 16) {\n      if (!prevProps) {\n        return !!nextProps;\n      }\n      return hasPropsChanged(prevProps, nextProps, emits);\n    } else if (patchFlag & 8) {\n      const dynamicProps = nextVNode.dynamicProps;\n      for (let i = 0; i < dynamicProps.length; i++) {\n        const key = dynamicProps[i];\n        if (nextProps[key] !== prevProps[key] && !isEmitListener(emits, key)) {\n          return true;\n        }\n      }\n    }\n  } else {\n    if (prevChildren || nextChildren) {\n      if (!nextChildren || !nextChildren.$stable) {\n        return true;\n      }\n    }\n    if (prevProps === nextProps) {\n      return false;\n    }\n    if (!prevProps) {\n      return !!nextProps;\n    }\n    if (!nextProps) {\n      return true;\n    }\n    return hasPropsChanged(prevProps, nextProps, emits);\n  }\n  return false;\n}\nfunction hasPropsChanged(prevProps, nextProps, emitsOptions) {\n  const nextKeys = Object.keys(nextProps);\n  if (nextKeys.length !== Object.keys(prevProps).length) {\n    return true;\n  }\n  for (let i = 0; i < nextKeys.length; i++) {\n    const key = nextKeys[i];\n    if (nextProps[key] !== prevProps[key] && !isEmitListener(emitsOptions, key)) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction updateHOCHostEl({ vnode, parent }, el) {\n  while (parent) {\n    const root = parent.subTree;\n    if (root.suspense && root.suspense.activeBranch === vnode) {\n      root.el = vnode.el;\n    }\n    if (root === vnode) {\n      (vnode = parent.vnode).el = el;\n      parent = parent.parent;\n    } else {\n      break;\n    }\n  }\n}\n\nconst isSuspense = (type) => type.__isSuspense;\nlet suspenseId = 0;\nconst SuspenseImpl = {\n  name: \"Suspense\",\n  // In order to make Suspense tree-shakable, we need to avoid importing it\n  // directly in the renderer. The renderer checks for the __isSuspense flag\n  // on a vnode's type and calls the `process` method, passing in renderer\n  // internals.\n  __isSuspense: true,\n  process(n1, n2, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals) {\n    if (n1 == null) {\n      mountSuspense(\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        parentSuspense,\n        namespace,\n        slotScopeIds,\n        optimized,\n        rendererInternals\n      );\n    } else {\n      if (parentSuspense && parentSuspense.deps > 0 && !n1.suspense.isInFallback) {\n        n2.suspense = n1.suspense;\n        n2.suspense.vnode = n2;\n        n2.el = n1.el;\n        return;\n      }\n      patchSuspense(\n        n1,\n        n2,\n        container,\n        anchor,\n        parentComponent,\n        namespace,\n        slotScopeIds,\n        optimized,\n        rendererInternals\n      );\n    }\n  },\n  hydrate: hydrateSuspense,\n  normalize: normalizeSuspenseChildren\n};\nconst Suspense = SuspenseImpl ;\nfunction triggerEvent(vnode, name) {\n  const eventListener = vnode.props && vnode.props[name];\n  if (isFunction(eventListener)) {\n    eventListener();\n  }\n}\nfunction mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals) {\n  const {\n    p: patch,\n    o: { createElement }\n  } = rendererInternals;\n  const hiddenContainer = createElement(\"div\");\n  const suspense = vnode.suspense = createSuspenseBoundary(\n    vnode,\n    parentSuspense,\n    parentComponent,\n    container,\n    hiddenContainer,\n    anchor,\n    namespace,\n    slotScopeIds,\n    optimized,\n    rendererInternals\n  );\n  patch(\n    null,\n    suspense.pendingBranch = vnode.ssContent,\n    hiddenContainer,\n    null,\n    parentComponent,\n    suspense,\n    namespace,\n    slotScopeIds\n  );\n  if (suspense.deps > 0) {\n    triggerEvent(vnode, \"onPending\");\n    triggerEvent(vnode, \"onFallback\");\n    patch(\n      null,\n      vnode.ssFallback,\n      container,\n      anchor,\n      parentComponent,\n      null,\n      // fallback tree will not have suspense context\n      namespace,\n      slotScopeIds\n    );\n    setActiveBranch(suspense, vnode.ssFallback);\n  } else {\n    suspense.resolve(false, true);\n  }\n}\nfunction patchSuspense(n1, n2, container, anchor, parentComponent, namespace, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement } }) {\n  const suspense = n2.suspense = n1.suspense;\n  suspense.vnode = n2;\n  n2.el = n1.el;\n  const newBranch = n2.ssContent;\n  const newFallback = n2.ssFallback;\n  const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;\n  if (pendingBranch) {\n    suspense.pendingBranch = newBranch;\n    if (isSameVNodeType(newBranch, pendingBranch)) {\n      patch(\n        pendingBranch,\n        newBranch,\n        suspense.hiddenContainer,\n        null,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      if (suspense.deps <= 0) {\n        suspense.resolve();\n      } else if (isInFallback) {\n        if (!isHydrating) {\n          patch(\n            activeBranch,\n            newFallback,\n            container,\n            anchor,\n            parentComponent,\n            null,\n            // fallback tree will not have suspense context\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          setActiveBranch(suspense, newFallback);\n        }\n      }\n    } else {\n      suspense.pendingId = suspenseId++;\n      if (isHydrating) {\n        suspense.isHydrating = false;\n        suspense.activeBranch = pendingBranch;\n      } else {\n        unmount(pendingBranch, parentComponent, suspense);\n      }\n      suspense.deps = 0;\n      suspense.effects.length = 0;\n      suspense.hiddenContainer = createElement(\"div\");\n      if (isInFallback) {\n        patch(\n          null,\n          newBranch,\n          suspense.hiddenContainer,\n          null,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        if (suspense.deps <= 0) {\n          suspense.resolve();\n        } else {\n          patch(\n            activeBranch,\n            newFallback,\n            container,\n            anchor,\n            parentComponent,\n            null,\n            // fallback tree will not have suspense context\n            namespace,\n            slotScopeIds,\n            optimized\n          );\n          setActiveBranch(suspense, newFallback);\n        }\n      } else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n        patch(\n          activeBranch,\n          newBranch,\n          container,\n          anchor,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        suspense.resolve(true);\n      } else {\n        patch(\n          null,\n          newBranch,\n          suspense.hiddenContainer,\n          null,\n          parentComponent,\n          suspense,\n          namespace,\n          slotScopeIds,\n          optimized\n        );\n        if (suspense.deps <= 0) {\n          suspense.resolve();\n        }\n      }\n    }\n  } else {\n    if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\n      patch(\n        activeBranch,\n        newBranch,\n        container,\n        anchor,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      setActiveBranch(suspense, newBranch);\n    } else {\n      triggerEvent(n2, \"onPending\");\n      suspense.pendingBranch = newBranch;\n      if (newBranch.shapeFlag & 512) {\n        suspense.pendingId = newBranch.component.suspenseId;\n      } else {\n        suspense.pendingId = suspenseId++;\n      }\n      patch(\n        null,\n        newBranch,\n        suspense.hiddenContainer,\n        null,\n        parentComponent,\n        suspense,\n        namespace,\n        slotScopeIds,\n        optimized\n      );\n      if (suspense.deps <= 0) {\n        suspense.resolve();\n      } else {\n        const { timeout, pendingId } = suspense;\n        if (timeout > 0) {\n          setTimeout(() => {\n            if (suspense.pendingId === pendingId) {\n              suspense.fallback(newFallback);\n            }\n          }, timeout);\n        } else if (timeout === 0) {\n          suspense.fallback(newFallback);\n        }\n      }\n    }\n  }\n}\nlet hasWarned = false;\nfunction createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, namespace, slotScopeIds, optimized, rendererInternals, isHydrating = false) {\n  if (!!(process.env.NODE_ENV !== \"production\") && true && !hasWarned) {\n    hasWarned = true;\n    console[console.info ? \"info\" : \"log\"](\n      `<Suspense> is an experimental feature and its API will likely change.`\n    );\n  }\n  const {\n    p: patch,\n    m: move,\n    um: unmount,\n    n: next,\n    o: { parentNode, remove }\n  } = rendererInternals;\n  let parentSuspenseId;\n  const isSuspensible = isVNodeSuspensible(vnode);\n  if (isSuspensible) {\n    if (parentSuspense && parentSuspense.pendingBranch) {\n      parentSuspenseId = parentSuspense.pendingId;\n      parentSuspense.deps++;\n    }\n  }\n  const timeout = vnode.props ? toNumber(vnode.props.timeout) : void 0;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    assertNumber(timeout, `Suspense timeout`);\n  }\n  const initialAnchor = anchor;\n  const suspense = {\n    vnode,\n    parent: parentSuspense,\n    parentComponent,\n    namespace,\n    container,\n    hiddenContainer,\n    deps: 0,\n    pendingId: suspenseId++,\n    timeout: typeof timeout === \"number\" ? timeout : -1,\n    activeBranch: null,\n    pendingBranch: null,\n    isInFallback: !isHydrating,\n    isHydrating,\n    isUnmounted: false,\n    effects: [],\n    resolve(resume = false, sync = false) {\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        if (!resume && !suspense.pendingBranch) {\n          throw new Error(\n            `suspense.resolve() is called without a pending branch.`\n          );\n        }\n        if (suspense.isUnmounted) {\n          throw new Error(\n            `suspense.resolve() is called on an already unmounted suspense boundary.`\n          );\n        }\n      }\n      const {\n        vnode: vnode2,\n        activeBranch,\n        pendingBranch,\n        pendingId,\n        effects,\n        parentComponent: parentComponent2,\n        container: container2\n      } = suspense;\n      let delayEnter = false;\n      if (suspense.isHydrating) {\n        suspense.isHydrating = false;\n      } else if (!resume) {\n        delayEnter = activeBranch && pendingBranch.transition && pendingBranch.transition.mode === \"out-in\";\n        if (delayEnter) {\n          activeBranch.transition.afterLeave = () => {\n            if (pendingId === suspense.pendingId) {\n              move(\n                pendingBranch,\n                container2,\n                anchor === initialAnchor ? next(activeBranch) : anchor,\n                0\n              );\n              queuePostFlushCb(effects);\n            }\n          };\n        }\n        if (activeBranch) {\n          if (parentNode(activeBranch.el) === container2) {\n            anchor = next(activeBranch);\n          }\n          unmount(activeBranch, parentComponent2, suspense, true);\n        }\n        if (!delayEnter) {\n          move(pendingBranch, container2, anchor, 0);\n        }\n      }\n      setActiveBranch(suspense, pendingBranch);\n      suspense.pendingBranch = null;\n      suspense.isInFallback = false;\n      let parent = suspense.parent;\n      let hasUnresolvedAncestor = false;\n      while (parent) {\n        if (parent.pendingBranch) {\n          parent.effects.push(...effects);\n          hasUnresolvedAncestor = true;\n          break;\n        }\n        parent = parent.parent;\n      }\n      if (!hasUnresolvedAncestor && !delayEnter) {\n        queuePostFlushCb(effects);\n      }\n      suspense.effects = [];\n      if (isSuspensible) {\n        if (parentSuspense && parentSuspense.pendingBranch && parentSuspenseId === parentSuspense.pendingId) {\n          parentSuspense.deps--;\n          if (parentSuspense.deps === 0 && !sync) {\n            parentSuspense.resolve();\n          }\n        }\n      }\n      triggerEvent(vnode2, \"onResolve\");\n    },\n    fallback(fallbackVNode) {\n      if (!suspense.pendingBranch) {\n        return;\n      }\n      const { vnode: vnode2, activeBranch, parentComponent: parentComponent2, container: container2, namespace: namespace2 } = suspense;\n      triggerEvent(vnode2, \"onFallback\");\n      const anchor2 = next(activeBranch);\n      const mountFallback = () => {\n        if (!suspense.isInFallback) {\n          return;\n        }\n        patch(\n          null,\n          fallbackVNode,\n          container2,\n          anchor2,\n          parentComponent2,\n          null,\n          // fallback tree will not have suspense context\n          namespace2,\n          slotScopeIds,\n          optimized\n        );\n        setActiveBranch(suspense, fallbackVNode);\n      };\n      const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === \"out-in\";\n      if (delayEnter) {\n        activeBranch.transition.afterLeave = mountFallback;\n      }\n      suspense.isInFallback = true;\n      unmount(\n        activeBranch,\n        parentComponent2,\n        null,\n        // no suspense so unmount hooks fire now\n        true\n        // shouldRemove\n      );\n      if (!delayEnter) {\n        mountFallback();\n      }\n    },\n    move(container2, anchor2, type) {\n      suspense.activeBranch && move(suspense.activeBranch, container2, anchor2, type);\n      suspense.container = container2;\n    },\n    next() {\n      return suspense.activeBranch && next(suspense.activeBranch);\n    },\n    registerDep(instance, setupRenderEffect, optimized2) {\n      const isInPendingSuspense = !!suspense.pendingBranch;\n      if (isInPendingSuspense) {\n        suspense.deps++;\n      }\n      const hydratedEl = instance.vnode.el;\n      instance.asyncDep.catch((err) => {\n        handleError(err, instance, 0);\n      }).then((asyncSetupResult) => {\n        if (instance.isUnmounted || suspense.isUnmounted || suspense.pendingId !== instance.suspenseId) {\n          return;\n        }\n        instance.asyncResolved = true;\n        const { vnode: vnode2 } = instance;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          pushWarningContext(vnode2);\n        }\n        handleSetupResult(instance, asyncSetupResult, false);\n        if (hydratedEl) {\n          vnode2.el = hydratedEl;\n        }\n        const placeholder = !hydratedEl && instance.subTree.el;\n        setupRenderEffect(\n          instance,\n          vnode2,\n          // component may have been moved before resolve.\n          // if this is not a hydration, instance.subTree will be the comment\n          // placeholder.\n          parentNode(hydratedEl || instance.subTree.el),\n          // anchor will not be used if this is hydration, so only need to\n          // consider the comment placeholder case.\n          hydratedEl ? null : next(instance.subTree),\n          suspense,\n          namespace,\n          optimized2\n        );\n        if (placeholder) {\n          remove(placeholder);\n        }\n        updateHOCHostEl(instance, vnode2.el);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          popWarningContext();\n        }\n        if (isInPendingSuspense && --suspense.deps === 0) {\n          suspense.resolve();\n        }\n      });\n    },\n    unmount(parentSuspense2, doRemove) {\n      suspense.isUnmounted = true;\n      if (suspense.activeBranch) {\n        unmount(\n          suspense.activeBranch,\n          parentComponent,\n          parentSuspense2,\n          doRemove\n        );\n      }\n      if (suspense.pendingBranch) {\n        unmount(\n          suspense.pendingBranch,\n          parentComponent,\n          parentSuspense2,\n          doRemove\n        );\n      }\n    }\n  };\n  return suspense;\n}\nfunction hydrateSuspense(node, vnode, parentComponent, parentSuspense, namespace, slotScopeIds, optimized, rendererInternals, hydrateNode) {\n  const suspense = vnode.suspense = createSuspenseBoundary(\n    vnode,\n    parentSuspense,\n    parentComponent,\n    node.parentNode,\n    // eslint-disable-next-line no-restricted-globals\n    document.createElement(\"div\"),\n    null,\n    namespace,\n    slotScopeIds,\n    optimized,\n    rendererInternals,\n    true\n  );\n  const result = hydrateNode(\n    node,\n    suspense.pendingBranch = vnode.ssContent,\n    parentComponent,\n    suspense,\n    slotScopeIds,\n    optimized\n  );\n  if (suspense.deps === 0) {\n    suspense.resolve(false, true);\n  }\n  return result;\n}\nfunction normalizeSuspenseChildren(vnode) {\n  const { shapeFlag, children } = vnode;\n  const isSlotChildren = shapeFlag & 32;\n  vnode.ssContent = normalizeSuspenseSlot(\n    isSlotChildren ? children.default : children\n  );\n  vnode.ssFallback = isSlotChildren ? normalizeSuspenseSlot(children.fallback) : createVNode(Comment);\n}\nfunction normalizeSuspenseSlot(s) {\n  let block;\n  if (isFunction(s)) {\n    const trackBlock = isBlockTreeEnabled && s._c;\n    if (trackBlock) {\n      s._d = false;\n      openBlock();\n    }\n    s = s();\n    if (trackBlock) {\n      s._d = true;\n      block = currentBlock;\n      closeBlock();\n    }\n  }\n  if (isArray(s)) {\n    const singleChild = filterSingleRoot(s);\n    if (!!(process.env.NODE_ENV !== \"production\") && !singleChild && s.filter((child) => child !== NULL_DYNAMIC_COMPONENT).length > 0) {\n      warn$1(`<Suspense> slots expect a single root node.`);\n    }\n    s = singleChild;\n  }\n  s = normalizeVNode(s);\n  if (block && !s.dynamicChildren) {\n    s.dynamicChildren = block.filter((c) => c !== s);\n  }\n  return s;\n}\nfunction queueEffectWithSuspense(fn, suspense) {\n  if (suspense && suspense.pendingBranch) {\n    if (isArray(fn)) {\n      suspense.effects.push(...fn);\n    } else {\n      suspense.effects.push(fn);\n    }\n  } else {\n    queuePostFlushCb(fn);\n  }\n}\nfunction setActiveBranch(suspense, branch) {\n  suspense.activeBranch = branch;\n  const { vnode, parentComponent } = suspense;\n  let el = branch.el;\n  while (!el && branch.component) {\n    branch = branch.component.subTree;\n    el = branch.el;\n  }\n  vnode.el = el;\n  if (parentComponent && parentComponent.subTree === vnode) {\n    parentComponent.vnode.el = el;\n    updateHOCHostEl(parentComponent, el);\n  }\n}\nfunction isVNodeSuspensible(vnode) {\n  const suspensible = vnode.props && vnode.props.suspensible;\n  return suspensible != null && suspensible !== false;\n}\n\nconst Fragment = Symbol.for(\"v-fgt\");\nconst Text = Symbol.for(\"v-txt\");\nconst Comment = Symbol.for(\"v-cmt\");\nconst Static = Symbol.for(\"v-stc\");\nconst blockStack = [];\nlet currentBlock = null;\nfunction openBlock(disableTracking = false) {\n  blockStack.push(currentBlock = disableTracking ? null : []);\n}\nfunction closeBlock() {\n  blockStack.pop();\n  currentBlock = blockStack[blockStack.length - 1] || null;\n}\nlet isBlockTreeEnabled = 1;\nfunction setBlockTracking(value, inVOnce = false) {\n  isBlockTreeEnabled += value;\n  if (value < 0 && currentBlock && inVOnce) {\n    currentBlock.hasOnce = true;\n  }\n}\nfunction setupBlock(vnode) {\n  vnode.dynamicChildren = isBlockTreeEnabled > 0 ? currentBlock || EMPTY_ARR : null;\n  closeBlock();\n  if (isBlockTreeEnabled > 0 && currentBlock) {\n    currentBlock.push(vnode);\n  }\n  return vnode;\n}\nfunction createElementBlock(type, props, children, patchFlag, dynamicProps, shapeFlag) {\n  return setupBlock(\n    createBaseVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      shapeFlag,\n      true\n    )\n  );\n}\nfunction createBlock(type, props, children, patchFlag, dynamicProps) {\n  return setupBlock(\n    createVNode(\n      type,\n      props,\n      children,\n      patchFlag,\n      dynamicProps,\n      true\n    )\n  );\n}\nfunction isVNode(value) {\n  return value ? value.__v_isVNode === true : false;\n}\nfunction isSameVNodeType(n1, n2) {\n  if (!!(process.env.NODE_ENV !== \"production\") && n2.shapeFlag & 6 && n1.component) {\n    const dirtyInstances = hmrDirtyComponents.get(n2.type);\n    if (dirtyInstances && dirtyInstances.has(n1.component)) {\n      n1.shapeFlag &= ~256;\n      n2.shapeFlag &= ~512;\n      return false;\n    }\n  }\n  return n1.type === n2.type && n1.key === n2.key;\n}\nlet vnodeArgsTransformer;\nfunction transformVNodeArgs(transformer) {\n  vnodeArgsTransformer = transformer;\n}\nconst createVNodeWithArgsTransform = (...args) => {\n  return _createVNode(\n    ...vnodeArgsTransformer ? vnodeArgsTransformer(args, currentRenderingInstance) : args\n  );\n};\nconst normalizeKey = ({ key }) => key != null ? key : null;\nconst normalizeRef = ({\n  ref,\n  ref_key,\n  ref_for\n}) => {\n  if (typeof ref === \"number\") {\n    ref = \"\" + ref;\n  }\n  return ref != null ? isString(ref) || isRef(ref) || isFunction(ref) ? { i: currentRenderingInstance, r: ref, k: ref_key, f: !!ref_for } : ref : null;\n};\nfunction createBaseVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, shapeFlag = type === Fragment ? 0 : 1, isBlockNode = false, needFullChildrenNormalization = false) {\n  const vnode = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type,\n    props,\n    key: props && normalizeKey(props),\n    ref: props && normalizeRef(props),\n    scopeId: currentScopeId,\n    slotScopeIds: null,\n    children,\n    component: null,\n    suspense: null,\n    ssContent: null,\n    ssFallback: null,\n    dirs: null,\n    transition: null,\n    el: null,\n    anchor: null,\n    target: null,\n    targetStart: null,\n    targetAnchor: null,\n    staticCount: 0,\n    shapeFlag,\n    patchFlag,\n    dynamicProps,\n    dynamicChildren: null,\n    appContext: null,\n    ctx: currentRenderingInstance\n  };\n  if (needFullChildrenNormalization) {\n    normalizeChildren(vnode, children);\n    if (shapeFlag & 128) {\n      type.normalize(vnode);\n    }\n  } else if (children) {\n    vnode.shapeFlag |= isString(children) ? 8 : 16;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && vnode.key !== vnode.key) {\n    warn$1(`VNode created with invalid key (NaN). VNode type:`, vnode.type);\n  }\n  if (isBlockTreeEnabled > 0 && // avoid a block node from tracking itself\n  !isBlockNode && // has current parent block\n  currentBlock && // presence of a patch flag indicates this node needs patching on updates.\n  // component nodes also should always be patched, because even if the\n  // component doesn't need to update, it needs to persist the instance on to\n  // the next vnode so that it can be properly unmounted later.\n  (vnode.patchFlag > 0 || shapeFlag & 6) && // the EVENTS flag is only for hydration and if it is the only flag, the\n  // vnode should not be considered dynamic due to handler caching.\n  vnode.patchFlag !== 32) {\n    currentBlock.push(vnode);\n  }\n  return vnode;\n}\nconst createVNode = !!(process.env.NODE_ENV !== \"production\") ? createVNodeWithArgsTransform : _createVNode;\nfunction _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {\n  if (!type || type === NULL_DYNAMIC_COMPONENT) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !type) {\n      warn$1(`Invalid vnode type when creating vnode: ${type}.`);\n    }\n    type = Comment;\n  }\n  if (isVNode(type)) {\n    const cloned = cloneVNode(\n      type,\n      props,\n      true\n      /* mergeRef: true */\n    );\n    if (children) {\n      normalizeChildren(cloned, children);\n    }\n    if (isBlockTreeEnabled > 0 && !isBlockNode && currentBlock) {\n      if (cloned.shapeFlag & 6) {\n        currentBlock[currentBlock.indexOf(type)] = cloned;\n      } else {\n        currentBlock.push(cloned);\n      }\n    }\n    cloned.patchFlag = -2;\n    return cloned;\n  }\n  if (isClassComponent(type)) {\n    type = type.__vccOpts;\n  }\n  if (props) {\n    props = guardReactiveProps(props);\n    let { class: klass, style } = props;\n    if (klass && !isString(klass)) {\n      props.class = normalizeClass(klass);\n    }\n    if (isObject(style)) {\n      if (isProxy(style) && !isArray(style)) {\n        style = extend({}, style);\n      }\n      props.style = normalizeStyle(style);\n    }\n  }\n  const shapeFlag = isString(type) ? 1 : isSuspense(type) ? 128 : isTeleport(type) ? 64 : isObject(type) ? 4 : isFunction(type) ? 2 : 0;\n  if (!!(process.env.NODE_ENV !== \"production\") && shapeFlag & 4 && isProxy(type)) {\n    type = toRaw(type);\n    warn$1(\n      `Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with \\`markRaw\\` or using \\`shallowRef\\` instead of \\`ref\\`.`,\n      `\nComponent that was made reactive: `,\n      type\n    );\n  }\n  return createBaseVNode(\n    type,\n    props,\n    children,\n    patchFlag,\n    dynamicProps,\n    shapeFlag,\n    isBlockNode,\n    true\n  );\n}\nfunction guardReactiveProps(props) {\n  if (!props) return null;\n  return isProxy(props) || isInternalObject(props) ? extend({}, props) : props;\n}\nfunction cloneVNode(vnode, extraProps, mergeRef = false, cloneTransition = false) {\n  const { props, ref, patchFlag, children, transition } = vnode;\n  const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;\n  const cloned = {\n    __v_isVNode: true,\n    __v_skip: true,\n    type: vnode.type,\n    props: mergedProps,\n    key: mergedProps && normalizeKey(mergedProps),\n    ref: extraProps && extraProps.ref ? (\n      // #2078 in the case of <component :is=\"vnode\" ref=\"extra\"/>\n      // if the vnode itself already has a ref, cloneVNode will need to merge\n      // the refs so the single vnode can be set on multiple refs\n      mergeRef && ref ? isArray(ref) ? ref.concat(normalizeRef(extraProps)) : [ref, normalizeRef(extraProps)] : normalizeRef(extraProps)\n    ) : ref,\n    scopeId: vnode.scopeId,\n    slotScopeIds: vnode.slotScopeIds,\n    children: !!(process.env.NODE_ENV !== \"production\") && patchFlag === -1 && isArray(children) ? children.map(deepCloneVNode) : children,\n    target: vnode.target,\n    targetStart: vnode.targetStart,\n    targetAnchor: vnode.targetAnchor,\n    staticCount: vnode.staticCount,\n    shapeFlag: vnode.shapeFlag,\n    // if the vnode is cloned with extra props, we can no longer assume its\n    // existing patch flag to be reliable and need to add the FULL_PROPS flag.\n    // note: preserve flag for fragments since they use the flag for children\n    // fast paths only.\n    patchFlag: extraProps && vnode.type !== Fragment ? patchFlag === -1 ? 16 : patchFlag | 16 : patchFlag,\n    dynamicProps: vnode.dynamicProps,\n    dynamicChildren: vnode.dynamicChildren,\n    appContext: vnode.appContext,\n    dirs: vnode.dirs,\n    transition,\n    // These should technically only be non-null on mounted VNodes. However,\n    // they *should* be copied for kept-alive vnodes. So we just always copy\n    // them since them being non-null during a mount doesn't affect the logic as\n    // they will simply be overwritten.\n    component: vnode.component,\n    suspense: vnode.suspense,\n    ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),\n    ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),\n    el: vnode.el,\n    anchor: vnode.anchor,\n    ctx: vnode.ctx,\n    ce: vnode.ce\n  };\n  if (transition && cloneTransition) {\n    setTransitionHooks(\n      cloned,\n      transition.clone(cloned)\n    );\n  }\n  return cloned;\n}\nfunction deepCloneVNode(vnode) {\n  const cloned = cloneVNode(vnode);\n  if (isArray(vnode.children)) {\n    cloned.children = vnode.children.map(deepCloneVNode);\n  }\n  return cloned;\n}\nfunction createTextVNode(text = \" \", flag = 0) {\n  return createVNode(Text, null, text, flag);\n}\nfunction createStaticVNode(content, numberOfNodes) {\n  const vnode = createVNode(Static, null, content);\n  vnode.staticCount = numberOfNodes;\n  return vnode;\n}\nfunction createCommentVNode(text = \"\", asBlock = false) {\n  return asBlock ? (openBlock(), createBlock(Comment, null, text)) : createVNode(Comment, null, text);\n}\nfunction normalizeVNode(child) {\n  if (child == null || typeof child === \"boolean\") {\n    return createVNode(Comment);\n  } else if (isArray(child)) {\n    return createVNode(\n      Fragment,\n      null,\n      // #3666, avoid reference pollution when reusing vnode\n      child.slice()\n    );\n  } else if (isVNode(child)) {\n    return cloneIfMounted(child);\n  } else {\n    return createVNode(Text, null, String(child));\n  }\n}\nfunction cloneIfMounted(child) {\n  return child.el === null && child.patchFlag !== -1 || child.memo ? child : cloneVNode(child);\n}\nfunction normalizeChildren(vnode, children) {\n  let type = 0;\n  const { shapeFlag } = vnode;\n  if (children == null) {\n    children = null;\n  } else if (isArray(children)) {\n    type = 16;\n  } else if (typeof children === \"object\") {\n    if (shapeFlag & (1 | 64)) {\n      const slot = children.default;\n      if (slot) {\n        slot._c && (slot._d = false);\n        normalizeChildren(vnode, slot());\n        slot._c && (slot._d = true);\n      }\n      return;\n    } else {\n      type = 32;\n      const slotFlag = children._;\n      if (!slotFlag && !isInternalObject(children)) {\n        children._ctx = currentRenderingInstance;\n      } else if (slotFlag === 3 && currentRenderingInstance) {\n        if (currentRenderingInstance.slots._ === 1) {\n          children._ = 1;\n        } else {\n          children._ = 2;\n          vnode.patchFlag |= 1024;\n        }\n      }\n    }\n  } else if (isFunction(children)) {\n    children = { default: children, _ctx: currentRenderingInstance };\n    type = 32;\n  } else {\n    children = String(children);\n    if (shapeFlag & 64) {\n      type = 16;\n      children = [createTextVNode(children)];\n    } else {\n      type = 8;\n    }\n  }\n  vnode.children = children;\n  vnode.shapeFlag |= type;\n}\nfunction mergeProps(...args) {\n  const ret = {};\n  for (let i = 0; i < args.length; i++) {\n    const toMerge = args[i];\n    for (const key in toMerge) {\n      if (key === \"class\") {\n        if (ret.class !== toMerge.class) {\n          ret.class = normalizeClass([ret.class, toMerge.class]);\n        }\n      } else if (key === \"style\") {\n        ret.style = normalizeStyle([ret.style, toMerge.style]);\n      } else if (isOn(key)) {\n        const existing = ret[key];\n        const incoming = toMerge[key];\n        if (incoming && existing !== incoming && !(isArray(existing) && existing.includes(incoming))) {\n          ret[key] = existing ? [].concat(existing, incoming) : incoming;\n        }\n      } else if (key !== \"\") {\n        ret[key] = toMerge[key];\n      }\n    }\n  }\n  return ret;\n}\nfunction invokeVNodeHook(hook, instance, vnode, prevVNode = null) {\n  callWithAsyncErrorHandling(hook, instance, 7, [\n    vnode,\n    prevVNode\n  ]);\n}\n\nconst emptyAppContext = createAppContext();\nlet uid = 0;\nfunction createComponentInstance(vnode, parent, suspense) {\n  const type = vnode.type;\n  const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;\n  const instance = {\n    uid: uid++,\n    vnode,\n    type,\n    parent,\n    appContext,\n    root: null,\n    // to be immediately set\n    next: null,\n    subTree: null,\n    // will be set synchronously right after creation\n    effect: null,\n    update: null,\n    // will be set synchronously right after creation\n    job: null,\n    scope: new EffectScope(\n      true\n      /* detached */\n    ),\n    render: null,\n    proxy: null,\n    exposed: null,\n    exposeProxy: null,\n    withProxy: null,\n    provides: parent ? parent.provides : Object.create(appContext.provides),\n    ids: parent ? parent.ids : [\"\", 0, 0],\n    accessCache: null,\n    renderCache: [],\n    // local resolved assets\n    components: null,\n    directives: null,\n    // resolved props and emits options\n    propsOptions: normalizePropsOptions(type, appContext),\n    emitsOptions: normalizeEmitsOptions(type, appContext),\n    // emit\n    emit: null,\n    // to be set immediately\n    emitted: null,\n    // props default value\n    propsDefaults: EMPTY_OBJ,\n    // inheritAttrs\n    inheritAttrs: type.inheritAttrs,\n    // state\n    ctx: EMPTY_OBJ,\n    data: EMPTY_OBJ,\n    props: EMPTY_OBJ,\n    attrs: EMPTY_OBJ,\n    slots: EMPTY_OBJ,\n    refs: EMPTY_OBJ,\n    setupState: EMPTY_OBJ,\n    setupContext: null,\n    // suspense related\n    suspense,\n    suspenseId: suspense ? suspense.pendingId : 0,\n    asyncDep: null,\n    asyncResolved: false,\n    // lifecycle hooks\n    // not using enums here because it results in computed properties\n    isMounted: false,\n    isUnmounted: false,\n    isDeactivated: false,\n    bc: null,\n    c: null,\n    bm: null,\n    m: null,\n    bu: null,\n    u: null,\n    um: null,\n    bum: null,\n    da: null,\n    a: null,\n    rtg: null,\n    rtc: null,\n    ec: null,\n    sp: null\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    instance.ctx = createDevRenderContext(instance);\n  } else {\n    instance.ctx = { _: instance };\n  }\n  instance.root = parent ? parent.root : instance;\n  instance.emit = emit.bind(null, instance);\n  if (vnode.ce) {\n    vnode.ce(instance);\n  }\n  return instance;\n}\nlet currentInstance = null;\nconst getCurrentInstance = () => currentInstance || currentRenderingInstance;\nlet internalSetCurrentInstance;\nlet setInSSRSetupState;\n{\n  const g = getGlobalThis();\n  const registerGlobalSetter = (key, setter) => {\n    let setters;\n    if (!(setters = g[key])) setters = g[key] = [];\n    setters.push(setter);\n    return (v) => {\n      if (setters.length > 1) setters.forEach((set) => set(v));\n      else setters[0](v);\n    };\n  };\n  internalSetCurrentInstance = registerGlobalSetter(\n    `__VUE_INSTANCE_SETTERS__`,\n    (v) => currentInstance = v\n  );\n  setInSSRSetupState = registerGlobalSetter(\n    `__VUE_SSR_SETTERS__`,\n    (v) => isInSSRComponentSetup = v\n  );\n}\nconst setCurrentInstance = (instance) => {\n  const prev = currentInstance;\n  internalSetCurrentInstance(instance);\n  instance.scope.on();\n  return () => {\n    instance.scope.off();\n    internalSetCurrentInstance(prev);\n  };\n};\nconst unsetCurrentInstance = () => {\n  currentInstance && currentInstance.scope.off();\n  internalSetCurrentInstance(null);\n};\nconst isBuiltInTag = /* @__PURE__ */ makeMap(\"slot,component\");\nfunction validateComponentName(name, { isNativeTag }) {\n  if (isBuiltInTag(name) || isNativeTag(name)) {\n    warn$1(\n      \"Do not use built-in or reserved HTML elements as component id: \" + name\n    );\n  }\n}\nfunction isStatefulComponent(instance) {\n  return instance.vnode.shapeFlag & 4;\n}\nlet isInSSRComponentSetup = false;\nfunction setupComponent(instance, isSSR = false, optimized = false) {\n  isSSR && setInSSRSetupState(isSSR);\n  const { props, children } = instance.vnode;\n  const isStateful = isStatefulComponent(instance);\n  initProps(instance, props, isStateful, isSSR);\n  initSlots(instance, children, optimized);\n  const setupResult = isStateful ? setupStatefulComponent(instance, isSSR) : void 0;\n  isSSR && setInSSRSetupState(false);\n  return setupResult;\n}\nfunction setupStatefulComponent(instance, isSSR) {\n  var _a;\n  const Component = instance.type;\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    if (Component.name) {\n      validateComponentName(Component.name, instance.appContext.config);\n    }\n    if (Component.components) {\n      const names = Object.keys(Component.components);\n      for (let i = 0; i < names.length; i++) {\n        validateComponentName(names[i], instance.appContext.config);\n      }\n    }\n    if (Component.directives) {\n      const names = Object.keys(Component.directives);\n      for (let i = 0; i < names.length; i++) {\n        validateDirectiveName(names[i]);\n      }\n    }\n    if (Component.compilerOptions && isRuntimeOnly()) {\n      warn$1(\n        `\"compilerOptions\" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.`\n      );\n    }\n  }\n  instance.accessCache = /* @__PURE__ */ Object.create(null);\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    exposePropsOnRenderContext(instance);\n  }\n  const { setup } = Component;\n  if (setup) {\n    pauseTracking();\n    const setupContext = instance.setupContext = setup.length > 1 ? createSetupContext(instance) : null;\n    const reset = setCurrentInstance(instance);\n    const setupResult = callWithErrorHandling(\n      setup,\n      instance,\n      0,\n      [\n        !!(process.env.NODE_ENV !== \"production\") ? shallowReadonly(instance.props) : instance.props,\n        setupContext\n      ]\n    );\n    const isAsyncSetup = isPromise(setupResult);\n    resetTracking();\n    reset();\n    if ((isAsyncSetup || instance.sp) && !isAsyncWrapper(instance)) {\n      markAsyncBoundary(instance);\n    }\n    if (isAsyncSetup) {\n      setupResult.then(unsetCurrentInstance, unsetCurrentInstance);\n      if (isSSR) {\n        return setupResult.then((resolvedResult) => {\n          handleSetupResult(instance, resolvedResult, isSSR);\n        }).catch((e) => {\n          handleError(e, instance, 0);\n        });\n      } else {\n        instance.asyncDep = setupResult;\n        if (!!(process.env.NODE_ENV !== \"production\") && !instance.suspense) {\n          const name = (_a = Component.name) != null ? _a : \"Anonymous\";\n          warn$1(\n            `Component <${name}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`\n          );\n        }\n      }\n    } else {\n      handleSetupResult(instance, setupResult, isSSR);\n    }\n  } else {\n    finishComponentSetup(instance, isSSR);\n  }\n}\nfunction handleSetupResult(instance, setupResult, isSSR) {\n  if (isFunction(setupResult)) {\n    if (instance.type.__ssrInlineRender) {\n      instance.ssrRender = setupResult;\n    } else {\n      instance.render = setupResult;\n    }\n  } else if (isObject(setupResult)) {\n    if (!!(process.env.NODE_ENV !== \"production\") && isVNode(setupResult)) {\n      warn$1(\n        `setup() should not return VNodes directly - return a render function instead.`\n      );\n    }\n    if (!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) {\n      instance.devtoolsRawSetupState = setupResult;\n    }\n    instance.setupState = proxyRefs(setupResult);\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      exposeSetupStateOnRenderContext(instance);\n    }\n  } else if (!!(process.env.NODE_ENV !== \"production\") && setupResult !== void 0) {\n    warn$1(\n      `setup() should return an object. Received: ${setupResult === null ? \"null\" : typeof setupResult}`\n    );\n  }\n  finishComponentSetup(instance, isSSR);\n}\nlet compile;\nlet installWithProxy;\nfunction registerRuntimeCompiler(_compile) {\n  compile = _compile;\n  installWithProxy = (i) => {\n    if (i.render._rc) {\n      i.withProxy = new Proxy(i.ctx, RuntimeCompiledPublicInstanceProxyHandlers);\n    }\n  };\n}\nconst isRuntimeOnly = () => !compile;\nfunction finishComponentSetup(instance, isSSR, skipOptions) {\n  const Component = instance.type;\n  if (!instance.render) {\n    if (!isSSR && compile && !Component.render) {\n      const template = Component.template || __VUE_OPTIONS_API__ && resolveMergedOptions(instance).template;\n      if (template) {\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          startMeasure(instance, `compile`);\n        }\n        const { isCustomElement, compilerOptions } = instance.appContext.config;\n        const { delimiters, compilerOptions: componentCompilerOptions } = Component;\n        const finalCompilerOptions = extend(\n          extend(\n            {\n              isCustomElement,\n              delimiters\n            },\n            compilerOptions\n          ),\n          componentCompilerOptions\n        );\n        Component.render = compile(template, finalCompilerOptions);\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          endMeasure(instance, `compile`);\n        }\n      }\n    }\n    instance.render = Component.render || NOOP;\n    if (installWithProxy) {\n      installWithProxy(instance);\n    }\n  }\n  if (__VUE_OPTIONS_API__ && true) {\n    const reset = setCurrentInstance(instance);\n    pauseTracking();\n    try {\n      applyOptions(instance);\n    } finally {\n      resetTracking();\n      reset();\n    }\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && !Component.render && instance.render === NOOP && !isSSR) {\n    if (!compile && Component.template) {\n      warn$1(\n        `Component provided template option but runtime compilation is not supported in this build of Vue.` + (` Configure your bundler to alias \"vue\" to \"vue/dist/vue.esm-bundler.js\".` )\n      );\n    } else {\n      warn$1(`Component is missing template or render function: `, Component);\n    }\n  }\n}\nconst attrsProxyHandlers = !!(process.env.NODE_ENV !== \"production\") ? {\n  get(target, key) {\n    markAttrsAccessed();\n    track(target, \"get\", \"\");\n    return target[key];\n  },\n  set() {\n    warn$1(`setupContext.attrs is readonly.`);\n    return false;\n  },\n  deleteProperty() {\n    warn$1(`setupContext.attrs is readonly.`);\n    return false;\n  }\n} : {\n  get(target, key) {\n    track(target, \"get\", \"\");\n    return target[key];\n  }\n};\nfunction getSlotsProxy(instance) {\n  return new Proxy(instance.slots, {\n    get(target, key) {\n      track(instance, \"get\", \"$slots\");\n      return target[key];\n    }\n  });\n}\nfunction createSetupContext(instance) {\n  const expose = (exposed) => {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (instance.exposed) {\n        warn$1(`expose() should be called only once per setup().`);\n      }\n      if (exposed != null) {\n        let exposedType = typeof exposed;\n        if (exposedType === \"object\") {\n          if (isArray(exposed)) {\n            exposedType = \"array\";\n          } else if (isRef(exposed)) {\n            exposedType = \"ref\";\n          }\n        }\n        if (exposedType !== \"object\") {\n          warn$1(\n            `expose() should be passed a plain object, received ${exposedType}.`\n          );\n        }\n      }\n    }\n    instance.exposed = exposed || {};\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    let attrsProxy;\n    let slotsProxy;\n    return Object.freeze({\n      get attrs() {\n        return attrsProxy || (attrsProxy = new Proxy(instance.attrs, attrsProxyHandlers));\n      },\n      get slots() {\n        return slotsProxy || (slotsProxy = getSlotsProxy(instance));\n      },\n      get emit() {\n        return (event, ...args) => instance.emit(event, ...args);\n      },\n      expose\n    });\n  } else {\n    return {\n      attrs: new Proxy(instance.attrs, attrsProxyHandlers),\n      slots: instance.slots,\n      emit: instance.emit,\n      expose\n    };\n  }\n}\nfunction getComponentPublicInstance(instance) {\n  if (instance.exposed) {\n    return instance.exposeProxy || (instance.exposeProxy = new Proxy(proxyRefs(markRaw(instance.exposed)), {\n      get(target, key) {\n        if (key in target) {\n          return target[key];\n        } else if (key in publicPropertiesMap) {\n          return publicPropertiesMap[key](instance);\n        }\n      },\n      has(target, key) {\n        return key in target || key in publicPropertiesMap;\n      }\n    }));\n  } else {\n    return instance.proxy;\n  }\n}\nconst classifyRE = /(?:^|[-_])(\\w)/g;\nconst classify = (str) => str.replace(classifyRE, (c) => c.toUpperCase()).replace(/[-_]/g, \"\");\nfunction getComponentName(Component, includeInferred = true) {\n  return isFunction(Component) ? Component.displayName || Component.name : Component.name || includeInferred && Component.__name;\n}\nfunction formatComponentName(instance, Component, isRoot = false) {\n  let name = getComponentName(Component);\n  if (!name && Component.__file) {\n    const match = Component.__file.match(/([^/\\\\]+)\\.\\w+$/);\n    if (match) {\n      name = match[1];\n    }\n  }\n  if (!name && instance && instance.parent) {\n    const inferFromRegistry = (registry) => {\n      for (const key in registry) {\n        if (registry[key] === Component) {\n          return key;\n        }\n      }\n    };\n    name = inferFromRegistry(\n      instance.components || instance.parent.type.components\n    ) || inferFromRegistry(instance.appContext.components);\n  }\n  return name ? classify(name) : isRoot ? `App` : `Anonymous`;\n}\nfunction isClassComponent(value) {\n  return isFunction(value) && \"__vccOpts\" in value;\n}\n\nconst computed = (getterOrOptions, debugOptions) => {\n  const c = computed$1(getterOrOptions, debugOptions, isInSSRComponentSetup);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    const i = getCurrentInstance();\n    if (i && i.appContext.config.warnRecursiveComputed) {\n      c._warnRecursive = true;\n    }\n  }\n  return c;\n};\n\nfunction h(type, propsOrChildren, children) {\n  const l = arguments.length;\n  if (l === 2) {\n    if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\n      if (isVNode(propsOrChildren)) {\n        return createVNode(type, null, [propsOrChildren]);\n      }\n      return createVNode(type, propsOrChildren);\n    } else {\n      return createVNode(type, null, propsOrChildren);\n    }\n  } else {\n    if (l > 3) {\n      children = Array.prototype.slice.call(arguments, 2);\n    } else if (l === 3 && isVNode(children)) {\n      children = [children];\n    }\n    return createVNode(type, propsOrChildren, children);\n  }\n}\n\nfunction initCustomFormatter() {\n  if (!!!(process.env.NODE_ENV !== \"production\") || typeof window === \"undefined\") {\n    return;\n  }\n  const vueStyle = { style: \"color:#3ba776\" };\n  const numberStyle = { style: \"color:#1677ff\" };\n  const stringStyle = { style: \"color:#f5222d\" };\n  const keywordStyle = { style: \"color:#eb2f96\" };\n  const formatter = {\n    __vue_custom_formatter: true,\n    header(obj) {\n      if (!isObject(obj)) {\n        return null;\n      }\n      if (obj.__isVue) {\n        return [\"div\", vueStyle, `VueInstance`];\n      } else if (isRef(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, genRefFlag(obj)],\n          \"<\",\n          // avoid debugger accessing value affecting behavior\n          formatValue(\"_value\" in obj ? obj._value : obj),\n          `>`\n        ];\n      } else if (isReactive(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, isShallow(obj) ? \"ShallowReactive\" : \"Reactive\"],\n          \"<\",\n          formatValue(obj),\n          `>${isReadonly(obj) ? ` (readonly)` : ``}`\n        ];\n      } else if (isReadonly(obj)) {\n        return [\n          \"div\",\n          {},\n          [\"span\", vueStyle, isShallow(obj) ? \"ShallowReadonly\" : \"Readonly\"],\n          \"<\",\n          formatValue(obj),\n          \">\"\n        ];\n      }\n      return null;\n    },\n    hasBody(obj) {\n      return obj && obj.__isVue;\n    },\n    body(obj) {\n      if (obj && obj.__isVue) {\n        return [\n          \"div\",\n          {},\n          ...formatInstance(obj.$)\n        ];\n      }\n    }\n  };\n  function formatInstance(instance) {\n    const blocks = [];\n    if (instance.type.props && instance.props) {\n      blocks.push(createInstanceBlock(\"props\", toRaw(instance.props)));\n    }\n    if (instance.setupState !== EMPTY_OBJ) {\n      blocks.push(createInstanceBlock(\"setup\", instance.setupState));\n    }\n    if (instance.data !== EMPTY_OBJ) {\n      blocks.push(createInstanceBlock(\"data\", toRaw(instance.data)));\n    }\n    const computed = extractKeys(instance, \"computed\");\n    if (computed) {\n      blocks.push(createInstanceBlock(\"computed\", computed));\n    }\n    const injected = extractKeys(instance, \"inject\");\n    if (injected) {\n      blocks.push(createInstanceBlock(\"injected\", injected));\n    }\n    blocks.push([\n      \"div\",\n      {},\n      [\n        \"span\",\n        {\n          style: keywordStyle.style + \";opacity:0.66\"\n        },\n        \"$ (internal): \"\n      ],\n      [\"object\", { object: instance }]\n    ]);\n    return blocks;\n  }\n  function createInstanceBlock(type, target) {\n    target = extend({}, target);\n    if (!Object.keys(target).length) {\n      return [\"span\", {}];\n    }\n    return [\n      \"div\",\n      { style: \"line-height:1.25em;margin-bottom:0.6em\" },\n      [\n        \"div\",\n        {\n          style: \"color:#476582\"\n        },\n        type\n      ],\n      [\n        \"div\",\n        {\n          style: \"padding-left:1.25em\"\n        },\n        ...Object.keys(target).map((key) => {\n          return [\n            \"div\",\n            {},\n            [\"span\", keywordStyle, key + \": \"],\n            formatValue(target[key], false)\n          ];\n        })\n      ]\n    ];\n  }\n  function formatValue(v, asRaw = true) {\n    if (typeof v === \"number\") {\n      return [\"span\", numberStyle, v];\n    } else if (typeof v === \"string\") {\n      return [\"span\", stringStyle, JSON.stringify(v)];\n    } else if (typeof v === \"boolean\") {\n      return [\"span\", keywordStyle, v];\n    } else if (isObject(v)) {\n      return [\"object\", { object: asRaw ? toRaw(v) : v }];\n    } else {\n      return [\"span\", stringStyle, String(v)];\n    }\n  }\n  function extractKeys(instance, type) {\n    const Comp = instance.type;\n    if (isFunction(Comp)) {\n      return;\n    }\n    const extracted = {};\n    for (const key in instance.ctx) {\n      if (isKeyOfType(Comp, key, type)) {\n        extracted[key] = instance.ctx[key];\n      }\n    }\n    return extracted;\n  }\n  function isKeyOfType(Comp, key, type) {\n    const opts = Comp[type];\n    if (isArray(opts) && opts.includes(key) || isObject(opts) && key in opts) {\n      return true;\n    }\n    if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {\n      return true;\n    }\n    if (Comp.mixins && Comp.mixins.some((m) => isKeyOfType(m, key, type))) {\n      return true;\n    }\n  }\n  function genRefFlag(v) {\n    if (isShallow(v)) {\n      return `ShallowRef`;\n    }\n    if (v.effect) {\n      return `ComputedRef`;\n    }\n    return `Ref`;\n  }\n  if (window.devtoolsFormatters) {\n    window.devtoolsFormatters.push(formatter);\n  } else {\n    window.devtoolsFormatters = [formatter];\n  }\n}\n\nfunction withMemo(memo, render, cache, index) {\n  const cached = cache[index];\n  if (cached && isMemoSame(cached, memo)) {\n    return cached;\n  }\n  const ret = render();\n  ret.memo = memo.slice();\n  ret.cacheIndex = index;\n  return cache[index] = ret;\n}\nfunction isMemoSame(cached, memo) {\n  const prev = cached.memo;\n  if (prev.length != memo.length) {\n    return false;\n  }\n  for (let i = 0; i < prev.length; i++) {\n    if (hasChanged(prev[i], memo[i])) {\n      return false;\n    }\n  }\n  if (isBlockTreeEnabled > 0 && currentBlock) {\n    currentBlock.push(cached);\n  }\n  return true;\n}\n\nconst version = \"3.5.13\";\nconst warn = !!(process.env.NODE_ENV !== \"production\") ? warn$1 : NOOP;\nconst ErrorTypeStrings = ErrorTypeStrings$1 ;\nconst devtools = !!(process.env.NODE_ENV !== \"production\") || true ? devtools$1 : void 0;\nconst setDevtoolsHook = !!(process.env.NODE_ENV !== \"production\") || true ? setDevtoolsHook$1 : NOOP;\nconst _ssrUtils = {\n  createComponentInstance,\n  setupComponent,\n  renderComponentRoot,\n  setCurrentRenderingInstance,\n  isVNode: isVNode,\n  normalizeVNode,\n  getComponentPublicInstance,\n  ensureValidVNode,\n  pushWarningContext,\n  popWarningContext\n};\nconst ssrUtils = _ssrUtils ;\nconst resolveFilter = null;\nconst compatUtils = null;\nconst DeprecationTypes = null;\n\nexport { BaseTransition, BaseTransitionPropsValidators, Comment, DeprecationTypes, ErrorCodes, ErrorTypeStrings, Fragment, KeepAlive, Static, Suspense, Teleport, Text, assertNumber, callWithAsyncErrorHandling, callWithErrorHandling, cloneVNode, compatUtils, computed, createBlock, createCommentVNode, createElementBlock, createBaseVNode as createElementVNode, createHydrationRenderer, createPropsRestProxy, createRenderer, createSlots, createStaticVNode, createTextVNode, createVNode, defineAsyncComponent, defineComponent, defineEmits, defineExpose, defineModel, defineOptions, defineProps, defineSlots, devtools, getCurrentInstance, getTransitionRawChildren, guardReactiveProps, h, handleError, hasInjectionContext, hydrateOnIdle, hydrateOnInteraction, hydrateOnMediaQuery, hydrateOnVisible, initCustomFormatter, inject, isMemoSame, isRuntimeOnly, isVNode, mergeDefaults, mergeModels, mergeProps, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onRenderTracked, onRenderTriggered, onServerPrefetch, onUnmounted, onUpdated, openBlock, popScopeId, provide, pushScopeId, queuePostFlushCb, registerRuntimeCompiler, renderList, renderSlot, resolveComponent, resolveDirective, resolveDynamicComponent, resolveFilter, resolveTransitionHooks, setBlockTracking, setDevtoolsHook, setTransitionHooks, ssrContextKey, ssrUtils, toHandlers, transformVNodeArgs, useAttrs, useId, useModel, useSSRContext, useSlots, useTemplateRef, useTransitionState, version, warn, watch, watchEffect, watchPostEffect, watchSyncEffect, withAsyncContext, withCtx, withDefaults, withDirectives, withMemo, withScopeId };\n","/**\n* @vue/runtime-dom v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\nimport { warn, h, BaseTransition, assertNumber, BaseTransitionPropsValidators, getCurrentInstance, onBeforeUpdate, queuePostFlushCb, onMounted, watch, onUnmounted, Fragment, Static, camelize, callWithAsyncErrorHandling, defineComponent, nextTick, unref, createVNode, useTransitionState, onUpdated, toRaw, getTransitionRawChildren, setTransitionHooks, resolveTransitionHooks, Text, isRuntimeOnly, createRenderer, createHydrationRenderer } from '@vue/runtime-core';\nexport * from '@vue/runtime-core';\nimport { extend, isObject, toNumber, isArray, NOOP, isString, hyphenate, capitalize, includeBooleanAttr, isSymbol, isSpecialBooleanAttr, isFunction, isOn, isModelListener, camelize as camelize$1, isPlainObject, hasOwn, EMPTY_OBJ, looseToNumber, looseIndexOf, isSet, looseEqual, invokeArrayFns, isHTMLTag, isSVGTag, isMathMLTag } from '@vue/shared';\n\nlet policy = void 0;\nconst tt = typeof window !== \"undefined\" && window.trustedTypes;\nif (tt) {\n  try {\n    policy = /* @__PURE__ */ tt.createPolicy(\"vue\", {\n      createHTML: (val) => val\n    });\n  } catch (e) {\n    !!(process.env.NODE_ENV !== \"production\") && warn(`Error creating trusted types policy: ${e}`);\n  }\n}\nconst unsafeToTrustedHTML = policy ? (val) => policy.createHTML(val) : (val) => val;\nconst svgNS = \"http://www.w3.org/2000/svg\";\nconst mathmlNS = \"http://www.w3.org/1998/Math/MathML\";\nconst doc = typeof document !== \"undefined\" ? document : null;\nconst templateContainer = doc && /* @__PURE__ */ doc.createElement(\"template\");\nconst nodeOps = {\n  insert: (child, parent, anchor) => {\n    parent.insertBefore(child, anchor || null);\n  },\n  remove: (child) => {\n    const parent = child.parentNode;\n    if (parent) {\n      parent.removeChild(child);\n    }\n  },\n  createElement: (tag, namespace, is, props) => {\n    const el = namespace === \"svg\" ? doc.createElementNS(svgNS, tag) : namespace === \"mathml\" ? doc.createElementNS(mathmlNS, tag) : is ? doc.createElement(tag, { is }) : doc.createElement(tag);\n    if (tag === \"select\" && props && props.multiple != null) {\n      el.setAttribute(\"multiple\", props.multiple);\n    }\n    return el;\n  },\n  createText: (text) => doc.createTextNode(text),\n  createComment: (text) => doc.createComment(text),\n  setText: (node, text) => {\n    node.nodeValue = text;\n  },\n  setElementText: (el, text) => {\n    el.textContent = text;\n  },\n  parentNode: (node) => node.parentNode,\n  nextSibling: (node) => node.nextSibling,\n  querySelector: (selector) => doc.querySelector(selector),\n  setScopeId(el, id) {\n    el.setAttribute(id, \"\");\n  },\n  // __UNSAFE__\n  // Reason: innerHTML.\n  // Static content here can only come from compiled templates.\n  // As long as the user only uses trusted templates, this is safe.\n  insertStaticContent(content, parent, anchor, namespace, start, end) {\n    const before = anchor ? anchor.previousSibling : parent.lastChild;\n    if (start && (start === end || start.nextSibling)) {\n      while (true) {\n        parent.insertBefore(start.cloneNode(true), anchor);\n        if (start === end || !(start = start.nextSibling)) break;\n      }\n    } else {\n      templateContainer.innerHTML = unsafeToTrustedHTML(\n        namespace === \"svg\" ? `<svg>${content}</svg>` : namespace === \"mathml\" ? `<math>${content}</math>` : content\n      );\n      const template = templateContainer.content;\n      if (namespace === \"svg\" || namespace === \"mathml\") {\n        const wrapper = template.firstChild;\n        while (wrapper.firstChild) {\n          template.appendChild(wrapper.firstChild);\n        }\n        template.removeChild(wrapper);\n      }\n      parent.insertBefore(template, anchor);\n    }\n    return [\n      // first\n      before ? before.nextSibling : parent.firstChild,\n      // last\n      anchor ? anchor.previousSibling : parent.lastChild\n    ];\n  }\n};\n\nconst TRANSITION = \"transition\";\nconst ANIMATION = \"animation\";\nconst vtcKey = Symbol(\"_vtc\");\nconst DOMTransitionPropsValidators = {\n  name: String,\n  type: String,\n  css: {\n    type: Boolean,\n    default: true\n  },\n  duration: [String, Number, Object],\n  enterFromClass: String,\n  enterActiveClass: String,\n  enterToClass: String,\n  appearFromClass: String,\n  appearActiveClass: String,\n  appearToClass: String,\n  leaveFromClass: String,\n  leaveActiveClass: String,\n  leaveToClass: String\n};\nconst TransitionPropsValidators = /* @__PURE__ */ extend(\n  {},\n  BaseTransitionPropsValidators,\n  DOMTransitionPropsValidators\n);\nconst decorate$1 = (t) => {\n  t.displayName = \"Transition\";\n  t.props = TransitionPropsValidators;\n  return t;\n};\nconst Transition = /* @__PURE__ */ decorate$1(\n  (props, { slots }) => h(BaseTransition, resolveTransitionProps(props), slots)\n);\nconst callHook = (hook, args = []) => {\n  if (isArray(hook)) {\n    hook.forEach((h2) => h2(...args));\n  } else if (hook) {\n    hook(...args);\n  }\n};\nconst hasExplicitCallback = (hook) => {\n  return hook ? isArray(hook) ? hook.some((h2) => h2.length > 1) : hook.length > 1 : false;\n};\nfunction resolveTransitionProps(rawProps) {\n  const baseProps = {};\n  for (const key in rawProps) {\n    if (!(key in DOMTransitionPropsValidators)) {\n      baseProps[key] = rawProps[key];\n    }\n  }\n  if (rawProps.css === false) {\n    return baseProps;\n  }\n  const {\n    name = \"v\",\n    type,\n    duration,\n    enterFromClass = `${name}-enter-from`,\n    enterActiveClass = `${name}-enter-active`,\n    enterToClass = `${name}-enter-to`,\n    appearFromClass = enterFromClass,\n    appearActiveClass = enterActiveClass,\n    appearToClass = enterToClass,\n    leaveFromClass = `${name}-leave-from`,\n    leaveActiveClass = `${name}-leave-active`,\n    leaveToClass = `${name}-leave-to`\n  } = rawProps;\n  const durations = normalizeDuration(duration);\n  const enterDuration = durations && durations[0];\n  const leaveDuration = durations && durations[1];\n  const {\n    onBeforeEnter,\n    onEnter,\n    onEnterCancelled,\n    onLeave,\n    onLeaveCancelled,\n    onBeforeAppear = onBeforeEnter,\n    onAppear = onEnter,\n    onAppearCancelled = onEnterCancelled\n  } = baseProps;\n  const finishEnter = (el, isAppear, done, isCancelled) => {\n    el._enterCancelled = isCancelled;\n    removeTransitionClass(el, isAppear ? appearToClass : enterToClass);\n    removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);\n    done && done();\n  };\n  const finishLeave = (el, done) => {\n    el._isLeaving = false;\n    removeTransitionClass(el, leaveFromClass);\n    removeTransitionClass(el, leaveToClass);\n    removeTransitionClass(el, leaveActiveClass);\n    done && done();\n  };\n  const makeEnterHook = (isAppear) => {\n    return (el, done) => {\n      const hook = isAppear ? onAppear : onEnter;\n      const resolve = () => finishEnter(el, isAppear, done);\n      callHook(hook, [el, resolve]);\n      nextFrame(() => {\n        removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);\n        addTransitionClass(el, isAppear ? appearToClass : enterToClass);\n        if (!hasExplicitCallback(hook)) {\n          whenTransitionEnds(el, type, enterDuration, resolve);\n        }\n      });\n    };\n  };\n  return extend(baseProps, {\n    onBeforeEnter(el) {\n      callHook(onBeforeEnter, [el]);\n      addTransitionClass(el, enterFromClass);\n      addTransitionClass(el, enterActiveClass);\n    },\n    onBeforeAppear(el) {\n      callHook(onBeforeAppear, [el]);\n      addTransitionClass(el, appearFromClass);\n      addTransitionClass(el, appearActiveClass);\n    },\n    onEnter: makeEnterHook(false),\n    onAppear: makeEnterHook(true),\n    onLeave(el, done) {\n      el._isLeaving = true;\n      const resolve = () => finishLeave(el, done);\n      addTransitionClass(el, leaveFromClass);\n      if (!el._enterCancelled) {\n        forceReflow();\n        addTransitionClass(el, leaveActiveClass);\n      } else {\n        addTransitionClass(el, leaveActiveClass);\n        forceReflow();\n      }\n      nextFrame(() => {\n        if (!el._isLeaving) {\n          return;\n        }\n        removeTransitionClass(el, leaveFromClass);\n        addTransitionClass(el, leaveToClass);\n        if (!hasExplicitCallback(onLeave)) {\n          whenTransitionEnds(el, type, leaveDuration, resolve);\n        }\n      });\n      callHook(onLeave, [el, resolve]);\n    },\n    onEnterCancelled(el) {\n      finishEnter(el, false, void 0, true);\n      callHook(onEnterCancelled, [el]);\n    },\n    onAppearCancelled(el) {\n      finishEnter(el, true, void 0, true);\n      callHook(onAppearCancelled, [el]);\n    },\n    onLeaveCancelled(el) {\n      finishLeave(el);\n      callHook(onLeaveCancelled, [el]);\n    }\n  });\n}\nfunction normalizeDuration(duration) {\n  if (duration == null) {\n    return null;\n  } else if (isObject(duration)) {\n    return [NumberOf(duration.enter), NumberOf(duration.leave)];\n  } else {\n    const n = NumberOf(duration);\n    return [n, n];\n  }\n}\nfunction NumberOf(val) {\n  const res = toNumber(val);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    assertNumber(res, \"<transition> explicit duration\");\n  }\n  return res;\n}\nfunction addTransitionClass(el, cls) {\n  cls.split(/\\s+/).forEach((c) => c && el.classList.add(c));\n  (el[vtcKey] || (el[vtcKey] = /* @__PURE__ */ new Set())).add(cls);\n}\nfunction removeTransitionClass(el, cls) {\n  cls.split(/\\s+/).forEach((c) => c && el.classList.remove(c));\n  const _vtc = el[vtcKey];\n  if (_vtc) {\n    _vtc.delete(cls);\n    if (!_vtc.size) {\n      el[vtcKey] = void 0;\n    }\n  }\n}\nfunction nextFrame(cb) {\n  requestAnimationFrame(() => {\n    requestAnimationFrame(cb);\n  });\n}\nlet endId = 0;\nfunction whenTransitionEnds(el, expectedType, explicitTimeout, resolve) {\n  const id = el._endId = ++endId;\n  const resolveIfNotStale = () => {\n    if (id === el._endId) {\n      resolve();\n    }\n  };\n  if (explicitTimeout != null) {\n    return setTimeout(resolveIfNotStale, explicitTimeout);\n  }\n  const { type, timeout, propCount } = getTransitionInfo(el, expectedType);\n  if (!type) {\n    return resolve();\n  }\n  const endEvent = type + \"end\";\n  let ended = 0;\n  const end = () => {\n    el.removeEventListener(endEvent, onEnd);\n    resolveIfNotStale();\n  };\n  const onEnd = (e) => {\n    if (e.target === el && ++ended >= propCount) {\n      end();\n    }\n  };\n  setTimeout(() => {\n    if (ended < propCount) {\n      end();\n    }\n  }, timeout + 1);\n  el.addEventListener(endEvent, onEnd);\n}\nfunction getTransitionInfo(el, expectedType) {\n  const styles = window.getComputedStyle(el);\n  const getStyleProperties = (key) => (styles[key] || \"\").split(\", \");\n  const transitionDelays = getStyleProperties(`${TRANSITION}Delay`);\n  const transitionDurations = getStyleProperties(`${TRANSITION}Duration`);\n  const transitionTimeout = getTimeout(transitionDelays, transitionDurations);\n  const animationDelays = getStyleProperties(`${ANIMATION}Delay`);\n  const animationDurations = getStyleProperties(`${ANIMATION}Duration`);\n  const animationTimeout = getTimeout(animationDelays, animationDurations);\n  let type = null;\n  let timeout = 0;\n  let propCount = 0;\n  if (expectedType === TRANSITION) {\n    if (transitionTimeout > 0) {\n      type = TRANSITION;\n      timeout = transitionTimeout;\n      propCount = transitionDurations.length;\n    }\n  } else if (expectedType === ANIMATION) {\n    if (animationTimeout > 0) {\n      type = ANIMATION;\n      timeout = animationTimeout;\n      propCount = animationDurations.length;\n    }\n  } else {\n    timeout = Math.max(transitionTimeout, animationTimeout);\n    type = timeout > 0 ? transitionTimeout > animationTimeout ? TRANSITION : ANIMATION : null;\n    propCount = type ? type === TRANSITION ? transitionDurations.length : animationDurations.length : 0;\n  }\n  const hasTransform = type === TRANSITION && /\\b(transform|all)(,|$)/.test(\n    getStyleProperties(`${TRANSITION}Property`).toString()\n  );\n  return {\n    type,\n    timeout,\n    propCount,\n    hasTransform\n  };\n}\nfunction getTimeout(delays, durations) {\n  while (delays.length < durations.length) {\n    delays = delays.concat(delays);\n  }\n  return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));\n}\nfunction toMs(s) {\n  if (s === \"auto\") return 0;\n  return Number(s.slice(0, -1).replace(\",\", \".\")) * 1e3;\n}\nfunction forceReflow() {\n  return document.body.offsetHeight;\n}\n\nfunction patchClass(el, value, isSVG) {\n  const transitionClasses = el[vtcKey];\n  if (transitionClasses) {\n    value = (value ? [value, ...transitionClasses] : [...transitionClasses]).join(\" \");\n  }\n  if (value == null) {\n    el.removeAttribute(\"class\");\n  } else if (isSVG) {\n    el.setAttribute(\"class\", value);\n  } else {\n    el.className = value;\n  }\n}\n\nconst vShowOriginalDisplay = Symbol(\"_vod\");\nconst vShowHidden = Symbol(\"_vsh\");\nconst vShow = {\n  beforeMount(el, { value }, { transition }) {\n    el[vShowOriginalDisplay] = el.style.display === \"none\" ? \"\" : el.style.display;\n    if (transition && value) {\n      transition.beforeEnter(el);\n    } else {\n      setDisplay(el, value);\n    }\n  },\n  mounted(el, { value }, { transition }) {\n    if (transition && value) {\n      transition.enter(el);\n    }\n  },\n  updated(el, { value, oldValue }, { transition }) {\n    if (!value === !oldValue) return;\n    if (transition) {\n      if (value) {\n        transition.beforeEnter(el);\n        setDisplay(el, true);\n        transition.enter(el);\n      } else {\n        transition.leave(el, () => {\n          setDisplay(el, false);\n        });\n      }\n    } else {\n      setDisplay(el, value);\n    }\n  },\n  beforeUnmount(el, { value }) {\n    setDisplay(el, value);\n  }\n};\nif (!!(process.env.NODE_ENV !== \"production\")) {\n  vShow.name = \"show\";\n}\nfunction setDisplay(el, value) {\n  el.style.display = value ? el[vShowOriginalDisplay] : \"none\";\n  el[vShowHidden] = !value;\n}\nfunction initVShowForSSR() {\n  vShow.getSSRProps = ({ value }) => {\n    if (!value) {\n      return { style: { display: \"none\" } };\n    }\n  };\n}\n\nconst CSS_VAR_TEXT = Symbol(!!(process.env.NODE_ENV !== \"production\") ? \"CSS_VAR_TEXT\" : \"\");\nfunction useCssVars(getter) {\n  const instance = getCurrentInstance();\n  if (!instance) {\n    !!(process.env.NODE_ENV !== \"production\") && warn(`useCssVars is called without current active component instance.`);\n    return;\n  }\n  const updateTeleports = instance.ut = (vars = getter(instance.proxy)) => {\n    Array.from(\n      document.querySelectorAll(`[data-v-owner=\"${instance.uid}\"]`)\n    ).forEach((node) => setVarsOnNode(node, vars));\n  };\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    instance.getCssVars = () => getter(instance.proxy);\n  }\n  const setVars = () => {\n    const vars = getter(instance.proxy);\n    if (instance.ce) {\n      setVarsOnNode(instance.ce, vars);\n    } else {\n      setVarsOnVNode(instance.subTree, vars);\n    }\n    updateTeleports(vars);\n  };\n  onBeforeUpdate(() => {\n    queuePostFlushCb(setVars);\n  });\n  onMounted(() => {\n    watch(setVars, NOOP, { flush: \"post\" });\n    const ob = new MutationObserver(setVars);\n    ob.observe(instance.subTree.el.parentNode, { childList: true });\n    onUnmounted(() => ob.disconnect());\n  });\n}\nfunction setVarsOnVNode(vnode, vars) {\n  if (vnode.shapeFlag & 128) {\n    const suspense = vnode.suspense;\n    vnode = suspense.activeBranch;\n    if (suspense.pendingBranch && !suspense.isHydrating) {\n      suspense.effects.push(() => {\n        setVarsOnVNode(suspense.activeBranch, vars);\n      });\n    }\n  }\n  while (vnode.component) {\n    vnode = vnode.component.subTree;\n  }\n  if (vnode.shapeFlag & 1 && vnode.el) {\n    setVarsOnNode(vnode.el, vars);\n  } else if (vnode.type === Fragment) {\n    vnode.children.forEach((c) => setVarsOnVNode(c, vars));\n  } else if (vnode.type === Static) {\n    let { el, anchor } = vnode;\n    while (el) {\n      setVarsOnNode(el, vars);\n      if (el === anchor) break;\n      el = el.nextSibling;\n    }\n  }\n}\nfunction setVarsOnNode(el, vars) {\n  if (el.nodeType === 1) {\n    const style = el.style;\n    let cssText = \"\";\n    for (const key in vars) {\n      style.setProperty(`--${key}`, vars[key]);\n      cssText += `--${key}: ${vars[key]};`;\n    }\n    style[CSS_VAR_TEXT] = cssText;\n  }\n}\n\nconst displayRE = /(^|;)\\s*display\\s*:/;\nfunction patchStyle(el, prev, next) {\n  const style = el.style;\n  const isCssString = isString(next);\n  let hasControlledDisplay = false;\n  if (next && !isCssString) {\n    if (prev) {\n      if (!isString(prev)) {\n        for (const key in prev) {\n          if (next[key] == null) {\n            setStyle(style, key, \"\");\n          }\n        }\n      } else {\n        for (const prevStyle of prev.split(\";\")) {\n          const key = prevStyle.slice(0, prevStyle.indexOf(\":\")).trim();\n          if (next[key] == null) {\n            setStyle(style, key, \"\");\n          }\n        }\n      }\n    }\n    for (const key in next) {\n      if (key === \"display\") {\n        hasControlledDisplay = true;\n      }\n      setStyle(style, key, next[key]);\n    }\n  } else {\n    if (isCssString) {\n      if (prev !== next) {\n        const cssVarText = style[CSS_VAR_TEXT];\n        if (cssVarText) {\n          next += \";\" + cssVarText;\n        }\n        style.cssText = next;\n        hasControlledDisplay = displayRE.test(next);\n      }\n    } else if (prev) {\n      el.removeAttribute(\"style\");\n    }\n  }\n  if (vShowOriginalDisplay in el) {\n    el[vShowOriginalDisplay] = hasControlledDisplay ? style.display : \"\";\n    if (el[vShowHidden]) {\n      style.display = \"none\";\n    }\n  }\n}\nconst semicolonRE = /[^\\\\];\\s*$/;\nconst importantRE = /\\s*!important$/;\nfunction setStyle(style, name, val) {\n  if (isArray(val)) {\n    val.forEach((v) => setStyle(style, name, v));\n  } else {\n    if (val == null) val = \"\";\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      if (semicolonRE.test(val)) {\n        warn(\n          `Unexpected semicolon at the end of '${name}' style value: '${val}'`\n        );\n      }\n    }\n    if (name.startsWith(\"--\")) {\n      style.setProperty(name, val);\n    } else {\n      const prefixed = autoPrefix(style, name);\n      if (importantRE.test(val)) {\n        style.setProperty(\n          hyphenate(prefixed),\n          val.replace(importantRE, \"\"),\n          \"important\"\n        );\n      } else {\n        style[prefixed] = val;\n      }\n    }\n  }\n}\nconst prefixes = [\"Webkit\", \"Moz\", \"ms\"];\nconst prefixCache = {};\nfunction autoPrefix(style, rawName) {\n  const cached = prefixCache[rawName];\n  if (cached) {\n    return cached;\n  }\n  let name = camelize(rawName);\n  if (name !== \"filter\" && name in style) {\n    return prefixCache[rawName] = name;\n  }\n  name = capitalize(name);\n  for (let i = 0; i < prefixes.length; i++) {\n    const prefixed = prefixes[i] + name;\n    if (prefixed in style) {\n      return prefixCache[rawName] = prefixed;\n    }\n  }\n  return rawName;\n}\n\nconst xlinkNS = \"http://www.w3.org/1999/xlink\";\nfunction patchAttr(el, key, value, isSVG, instance, isBoolean = isSpecialBooleanAttr(key)) {\n  if (isSVG && key.startsWith(\"xlink:\")) {\n    if (value == null) {\n      el.removeAttributeNS(xlinkNS, key.slice(6, key.length));\n    } else {\n      el.setAttributeNS(xlinkNS, key, value);\n    }\n  } else {\n    if (value == null || isBoolean && !includeBooleanAttr(value)) {\n      el.removeAttribute(key);\n    } else {\n      el.setAttribute(\n        key,\n        isBoolean ? \"\" : isSymbol(value) ? String(value) : value\n      );\n    }\n  }\n}\n\nfunction patchDOMProp(el, key, value, parentComponent, attrName) {\n  if (key === \"innerHTML\" || key === \"textContent\") {\n    if (value != null) {\n      el[key] = key === \"innerHTML\" ? unsafeToTrustedHTML(value) : value;\n    }\n    return;\n  }\n  const tag = el.tagName;\n  if (key === \"value\" && tag !== \"PROGRESS\" && // custom elements may use _value internally\n  !tag.includes(\"-\")) {\n    const oldValue = tag === \"OPTION\" ? el.getAttribute(\"value\") || \"\" : el.value;\n    const newValue = value == null ? (\n      // #11647: value should be set as empty string for null and undefined,\n      // but <input type=\"checkbox\"> should be set as 'on'.\n      el.type === \"checkbox\" ? \"on\" : \"\"\n    ) : String(value);\n    if (oldValue !== newValue || !(\"_value\" in el)) {\n      el.value = newValue;\n    }\n    if (value == null) {\n      el.removeAttribute(key);\n    }\n    el._value = value;\n    return;\n  }\n  let needRemove = false;\n  if (value === \"\" || value == null) {\n    const type = typeof el[key];\n    if (type === \"boolean\") {\n      value = includeBooleanAttr(value);\n    } else if (value == null && type === \"string\") {\n      value = \"\";\n      needRemove = true;\n    } else if (type === \"number\") {\n      value = 0;\n      needRemove = true;\n    }\n  }\n  try {\n    el[key] = value;\n  } catch (e) {\n    if (!!(process.env.NODE_ENV !== \"production\") && !needRemove) {\n      warn(\n        `Failed setting prop \"${key}\" on <${tag.toLowerCase()}>: value ${value} is invalid.`,\n        e\n      );\n    }\n  }\n  needRemove && el.removeAttribute(attrName || key);\n}\n\nfunction addEventListener(el, event, handler, options) {\n  el.addEventListener(event, handler, options);\n}\nfunction removeEventListener(el, event, handler, options) {\n  el.removeEventListener(event, handler, options);\n}\nconst veiKey = Symbol(\"_vei\");\nfunction patchEvent(el, rawName, prevValue, nextValue, instance = null) {\n  const invokers = el[veiKey] || (el[veiKey] = {});\n  const existingInvoker = invokers[rawName];\n  if (nextValue && existingInvoker) {\n    existingInvoker.value = !!(process.env.NODE_ENV !== \"production\") ? sanitizeEventValue(nextValue, rawName) : nextValue;\n  } else {\n    const [name, options] = parseName(rawName);\n    if (nextValue) {\n      const invoker = invokers[rawName] = createInvoker(\n        !!(process.env.NODE_ENV !== \"production\") ? sanitizeEventValue(nextValue, rawName) : nextValue,\n        instance\n      );\n      addEventListener(el, name, invoker, options);\n    } else if (existingInvoker) {\n      removeEventListener(el, name, existingInvoker, options);\n      invokers[rawName] = void 0;\n    }\n  }\n}\nconst optionsModifierRE = /(?:Once|Passive|Capture)$/;\nfunction parseName(name) {\n  let options;\n  if (optionsModifierRE.test(name)) {\n    options = {};\n    let m;\n    while (m = name.match(optionsModifierRE)) {\n      name = name.slice(0, name.length - m[0].length);\n      options[m[0].toLowerCase()] = true;\n    }\n  }\n  const event = name[2] === \":\" ? name.slice(3) : hyphenate(name.slice(2));\n  return [event, options];\n}\nlet cachedNow = 0;\nconst p = /* @__PURE__ */ Promise.resolve();\nconst getNow = () => cachedNow || (p.then(() => cachedNow = 0), cachedNow = Date.now());\nfunction createInvoker(initialValue, instance) {\n  const invoker = (e) => {\n    if (!e._vts) {\n      e._vts = Date.now();\n    } else if (e._vts <= invoker.attached) {\n      return;\n    }\n    callWithAsyncErrorHandling(\n      patchStopImmediatePropagation(e, invoker.value),\n      instance,\n      5,\n      [e]\n    );\n  };\n  invoker.value = initialValue;\n  invoker.attached = getNow();\n  return invoker;\n}\nfunction sanitizeEventValue(value, propName) {\n  if (isFunction(value) || isArray(value)) {\n    return value;\n  }\n  warn(\n    `Wrong type passed as event handler to ${propName} - did you forget @ or : in front of your prop?\nExpected function or array of functions, received type ${typeof value}.`\n  );\n  return NOOP;\n}\nfunction patchStopImmediatePropagation(e, value) {\n  if (isArray(value)) {\n    const originalStop = e.stopImmediatePropagation;\n    e.stopImmediatePropagation = () => {\n      originalStop.call(e);\n      e._stopped = true;\n    };\n    return value.map(\n      (fn) => (e2) => !e2._stopped && fn && fn(e2)\n    );\n  } else {\n    return value;\n  }\n}\n\nconst isNativeOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // lowercase letter\nkey.charCodeAt(2) > 96 && key.charCodeAt(2) < 123;\nconst patchProp = (el, key, prevValue, nextValue, namespace, parentComponent) => {\n  const isSVG = namespace === \"svg\";\n  if (key === \"class\") {\n    patchClass(el, nextValue, isSVG);\n  } else if (key === \"style\") {\n    patchStyle(el, prevValue, nextValue);\n  } else if (isOn(key)) {\n    if (!isModelListener(key)) {\n      patchEvent(el, key, prevValue, nextValue, parentComponent);\n    }\n  } else if (key[0] === \".\" ? (key = key.slice(1), true) : key[0] === \"^\" ? (key = key.slice(1), false) : shouldSetAsProp(el, key, nextValue, isSVG)) {\n    patchDOMProp(el, key, nextValue);\n    if (!el.tagName.includes(\"-\") && (key === \"value\" || key === \"checked\" || key === \"selected\")) {\n      patchAttr(el, key, nextValue, isSVG, parentComponent, key !== \"value\");\n    }\n  } else if (\n    // #11081 force set props for possible async custom element\n    el._isVueCE && (/[A-Z]/.test(key) || !isString(nextValue))\n  ) {\n    patchDOMProp(el, camelize$1(key), nextValue, parentComponent, key);\n  } else {\n    if (key === \"true-value\") {\n      el._trueValue = nextValue;\n    } else if (key === \"false-value\") {\n      el._falseValue = nextValue;\n    }\n    patchAttr(el, key, nextValue, isSVG);\n  }\n};\nfunction shouldSetAsProp(el, key, value, isSVG) {\n  if (isSVG) {\n    if (key === \"innerHTML\" || key === \"textContent\") {\n      return true;\n    }\n    if (key in el && isNativeOn(key) && isFunction(value)) {\n      return true;\n    }\n    return false;\n  }\n  if (key === \"spellcheck\" || key === \"draggable\" || key === \"translate\") {\n    return false;\n  }\n  if (key === \"form\") {\n    return false;\n  }\n  if (key === \"list\" && el.tagName === \"INPUT\") {\n    return false;\n  }\n  if (key === \"type\" && el.tagName === \"TEXTAREA\") {\n    return false;\n  }\n  if (key === \"width\" || key === \"height\") {\n    const tag = el.tagName;\n    if (tag === \"IMG\" || tag === \"VIDEO\" || tag === \"CANVAS\" || tag === \"SOURCE\") {\n      return false;\n    }\n  }\n  if (isNativeOn(key) && isString(value)) {\n    return false;\n  }\n  return key in el;\n}\n\nconst REMOVAL = {};\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction defineCustomElement(options, extraOptions, _createApp) {\n  const Comp = defineComponent(options, extraOptions);\n  if (isPlainObject(Comp)) extend(Comp, extraOptions);\n  class VueCustomElement extends VueElement {\n    constructor(initialProps) {\n      super(Comp, initialProps, _createApp);\n    }\n  }\n  VueCustomElement.def = Comp;\n  return VueCustomElement;\n}\n/*! #__NO_SIDE_EFFECTS__ */\nconst defineSSRCustomElement = /* @__NO_SIDE_EFFECTS__ */ (options, extraOptions) => {\n  return /* @__PURE__ */ defineCustomElement(options, extraOptions, createSSRApp);\n};\nconst BaseClass = typeof HTMLElement !== \"undefined\" ? HTMLElement : class {\n};\nclass VueElement extends BaseClass {\n  constructor(_def, _props = {}, _createApp = createApp) {\n    super();\n    this._def = _def;\n    this._props = _props;\n    this._createApp = _createApp;\n    this._isVueCE = true;\n    /**\n     * @internal\n     */\n    this._instance = null;\n    /**\n     * @internal\n     */\n    this._app = null;\n    /**\n     * @internal\n     */\n    this._nonce = this._def.nonce;\n    this._connected = false;\n    this._resolved = false;\n    this._numberProps = null;\n    this._styleChildren = /* @__PURE__ */ new WeakSet();\n    this._ob = null;\n    if (this.shadowRoot && _createApp !== createApp) {\n      this._root = this.shadowRoot;\n    } else {\n      if (!!(process.env.NODE_ENV !== \"production\") && this.shadowRoot) {\n        warn(\n          `Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use \\`defineSSRCustomElement\\`.`\n        );\n      }\n      if (_def.shadowRoot !== false) {\n        this.attachShadow({ mode: \"open\" });\n        this._root = this.shadowRoot;\n      } else {\n        this._root = this;\n      }\n    }\n    if (!this._def.__asyncLoader) {\n      this._resolveProps(this._def);\n    }\n  }\n  connectedCallback() {\n    if (!this.isConnected) return;\n    if (!this.shadowRoot) {\n      this._parseSlots();\n    }\n    this._connected = true;\n    let parent = this;\n    while (parent = parent && (parent.parentNode || parent.host)) {\n      if (parent instanceof VueElement) {\n        this._parent = parent;\n        break;\n      }\n    }\n    if (!this._instance) {\n      if (this._resolved) {\n        this._setParent();\n        this._update();\n      } else {\n        if (parent && parent._pendingResolve) {\n          this._pendingResolve = parent._pendingResolve.then(() => {\n            this._pendingResolve = void 0;\n            this._resolveDef();\n          });\n        } else {\n          this._resolveDef();\n        }\n      }\n    }\n  }\n  _setParent(parent = this._parent) {\n    if (parent) {\n      this._instance.parent = parent._instance;\n      this._instance.provides = parent._instance.provides;\n    }\n  }\n  disconnectedCallback() {\n    this._connected = false;\n    nextTick(() => {\n      if (!this._connected) {\n        if (this._ob) {\n          this._ob.disconnect();\n          this._ob = null;\n        }\n        this._app && this._app.unmount();\n        if (this._instance) this._instance.ce = void 0;\n        this._app = this._instance = null;\n      }\n    });\n  }\n  /**\n   * resolve inner component definition (handle possible async component)\n   */\n  _resolveDef() {\n    if (this._pendingResolve) {\n      return;\n    }\n    for (let i = 0; i < this.attributes.length; i++) {\n      this._setAttr(this.attributes[i].name);\n    }\n    this._ob = new MutationObserver((mutations) => {\n      for (const m of mutations) {\n        this._setAttr(m.attributeName);\n      }\n    });\n    this._ob.observe(this, { attributes: true });\n    const resolve = (def, isAsync = false) => {\n      this._resolved = true;\n      this._pendingResolve = void 0;\n      const { props, styles } = def;\n      let numberProps;\n      if (props && !isArray(props)) {\n        for (const key in props) {\n          const opt = props[key];\n          if (opt === Number || opt && opt.type === Number) {\n            if (key in this._props) {\n              this._props[key] = toNumber(this._props[key]);\n            }\n            (numberProps || (numberProps = /* @__PURE__ */ Object.create(null)))[camelize$1(key)] = true;\n          }\n        }\n      }\n      this._numberProps = numberProps;\n      if (isAsync) {\n        this._resolveProps(def);\n      }\n      if (this.shadowRoot) {\n        this._applyStyles(styles);\n      } else if (!!(process.env.NODE_ENV !== \"production\") && styles) {\n        warn(\n          \"Custom element style injection is not supported when using shadowRoot: false\"\n        );\n      }\n      this._mount(def);\n    };\n    const asyncDef = this._def.__asyncLoader;\n    if (asyncDef) {\n      this._pendingResolve = asyncDef().then(\n        (def) => resolve(this._def = def, true)\n      );\n    } else {\n      resolve(this._def);\n    }\n  }\n  _mount(def) {\n    if ((!!(process.env.NODE_ENV !== \"production\") || __VUE_PROD_DEVTOOLS__) && !def.name) {\n      def.name = \"VueElement\";\n    }\n    this._app = this._createApp(def);\n    if (def.configureApp) {\n      def.configureApp(this._app);\n    }\n    this._app._ceVNode = this._createVNode();\n    this._app.mount(this._root);\n    const exposed = this._instance && this._instance.exposed;\n    if (!exposed) return;\n    for (const key in exposed) {\n      if (!hasOwn(this, key)) {\n        Object.defineProperty(this, key, {\n          // unwrap ref to be consistent with public instance behavior\n          get: () => unref(exposed[key])\n        });\n      } else if (!!(process.env.NODE_ENV !== \"production\")) {\n        warn(`Exposed property \"${key}\" already exists on custom element.`);\n      }\n    }\n  }\n  _resolveProps(def) {\n    const { props } = def;\n    const declaredPropKeys = isArray(props) ? props : Object.keys(props || {});\n    for (const key of Object.keys(this)) {\n      if (key[0] !== \"_\" && declaredPropKeys.includes(key)) {\n        this._setProp(key, this[key]);\n      }\n    }\n    for (const key of declaredPropKeys.map(camelize$1)) {\n      Object.defineProperty(this, key, {\n        get() {\n          return this._getProp(key);\n        },\n        set(val) {\n          this._setProp(key, val, true, true);\n        }\n      });\n    }\n  }\n  _setAttr(key) {\n    if (key.startsWith(\"data-v-\")) return;\n    const has = this.hasAttribute(key);\n    let value = has ? this.getAttribute(key) : REMOVAL;\n    const camelKey = camelize$1(key);\n    if (has && this._numberProps && this._numberProps[camelKey]) {\n      value = toNumber(value);\n    }\n    this._setProp(camelKey, value, false, true);\n  }\n  /**\n   * @internal\n   */\n  _getProp(key) {\n    return this._props[key];\n  }\n  /**\n   * @internal\n   */\n  _setProp(key, val, shouldReflect = true, shouldUpdate = false) {\n    if (val !== this._props[key]) {\n      if (val === REMOVAL) {\n        delete this._props[key];\n      } else {\n        this._props[key] = val;\n        if (key === \"key\" && this._app) {\n          this._app._ceVNode.key = val;\n        }\n      }\n      if (shouldUpdate && this._instance) {\n        this._update();\n      }\n      if (shouldReflect) {\n        const ob = this._ob;\n        ob && ob.disconnect();\n        if (val === true) {\n          this.setAttribute(hyphenate(key), \"\");\n        } else if (typeof val === \"string\" || typeof val === \"number\") {\n          this.setAttribute(hyphenate(key), val + \"\");\n        } else if (!val) {\n          this.removeAttribute(hyphenate(key));\n        }\n        ob && ob.observe(this, { attributes: true });\n      }\n    }\n  }\n  _update() {\n    render(this._createVNode(), this._root);\n  }\n  _createVNode() {\n    const baseProps = {};\n    if (!this.shadowRoot) {\n      baseProps.onVnodeMounted = baseProps.onVnodeUpdated = this._renderSlots.bind(this);\n    }\n    const vnode = createVNode(this._def, extend(baseProps, this._props));\n    if (!this._instance) {\n      vnode.ce = (instance) => {\n        this._instance = instance;\n        instance.ce = this;\n        instance.isCE = true;\n        if (!!(process.env.NODE_ENV !== \"production\")) {\n          instance.ceReload = (newStyles) => {\n            if (this._styles) {\n              this._styles.forEach((s) => this._root.removeChild(s));\n              this._styles.length = 0;\n            }\n            this._applyStyles(newStyles);\n            this._instance = null;\n            this._update();\n          };\n        }\n        const dispatch = (event, args) => {\n          this.dispatchEvent(\n            new CustomEvent(\n              event,\n              isPlainObject(args[0]) ? extend({ detail: args }, args[0]) : { detail: args }\n            )\n          );\n        };\n        instance.emit = (event, ...args) => {\n          dispatch(event, args);\n          if (hyphenate(event) !== event) {\n            dispatch(hyphenate(event), args);\n          }\n        };\n        this._setParent();\n      };\n    }\n    return vnode;\n  }\n  _applyStyles(styles, owner) {\n    if (!styles) return;\n    if (owner) {\n      if (owner === this._def || this._styleChildren.has(owner)) {\n        return;\n      }\n      this._styleChildren.add(owner);\n    }\n    const nonce = this._nonce;\n    for (let i = styles.length - 1; i >= 0; i--) {\n      const s = document.createElement(\"style\");\n      if (nonce) s.setAttribute(\"nonce\", nonce);\n      s.textContent = styles[i];\n      this.shadowRoot.prepend(s);\n      if (!!(process.env.NODE_ENV !== \"production\")) {\n        if (owner) {\n          if (owner.__hmrId) {\n            if (!this._childStyles) this._childStyles = /* @__PURE__ */ new Map();\n            let entry = this._childStyles.get(owner.__hmrId);\n            if (!entry) {\n              this._childStyles.set(owner.__hmrId, entry = []);\n            }\n            entry.push(s);\n          }\n        } else {\n          (this._styles || (this._styles = [])).push(s);\n        }\n      }\n    }\n  }\n  /**\n   * Only called when shadowRoot is false\n   */\n  _parseSlots() {\n    const slots = this._slots = {};\n    let n;\n    while (n = this.firstChild) {\n      const slotName = n.nodeType === 1 && n.getAttribute(\"slot\") || \"default\";\n      (slots[slotName] || (slots[slotName] = [])).push(n);\n      this.removeChild(n);\n    }\n  }\n  /**\n   * Only called when shadowRoot is false\n   */\n  _renderSlots() {\n    const outlets = (this._teleportTarget || this).querySelectorAll(\"slot\");\n    const scopeId = this._instance.type.__scopeId;\n    for (let i = 0; i < outlets.length; i++) {\n      const o = outlets[i];\n      const slotName = o.getAttribute(\"name\") || \"default\";\n      const content = this._slots[slotName];\n      const parent = o.parentNode;\n      if (content) {\n        for (const n of content) {\n          if (scopeId && n.nodeType === 1) {\n            const id = scopeId + \"-s\";\n            const walker = document.createTreeWalker(n, 1);\n            n.setAttribute(id, \"\");\n            let child;\n            while (child = walker.nextNode()) {\n              child.setAttribute(id, \"\");\n            }\n          }\n          parent.insertBefore(n, o);\n        }\n      } else {\n        while (o.firstChild) parent.insertBefore(o.firstChild, o);\n      }\n      parent.removeChild(o);\n    }\n  }\n  /**\n   * @internal\n   */\n  _injectChildStyle(comp) {\n    this._applyStyles(comp.styles, comp);\n  }\n  /**\n   * @internal\n   */\n  _removeChildStyle(comp) {\n    if (!!(process.env.NODE_ENV !== \"production\")) {\n      this._styleChildren.delete(comp);\n      if (this._childStyles && comp.__hmrId) {\n        const oldStyles = this._childStyles.get(comp.__hmrId);\n        if (oldStyles) {\n          oldStyles.forEach((s) => this._root.removeChild(s));\n          oldStyles.length = 0;\n        }\n      }\n    }\n  }\n}\nfunction useHost(caller) {\n  const instance = getCurrentInstance();\n  const el = instance && instance.ce;\n  if (el) {\n    return el;\n  } else if (!!(process.env.NODE_ENV !== \"production\")) {\n    if (!instance) {\n      warn(\n        `${caller || \"useHost\"} called without an active component instance.`\n      );\n    } else {\n      warn(\n        `${caller || \"useHost\"} can only be used in components defined via defineCustomElement.`\n      );\n    }\n  }\n  return null;\n}\nfunction useShadowRoot() {\n  const el = !!(process.env.NODE_ENV !== \"production\") ? useHost(\"useShadowRoot\") : useHost();\n  return el && el.shadowRoot;\n}\n\nfunction useCssModule(name = \"$style\") {\n  {\n    const instance = getCurrentInstance();\n    if (!instance) {\n      !!(process.env.NODE_ENV !== \"production\") && warn(`useCssModule must be called inside setup()`);\n      return EMPTY_OBJ;\n    }\n    const modules = instance.type.__cssModules;\n    if (!modules) {\n      !!(process.env.NODE_ENV !== \"production\") && warn(`Current instance does not have CSS modules injected.`);\n      return EMPTY_OBJ;\n    }\n    const mod = modules[name];\n    if (!mod) {\n      !!(process.env.NODE_ENV !== \"production\") && warn(`Current instance does not have CSS module named \"${name}\".`);\n      return EMPTY_OBJ;\n    }\n    return mod;\n  }\n}\n\nconst positionMap = /* @__PURE__ */ new WeakMap();\nconst newPositionMap = /* @__PURE__ */ new WeakMap();\nconst moveCbKey = Symbol(\"_moveCb\");\nconst enterCbKey = Symbol(\"_enterCb\");\nconst decorate = (t) => {\n  delete t.props.mode;\n  return t;\n};\nconst TransitionGroupImpl = /* @__PURE__ */ decorate({\n  name: \"TransitionGroup\",\n  props: /* @__PURE__ */ extend({}, TransitionPropsValidators, {\n    tag: String,\n    moveClass: String\n  }),\n  setup(props, { slots }) {\n    const instance = getCurrentInstance();\n    const state = useTransitionState();\n    let prevChildren;\n    let children;\n    onUpdated(() => {\n      if (!prevChildren.length) {\n        return;\n      }\n      const moveClass = props.moveClass || `${props.name || \"v\"}-move`;\n      if (!hasCSSTransform(\n        prevChildren[0].el,\n        instance.vnode.el,\n        moveClass\n      )) {\n        return;\n      }\n      prevChildren.forEach(callPendingCbs);\n      prevChildren.forEach(recordPosition);\n      const movedChildren = prevChildren.filter(applyTranslation);\n      forceReflow();\n      movedChildren.forEach((c) => {\n        const el = c.el;\n        const style = el.style;\n        addTransitionClass(el, moveClass);\n        style.transform = style.webkitTransform = style.transitionDuration = \"\";\n        const cb = el[moveCbKey] = (e) => {\n          if (e && e.target !== el) {\n            return;\n          }\n          if (!e || /transform$/.test(e.propertyName)) {\n            el.removeEventListener(\"transitionend\", cb);\n            el[moveCbKey] = null;\n            removeTransitionClass(el, moveClass);\n          }\n        };\n        el.addEventListener(\"transitionend\", cb);\n      });\n    });\n    return () => {\n      const rawProps = toRaw(props);\n      const cssTransitionProps = resolveTransitionProps(rawProps);\n      let tag = rawProps.tag || Fragment;\n      prevChildren = [];\n      if (children) {\n        for (let i = 0; i < children.length; i++) {\n          const child = children[i];\n          if (child.el && child.el instanceof Element) {\n            prevChildren.push(child);\n            setTransitionHooks(\n              child,\n              resolveTransitionHooks(\n                child,\n                cssTransitionProps,\n                state,\n                instance\n              )\n            );\n            positionMap.set(\n              child,\n              child.el.getBoundingClientRect()\n            );\n          }\n        }\n      }\n      children = slots.default ? getTransitionRawChildren(slots.default()) : [];\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        if (child.key != null) {\n          setTransitionHooks(\n            child,\n            resolveTransitionHooks(child, cssTransitionProps, state, instance)\n          );\n        } else if (!!(process.env.NODE_ENV !== \"production\") && child.type !== Text) {\n          warn(`<TransitionGroup> children must be keyed.`);\n        }\n      }\n      return createVNode(tag, null, children);\n    };\n  }\n});\nconst TransitionGroup = TransitionGroupImpl;\nfunction callPendingCbs(c) {\n  const el = c.el;\n  if (el[moveCbKey]) {\n    el[moveCbKey]();\n  }\n  if (el[enterCbKey]) {\n    el[enterCbKey]();\n  }\n}\nfunction recordPosition(c) {\n  newPositionMap.set(c, c.el.getBoundingClientRect());\n}\nfunction applyTranslation(c) {\n  const oldPos = positionMap.get(c);\n  const newPos = newPositionMap.get(c);\n  const dx = oldPos.left - newPos.left;\n  const dy = oldPos.top - newPos.top;\n  if (dx || dy) {\n    const s = c.el.style;\n    s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;\n    s.transitionDuration = \"0s\";\n    return c;\n  }\n}\nfunction hasCSSTransform(el, root, moveClass) {\n  const clone = el.cloneNode();\n  const _vtc = el[vtcKey];\n  if (_vtc) {\n    _vtc.forEach((cls) => {\n      cls.split(/\\s+/).forEach((c) => c && clone.classList.remove(c));\n    });\n  }\n  moveClass.split(/\\s+/).forEach((c) => c && clone.classList.add(c));\n  clone.style.display = \"none\";\n  const container = root.nodeType === 1 ? root : root.parentNode;\n  container.appendChild(clone);\n  const { hasTransform } = getTransitionInfo(clone);\n  container.removeChild(clone);\n  return hasTransform;\n}\n\nconst getModelAssigner = (vnode) => {\n  const fn = vnode.props[\"onUpdate:modelValue\"] || false;\n  return isArray(fn) ? (value) => invokeArrayFns(fn, value) : fn;\n};\nfunction onCompositionStart(e) {\n  e.target.composing = true;\n}\nfunction onCompositionEnd(e) {\n  const target = e.target;\n  if (target.composing) {\n    target.composing = false;\n    target.dispatchEvent(new Event(\"input\"));\n  }\n}\nconst assignKey = Symbol(\"_assign\");\nconst vModelText = {\n  created(el, { modifiers: { lazy, trim, number } }, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    const castToNumber = number || vnode.props && vnode.props.type === \"number\";\n    addEventListener(el, lazy ? \"change\" : \"input\", (e) => {\n      if (e.target.composing) return;\n      let domValue = el.value;\n      if (trim) {\n        domValue = domValue.trim();\n      }\n      if (castToNumber) {\n        domValue = looseToNumber(domValue);\n      }\n      el[assignKey](domValue);\n    });\n    if (trim) {\n      addEventListener(el, \"change\", () => {\n        el.value = el.value.trim();\n      });\n    }\n    if (!lazy) {\n      addEventListener(el, \"compositionstart\", onCompositionStart);\n      addEventListener(el, \"compositionend\", onCompositionEnd);\n      addEventListener(el, \"change\", onCompositionEnd);\n    }\n  },\n  // set value on mounted so it's after min/max for type=\"range\"\n  mounted(el, { value }) {\n    el.value = value == null ? \"\" : value;\n  },\n  beforeUpdate(el, { value, oldValue, modifiers: { lazy, trim, number } }, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    if (el.composing) return;\n    const elValue = (number || el.type === \"number\") && !/^0\\d/.test(el.value) ? looseToNumber(el.value) : el.value;\n    const newValue = value == null ? \"\" : value;\n    if (elValue === newValue) {\n      return;\n    }\n    if (document.activeElement === el && el.type !== \"range\") {\n      if (lazy && value === oldValue) {\n        return;\n      }\n      if (trim && el.value.trim() === newValue) {\n        return;\n      }\n    }\n    el.value = newValue;\n  }\n};\nconst vModelCheckbox = {\n  // #4096 array checkboxes need to be deep traversed\n  deep: true,\n  created(el, _, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    addEventListener(el, \"change\", () => {\n      const modelValue = el._modelValue;\n      const elementValue = getValue(el);\n      const checked = el.checked;\n      const assign = el[assignKey];\n      if (isArray(modelValue)) {\n        const index = looseIndexOf(modelValue, elementValue);\n        const found = index !== -1;\n        if (checked && !found) {\n          assign(modelValue.concat(elementValue));\n        } else if (!checked && found) {\n          const filtered = [...modelValue];\n          filtered.splice(index, 1);\n          assign(filtered);\n        }\n      } else if (isSet(modelValue)) {\n        const cloned = new Set(modelValue);\n        if (checked) {\n          cloned.add(elementValue);\n        } else {\n          cloned.delete(elementValue);\n        }\n        assign(cloned);\n      } else {\n        assign(getCheckboxValue(el, checked));\n      }\n    });\n  },\n  // set initial checked on mount to wait for true-value/false-value\n  mounted: setChecked,\n  beforeUpdate(el, binding, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    setChecked(el, binding, vnode);\n  }\n};\nfunction setChecked(el, { value, oldValue }, vnode) {\n  el._modelValue = value;\n  let checked;\n  if (isArray(value)) {\n    checked = looseIndexOf(value, vnode.props.value) > -1;\n  } else if (isSet(value)) {\n    checked = value.has(vnode.props.value);\n  } else {\n    if (value === oldValue) return;\n    checked = looseEqual(value, getCheckboxValue(el, true));\n  }\n  if (el.checked !== checked) {\n    el.checked = checked;\n  }\n}\nconst vModelRadio = {\n  created(el, { value }, vnode) {\n    el.checked = looseEqual(value, vnode.props.value);\n    el[assignKey] = getModelAssigner(vnode);\n    addEventListener(el, \"change\", () => {\n      el[assignKey](getValue(el));\n    });\n  },\n  beforeUpdate(el, { value, oldValue }, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n    if (value !== oldValue) {\n      el.checked = looseEqual(value, vnode.props.value);\n    }\n  }\n};\nconst vModelSelect = {\n  // <select multiple> value need to be deep traversed\n  deep: true,\n  created(el, { value, modifiers: { number } }, vnode) {\n    const isSetModel = isSet(value);\n    addEventListener(el, \"change\", () => {\n      const selectedVal = Array.prototype.filter.call(el.options, (o) => o.selected).map(\n        (o) => number ? looseToNumber(getValue(o)) : getValue(o)\n      );\n      el[assignKey](\n        el.multiple ? isSetModel ? new Set(selectedVal) : selectedVal : selectedVal[0]\n      );\n      el._assigning = true;\n      nextTick(() => {\n        el._assigning = false;\n      });\n    });\n    el[assignKey] = getModelAssigner(vnode);\n  },\n  // set value in mounted & updated because <select> relies on its children\n  // <option>s.\n  mounted(el, { value }) {\n    setSelected(el, value);\n  },\n  beforeUpdate(el, _binding, vnode) {\n    el[assignKey] = getModelAssigner(vnode);\n  },\n  updated(el, { value }) {\n    if (!el._assigning) {\n      setSelected(el, value);\n    }\n  }\n};\nfunction setSelected(el, value) {\n  const isMultiple = el.multiple;\n  const isArrayValue = isArray(value);\n  if (isMultiple && !isArrayValue && !isSet(value)) {\n    !!(process.env.NODE_ENV !== \"production\") && warn(\n      `<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(value).slice(8, -1)}.`\n    );\n    return;\n  }\n  for (let i = 0, l = el.options.length; i < l; i++) {\n    const option = el.options[i];\n    const optionValue = getValue(option);\n    if (isMultiple) {\n      if (isArrayValue) {\n        const optionType = typeof optionValue;\n        if (optionType === \"string\" || optionType === \"number\") {\n          option.selected = value.some((v) => String(v) === String(optionValue));\n        } else {\n          option.selected = looseIndexOf(value, optionValue) > -1;\n        }\n      } else {\n        option.selected = value.has(optionValue);\n      }\n    } else if (looseEqual(getValue(option), value)) {\n      if (el.selectedIndex !== i) el.selectedIndex = i;\n      return;\n    }\n  }\n  if (!isMultiple && el.selectedIndex !== -1) {\n    el.selectedIndex = -1;\n  }\n}\nfunction getValue(el) {\n  return \"_value\" in el ? el._value : el.value;\n}\nfunction getCheckboxValue(el, checked) {\n  const key = checked ? \"_trueValue\" : \"_falseValue\";\n  return key in el ? el[key] : checked;\n}\nconst vModelDynamic = {\n  created(el, binding, vnode) {\n    callModelHook(el, binding, vnode, null, \"created\");\n  },\n  mounted(el, binding, vnode) {\n    callModelHook(el, binding, vnode, null, \"mounted\");\n  },\n  beforeUpdate(el, binding, vnode, prevVNode) {\n    callModelHook(el, binding, vnode, prevVNode, \"beforeUpdate\");\n  },\n  updated(el, binding, vnode, prevVNode) {\n    callModelHook(el, binding, vnode, prevVNode, \"updated\");\n  }\n};\nfunction resolveDynamicModel(tagName, type) {\n  switch (tagName) {\n    case \"SELECT\":\n      return vModelSelect;\n    case \"TEXTAREA\":\n      return vModelText;\n    default:\n      switch (type) {\n        case \"checkbox\":\n          return vModelCheckbox;\n        case \"radio\":\n          return vModelRadio;\n        default:\n          return vModelText;\n      }\n  }\n}\nfunction callModelHook(el, binding, vnode, prevVNode, hook) {\n  const modelToUse = resolveDynamicModel(\n    el.tagName,\n    vnode.props && vnode.props.type\n  );\n  const fn = modelToUse[hook];\n  fn && fn(el, binding, vnode, prevVNode);\n}\nfunction initVModelForSSR() {\n  vModelText.getSSRProps = ({ value }) => ({ value });\n  vModelRadio.getSSRProps = ({ value }, vnode) => {\n    if (vnode.props && looseEqual(vnode.props.value, value)) {\n      return { checked: true };\n    }\n  };\n  vModelCheckbox.getSSRProps = ({ value }, vnode) => {\n    if (isArray(value)) {\n      if (vnode.props && looseIndexOf(value, vnode.props.value) > -1) {\n        return { checked: true };\n      }\n    } else if (isSet(value)) {\n      if (vnode.props && value.has(vnode.props.value)) {\n        return { checked: true };\n      }\n    } else if (value) {\n      return { checked: true };\n    }\n  };\n  vModelDynamic.getSSRProps = (binding, vnode) => {\n    if (typeof vnode.type !== \"string\") {\n      return;\n    }\n    const modelToUse = resolveDynamicModel(\n      // resolveDynamicModel expects an uppercase tag name, but vnode.type is lowercase\n      vnode.type.toUpperCase(),\n      vnode.props && vnode.props.type\n    );\n    if (modelToUse.getSSRProps) {\n      return modelToUse.getSSRProps(binding, vnode);\n    }\n  };\n}\n\nconst systemModifiers = [\"ctrl\", \"shift\", \"alt\", \"meta\"];\nconst modifierGuards = {\n  stop: (e) => e.stopPropagation(),\n  prevent: (e) => e.preventDefault(),\n  self: (e) => e.target !== e.currentTarget,\n  ctrl: (e) => !e.ctrlKey,\n  shift: (e) => !e.shiftKey,\n  alt: (e) => !e.altKey,\n  meta: (e) => !e.metaKey,\n  left: (e) => \"button\" in e && e.button !== 0,\n  middle: (e) => \"button\" in e && e.button !== 1,\n  right: (e) => \"button\" in e && e.button !== 2,\n  exact: (e, modifiers) => systemModifiers.some((m) => e[`${m}Key`] && !modifiers.includes(m))\n};\nconst withModifiers = (fn, modifiers) => {\n  const cache = fn._withMods || (fn._withMods = {});\n  const cacheKey = modifiers.join(\".\");\n  return cache[cacheKey] || (cache[cacheKey] = (event, ...args) => {\n    for (let i = 0; i < modifiers.length; i++) {\n      const guard = modifierGuards[modifiers[i]];\n      if (guard && guard(event, modifiers)) return;\n    }\n    return fn(event, ...args);\n  });\n};\nconst keyNames = {\n  esc: \"escape\",\n  space: \" \",\n  up: \"arrow-up\",\n  left: \"arrow-left\",\n  right: \"arrow-right\",\n  down: \"arrow-down\",\n  delete: \"backspace\"\n};\nconst withKeys = (fn, modifiers) => {\n  const cache = fn._withKeys || (fn._withKeys = {});\n  const cacheKey = modifiers.join(\".\");\n  return cache[cacheKey] || (cache[cacheKey] = (event) => {\n    if (!(\"key\" in event)) {\n      return;\n    }\n    const eventKey = hyphenate(event.key);\n    if (modifiers.some(\n      (k) => k === eventKey || keyNames[k] === eventKey\n    )) {\n      return fn(event);\n    }\n  });\n};\n\nconst rendererOptions = /* @__PURE__ */ extend({ patchProp }, nodeOps);\nlet renderer;\nlet enabledHydration = false;\nfunction ensureRenderer() {\n  return renderer || (renderer = createRenderer(rendererOptions));\n}\nfunction ensureHydrationRenderer() {\n  renderer = enabledHydration ? renderer : createHydrationRenderer(rendererOptions);\n  enabledHydration = true;\n  return renderer;\n}\nconst render = (...args) => {\n  ensureRenderer().render(...args);\n};\nconst hydrate = (...args) => {\n  ensureHydrationRenderer().hydrate(...args);\n};\nconst createApp = (...args) => {\n  const app = ensureRenderer().createApp(...args);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    injectNativeTagCheck(app);\n    injectCompilerOptionsCheck(app);\n  }\n  const { mount } = app;\n  app.mount = (containerOrSelector) => {\n    const container = normalizeContainer(containerOrSelector);\n    if (!container) return;\n    const component = app._component;\n    if (!isFunction(component) && !component.render && !component.template) {\n      component.template = container.innerHTML;\n    }\n    if (container.nodeType === 1) {\n      container.textContent = \"\";\n    }\n    const proxy = mount(container, false, resolveRootNamespace(container));\n    if (container instanceof Element) {\n      container.removeAttribute(\"v-cloak\");\n      container.setAttribute(\"data-v-app\", \"\");\n    }\n    return proxy;\n  };\n  return app;\n};\nconst createSSRApp = (...args) => {\n  const app = ensureHydrationRenderer().createApp(...args);\n  if (!!(process.env.NODE_ENV !== \"production\")) {\n    injectNativeTagCheck(app);\n    injectCompilerOptionsCheck(app);\n  }\n  const { mount } = app;\n  app.mount = (containerOrSelector) => {\n    const container = normalizeContainer(containerOrSelector);\n    if (container) {\n      return mount(container, true, resolveRootNamespace(container));\n    }\n  };\n  return app;\n};\nfunction resolveRootNamespace(container) {\n  if (container instanceof SVGElement) {\n    return \"svg\";\n  }\n  if (typeof MathMLElement === \"function\" && container instanceof MathMLElement) {\n    return \"mathml\";\n  }\n}\nfunction injectNativeTagCheck(app) {\n  Object.defineProperty(app.config, \"isNativeTag\", {\n    value: (tag) => isHTMLTag(tag) || isSVGTag(tag) || isMathMLTag(tag),\n    writable: false\n  });\n}\nfunction injectCompilerOptionsCheck(app) {\n  if (isRuntimeOnly()) {\n    const isCustomElement = app.config.isCustomElement;\n    Object.defineProperty(app.config, \"isCustomElement\", {\n      get() {\n        return isCustomElement;\n      },\n      set() {\n        warn(\n          `The \\`isCustomElement\\` config option is deprecated. Use \\`compilerOptions.isCustomElement\\` instead.`\n        );\n      }\n    });\n    const compilerOptions = app.config.compilerOptions;\n    const msg = `The \\`compilerOptions\\` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka \"full build\"). Since you are using the runtime-only build, \\`compilerOptions\\` must be passed to \\`@vue/compiler-dom\\` in the build setup instead.\n- For vue-loader: pass it via vue-loader's \\`compilerOptions\\` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc`;\n    Object.defineProperty(app.config, \"compilerOptions\", {\n      get() {\n        warn(msg);\n        return compilerOptions;\n      },\n      set() {\n        warn(msg);\n      }\n    });\n  }\n}\nfunction normalizeContainer(container) {\n  if (isString(container)) {\n    const res = document.querySelector(container);\n    if (!!(process.env.NODE_ENV !== \"production\") && !res) {\n      warn(\n        `Failed to mount app: mount target selector \"${container}\" returned null.`\n      );\n    }\n    return res;\n  }\n  if (!!(process.env.NODE_ENV !== \"production\") && window.ShadowRoot && container instanceof window.ShadowRoot && container.mode === \"closed\") {\n    warn(\n      `mounting on a ShadowRoot with \\`{mode: \"closed\"}\\` may lead to unpredictable bugs`\n    );\n  }\n  return container;\n}\nlet ssrDirectiveInitialized = false;\nconst initDirectivesForSSR = () => {\n  if (!ssrDirectiveInitialized) {\n    ssrDirectiveInitialized = true;\n    initVModelForSSR();\n    initVShowForSSR();\n  }\n} ;\n\nexport { Transition, TransitionGroup, VueElement, createApp, createSSRApp, defineCustomElement, defineSSRCustomElement, hydrate, initDirectivesForSSR, render, useCssModule, useCssVars, useHost, useShadowRoot, vModelCheckbox, vModelDynamic, vModelRadio, vModelSelect, vModelText, vShow, withKeys, withModifiers };\n","/**\n* @vue/shared v3.5.13\n* (c) 2018-present Yuxi (Evan) You and Vue contributors\n* @license MIT\n**/\n/*! #__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nfunction makeMap(str) {\n  const map = /* @__PURE__ */ Object.create(null);\n  for (const key of str.split(\",\")) map[key] = 1;\n  return (val) => val in map;\n}\n\nconst EMPTY_OBJ = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze({}) : {};\nconst EMPTY_ARR = !!(process.env.NODE_ENV !== \"production\") ? Object.freeze([]) : [];\nconst NOOP = () => {\n};\nconst NO = () => false;\nconst isOn = (key) => key.charCodeAt(0) === 111 && key.charCodeAt(1) === 110 && // uppercase letter\n(key.charCodeAt(2) > 122 || key.charCodeAt(2) < 97);\nconst isModelListener = (key) => key.startsWith(\"onUpdate:\");\nconst extend = Object.assign;\nconst remove = (arr, el) => {\n  const i = arr.indexOf(el);\n  if (i > -1) {\n    arr.splice(i, 1);\n  }\n};\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\nconst isArray = Array.isArray;\nconst isMap = (val) => toTypeString(val) === \"[object Map]\";\nconst isSet = (val) => toTypeString(val) === \"[object Set]\";\nconst isDate = (val) => toTypeString(val) === \"[object Date]\";\nconst isRegExp = (val) => toTypeString(val) === \"[object RegExp]\";\nconst isFunction = (val) => typeof val === \"function\";\nconst isString = (val) => typeof val === \"string\";\nconst isSymbol = (val) => typeof val === \"symbol\";\nconst isObject = (val) => val !== null && typeof val === \"object\";\nconst isPromise = (val) => {\n  return (isObject(val) || isFunction(val)) && isFunction(val.then) && isFunction(val.catch);\n};\nconst objectToString = Object.prototype.toString;\nconst toTypeString = (value) => objectToString.call(value);\nconst toRawType = (value) => {\n  return toTypeString(value).slice(8, -1);\n};\nconst isPlainObject = (val) => toTypeString(val) === \"[object Object]\";\nconst isIntegerKey = (key) => isString(key) && key !== \"NaN\" && key[0] !== \"-\" && \"\" + parseInt(key, 10) === key;\nconst isReservedProp = /* @__PURE__ */ makeMap(\n  // the leading comma is intentional so empty string \"\" is also included\n  \",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted\"\n);\nconst isBuiltInDirective = /* @__PURE__ */ makeMap(\n  \"bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo\"\n);\nconst cacheStringFunction = (fn) => {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return (str) => {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n};\nconst camelizeRE = /-(\\w)/g;\nconst camelize = cacheStringFunction(\n  (str) => {\n    return str.replace(camelizeRE, (_, c) => c ? c.toUpperCase() : \"\");\n  }\n);\nconst hyphenateRE = /\\B([A-Z])/g;\nconst hyphenate = cacheStringFunction(\n  (str) => str.replace(hyphenateRE, \"-$1\").toLowerCase()\n);\nconst capitalize = cacheStringFunction((str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\nconst toHandlerKey = cacheStringFunction(\n  (str) => {\n    const s = str ? `on${capitalize(str)}` : ``;\n    return s;\n  }\n);\nconst hasChanged = (value, oldValue) => !Object.is(value, oldValue);\nconst invokeArrayFns = (fns, ...arg) => {\n  for (let i = 0; i < fns.length; i++) {\n    fns[i](...arg);\n  }\n};\nconst def = (obj, key, value, writable = false) => {\n  Object.defineProperty(obj, key, {\n    configurable: true,\n    enumerable: false,\n    writable,\n    value\n  });\n};\nconst looseToNumber = (val) => {\n  const n = parseFloat(val);\n  return isNaN(n) ? val : n;\n};\nconst toNumber = (val) => {\n  const n = isString(val) ? Number(val) : NaN;\n  return isNaN(n) ? val : n;\n};\nlet _globalThis;\nconst getGlobalThis = () => {\n  return _globalThis || (_globalThis = typeof globalThis !== \"undefined\" ? globalThis : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : {});\n};\nconst identRE = /^[_$a-zA-Z\\xA0-\\uFFFF][_$a-zA-Z0-9\\xA0-\\uFFFF]*$/;\nfunction genPropsAccessExp(name) {\n  return identRE.test(name) ? `__props.${name}` : `__props[${JSON.stringify(name)}]`;\n}\nfunction genCacheKey(source, options) {\n  return source + JSON.stringify(\n    options,\n    (_, val) => typeof val === \"function\" ? val.toString() : val\n  );\n}\n\nconst PatchFlags = {\n  \"TEXT\": 1,\n  \"1\": \"TEXT\",\n  \"CLASS\": 2,\n  \"2\": \"CLASS\",\n  \"STYLE\": 4,\n  \"4\": \"STYLE\",\n  \"PROPS\": 8,\n  \"8\": \"PROPS\",\n  \"FULL_PROPS\": 16,\n  \"16\": \"FULL_PROPS\",\n  \"NEED_HYDRATION\": 32,\n  \"32\": \"NEED_HYDRATION\",\n  \"STABLE_FRAGMENT\": 64,\n  \"64\": \"STABLE_FRAGMENT\",\n  \"KEYED_FRAGMENT\": 128,\n  \"128\": \"KEYED_FRAGMENT\",\n  \"UNKEYED_FRAGMENT\": 256,\n  \"256\": \"UNKEYED_FRAGMENT\",\n  \"NEED_PATCH\": 512,\n  \"512\": \"NEED_PATCH\",\n  \"DYNAMIC_SLOTS\": 1024,\n  \"1024\": \"DYNAMIC_SLOTS\",\n  \"DEV_ROOT_FRAGMENT\": 2048,\n  \"2048\": \"DEV_ROOT_FRAGMENT\",\n  \"CACHED\": -1,\n  \"-1\": \"CACHED\",\n  \"BAIL\": -2,\n  \"-2\": \"BAIL\"\n};\nconst PatchFlagNames = {\n  [1]: `TEXT`,\n  [2]: `CLASS`,\n  [4]: `STYLE`,\n  [8]: `PROPS`,\n  [16]: `FULL_PROPS`,\n  [32]: `NEED_HYDRATION`,\n  [64]: `STABLE_FRAGMENT`,\n  [128]: `KEYED_FRAGMENT`,\n  [256]: `UNKEYED_FRAGMENT`,\n  [512]: `NEED_PATCH`,\n  [1024]: `DYNAMIC_SLOTS`,\n  [2048]: `DEV_ROOT_FRAGMENT`,\n  [-1]: `HOISTED`,\n  [-2]: `BAIL`\n};\n\nconst ShapeFlags = {\n  \"ELEMENT\": 1,\n  \"1\": \"ELEMENT\",\n  \"FUNCTIONAL_COMPONENT\": 2,\n  \"2\": \"FUNCTIONAL_COMPONENT\",\n  \"STATEFUL_COMPONENT\": 4,\n  \"4\": \"STATEFUL_COMPONENT\",\n  \"TEXT_CHILDREN\": 8,\n  \"8\": \"TEXT_CHILDREN\",\n  \"ARRAY_CHILDREN\": 16,\n  \"16\": \"ARRAY_CHILDREN\",\n  \"SLOTS_CHILDREN\": 32,\n  \"32\": \"SLOTS_CHILDREN\",\n  \"TELEPORT\": 64,\n  \"64\": \"TELEPORT\",\n  \"SUSPENSE\": 128,\n  \"128\": \"SUSPENSE\",\n  \"COMPONENT_SHOULD_KEEP_ALIVE\": 256,\n  \"256\": \"COMPONENT_SHOULD_KEEP_ALIVE\",\n  \"COMPONENT_KEPT_ALIVE\": 512,\n  \"512\": \"COMPONENT_KEPT_ALIVE\",\n  \"COMPONENT\": 6,\n  \"6\": \"COMPONENT\"\n};\n\nconst SlotFlags = {\n  \"STABLE\": 1,\n  \"1\": \"STABLE\",\n  \"DYNAMIC\": 2,\n  \"2\": \"DYNAMIC\",\n  \"FORWARDED\": 3,\n  \"3\": \"FORWARDED\"\n};\nconst slotFlagsText = {\n  [1]: \"STABLE\",\n  [2]: \"DYNAMIC\",\n  [3]: \"FORWARDED\"\n};\n\nconst GLOBALS_ALLOWED = \"Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol\";\nconst isGloballyAllowed = /* @__PURE__ */ makeMap(GLOBALS_ALLOWED);\nconst isGloballyWhitelisted = isGloballyAllowed;\n\nconst range = 2;\nfunction generateCodeFrame(source, start = 0, end = source.length) {\n  start = Math.max(0, Math.min(start, source.length));\n  end = Math.max(0, Math.min(end, source.length));\n  if (start > end) return \"\";\n  let lines = source.split(/(\\r?\\n)/);\n  const newlineSequences = lines.filter((_, idx) => idx % 2 === 1);\n  lines = lines.filter((_, idx) => idx % 2 === 0);\n  let count = 0;\n  const res = [];\n  for (let i = 0; i < lines.length; i++) {\n    count += lines[i].length + (newlineSequences[i] && newlineSequences[i].length || 0);\n    if (count >= start) {\n      for (let j = i - range; j <= i + range || end > count; j++) {\n        if (j < 0 || j >= lines.length) continue;\n        const line = j + 1;\n        res.push(\n          `${line}${\" \".repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`\n        );\n        const lineLength = lines[j].length;\n        const newLineSeqLength = newlineSequences[j] && newlineSequences[j].length || 0;\n        if (j === i) {\n          const pad = start - (count - (lineLength + newLineSeqLength));\n          const length = Math.max(\n            1,\n            end > count ? lineLength - pad : end - start\n          );\n          res.push(`   |  ` + \" \".repeat(pad) + \"^\".repeat(length));\n        } else if (j > i) {\n          if (end > count) {\n            const length = Math.max(Math.min(end - count, lineLength), 1);\n            res.push(`   |  ` + \"^\".repeat(length));\n          }\n          count += lineLength + newLineSeqLength;\n        }\n      }\n      break;\n    }\n  }\n  return res.join(\"\\n\");\n}\n\nfunction normalizeStyle(value) {\n  if (isArray(value)) {\n    const res = {};\n    for (let i = 0; i < value.length; i++) {\n      const item = value[i];\n      const normalized = isString(item) ? parseStringStyle(item) : normalizeStyle(item);\n      if (normalized) {\n        for (const key in normalized) {\n          res[key] = normalized[key];\n        }\n      }\n    }\n    return res;\n  } else if (isString(value) || isObject(value)) {\n    return value;\n  }\n}\nconst listDelimiterRE = /;(?![^(]*\\))/g;\nconst propertyDelimiterRE = /:([^]+)/;\nconst styleCommentRE = /\\/\\*[^]*?\\*\\//g;\nfunction parseStringStyle(cssText) {\n  const ret = {};\n  cssText.replace(styleCommentRE, \"\").split(listDelimiterRE).forEach((item) => {\n    if (item) {\n      const tmp = item.split(propertyDelimiterRE);\n      tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\n    }\n  });\n  return ret;\n}\nfunction stringifyStyle(styles) {\n  if (!styles) return \"\";\n  if (isString(styles)) return styles;\n  let ret = \"\";\n  for (const key in styles) {\n    const value = styles[key];\n    if (isString(value) || typeof value === \"number\") {\n      const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\n      ret += `${normalizedKey}:${value};`;\n    }\n  }\n  return ret;\n}\nfunction normalizeClass(value) {\n  let res = \"\";\n  if (isString(value)) {\n    res = value;\n  } else if (isArray(value)) {\n    for (let i = 0; i < value.length; i++) {\n      const normalized = normalizeClass(value[i]);\n      if (normalized) {\n        res += normalized + \" \";\n      }\n    }\n  } else if (isObject(value)) {\n    for (const name in value) {\n      if (value[name]) {\n        res += name + \" \";\n      }\n    }\n  }\n  return res.trim();\n}\nfunction normalizeProps(props) {\n  if (!props) return null;\n  let { class: klass, style } = props;\n  if (klass && !isString(klass)) {\n    props.class = normalizeClass(klass);\n  }\n  if (style) {\n    props.style = normalizeStyle(style);\n  }\n  return props;\n}\n\nconst HTML_TAGS = \"html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot\";\nconst SVG_TAGS = \"svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view\";\nconst MATH_TAGS = \"annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics\";\nconst VOID_TAGS = \"area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr\";\nconst isHTMLTag = /* @__PURE__ */ makeMap(HTML_TAGS);\nconst isSVGTag = /* @__PURE__ */ makeMap(SVG_TAGS);\nconst isMathMLTag = /* @__PURE__ */ makeMap(MATH_TAGS);\nconst isVoidTag = /* @__PURE__ */ makeMap(VOID_TAGS);\n\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\nconst isSpecialBooleanAttr = /* @__PURE__ */ makeMap(specialBooleanAttrs);\nconst isBooleanAttr = /* @__PURE__ */ makeMap(\n  specialBooleanAttrs + `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected`\n);\nfunction includeBooleanAttr(value) {\n  return !!value || value === \"\";\n}\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\nconst attrValidationCache = {};\nfunction isSSRSafeAttrName(name) {\n  if (attrValidationCache.hasOwnProperty(name)) {\n    return attrValidationCache[name];\n  }\n  const isUnsafe = unsafeAttrCharRE.test(name);\n  if (isUnsafe) {\n    console.error(`unsafe attribute name: ${name}`);\n  }\n  return attrValidationCache[name] = !isUnsafe;\n}\nconst propsToAttrMap = {\n  acceptCharset: \"accept-charset\",\n  className: \"class\",\n  htmlFor: \"for\",\n  httpEquiv: \"http-equiv\"\n};\nconst isKnownHtmlAttr = /* @__PURE__ */ makeMap(\n  `accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap`\n);\nconst isKnownSvgAttr = /* @__PURE__ */ makeMap(\n  `xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan`\n);\nconst isKnownMathMLAttr = /* @__PURE__ */ makeMap(\n  `accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns`\n);\nfunction isRenderableAttrValue(value) {\n  if (value == null) {\n    return false;\n  }\n  const type = typeof value;\n  return type === \"string\" || type === \"number\" || type === \"boolean\";\n}\n\nconst escapeRE = /[\"'&<>]/;\nfunction escapeHtml(string) {\n  const str = \"\" + string;\n  const match = escapeRE.exec(str);\n  if (!match) {\n    return str;\n  }\n  let html = \"\";\n  let escaped;\n  let index;\n  let lastIndex = 0;\n  for (index = match.index; index < str.length; index++) {\n    switch (str.charCodeAt(index)) {\n      case 34:\n        escaped = \"&quot;\";\n        break;\n      case 38:\n        escaped = \"&amp;\";\n        break;\n      case 39:\n        escaped = \"&#39;\";\n        break;\n      case 60:\n        escaped = \"&lt;\";\n        break;\n      case 62:\n        escaped = \"&gt;\";\n        break;\n      default:\n        continue;\n    }\n    if (lastIndex !== index) {\n      html += str.slice(lastIndex, index);\n    }\n    lastIndex = index + 1;\n    html += escaped;\n  }\n  return lastIndex !== index ? html + str.slice(lastIndex, index) : html;\n}\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\nfunction escapeHtmlComment(src) {\n  return src.replace(commentStripRE, \"\");\n}\nconst cssVarNameEscapeSymbolsRE = /[ !\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~]/g;\nfunction getEscapedCssVarName(key, doubleEscape) {\n  return key.replace(\n    cssVarNameEscapeSymbolsRE,\n    (s) => doubleEscape ? s === '\"' ? '\\\\\\\\\\\\\"' : `\\\\\\\\${s}` : `\\\\${s}`\n  );\n}\n\nfunction looseCompareArrays(a, b) {\n  if (a.length !== b.length) return false;\n  let equal = true;\n  for (let i = 0; equal && i < a.length; i++) {\n    equal = looseEqual(a[i], b[i]);\n  }\n  return equal;\n}\nfunction looseEqual(a, b) {\n  if (a === b) return true;\n  let aValidType = isDate(a);\n  let bValidType = isDate(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? a.getTime() === b.getTime() : false;\n  }\n  aValidType = isSymbol(a);\n  bValidType = isSymbol(b);\n  if (aValidType || bValidType) {\n    return a === b;\n  }\n  aValidType = isArray(a);\n  bValidType = isArray(b);\n  if (aValidType || bValidType) {\n    return aValidType && bValidType ? looseCompareArrays(a, b) : false;\n  }\n  aValidType = isObject(a);\n  bValidType = isObject(b);\n  if (aValidType || bValidType) {\n    if (!aValidType || !bValidType) {\n      return false;\n    }\n    const aKeysCount = Object.keys(a).length;\n    const bKeysCount = Object.keys(b).length;\n    if (aKeysCount !== bKeysCount) {\n      return false;\n    }\n    for (const key in a) {\n      const aHasKey = a.hasOwnProperty(key);\n      const bHasKey = b.hasOwnProperty(key);\n      if (aHasKey && !bHasKey || !aHasKey && bHasKey || !looseEqual(a[key], b[key])) {\n        return false;\n      }\n    }\n  }\n  return String(a) === String(b);\n}\nfunction looseIndexOf(arr, val) {\n  return arr.findIndex((item) => looseEqual(item, val));\n}\n\nconst isRef = (val) => {\n  return !!(val && val[\"__v_isRef\"] === true);\n};\nconst toDisplayString = (val) => {\n  return isString(val) ? val : val == null ? \"\" : isArray(val) || isObject(val) && (val.toString === objectToString || !isFunction(val.toString)) ? isRef(val) ? toDisplayString(val.value) : JSON.stringify(val, replacer, 2) : String(val);\n};\nconst replacer = (_key, val) => {\n  if (isRef(val)) {\n    return replacer(_key, val.value);\n  } else if (isMap(val)) {\n    return {\n      [`Map(${val.size})`]: [...val.entries()].reduce(\n        (entries, [key, val2], i) => {\n          entries[stringifySymbol(key, i) + \" =>\"] = val2;\n          return entries;\n        },\n        {}\n      )\n    };\n  } else if (isSet(val)) {\n    return {\n      [`Set(${val.size})`]: [...val.values()].map((v) => stringifySymbol(v))\n    };\n  } else if (isSymbol(val)) {\n    return stringifySymbol(val);\n  } else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\n    return String(val);\n  }\n  return val;\n};\nconst stringifySymbol = (v, i = \"\") => {\n  var _a;\n  return (\n    // Symbol.description in es2019+ so we need to cast here to pass\n    // the lib: es2016 check\n    isSymbol(v) ? `Symbol(${(_a = v.description) != null ? _a : i})` : v\n  );\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, PatchFlags, ShapeFlags, SlotFlags, camelize, capitalize, cssVarNameEscapeSymbolsRE, def, escapeHtml, escapeHtmlComment, extend, genCacheKey, genPropsAccessExp, generateCodeFrame, getEscapedCssVarName, getGlobalThis, hasChanged, hasOwn, hyphenate, includeBooleanAttr, invokeArrayFns, isArray, isBooleanAttr, isBuiltInDirective, isDate, isFunction, isGloballyAllowed, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownHtmlAttr, isKnownMathMLAttr, isKnownSvgAttr, isMap, isMathMLTag, isModelListener, isObject, isOn, isPlainObject, isPromise, isRegExp, isRenderableAttrValue, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, looseToNumber, makeMap, normalizeClass, normalizeProps, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","/*!\n * EventEmitter2\n * https://github.com/hij1nx/EventEmitter2\n *\n * Copyright (c) 2013 hij1nx\n * Licensed under the MIT license.\n */\n;!function(undefined) {\n  var hasOwnProperty= Object.hasOwnProperty;\n  var isArray = Array.isArray ? Array.isArray : function _isArray(obj) {\n    return Object.prototype.toString.call(obj) === \"[object Array]\";\n  };\n  var defaultMaxListeners = 10;\n  var nextTickSupported= typeof process=='object' && typeof process.nextTick=='function';\n  var symbolsSupported= typeof Symbol==='function';\n  var reflectSupported= typeof Reflect === 'object';\n  var setImmediateSupported= typeof setImmediate === 'function';\n  var _setImmediate= setImmediateSupported ? setImmediate : setTimeout;\n  var ownKeys= symbolsSupported? (reflectSupported && typeof Reflect.ownKeys==='function'? Reflect.ownKeys : function(obj){\n    var arr= Object.getOwnPropertyNames(obj);\n    arr.push.apply(arr, Object.getOwnPropertySymbols(obj));\n    return arr;\n  }) : Object.keys;\n\n  function init() {\n    this._events = {};\n    if (this._conf) {\n      configure.call(this, this._conf);\n    }\n  }\n\n  function configure(conf) {\n    if (conf) {\n      this._conf = conf;\n\n      conf.delimiter && (this.delimiter = conf.delimiter);\n\n      if(conf.maxListeners!==undefined){\n          this._maxListeners= conf.maxListeners;\n      }\n\n      conf.wildcard && (this.wildcard = conf.wildcard);\n      conf.newListener && (this._newListener = conf.newListener);\n      conf.removeListener && (this._removeListener = conf.removeListener);\n      conf.verboseMemoryLeak && (this.verboseMemoryLeak = conf.verboseMemoryLeak);\n      conf.ignoreErrors && (this.ignoreErrors = conf.ignoreErrors);\n\n      if (this.wildcard) {\n        this.listenerTree = {};\n      }\n    }\n  }\n\n  function logPossibleMemoryLeak(count, eventName) {\n    var errorMsg = '(node) warning: possible EventEmitter memory ' +\n        'leak detected. ' + count + ' listeners added. ' +\n        'Use emitter.setMaxListeners() to increase limit.';\n\n    if(this.verboseMemoryLeak){\n      errorMsg += ' Event name: ' + eventName + '.';\n    }\n\n    if(typeof process !== 'undefined' && process.emitWarning){\n      var e = new Error(errorMsg);\n      e.name = 'MaxListenersExceededWarning';\n      e.emitter = this;\n      e.count = count;\n      process.emitWarning(e);\n    } else {\n      console.error(errorMsg);\n\n      if (console.trace){\n        console.trace();\n      }\n    }\n  }\n\n  var toArray = function (a, b, c) {\n    var n = arguments.length;\n    switch (n) {\n      case 0:\n        return [];\n      case 1:\n        return [a];\n      case 2:\n        return [a, b];\n      case 3:\n        return [a, b, c];\n      default:\n        var arr = new Array(n);\n        while (n--) {\n          arr[n] = arguments[n];\n        }\n        return arr;\n    }\n  };\n\n  function toObject(keys, values) {\n    var obj = {};\n    var key;\n    var len = keys.length;\n    var valuesCount = values ? values.length : 0;\n    for (var i = 0; i < len; i++) {\n      key = keys[i];\n      obj[key] = i < valuesCount ? values[i] : undefined;\n    }\n    return obj;\n  }\n\n  function TargetObserver(emitter, target, options) {\n    this._emitter = emitter;\n    this._target = target;\n    this._listeners = {};\n    this._listenersCount = 0;\n\n    var on, off;\n\n    if (options.on || options.off) {\n      on = options.on;\n      off = options.off;\n    }\n\n    if (target.addEventListener) {\n      on = target.addEventListener;\n      off = target.removeEventListener;\n    } else if (target.addListener) {\n      on = target.addListener;\n      off = target.removeListener;\n    } else if (target.on) {\n      on = target.on;\n      off = target.off;\n    }\n\n    if (!on && !off) {\n      throw Error('target does not implement any known event API');\n    }\n\n    if (typeof on !== 'function') {\n      throw TypeError('on method must be a function');\n    }\n\n    if (typeof off !== 'function') {\n      throw TypeError('off method must be a function');\n    }\n\n    this._on = on;\n    this._off = off;\n\n    var _observers= emitter._observers;\n    if(_observers){\n      _observers.push(this);\n    }else{\n      emitter._observers= [this];\n    }\n  }\n\n  Object.assign(TargetObserver.prototype, {\n    subscribe: function(event, localEvent, reducer){\n      var observer= this;\n      var target= this._target;\n      var emitter= this._emitter;\n      var listeners= this._listeners;\n      var handler= function(){\n        var args= toArray.apply(null, arguments);\n        var eventObj= {\n          data: args,\n          name: localEvent,\n          original: event\n        };\n        if(reducer){\n          var result= reducer.call(target, eventObj);\n          if(result!==false){\n            emitter.emit.apply(emitter, [eventObj.name].concat(args))\n          }\n          return;\n        }\n        emitter.emit.apply(emitter, [localEvent].concat(args));\n      };\n\n\n      if(listeners[event]){\n        throw Error('Event \\'' + event + '\\' is already listening');\n      }\n\n      this._listenersCount++;\n\n      if(emitter._newListener && emitter._removeListener && !observer._onNewListener){\n\n        this._onNewListener = function (_event) {\n          if (_event === localEvent && listeners[event] === null) {\n            listeners[event] = handler;\n            observer._on.call(target, event, handler);\n          }\n        };\n\n        emitter.on('newListener', this._onNewListener);\n\n        this._onRemoveListener= function(_event){\n          if(_event === localEvent && !emitter.hasListeners(_event) && listeners[event]){\n            listeners[event]= null;\n            observer._off.call(target, event, handler);\n          }\n        };\n\n        listeners[event]= null;\n\n        emitter.on('removeListener', this._onRemoveListener);\n      }else{\n        listeners[event]= handler;\n        observer._on.call(target, event, handler);\n      }\n    },\n\n    unsubscribe: function(event){\n      var observer= this;\n      var listeners= this._listeners;\n      var emitter= this._emitter;\n      var handler;\n      var events;\n      var off= this._off;\n      var target= this._target;\n      var i;\n\n      if(event && typeof event!=='string'){\n        throw TypeError('event must be a string');\n      }\n\n      function clearRefs(){\n        if(observer._onNewListener){\n          emitter.off('newListener', observer._onNewListener);\n          emitter.off('removeListener', observer._onRemoveListener);\n          observer._onNewListener= null;\n          observer._onRemoveListener= null;\n        }\n        var index= findTargetIndex.call(emitter, observer);\n        emitter._observers.splice(index, 1);\n      }\n\n      if(event){\n        handler= listeners[event];\n        if(!handler) return;\n        off.call(target, event, handler);\n        delete listeners[event];\n        if(!--this._listenersCount){\n          clearRefs();\n        }\n      }else{\n        events= ownKeys(listeners);\n        i= events.length;\n        while(i-->0){\n          event= events[i];\n          off.call(target, event, listeners[event]);\n        }\n        this._listeners= {};\n        this._listenersCount= 0;\n        clearRefs();\n      }\n    }\n  });\n\n  function resolveOptions(options, schema, reducers, allowUnknown) {\n    var computedOptions = Object.assign({}, schema);\n\n    if (!options) return computedOptions;\n\n    if (typeof options !== 'object') {\n      throw TypeError('options must be an object')\n    }\n\n    var keys = Object.keys(options);\n    var length = keys.length;\n    var option, value;\n    var reducer;\n\n    function reject(reason) {\n      throw Error('Invalid \"' + option + '\" option value' + (reason ? '. Reason: ' + reason : ''))\n    }\n\n    for (var i = 0; i < length; i++) {\n      option = keys[i];\n      if (!allowUnknown && !hasOwnProperty.call(schema, option)) {\n        throw Error('Unknown \"' + option + '\" option');\n      }\n      value = options[option];\n      if (value !== undefined) {\n        reducer = reducers[option];\n        computedOptions[option] = reducer ? reducer(value, reject) : value;\n      }\n    }\n    return computedOptions;\n  }\n\n  function constructorReducer(value, reject) {\n    if (typeof value !== 'function' || !value.hasOwnProperty('prototype')) {\n      reject('value must be a constructor');\n    }\n    return value;\n  }\n\n  function makeTypeReducer(types) {\n    var message= 'value must be type of ' + types.join('|');\n    var len= types.length;\n    var firstType= types[0];\n    var secondType= types[1];\n\n    if (len === 1) {\n      return function (v, reject) {\n        if (typeof v === firstType) {\n          return v;\n        }\n        reject(message);\n      }\n    }\n\n    if (len === 2) {\n      return function (v, reject) {\n        var kind= typeof v;\n        if (kind === firstType || kind === secondType) return v;\n        reject(message);\n      }\n    }\n\n    return function (v, reject) {\n      var kind = typeof v;\n      var i = len;\n      while (i-- > 0) {\n        if (kind === types[i]) return v;\n      }\n      reject(message);\n    }\n  }\n\n  var functionReducer= makeTypeReducer(['function']);\n\n  var objectFunctionReducer= makeTypeReducer(['object', 'function']);\n\n  function makeCancelablePromise(Promise, executor, options) {\n    var isCancelable;\n    var callbacks;\n    var timer= 0;\n    var subscriptionClosed;\n\n    var promise = new Promise(function (resolve, reject, onCancel) {\n      options= resolveOptions(options, {\n        timeout: 0,\n        overload: false\n      }, {\n        timeout: function(value, reject){\n          value*= 1;\n          if (typeof value !== 'number' || value < 0 || !Number.isFinite(value)) {\n            reject('timeout must be a positive number');\n          }\n          return value;\n        }\n      });\n\n      isCancelable = !options.overload && typeof Promise.prototype.cancel === 'function' && typeof onCancel === 'function';\n\n      function cleanup() {\n        if (callbacks) {\n          callbacks = null;\n        }\n        if (timer) {\n          clearTimeout(timer);\n          timer = 0;\n        }\n      }\n\n      var _resolve= function(value){\n        cleanup();\n        resolve(value);\n      };\n\n      var _reject= function(err){\n        cleanup();\n        reject(err);\n      };\n\n      if (isCancelable) {\n        executor(_resolve, _reject, onCancel);\n      } else {\n        callbacks = [function(reason){\n          _reject(reason || Error('canceled'));\n        }];\n        executor(_resolve, _reject, function (cb) {\n          if (subscriptionClosed) {\n            throw Error('Unable to subscribe on cancel event asynchronously')\n          }\n          if (typeof cb !== 'function') {\n            throw TypeError('onCancel callback must be a function');\n          }\n          callbacks.push(cb);\n        });\n        subscriptionClosed= true;\n      }\n\n      if (options.timeout > 0) {\n        timer= setTimeout(function(){\n          var reason= Error('timeout');\n          reason.code = 'ETIMEDOUT'\n          timer= 0;\n          promise.cancel(reason);\n          reject(reason);\n        }, options.timeout);\n      }\n    });\n\n    if (!isCancelable) {\n      promise.cancel = function (reason) {\n        if (!callbacks) {\n          return;\n        }\n        var length = callbacks.length;\n        for (var i = 1; i < length; i++) {\n          callbacks[i](reason);\n        }\n        // internal callback to reject the promise\n        callbacks[0](reason);\n        callbacks = null;\n      };\n    }\n\n    return promise;\n  }\n\n  function findTargetIndex(observer) {\n    var observers = this._observers;\n    if(!observers){\n      return -1;\n    }\n    var len = observers.length;\n    for (var i = 0; i < len; i++) {\n      if (observers[i]._target === observer) return i;\n    }\n    return -1;\n  }\n\n  // Attention, function return type now is array, always !\n  // It has zero elements if no any matches found and one or more\n  // elements (leafs) if there are matches\n  //\n  function searchListenerTree(handlers, type, tree, i, typeLength) {\n    if (!tree) {\n      return null;\n    }\n\n    if (i === 0) {\n      var kind = typeof type;\n      if (kind === 'string') {\n        var ns, n, l = 0, j = 0, delimiter = this.delimiter, dl = delimiter.length;\n        if ((n = type.indexOf(delimiter)) !== -1) {\n          ns = new Array(5);\n          do {\n            ns[l++] = type.slice(j, n);\n            j = n + dl;\n          } while ((n = type.indexOf(delimiter, j)) !== -1);\n\n          ns[l++] = type.slice(j);\n          type = ns;\n          typeLength = l;\n        } else {\n          type = [type];\n          typeLength = 1;\n        }\n      } else if (kind === 'object') {\n        typeLength = type.length;\n      } else {\n        type = [type];\n        typeLength = 1;\n      }\n    }\n\n    var listeners= null, branch, xTree, xxTree, isolatedBranch, endReached, currentType = type[i],\n        nextType = type[i + 1], branches, _listeners;\n\n    if (i === typeLength) {\n      //\n      // If at the end of the event(s) list and the tree has listeners\n      // invoke those listeners.\n      //\n\n      if(tree._listeners) {\n        if (typeof tree._listeners === 'function') {\n          handlers && handlers.push(tree._listeners);\n          listeners = [tree];\n        } else {\n          handlers && handlers.push.apply(handlers, tree._listeners);\n          listeners = [tree];\n        }\n      }\n    } else {\n\n      if (currentType === '*') {\n        //\n        // If the event emitted is '*' at this part\n        // or there is a concrete match at this patch\n        //\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            _listeners = searchListenerTree(handlers, type, tree[branch], i + 1, typeLength);\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (currentType === '**') {\n        endReached = (i + 1 === typeLength || (i + 2 === typeLength && nextType === '*'));\n        if (endReached && tree._listeners) {\n          // The next element has a _listeners, add it to the handlers.\n          listeners = searchListenerTree(handlers, type, tree, typeLength, typeLength);\n        }\n\n        branches = ownKeys(tree);\n        n = branches.length;\n        while (n-- > 0) {\n          branch = branches[n];\n          if (branch !== '_listeners') {\n            if (branch === '*' || branch === '**') {\n              if (tree[branch]._listeners && !endReached) {\n                _listeners = searchListenerTree(handlers, type, tree[branch], typeLength, typeLength);\n                if (_listeners) {\n                  if (listeners) {\n                    listeners.push.apply(listeners, _listeners);\n                  } else {\n                    listeners = _listeners;\n                  }\n                }\n              }\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            } else if (branch === nextType) {\n              _listeners = searchListenerTree(handlers, type, tree[branch], i + 2, typeLength);\n            } else {\n              // No match on this one, shift into the tree but not in the type array.\n              _listeners = searchListenerTree(handlers, type, tree[branch], i, typeLength);\n            }\n            if (_listeners) {\n              if (listeners) {\n                listeners.push.apply(listeners, _listeners);\n              } else {\n                listeners = _listeners;\n              }\n            }\n          }\n        }\n        return listeners;\n      } else if (tree[currentType]) {\n        listeners = searchListenerTree(handlers, type, tree[currentType], i + 1, typeLength);\n      }\n    }\n\n      xTree = tree['*'];\n    if (xTree) {\n      //\n      // If the listener tree will allow any match for this part,\n      // then recursively explore all branches of the tree\n      //\n      searchListenerTree(handlers, type, xTree, i + 1, typeLength);\n    }\n\n    xxTree = tree['**'];\n    if (xxTree) {\n      if (i < typeLength) {\n        if (xxTree._listeners) {\n          // If we have a listener on a '**', it will catch all, so add its handler.\n          searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n        }\n\n        // Build arrays of matching next branches and others.\n        branches= ownKeys(xxTree);\n        n= branches.length;\n        while(n-->0){\n          branch= branches[n];\n          if (branch !== '_listeners') {\n            if (branch === nextType) {\n              // We know the next element will match, so jump twice.\n              searchListenerTree(handlers, type, xxTree[branch], i + 2, typeLength);\n            } else if (branch === currentType) {\n              // Current node matches, move into the tree.\n              searchListenerTree(handlers, type, xxTree[branch], i + 1, typeLength);\n            } else {\n              isolatedBranch = {};\n              isolatedBranch[branch] = xxTree[branch];\n              searchListenerTree(handlers, type, {'**': isolatedBranch}, i + 1, typeLength);\n            }\n          }\n        }\n      } else if (xxTree._listeners) {\n        // We have reached the end and still on a '**'\n        searchListenerTree(handlers, type, xxTree, typeLength, typeLength);\n      } else if (xxTree['*'] && xxTree['*']._listeners) {\n        searchListenerTree(handlers, type, xxTree['*'], typeLength, typeLength);\n      }\n    }\n\n    return listeners;\n  }\n\n  function growListenerTree(type, listener, prepend) {\n    var len = 0, j = 0, i, delimiter = this.delimiter, dl= delimiter.length, ns;\n\n    if(typeof type==='string') {\n      if ((i = type.indexOf(delimiter)) !== -1) {\n        ns = new Array(5);\n        do {\n          ns[len++] = type.slice(j, i);\n          j = i + dl;\n        } while ((i = type.indexOf(delimiter, j)) !== -1);\n\n        ns[len++] = type.slice(j);\n      }else{\n        ns= [type];\n        len= 1;\n      }\n    }else{\n      ns= type;\n      len= type.length;\n    }\n\n    //\n    // Looks for two consecutive '**', if so, don't add the event at all.\n    //\n    if (len > 1) {\n      for (i = 0; i + 1 < len; i++) {\n        if (ns[i] === '**' && ns[i + 1] === '**') {\n          return;\n        }\n      }\n    }\n\n\n\n    var tree = this.listenerTree, name;\n\n    for (i = 0; i < len; i++) {\n      name = ns[i];\n\n      tree = tree[name] || (tree[name] = {});\n\n      if (i === len - 1) {\n        if (!tree._listeners) {\n          tree._listeners = listener;\n        } else {\n          if (typeof tree._listeners === 'function') {\n            tree._listeners = [tree._listeners];\n          }\n\n          if (prepend) {\n            tree._listeners.unshift(listener);\n          } else {\n            tree._listeners.push(listener);\n          }\n\n          if (\n              !tree._listeners.warned &&\n              this._maxListeners > 0 &&\n              tree._listeners.length > this._maxListeners\n          ) {\n            tree._listeners.warned = true;\n            logPossibleMemoryLeak.call(this, tree._listeners.length, name);\n          }\n        }\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function collectTreeEvents(tree, events, root, asArray){\n     var branches= ownKeys(tree);\n     var i= branches.length;\n     var branch, branchName, path;\n     var hasListeners= tree['_listeners'];\n     var isArrayPath;\n\n     while(i-->0){\n         branchName= branches[i];\n\n         branch= tree[branchName];\n\n         if(branchName==='_listeners'){\n             path= root;\n         }else {\n             path = root ? root.concat(branchName) : [branchName];\n         }\n\n         isArrayPath= asArray || typeof branchName==='symbol';\n\n         hasListeners && events.push(isArrayPath? path : path.join(this.delimiter));\n\n         if(typeof branch==='object'){\n             collectTreeEvents.call(this, branch, events, path, isArrayPath);\n         }\n     }\n\n     return events;\n  }\n\n  function recursivelyGarbageCollect(root) {\n    var keys = ownKeys(root);\n    var i= keys.length;\n    var obj, key, flag;\n    while(i-->0){\n      key = keys[i];\n      obj = root[key];\n\n      if(obj){\n          flag= true;\n          if(key !== '_listeners' && !recursivelyGarbageCollect(obj)){\n             delete root[key];\n          }\n      }\n    }\n\n    return flag;\n  }\n\n  function Listener(emitter, event, listener){\n    this.emitter= emitter;\n    this.event= event;\n    this.listener= listener;\n  }\n\n  Listener.prototype.off= function(){\n    this.emitter.off(this.event, this.listener);\n    return this;\n  };\n\n  function setupListener(event, listener, options){\n      if (options === true) {\n        promisify = true;\n      } else if (options === false) {\n        async = true;\n      } else {\n        if (!options || typeof options !== 'object') {\n          throw TypeError('options should be an object or true');\n        }\n        var async = options.async;\n        var promisify = options.promisify;\n        var nextTick = options.nextTick;\n        var objectify = options.objectify;\n      }\n\n      if (async || nextTick || promisify) {\n        var _listener = listener;\n        var _origin = listener._origin || listener;\n\n        if (nextTick && !nextTickSupported) {\n          throw Error('process.nextTick is not supported');\n        }\n\n        if (promisify === undefined) {\n          promisify = listener.constructor.name === 'AsyncFunction';\n        }\n\n        listener = function () {\n          var args = arguments;\n          var context = this;\n          var event = this.event;\n\n          return promisify ? (nextTick ? Promise.resolve() : new Promise(function (resolve) {\n            _setImmediate(resolve);\n          }).then(function () {\n            context.event = event;\n            return _listener.apply(context, args)\n          })) : (nextTick ? process.nextTick : _setImmediate)(function () {\n            context.event = event;\n            _listener.apply(context, args)\n          });\n        };\n\n        listener._async = true;\n        listener._origin = _origin;\n      }\n\n    return [listener, objectify? new Listener(this, event, listener): this];\n  }\n\n  function EventEmitter(conf) {\n    this._events = {};\n    this._newListener = false;\n    this._removeListener = false;\n    this.verboseMemoryLeak = false;\n    configure.call(this, conf);\n  }\n\n  EventEmitter.EventEmitter2 = EventEmitter; // backwards compatibility for exporting EventEmitter property\n\n  EventEmitter.prototype.listenTo= function(target, events, options){\n    if(typeof target!=='object'){\n      throw TypeError('target musts be an object');\n    }\n\n    var emitter= this;\n\n    options = resolveOptions(options, {\n      on: undefined,\n      off: undefined,\n      reducers: undefined\n    }, {\n      on: functionReducer,\n      off: functionReducer,\n      reducers: objectFunctionReducer\n    });\n\n    function listen(events){\n      if(typeof events!=='object'){\n        throw TypeError('events must be an object');\n      }\n\n      var reducers= options.reducers;\n      var index= findTargetIndex.call(emitter, target);\n      var observer;\n\n      if(index===-1){\n        observer= new TargetObserver(emitter, target, options);\n      }else{\n        observer= emitter._observers[index];\n      }\n\n      var keys= ownKeys(events);\n      var len= keys.length;\n      var event;\n      var isSingleReducer= typeof reducers==='function';\n\n      for(var i=0; i<len; i++){\n        event= keys[i];\n        observer.subscribe(\n            event,\n            events[event] || event,\n            isSingleReducer ? reducers : reducers && reducers[event]\n        );\n      }\n    }\n\n    isArray(events)?\n        listen(toObject(events)) :\n        (typeof events==='string'? listen(toObject(events.split(/\\s+/))): listen(events));\n\n    return this;\n  };\n\n  EventEmitter.prototype.stopListeningTo = function (target, event) {\n    var observers = this._observers;\n\n    if(!observers){\n      return false;\n    }\n\n    var i = observers.length;\n    var observer;\n    var matched= false;\n\n    if(target && typeof target!=='object'){\n      throw TypeError('target should be an object');\n    }\n\n    while (i-- > 0) {\n      observer = observers[i];\n      if (!target || observer._target === target) {\n        observer.unsubscribe(event);\n        matched= true;\n      }\n    }\n\n    return matched;\n  };\n\n  // By default EventEmitters will print a warning if more than\n  // 10 listeners are added to it. This is a useful default which\n  // helps finding memory leaks.\n  //\n  // Obviously not all Emitters should be limited to 10. This function allows\n  // that to be increased. Set to zero for unlimited.\n\n  EventEmitter.prototype.delimiter = '.';\n\n  EventEmitter.prototype.setMaxListeners = function(n) {\n    if (n !== undefined) {\n      this._maxListeners = n;\n      if (!this._conf) this._conf = {};\n      this._conf.maxListeners = n;\n    }\n  };\n\n  EventEmitter.prototype.getMaxListeners = function() {\n    return this._maxListeners;\n  };\n\n  EventEmitter.prototype.event = '';\n\n  EventEmitter.prototype.once = function(event, fn, options) {\n    return this._once(event, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependOnceListener = function(event, fn, options) {\n    return this._once(event, fn, true, options);\n  };\n\n  EventEmitter.prototype._once = function(event, fn, prepend, options) {\n    return this._many(event, 1, fn, prepend, options);\n  };\n\n  EventEmitter.prototype.many = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, false, options);\n  };\n\n  EventEmitter.prototype.prependMany = function(event, ttl, fn, options) {\n    return this._many(event, ttl, fn, true, options);\n  };\n\n  EventEmitter.prototype._many = function(event, ttl, fn, prepend, options) {\n    var self = this;\n\n    if (typeof fn !== 'function') {\n      throw new Error('many only accepts instances of Function');\n    }\n\n    function listener() {\n      if (--ttl === 0) {\n        self.off(event, listener);\n      }\n      return fn.apply(this, arguments);\n    }\n\n    listener._origin = fn;\n\n    return this._on(event, listener, prepend, options);\n  };\n\n  EventEmitter.prototype.emit = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], ns, wildcard= this.wildcard;\n    var args,l,i,j, containsSymbol;\n\n    if (type === 'newListener' && !this._newListener) {\n      if (!this._events.newListener) {\n        return false;\n      }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all && this._all.length) {\n      handler = this._all.slice();\n\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this, type);\n          break;\n        case 2:\n          handler[i].call(this, type, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, type, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, arguments);\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0, l);\n    } else {\n      handler = this._events[type];\n      if (typeof handler === 'function') {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler.call(this);\n          break;\n        case 2:\n          handler.call(this, arguments[1]);\n          break;\n        case 3:\n          handler.call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          args = new Array(al - 1);\n          for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n          handler.apply(this, args);\n        }\n        return true;\n      } else if (handler) {\n        // need to make copy of handlers because list can change in the middle\n        // of emit call\n        handler = handler.slice();\n      }\n    }\n\n    if (handler && handler.length) {\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          handler[i].call(this);\n          break;\n        case 2:\n          handler[i].call(this, arguments[1]);\n          break;\n        case 3:\n          handler[i].call(this, arguments[1], arguments[2]);\n          break;\n        default:\n          handler[i].apply(this, args);\n        }\n      }\n      return true;\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        throw arguments[1]; // Unhandled 'error' event\n      } else {\n        throw new Error(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return !!this._all;\n  };\n\n  EventEmitter.prototype.emitAsync = function() {\n    if (!this._events && !this._all) {\n      return false;\n    }\n\n    this._events || init.call(this);\n\n    var type = arguments[0], wildcard= this.wildcard, ns, containsSymbol;\n    var args,l,i,j;\n\n    if (type === 'newListener' && !this._newListener) {\n        if (!this._events.newListener) { return Promise.resolve([false]); }\n    }\n\n    if (wildcard) {\n      ns= type;\n      if(type!=='newListener' && type!=='removeListener'){\n        if (typeof type === 'object') {\n          l = type.length;\n          if (symbolsSupported) {\n            for (i = 0; i < l; i++) {\n              if (typeof type[i] === 'symbol') {\n                containsSymbol = true;\n                break;\n              }\n            }\n          }\n          if (!containsSymbol) {\n            type = type.join(this.delimiter);\n          }\n        }\n      }\n    }\n\n    var promises= [];\n\n    var al = arguments.length;\n    var handler;\n\n    if (this._all) {\n      for (i = 0, l = this._all.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(this._all[i].call(this, type));\n          break;\n        case 2:\n          promises.push(this._all[i].call(this, type, arguments[1]));\n          break;\n        case 3:\n          promises.push(this._all[i].call(this, type, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(this._all[i].apply(this, arguments));\n        }\n      }\n    }\n\n    if (wildcard) {\n      handler = [];\n      searchListenerTree.call(this, handler, ns, this.listenerTree, 0);\n    } else {\n      handler = this._events[type];\n    }\n\n    if (typeof handler === 'function') {\n      this.event = type;\n      switch (al) {\n      case 1:\n        promises.push(handler.call(this));\n        break;\n      case 2:\n        promises.push(handler.call(this, arguments[1]));\n        break;\n      case 3:\n        promises.push(handler.call(this, arguments[1], arguments[2]));\n        break;\n      default:\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n        promises.push(handler.apply(this, args));\n      }\n    } else if (handler && handler.length) {\n      handler = handler.slice();\n      if (al > 3) {\n        args = new Array(al - 1);\n        for (j = 1; j < al; j++) args[j - 1] = arguments[j];\n      }\n      for (i = 0, l = handler.length; i < l; i++) {\n        this.event = type;\n        switch (al) {\n        case 1:\n          promises.push(handler[i].call(this));\n          break;\n        case 2:\n          promises.push(handler[i].call(this, arguments[1]));\n          break;\n        case 3:\n          promises.push(handler[i].call(this, arguments[1], arguments[2]));\n          break;\n        default:\n          promises.push(handler[i].apply(this, args));\n        }\n      }\n    } else if (!this.ignoreErrors && !this._all && type === 'error') {\n      if (arguments[1] instanceof Error) {\n        return Promise.reject(arguments[1]); // Unhandled 'error' event\n      } else {\n        return Promise.reject(\"Uncaught, unspecified 'error' event.\");\n      }\n    }\n\n    return Promise.all(promises);\n  };\n\n  EventEmitter.prototype.on = function(type, listener, options) {\n    return this._on(type, listener, false, options);\n  };\n\n  EventEmitter.prototype.prependListener = function(type, listener, options) {\n    return this._on(type, listener, true, options);\n  };\n\n  EventEmitter.prototype.onAny = function(fn) {\n    return this._onAny(fn, false);\n  };\n\n  EventEmitter.prototype.prependAny = function(fn) {\n    return this._onAny(fn, true);\n  };\n\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n  EventEmitter.prototype._onAny = function(fn, prepend){\n    if (typeof fn !== 'function') {\n      throw new Error('onAny only accepts instances of Function');\n    }\n\n    if (!this._all) {\n      this._all = [];\n    }\n\n    // Add the function to the event listener collection.\n    if(prepend){\n      this._all.unshift(fn);\n    }else{\n      this._all.push(fn);\n    }\n\n    return this;\n  };\n\n  EventEmitter.prototype._on = function(type, listener, prepend, options) {\n    if (typeof type === 'function') {\n      this._onAny(type, listener);\n      return this;\n    }\n\n    if (typeof listener !== 'function') {\n      throw new Error('on only accepts instances of Function');\n    }\n    this._events || init.call(this);\n\n    var returnValue= this, temp;\n\n    if (options !== undefined) {\n      temp = setupListener.call(this, type, listener, options);\n      listener = temp[0];\n      returnValue = temp[1];\n    }\n\n    // To avoid recursion in the case that type == \"newListeners\"! Before\n    // adding it to the listeners, first emit \"newListeners\".\n    if (this._newListener) {\n      this.emit('newListener', type, listener);\n    }\n\n    if (this.wildcard) {\n      growListenerTree.call(this, type, listener, prepend);\n      return returnValue;\n    }\n\n    if (!this._events[type]) {\n      // Optimize the case of one listener. Don't need the extra array object.\n      this._events[type] = listener;\n    } else {\n      if (typeof this._events[type] === 'function') {\n        // Change to array.\n        this._events[type] = [this._events[type]];\n      }\n\n      // If we've already got an array, just add\n      if(prepend){\n        this._events[type].unshift(listener);\n      }else{\n        this._events[type].push(listener);\n      }\n\n      // Check for listener leak\n      if (\n        !this._events[type].warned &&\n        this._maxListeners > 0 &&\n        this._events[type].length > this._maxListeners\n      ) {\n        this._events[type].warned = true;\n        logPossibleMemoryLeak.call(this, this._events[type].length, type);\n      }\n    }\n\n    return returnValue;\n  };\n\n  EventEmitter.prototype.off = function(type, listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('removeListener only takes instances of Function');\n    }\n\n    var handlers,leafs=[];\n\n    if(this.wildcard) {\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      leafs = searchListenerTree.call(this, null, ns, this.listenerTree, 0);\n      if(!leafs) return this;\n    } else {\n      // does not use listeners(), so no side effect of creating _events[type]\n      if (!this._events[type]) return this;\n      handlers = this._events[type];\n      leafs.push({_listeners:handlers});\n    }\n\n    for (var iLeaf=0; iLeaf<leafs.length; iLeaf++) {\n      var leaf = leafs[iLeaf];\n      handlers = leaf._listeners;\n      if (isArray(handlers)) {\n\n        var position = -1;\n\n        for (var i = 0, length = handlers.length; i < length; i++) {\n          if (handlers[i] === listener ||\n            (handlers[i].listener && handlers[i].listener === listener) ||\n            (handlers[i]._origin && handlers[i]._origin === listener)) {\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0) {\n          continue;\n        }\n\n        if(this.wildcard) {\n          leaf._listeners.splice(position, 1);\n        }\n        else {\n          this._events[type].splice(position, 1);\n        }\n\n        if (handlers.length === 0) {\n          if(this.wildcard) {\n            delete leaf._listeners;\n          }\n          else {\n            delete this._events[type];\n          }\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n\n        return this;\n      }\n      else if (handlers === listener ||\n        (handlers.listener && handlers.listener === listener) ||\n        (handlers._origin && handlers._origin === listener)) {\n        if(this.wildcard) {\n          delete leaf._listeners;\n        }\n        else {\n          delete this._events[type];\n        }\n        if (this._removeListener)\n          this.emit(\"removeListener\", type, listener);\n      }\n    }\n\n    this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n\n    return this;\n  };\n\n  EventEmitter.prototype.offAny = function(fn) {\n    var i = 0, l = 0, fns;\n    if (fn && this._all && this._all.length > 0) {\n      fns = this._all;\n      for(i = 0, l = fns.length; i < l; i++) {\n        if(fn === fns[i]) {\n          fns.splice(i, 1);\n          if (this._removeListener)\n            this.emit(\"removeListenerAny\", fn);\n          return this;\n        }\n      }\n    } else {\n      fns = this._all;\n      if (this._removeListener) {\n        for(i = 0, l = fns.length; i < l; i++)\n          this.emit(\"removeListenerAny\", fns[i]);\n      }\n      this._all = [];\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.removeListener = EventEmitter.prototype.off;\n\n  EventEmitter.prototype.removeAllListeners = function (type) {\n    if (type === undefined) {\n      !this._events || init.call(this);\n      return this;\n    }\n\n    if (this.wildcard) {\n      var leafs = searchListenerTree.call(this, null, type, this.listenerTree, 0), leaf, i;\n      if (!leafs) return this;\n      for (i = 0; i < leafs.length; i++) {\n        leaf = leafs[i];\n        leaf._listeners = null;\n      }\n      this.listenerTree && recursivelyGarbageCollect(this.listenerTree);\n    } else if (this._events) {\n      this._events[type] = null;\n    }\n    return this;\n  };\n\n  EventEmitter.prototype.listeners = function (type) {\n    var _events = this._events;\n    var keys, listeners, allListeners;\n    var i;\n    var listenerTree;\n\n    if (type === undefined) {\n      if (this.wildcard) {\n        throw Error('event name required for wildcard emitter');\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      keys = ownKeys(_events);\n      i = keys.length;\n      allListeners = [];\n      while (i-- > 0) {\n        listeners = _events[keys[i]];\n        if (typeof listeners === 'function') {\n          allListeners.push(listeners);\n        } else {\n          allListeners.push.apply(allListeners, listeners);\n        }\n      }\n      return allListeners;\n    } else {\n      if (this.wildcard) {\n        listenerTree= this.listenerTree;\n        if(!listenerTree) return [];\n        var handlers = [];\n        var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n        searchListenerTree.call(this, handlers, ns, listenerTree, 0);\n        return handlers;\n      }\n\n      if (!_events) {\n        return [];\n      }\n\n      listeners = _events[type];\n\n      if (!listeners) {\n        return [];\n      }\n      return typeof listeners === 'function' ? [listeners] : listeners;\n    }\n  };\n\n  EventEmitter.prototype.eventNames = function(nsAsArray){\n    var _events= this._events;\n    return this.wildcard? collectTreeEvents.call(this, this.listenerTree, [], null, nsAsArray) : (_events? ownKeys(_events) : []);\n  };\n\n  EventEmitter.prototype.listenerCount = function(type) {\n    return this.listeners(type).length;\n  };\n\n  EventEmitter.prototype.hasListeners = function (type) {\n    if (this.wildcard) {\n      var handlers = [];\n      var ns = typeof type === 'string' ? type.split(this.delimiter) : type.slice();\n      searchListenerTree.call(this, handlers, ns, this.listenerTree, 0);\n      return handlers.length > 0;\n    }\n\n    var _events = this._events;\n    var _all = this._all;\n\n    return !!(_all && _all.length || _events && (type === undefined ? ownKeys(_events).length : _events[type]));\n  };\n\n  EventEmitter.prototype.listenersAny = function() {\n\n    if(this._all) {\n      return this._all;\n    }\n    else {\n      return [];\n    }\n\n  };\n\n  EventEmitter.prototype.waitFor = function (event, options) {\n    var self = this;\n    var type = typeof options;\n    if (type === 'number') {\n      options = {timeout: options};\n    } else if (type === 'function') {\n      options = {filter: options};\n    }\n\n    options= resolveOptions(options, {\n      timeout: 0,\n      filter: undefined,\n      handleError: false,\n      Promise: Promise,\n      overload: false\n    }, {\n      filter: functionReducer,\n      Promise: constructorReducer\n    });\n\n    return makeCancelablePromise(options.Promise, function (resolve, reject, onCancel) {\n      function listener() {\n        var filter= options.filter;\n        if (filter && !filter.apply(self, arguments)) {\n          return;\n        }\n        self.off(event, listener);\n        if (options.handleError) {\n          var err = arguments[0];\n          err ? reject(err) : resolve(toArray.apply(null, arguments).slice(1));\n        } else {\n          resolve(toArray.apply(null, arguments));\n        }\n      }\n\n      onCancel(function(){\n        self.off(event, listener);\n      });\n\n      self._on(event, listener, false);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    })\n  };\n\n  function once(emitter, name, options) {\n    options= resolveOptions(options, {\n      Promise: Promise,\n      timeout: 0,\n      overload: false\n    }, {\n      Promise: constructorReducer\n    });\n\n    var _Promise= options.Promise;\n\n    return makeCancelablePromise(_Promise, function(resolve, reject, onCancel){\n      var handler;\n      if (typeof emitter.addEventListener === 'function') {\n        handler=  function () {\n          resolve(toArray.apply(null, arguments));\n        };\n\n        onCancel(function(){\n          emitter.removeEventListener(name, handler);\n        });\n\n        emitter.addEventListener(\n            name,\n            handler,\n            {once: true}\n        );\n        return;\n      }\n\n      var eventListener = function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        resolve(toArray.apply(null, arguments));\n      };\n\n      var errorListener;\n\n      if (name !== 'error') {\n        errorListener = function (err){\n          emitter.removeListener(name, eventListener);\n          reject(err);\n        };\n\n        emitter.once('error', errorListener);\n      }\n\n      onCancel(function(){\n        errorListener && emitter.removeListener('error', errorListener);\n        emitter.removeListener(name, eventListener);\n      });\n\n      emitter.once(name, eventListener);\n    }, {\n      timeout: options.timeout,\n      overload: options.overload\n    });\n  }\n\n  var prototype= EventEmitter.prototype;\n\n  Object.defineProperties(EventEmitter, {\n    defaultMaxListeners: {\n      get: function () {\n        return prototype._maxListeners;\n      },\n      set: function (n) {\n        if (typeof n !== 'number' || n < 0 || Number.isNaN(n)) {\n          throw TypeError('n must be a non-negative number')\n        }\n        prototype._maxListeners = n;\n      },\n      enumerable: true\n    },\n    once: {\n      value: once,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  Object.defineProperties(prototype, {\n      _maxListeners: {\n          value: defaultMaxListeners,\n          writable: true,\n          configurable: true\n      },\n      _observers: {value: null, writable: true, configurable: true}\n  });\n\n  if (typeof define === 'function' && define.amd) {\n     // AMD. Register as an anonymous module.\n    define(function() {\n      return EventEmitter;\n    });\n  } else if (typeof exports === 'object') {\n    // CommonJS\n    module.exports = EventEmitter;\n  }\n  else {\n    // global for any kind of environment.\n    var _global= new Function('','return this')();\n    _global.EventEmitter2 = EventEmitter;\n  }\n}();\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{\n    // o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly...\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  // k: [{}], // outdated thing ignored\n  t: [{\n    // t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{\n    // c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{\n    // b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{\n    // m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    {\n      // a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding)\n          ? 'rtpmap:%d %s/%s/%s'\n          : o.rate\n            ? 'rtpmap:%d %s/%s'\n            : 'rtpmap:%d %s';\n      }\n    },\n    {\n      // a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      // a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    {\n      // a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    {\n      // a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null)\n          ? 'rtcp:%d %s IP%d %s'\n          : 'rtcp:%d';\n      }\n    },\n    {\n      // a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%s trr-int %d'\n    },\n    {\n      // a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null)\n          ? 'rtcp-fb:%s %s %s'\n          : 'rtcp-fb:%s %s';\n      }\n    },\n    {\n      // a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      // a=extmap:1/recvonly URI-gps-string\n      // a=extmap:3 urn:ietf:params:rtp-hdrext:encrypt urn:ietf:params:rtp-hdrext:smpte-tc 25@600/24\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'encrypt-uri', 'uri', 'config'],\n      format: function (o) {\n        return (\n          'extmap:%d' +\n          (o.direction ? '/%s' : '%v') +\n          (o['encrypt-uri'] ? ' %s' : '%v') +\n          ' %s' +\n          (o.config ? ' %s' : '')\n        );\n      }\n    },\n    {\n      // a=extmap-allow-mixed\n      name: 'extmapAllowMixed',\n      reg: /^(extmap-allow-mixed)/\n    },\n    {\n      // a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null)\n          ? 'crypto:%d %s %s %s'\n          : 'crypto:%d %s %s';\n      }\n    },\n    {\n      // a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    {\n      // a=connection:new\n      name: 'connectionType',\n      reg: /^connection:(new|existing)/,\n      format: 'connection:%s'\n    },\n    {\n      // a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    {\n      // a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    {\n      // a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'ptime:%d'\n    },\n    {\n      // a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*(?:\\.\\d*)*)/,\n      format: 'maxptime:%d'\n    },\n    {\n      // a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    {\n      // a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    {\n      // a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    {\n      // a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    {\n      // a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    {\n      // a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      // a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      // a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      // a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    {\n      // a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    {\n      // a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    {\n      // a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    {\n      // a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    {\n      // a=ssrc-group:FEC 1 2\n      // a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    {\n      // a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    {\n      // a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    {\n      // a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    {\n      // a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    {\n      // a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null)\n          ? 'sctpmap:%s %s %s'\n          : 'sctpmap:%s %s';\n      }\n    },\n    {\n      // a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    {\n      // a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    {\n      // a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      // a=imageattr:* send [x=800,y=640] recv *\n      // a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        // a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        // send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        // recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      // a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        // a=simulcast:\n        '^simulcast:' +\n        // send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        // space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        // end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    {\n      // old simulcast draft 03 (implemented by Firefox)\n      //   https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      // a=simulcast: recv pt=97;98 send pt=97\n      // a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      // a=framerate:25\n      // a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    {\n      // RFC4570\n      // a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    {\n      // a=bundle-only\n      name: 'bundleOnly',\n      reg: /^(bundle-only)/\n    },\n    {\n      // a=label:1\n      name: 'label',\n      reg: /^label:(.+)/,\n      format: 'label:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-5\n      name: 'sctpPort',\n      reg: /^sctp-port:(\\d+)$/,\n      format: 'sctp-port:%s'\n    },\n    {\n      // RFC version 26 for SCTP over DTLS\n      // https://tools.ietf.org/html/draft-ietf-mmusic-sctp-sdp-26#section-6\n      name: 'maxMessageSize',\n      reg: /^max-message-size:(\\d+)$/,\n      format: 'max-message-size:%s'\n    },\n    {\n      // RFC7273\n      // a=ts-refclk:ptp=IEEE1588-2008:39-A7-94-FF-FE-07-CB-D0:37\n      push:'tsRefClocks',\n      reg: /^ts-refclk:([^\\s=]*)(?:=(\\S*))?/,\n      names: ['clksrc', 'clksrcExt'],\n      format: function (o) {\n        return 'ts-refclk:%s' + (o.clksrcExt != null ? '=%s' : '');\n      }\n    },\n    {\n      // RFC7273\n      // a=mediaclk:direct=963214424\n      name:'mediaClk',\n      reg: /^mediaclk:(?:id=(\\S*))? *([^\\s=]*)(?:=(\\S*))?(?: *rate=(\\d+)\\/(\\d+))?/,\n      names: ['id', 'mediaClockName', 'mediaClockValue', 'rateNumerator', 'rateDenominator'],\n      format: function (o) {\n        var str = 'mediaclk:';\n        str += (o.id != null ? 'id=%s %s' : '%v%s');\n        str += (o.mediaClockValue != null ? '=%s' : '');\n        str += (o.rateNumerator != null ? ' rate=%s' : '');\n        str += (o.rateDenominator != null ? '/%s' : '');\n        return str;\n      }\n    },\n    {\n      // a=keywds:keywords\n      name: 'keywords',\n      reg: /^keywds:(.+)$/,\n      format: 'keywds:%s'\n    },\n    {\n      // a=content:main\n      name: 'content',\n      reg: /^content:(.+)/,\n      format: 'content:%s'\n    },\n    // BFCP https://tools.ietf.org/html/rfc4583\n    {\n      // a=floorctrl:c-s\n      name: 'bfcpFloorCtrl',\n      reg: /^floorctrl:(c-only|s-only|c-s)/,\n      format: 'floorctrl:%s'\n    },\n    {\n      // a=confid:1\n      name: 'bfcpConfId',\n      reg: /^confid:(\\d+)/,\n      format: 'confid:%s'\n    },\n    {\n      // a=userid:1\n      name: 'bfcpUserId',\n      reg: /^userid:(\\d+)/,\n      format: 'userid:%s'\n    },\n    {\n      // a=floorid:1\n      name: 'bfcpFloorId',\n      reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/,\n      names: ['id', 'mStream'],\n      format: 'floorid:%s mstrm:%s'\n    },\n    {\n      // any a= that we don't understand is kept verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","var parser = require('./parser');\nvar writer = require('./writer');\nvar grammar = require('./grammar');\n\nexports.grammar = grammar;\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseParams = parser.parseParams;\nexports.parseFmtpConfig = parser.parseFmtpConfig; // Alias of parseParams().\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.toString().split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nconst SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substring(2, 12);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(line => line.trim());\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  const parts = blob.split('\\nm=');\n  return parts.map((part, index) => (index > 0 ?\n    'm=' + part : part).trim() + '\\r\\n');\n};\n\n// Returns the session description.\nSDPUtils.getDescription = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// Returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  const sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(line => line.indexOf(prefix) === 0);\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\n// Input can be prefixed with a=.\nSDPUtils.parseCandidate = function(line) {\n  let parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  const candidate = {\n    foundation: parts[0],\n    component: {1: 'rtp', 2: 'rtcp'}[parts[1]] || parts[1],\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7],\n  };\n\n  for (let i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compatibility.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag. Don't overwrite.\n        if (candidate[parts[i]] === undefined) {\n          candidate[parts[i]] = parts[i + 1];\n        }\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\n// This does not include the a= prefix!\nSDPUtils.writeCandidate = function(candidate) {\n  const sdp = [];\n  sdp.push(candidate.foundation);\n\n  const component = candidate.component;\n  if (component === 'rtp') {\n    sdp.push(1);\n  } else if (component === 'rtcp') {\n    sdp.push(2);\n  } else {\n    sdp.push(component);\n  }\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  const type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// Sample input:\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substring(14).split(' ');\n};\n\n// Parses a rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  let parts = line.substring(9).split(' ');\n  const parsed = {\n    payloadType: parseInt(parts.shift(), 10), // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generates a rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  const channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses a extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1],\n    attributes: parts.slice(2).join(' '),\n  };\n};\n\n// Generates an extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri +\n      (headerExtension.attributes ? ' ' + headerExtension.attributes : '') +\n      '\\r\\n';\n};\n\n// Parses a fmtp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  const parsed = {};\n  let kv;\n  const parts = line.substring(line.indexOf(' ') + 1).split(';');\n  for (let j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates a fmtp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  let line = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    const params = [];\n    Object.keys(codec.parameters).forEach(param => {\n      if (codec.parameters[param] !== undefined) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses a rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  const parts = line.substring(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' '),\n  };\n};\n\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  let lines = '';\n  let pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(fb => {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses a RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  const sp = line.indexOf(' ');\n  const parts = {\n    ssrc: parseInt(line.substring(7, sp), 10),\n  };\n  const colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substring(sp + 1, colon);\n    parts.value = line.substring(colon + 1);\n  } else {\n    parts.attribute = line.substring(sp + 1);\n  }\n  return parts;\n};\n\n// Parse a ssrc-group line (see RFC 5576). Sample input:\n// a=ssrc-group:semantics 12 34\nSDPUtils.parseSsrcGroup = function(line) {\n  const parts = line.substring(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(ssrc => parseInt(ssrc, 10)),\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// Returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  const mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substring(6);\n  }\n};\n\n// Parses a fingerprint line for DTLS-SRTP.\nSDPUtils.parseFingerprint = function(line) {\n  const parts = line.substring(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1].toUpperCase(), // the definition is upper-case in RFC 4572.\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint),\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  let sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(fp => {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  const parts = line.substring(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  const parts = keyParams.substring(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES parameters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  const lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  const ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  const pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substring(12),\n    password: pwd.substring(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  let sdp = 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n  if (params.iceLite) {\n    sdp += 'a=ice-lite\\r\\n';\n  }\n  return sdp;\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  const description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: [],\n  };\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  description.profile = mline[2];\n  for (let i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    const pt = mline[i];\n    const rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      const codec = SDPUtils.parseRtpMap(rtpmapline);\n      const fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(line => {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  const wildcardRtcpFb = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-fb:* ')\n    .map(SDPUtils.parseRtcpFb);\n  description.codecs.forEach(codec => {\n    wildcardRtcpFb.forEach(fb=> {\n      const duplicate = codec.rtcpFeedback.find(existingFeedback => {\n        return existingFeedback.type === fb.type &&\n          existingFeedback.parameter === fb.parameter;\n      });\n      if (!duplicate) {\n        codec.rtcpFeedback.push(fb);\n      }\n    });\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  let sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' ' + (caps.profile || 'UDP/TLS/RTP/SAVPF') + ' ';\n  sdp += caps.codecs.map(codec => {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(codec => {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  let maxptime = 0;\n  caps.codecs.forEach(codec => {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(extension => {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  const encodingParameters = [];\n  const description = SDPUtils.parseRtpParameters(mediaSection);\n  const hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  const hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  const ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(parts => parts.attribute === 'cname');\n  const primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  let secondarySsrc;\n\n  const flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(line => {\n      const parts = line.substring(17).split(' ');\n      return parts.map(part => parseInt(part, 10));\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(codec => {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      let encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red',\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc,\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  let bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substring(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substring(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(params => {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  const rtcpParameters = {};\n\n  // Gets the first SSRC. Note that with RTX there might be multiple\n  // SSRCs.\n  const remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(obj => obj.attribute === 'cname')[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  const rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  const mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\nSDPUtils.writeRtcpParameters = function(rtcpParameters) {\n  let sdp = '';\n  if (rtcpParameters.reducedSize) {\n    sdp += 'a=rtcp-rsize\\r\\n';\n  }\n  if (rtcpParameters.mux) {\n    sdp += 'a=rtcp-mux\\r\\n';\n  }\n  if (rtcpParameters.ssrc !== undefined && rtcpParameters.cname) {\n    sdp += 'a=ssrc:' + rtcpParameters.ssrc +\n      ' cname:' + rtcpParameters.cname + '\\r\\n';\n  }\n  return sdp;\n};\n\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  let parts;\n  const spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substring(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  const planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(line => SDPUtils.parseSsrcMedia(line))\n    .filter(msidParts => msidParts.attribute === 'msid');\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  const mline = SDPUtils.parseMLine(mediaSection);\n  const maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  let maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substring(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  const sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substring(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize,\n    };\n  }\n  const sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    const parts = sctpMapLines[0]\n      .substring(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize,\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  let output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n',\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n',\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 22);\n};\n\n// Write boiler plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  let sessionId;\n  const version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  const user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  const lines = SDPUtils.splitLines(mediaSection);\n  for (let i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substring(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const mline = lines[0].split(' ');\n  return mline[0].substring(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  const lines = SDPUtils.splitLines(mediaSection);\n  const parts = lines[0].substring(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' '),\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  const line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  const parts = line.substring(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5],\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  const lines = SDPUtils.splitLines(blob);\n  for (let i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.40\n   Copyright © 2012-2024 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.40',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 500;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS',\n        SUFFIX_BROWSER = ' Browser';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return map.hasOwnProperty('*') ? map['*'] : str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bop(?:rg)?x\\/([\\w\\.]+)/i                                          // Opera GX\n            ], [VERSION, [NAME, OPERA+' GX']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i            // Baidu\n            ], [VERSION, [NAME, 'Baidu']], [\n            /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i                       // Maxthon\n            ], [VERSION, [NAME, 'Maxthon']], [\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,      \n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n            // Trident based\n            /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,        // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n            /(heytap|ovi|115)browser\\/([\\d\\.]+)/i,                              // HeyTap/Ovi/115\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /quark(?:pc)?\\/([-\\w\\.]+)/i                                         // Quark\n            ], [VERSION, [NAME, 'Quark']], [\n            /\\bddg\\/([\\w\\.]+)/i                                                 // DuckDuckGo\n            ], [VERSION, [NAME, 'DuckDuckGo']], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i,\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /slbrowser\\/([\\w\\.]+)/i                                             // Smart Lenovo Browser\n            ], [VERSION, [NAME, 'Smart Lenovo '+BROWSER]], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI' + SUFFIX_BROWSER]], [\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihoobrowser\\/?([\\w\\.]*)/i                                       // 360\n            ], [VERSION, [NAME, '360']], [\n            /\\b(qq)\\/([\\w\\.]+)/i                                                // QQ\n            ], [[NAME, /(.+)/, '$1Browser'], VERSION], [\n            /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1' + SUFFIX_BROWSER], VERSION], [              // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n            /samsungbrowser\\/([\\w\\.]+)/i                                        // Samsung Internet\n            ], [VERSION, [NAME, SAMSUNG + ' Internet']], [\n            /metasr[\\/ ]?([\\d\\.]+)/i                                            // Sogou Explorer\n            ], [VERSION, [NAME, 'Sogou Explorer']], [\n            /(sogou)mo\\w+\\/([\\d\\.]+)/i                                          // Sogou Mobile\n            ], [[NAME, 'Sogou Mobile'], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i   // QQ/2345\n            ], [NAME, VERSION], [\n            /(lbbrowser|rekonq)/i,                                              // LieBao Browser/Rekonq\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n            /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,                                  // Iron\n            /ome\\/([\\w\\.]+).+qihu (360)[es]e/i                                  // 360\n            ], [VERSION, NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(Klarna)\\/([\\w\\.]+)/i,                                             // Klarna Shopping Browser for iOS & Android\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(alipay)client\\/([\\w\\.]+)/i,                                       // Alipay\n            /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,                               // Twitter\n            /(chromium|instagram|snapchat)[\\/ ]([-\\w\\.]+)/i                     // Chromium/Instagram/Snapchat\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /(wolvic|librewolf)\\/([\\w\\.]+)/i                                    // Wolvic/LibreWolf\n            ], [NAME, VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i                                              // Links\n            ], [NAME, [VERSION, /_/g, '.']], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Honor\n            /(?:honor)([-\\w ]+)[;\\)]/i\n            ], [MODEL, [VENDOR, 'Honor'], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,                  // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,        // Xiaomi Redmi 'numeric' models\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /oid[^\\)]+; (2\\d{4}(283|rpbf)[cgl])( bui|\\))/i,                     // Redmi Pad\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n            /\\b(opd2\\d{3}a?) bui/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, TABLET]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,                           // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // TCL\n            /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\\w*(\\)| bui)/i\n            ], [MODEL, [VENDOR, 'TCL'], [TYPE, TABLET]], [\n\n            // itel\n            /(itel) ((\\w+))/i\n            ], [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { 'tablet' : ['p10001l', 'w7001'], '*' : 'mobile' }]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n                \n            // Ulefone\n            /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Ulefone'], [TYPE, MOBILE]], [\n\n            // Energizer\n            /; (energy ?\\w+)(?: bui|\\))/i,\n            /; energizer ([\\w ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Energizer'], [TYPE, MOBILE]], [\n\n            // Cat\n            /; cat (b35);/i,\n            /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Cat'], [TYPE, MOBILE]], [\n\n            // Smartfren\n            /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n            ], [MODEL, [VENDOR, 'Smartfren'], [TYPE, MOBILE]], [\n\n            // Nothing\n            /droid.+; (a(?:015|06[35]|142p?))/i\n            ], [MODEL, [VENDOR, 'Nothing'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n            /; (imo) ((?!tab)[\\w ]+?)(?: bui|\\))/i,                             // IMO\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(imo) (tab \\w+)/i,                                                 // IMO\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w+)( bui|\\))/i                                         // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /\\b(sm-[lr]\\d\\d[05][fnuw]?s?)\\b/i                                   // Samsung Galaxy Watch\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]], [\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // XR\n            ///////////////////\n\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /(pico) (4|neo3(?: link|pro)?)/i                                    // Pico\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /; (quest( \\d| pro)?)/i                                             // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+? mobile safari/i    // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /(arkweb)\\/([\\w\\.]+)/i                                              // ArkWeb\n            ], [NAME, VERSION], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i             // Windows Phone\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /windows nt 6\\.2; (arm)/i,                                        // Windows RT\n            /windows[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n            /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[VERSION, strMapper, windowsVersionMap], [NAME, 'Windows']], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS/OpenHarmony\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish|openharmony)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","export function getDevtoolsGlobalHook() {\n    return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__;\n}\nexport function getTarget() {\n    // @ts-expect-error navigator and windows are not available in all environments\n    return (typeof navigator !== 'undefined' && typeof window !== 'undefined')\n        ? window\n        : typeof globalThis !== 'undefined'\n            ? globalThis\n            : {};\n}\nexport const isProxyAvailable = typeof Proxy === 'function';\n","export const HOOK_SETUP = 'devtools-plugin:setup';\nexport const HOOK_PLUGIN_SETTINGS_SET = 'plugin:settings:set';\n","let supported;\nlet perf;\nexport function isPerformanceSupported() {\n    var _a;\n    if (supported !== undefined) {\n        return supported;\n    }\n    if (typeof window !== 'undefined' && window.performance) {\n        supported = true;\n        perf = window.performance;\n    }\n    else if (typeof globalThis !== 'undefined' && ((_a = globalThis.perf_hooks) === null || _a === void 0 ? void 0 : _a.performance)) {\n        supported = true;\n        perf = globalThis.perf_hooks.performance;\n    }\n    else {\n        supported = false;\n    }\n    return supported;\n}\nexport function now() {\n    return isPerformanceSupported() ? perf.now() : Date.now();\n}\n","import { HOOK_PLUGIN_SETTINGS_SET } from './const.js';\nimport { now } from './time.js';\nexport class ApiProxy {\n    constructor(plugin, hook) {\n        this.target = null;\n        this.targetQueue = [];\n        this.onQueue = [];\n        this.plugin = plugin;\n        this.hook = hook;\n        const defaultSettings = {};\n        if (plugin.settings) {\n            for (const id in plugin.settings) {\n                const item = plugin.settings[id];\n                defaultSettings[id] = item.defaultValue;\n            }\n        }\n        const localSettingsSaveId = `__vue-devtools-plugin-settings__${plugin.id}`;\n        let currentSettings = Object.assign({}, defaultSettings);\n        try {\n            const raw = localStorage.getItem(localSettingsSaveId);\n            const data = JSON.parse(raw);\n            Object.assign(currentSettings, data);\n        }\n        catch (e) {\n            // noop\n        }\n        this.fallbacks = {\n            getSettings() {\n                return currentSettings;\n            },\n            setSettings(value) {\n                try {\n                    localStorage.setItem(localSettingsSaveId, JSON.stringify(value));\n                }\n                catch (e) {\n                    // noop\n                }\n                currentSettings = value;\n            },\n            now() {\n                return now();\n            },\n        };\n        if (hook) {\n            hook.on(HOOK_PLUGIN_SETTINGS_SET, (pluginId, value) => {\n                if (pluginId === this.plugin.id) {\n                    this.fallbacks.setSettings(value);\n                }\n            });\n        }\n        this.proxiedOn = new Proxy({}, {\n            get: (_target, prop) => {\n                if (this.target) {\n                    return this.target.on[prop];\n                }\n                else {\n                    return (...args) => {\n                        this.onQueue.push({\n                            method: prop,\n                            args,\n                        });\n                    };\n                }\n            },\n        });\n        this.proxiedTarget = new Proxy({}, {\n            get: (_target, prop) => {\n                if (this.target) {\n                    return this.target[prop];\n                }\n                else if (prop === 'on') {\n                    return this.proxiedOn;\n                }\n                else if (Object.keys(this.fallbacks).includes(prop)) {\n                    return (...args) => {\n                        this.targetQueue.push({\n                            method: prop,\n                            args,\n                            resolve: () => { },\n                        });\n                        return this.fallbacks[prop](...args);\n                    };\n                }\n                else {\n                    return (...args) => {\n                        return new Promise((resolve) => {\n                            this.targetQueue.push({\n                                method: prop,\n                                args,\n                                resolve,\n                            });\n                        });\n                    };\n                }\n            },\n        });\n    }\n    async setRealTarget(target) {\n        this.target = target;\n        for (const item of this.onQueue) {\n            this.target.on[item.method](...item.args);\n        }\n        for (const item of this.targetQueue) {\n            item.resolve(await this.target[item.method](...item.args));\n        }\n    }\n}\n","import { getDevtoolsGlobalHook, getTarget, isProxyAvailable } from './env.js';\nimport { HOOK_SETUP } from './const.js';\nimport { ApiProxy } from './proxy.js';\nexport * from './api/index.js';\nexport * from './plugin.js';\nexport * from './time.js';\nexport function setupDevtoolsPlugin(pluginDescriptor, setupFn) {\n    const descriptor = pluginDescriptor;\n    const target = getTarget();\n    const hook = getDevtoolsGlobalHook();\n    const enableProxy = isProxyAvailable && descriptor.enableEarlyProxy;\n    if (hook && (target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__ || !enableProxy)) {\n        hook.emit(HOOK_SETUP, pluginDescriptor, setupFn);\n    }\n    else {\n        const proxy = enableProxy ? new ApiProxy(descriptor, hook) : null;\n        const list = target.__VUE_DEVTOOLS_PLUGINS__ = target.__VUE_DEVTOOLS_PLUGINS__ || [];\n        list.push({\n            pluginDescriptor: descriptor,\n            setupFn,\n            proxy,\n        });\n        if (proxy) {\n            setupFn(proxy.proxiedTarget);\n        }\n    }\n}\n","/*!\n * vuex v4.1.0\n * (c) 2022 Evan You\n * @license MIT\n */\nimport { inject, effectScope, reactive, watch, computed } from 'vue';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\nvar storeKey = 'store';\n\nfunction useStore (key) {\n  if ( key === void 0 ) key = null;\n\n  return inject(key !== null ? key : storeKey)\n}\n\n/**\n * Get the first item that pass the test\n * by second argument function\n *\n * @param {Array} list\n * @param {Function} f\n * @return {*}\n */\nfunction find (list, f) {\n  return list.filter(f)[0]\n}\n\n/**\n * Deep copy the given object considering circular structure.\n * This function caches all nested objects and its copies.\n * If it detects circular structure, use cached copy to avoid infinite loop.\n *\n * @param {*} obj\n * @param {Array<Object>} cache\n * @return {*}\n */\nfunction deepCopy (obj, cache) {\n  if ( cache === void 0 ) cache = [];\n\n  // just return if obj is immutable value\n  if (obj === null || typeof obj !== 'object') {\n    return obj\n  }\n\n  // if obj is hit, it is in circular structure\n  var hit = find(cache, function (c) { return c.original === obj; });\n  if (hit) {\n    return hit.copy\n  }\n\n  var copy = Array.isArray(obj) ? [] : {};\n  // put the copy into cache at first\n  // because we want to refer it in recursive deepCopy\n  cache.push({\n    original: obj,\n    copy: copy\n  });\n\n  Object.keys(obj).forEach(function (key) {\n    copy[key] = deepCopy(obj[key], cache);\n  });\n\n  return copy\n}\n\n/**\n * forEach for object\n */\nfunction forEachValue (obj, fn) {\n  Object.keys(obj).forEach(function (key) { return fn(obj[key], key); });\n}\n\nfunction isObject (obj) {\n  return obj !== null && typeof obj === 'object'\n}\n\nfunction isPromise (val) {\n  return val && typeof val.then === 'function'\n}\n\nfunction assert (condition, msg) {\n  if (!condition) { throw new Error((\"[vuex] \" + msg)) }\n}\n\nfunction partial (fn, arg) {\n  return function () {\n    return fn(arg)\n  }\n}\n\nfunction genericSubscribe (fn, subs, options) {\n  if (subs.indexOf(fn) < 0) {\n    options && options.prepend\n      ? subs.unshift(fn)\n      : subs.push(fn);\n  }\n  return function () {\n    var i = subs.indexOf(fn);\n    if (i > -1) {\n      subs.splice(i, 1);\n    }\n  }\n}\n\nfunction resetStore (store, hot) {\n  store._actions = Object.create(null);\n  store._mutations = Object.create(null);\n  store._wrappedGetters = Object.create(null);\n  store._modulesNamespaceMap = Object.create(null);\n  var state = store.state;\n  // init all modules\n  installModule(store, state, [], store._modules.root, true);\n  // reset state\n  resetStoreState(store, state, hot);\n}\n\nfunction resetStoreState (store, state, hot) {\n  var oldState = store._state;\n  var oldScope = store._scope;\n\n  // bind store public getters\n  store.getters = {};\n  // reset local getters cache\n  store._makeLocalGettersCache = Object.create(null);\n  var wrappedGetters = store._wrappedGetters;\n  var computedObj = {};\n  var computedCache = {};\n\n  // create a new effect scope and create computed object inside it to avoid\n  // getters (computed) getting destroyed on component unmount.\n  var scope = effectScope(true);\n\n  scope.run(function () {\n    forEachValue(wrappedGetters, function (fn, key) {\n      // use computed to leverage its lazy-caching mechanism\n      // direct inline function use will lead to closure preserving oldState.\n      // using partial to return function with only arguments preserved in closure environment.\n      computedObj[key] = partial(fn, store);\n      computedCache[key] = computed(function () { return computedObj[key](); });\n      Object.defineProperty(store.getters, key, {\n        get: function () { return computedCache[key].value; },\n        enumerable: true // for local getters\n      });\n    });\n  });\n\n  store._state = reactive({\n    data: state\n  });\n\n  // register the newly created effect scope to the store so that we can\n  // dispose the effects when this method runs again in the future.\n  store._scope = scope;\n\n  // enable strict mode for new state\n  if (store.strict) {\n    enableStrictMode(store);\n  }\n\n  if (oldState) {\n    if (hot) {\n      // dispatch changes in all subscribed watchers\n      // to force getter re-evaluation for hot reloading.\n      store._withCommit(function () {\n        oldState.data = null;\n      });\n    }\n  }\n\n  // dispose previously registered effect scope if there is one.\n  if (oldScope) {\n    oldScope.stop();\n  }\n}\n\nfunction installModule (store, rootState, path, module, hot) {\n  var isRoot = !path.length;\n  var namespace = store._modules.getNamespace(path);\n\n  // register in namespace map\n  if (module.namespaced) {\n    if (store._modulesNamespaceMap[namespace] && (process.env.NODE_ENV !== 'production')) {\n      console.error((\"[vuex] duplicate namespace \" + namespace + \" for the namespaced module \" + (path.join('/'))));\n    }\n    store._modulesNamespaceMap[namespace] = module;\n  }\n\n  // set state\n  if (!isRoot && !hot) {\n    var parentState = getNestedState(rootState, path.slice(0, -1));\n    var moduleName = path[path.length - 1];\n    store._withCommit(function () {\n      if ((process.env.NODE_ENV !== 'production')) {\n        if (moduleName in parentState) {\n          console.warn(\n            (\"[vuex] state field \\\"\" + moduleName + \"\\\" was overridden by a module with the same name at \\\"\" + (path.join('.')) + \"\\\"\")\n          );\n        }\n      }\n      parentState[moduleName] = module.state;\n    });\n  }\n\n  var local = module.context = makeLocalContext(store, namespace, path);\n\n  module.forEachMutation(function (mutation, key) {\n    var namespacedType = namespace + key;\n    registerMutation(store, namespacedType, mutation, local);\n  });\n\n  module.forEachAction(function (action, key) {\n    var type = action.root ? key : namespace + key;\n    var handler = action.handler || action;\n    registerAction(store, type, handler, local);\n  });\n\n  module.forEachGetter(function (getter, key) {\n    var namespacedType = namespace + key;\n    registerGetter(store, namespacedType, getter, local);\n  });\n\n  module.forEachChild(function (child, key) {\n    installModule(store, rootState, path.concat(key), child, hot);\n  });\n}\n\n/**\n * make localized dispatch, commit, getters and state\n * if there is no namespace, just use root ones\n */\nfunction makeLocalContext (store, namespace, path) {\n  var noNamespace = namespace === '';\n\n  var local = {\n    dispatch: noNamespace ? store.dispatch : function (_type, _payload, _options) {\n      var args = unifyObjectStyle(_type, _payload, _options);\n      var payload = args.payload;\n      var options = args.options;\n      var type = args.type;\n\n      if (!options || !options.root) {\n        type = namespace + type;\n        if ((process.env.NODE_ENV !== 'production') && !store._actions[type]) {\n          console.error((\"[vuex] unknown local action type: \" + (args.type) + \", global type: \" + type));\n          return\n        }\n      }\n\n      return store.dispatch(type, payload)\n    },\n\n    commit: noNamespace ? store.commit : function (_type, _payload, _options) {\n      var args = unifyObjectStyle(_type, _payload, _options);\n      var payload = args.payload;\n      var options = args.options;\n      var type = args.type;\n\n      if (!options || !options.root) {\n        type = namespace + type;\n        if ((process.env.NODE_ENV !== 'production') && !store._mutations[type]) {\n          console.error((\"[vuex] unknown local mutation type: \" + (args.type) + \", global type: \" + type));\n          return\n        }\n      }\n\n      store.commit(type, payload, options);\n    }\n  };\n\n  // getters and state object must be gotten lazily\n  // because they will be changed by state update\n  Object.defineProperties(local, {\n    getters: {\n      get: noNamespace\n        ? function () { return store.getters; }\n        : function () { return makeLocalGetters(store, namespace); }\n    },\n    state: {\n      get: function () { return getNestedState(store.state, path); }\n    }\n  });\n\n  return local\n}\n\nfunction makeLocalGetters (store, namespace) {\n  if (!store._makeLocalGettersCache[namespace]) {\n    var gettersProxy = {};\n    var splitPos = namespace.length;\n    Object.keys(store.getters).forEach(function (type) {\n      // skip if the target getter is not match this namespace\n      if (type.slice(0, splitPos) !== namespace) { return }\n\n      // extract local getter type\n      var localType = type.slice(splitPos);\n\n      // Add a port to the getters proxy.\n      // Define as getter property because\n      // we do not want to evaluate the getters in this time.\n      Object.defineProperty(gettersProxy, localType, {\n        get: function () { return store.getters[type]; },\n        enumerable: true\n      });\n    });\n    store._makeLocalGettersCache[namespace] = gettersProxy;\n  }\n\n  return store._makeLocalGettersCache[namespace]\n}\n\nfunction registerMutation (store, type, handler, local) {\n  var entry = store._mutations[type] || (store._mutations[type] = []);\n  entry.push(function wrappedMutationHandler (payload) {\n    handler.call(store, local.state, payload);\n  });\n}\n\nfunction registerAction (store, type, handler, local) {\n  var entry = store._actions[type] || (store._actions[type] = []);\n  entry.push(function wrappedActionHandler (payload) {\n    var res = handler.call(store, {\n      dispatch: local.dispatch,\n      commit: local.commit,\n      getters: local.getters,\n      state: local.state,\n      rootGetters: store.getters,\n      rootState: store.state\n    }, payload);\n    if (!isPromise(res)) {\n      res = Promise.resolve(res);\n    }\n    if (store._devtoolHook) {\n      return res.catch(function (err) {\n        store._devtoolHook.emit('vuex:error', err);\n        throw err\n      })\n    } else {\n      return res\n    }\n  });\n}\n\nfunction registerGetter (store, type, rawGetter, local) {\n  if (store._wrappedGetters[type]) {\n    if ((process.env.NODE_ENV !== 'production')) {\n      console.error((\"[vuex] duplicate getter key: \" + type));\n    }\n    return\n  }\n  store._wrappedGetters[type] = function wrappedGetter (store) {\n    return rawGetter(\n      local.state, // local state\n      local.getters, // local getters\n      store.state, // root state\n      store.getters // root getters\n    )\n  };\n}\n\nfunction enableStrictMode (store) {\n  watch(function () { return store._state.data; }, function () {\n    if ((process.env.NODE_ENV !== 'production')) {\n      assert(store._committing, \"do not mutate vuex store state outside mutation handlers.\");\n    }\n  }, { deep: true, flush: 'sync' });\n}\n\nfunction getNestedState (state, path) {\n  return path.reduce(function (state, key) { return state[key]; }, state)\n}\n\nfunction unifyObjectStyle (type, payload, options) {\n  if (isObject(type) && type.type) {\n    options = payload;\n    payload = type;\n    type = type.type;\n  }\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(typeof type === 'string', (\"expects string as the type, but found \" + (typeof type) + \".\"));\n  }\n\n  return { type: type, payload: payload, options: options }\n}\n\nvar LABEL_VUEX_BINDINGS = 'vuex bindings';\nvar MUTATIONS_LAYER_ID = 'vuex:mutations';\nvar ACTIONS_LAYER_ID = 'vuex:actions';\nvar INSPECTOR_ID = 'vuex';\n\nvar actionId = 0;\n\nfunction addDevtools (app, store) {\n  setupDevtoolsPlugin(\n    {\n      id: 'org.vuejs.vuex',\n      app: app,\n      label: 'Vuex',\n      homepage: 'https://next.vuex.vuejs.org/',\n      logo: 'https://vuejs.org/images/icons/favicon-96x96.png',\n      packageName: 'vuex',\n      componentStateTypes: [LABEL_VUEX_BINDINGS]\n    },\n    function (api) {\n      api.addTimelineLayer({\n        id: MUTATIONS_LAYER_ID,\n        label: 'Vuex Mutations',\n        color: COLOR_LIME_500\n      });\n\n      api.addTimelineLayer({\n        id: ACTIONS_LAYER_ID,\n        label: 'Vuex Actions',\n        color: COLOR_LIME_500\n      });\n\n      api.addInspector({\n        id: INSPECTOR_ID,\n        label: 'Vuex',\n        icon: 'storage',\n        treeFilterPlaceholder: 'Filter stores...'\n      });\n\n      api.on.getInspectorTree(function (payload) {\n        if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n          if (payload.filter) {\n            var nodes = [];\n            flattenStoreForInspectorTree(nodes, store._modules.root, payload.filter, '');\n            payload.rootNodes = nodes;\n          } else {\n            payload.rootNodes = [\n              formatStoreForInspectorTree(store._modules.root, '')\n            ];\n          }\n        }\n      });\n\n      api.on.getInspectorState(function (payload) {\n        if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n          var modulePath = payload.nodeId;\n          makeLocalGetters(store, modulePath);\n          payload.state = formatStoreForInspectorState(\n            getStoreModule(store._modules, modulePath),\n            modulePath === 'root' ? store.getters : store._makeLocalGettersCache,\n            modulePath\n          );\n        }\n      });\n\n      api.on.editInspectorState(function (payload) {\n        if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {\n          var modulePath = payload.nodeId;\n          var path = payload.path;\n          if (modulePath !== 'root') {\n            path = modulePath.split('/').filter(Boolean).concat( path);\n          }\n          store._withCommit(function () {\n            payload.set(store._state.data, path, payload.state.value);\n          });\n        }\n      });\n\n      store.subscribe(function (mutation, state) {\n        var data = {};\n\n        if (mutation.payload) {\n          data.payload = mutation.payload;\n        }\n\n        data.state = state;\n\n        api.notifyComponentUpdate();\n        api.sendInspectorTree(INSPECTOR_ID);\n        api.sendInspectorState(INSPECTOR_ID);\n\n        api.addTimelineEvent({\n          layerId: MUTATIONS_LAYER_ID,\n          event: {\n            time: Date.now(),\n            title: mutation.type,\n            data: data\n          }\n        });\n      });\n\n      store.subscribeAction({\n        before: function (action, state) {\n          var data = {};\n          if (action.payload) {\n            data.payload = action.payload;\n          }\n          action._id = actionId++;\n          action._time = Date.now();\n          data.state = state;\n\n          api.addTimelineEvent({\n            layerId: ACTIONS_LAYER_ID,\n            event: {\n              time: action._time,\n              title: action.type,\n              groupId: action._id,\n              subtitle: 'start',\n              data: data\n            }\n          });\n        },\n        after: function (action, state) {\n          var data = {};\n          var duration = Date.now() - action._time;\n          data.duration = {\n            _custom: {\n              type: 'duration',\n              display: (duration + \"ms\"),\n              tooltip: 'Action duration',\n              value: duration\n            }\n          };\n          if (action.payload) {\n            data.payload = action.payload;\n          }\n          data.state = state;\n\n          api.addTimelineEvent({\n            layerId: ACTIONS_LAYER_ID,\n            event: {\n              time: Date.now(),\n              title: action.type,\n              groupId: action._id,\n              subtitle: 'end',\n              data: data\n            }\n          });\n        }\n      });\n    }\n  );\n}\n\n// extracted from tailwind palette\nvar COLOR_LIME_500 = 0x84cc16;\nvar COLOR_DARK = 0x666666;\nvar COLOR_WHITE = 0xffffff;\n\nvar TAG_NAMESPACED = {\n  label: 'namespaced',\n  textColor: COLOR_WHITE,\n  backgroundColor: COLOR_DARK\n};\n\n/**\n * @param {string} path\n */\nfunction extractNameFromPath (path) {\n  return path && path !== 'root' ? path.split('/').slice(-2, -1)[0] : 'Root'\n}\n\n/**\n * @param {*} module\n * @return {import('@vue/devtools-api').CustomInspectorNode}\n */\nfunction formatStoreForInspectorTree (module, path) {\n  return {\n    id: path || 'root',\n    // all modules end with a `/`, we want the last segment only\n    // cart/ -> cart\n    // nested/cart/ -> cart\n    label: extractNameFromPath(path),\n    tags: module.namespaced ? [TAG_NAMESPACED] : [],\n    children: Object.keys(module._children).map(function (moduleName) { return formatStoreForInspectorTree(\n        module._children[moduleName],\n        path + moduleName + '/'\n      ); }\n    )\n  }\n}\n\n/**\n * @param {import('@vue/devtools-api').CustomInspectorNode[]} result\n * @param {*} module\n * @param {string} filter\n * @param {string} path\n */\nfunction flattenStoreForInspectorTree (result, module, filter, path) {\n  if (path.includes(filter)) {\n    result.push({\n      id: path || 'root',\n      label: path.endsWith('/') ? path.slice(0, path.length - 1) : path || 'Root',\n      tags: module.namespaced ? [TAG_NAMESPACED] : []\n    });\n  }\n  Object.keys(module._children).forEach(function (moduleName) {\n    flattenStoreForInspectorTree(result, module._children[moduleName], filter, path + moduleName + '/');\n  });\n}\n\n/**\n * @param {*} module\n * @return {import('@vue/devtools-api').CustomInspectorState}\n */\nfunction formatStoreForInspectorState (module, getters, path) {\n  getters = path === 'root' ? getters : getters[path];\n  var gettersKeys = Object.keys(getters);\n  var storeState = {\n    state: Object.keys(module.state).map(function (key) { return ({\n      key: key,\n      editable: true,\n      value: module.state[key]\n    }); })\n  };\n\n  if (gettersKeys.length) {\n    var tree = transformPathsToObjectTree(getters);\n    storeState.getters = Object.keys(tree).map(function (key) { return ({\n      key: key.endsWith('/') ? extractNameFromPath(key) : key,\n      editable: false,\n      value: canThrow(function () { return tree[key]; })\n    }); });\n  }\n\n  return storeState\n}\n\nfunction transformPathsToObjectTree (getters) {\n  var result = {};\n  Object.keys(getters).forEach(function (key) {\n    var path = key.split('/');\n    if (path.length > 1) {\n      var target = result;\n      var leafKey = path.pop();\n      path.forEach(function (p) {\n        if (!target[p]) {\n          target[p] = {\n            _custom: {\n              value: {},\n              display: p,\n              tooltip: 'Module',\n              abstract: true\n            }\n          };\n        }\n        target = target[p]._custom.value;\n      });\n      target[leafKey] = canThrow(function () { return getters[key]; });\n    } else {\n      result[key] = canThrow(function () { return getters[key]; });\n    }\n  });\n  return result\n}\n\nfunction getStoreModule (moduleMap, path) {\n  var names = path.split('/').filter(function (n) { return n; });\n  return names.reduce(\n    function (module, moduleName, i) {\n      var child = module[moduleName];\n      if (!child) {\n        throw new Error((\"Missing module \\\"\" + moduleName + \"\\\" for path \\\"\" + path + \"\\\".\"))\n      }\n      return i === names.length - 1 ? child : child._children\n    },\n    path === 'root' ? moduleMap : moduleMap.root._children\n  )\n}\n\nfunction canThrow (cb) {\n  try {\n    return cb()\n  } catch (e) {\n    return e\n  }\n}\n\n// Base data struct for store's module, package with some attribute and method\nvar Module = function Module (rawModule, runtime) {\n  this.runtime = runtime;\n  // Store some children item\n  this._children = Object.create(null);\n  // Store the origin module object which passed by programmer\n  this._rawModule = rawModule;\n  var rawState = rawModule.state;\n\n  // Store the origin module's state\n  this.state = (typeof rawState === 'function' ? rawState() : rawState) || {};\n};\n\nvar prototypeAccessors$1 = { namespaced: { configurable: true } };\n\nprototypeAccessors$1.namespaced.get = function () {\n  return !!this._rawModule.namespaced\n};\n\nModule.prototype.addChild = function addChild (key, module) {\n  this._children[key] = module;\n};\n\nModule.prototype.removeChild = function removeChild (key) {\n  delete this._children[key];\n};\n\nModule.prototype.getChild = function getChild (key) {\n  return this._children[key]\n};\n\nModule.prototype.hasChild = function hasChild (key) {\n  return key in this._children\n};\n\nModule.prototype.update = function update (rawModule) {\n  this._rawModule.namespaced = rawModule.namespaced;\n  if (rawModule.actions) {\n    this._rawModule.actions = rawModule.actions;\n  }\n  if (rawModule.mutations) {\n    this._rawModule.mutations = rawModule.mutations;\n  }\n  if (rawModule.getters) {\n    this._rawModule.getters = rawModule.getters;\n  }\n};\n\nModule.prototype.forEachChild = function forEachChild (fn) {\n  forEachValue(this._children, fn);\n};\n\nModule.prototype.forEachGetter = function forEachGetter (fn) {\n  if (this._rawModule.getters) {\n    forEachValue(this._rawModule.getters, fn);\n  }\n};\n\nModule.prototype.forEachAction = function forEachAction (fn) {\n  if (this._rawModule.actions) {\n    forEachValue(this._rawModule.actions, fn);\n  }\n};\n\nModule.prototype.forEachMutation = function forEachMutation (fn) {\n  if (this._rawModule.mutations) {\n    forEachValue(this._rawModule.mutations, fn);\n  }\n};\n\nObject.defineProperties( Module.prototype, prototypeAccessors$1 );\n\nvar ModuleCollection = function ModuleCollection (rawRootModule) {\n  // register root module (Vuex.Store options)\n  this.register([], rawRootModule, false);\n};\n\nModuleCollection.prototype.get = function get (path) {\n  return path.reduce(function (module, key) {\n    return module.getChild(key)\n  }, this.root)\n};\n\nModuleCollection.prototype.getNamespace = function getNamespace (path) {\n  var module = this.root;\n  return path.reduce(function (namespace, key) {\n    module = module.getChild(key);\n    return namespace + (module.namespaced ? key + '/' : '')\n  }, '')\n};\n\nModuleCollection.prototype.update = function update$1 (rawRootModule) {\n  update([], this.root, rawRootModule);\n};\n\nModuleCollection.prototype.register = function register (path, rawModule, runtime) {\n    var this$1$1 = this;\n    if ( runtime === void 0 ) runtime = true;\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assertRawModule(path, rawModule);\n  }\n\n  var newModule = new Module(rawModule, runtime);\n  if (path.length === 0) {\n    this.root = newModule;\n  } else {\n    var parent = this.get(path.slice(0, -1));\n    parent.addChild(path[path.length - 1], newModule);\n  }\n\n  // register nested modules\n  if (rawModule.modules) {\n    forEachValue(rawModule.modules, function (rawChildModule, key) {\n      this$1$1.register(path.concat(key), rawChildModule, runtime);\n    });\n  }\n};\n\nModuleCollection.prototype.unregister = function unregister (path) {\n  var parent = this.get(path.slice(0, -1));\n  var key = path[path.length - 1];\n  var child = parent.getChild(key);\n\n  if (!child) {\n    if ((process.env.NODE_ENV !== 'production')) {\n      console.warn(\n        \"[vuex] trying to unregister module '\" + key + \"', which is \" +\n        \"not registered\"\n      );\n    }\n    return\n  }\n\n  if (!child.runtime) {\n    return\n  }\n\n  parent.removeChild(key);\n};\n\nModuleCollection.prototype.isRegistered = function isRegistered (path) {\n  var parent = this.get(path.slice(0, -1));\n  var key = path[path.length - 1];\n\n  if (parent) {\n    return parent.hasChild(key)\n  }\n\n  return false\n};\n\nfunction update (path, targetModule, newModule) {\n  if ((process.env.NODE_ENV !== 'production')) {\n    assertRawModule(path, newModule);\n  }\n\n  // update target module\n  targetModule.update(newModule);\n\n  // update nested modules\n  if (newModule.modules) {\n    for (var key in newModule.modules) {\n      if (!targetModule.getChild(key)) {\n        if ((process.env.NODE_ENV !== 'production')) {\n          console.warn(\n            \"[vuex] trying to add a new module '\" + key + \"' on hot reloading, \" +\n            'manual reload is needed'\n          );\n        }\n        return\n      }\n      update(\n        path.concat(key),\n        targetModule.getChild(key),\n        newModule.modules[key]\n      );\n    }\n  }\n}\n\nvar functionAssert = {\n  assert: function (value) { return typeof value === 'function'; },\n  expected: 'function'\n};\n\nvar objectAssert = {\n  assert: function (value) { return typeof value === 'function' ||\n    (typeof value === 'object' && typeof value.handler === 'function'); },\n  expected: 'function or object with \"handler\" function'\n};\n\nvar assertTypes = {\n  getters: functionAssert,\n  mutations: functionAssert,\n  actions: objectAssert\n};\n\nfunction assertRawModule (path, rawModule) {\n  Object.keys(assertTypes).forEach(function (key) {\n    if (!rawModule[key]) { return }\n\n    var assertOptions = assertTypes[key];\n\n    forEachValue(rawModule[key], function (value, type) {\n      assert(\n        assertOptions.assert(value),\n        makeAssertionMessage(path, key, type, value, assertOptions.expected)\n      );\n    });\n  });\n}\n\nfunction makeAssertionMessage (path, key, type, value, expected) {\n  var buf = key + \" should be \" + expected + \" but \\\"\" + key + \".\" + type + \"\\\"\";\n  if (path.length > 0) {\n    buf += \" in module \\\"\" + (path.join('.')) + \"\\\"\";\n  }\n  buf += \" is \" + (JSON.stringify(value)) + \".\";\n  return buf\n}\n\nfunction createStore (options) {\n  return new Store(options)\n}\n\nvar Store = function Store (options) {\n  var this$1$1 = this;\n  if ( options === void 0 ) options = {};\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(typeof Promise !== 'undefined', \"vuex requires a Promise polyfill in this browser.\");\n    assert(this instanceof Store, \"store must be called with the new operator.\");\n  }\n\n  var plugins = options.plugins; if ( plugins === void 0 ) plugins = [];\n  var strict = options.strict; if ( strict === void 0 ) strict = false;\n  var devtools = options.devtools;\n\n  // store internal state\n  this._committing = false;\n  this._actions = Object.create(null);\n  this._actionSubscribers = [];\n  this._mutations = Object.create(null);\n  this._wrappedGetters = Object.create(null);\n  this._modules = new ModuleCollection(options);\n  this._modulesNamespaceMap = Object.create(null);\n  this._subscribers = [];\n  this._makeLocalGettersCache = Object.create(null);\n\n  // EffectScope instance. when registering new getters, we wrap them inside\n  // EffectScope so that getters (computed) would not be destroyed on\n  // component unmount.\n  this._scope = null;\n\n  this._devtools = devtools;\n\n  // bind commit and dispatch to self\n  var store = this;\n  var ref = this;\n  var dispatch = ref.dispatch;\n  var commit = ref.commit;\n  this.dispatch = function boundDispatch (type, payload) {\n    return dispatch.call(store, type, payload)\n  };\n  this.commit = function boundCommit (type, payload, options) {\n    return commit.call(store, type, payload, options)\n  };\n\n  // strict mode\n  this.strict = strict;\n\n  var state = this._modules.root.state;\n\n  // init root module.\n  // this also recursively registers all sub-modules\n  // and collects all module getters inside this._wrappedGetters\n  installModule(this, state, [], this._modules.root);\n\n  // initialize the store state, which is responsible for the reactivity\n  // (also registers _wrappedGetters as computed properties)\n  resetStoreState(this, state);\n\n  // apply plugins\n  plugins.forEach(function (plugin) { return plugin(this$1$1); });\n};\n\nvar prototypeAccessors = { state: { configurable: true } };\n\nStore.prototype.install = function install (app, injectKey) {\n  app.provide(injectKey || storeKey, this);\n  app.config.globalProperties.$store = this;\n\n  var useDevtools = this._devtools !== undefined\n    ? this._devtools\n    : (process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__;\n\n  if (useDevtools) {\n    addDevtools(app, this);\n  }\n};\n\nprototypeAccessors.state.get = function () {\n  return this._state.data\n};\n\nprototypeAccessors.state.set = function (v) {\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(false, \"use store.replaceState() to explicit replace store state.\");\n  }\n};\n\nStore.prototype.commit = function commit (_type, _payload, _options) {\n    var this$1$1 = this;\n\n  // check object-style commit\n  var ref = unifyObjectStyle(_type, _payload, _options);\n    var type = ref.type;\n    var payload = ref.payload;\n    var options = ref.options;\n\n  var mutation = { type: type, payload: payload };\n  var entry = this._mutations[type];\n  if (!entry) {\n    if ((process.env.NODE_ENV !== 'production')) {\n      console.error((\"[vuex] unknown mutation type: \" + type));\n    }\n    return\n  }\n  this._withCommit(function () {\n    entry.forEach(function commitIterator (handler) {\n      handler(payload);\n    });\n  });\n\n  this._subscribers\n    .slice() // shallow copy to prevent iterator invalidation if subscriber synchronously calls unsubscribe\n    .forEach(function (sub) { return sub(mutation, this$1$1.state); });\n\n  if (\n    (process.env.NODE_ENV !== 'production') &&\n    options && options.silent\n  ) {\n    console.warn(\n      \"[vuex] mutation type: \" + type + \". Silent option has been removed. \" +\n      'Use the filter functionality in the vue-devtools'\n    );\n  }\n};\n\nStore.prototype.dispatch = function dispatch (_type, _payload) {\n    var this$1$1 = this;\n\n  // check object-style dispatch\n  var ref = unifyObjectStyle(_type, _payload);\n    var type = ref.type;\n    var payload = ref.payload;\n\n  var action = { type: type, payload: payload };\n  var entry = this._actions[type];\n  if (!entry) {\n    if ((process.env.NODE_ENV !== 'production')) {\n      console.error((\"[vuex] unknown action type: \" + type));\n    }\n    return\n  }\n\n  try {\n    this._actionSubscribers\n      .slice() // shallow copy to prevent iterator invalidation if subscriber synchronously calls unsubscribe\n      .filter(function (sub) { return sub.before; })\n      .forEach(function (sub) { return sub.before(action, this$1$1.state); });\n  } catch (e) {\n    if ((process.env.NODE_ENV !== 'production')) {\n      console.warn(\"[vuex] error in before action subscribers: \");\n      console.error(e);\n    }\n  }\n\n  var result = entry.length > 1\n    ? Promise.all(entry.map(function (handler) { return handler(payload); }))\n    : entry[0](payload);\n\n  return new Promise(function (resolve, reject) {\n    result.then(function (res) {\n      try {\n        this$1$1._actionSubscribers\n          .filter(function (sub) { return sub.after; })\n          .forEach(function (sub) { return sub.after(action, this$1$1.state); });\n      } catch (e) {\n        if ((process.env.NODE_ENV !== 'production')) {\n          console.warn(\"[vuex] error in after action subscribers: \");\n          console.error(e);\n        }\n      }\n      resolve(res);\n    }, function (error) {\n      try {\n        this$1$1._actionSubscribers\n          .filter(function (sub) { return sub.error; })\n          .forEach(function (sub) { return sub.error(action, this$1$1.state, error); });\n      } catch (e) {\n        if ((process.env.NODE_ENV !== 'production')) {\n          console.warn(\"[vuex] error in error action subscribers: \");\n          console.error(e);\n        }\n      }\n      reject(error);\n    });\n  })\n};\n\nStore.prototype.subscribe = function subscribe (fn, options) {\n  return genericSubscribe(fn, this._subscribers, options)\n};\n\nStore.prototype.subscribeAction = function subscribeAction (fn, options) {\n  var subs = typeof fn === 'function' ? { before: fn } : fn;\n  return genericSubscribe(subs, this._actionSubscribers, options)\n};\n\nStore.prototype.watch = function watch$1 (getter, cb, options) {\n    var this$1$1 = this;\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(typeof getter === 'function', \"store.watch only accepts a function.\");\n  }\n  return watch(function () { return getter(this$1$1.state, this$1$1.getters); }, cb, Object.assign({}, options))\n};\n\nStore.prototype.replaceState = function replaceState (state) {\n    var this$1$1 = this;\n\n  this._withCommit(function () {\n    this$1$1._state.data = state;\n  });\n};\n\nStore.prototype.registerModule = function registerModule (path, rawModule, options) {\n    if ( options === void 0 ) options = {};\n\n  if (typeof path === 'string') { path = [path]; }\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(Array.isArray(path), \"module path must be a string or an Array.\");\n    assert(path.length > 0, 'cannot register the root module by using registerModule.');\n  }\n\n  this._modules.register(path, rawModule);\n  installModule(this, this.state, path, this._modules.get(path), options.preserveState);\n  // reset store to update getters...\n  resetStoreState(this, this.state);\n};\n\nStore.prototype.unregisterModule = function unregisterModule (path) {\n    var this$1$1 = this;\n\n  if (typeof path === 'string') { path = [path]; }\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(Array.isArray(path), \"module path must be a string or an Array.\");\n  }\n\n  this._modules.unregister(path);\n  this._withCommit(function () {\n    var parentState = getNestedState(this$1$1.state, path.slice(0, -1));\n    delete parentState[path[path.length - 1]];\n  });\n  resetStore(this);\n};\n\nStore.prototype.hasModule = function hasModule (path) {\n  if (typeof path === 'string') { path = [path]; }\n\n  if ((process.env.NODE_ENV !== 'production')) {\n    assert(Array.isArray(path), \"module path must be a string or an Array.\");\n  }\n\n  return this._modules.isRegistered(path)\n};\n\nStore.prototype.hotUpdate = function hotUpdate (newOptions) {\n  this._modules.update(newOptions);\n  resetStore(this, true);\n};\n\nStore.prototype._withCommit = function _withCommit (fn) {\n  var committing = this._committing;\n  this._committing = true;\n  fn();\n  this._committing = committing;\n};\n\nObject.defineProperties( Store.prototype, prototypeAccessors );\n\n/**\n * Reduce the code which written in Vue.js for getting the state.\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} states # Object's item can be a function which accept state and getters for param, you can do something for state and getters in it.\n * @param {Object}\n */\nvar mapState = normalizeNamespace(function (namespace, states) {\n  var res = {};\n  if ((process.env.NODE_ENV !== 'production') && !isValidMap(states)) {\n    console.error('[vuex] mapState: mapper parameter must be either an Array or an Object');\n  }\n  normalizeMap(states).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    res[key] = function mappedState () {\n      var state = this.$store.state;\n      var getters = this.$store.getters;\n      if (namespace) {\n        var module = getModuleByNamespace(this.$store, 'mapState', namespace);\n        if (!module) {\n          return\n        }\n        state = module.context.state;\n        getters = module.context.getters;\n      }\n      return typeof val === 'function'\n        ? val.call(this, state, getters)\n        : state[val]\n    };\n    // mark vuex getter for devtools\n    res[key].vuex = true;\n  });\n  return res\n});\n\n/**\n * Reduce the code which written in Vue.js for committing the mutation\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} mutations # Object's item can be a function which accept `commit` function as the first param, it can accept another params. You can commit mutation and do any other things in this function. specially, You need to pass anthor params from the mapped function.\n * @return {Object}\n */\nvar mapMutations = normalizeNamespace(function (namespace, mutations) {\n  var res = {};\n  if ((process.env.NODE_ENV !== 'production') && !isValidMap(mutations)) {\n    console.error('[vuex] mapMutations: mapper parameter must be either an Array or an Object');\n  }\n  normalizeMap(mutations).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    res[key] = function mappedMutation () {\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\n\n      // Get the commit method from store\n      var commit = this.$store.commit;\n      if (namespace) {\n        var module = getModuleByNamespace(this.$store, 'mapMutations', namespace);\n        if (!module) {\n          return\n        }\n        commit = module.context.commit;\n      }\n      return typeof val === 'function'\n        ? val.apply(this, [commit].concat(args))\n        : commit.apply(this.$store, [val].concat(args))\n    };\n  });\n  return res\n});\n\n/**\n * Reduce the code which written in Vue.js for getting the getters\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} getters\n * @return {Object}\n */\nvar mapGetters = normalizeNamespace(function (namespace, getters) {\n  var res = {};\n  if ((process.env.NODE_ENV !== 'production') && !isValidMap(getters)) {\n    console.error('[vuex] mapGetters: mapper parameter must be either an Array or an Object');\n  }\n  normalizeMap(getters).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    // The namespace has been mutated by normalizeNamespace\n    val = namespace + val;\n    res[key] = function mappedGetter () {\n      if (namespace && !getModuleByNamespace(this.$store, 'mapGetters', namespace)) {\n        return\n      }\n      if ((process.env.NODE_ENV !== 'production') && !(val in this.$store.getters)) {\n        console.error((\"[vuex] unknown getter: \" + val));\n        return\n      }\n      return this.$store.getters[val]\n    };\n    // mark vuex getter for devtools\n    res[key].vuex = true;\n  });\n  return res\n});\n\n/**\n * Reduce the code which written in Vue.js for dispatch the action\n * @param {String} [namespace] - Module's namespace\n * @param {Object|Array} actions # Object's item can be a function which accept `dispatch` function as the first param, it can accept anthor params. You can dispatch action and do any other things in this function. specially, You need to pass anthor params from the mapped function.\n * @return {Object}\n */\nvar mapActions = normalizeNamespace(function (namespace, actions) {\n  var res = {};\n  if ((process.env.NODE_ENV !== 'production') && !isValidMap(actions)) {\n    console.error('[vuex] mapActions: mapper parameter must be either an Array or an Object');\n  }\n  normalizeMap(actions).forEach(function (ref) {\n    var key = ref.key;\n    var val = ref.val;\n\n    res[key] = function mappedAction () {\n      var args = [], len = arguments.length;\n      while ( len-- ) args[ len ] = arguments[ len ];\n\n      // get dispatch function from store\n      var dispatch = this.$store.dispatch;\n      if (namespace) {\n        var module = getModuleByNamespace(this.$store, 'mapActions', namespace);\n        if (!module) {\n          return\n        }\n        dispatch = module.context.dispatch;\n      }\n      return typeof val === 'function'\n        ? val.apply(this, [dispatch].concat(args))\n        : dispatch.apply(this.$store, [val].concat(args))\n    };\n  });\n  return res\n});\n\n/**\n * Rebinding namespace param for mapXXX function in special scoped, and return them by simple object\n * @param {String} namespace\n * @return {Object}\n */\nvar createNamespacedHelpers = function (namespace) { return ({\n  mapState: mapState.bind(null, namespace),\n  mapGetters: mapGetters.bind(null, namespace),\n  mapMutations: mapMutations.bind(null, namespace),\n  mapActions: mapActions.bind(null, namespace)\n}); };\n\n/**\n * Normalize the map\n * normalizeMap([1, 2, 3]) => [ { key: 1, val: 1 }, { key: 2, val: 2 }, { key: 3, val: 3 } ]\n * normalizeMap({a: 1, b: 2, c: 3}) => [ { key: 'a', val: 1 }, { key: 'b', val: 2 }, { key: 'c', val: 3 } ]\n * @param {Array|Object} map\n * @return {Object}\n */\nfunction normalizeMap (map) {\n  if (!isValidMap(map)) {\n    return []\n  }\n  return Array.isArray(map)\n    ? map.map(function (key) { return ({ key: key, val: key }); })\n    : Object.keys(map).map(function (key) { return ({ key: key, val: map[key] }); })\n}\n\n/**\n * Validate whether given map is valid or not\n * @param {*} map\n * @return {Boolean}\n */\nfunction isValidMap (map) {\n  return Array.isArray(map) || isObject(map)\n}\n\n/**\n * Return a function expect two param contains namespace and map. it will normalize the namespace and then the param's function will handle the new namespace and the map.\n * @param {Function} fn\n * @return {Function}\n */\nfunction normalizeNamespace (fn) {\n  return function (namespace, map) {\n    if (typeof namespace !== 'string') {\n      map = namespace;\n      namespace = '';\n    } else if (namespace.charAt(namespace.length - 1) !== '/') {\n      namespace += '/';\n    }\n    return fn(namespace, map)\n  }\n}\n\n/**\n * Search a special module from store by namespace. if module not exist, print error message.\n * @param {Object} store\n * @param {String} helper\n * @param {String} namespace\n * @return {Object}\n */\nfunction getModuleByNamespace (store, helper, namespace) {\n  var module = store._modulesNamespaceMap[namespace];\n  if ((process.env.NODE_ENV !== 'production') && !module) {\n    console.error((\"[vuex] module namespace not found in \" + helper + \"(): \" + namespace));\n  }\n  return module\n}\n\n// Credits: borrowed code from fcomb/redux-logger\n\nfunction createLogger (ref) {\n  if ( ref === void 0 ) ref = {};\n  var collapsed = ref.collapsed; if ( collapsed === void 0 ) collapsed = true;\n  var filter = ref.filter; if ( filter === void 0 ) filter = function (mutation, stateBefore, stateAfter) { return true; };\n  var transformer = ref.transformer; if ( transformer === void 0 ) transformer = function (state) { return state; };\n  var mutationTransformer = ref.mutationTransformer; if ( mutationTransformer === void 0 ) mutationTransformer = function (mut) { return mut; };\n  var actionFilter = ref.actionFilter; if ( actionFilter === void 0 ) actionFilter = function (action, state) { return true; };\n  var actionTransformer = ref.actionTransformer; if ( actionTransformer === void 0 ) actionTransformer = function (act) { return act; };\n  var logMutations = ref.logMutations; if ( logMutations === void 0 ) logMutations = true;\n  var logActions = ref.logActions; if ( logActions === void 0 ) logActions = true;\n  var logger = ref.logger; if ( logger === void 0 ) logger = console;\n\n  return function (store) {\n    var prevState = deepCopy(store.state);\n\n    if (typeof logger === 'undefined') {\n      return\n    }\n\n    if (logMutations) {\n      store.subscribe(function (mutation, state) {\n        var nextState = deepCopy(state);\n\n        if (filter(mutation, prevState, nextState)) {\n          var formattedTime = getFormattedTime();\n          var formattedMutation = mutationTransformer(mutation);\n          var message = \"mutation \" + (mutation.type) + formattedTime;\n\n          startMessage(logger, message, collapsed);\n          logger.log('%c prev state', 'color: #9E9E9E; font-weight: bold', transformer(prevState));\n          logger.log('%c mutation', 'color: #03A9F4; font-weight: bold', formattedMutation);\n          logger.log('%c next state', 'color: #4CAF50; font-weight: bold', transformer(nextState));\n          endMessage(logger);\n        }\n\n        prevState = nextState;\n      });\n    }\n\n    if (logActions) {\n      store.subscribeAction(function (action, state) {\n        if (actionFilter(action, state)) {\n          var formattedTime = getFormattedTime();\n          var formattedAction = actionTransformer(action);\n          var message = \"action \" + (action.type) + formattedTime;\n\n          startMessage(logger, message, collapsed);\n          logger.log('%c action', 'color: #03A9F4; font-weight: bold', formattedAction);\n          endMessage(logger);\n        }\n      });\n    }\n  }\n}\n\nfunction startMessage (logger, message, collapsed) {\n  var startMessage = collapsed\n    ? logger.groupCollapsed\n    : logger.group;\n\n  // render\n  try {\n    startMessage.call(logger, message);\n  } catch (e) {\n    logger.log(message);\n  }\n}\n\nfunction endMessage (logger) {\n  try {\n    logger.groupEnd();\n  } catch (e) {\n    logger.log('—— log end ——');\n  }\n}\n\nfunction getFormattedTime () {\n  var time = new Date();\n  return (\" @ \" + (pad(time.getHours(), 2)) + \":\" + (pad(time.getMinutes(), 2)) + \":\" + (pad(time.getSeconds(), 2)) + \".\" + (pad(time.getMilliseconds(), 3)))\n}\n\nfunction repeat (str, times) {\n  return (new Array(times + 1)).join(str)\n}\n\nfunction pad (num, maxLength) {\n  return repeat('0', maxLength - num.toString().length) + num\n}\n\nvar index = {\n  version: '4.1.0',\n  Store: Store,\n  storeKey: storeKey,\n  createStore: createStore,\n  useStore: useStore,\n  mapState: mapState,\n  mapMutations: mapMutations,\n  mapGetters: mapGetters,\n  mapActions: mapActions,\n  createNamespacedHelpers: createNamespacedHelpers,\n  createLogger: createLogger\n};\n\nexport default index;\nexport { Store, createLogger, createNamespacedHelpers, createStore, mapActions, mapGetters, mapMutations, mapState, storeKey, useStore };\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar tryToString = require('../internals/try-to-string');\n\nvar $TypeError = TypeError;\n\n// `Assert: IsCallable(argument) is true`\nmodule.exports = function (argument) {\n  if (isCallable(argument)) return argument;\n  throw new $TypeError(tryToString(argument) + ' is not a function');\n};\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\nvar has = require('../internals/set-helpers').has;\n\n// Perform ? RequireInternalSlot(M, [[SetData]])\nmodule.exports = function (it) {\n  has(it);\n  return it;\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] === undefined) {\n  defineProperty(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","'use strict';\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it, Prototype) {\n  if (isPrototypeOf(Prototype, it)) return it;\n  throw new $TypeError('Incorrect invocation');\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\n// `Assert: Type(argument) is Object`\nmodule.exports = function (argument) {\n  if (isObject(argument)) return argument;\n  throw new $TypeError($String(argument) + ' is not an object');\n};\n","'use strict';\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar classof = require('../internals/classof-raw');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\n\nvar DataView = globalThis.DataView;\n\nmodule.exports = function (O) {\n  if (!NATIVE_ARRAY_BUFFER || arrayBufferByteLength(O) !== 0) return false;\n  try {\n    // eslint-disable-next-line no-new -- thrower\n    new DataView(O);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar toIndex = require('../internals/to-index');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\nvar detachTransferable = require('../internals/detach-transferable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = globalThis.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = globalThis.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = globalThis[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {\n    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = lengthOfArrayLike(O);\n    if (length === 0) return !IS_INCLUDES && -1;\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el !== el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value !== value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar isArray = require('../internals/is-array');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Safari < 13 does not throw an error in this case\nvar SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {\n  // makes no sense without proper strict mode support\n  if (this !== undefined) return true;\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).length = 1;\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\nmodule.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {\n  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {\n    throw new $TypeError('Cannot set read only .length');\n  } return O.length = length;\n} : function (O, length) {\n  return O.length = length;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis([].slice);\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.toReversed\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed\nmodule.exports = function (O, C) {\n  var len = lengthOfArrayLike(O);\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = O[len - k - 1];\n  return A;\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.with\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator, 'throw', error);\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar toString = uncurryThis({}.toString);\nvar stringSlice = uncurryThis(''.slice);\n\nmodule.exports = function (it) {\n  return stringSlice(toString(it), 8, -1);\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source, exceptions) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {\n      defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n    }\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\n// `CreateIterResultObject` abstract operation\n// https://tc39.es/ecma262/#sec-createiterresultobject\nmodule.exports = function (value, done) {\n  return { value: value, done: done };\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nmodule.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));\n  else object[key] = value;\n};\n","'use strict';\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar definePropertyModule = require('../internals/object-define-property');\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nmodule.exports = function (O, key, value, options) {\n  if (!options) options = {};\n  var simple = options.enumerable;\n  var name = options.name !== undefined ? options.name : key;\n  if (isCallable(value)) makeBuiltIn(value, name, options);\n  if (options.global) {\n    if (simple) O[key] = value;\n    else defineGlobalProperty(key, value);\n  } else {\n    try {\n      if (!options.unsafe) delete O[key];\n      else if (O[key]) simple = true;\n    } catch (error) { /* empty */ }\n    if (simple) O[key] = value;\n    else definePropertyModule.f(O, key, {\n      value: value,\n      enumerable: false,\n      configurable: !options.nonConfigurable,\n      writable: !options.nonWritable\n    });\n  } return O;\n};\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) defineBuiltIn(target, key, src[key], options);\n  return target;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\n\nmodule.exports = function (key, value) {\n  try {\n    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });\n  } catch (error) {\n    globalThis[key] = value;\n  } return value;\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getBuiltInNodeModule = require('../internals/get-built-in-node-module');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\n\nvar document = globalThis.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","'use strict';\nvar $TypeError = TypeError;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991\n\nmodule.exports = function (it) {\n  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');\n  return it;\n};\n","'use strict';\nmodule.exports = {\n  IndexSizeError: { s: 'INDEX_SIZE_ERR', c: 1, m: 1 },\n  DOMStringSizeError: { s: 'DOMSTRING_SIZE_ERR', c: 2, m: 0 },\n  HierarchyRequestError: { s: 'HIERARCHY_REQUEST_ERR', c: 3, m: 1 },\n  WrongDocumentError: { s: 'WRONG_DOCUMENT_ERR', c: 4, m: 1 },\n  InvalidCharacterError: { s: 'INVALID_CHARACTER_ERR', c: 5, m: 1 },\n  NoDataAllowedError: { s: 'NO_DATA_ALLOWED_ERR', c: 6, m: 0 },\n  NoModificationAllowedError: { s: 'NO_MODIFICATION_ALLOWED_ERR', c: 7, m: 1 },\n  NotFoundError: { s: 'NOT_FOUND_ERR', c: 8, m: 1 },\n  NotSupportedError: { s: 'NOT_SUPPORTED_ERR', c: 9, m: 1 },\n  InUseAttributeError: { s: 'INUSE_ATTRIBUTE_ERR', c: 10, m: 1 },\n  InvalidStateError: { s: 'INVALID_STATE_ERR', c: 11, m: 1 },\n  SyntaxError: { s: 'SYNTAX_ERR', c: 12, m: 1 },\n  InvalidModificationError: { s: 'INVALID_MODIFICATION_ERR', c: 13, m: 1 },\n  NamespaceError: { s: 'NAMESPACE_ERR', c: 14, m: 1 },\n  InvalidAccessError: { s: 'INVALID_ACCESS_ERR', c: 15, m: 1 },\n  ValidationError: { s: 'VALIDATION_ERR', c: 16, m: 0 },\n  TypeMismatchError: { s: 'TYPE_MISMATCH_ERR', c: 17, m: 1 },\n  SecurityError: { s: 'SECURITY_ERR', c: 18, m: 1 },\n  NetworkError: { s: 'NETWORK_ERR', c: 19, m: 1 },\n  AbortError: { s: 'ABORT_ERR', c: 20, m: 1 },\n  URLMismatchError: { s: 'URL_MISMATCH_ERR', c: 21, m: 1 },\n  QuotaExceededError: { s: 'QUOTA_EXCEEDED_ERR', c: 22, m: 1 },\n  TimeoutError: { s: 'TIMEOUT_ERR', c: 23, m: 1 },\n  InvalidNodeTypeError: { s: 'INVALID_NODE_TYPE_ERR', c: 24, m: 1 },\n  DataCloneError: { s: 'DATA_CLONE_ERR', c: 25, m: 1 }\n};\n","'use strict';\n// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","'use strict';\nvar userAgent = require('../internals/environment-user-agent');\n\n// eslint-disable-next-line redos/no-vulnerable -- safe\nmodule.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);\n","'use strict';\nvar ENVIRONMENT = require('../internals/environment');\n\nmodule.exports = ENVIRONMENT === 'NODE';\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\nvar navigator = globalThis.navigator;\nvar userAgent = navigator && navigator.userAgent;\n\nmodule.exports = userAgent ? String(userAgent) : '';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\n\nvar process = globalThis.process;\nvar Deno = globalThis.Deno;\nvar versions = process && process.versions || Deno && Deno.version;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  // in old Chrome, versions of V8 isn't V8 = Chrome / 10\n  // but their correct versions are not interesting for us\n  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);\n}\n\n// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`\n// so check `userAgent` even if `.v8` exists, but 0\nif (!version && userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = +match[1];\n  }\n}\n\nmodule.exports = version;\n","'use strict';\n/* global Bun, Deno -- detection */\nvar globalThis = require('../internals/global-this');\nvar userAgent = require('../internals/environment-user-agent');\nvar classof = require('../internals/classof-raw');\n\nvar userAgentStartsWith = function (string) {\n  return userAgent.slice(0, string.length) === string;\n};\n\nmodule.exports = (function () {\n  if (userAgentStartsWith('Bun/')) return 'BUN';\n  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';\n  if (userAgentStartsWith('Deno/')) return 'DENO';\n  if (userAgentStartsWith('Node.js/')) return 'NODE';\n  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';\n  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';\n  if (classof(globalThis.process) === 'process') return 'NODE';\n  if (globalThis.window && globalThis.document) return 'BROWSER';\n  return 'REST';\n})();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar $Error = Error;\nvar replace = uncurryThis(''.replace);\n\nvar TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');\n// eslint-disable-next-line redos/no-vulnerable, sonarjs/slow-regex -- safe\nvar V8_OR_CHAKRA_STACK_ENTRY = /\\n\\s*at [^:]*:[^\\n]*/;\nvar IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);\n\nmodule.exports = function (stack, dropEntries) {\n  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {\n    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');\n  } return stack;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineGlobalProperty = require('../internals/define-global-property');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target         - name of the target object\n  options.global         - target is the global object\n  options.stat           - export as static methods of target\n  options.proto          - export as prototype methods of target\n  options.real           - real prototype method for the `pure` version\n  options.forced         - export even if the native feature is available\n  options.bind           - bind methods to the target, required for the `pure` version\n  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe         - use the simple assignment of property instead of delete + defineProperty\n  options.sham           - add a flag to not completely full polyfills\n  options.enumerable     - export as enumerable property\n  options.dontCallGetSet - prevent calling a getter on target\n  options.name           - the .name of the function if it does not match the key\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = globalThis;\n  } else if (STATIC) {\n    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});\n  } else {\n    target = globalThis[TARGET] && globalThis[TARGET].prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.dontCallGetSet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty == typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    defineBuiltIn(target, key, sourceProperty, options);\n  }\n};\n","'use strict';\nmodule.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar apply = FunctionPrototype.apply;\nvar call = FunctionPrototype.call;\n\n// eslint-disable-next-line es/no-function-prototype-bind, es/no-reflect -- safe\nmodule.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {\n  return call.apply(apply, arguments);\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-function-prototype-bind -- safe\n  var test = (function () { /* empty */ }).bind();\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return typeof test != 'function' || test.hasOwnProperty('prototype');\n});\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar call = Function.prototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nmodule.exports = NATIVE_BIND ? call.bind(call) : function () {\n  return call.apply(call, arguments);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar hasOwn = require('../internals/has-own-property');\n\nvar FunctionPrototype = Function.prototype;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;\n\nvar EXISTS = hasOwn(FunctionPrototype, 'name');\n// additional protection from minified / mangled / dropped function names\nvar PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';\nvar CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));\n\nmodule.exports = {\n  EXISTS: EXISTS,\n  PROPER: PROPER,\n  CONFIGURABLE: CONFIGURABLE\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\n\nmodule.exports = function (object, key, method) {\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));\n  } catch (error) { /* empty */ }\n};\n","'use strict';\nvar classofRaw = require('../internals/classof-raw');\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = function (fn) {\n  // Nashorn bug:\n  //   https://github.com/zloirock/core-js/issues/1128\n  //   https://github.com/zloirock/core-js/issues/1130\n  if (classofRaw(fn) === 'Function') return uncurryThis(fn);\n};\n","'use strict';\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar FunctionPrototype = Function.prototype;\nvar call = FunctionPrototype.call;\n// eslint-disable-next-line es/no-function-prototype-bind -- safe\nvar uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);\n\nmodule.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {\n  return function () {\n    return call.apply(fn, arguments);\n  };\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar IS_NODE = require('../internals/environment-is-node');\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\n\nmodule.exports = function (CONSTRUCTOR, METHOD) {\n  var Constructor = globalThis[CONSTRUCTOR];\n  var Prototype = Constructor && Constructor.prototype;\n  return Prototype && Prototype[METHOD];\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar aFunction = function (argument) {\n  return isCallable(argument) ? argument : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];\n};\n","'use strict';\n// `GetIteratorDirect(obj)` abstract operation\n// https://tc39.es/proposal-iterator-helpers/#sec-getiteratordirect\nmodule.exports = function (obj) {\n  return {\n    iterator: obj,\n    next: obj.next,\n    done: false\n  };\n};\n","'use strict';\nvar classof = require('../internals/classof');\nvar getMethod = require('../internals/get-method');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)\n    || getMethod(it, '@@iterator')\n    || Iterators[classof(it)];\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument, usingIterator) {\n  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;\n  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));\n  throw new $TypeError(tryToString(argument) + ' is not iterable');\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\n// `GetMethod` abstract operation\n// https://tc39.es/ecma262/#sec-getmethod\nmodule.exports = function (V, P) {\n  var func = V[P];\n  return isNullOrUndefined(func) ? undefined : aCallable(func);\n};\n","'use strict';\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar call = require('../internals/function-call');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\nvar INVALID_SIZE = 'Invalid size';\nvar $RangeError = RangeError;\nvar $TypeError = TypeError;\nvar max = Math.max;\n\nvar SetRecord = function (set, intSize) {\n  this.set = set;\n  this.size = max(intSize, 0);\n  this.has = aCallable(set.has);\n  this.keys = aCallable(set.keys);\n};\n\nSetRecord.prototype = {\n  getIterator: function () {\n    return getIteratorDirect(anObject(call(this.keys, this.set)));\n  },\n  includes: function (it) {\n    return call(this.has, this.set, it);\n  }\n};\n\n// `GetSetRecord` abstract operation\n// https://tc39.es/proposal-set-methods/#sec-getsetrecord\nmodule.exports = function (obj) {\n  anObject(obj);\n  var numSize = +obj.size;\n  // NOTE: If size is undefined, then numSize will be NaN\n  // eslint-disable-next-line no-self-compare -- NaN check\n  if (numSize !== numSize) throw new $TypeError(INVALID_SIZE);\n  var intSize = toIntegerOrInfinity(numSize);\n  if (intSize < 0) throw new $RangeError(INVALID_SIZE);\n  return new SetRecord(obj, intSize);\n};\n","'use strict';\nvar check = function (it) {\n  return it && it.Math === Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  check(typeof this == 'object' && this) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toObject = require('../internals/to-object');\n\nvar hasOwnProperty = uncurryThis({}.hasOwnProperty);\n\n// `HasOwnProperty` abstract operation\n// https://tc39.es/ecma262/#sec-hasownproperty\n// eslint-disable-next-line es/no-object-hasown -- safe\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty(toObject(it), key);\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thanks to IE8 for its funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a !== 7;\n});\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar $Object = Object;\nvar split = uncurryThis(''.split);\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !$Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) === 'String' ? split(it, '') : $Object(it);\n} : $Object;\n","'use strict';\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    isCallable(NewTarget = dummy.constructor) &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar isCallable = require('../internals/is-callable');\nvar store = require('../internals/shared-store');\n\nvar functionToString = uncurryThis(Function.toString);\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (!isCallable(store.inspectSource)) {\n  store.inspectSource = function (it) {\n    return functionToString(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar NATIVE_WEAK_MAP = require('../internals/weak-map-basic-detection');\nvar globalThis = require('../internals/global-this');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar hasOwn = require('../internals/has-own-property');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar TypeError = globalThis.TypeError;\nvar WeakMap = globalThis.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  /* eslint-disable no-self-assign -- prototype methods protection */\n  store.get = store.get;\n  store.has = store.has;\n  store.set = store.set;\n  /* eslint-enable no-self-assign -- prototype methods protection */\n  set = function (it, metadata) {\n    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    store.set(it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return store.get(it) || {};\n  };\n  has = function (it) {\n    return store.has(it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return hasOwn(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return hasOwn(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(argument) {\n  return classof(argument) === 'Array';\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n","'use strict';\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot\nvar documentAll = typeof document == 'object' && document.all;\n\n// `IsCallable` abstract operation\n// https://tc39.es/ecma262/#sec-iscallable\n// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing\nmodule.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {\n  return typeof argument == 'function' || argument === documentAll;\n} : function (argument) {\n  return typeof argument == 'function';\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value === POLYFILL ? true\n    : value === NATIVE ? false\n    : isCallable(detection) ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\n// we can't use just `it == null` since of `document.all` special case\n// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec\nmodule.exports = function (it) {\n  return it === null || it === undefined;\n};\n","'use strict';\nvar isCallable = require('../internals/is-callable');\n\nmodule.exports = function (it) {\n  return typeof it == 'object' ? it !== null : isCallable(it);\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nmodule.exports = false;\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar isCallable = require('../internals/is-callable');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar $Object = Object;\n\nmodule.exports = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  var $Symbol = getBuiltIn('Symbol');\n  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));\n};\n","'use strict';\nvar call = require('../internals/function-call');\n\nmodule.exports = function (record, fn, ITERATOR_INSTEAD_OF_RECORD) {\n  var iterator = ITERATOR_INSTEAD_OF_RECORD ? record : record.iterator;\n  var next = record.next;\n  var step, result;\n  while (!(step = call(next, iterator)).done) {\n    result = fn(step.value);\n    if (result !== undefined) return result;\n  }\n};\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar tryToString = require('../internals/try-to-string');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getIterator = require('../internals/get-iterator');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar $TypeError = TypeError;\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nvar ResultPrototype = Result.prototype;\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_RECORD = !!(options && options.IS_RECORD);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator, 'normal', condition);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_RECORD) {\n    iterator = iterable.iterator;\n  } else if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && isPrototypeOf(ResultPrototype, result)) return result;\n      } return new Result(false);\n    }\n    iterator = getIterator(iterable, iterFn);\n  }\n\n  next = IS_RECORD ? iterable.next : iterator.next;\n  while (!(step = call(next, iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator, 'throw', error);\n    }\n    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;\n  } return new Result(false);\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar anObject = require('../internals/an-object');\nvar getMethod = require('../internals/get-method');\n\nmodule.exports = function (iterator, kind, value) {\n  var innerResult, innerError;\n  anObject(iterator);\n  try {\n    innerResult = getMethod(iterator, 'return');\n    if (!innerResult) {\n      if (kind === 'throw') throw value;\n      return value;\n    }\n    innerResult = call(innerResult, iterator);\n  } catch (error) {\n    innerError = true;\n    innerResult = error;\n  }\n  if (kind === 'throw') throw value;\n  if (innerError) throw innerResult;\n  anObject(innerResult);\n  return value;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar create = require('../internals/object-create');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIns = require('../internals/define-built-ins');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar InternalStateModule = require('../internals/internal-state');\nvar getMethod = require('../internals/get-method');\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ITERATOR_HELPER = 'IteratorHelper';\nvar WRAP_FOR_VALID_ITERATOR = 'WrapForValidIterator';\nvar setInternalState = InternalStateModule.set;\n\nvar createIteratorProxyPrototype = function (IS_ITERATOR) {\n  var getInternalState = InternalStateModule.getterFor(IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER);\n\n  return defineBuiltIns(create(IteratorPrototype), {\n    next: function next() {\n      var state = getInternalState(this);\n      // for simplification:\n      //   for `%WrapForValidIteratorPrototype%.next` or with `state.returnHandlerResult` our `nextHandler` returns `IterResultObject`\n      //   for `%IteratorHelperPrototype%.next` - just a value\n      if (IS_ITERATOR) return state.nextHandler();\n      if (state.done) return createIterResultObject(undefined, true);\n      try {\n        var result = state.nextHandler();\n        return state.returnHandlerResult ? result : createIterResultObject(result, state.done);\n      } catch (error) {\n        state.done = true;\n        throw error;\n      }\n    },\n    'return': function () {\n      var state = getInternalState(this);\n      var iterator = state.iterator;\n      state.done = true;\n      if (IS_ITERATOR) {\n        var returnMethod = getMethod(iterator, 'return');\n        return returnMethod ? call(returnMethod, iterator) : createIterResultObject(undefined, true);\n      }\n      if (state.inner) try {\n        iteratorClose(state.inner.iterator, 'normal');\n      } catch (error) {\n        return iteratorClose(iterator, 'throw', error);\n      }\n      if (iterator) iteratorClose(iterator, 'normal');\n      return createIterResultObject(undefined, true);\n    }\n  });\n};\n\nvar WrapForValidIteratorPrototype = createIteratorProxyPrototype(true);\nvar IteratorHelperPrototype = createIteratorProxyPrototype(false);\n\ncreateNonEnumerableProperty(IteratorHelperPrototype, TO_STRING_TAG, 'Iterator Helper');\n\nmodule.exports = function (nextHandler, IS_ITERATOR, RETURN_HANDLER_RESULT) {\n  var IteratorProxy = function Iterator(record, state) {\n    if (state) {\n      state.iterator = record.iterator;\n      state.next = record.next;\n    } else state = record;\n    state.type = IS_ITERATOR ? WRAP_FOR_VALID_ITERATOR : ITERATOR_HELPER;\n    state.returnHandlerResult = !!RETURN_HANDLER_RESULT;\n    state.nextHandler = nextHandler;\n    state.counter = 0;\n    state.done = false;\n    setInternalState(this, state);\n  };\n\n  IteratorProxy.prototype = IS_ITERATOR ? WrapForValidIteratorPrototype : IteratorHelperPrototype;\n\n  return IteratorProxy;\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var result = anObject(call(this.next, iterator));\n  var done = this.done = !!result.done;\n  if (!done) return callWithSafeIterationClosing(iterator, this.mapper, [result.value, this.counter++], true);\n});\n\n// `Iterator.prototype.map` method\n// https://github.com/tc39/proposal-iterator-helpers\nmodule.exports = function map(mapper) {\n  anObject(this);\n  aCallable(mapper);\n  return new IteratorProxy(getIteratorDirect(this), {\n    mapper: mapper\n  });\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\nelse if (IS_PURE) IteratorPrototype = create(IteratorPrototype);\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif (!isCallable(IteratorPrototype[ITERATOR])) {\n  defineBuiltIn(IteratorPrototype, ITERATOR, function () {\n    return this;\n  });\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nmodule.exports = {};\n","'use strict';\nvar toLength = require('../internals/to-length');\n\n// `LengthOfArrayLike` abstract operation\n// https://tc39.es/ecma262/#sec-lengthofarraylike\nmodule.exports = function (obj) {\n  return toLength(obj.length);\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar fails = require('../internals/fails');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar CONFIGURABLE_FUNCTION_NAME = require('../internals/function-name').CONFIGURABLE;\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar $String = String;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar defineProperty = Object.defineProperty;\nvar stringSlice = uncurryThis(''.slice);\nvar replace = uncurryThis(''.replace);\nvar join = uncurryThis([].join);\n\nvar CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {\n  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;\n});\n\nvar TEMPLATE = String(String).split('String');\n\nvar makeBuiltIn = module.exports = function (value, name, options) {\n  if (stringSlice($String(name), 0, 7) === 'Symbol(') {\n    name = '[' + replace($String(name), /^Symbol\\(([^)]*)\\).*$/, '$1') + ']';\n  }\n  if (options && options.getter) name = 'get ' + name;\n  if (options && options.setter) name = 'set ' + name;\n  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {\n    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });\n    else value.name = name;\n  }\n  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {\n    defineProperty(value, 'length', { value: options.arity });\n  }\n  try {\n    if (options && hasOwn(options, 'constructor') && options.constructor) {\n      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });\n    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable\n    } else if (value.prototype) value.prototype = undefined;\n  } catch (error) { /* empty */ }\n  var state = enforceInternalState(value);\n  if (!hasOwn(state, 'source')) {\n    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');\n  } return value;\n};\n\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n// eslint-disable-next-line no-extend-native -- required\nFunction.prototype.toString = makeBuiltIn(function toString() {\n  return isCallable(this) && getInternalState(this).source || inspectSource(this);\n}, 'toString');\n","'use strict';\nvar ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `Math.trunc` method\n// https://tc39.es/ecma262/#sec-math.trunc\n// eslint-disable-next-line es/no-math-trunc -- safe\nmodule.exports = Math.trunc || function trunc(x) {\n  var n = +x;\n  return (n > 0 ? floor : ceil)(n);\n};\n","'use strict';\nvar toString = require('../internals/to-string');\n\nmodule.exports = function (argument, $default) {\n  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);\n};\n","'use strict';\n/* global ActiveXObject -- old IE, WSH */\nvar anObject = require('../internals/an-object');\nvar definePropertiesModule = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  // eslint-disable-next-line no-useless-assignment -- avoid memory leak\n  activeXDocument = null;\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    activeXDocument = new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = typeof document != 'undefined'\n    ? document.domain && activeXDocument\n      ? NullProtoObjectViaActiveX(activeXDocument) // old IE\n      : NullProtoObjectViaIFrame()\n    : NullProtoObjectViaActiveX(activeXDocument); // WSH\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n// eslint-disable-next-line es/no-object-create -- safe\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nexports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var props = toIndexedObject(Properties);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar V8_PROTOTYPE_DEFINE_BUG = require('../internals/v8-prototype-define-bug');\nvar anObject = require('../internals/an-object');\nvar toPropertyKey = require('../internals/to-property-key');\n\nvar $TypeError = TypeError;\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nvar ENUMERABLE = 'enumerable';\nvar CONFIGURABLE = 'configurable';\nvar WRITABLE = 'writable';\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {\n    var current = $getOwnPropertyDescriptor(O, P);\n    if (current && current[WRITABLE]) {\n      O[P] = Attributes.value;\n      Attributes = {\n        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],\n        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],\n        writable: false\n      };\n    }\n  } return $defineProperty(O, P, Attributes);\n} : $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPropertyKey(P);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar call = require('../internals/function-call');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPropertyKey = require('../internals/to-property-key');\nvar hasOwn = require('../internals/has-own-property');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPropertyKey(P);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nmodule.exports = uncurryThis({}.isPrototypeOf);\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar hasOwn = require('../internals/has-own-property');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar push = uncurryThis([].push);\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (hasOwn(O, key = names[i++])) {\n    ~indexOf(result, key) || push(result, key);\n  }\n  return result;\n};\n","'use strict';\nvar internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar call = require('../internals/function-call');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\n\nvar $TypeError = TypeError;\n\n// `OrdinaryToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-ordinarytoprimitive\nmodule.exports = function (input, pref) {\n  var fn, val;\n  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;\n  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;\n  throw new $TypeError(\"Can't convert object to primitive value\");\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\nvar concat = uncurryThis([].concat);\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;\n};\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.hasIndices) result += 'd';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.unicodeSets) result += 'v';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\n\nvar $TypeError = TypeError;\n\n// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (isNullOrUndefined(it)) throw new $TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar apply = require('../internals/function-apply');\nvar isCallable = require('../internals/is-callable');\nvar ENVIRONMENT = require('../internals/environment');\nvar USER_AGENT = require('../internals/environment-user-agent');\nvar arraySlice = require('../internals/array-slice');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar Function = globalThis.Function;\n// dirty IE9- and Bun 0.3.0- checks\nvar WRAP = /MSIE .\\./.test(USER_AGENT) || ENVIRONMENT === 'BUN' && (function () {\n  var version = globalThis.Bun.version.split('.');\n  return version.length < 3 || version[0] === '0' && (version[1] < 3 || version[1] === '3' && version[2] === '0');\n})();\n\n// IE9- / Bun 0.3.0- setTimeout / setInterval / setImmediate additional parameters fix\n// https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timers\n// https://github.com/oven-sh/bun/issues/1633\nmodule.exports = function (scheduler, hasTimeArg) {\n  var firstParamIndex = hasTimeArg ? 2 : 1;\n  return WRAP ? function (handler, timeout /* , ...arguments */) {\n    var boundArgs = validateArgumentsLength(arguments.length, 1) > firstParamIndex;\n    var fn = isCallable(handler) ? handler : Function(handler);\n    var params = boundArgs ? arraySlice(arguments, firstParamIndex) : [];\n    var callback = boundArgs ? function () {\n      apply(fn, this, params);\n    } : fn;\n    return hasTimeArg ? scheduler(callback, timeout) : scheduler(callback);\n  } : scheduler;\n};\n","'use strict';\nvar SetHelpers = require('../internals/set-helpers');\nvar iterate = require('../internals/set-iterate');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\n\nmodule.exports = function (set) {\n  var result = new Set();\n  iterate(set, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.difference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function difference(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = clone(O);\n  if (size(O) <= otherRec.size) iterateSet(O, function (e) {\n    if (otherRec.includes(e)) remove(result, e);\n  });\n  else iterateSimple(otherRec.getIterator(), function (e) {\n    if (has(O, e)) remove(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\n// eslint-disable-next-line es/no-set -- safe\nvar SetPrototype = Set.prototype;\n\nmodule.exports = {\n  // eslint-disable-next-line es/no-set -- safe\n  Set: Set,\n  add: uncurryThis(SetPrototype.add),\n  has: uncurryThis(SetPrototype.has),\n  remove: uncurryThis(SetPrototype['delete']),\n  proto: SetPrototype\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar Set = SetHelpers.Set;\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\n\n// `Set.prototype.intersection` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function intersection(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  var result = new Set();\n\n  if (size(O) > otherRec.size) {\n    iterateSimple(otherRec.getIterator(), function (e) {\n      if (has(O, e)) add(result, e);\n    });\n  } else {\n    iterateSet(O, function (e) {\n      if (otherRec.includes(e)) add(result, e);\n    });\n  }\n\n  return result;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSet = require('../internals/set-iterate');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isDisjointFrom\nmodule.exports = function isDisjointFrom(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) <= otherRec.size) return iterateSet(O, function (e) {\n    if (otherRec.includes(e)) return false;\n  }, true) !== false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar size = require('../internals/set-size');\nvar iterate = require('../internals/set-iterate');\nvar getSetRecord = require('../internals/get-set-record');\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSubsetOf\nmodule.exports = function isSubsetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) > otherRec.size) return false;\n  return iterate(O, function (e) {\n    if (!otherRec.includes(e)) return false;\n  }, true) !== false;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar has = require('../internals/set-helpers').has;\nvar size = require('../internals/set-size');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\nvar iteratorClose = require('../internals/iterator-close');\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.github.io/proposal-set-methods/#Set.prototype.isSupersetOf\nmodule.exports = function isSupersetOf(other) {\n  var O = aSet(this);\n  var otherRec = getSetRecord(other);\n  if (size(O) < otherRec.size) return false;\n  var iterator = otherRec.getIterator();\n  return iterateSimple(iterator, function (e) {\n    if (!has(O, e)) return iteratorClose(iterator, 'normal', false);\n  }) !== false;\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar iterateSimple = require('../internals/iterate-simple');\nvar SetHelpers = require('../internals/set-helpers');\n\nvar Set = SetHelpers.Set;\nvar SetPrototype = SetHelpers.proto;\nvar forEach = uncurryThis(SetPrototype.forEach);\nvar keys = uncurryThis(SetPrototype.keys);\nvar next = keys(new Set()).next;\n\nmodule.exports = function (set, fn, interruptible) {\n  return interruptible ? iterateSimple({ iterator: keys(set), next: next }, fn) : forEach(set, fn);\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\n\nvar createSetLike = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return false;\n    },\n    keys: function () {\n      return {\n        next: function () {\n          return { done: true };\n        }\n      };\n    }\n  };\n};\n\nvar createSetLikeWithInfinitySize = function (size) {\n  return {\n    size: size,\n    has: function () {\n      return true;\n    },\n    keys: function () {\n      throw new Error('e');\n    }\n  };\n};\n\nmodule.exports = function (name, callback) {\n  var Set = getBuiltIn('Set');\n  try {\n    new Set()[name](createSetLike(0));\n    try {\n      // late spec change, early WebKit ~ Safari 17.0 beta implementation does not pass it\n      // https://github.com/tc39/proposal-set-methods/pull/88\n      new Set()[name](createSetLike(-1));\n      return false;\n    } catch (error2) {\n      if (!callback) return true;\n      // early V8 implementation bug\n      // https://issues.chromium.org/issues/351332634\n      try {\n        new Set()[name](createSetLikeWithInfinitySize(-Infinity));\n        return false;\n      } catch (error) {\n        var set = new Set();\n        set.add(1);\n        set.add(2);\n        return callback(set[name](createSetLikeWithInfinitySize(Infinity)));\n      }\n    }\n  } catch (error) {\n    return false;\n  }\n};\n","'use strict';\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar SetHelpers = require('../internals/set-helpers');\n\nmodule.exports = uncurryThisAccessor(SetHelpers.proto, 'size', 'get') || function (set) {\n  return set.size;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar SetHelpers = require('../internals/set-helpers');\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\nvar add = SetHelpers.add;\nvar has = SetHelpers.has;\nvar remove = SetHelpers.remove;\n\n// `Set.prototype.symmetricDifference` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function symmetricDifference(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (e) {\n    if (has(O, e)) remove(result, e);\n    else add(result, e);\n  });\n  return result;\n};\n","'use strict';\nvar aSet = require('../internals/a-set');\nvar add = require('../internals/set-helpers').add;\nvar clone = require('../internals/set-clone');\nvar getSetRecord = require('../internals/get-set-record');\nvar iterateSimple = require('../internals/iterate-simple');\n\n// `Set.prototype.union` method\n// https://github.com/tc39/proposal-set-methods\nmodule.exports = function union(other) {\n  var O = aSet(this);\n  var keysIter = getSetRecord(other).getIterator();\n  var result = clone(O);\n  iterateSimple(keysIter, function (it) {\n    add(result, it);\n  });\n  return result;\n};\n","'use strict';\nvar shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar globalThis = require('../internals/global-this');\nvar defineGlobalProperty = require('../internals/define-global-property');\n\nvar SHARED = '__core-js_shared__';\nvar store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});\n\n(store.versions || (store.versions = [])).push({\n  version: '3.40.0',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2014-2025 Denis Pushkarev (zloirock.ru)',\n  license: 'https://github.com/zloirock/core-js/blob/v3.40.0/LICENSE',\n  source: 'https://github.com/zloirock/core-js'\n});\n","'use strict';\nvar store = require('../internals/shared-store');\n\nmodule.exports = function (key, value) {\n  return store[key] || (store[key] = value || {});\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/environment-v8-version');\nvar ENVIRONMENT = require('../internals/environment');\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/environment-v8-version');\nvar fails = require('../internals/fails');\nvar globalThis = require('../internals/global-this');\n\nvar $String = globalThis.String;\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol('symbol detection');\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,\n  // of course, fail.\n  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar apply = require('../internals/function-apply');\nvar bind = require('../internals/function-bind-context');\nvar isCallable = require('../internals/is-callable');\nvar hasOwn = require('../internals/has-own-property');\nvar fails = require('../internals/fails');\nvar html = require('../internals/html');\nvar arraySlice = require('../internals/array-slice');\nvar createElement = require('../internals/document-create-element');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\nvar IS_IOS = require('../internals/environment-is-ios');\nvar IS_NODE = require('../internals/environment-is-node');\n\nvar set = globalThis.setImmediate;\nvar clear = globalThis.clearImmediate;\nvar process = globalThis.process;\nvar Dispatch = globalThis.Dispatch;\nvar Function = globalThis.Function;\nvar MessageChannel = globalThis.MessageChannel;\nvar String = globalThis.String;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar $location, defer, channel, port;\n\nfails(function () {\n  // Deno throws a ReferenceError on `location` access without `--location` flag\n  $location = globalThis.location;\n});\n\nvar run = function (id) {\n  if (hasOwn(queue, id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar eventListener = function (event) {\n  run(event.data);\n};\n\nvar globalPostMessageDefer = function (id) {\n  // old engines have not location.origin\n  globalThis.postMessage(String(id), $location.protocol + '//' + $location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(handler) {\n    validateArgumentsLength(arguments.length, 1);\n    var fn = isCallable(handler) ? handler : Function(handler);\n    var args = arraySlice(arguments, 1);\n    queue[++counter] = function () {\n      apply(fn, undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE) {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = eventListener;\n    defer = bind(port.postMessage, port);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    globalThis.addEventListener &&\n    isCallable(globalThis.postMessage) &&\n    !globalThis.importScripts &&\n    $location && $location.protocol !== 'file:' &&\n    !fails(globalPostMessageDefer)\n  ) {\n    defer = globalPostMessageDefer;\n    globalThis.addEventListener('message', eventListener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toIntegerOrInfinity(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n","'use strict';\n// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","'use strict';\nvar trunc = require('../internals/math-trunc');\n\n// `ToIntegerOrInfinity` abstract operation\n// https://tc39.es/ecma262/#sec-tointegerorinfinity\nmodule.exports = function (argument) {\n  var number = +argument;\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return number !== number || number === 0 ? 0 : trunc(number);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  var len = toIntegerOrInfinity(argument);\n  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","'use strict';\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $Object = Object;\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return $Object(requireObjectCoercible(argument));\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar isObject = require('../internals/is-object');\nvar isSymbol = require('../internals/is-symbol');\nvar getMethod = require('../internals/get-method');\nvar ordinaryToPrimitive = require('../internals/ordinary-to-primitive');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar $TypeError = TypeError;\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\nmodule.exports = function (input, pref) {\n  if (!isObject(input) || isSymbol(input)) return input;\n  var exoticToPrim = getMethod(input, TO_PRIMITIVE);\n  var result;\n  if (exoticToPrim) {\n    if (pref === undefined) pref = 'default';\n    result = call(exoticToPrim, input, pref);\n    if (!isObject(result) || isSymbol(result)) return result;\n    throw new $TypeError(\"Can't convert object to primitive value\");\n  }\n  if (pref === undefined) pref = 'number';\n  return ordinaryToPrimitive(input, pref);\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar isSymbol = require('../internals/is-symbol');\n\n// `ToPropertyKey` abstract operation\n// https://tc39.es/ecma262/#sec-topropertykey\nmodule.exports = function (argument) {\n  var key = toPrimitive(argument, 'string');\n  return isSymbol(key) ? key : key + '';\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar $String = String;\n\nmodule.exports = function (argument) {\n  try {\n    return $String(argument);\n  } catch (error) {\n    return 'Object';\n  }\n};\n","'use strict';\nvar uncurryThis = require('../internals/function-uncurry-this');\n\nvar id = 0;\nvar postfix = Math.random();\nvar toString = uncurryThis(1.0.toString);\n\nmodule.exports = function (key) {\n  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);\n};\n","'use strict';\n/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\n\nmodule.exports = NATIVE_SYMBOL &&\n  !Symbol.sham &&\n  typeof Symbol.iterator == 'symbol';\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\n\n// V8 ~ Chrome 36-\n// https://bugs.chromium.org/p/v8/issues/detail?id=3334\nmodule.exports = DESCRIPTORS && fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty(function () { /* empty */ }, 'prototype', {\n    value: 42,\n    writable: false\n  }).prototype !== 42;\n});\n","'use strict';\nvar $TypeError = TypeError;\n\nmodule.exports = function (passed, required) {\n  if (passed < required) throw new $TypeError('Not enough arguments');\n  return passed;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\n\nvar WeakMap = globalThis.WeakMap;\n\nmodule.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar shared = require('../internals/shared');\nvar hasOwn = require('../internals/has-own-property');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/symbol-constructor-detection');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar Symbol = globalThis.Symbol;\nvar WellKnownSymbolsStore = shared('wks');\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!hasOwn(WellKnownSymbolsStore, name)) {\n    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)\n      ? Symbol[name]\n      : createWellKnownSymbol('Symbol.' + name);\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\n// `ArrayBuffer.prototype.detached` getter\n// https://tc39.es/ecma262/#sec-get-arraybuffer.prototype.detached\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar setArrayLength = require('../internals/array-set-length');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar fails = require('../internals/fails');\n\nvar INCORRECT_TO_LENGTH = fails(function () {\n  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;\n});\n\n// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError\n// https://bugs.chromium.org/p/v8/issues/detail?id=12681\nvar properErrorOnNonWritableLength = function () {\n  try {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).push();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n};\n\nvar FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();\n\n// `Array.prototype.push` method\n// https://tc39.es/ecma262/#sec-array.prototype.push\n$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  push: function push(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    doesNotExceedSafeInteger(len + argCount);\n    for (var i = 0; i < argCount; i++) {\n      O[len] = arguments[i];\n      len++;\n    }\n    setArrayLength(O, len);\n    return len;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar arrayToReversed = require('../internals/array-to-reversed');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar $Array = Array;\n\n// `Array.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-array.prototype.toreversed\n$({ target: 'Array', proto: true }, {\n  toReversed: function toReversed() {\n    return arrayToReversed(toIndexedObject(this), $Array);\n  }\n});\n\naddToUnscopables('toReversed');\n","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\nvar getBuiltInPrototypeMethod = require('../internals/get-built-in-prototype-method');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar $Array = Array;\nvar sort = uncurryThis(getBuiltInPrototypeMethod('Array', 'sort'));\n\n// `Array.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-array.prototype.tosorted\n$({ target: 'Array', proto: true }, {\n  toSorted: function toSorted(compareFn) {\n    if (compareFn !== undefined) aCallable(compareFn);\n    var O = toIndexedObject(this);\n    var A = arrayFromConstructorAndList($Array, O);\n    return sort(A, compareFn);\n  }\n});\n\naddToUnscopables('toSorted');\n","'use strict';\nvar $ = require('../internals/export');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar doesNotExceedSafeInteger = require('../internals/does-not-exceed-safe-integer');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $Array = Array;\nvar max = Math.max;\nvar min = Math.min;\n\n// `Array.prototype.toSpliced` method\n// https://tc39.es/ecma262/#sec-array.prototype.tospliced\n$({ target: 'Array', proto: true }, {\n  toSpliced: function toSpliced(start, deleteCount /* , ...items */) {\n    var O = toIndexedObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var k = 0;\n    var insertCount, actualDeleteCount, newLen, A;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    newLen = doesNotExceedSafeInteger(len + insertCount - actualDeleteCount);\n    A = $Array(newLen);\n\n    for (; k < actualStart; k++) A[k] = O[k];\n    for (; k < actualStart + insertCount; k++) A[k] = arguments[k - actualStart + 2];\n    for (; k < newLen; k++) A[k] = O[k + actualDeleteCount - insertCount];\n\n    return A;\n  }\n});\n\naddToUnscopables('toSpliced');\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar anInstance = require('../internals/an-instance');\nvar anObject = require('../internals/an-object');\nvar isCallable = require('../internals/is-callable');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar createProperty = require('../internals/create-property');\nvar fails = require('../internals/fails');\nvar hasOwn = require('../internals/has-own-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar CONSTRUCTOR = 'constructor';\nvar ITERATOR = 'Iterator';\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nvar $TypeError = TypeError;\nvar NativeIterator = globalThis[ITERATOR];\n\n// FF56- have non-standard global helper `Iterator`\nvar FORCED = IS_PURE\n  || !isCallable(NativeIterator)\n  || NativeIterator.prototype !== IteratorPrototype\n  // FF44- non-standard `Iterator` passes previous tests\n  || !fails(function () { NativeIterator({}); });\n\nvar IteratorConstructor = function Iterator() {\n  anInstance(this, IteratorPrototype);\n  if (getPrototypeOf(this) === IteratorPrototype) throw new $TypeError('Abstract class Iterator not directly constructable');\n};\n\nvar defineIteratorPrototypeAccessor = function (key, value) {\n  if (DESCRIPTORS) {\n    defineBuiltInAccessor(IteratorPrototype, key, {\n      configurable: true,\n      get: function () {\n        return value;\n      },\n      set: function (replacement) {\n        anObject(this);\n        if (this === IteratorPrototype) throw new $TypeError(\"You can't redefine this property\");\n        if (hasOwn(this, key)) this[key] = replacement;\n        else createProperty(this, key, replacement);\n      }\n    });\n  } else IteratorPrototype[key] = value;\n};\n\nif (!hasOwn(IteratorPrototype, TO_STRING_TAG)) defineIteratorPrototypeAccessor(TO_STRING_TAG, ITERATOR);\n\nif (FORCED || !hasOwn(IteratorPrototype, CONSTRUCTOR) || IteratorPrototype[CONSTRUCTOR] === Object) {\n  defineIteratorPrototypeAccessor(CONSTRUCTOR, IteratorConstructor);\n}\n\nIteratorConstructor.prototype = IteratorPrototype;\n\n// `Iterator` constructor\n// https://tc39.es/ecma262/#sec-iterator\n$({ global: true, constructor: true, forced: FORCED }, {\n  Iterator: IteratorConstructor\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.every` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.every\n$({ target: 'Iterator', proto: true, real: true }, {\n  every: function every(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return !iterate(record, function (value, stop) {\n      if (!predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\nvar createIteratorProxy = require('../internals/iterator-create-proxy');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar IS_PURE = require('../internals/is-pure');\n\nvar IteratorProxy = createIteratorProxy(function () {\n  var iterator = this.iterator;\n  var predicate = this.predicate;\n  var next = this.next;\n  var result, done, value;\n  while (true) {\n    result = anObject(call(next, iterator));\n    done = this.done = !!result.done;\n    if (done) return;\n    value = result.value;\n    if (callWithSafeIterationClosing(iterator, predicate, [value, this.counter++], true)) return value;\n  }\n});\n\n// `Iterator.prototype.filter` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.filter\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  filter: function filter(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    return new IteratorProxy(getIteratorDirect(this), {\n      predicate: predicate\n    });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.find` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.find\n$({ target: 'Iterator', proto: true, real: true }, {\n  find: function find(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop(value);\n    }, { IS_RECORD: true, INTERRUPTED: true }).result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    aCallable(fn);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar map = require('../internals/iterator-map');\nvar IS_PURE = require('../internals/is-pure');\n\n// `Iterator.prototype.map` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.map\n$({ target: 'Iterator', proto: true, real: true, forced: IS_PURE }, {\n  map: map\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\nvar $TypeError = TypeError;\n\n// `Iterator.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.reduce\n$({ target: 'Iterator', proto: true, real: true }, {\n  reduce: function reduce(reducer /* , initialValue */) {\n    anObject(this);\n    aCallable(reducer);\n    var record = getIteratorDirect(this);\n    var noInitial = arguments.length < 2;\n    var accumulator = noInitial ? undefined : arguments[1];\n    var counter = 0;\n    iterate(record, function (value) {\n      if (noInitial) {\n        noInitial = false;\n        accumulator = value;\n      } else {\n        accumulator = reducer(accumulator, value, counter);\n      }\n      counter++;\n    }, { IS_RECORD: true });\n    if (noInitial) throw new $TypeError('Reduce of empty iterator with no initial value');\n    return accumulator;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.some` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.some\n$({ target: 'Iterator', proto: true, real: true }, {\n  some: function some(predicate) {\n    anObject(this);\n    aCallable(predicate);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    return iterate(record, function (value, stop) {\n      if (predicate(value, counter++)) return stop();\n    }, { IS_RECORD: true, INTERRUPTED: true }).stopped;\n  }\n});\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar regExpFlags = require('../internals/regexp-flags');\nvar fails = require('../internals/fails');\n\n// babel-minify and Closure Compiler transpiles RegExp('.', 'd') -> /./d and it causes SyntaxError\nvar RegExp = globalThis.RegExp;\nvar RegExpPrototype = RegExp.prototype;\n\nvar FORCED = DESCRIPTORS && fails(function () {\n  var INDICES_SUPPORT = true;\n  try {\n    RegExp('.', 'd');\n  } catch (error) {\n    INDICES_SUPPORT = false;\n  }\n\n  var O = {};\n  // modern V8 bug\n  var calls = '';\n  var expected = INDICES_SUPPORT ? 'dgimsy' : 'gimsy';\n\n  var addGetter = function (key, chr) {\n    // eslint-disable-next-line es/no-object-defineproperty -- safe\n    Object.defineProperty(O, key, { get: function () {\n      calls += chr;\n      return true;\n    } });\n  };\n\n  var pairs = {\n    dotAll: 's',\n    global: 'g',\n    ignoreCase: 'i',\n    multiline: 'm',\n    sticky: 'y'\n  };\n\n  if (INDICES_SUPPORT) pairs.hasIndices = 'd';\n\n  for (var key in pairs) addGetter(key, pairs[key]);\n\n  // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n  var result = Object.getOwnPropertyDescriptor(RegExpPrototype, 'flags').get.call(O);\n\n  return result !== expected || calls !== expected;\n});\n\n// `RegExp.prototype.flags` getter\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nif (FORCED) defineBuiltInAccessor(RegExpPrototype, 'flags', {\n  configurable: true,\n  get: regExpFlags\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar difference = require('../internals/set-difference');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('difference', function (result) {\n  return result.size === 0;\n});\n\n// `Set.prototype.difference` method\n// https://tc39.es/ecma262/#sec-set.prototype.difference\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  difference: difference\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar intersection = require('../internals/set-intersection');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('intersection', function (result) {\n  return result.size === 2 && result.has(1) && result.has(2);\n}) || fails(function () {\n  // eslint-disable-next-line es/no-array-from, es/no-set, es/no-set-prototype-intersection -- testing\n  return String(Array.from(new Set([1, 2, 3]).intersection(new Set([3, 2])))) !== '3,2';\n});\n\n// `Set.prototype.intersection` method\n// https://tc39.es/ecma262/#sec-set.prototype.intersection\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  intersection: intersection\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isDisjointFrom = require('../internals/set-is-disjoint-from');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isDisjointFrom', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isDisjointFrom` method\n// https://tc39.es/ecma262/#sec-set.prototype.isdisjointfrom\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isDisjointFrom: isDisjointFrom\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isSubsetOf = require('../internals/set-is-subset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSubsetOf', function (result) {\n  return result;\n});\n\n// `Set.prototype.isSubsetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issubsetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSubsetOf: isSubsetOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isSupersetOf = require('../internals/set-is-superset-of');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\nvar INCORRECT = !setMethodAcceptSetLike('isSupersetOf', function (result) {\n  return !result;\n});\n\n// `Set.prototype.isSupersetOf` method\n// https://tc39.es/ecma262/#sec-set.prototype.issupersetof\n$({ target: 'Set', proto: true, real: true, forced: INCORRECT }, {\n  isSupersetOf: isSupersetOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar symmetricDifference = require('../internals/set-symmetric-difference');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\n// `Set.prototype.symmetricDifference` method\n// https://tc39.es/ecma262/#sec-set.prototype.symmetricdifference\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('symmetricDifference') }, {\n  symmetricDifference: symmetricDifference\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar union = require('../internals/set-union');\nvar setMethodAcceptSetLike = require('../internals/set-method-accept-set-like');\n\n// `Set.prototype.union` method\n// https://tc39.es/ecma262/#sec-set.prototype.union\n$({ target: 'Set', proto: true, real: true, forced: !setMethodAcceptSetLike('union') }, {\n  union: union\n});\n","'use strict';\nvar arrayToReversed = require('../internals/array-to-reversed');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\n\n// `%TypedArray%.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.toreversed\nexportTypedArrayMethod('toReversed', function toReversed() {\n  return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);\n\n// `%TypedArray%.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tosorted\nexportTypedArrayMethod('toSorted', function toSorted(compareFn) {\n  if (compareFn !== undefined) aCallable(compareFn);\n  var O = aTypedArray(this);\n  var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);\n  return sort(A, compareFn);\n});\n","'use strict';\nvar arrayWith = require('../internals/array-with');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar isBigIntArray = require('../internals/is-big-int-array');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toBigInt = require('../internals/to-big-int');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = !!function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER);\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.constructor');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.every');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.filter');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.find');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.for-each');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.map');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.reduce');\n","'use strict';\n// TODO: Remove from `core-js@4`\nrequire('../modules/es.iterator.some');\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar clearImmediate = require('../internals/task').clear;\n\n// `clearImmediate` method\n// http://w3c.github.io/setImmediate/#si-clearImmediate\n$({ global: true, bind: true, enumerable: true, forced: globalThis.clearImmediate !== clearImmediate }, {\n  clearImmediate: clearImmediate\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar getBuiltIn = require('../internals/get-built-in');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar defineProperty = require('../internals/object-define-property').f;\nvar hasOwn = require('../internals/has-own-property');\nvar anInstance = require('../internals/an-instance');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar normalizeStringArgument = require('../internals/normalize-string-argument');\nvar DOMExceptionConstants = require('../internals/dom-exception-constants');\nvar clearErrorStack = require('../internals/error-stack-clear');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar IS_PURE = require('../internals/is-pure');\n\nvar DOM_EXCEPTION = 'DOMException';\nvar Error = getBuiltIn('Error');\nvar NativeDOMException = getBuiltIn(DOM_EXCEPTION);\n\nvar $DOMException = function DOMException() {\n  anInstance(this, DOMExceptionPrototype);\n  var argumentsLength = arguments.length;\n  var message = normalizeStringArgument(argumentsLength < 1 ? undefined : arguments[0]);\n  var name = normalizeStringArgument(argumentsLength < 2 ? undefined : arguments[1], 'Error');\n  var that = new NativeDOMException(message, name);\n  var error = new Error(message);\n  error.name = DOM_EXCEPTION;\n  defineProperty(that, 'stack', createPropertyDescriptor(1, clearErrorStack(error.stack, 1)));\n  inheritIfRequired(that, this, $DOMException);\n  return that;\n};\n\nvar DOMExceptionPrototype = $DOMException.prototype = NativeDOMException.prototype;\n\nvar ERROR_HAS_STACK = 'stack' in new Error(DOM_EXCEPTION);\nvar DOM_EXCEPTION_HAS_STACK = 'stack' in new NativeDOMException(1, 2);\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar descriptor = NativeDOMException && DESCRIPTORS && Object.getOwnPropertyDescriptor(globalThis, DOM_EXCEPTION);\n\n// Bun ~ 0.1.1 DOMException have incorrect descriptor and we can't redefine it\n// https://github.com/Jarred-Sumner/bun/issues/399\nvar BUGGY_DESCRIPTOR = !!descriptor && !(descriptor.writable && descriptor.configurable);\n\nvar FORCED_CONSTRUCTOR = ERROR_HAS_STACK && !BUGGY_DESCRIPTOR && !DOM_EXCEPTION_HAS_STACK;\n\n// `DOMException` constructor patch for `.stack` where it's required\n// https://webidl.spec.whatwg.org/#es-DOMException-specialness\n$({ global: true, constructor: true, forced: IS_PURE || FORCED_CONSTRUCTOR }, { // TODO: fix export logic\n  DOMException: FORCED_CONSTRUCTOR ? $DOMException : NativeDOMException\n});\n\nvar PolyfilledDOMException = getBuiltIn(DOM_EXCEPTION);\nvar PolyfilledDOMExceptionPrototype = PolyfilledDOMException.prototype;\n\nif (PolyfilledDOMExceptionPrototype.constructor !== PolyfilledDOMException) {\n  if (!IS_PURE) {\n    defineProperty(PolyfilledDOMExceptionPrototype, 'constructor', createPropertyDescriptor(1, PolyfilledDOMException));\n  }\n\n  for (var key in DOMExceptionConstants) if (hasOwn(DOMExceptionConstants, key)) {\n    var constant = DOMExceptionConstants[key];\n    var constantName = constant.s;\n    if (!hasOwn(PolyfilledDOMException, constantName)) {\n      defineProperty(PolyfilledDOMException, constantName, createPropertyDescriptor(6, constant.c));\n    }\n  }\n}\n","'use strict';\n// TODO: Remove this module from `core-js@4` since it's split to modules listed below\nrequire('../modules/web.clear-immediate');\nrequire('../modules/web.set-immediate');\n","'use strict';\nvar $ = require('../internals/export');\nvar globalThis = require('../internals/global-this');\nvar setTask = require('../internals/task').set;\nvar schedulersFix = require('../internals/schedulers-fix');\n\n// https://github.com/oven-sh/bun/issues/1633\nvar setImmediate = globalThis.setImmediate ? schedulersFix(setTask, false) : setTask;\n\n// `setImmediate` method\n// http://w3c.github.io/setImmediate/#si-setImmediate\n$({ global: true, bind: true, enumerable: true, forced: globalThis.setImmediate !== setImmediate }, {\n  setImmediate: setImmediate\n});\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","/*!\n  * vue-router v4.5.0\n  * (c) 2024 Eduardo San Martin Morote\n  * @license MIT\n  */\nimport { getCurrentInstance, inject, onUnmounted, onDeactivated, onActivated, computed, unref, watchEffect, defineComponent, reactive, h, provide, ref, watch, shallowRef, shallowReactive, nextTick } from 'vue';\nimport { setupDevtoolsPlugin } from '@vue/devtools-api';\n\nconst isBrowser = typeof document !== 'undefined';\n\n/**\n * Allows differentiating lazy components from functional components and vue-class-component\n * @internal\n *\n * @param component\n */\nfunction isRouteComponent(component) {\n    return (typeof component === 'object' ||\n        'displayName' in component ||\n        'props' in component ||\n        '__vccOpts' in component);\n}\nfunction isESModule(obj) {\n    return (obj.__esModule ||\n        obj[Symbol.toStringTag] === 'Module' ||\n        // support CF with dynamic imports that do not\n        // add the Module string tag\n        (obj.default && isRouteComponent(obj.default)));\n}\nconst assign = Object.assign;\nfunction applyToParams(fn, params) {\n    const newParams = {};\n    for (const key in params) {\n        const value = params[key];\n        newParams[key] = isArray(value)\n            ? value.map(fn)\n            : fn(value);\n    }\n    return newParams;\n}\nconst noop = () => { };\n/**\n * Typesafe alternative to Array.isArray\n * https://github.com/microsoft/TypeScript/pull/48228\n */\nconst isArray = Array.isArray;\n\nfunction warn(msg) {\n    // avoid using ...args as it breaks in older Edge builds\n    const args = Array.from(arguments).slice(1);\n    console.warn.apply(console, ['[Vue Router warn]: ' + msg].concat(args));\n}\n\n/**\n * Encoding Rules (␣ = Space)\n * - Path: ␣ \" < > # ? { }\n * - Query: ␣ \" < > # & =\n * - Hash: ␣ \" < > `\n *\n * On top of that, the RFC3986 (https://tools.ietf.org/html/rfc3986#section-2.2)\n * defines some extra characters to be encoded. Most browsers do not encode them\n * in encodeURI https://github.com/whatwg/url/issues/369, so it may be safer to\n * also encode `!'()*`. Leaving un-encoded only ASCII alphanumeric(`a-zA-Z0-9`)\n * plus `-._~`. This extra safety should be applied to query by patching the\n * string returned by encodeURIComponent encodeURI also encodes `[\\]^`. `\\`\n * should be encoded to avoid ambiguity. Browsers (IE, FF, C) transform a `\\`\n * into a `/` if directly typed in. The _backtick_ (`````) should also be\n * encoded everywhere because some browsers like FF encode it when directly\n * written while others don't. Safari and IE don't encode ``\"<>{}``` in hash.\n */\n// const EXTRA_RESERVED_RE = /[!'()*]/g\n// const encodeReservedReplacer = (c: string) => '%' + c.charCodeAt(0).toString(16)\nconst HASH_RE = /#/g; // %23\nconst AMPERSAND_RE = /&/g; // %26\nconst SLASH_RE = /\\//g; // %2F\nconst EQUAL_RE = /=/g; // %3D\nconst IM_RE = /\\?/g; // %3F\nconst PLUS_RE = /\\+/g; // %2B\n/**\n * NOTE: It's not clear to me if we should encode the + symbol in queries, it\n * seems to be less flexible than not doing so and I can't find out the legacy\n * systems requiring this for regular requests like text/html. In the standard,\n * the encoding of the plus character is only mentioned for\n * application/x-www-form-urlencoded\n * (https://url.spec.whatwg.org/#urlencoded-parsing) and most browsers seems lo\n * leave the plus character as is in queries. To be more flexible, we allow the\n * plus character on the query, but it can also be manually encoded by the user.\n *\n * Resources:\n * - https://url.spec.whatwg.org/#urlencoded-parsing\n * - https://stackoverflow.com/questions/1634271/url-encoding-the-space-character-or-20\n */\nconst ENC_BRACKET_OPEN_RE = /%5B/g; // [\nconst ENC_BRACKET_CLOSE_RE = /%5D/g; // ]\nconst ENC_CARET_RE = /%5E/g; // ^\nconst ENC_BACKTICK_RE = /%60/g; // `\nconst ENC_CURLY_OPEN_RE = /%7B/g; // {\nconst ENC_PIPE_RE = /%7C/g; // |\nconst ENC_CURLY_CLOSE_RE = /%7D/g; // }\nconst ENC_SPACE_RE = /%20/g; // }\n/**\n * Encode characters that need to be encoded on the path, search and hash\n * sections of the URL.\n *\n * @internal\n * @param text - string to encode\n * @returns encoded string\n */\nfunction commonEncode(text) {\n    return encodeURI('' + text)\n        .replace(ENC_PIPE_RE, '|')\n        .replace(ENC_BRACKET_OPEN_RE, '[')\n        .replace(ENC_BRACKET_CLOSE_RE, ']');\n}\n/**\n * Encode characters that need to be encoded on the hash section of the URL.\n *\n * @param text - string to encode\n * @returns encoded string\n */\nfunction encodeHash(text) {\n    return commonEncode(text)\n        .replace(ENC_CURLY_OPEN_RE, '{')\n        .replace(ENC_CURLY_CLOSE_RE, '}')\n        .replace(ENC_CARET_RE, '^');\n}\n/**\n * Encode characters that need to be encoded query values on the query\n * section of the URL.\n *\n * @param text - string to encode\n * @returns encoded string\n */\nfunction encodeQueryValue(text) {\n    return (commonEncode(text)\n        // Encode the space as +, encode the + to differentiate it from the space\n        .replace(PLUS_RE, '%2B')\n        .replace(ENC_SPACE_RE, '+')\n        .replace(HASH_RE, '%23')\n        .replace(AMPERSAND_RE, '%26')\n        .replace(ENC_BACKTICK_RE, '`')\n        .replace(ENC_CURLY_OPEN_RE, '{')\n        .replace(ENC_CURLY_CLOSE_RE, '}')\n        .replace(ENC_CARET_RE, '^'));\n}\n/**\n * Like `encodeQueryValue` but also encodes the `=` character.\n *\n * @param text - string to encode\n */\nfunction encodeQueryKey(text) {\n    return encodeQueryValue(text).replace(EQUAL_RE, '%3D');\n}\n/**\n * Encode characters that need to be encoded on the path section of the URL.\n *\n * @param text - string to encode\n * @returns encoded string\n */\nfunction encodePath(text) {\n    return commonEncode(text).replace(HASH_RE, '%23').replace(IM_RE, '%3F');\n}\n/**\n * Encode characters that need to be encoded on the path section of the URL as a\n * param. This function encodes everything {@link encodePath} does plus the\n * slash (`/`) character. If `text` is `null` or `undefined`, returns an empty\n * string instead.\n *\n * @param text - string to encode\n * @returns encoded string\n */\nfunction encodeParam(text) {\n    return text == null ? '' : encodePath(text).replace(SLASH_RE, '%2F');\n}\n/**\n * Decode text using `decodeURIComponent`. Returns the original text if it\n * fails.\n *\n * @param text - string to decode\n * @returns decoded string\n */\nfunction decode(text) {\n    try {\n        return decodeURIComponent('' + text);\n    }\n    catch (err) {\n        (process.env.NODE_ENV !== 'production') && warn(`Error decoding \"${text}\". Using original value`);\n    }\n    return '' + text;\n}\n\nconst TRAILING_SLASH_RE = /\\/$/;\nconst removeTrailingSlash = (path) => path.replace(TRAILING_SLASH_RE, '');\n/**\n * Transforms a URI into a normalized history location\n *\n * @param parseQuery\n * @param location - URI to normalize\n * @param currentLocation - current absolute location. Allows resolving relative\n * paths. Must start with `/`. Defaults to `/`\n * @returns a normalized history location\n */\nfunction parseURL(parseQuery, location, currentLocation = '/') {\n    let path, query = {}, searchString = '', hash = '';\n    // Could use URL and URLSearchParams but IE 11 doesn't support it\n    // TODO: move to new URL()\n    const hashPos = location.indexOf('#');\n    let searchPos = location.indexOf('?');\n    // the hash appears before the search, so it's not part of the search string\n    if (hashPos < searchPos && hashPos >= 0) {\n        searchPos = -1;\n    }\n    if (searchPos > -1) {\n        path = location.slice(0, searchPos);\n        searchString = location.slice(searchPos + 1, hashPos > -1 ? hashPos : location.length);\n        query = parseQuery(searchString);\n    }\n    if (hashPos > -1) {\n        path = path || location.slice(0, hashPos);\n        // keep the # character\n        hash = location.slice(hashPos, location.length);\n    }\n    // no search and no query\n    path = resolveRelativePath(path != null ? path : location, currentLocation);\n    // empty path means a relative query or hash `?foo=f`, `#thing`\n    return {\n        fullPath: path + (searchString && '?') + searchString + hash,\n        path,\n        query,\n        hash: decode(hash),\n    };\n}\n/**\n * Stringifies a URL object\n *\n * @param stringifyQuery\n * @param location\n */\nfunction stringifyURL(stringifyQuery, location) {\n    const query = location.query ? stringifyQuery(location.query) : '';\n    return location.path + (query && '?') + query + (location.hash || '');\n}\n/**\n * Strips off the base from the beginning of a location.pathname in a non-case-sensitive way.\n *\n * @param pathname - location.pathname\n * @param base - base to strip off\n */\nfunction stripBase(pathname, base) {\n    // no base or base is not found at the beginning\n    if (!base || !pathname.toLowerCase().startsWith(base.toLowerCase()))\n        return pathname;\n    return pathname.slice(base.length) || '/';\n}\n/**\n * Checks if two RouteLocation are equal. This means that both locations are\n * pointing towards the same {@link RouteRecord} and that all `params`, `query`\n * parameters and `hash` are the same\n *\n * @param stringifyQuery - A function that takes a query object of type LocationQueryRaw and returns a string representation of it.\n * @param a - first {@link RouteLocation}\n * @param b - second {@link RouteLocation}\n */\nfunction isSameRouteLocation(stringifyQuery, a, b) {\n    const aLastIndex = a.matched.length - 1;\n    const bLastIndex = b.matched.length - 1;\n    return (aLastIndex > -1 &&\n        aLastIndex === bLastIndex &&\n        isSameRouteRecord(a.matched[aLastIndex], b.matched[bLastIndex]) &&\n        isSameRouteLocationParams(a.params, b.params) &&\n        stringifyQuery(a.query) === stringifyQuery(b.query) &&\n        a.hash === b.hash);\n}\n/**\n * Check if two `RouteRecords` are equal. Takes into account aliases: they are\n * considered equal to the `RouteRecord` they are aliasing.\n *\n * @param a - first {@link RouteRecord}\n * @param b - second {@link RouteRecord}\n */\nfunction isSameRouteRecord(a, b) {\n    // since the original record has an undefined value for aliasOf\n    // but all aliases point to the original record, this will always compare\n    // the original record\n    return (a.aliasOf || a) === (b.aliasOf || b);\n}\nfunction isSameRouteLocationParams(a, b) {\n    if (Object.keys(a).length !== Object.keys(b).length)\n        return false;\n    for (const key in a) {\n        if (!isSameRouteLocationParamsValue(a[key], b[key]))\n            return false;\n    }\n    return true;\n}\nfunction isSameRouteLocationParamsValue(a, b) {\n    return isArray(a)\n        ? isEquivalentArray(a, b)\n        : isArray(b)\n            ? isEquivalentArray(b, a)\n            : a === b;\n}\n/**\n * Check if two arrays are the same or if an array with one single entry is the\n * same as another primitive value. Used to check query and parameters\n *\n * @param a - array of values\n * @param b - array of values or a single value\n */\nfunction isEquivalentArray(a, b) {\n    return isArray(b)\n        ? a.length === b.length && a.every((value, i) => value === b[i])\n        : a.length === 1 && a[0] === b;\n}\n/**\n * Resolves a relative path that starts with `.`.\n *\n * @param to - path location we are resolving\n * @param from - currentLocation.path, should start with `/`\n */\nfunction resolveRelativePath(to, from) {\n    if (to.startsWith('/'))\n        return to;\n    if ((process.env.NODE_ENV !== 'production') && !from.startsWith('/')) {\n        warn(`Cannot resolve a relative location without an absolute path. Trying to resolve \"${to}\" from \"${from}\". It should look like \"/${from}\".`);\n        return to;\n    }\n    if (!to)\n        return from;\n    const fromSegments = from.split('/');\n    const toSegments = to.split('/');\n    const lastToSegment = toSegments[toSegments.length - 1];\n    // make . and ./ the same (../ === .., ../../ === ../..)\n    // this is the same behavior as new URL()\n    if (lastToSegment === '..' || lastToSegment === '.') {\n        toSegments.push('');\n    }\n    let position = fromSegments.length - 1;\n    let toPosition;\n    let segment;\n    for (toPosition = 0; toPosition < toSegments.length; toPosition++) {\n        segment = toSegments[toPosition];\n        // we stay on the same position\n        if (segment === '.')\n            continue;\n        // go up in the from array\n        if (segment === '..') {\n            // we can't go below zero, but we still need to increment toPosition\n            if (position > 1)\n                position--;\n            // continue\n        }\n        // we reached a non-relative path, we stop here\n        else\n            break;\n    }\n    return (fromSegments.slice(0, position).join('/') +\n        '/' +\n        toSegments.slice(toPosition).join('/'));\n}\n/**\n * Initial route location where the router is. Can be used in navigation guards\n * to differentiate the initial navigation.\n *\n * @example\n * ```js\n * import { START_LOCATION } from 'vue-router'\n *\n * router.beforeEach((to, from) => {\n *   if (from === START_LOCATION) {\n *     // initial navigation\n *   }\n * })\n * ```\n */\nconst START_LOCATION_NORMALIZED = {\n    path: '/',\n    // TODO: could we use a symbol in the future?\n    name: undefined,\n    params: {},\n    query: {},\n    hash: '',\n    fullPath: '/',\n    matched: [],\n    meta: {},\n    redirectedFrom: undefined,\n};\n\nvar NavigationType;\n(function (NavigationType) {\n    NavigationType[\"pop\"] = \"pop\";\n    NavigationType[\"push\"] = \"push\";\n})(NavigationType || (NavigationType = {}));\nvar NavigationDirection;\n(function (NavigationDirection) {\n    NavigationDirection[\"back\"] = \"back\";\n    NavigationDirection[\"forward\"] = \"forward\";\n    NavigationDirection[\"unknown\"] = \"\";\n})(NavigationDirection || (NavigationDirection = {}));\n/**\n * Starting location for Histories\n */\nconst START = '';\n// Generic utils\n/**\n * Normalizes a base by removing any trailing slash and reading the base tag if\n * present.\n *\n * @param base - base to normalize\n */\nfunction normalizeBase(base) {\n    if (!base) {\n        if (isBrowser) {\n            // respect <base> tag\n            const baseEl = document.querySelector('base');\n            base = (baseEl && baseEl.getAttribute('href')) || '/';\n            // strip full URL origin\n            base = base.replace(/^\\w+:\\/\\/[^\\/]+/, '');\n        }\n        else {\n            base = '/';\n        }\n    }\n    // ensure leading slash when it was removed by the regex above avoid leading\n    // slash with hash because the file could be read from the disk like file://\n    // and the leading slash would cause problems\n    if (base[0] !== '/' && base[0] !== '#')\n        base = '/' + base;\n    // remove the trailing slash so all other method can just do `base + fullPath`\n    // to build an href\n    return removeTrailingSlash(base);\n}\n// remove any character before the hash\nconst BEFORE_HASH_RE = /^[^#]+#/;\nfunction createHref(base, location) {\n    return base.replace(BEFORE_HASH_RE, '#') + location;\n}\n\nfunction getElementPosition(el, offset) {\n    const docRect = document.documentElement.getBoundingClientRect();\n    const elRect = el.getBoundingClientRect();\n    return {\n        behavior: offset.behavior,\n        left: elRect.left - docRect.left - (offset.left || 0),\n        top: elRect.top - docRect.top - (offset.top || 0),\n    };\n}\nconst computeScrollPosition = () => ({\n    left: window.scrollX,\n    top: window.scrollY,\n});\nfunction scrollToPosition(position) {\n    let scrollToOptions;\n    if ('el' in position) {\n        const positionEl = position.el;\n        const isIdSelector = typeof positionEl === 'string' && positionEl.startsWith('#');\n        /**\n         * `id`s can accept pretty much any characters, including CSS combinators\n         * like `>` or `~`. It's still possible to retrieve elements using\n         * `document.getElementById('~')` but it needs to be escaped when using\n         * `document.querySelector('#\\\\~')` for it to be valid. The only\n         * requirements for `id`s are them to be unique on the page and to not be\n         * empty (`id=\"\"`). Because of that, when passing an id selector, it should\n         * be properly escaped for it to work with `querySelector`. We could check\n         * for the id selector to be simple (no CSS combinators `+ >~`) but that\n         * would make things inconsistent since they are valid characters for an\n         * `id` but would need to be escaped when using `querySelector`, breaking\n         * their usage and ending up in no selector returned. Selectors need to be\n         * escaped:\n         *\n         * - `#1-thing` becomes `#\\31 -thing`\n         * - `#with~symbols` becomes `#with\\\\~symbols`\n         *\n         * - More information about  the topic can be found at\n         *   https://mathiasbynens.be/notes/html5-id-class.\n         * - Practical example: https://mathiasbynens.be/demo/html5-id\n         */\n        if ((process.env.NODE_ENV !== 'production') && typeof position.el === 'string') {\n            if (!isIdSelector || !document.getElementById(position.el.slice(1))) {\n                try {\n                    const foundEl = document.querySelector(position.el);\n                    if (isIdSelector && foundEl) {\n                        warn(`The selector \"${position.el}\" should be passed as \"el: document.querySelector('${position.el}')\" because it starts with \"#\".`);\n                        // return to avoid other warnings\n                        return;\n                    }\n                }\n                catch (err) {\n                    warn(`The selector \"${position.el}\" is invalid. If you are using an id selector, make sure to escape it. You can find more information about escaping characters in selectors at https://mathiasbynens.be/notes/css-escapes or use CSS.escape (https://developer.mozilla.org/en-US/docs/Web/API/CSS/escape).`);\n                    // return to avoid other warnings\n                    return;\n                }\n            }\n        }\n        const el = typeof positionEl === 'string'\n            ? isIdSelector\n                ? document.getElementById(positionEl.slice(1))\n                : document.querySelector(positionEl)\n            : positionEl;\n        if (!el) {\n            (process.env.NODE_ENV !== 'production') &&\n                warn(`Couldn't find element using selector \"${position.el}\" returned by scrollBehavior.`);\n            return;\n        }\n        scrollToOptions = getElementPosition(el, position);\n    }\n    else {\n        scrollToOptions = position;\n    }\n    if ('scrollBehavior' in document.documentElement.style)\n        window.scrollTo(scrollToOptions);\n    else {\n        window.scrollTo(scrollToOptions.left != null ? scrollToOptions.left : window.scrollX, scrollToOptions.top != null ? scrollToOptions.top : window.scrollY);\n    }\n}\nfunction getScrollKey(path, delta) {\n    const position = history.state ? history.state.position - delta : -1;\n    return position + path;\n}\nconst scrollPositions = new Map();\nfunction saveScrollPosition(key, scrollPosition) {\n    scrollPositions.set(key, scrollPosition);\n}\nfunction getSavedScrollPosition(key) {\n    const scroll = scrollPositions.get(key);\n    // consume it so it's not used again\n    scrollPositions.delete(key);\n    return scroll;\n}\n// TODO: RFC about how to save scroll position\n/**\n * ScrollBehavior instance used by the router to compute and restore the scroll\n * position when navigating.\n */\n// export interface ScrollHandler<ScrollPositionEntry extends HistoryStateValue, ScrollPosition extends ScrollPositionEntry> {\n//   // returns a scroll position that can be saved in history\n//   compute(): ScrollPositionEntry\n//   // can take an extended ScrollPositionEntry\n//   scroll(position: ScrollPosition): void\n// }\n// export const scrollHandler: ScrollHandler<ScrollPosition> = {\n//   compute: computeScroll,\n//   scroll: scrollToPosition,\n// }\n\nlet createBaseLocation = () => location.protocol + '//' + location.host;\n/**\n * Creates a normalized history location from a window.location object\n * @param base - The base path\n * @param location - The window.location object\n */\nfunction createCurrentLocation(base, location) {\n    const { pathname, search, hash } = location;\n    // allows hash bases like #, /#, #/, #!, #!/, /#!/, or even /folder#end\n    const hashPos = base.indexOf('#');\n    if (hashPos > -1) {\n        let slicePos = hash.includes(base.slice(hashPos))\n            ? base.slice(hashPos).length\n            : 1;\n        let pathFromHash = hash.slice(slicePos);\n        // prepend the starting slash to hash so the url starts with /#\n        if (pathFromHash[0] !== '/')\n            pathFromHash = '/' + pathFromHash;\n        return stripBase(pathFromHash, '');\n    }\n    const path = stripBase(pathname, base);\n    return path + search + hash;\n}\nfunction useHistoryListeners(base, historyState, currentLocation, replace) {\n    let listeners = [];\n    let teardowns = [];\n    // TODO: should it be a stack? a Dict. Check if the popstate listener\n    // can trigger twice\n    let pauseState = null;\n    const popStateHandler = ({ state, }) => {\n        const to = createCurrentLocation(base, location);\n        const from = currentLocation.value;\n        const fromState = historyState.value;\n        let delta = 0;\n        if (state) {\n            currentLocation.value = to;\n            historyState.value = state;\n            // ignore the popstate and reset the pauseState\n            if (pauseState && pauseState === from) {\n                pauseState = null;\n                return;\n            }\n            delta = fromState ? state.position - fromState.position : 0;\n        }\n        else {\n            replace(to);\n        }\n        // Here we could also revert the navigation by calling history.go(-delta)\n        // this listener will have to be adapted to not trigger again and to wait for the url\n        // to be updated before triggering the listeners. Some kind of validation function would also\n        // need to be passed to the listeners so the navigation can be accepted\n        // call all listeners\n        listeners.forEach(listener => {\n            listener(currentLocation.value, from, {\n                delta,\n                type: NavigationType.pop,\n                direction: delta\n                    ? delta > 0\n                        ? NavigationDirection.forward\n                        : NavigationDirection.back\n                    : NavigationDirection.unknown,\n            });\n        });\n    };\n    function pauseListeners() {\n        pauseState = currentLocation.value;\n    }\n    function listen(callback) {\n        // set up the listener and prepare teardown callbacks\n        listeners.push(callback);\n        const teardown = () => {\n            const index = listeners.indexOf(callback);\n            if (index > -1)\n                listeners.splice(index, 1);\n        };\n        teardowns.push(teardown);\n        return teardown;\n    }\n    function beforeUnloadListener() {\n        const { history } = window;\n        if (!history.state)\n            return;\n        history.replaceState(assign({}, history.state, { scroll: computeScrollPosition() }), '');\n    }\n    function destroy() {\n        for (const teardown of teardowns)\n            teardown();\n        teardowns = [];\n        window.removeEventListener('popstate', popStateHandler);\n        window.removeEventListener('beforeunload', beforeUnloadListener);\n    }\n    // set up the listeners and prepare teardown callbacks\n    window.addEventListener('popstate', popStateHandler);\n    // TODO: could we use 'pagehide' or 'visibilitychange' instead?\n    // https://developer.chrome.com/blog/page-lifecycle-api/\n    window.addEventListener('beforeunload', beforeUnloadListener, {\n        passive: true,\n    });\n    return {\n        pauseListeners,\n        listen,\n        destroy,\n    };\n}\n/**\n * Creates a state object\n */\nfunction buildState(back, current, forward, replaced = false, computeScroll = false) {\n    return {\n        back,\n        current,\n        forward,\n        replaced,\n        position: window.history.length,\n        scroll: computeScroll ? computeScrollPosition() : null,\n    };\n}\nfunction useHistoryStateNavigation(base) {\n    const { history, location } = window;\n    // private variables\n    const currentLocation = {\n        value: createCurrentLocation(base, location),\n    };\n    const historyState = { value: history.state };\n    // build current history entry as this is a fresh navigation\n    if (!historyState.value) {\n        changeLocation(currentLocation.value, {\n            back: null,\n            current: currentLocation.value,\n            forward: null,\n            // the length is off by one, we need to decrease it\n            position: history.length - 1,\n            replaced: true,\n            // don't add a scroll as the user may have an anchor, and we want\n            // scrollBehavior to be triggered without a saved position\n            scroll: null,\n        }, true);\n    }\n    function changeLocation(to, state, replace) {\n        /**\n         * if a base tag is provided, and we are on a normal domain, we have to\n         * respect the provided `base` attribute because pushState() will use it and\n         * potentially erase anything before the `#` like at\n         * https://github.com/vuejs/router/issues/685 where a base of\n         * `/folder/#` but a base of `/` would erase the `/folder/` section. If\n         * there is no host, the `<base>` tag makes no sense and if there isn't a\n         * base tag we can just use everything after the `#`.\n         */\n        const hashIndex = base.indexOf('#');\n        const url = hashIndex > -1\n            ? (location.host && document.querySelector('base')\n                ? base\n                : base.slice(hashIndex)) + to\n            : createBaseLocation() + base + to;\n        try {\n            // BROWSER QUIRK\n            // NOTE: Safari throws a SecurityError when calling this function 100 times in 30 seconds\n            history[replace ? 'replaceState' : 'pushState'](state, '', url);\n            historyState.value = state;\n        }\n        catch (err) {\n            if ((process.env.NODE_ENV !== 'production')) {\n                warn('Error with push/replace State', err);\n            }\n            else {\n                console.error(err);\n            }\n            // Force the navigation, this also resets the call count\n            location[replace ? 'replace' : 'assign'](url);\n        }\n    }\n    function replace(to, data) {\n        const state = assign({}, history.state, buildState(historyState.value.back, \n        // keep back and forward entries but override current position\n        to, historyState.value.forward, true), data, { position: historyState.value.position });\n        changeLocation(to, state, true);\n        currentLocation.value = to;\n    }\n    function push(to, data) {\n        // Add to current entry the information of where we are going\n        // as well as saving the current position\n        const currentState = assign({}, \n        // use current history state to gracefully handle a wrong call to\n        // history.replaceState\n        // https://github.com/vuejs/router/issues/366\n        historyState.value, history.state, {\n            forward: to,\n            scroll: computeScrollPosition(),\n        });\n        if ((process.env.NODE_ENV !== 'production') && !history.state) {\n            warn(`history.state seems to have been manually replaced without preserving the necessary values. Make sure to preserve existing history state if you are manually calling history.replaceState:\\n\\n` +\n                `history.replaceState(history.state, '', url)\\n\\n` +\n                `You can find more information at https://router.vuejs.org/guide/migration/#Usage-of-history-state`);\n        }\n        changeLocation(currentState.current, currentState, true);\n        const state = assign({}, buildState(currentLocation.value, to, null), { position: currentState.position + 1 }, data);\n        changeLocation(to, state, false);\n        currentLocation.value = to;\n    }\n    return {\n        location: currentLocation,\n        state: historyState,\n        push,\n        replace,\n    };\n}\n/**\n * Creates an HTML5 history. Most common history for single page applications.\n *\n * @param base -\n */\nfunction createWebHistory(base) {\n    base = normalizeBase(base);\n    const historyNavigation = useHistoryStateNavigation(base);\n    const historyListeners = useHistoryListeners(base, historyNavigation.state, historyNavigation.location, historyNavigation.replace);\n    function go(delta, triggerListeners = true) {\n        if (!triggerListeners)\n            historyListeners.pauseListeners();\n        history.go(delta);\n    }\n    const routerHistory = assign({\n        // it's overridden right after\n        location: '',\n        base,\n        go,\n        createHref: createHref.bind(null, base),\n    }, historyNavigation, historyListeners);\n    Object.defineProperty(routerHistory, 'location', {\n        enumerable: true,\n        get: () => historyNavigation.location.value,\n    });\n    Object.defineProperty(routerHistory, 'state', {\n        enumerable: true,\n        get: () => historyNavigation.state.value,\n    });\n    return routerHistory;\n}\n\n/**\n * Creates an in-memory based history. The main purpose of this history is to handle SSR. It starts in a special location that is nowhere.\n * It's up to the user to replace that location with the starter location by either calling `router.push` or `router.replace`.\n *\n * @param base - Base applied to all urls, defaults to '/'\n * @returns a history object that can be passed to the router constructor\n */\nfunction createMemoryHistory(base = '') {\n    let listeners = [];\n    let queue = [START];\n    let position = 0;\n    base = normalizeBase(base);\n    function setLocation(location) {\n        position++;\n        if (position !== queue.length) {\n            // we are in the middle, we remove everything from here in the queue\n            queue.splice(position);\n        }\n        queue.push(location);\n    }\n    function triggerListeners(to, from, { direction, delta }) {\n        const info = {\n            direction,\n            delta,\n            type: NavigationType.pop,\n        };\n        for (const callback of listeners) {\n            callback(to, from, info);\n        }\n    }\n    const routerHistory = {\n        // rewritten by Object.defineProperty\n        location: START,\n        // TODO: should be kept in queue\n        state: {},\n        base,\n        createHref: createHref.bind(null, base),\n        replace(to) {\n            // remove current entry and decrement position\n            queue.splice(position--, 1);\n            setLocation(to);\n        },\n        push(to, data) {\n            setLocation(to);\n        },\n        listen(callback) {\n            listeners.push(callback);\n            return () => {\n                const index = listeners.indexOf(callback);\n                if (index > -1)\n                    listeners.splice(index, 1);\n            };\n        },\n        destroy() {\n            listeners = [];\n            queue = [START];\n            position = 0;\n        },\n        go(delta, shouldTrigger = true) {\n            const from = this.location;\n            const direction = \n            // we are considering delta === 0 going forward, but in abstract mode\n            // using 0 for the delta doesn't make sense like it does in html5 where\n            // it reloads the page\n            delta < 0 ? NavigationDirection.back : NavigationDirection.forward;\n            position = Math.max(0, Math.min(position + delta, queue.length - 1));\n            if (shouldTrigger) {\n                triggerListeners(this.location, from, {\n                    direction,\n                    delta,\n                });\n            }\n        },\n    };\n    Object.defineProperty(routerHistory, 'location', {\n        enumerable: true,\n        get: () => queue[position],\n    });\n    return routerHistory;\n}\n\n/**\n * Creates a hash history. Useful for web applications with no host (e.g. `file://`) or when configuring a server to\n * handle any URL is not possible.\n *\n * @param base - optional base to provide. Defaults to `location.pathname + location.search` If there is a `<base>` tag\n * in the `head`, its value will be ignored in favor of this parameter **but note it affects all the history.pushState()\n * calls**, meaning that if you use a `<base>` tag, it's `href` value **has to match this parameter** (ignoring anything\n * after the `#`).\n *\n * @example\n * ```js\n * // at https://example.com/folder\n * createWebHashHistory() // gives a url of `https://example.com/folder#`\n * createWebHashHistory('/folder/') // gives a url of `https://example.com/folder/#`\n * // if the `#` is provided in the base, it won't be added by `createWebHashHistory`\n * createWebHashHistory('/folder/#/app/') // gives a url of `https://example.com/folder/#/app/`\n * // you should avoid doing this because it changes the original url and breaks copying urls\n * createWebHashHistory('/other-folder/') // gives a url of `https://example.com/other-folder/#`\n *\n * // at file:///usr/etc/folder/index.html\n * // for locations with no `host`, the base is ignored\n * createWebHashHistory('/iAmIgnored') // gives a url of `file:///usr/etc/folder/index.html#`\n * ```\n */\nfunction createWebHashHistory(base) {\n    // Make sure this implementation is fine in terms of encoding, specially for IE11\n    // for `file://`, directly use the pathname and ignore the base\n    // location.pathname contains an initial `/` even at the root: `https://example.com`\n    base = location.host ? base || location.pathname + location.search : '';\n    // allow the user to provide a `#` in the middle: `/base/#/app`\n    if (!base.includes('#'))\n        base += '#';\n    if ((process.env.NODE_ENV !== 'production') && !base.endsWith('#/') && !base.endsWith('#')) {\n        warn(`A hash base must end with a \"#\":\\n\"${base}\" should be \"${base.replace(/#.*$/, '#')}\".`);\n    }\n    return createWebHistory(base);\n}\n\nfunction isRouteLocation(route) {\n    return typeof route === 'string' || (route && typeof route === 'object');\n}\nfunction isRouteName(name) {\n    return typeof name === 'string' || typeof name === 'symbol';\n}\n\nconst NavigationFailureSymbol = Symbol((process.env.NODE_ENV !== 'production') ? 'navigation failure' : '');\n/**\n * Enumeration with all possible types for navigation failures. Can be passed to\n * {@link isNavigationFailure} to check for specific failures.\n */\nvar NavigationFailureType;\n(function (NavigationFailureType) {\n    /**\n     * An aborted navigation is a navigation that failed because a navigation\n     * guard returned `false` or called `next(false)`\n     */\n    NavigationFailureType[NavigationFailureType[\"aborted\"] = 4] = \"aborted\";\n    /**\n     * A cancelled navigation is a navigation that failed because a more recent\n     * navigation finished started (not necessarily finished).\n     */\n    NavigationFailureType[NavigationFailureType[\"cancelled\"] = 8] = \"cancelled\";\n    /**\n     * A duplicated navigation is a navigation that failed because it was\n     * initiated while already being at the exact same location.\n     */\n    NavigationFailureType[NavigationFailureType[\"duplicated\"] = 16] = \"duplicated\";\n})(NavigationFailureType || (NavigationFailureType = {}));\n// DEV only debug messages\nconst ErrorTypeMessages = {\n    [1 /* ErrorTypes.MATCHER_NOT_FOUND */]({ location, currentLocation }) {\n        return `No match for\\n ${JSON.stringify(location)}${currentLocation\n            ? '\\nwhile being at\\n' + JSON.stringify(currentLocation)\n            : ''}`;\n    },\n    [2 /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */]({ from, to, }) {\n        return `Redirected from \"${from.fullPath}\" to \"${stringifyRoute(to)}\" via a navigation guard.`;\n    },\n    [4 /* ErrorTypes.NAVIGATION_ABORTED */]({ from, to }) {\n        return `Navigation aborted from \"${from.fullPath}\" to \"${to.fullPath}\" via a navigation guard.`;\n    },\n    [8 /* ErrorTypes.NAVIGATION_CANCELLED */]({ from, to }) {\n        return `Navigation cancelled from \"${from.fullPath}\" to \"${to.fullPath}\" with a new navigation.`;\n    },\n    [16 /* ErrorTypes.NAVIGATION_DUPLICATED */]({ from, to }) {\n        return `Avoided redundant navigation to current location: \"${from.fullPath}\".`;\n    },\n};\n/**\n * Creates a typed NavigationFailure object.\n * @internal\n * @param type - NavigationFailureType\n * @param params - { from, to }\n */\nfunction createRouterError(type, params) {\n    // keep full error messages in cjs versions\n    if ((process.env.NODE_ENV !== 'production') || !true) {\n        return assign(new Error(ErrorTypeMessages[type](params)), {\n            type,\n            [NavigationFailureSymbol]: true,\n        }, params);\n    }\n    else {\n        return assign(new Error(), {\n            type,\n            [NavigationFailureSymbol]: true,\n        }, params);\n    }\n}\nfunction isNavigationFailure(error, type) {\n    return (error instanceof Error &&\n        NavigationFailureSymbol in error &&\n        (type == null || !!(error.type & type)));\n}\nconst propertiesToLog = ['params', 'query', 'hash'];\nfunction stringifyRoute(to) {\n    if (typeof to === 'string')\n        return to;\n    if (to.path != null)\n        return to.path;\n    const location = {};\n    for (const key of propertiesToLog) {\n        if (key in to)\n            location[key] = to[key];\n    }\n    return JSON.stringify(location, null, 2);\n}\n\n// default pattern for a param: non-greedy everything but /\nconst BASE_PARAM_PATTERN = '[^/]+?';\nconst BASE_PATH_PARSER_OPTIONS = {\n    sensitive: false,\n    strict: false,\n    start: true,\n    end: true,\n};\n// Special Regex characters that must be escaped in static tokens\nconst REGEX_CHARS_RE = /[.+*?^${}()[\\]/\\\\]/g;\n/**\n * Creates a path parser from an array of Segments (a segment is an array of Tokens)\n *\n * @param segments - array of segments returned by tokenizePath\n * @param extraOptions - optional options for the regexp\n * @returns a PathParser\n */\nfunction tokensToParser(segments, extraOptions) {\n    const options = assign({}, BASE_PATH_PARSER_OPTIONS, extraOptions);\n    // the amount of scores is the same as the length of segments except for the root segment \"/\"\n    const score = [];\n    // the regexp as a string\n    let pattern = options.start ? '^' : '';\n    // extracted keys\n    const keys = [];\n    for (const segment of segments) {\n        // the root segment needs special treatment\n        const segmentScores = segment.length ? [] : [90 /* PathScore.Root */];\n        // allow trailing slash\n        if (options.strict && !segment.length)\n            pattern += '/';\n        for (let tokenIndex = 0; tokenIndex < segment.length; tokenIndex++) {\n            const token = segment[tokenIndex];\n            // resets the score if we are inside a sub-segment /:a-other-:b\n            let subSegmentScore = 40 /* PathScore.Segment */ +\n                (options.sensitive ? 0.25 /* PathScore.BonusCaseSensitive */ : 0);\n            if (token.type === 0 /* TokenType.Static */) {\n                // prepend the slash if we are starting a new segment\n                if (!tokenIndex)\n                    pattern += '/';\n                pattern += token.value.replace(REGEX_CHARS_RE, '\\\\$&');\n                subSegmentScore += 40 /* PathScore.Static */;\n            }\n            else if (token.type === 1 /* TokenType.Param */) {\n                const { value, repeatable, optional, regexp } = token;\n                keys.push({\n                    name: value,\n                    repeatable,\n                    optional,\n                });\n                const re = regexp ? regexp : BASE_PARAM_PATTERN;\n                // the user provided a custom regexp /:id(\\\\d+)\n                if (re !== BASE_PARAM_PATTERN) {\n                    subSegmentScore += 10 /* PathScore.BonusCustomRegExp */;\n                    // make sure the regexp is valid before using it\n                    try {\n                        new RegExp(`(${re})`);\n                    }\n                    catch (err) {\n                        throw new Error(`Invalid custom RegExp for param \"${value}\" (${re}): ` +\n                            err.message);\n                    }\n                }\n                // when we repeat we must take care of the repeating leading slash\n                let subPattern = repeatable ? `((?:${re})(?:/(?:${re}))*)` : `(${re})`;\n                // prepend the slash if we are starting a new segment\n                if (!tokenIndex)\n                    subPattern =\n                        // avoid an optional / if there are more segments e.g. /:p?-static\n                        // or /:p?-:p2\n                        optional && segment.length < 2\n                            ? `(?:/${subPattern})`\n                            : '/' + subPattern;\n                if (optional)\n                    subPattern += '?';\n                pattern += subPattern;\n                subSegmentScore += 20 /* PathScore.Dynamic */;\n                if (optional)\n                    subSegmentScore += -8 /* PathScore.BonusOptional */;\n                if (repeatable)\n                    subSegmentScore += -20 /* PathScore.BonusRepeatable */;\n                if (re === '.*')\n                    subSegmentScore += -50 /* PathScore.BonusWildcard */;\n            }\n            segmentScores.push(subSegmentScore);\n        }\n        // an empty array like /home/ -> [[{home}], []]\n        // if (!segment.length) pattern += '/'\n        score.push(segmentScores);\n    }\n    // only apply the strict bonus to the last score\n    if (options.strict && options.end) {\n        const i = score.length - 1;\n        score[i][score[i].length - 1] += 0.7000000000000001 /* PathScore.BonusStrict */;\n    }\n    // TODO: dev only warn double trailing slash\n    if (!options.strict)\n        pattern += '/?';\n    if (options.end)\n        pattern += '$';\n    // allow paths like /dynamic to only match dynamic or dynamic/... but not dynamic_something_else\n    else if (options.strict && !pattern.endsWith('/'))\n        pattern += '(?:/|$)';\n    const re = new RegExp(pattern, options.sensitive ? '' : 'i');\n    function parse(path) {\n        const match = path.match(re);\n        const params = {};\n        if (!match)\n            return null;\n        for (let i = 1; i < match.length; i++) {\n            const value = match[i] || '';\n            const key = keys[i - 1];\n            params[key.name] = value && key.repeatable ? value.split('/') : value;\n        }\n        return params;\n    }\n    function stringify(params) {\n        let path = '';\n        // for optional parameters to allow to be empty\n        let avoidDuplicatedSlash = false;\n        for (const segment of segments) {\n            if (!avoidDuplicatedSlash || !path.endsWith('/'))\n                path += '/';\n            avoidDuplicatedSlash = false;\n            for (const token of segment) {\n                if (token.type === 0 /* TokenType.Static */) {\n                    path += token.value;\n                }\n                else if (token.type === 1 /* TokenType.Param */) {\n                    const { value, repeatable, optional } = token;\n                    const param = value in params ? params[value] : '';\n                    if (isArray(param) && !repeatable) {\n                        throw new Error(`Provided param \"${value}\" is an array but it is not repeatable (* or + modifiers)`);\n                    }\n                    const text = isArray(param)\n                        ? param.join('/')\n                        : param;\n                    if (!text) {\n                        if (optional) {\n                            // if we have more than one optional param like /:a?-static we don't need to care about the optional param\n                            if (segment.length < 2) {\n                                // remove the last slash as we could be at the end\n                                if (path.endsWith('/'))\n                                    path = path.slice(0, -1);\n                                // do not append a slash on the next iteration\n                                else\n                                    avoidDuplicatedSlash = true;\n                            }\n                        }\n                        else\n                            throw new Error(`Missing required param \"${value}\"`);\n                    }\n                    path += text;\n                }\n            }\n        }\n        // avoid empty path when we have multiple optional params\n        return path || '/';\n    }\n    return {\n        re,\n        score,\n        keys,\n        parse,\n        stringify,\n    };\n}\n/**\n * Compares an array of numbers as used in PathParser.score and returns a\n * number. This function can be used to `sort` an array\n *\n * @param a - first array of numbers\n * @param b - second array of numbers\n * @returns 0 if both are equal, < 0 if a should be sorted first, > 0 if b\n * should be sorted first\n */\nfunction compareScoreArray(a, b) {\n    let i = 0;\n    while (i < a.length && i < b.length) {\n        const diff = b[i] - a[i];\n        // only keep going if diff === 0\n        if (diff)\n            return diff;\n        i++;\n    }\n    // if the last subsegment was Static, the shorter segments should be sorted first\n    // otherwise sort the longest segment first\n    if (a.length < b.length) {\n        return a.length === 1 && a[0] === 40 /* PathScore.Static */ + 40 /* PathScore.Segment */\n            ? -1\n            : 1;\n    }\n    else if (a.length > b.length) {\n        return b.length === 1 && b[0] === 40 /* PathScore.Static */ + 40 /* PathScore.Segment */\n            ? 1\n            : -1;\n    }\n    return 0;\n}\n/**\n * Compare function that can be used with `sort` to sort an array of PathParser\n *\n * @param a - first PathParser\n * @param b - second PathParser\n * @returns 0 if both are equal, < 0 if a should be sorted first, > 0 if b\n */\nfunction comparePathParserScore(a, b) {\n    let i = 0;\n    const aScore = a.score;\n    const bScore = b.score;\n    while (i < aScore.length && i < bScore.length) {\n        const comp = compareScoreArray(aScore[i], bScore[i]);\n        // do not return if both are equal\n        if (comp)\n            return comp;\n        i++;\n    }\n    if (Math.abs(bScore.length - aScore.length) === 1) {\n        if (isLastScoreNegative(aScore))\n            return 1;\n        if (isLastScoreNegative(bScore))\n            return -1;\n    }\n    // if a and b share the same score entries but b has more, sort b first\n    return bScore.length - aScore.length;\n    // this is the ternary version\n    // return aScore.length < bScore.length\n    //   ? 1\n    //   : aScore.length > bScore.length\n    //   ? -1\n    //   : 0\n}\n/**\n * This allows detecting splats at the end of a path: /home/:id(.*)*\n *\n * @param score - score to check\n * @returns true if the last entry is negative\n */\nfunction isLastScoreNegative(score) {\n    const last = score[score.length - 1];\n    return score.length > 0 && last[last.length - 1] < 0;\n}\n\nconst ROOT_TOKEN = {\n    type: 0 /* TokenType.Static */,\n    value: '',\n};\nconst VALID_PARAM_RE = /[a-zA-Z0-9_]/;\n// After some profiling, the cache seems to be unnecessary because tokenizePath\n// (the slowest part of adding a route) is very fast\n// const tokenCache = new Map<string, Token[][]>()\nfunction tokenizePath(path) {\n    if (!path)\n        return [[]];\n    if (path === '/')\n        return [[ROOT_TOKEN]];\n    if (!path.startsWith('/')) {\n        throw new Error((process.env.NODE_ENV !== 'production')\n            ? `Route paths should start with a \"/\": \"${path}\" should be \"/${path}\".`\n            : `Invalid path \"${path}\"`);\n    }\n    // if (tokenCache.has(path)) return tokenCache.get(path)!\n    function crash(message) {\n        throw new Error(`ERR (${state})/\"${buffer}\": ${message}`);\n    }\n    let state = 0 /* TokenizerState.Static */;\n    let previousState = state;\n    const tokens = [];\n    // the segment will always be valid because we get into the initial state\n    // with the leading /\n    let segment;\n    function finalizeSegment() {\n        if (segment)\n            tokens.push(segment);\n        segment = [];\n    }\n    // index on the path\n    let i = 0;\n    // char at index\n    let char;\n    // buffer of the value read\n    let buffer = '';\n    // custom regexp for a param\n    let customRe = '';\n    function consumeBuffer() {\n        if (!buffer)\n            return;\n        if (state === 0 /* TokenizerState.Static */) {\n            segment.push({\n                type: 0 /* TokenType.Static */,\n                value: buffer,\n            });\n        }\n        else if (state === 1 /* TokenizerState.Param */ ||\n            state === 2 /* TokenizerState.ParamRegExp */ ||\n            state === 3 /* TokenizerState.ParamRegExpEnd */) {\n            if (segment.length > 1 && (char === '*' || char === '+'))\n                crash(`A repeatable param (${buffer}) must be alone in its segment. eg: '/:ids+.`);\n            segment.push({\n                type: 1 /* TokenType.Param */,\n                value: buffer,\n                regexp: customRe,\n                repeatable: char === '*' || char === '+',\n                optional: char === '*' || char === '?',\n            });\n        }\n        else {\n            crash('Invalid state to consume buffer');\n        }\n        buffer = '';\n    }\n    function addCharToBuffer() {\n        buffer += char;\n    }\n    while (i < path.length) {\n        char = path[i++];\n        if (char === '\\\\' && state !== 2 /* TokenizerState.ParamRegExp */) {\n            previousState = state;\n            state = 4 /* TokenizerState.EscapeNext */;\n            continue;\n        }\n        switch (state) {\n            case 0 /* TokenizerState.Static */:\n                if (char === '/') {\n                    if (buffer) {\n                        consumeBuffer();\n                    }\n                    finalizeSegment();\n                }\n                else if (char === ':') {\n                    consumeBuffer();\n                    state = 1 /* TokenizerState.Param */;\n                }\n                else {\n                    addCharToBuffer();\n                }\n                break;\n            case 4 /* TokenizerState.EscapeNext */:\n                addCharToBuffer();\n                state = previousState;\n                break;\n            case 1 /* TokenizerState.Param */:\n                if (char === '(') {\n                    state = 2 /* TokenizerState.ParamRegExp */;\n                }\n                else if (VALID_PARAM_RE.test(char)) {\n                    addCharToBuffer();\n                }\n                else {\n                    consumeBuffer();\n                    state = 0 /* TokenizerState.Static */;\n                    // go back one character if we were not modifying\n                    if (char !== '*' && char !== '?' && char !== '+')\n                        i--;\n                }\n                break;\n            case 2 /* TokenizerState.ParamRegExp */:\n                // TODO: is it worth handling nested regexp? like :p(?:prefix_([^/]+)_suffix)\n                // it already works by escaping the closing )\n                // https://paths.esm.dev/?p=AAMeJbiAwQEcDKbAoAAkP60PG2R6QAvgNaA6AFACM2ABuQBB#\n                // is this really something people need since you can also write\n                // /prefix_:p()_suffix\n                if (char === ')') {\n                    // handle the escaped )\n                    if (customRe[customRe.length - 1] == '\\\\')\n                        customRe = customRe.slice(0, -1) + char;\n                    else\n                        state = 3 /* TokenizerState.ParamRegExpEnd */;\n                }\n                else {\n                    customRe += char;\n                }\n                break;\n            case 3 /* TokenizerState.ParamRegExpEnd */:\n                // same as finalizing a param\n                consumeBuffer();\n                state = 0 /* TokenizerState.Static */;\n                // go back one character if we were not modifying\n                if (char !== '*' && char !== '?' && char !== '+')\n                    i--;\n                customRe = '';\n                break;\n            default:\n                crash('Unknown state');\n                break;\n        }\n    }\n    if (state === 2 /* TokenizerState.ParamRegExp */)\n        crash(`Unfinished custom RegExp for param \"${buffer}\"`);\n    consumeBuffer();\n    finalizeSegment();\n    // tokenCache.set(path, tokens)\n    return tokens;\n}\n\nfunction createRouteRecordMatcher(record, parent, options) {\n    const parser = tokensToParser(tokenizePath(record.path), options);\n    // warn against params with the same name\n    if ((process.env.NODE_ENV !== 'production')) {\n        const existingKeys = new Set();\n        for (const key of parser.keys) {\n            if (existingKeys.has(key.name))\n                warn(`Found duplicated params with name \"${key.name}\" for path \"${record.path}\". Only the last one will be available on \"$route.params\".`);\n            existingKeys.add(key.name);\n        }\n    }\n    const matcher = assign(parser, {\n        record,\n        parent,\n        // these needs to be populated by the parent\n        children: [],\n        alias: [],\n    });\n    if (parent) {\n        // both are aliases or both are not aliases\n        // we don't want to mix them because the order is used when\n        // passing originalRecord in Matcher.addRoute\n        if (!matcher.record.aliasOf === !parent.record.aliasOf)\n            parent.children.push(matcher);\n    }\n    return matcher;\n}\n\n/**\n * Creates a Router Matcher.\n *\n * @internal\n * @param routes - array of initial routes\n * @param globalOptions - global route options\n */\nfunction createRouterMatcher(routes, globalOptions) {\n    // normalized ordered array of matchers\n    const matchers = [];\n    const matcherMap = new Map();\n    globalOptions = mergeOptions({ strict: false, end: true, sensitive: false }, globalOptions);\n    function getRecordMatcher(name) {\n        return matcherMap.get(name);\n    }\n    function addRoute(record, parent, originalRecord) {\n        // used later on to remove by name\n        const isRootAdd = !originalRecord;\n        const mainNormalizedRecord = normalizeRouteRecord(record);\n        if ((process.env.NODE_ENV !== 'production')) {\n            checkChildMissingNameWithEmptyPath(mainNormalizedRecord, parent);\n        }\n        // we might be the child of an alias\n        mainNormalizedRecord.aliasOf = originalRecord && originalRecord.record;\n        const options = mergeOptions(globalOptions, record);\n        // generate an array of records to correctly handle aliases\n        const normalizedRecords = [mainNormalizedRecord];\n        if ('alias' in record) {\n            const aliases = typeof record.alias === 'string' ? [record.alias] : record.alias;\n            for (const alias of aliases) {\n                normalizedRecords.push(\n                // we need to normalize again to ensure the `mods` property\n                // being non enumerable\n                normalizeRouteRecord(assign({}, mainNormalizedRecord, {\n                    // this allows us to hold a copy of the `components` option\n                    // so that async components cache is hold on the original record\n                    components: originalRecord\n                        ? originalRecord.record.components\n                        : mainNormalizedRecord.components,\n                    path: alias,\n                    // we might be the child of an alias\n                    aliasOf: originalRecord\n                        ? originalRecord.record\n                        : mainNormalizedRecord,\n                    // the aliases are always of the same kind as the original since they\n                    // are defined on the same record\n                })));\n            }\n        }\n        let matcher;\n        let originalMatcher;\n        for (const normalizedRecord of normalizedRecords) {\n            const { path } = normalizedRecord;\n            // Build up the path for nested routes if the child isn't an absolute\n            // route. Only add the / delimiter if the child path isn't empty and if the\n            // parent path doesn't have a trailing slash\n            if (parent && path[0] !== '/') {\n                const parentPath = parent.record.path;\n                const connectingSlash = parentPath[parentPath.length - 1] === '/' ? '' : '/';\n                normalizedRecord.path =\n                    parent.record.path + (path && connectingSlash + path);\n            }\n            if ((process.env.NODE_ENV !== 'production') && normalizedRecord.path === '*') {\n                throw new Error('Catch all routes (\"*\") must now be defined using a param with a custom regexp.\\n' +\n                    'See more at https://router.vuejs.org/guide/migration/#Removed-star-or-catch-all-routes.');\n            }\n            // create the object beforehand, so it can be passed to children\n            matcher = createRouteRecordMatcher(normalizedRecord, parent, options);\n            if ((process.env.NODE_ENV !== 'production') && parent && path[0] === '/')\n                checkMissingParamsInAbsolutePath(matcher, parent);\n            // if we are an alias we must tell the original record that we exist,\n            // so we can be removed\n            if (originalRecord) {\n                originalRecord.alias.push(matcher);\n                if ((process.env.NODE_ENV !== 'production')) {\n                    checkSameParams(originalRecord, matcher);\n                }\n            }\n            else {\n                // otherwise, the first record is the original and others are aliases\n                originalMatcher = originalMatcher || matcher;\n                if (originalMatcher !== matcher)\n                    originalMatcher.alias.push(matcher);\n                // remove the route if named and only for the top record (avoid in nested calls)\n                // this works because the original record is the first one\n                if (isRootAdd && record.name && !isAliasRecord(matcher)) {\n                    if ((process.env.NODE_ENV !== 'production')) {\n                        checkSameNameAsAncestor(record, parent);\n                    }\n                    removeRoute(record.name);\n                }\n            }\n            // Avoid adding a record that doesn't display anything. This allows passing through records without a component to\n            // not be reached and pass through the catch all route\n            if (isMatchable(matcher)) {\n                insertMatcher(matcher);\n            }\n            if (mainNormalizedRecord.children) {\n                const children = mainNormalizedRecord.children;\n                for (let i = 0; i < children.length; i++) {\n                    addRoute(children[i], matcher, originalRecord && originalRecord.children[i]);\n                }\n            }\n            // if there was no original record, then the first one was not an alias and all\n            // other aliases (if any) need to reference this record when adding children\n            originalRecord = originalRecord || matcher;\n            // TODO: add normalized records for more flexibility\n            // if (parent && isAliasRecord(originalRecord)) {\n            //   parent.children.push(originalRecord)\n            // }\n        }\n        return originalMatcher\n            ? () => {\n                // since other matchers are aliases, they should be removed by the original matcher\n                removeRoute(originalMatcher);\n            }\n            : noop;\n    }\n    function removeRoute(matcherRef) {\n        if (isRouteName(matcherRef)) {\n            const matcher = matcherMap.get(matcherRef);\n            if (matcher) {\n                matcherMap.delete(matcherRef);\n                matchers.splice(matchers.indexOf(matcher), 1);\n                matcher.children.forEach(removeRoute);\n                matcher.alias.forEach(removeRoute);\n            }\n        }\n        else {\n            const index = matchers.indexOf(matcherRef);\n            if (index > -1) {\n                matchers.splice(index, 1);\n                if (matcherRef.record.name)\n                    matcherMap.delete(matcherRef.record.name);\n                matcherRef.children.forEach(removeRoute);\n                matcherRef.alias.forEach(removeRoute);\n            }\n        }\n    }\n    function getRoutes() {\n        return matchers;\n    }\n    function insertMatcher(matcher) {\n        const index = findInsertionIndex(matcher, matchers);\n        matchers.splice(index, 0, matcher);\n        // only add the original record to the name map\n        if (matcher.record.name && !isAliasRecord(matcher))\n            matcherMap.set(matcher.record.name, matcher);\n    }\n    function resolve(location, currentLocation) {\n        let matcher;\n        let params = {};\n        let path;\n        let name;\n        if ('name' in location && location.name) {\n            matcher = matcherMap.get(location.name);\n            if (!matcher)\n                throw createRouterError(1 /* ErrorTypes.MATCHER_NOT_FOUND */, {\n                    location,\n                });\n            // warn if the user is passing invalid params so they can debug it better when they get removed\n            if ((process.env.NODE_ENV !== 'production')) {\n                const invalidParams = Object.keys(location.params || {}).filter(paramName => !matcher.keys.find(k => k.name === paramName));\n                if (invalidParams.length) {\n                    warn(`Discarded invalid param(s) \"${invalidParams.join('\", \"')}\" when navigating. See https://github.com/vuejs/router/blob/main/packages/router/CHANGELOG.md#414-2022-08-22 for more details.`);\n                }\n            }\n            name = matcher.record.name;\n            params = assign(\n            // paramsFromLocation is a new object\n            paramsFromLocation(currentLocation.params, \n            // only keep params that exist in the resolved location\n            // only keep optional params coming from a parent record\n            matcher.keys\n                .filter(k => !k.optional)\n                .concat(matcher.parent ? matcher.parent.keys.filter(k => k.optional) : [])\n                .map(k => k.name)), \n            // discard any existing params in the current location that do not exist here\n            // #1497 this ensures better active/exact matching\n            location.params &&\n                paramsFromLocation(location.params, matcher.keys.map(k => k.name)));\n            // throws if cannot be stringified\n            path = matcher.stringify(params);\n        }\n        else if (location.path != null) {\n            // no need to resolve the path with the matcher as it was provided\n            // this also allows the user to control the encoding\n            path = location.path;\n            if ((process.env.NODE_ENV !== 'production') && !path.startsWith('/')) {\n                warn(`The Matcher cannot resolve relative paths but received \"${path}\". Unless you directly called \\`matcher.resolve(\"${path}\")\\`, this is probably a bug in vue-router. Please open an issue at https://github.com/vuejs/router/issues/new/choose.`);\n            }\n            matcher = matchers.find(m => m.re.test(path));\n            // matcher should have a value after the loop\n            if (matcher) {\n                // we know the matcher works because we tested the regexp\n                params = matcher.parse(path);\n                name = matcher.record.name;\n            }\n            // location is a relative path\n        }\n        else {\n            // match by name or path of current route\n            matcher = currentLocation.name\n                ? matcherMap.get(currentLocation.name)\n                : matchers.find(m => m.re.test(currentLocation.path));\n            if (!matcher)\n                throw createRouterError(1 /* ErrorTypes.MATCHER_NOT_FOUND */, {\n                    location,\n                    currentLocation,\n                });\n            name = matcher.record.name;\n            // since we are navigating to the same location, we don't need to pick the\n            // params like when `name` is provided\n            params = assign({}, currentLocation.params, location.params);\n            path = matcher.stringify(params);\n        }\n        const matched = [];\n        let parentMatcher = matcher;\n        while (parentMatcher) {\n            // reversed order so parents are at the beginning\n            matched.unshift(parentMatcher.record);\n            parentMatcher = parentMatcher.parent;\n        }\n        return {\n            name,\n            path,\n            params,\n            matched,\n            meta: mergeMetaFields(matched),\n        };\n    }\n    // add initial routes\n    routes.forEach(route => addRoute(route));\n    function clearRoutes() {\n        matchers.length = 0;\n        matcherMap.clear();\n    }\n    return {\n        addRoute,\n        resolve,\n        removeRoute,\n        clearRoutes,\n        getRoutes,\n        getRecordMatcher,\n    };\n}\nfunction paramsFromLocation(params, keys) {\n    const newParams = {};\n    for (const key of keys) {\n        if (key in params)\n            newParams[key] = params[key];\n    }\n    return newParams;\n}\n/**\n * Normalizes a RouteRecordRaw. Creates a copy\n *\n * @param record\n * @returns the normalized version\n */\nfunction normalizeRouteRecord(record) {\n    const normalized = {\n        path: record.path,\n        redirect: record.redirect,\n        name: record.name,\n        meta: record.meta || {},\n        aliasOf: record.aliasOf,\n        beforeEnter: record.beforeEnter,\n        props: normalizeRecordProps(record),\n        children: record.children || [],\n        instances: {},\n        leaveGuards: new Set(),\n        updateGuards: new Set(),\n        enterCallbacks: {},\n        // must be declared afterwards\n        // mods: {},\n        components: 'components' in record\n            ? record.components || null\n            : record.component && { default: record.component },\n    };\n    // mods contain modules and shouldn't be copied,\n    // logged or anything. It's just used for internal\n    // advanced use cases like data loaders\n    Object.defineProperty(normalized, 'mods', {\n        value: {},\n    });\n    return normalized;\n}\n/**\n * Normalize the optional `props` in a record to always be an object similar to\n * components. Also accept a boolean for components.\n * @param record\n */\nfunction normalizeRecordProps(record) {\n    const propsObject = {};\n    // props does not exist on redirect records, but we can set false directly\n    const props = record.props || false;\n    if ('component' in record) {\n        propsObject.default = props;\n    }\n    else {\n        // NOTE: we could also allow a function to be applied to every component.\n        // Would need user feedback for use cases\n        for (const name in record.components)\n            propsObject[name] = typeof props === 'object' ? props[name] : props;\n    }\n    return propsObject;\n}\n/**\n * Checks if a record or any of its parent is an alias\n * @param record\n */\nfunction isAliasRecord(record) {\n    while (record) {\n        if (record.record.aliasOf)\n            return true;\n        record = record.parent;\n    }\n    return false;\n}\n/**\n * Merge meta fields of an array of records\n *\n * @param matched - array of matched records\n */\nfunction mergeMetaFields(matched) {\n    return matched.reduce((meta, record) => assign(meta, record.meta), {});\n}\nfunction mergeOptions(defaults, partialOptions) {\n    const options = {};\n    for (const key in defaults) {\n        options[key] = key in partialOptions ? partialOptions[key] : defaults[key];\n    }\n    return options;\n}\nfunction isSameParam(a, b) {\n    return (a.name === b.name &&\n        a.optional === b.optional &&\n        a.repeatable === b.repeatable);\n}\n/**\n * Check if a path and its alias have the same required params\n *\n * @param a - original record\n * @param b - alias record\n */\nfunction checkSameParams(a, b) {\n    for (const key of a.keys) {\n        if (!key.optional && !b.keys.find(isSameParam.bind(null, key)))\n            return warn(`Alias \"${b.record.path}\" and the original record: \"${a.record.path}\" must have the exact same param named \"${key.name}\"`);\n    }\n    for (const key of b.keys) {\n        if (!key.optional && !a.keys.find(isSameParam.bind(null, key)))\n            return warn(`Alias \"${b.record.path}\" and the original record: \"${a.record.path}\" must have the exact same param named \"${key.name}\"`);\n    }\n}\n/**\n * A route with a name and a child with an empty path without a name should warn when adding the route\n *\n * @param mainNormalizedRecord - RouteRecordNormalized\n * @param parent - RouteRecordMatcher\n */\nfunction checkChildMissingNameWithEmptyPath(mainNormalizedRecord, parent) {\n    if (parent &&\n        parent.record.name &&\n        !mainNormalizedRecord.name &&\n        !mainNormalizedRecord.path) {\n        warn(`The route named \"${String(parent.record.name)}\" has a child without a name and an empty path. Using that name won't render the empty path child so you probably want to move the name to the child instead. If this is intentional, add a name to the child route to remove the warning.`);\n    }\n}\nfunction checkSameNameAsAncestor(record, parent) {\n    for (let ancestor = parent; ancestor; ancestor = ancestor.parent) {\n        if (ancestor.record.name === record.name) {\n            throw new Error(`A route named \"${String(record.name)}\" has been added as a ${parent === ancestor ? 'child' : 'descendant'} of a route with the same name. Route names must be unique and a nested route cannot use the same name as an ancestor.`);\n        }\n    }\n}\nfunction checkMissingParamsInAbsolutePath(record, parent) {\n    for (const key of parent.keys) {\n        if (!record.keys.find(isSameParam.bind(null, key)))\n            return warn(`Absolute path \"${record.record.path}\" must have the exact same param named \"${key.name}\" as its parent \"${parent.record.path}\".`);\n    }\n}\n/**\n * Performs a binary search to find the correct insertion index for a new matcher.\n *\n * Matchers are primarily sorted by their score. If scores are tied then we also consider parent/child relationships,\n * with descendants coming before ancestors. If there's still a tie, new routes are inserted after existing routes.\n *\n * @param matcher - new matcher to be inserted\n * @param matchers - existing matchers\n */\nfunction findInsertionIndex(matcher, matchers) {\n    // First phase: binary search based on score\n    let lower = 0;\n    let upper = matchers.length;\n    while (lower !== upper) {\n        const mid = (lower + upper) >> 1;\n        const sortOrder = comparePathParserScore(matcher, matchers[mid]);\n        if (sortOrder < 0) {\n            upper = mid;\n        }\n        else {\n            lower = mid + 1;\n        }\n    }\n    // Second phase: check for an ancestor with the same score\n    const insertionAncestor = getInsertionAncestor(matcher);\n    if (insertionAncestor) {\n        upper = matchers.lastIndexOf(insertionAncestor, upper - 1);\n        if ((process.env.NODE_ENV !== 'production') && upper < 0) {\n            // This should never happen\n            warn(`Finding ancestor route \"${insertionAncestor.record.path}\" failed for \"${matcher.record.path}\"`);\n        }\n    }\n    return upper;\n}\nfunction getInsertionAncestor(matcher) {\n    let ancestor = matcher;\n    while ((ancestor = ancestor.parent)) {\n        if (isMatchable(ancestor) &&\n            comparePathParserScore(matcher, ancestor) === 0) {\n            return ancestor;\n        }\n    }\n    return;\n}\n/**\n * Checks if a matcher can be reachable. This means if it's possible to reach it as a route. For example, routes without\n * a component, or name, or redirect, are just used to group other routes.\n * @param matcher\n * @param matcher.record record of the matcher\n * @returns\n */\nfunction isMatchable({ record }) {\n    return !!(record.name ||\n        (record.components && Object.keys(record.components).length) ||\n        record.redirect);\n}\n\n/**\n * Transforms a queryString into a {@link LocationQuery} object. Accept both, a\n * version with the leading `?` and without Should work as URLSearchParams\n\n * @internal\n *\n * @param search - search string to parse\n * @returns a query object\n */\nfunction parseQuery(search) {\n    const query = {};\n    // avoid creating an object with an empty key and empty value\n    // because of split('&')\n    if (search === '' || search === '?')\n        return query;\n    const hasLeadingIM = search[0] === '?';\n    const searchParams = (hasLeadingIM ? search.slice(1) : search).split('&');\n    for (let i = 0; i < searchParams.length; ++i) {\n        // pre decode the + into space\n        const searchParam = searchParams[i].replace(PLUS_RE, ' ');\n        // allow the = character\n        const eqPos = searchParam.indexOf('=');\n        const key = decode(eqPos < 0 ? searchParam : searchParam.slice(0, eqPos));\n        const value = eqPos < 0 ? null : decode(searchParam.slice(eqPos + 1));\n        if (key in query) {\n            // an extra variable for ts types\n            let currentValue = query[key];\n            if (!isArray(currentValue)) {\n                currentValue = query[key] = [currentValue];\n            }\n            currentValue.push(value);\n        }\n        else {\n            query[key] = value;\n        }\n    }\n    return query;\n}\n/**\n * Stringifies a {@link LocationQueryRaw} object. Like `URLSearchParams`, it\n * doesn't prepend a `?`\n *\n * @internal\n *\n * @param query - query object to stringify\n * @returns string version of the query without the leading `?`\n */\nfunction stringifyQuery(query) {\n    let search = '';\n    for (let key in query) {\n        const value = query[key];\n        key = encodeQueryKey(key);\n        if (value == null) {\n            // only null adds the value\n            if (value !== undefined) {\n                search += (search.length ? '&' : '') + key;\n            }\n            continue;\n        }\n        // keep null values\n        const values = isArray(value)\n            ? value.map(v => v && encodeQueryValue(v))\n            : [value && encodeQueryValue(value)];\n        values.forEach(value => {\n            // skip undefined values in arrays as if they were not present\n            // smaller code than using filter\n            if (value !== undefined) {\n                // only append & with non-empty search\n                search += (search.length ? '&' : '') + key;\n                if (value != null)\n                    search += '=' + value;\n            }\n        });\n    }\n    return search;\n}\n/**\n * Transforms a {@link LocationQueryRaw} into a {@link LocationQuery} by casting\n * numbers into strings, removing keys with an undefined value and replacing\n * undefined with null in arrays\n *\n * @param query - query object to normalize\n * @returns a normalized query object\n */\nfunction normalizeQuery(query) {\n    const normalizedQuery = {};\n    for (const key in query) {\n        const value = query[key];\n        if (value !== undefined) {\n            normalizedQuery[key] = isArray(value)\n                ? value.map(v => (v == null ? null : '' + v))\n                : value == null\n                    ? value\n                    : '' + value;\n        }\n    }\n    return normalizedQuery;\n}\n\n/**\n * RouteRecord being rendered by the closest ancestor Router View. Used for\n * `onBeforeRouteUpdate` and `onBeforeRouteLeave`. rvlm stands for Router View\n * Location Matched\n *\n * @internal\n */\nconst matchedRouteKey = Symbol((process.env.NODE_ENV !== 'production') ? 'router view location matched' : '');\n/**\n * Allows overriding the router view depth to control which component in\n * `matched` is rendered. rvd stands for Router View Depth\n *\n * @internal\n */\nconst viewDepthKey = Symbol((process.env.NODE_ENV !== 'production') ? 'router view depth' : '');\n/**\n * Allows overriding the router instance returned by `useRouter` in tests. r\n * stands for router\n *\n * @internal\n */\nconst routerKey = Symbol((process.env.NODE_ENV !== 'production') ? 'router' : '');\n/**\n * Allows overriding the current route returned by `useRoute` in tests. rl\n * stands for route location\n *\n * @internal\n */\nconst routeLocationKey = Symbol((process.env.NODE_ENV !== 'production') ? 'route location' : '');\n/**\n * Allows overriding the current route used by router-view. Internally this is\n * used when the `route` prop is passed.\n *\n * @internal\n */\nconst routerViewLocationKey = Symbol((process.env.NODE_ENV !== 'production') ? 'router view location' : '');\n\n/**\n * Create a list of callbacks that can be reset. Used to create before and after navigation guards list\n */\nfunction useCallbacks() {\n    let handlers = [];\n    function add(handler) {\n        handlers.push(handler);\n        return () => {\n            const i = handlers.indexOf(handler);\n            if (i > -1)\n                handlers.splice(i, 1);\n        };\n    }\n    function reset() {\n        handlers = [];\n    }\n    return {\n        add,\n        list: () => handlers.slice(),\n        reset,\n    };\n}\n\nfunction registerGuard(record, name, guard) {\n    const removeFromList = () => {\n        record[name].delete(guard);\n    };\n    onUnmounted(removeFromList);\n    onDeactivated(removeFromList);\n    onActivated(() => {\n        record[name].add(guard);\n    });\n    record[name].add(guard);\n}\n/**\n * Add a navigation guard that triggers whenever the component for the current\n * location is about to be left. Similar to {@link beforeRouteLeave} but can be\n * used in any component. The guard is removed when the component is unmounted.\n *\n * @param leaveGuard - {@link NavigationGuard}\n */\nfunction onBeforeRouteLeave(leaveGuard) {\n    if ((process.env.NODE_ENV !== 'production') && !getCurrentInstance()) {\n        warn('getCurrentInstance() returned null. onBeforeRouteLeave() must be called at the top of a setup function');\n        return;\n    }\n    const activeRecord = inject(matchedRouteKey, \n    // to avoid warning\n    {}).value;\n    if (!activeRecord) {\n        (process.env.NODE_ENV !== 'production') &&\n            warn('No active route record was found when calling `onBeforeRouteLeave()`. Make sure you call this function inside a component child of <router-view>. Maybe you called it inside of App.vue?');\n        return;\n    }\n    registerGuard(activeRecord, 'leaveGuards', leaveGuard);\n}\n/**\n * Add a navigation guard that triggers whenever the current location is about\n * to be updated. Similar to {@link beforeRouteUpdate} but can be used in any\n * component. The guard is removed when the component is unmounted.\n *\n * @param updateGuard - {@link NavigationGuard}\n */\nfunction onBeforeRouteUpdate(updateGuard) {\n    if ((process.env.NODE_ENV !== 'production') && !getCurrentInstance()) {\n        warn('getCurrentInstance() returned null. onBeforeRouteUpdate() must be called at the top of a setup function');\n        return;\n    }\n    const activeRecord = inject(matchedRouteKey, \n    // to avoid warning\n    {}).value;\n    if (!activeRecord) {\n        (process.env.NODE_ENV !== 'production') &&\n            warn('No active route record was found when calling `onBeforeRouteUpdate()`. Make sure you call this function inside a component child of <router-view>. Maybe you called it inside of App.vue?');\n        return;\n    }\n    registerGuard(activeRecord, 'updateGuards', updateGuard);\n}\nfunction guardToPromiseFn(guard, to, from, record, name, runWithContext = fn => fn()) {\n    // keep a reference to the enterCallbackArray to prevent pushing callbacks if a new navigation took place\n    const enterCallbackArray = record &&\n        // name is defined if record is because of the function overload\n        (record.enterCallbacks[name] = record.enterCallbacks[name] || []);\n    return () => new Promise((resolve, reject) => {\n        const next = (valid) => {\n            if (valid === false) {\n                reject(createRouterError(4 /* ErrorTypes.NAVIGATION_ABORTED */, {\n                    from,\n                    to,\n                }));\n            }\n            else if (valid instanceof Error) {\n                reject(valid);\n            }\n            else if (isRouteLocation(valid)) {\n                reject(createRouterError(2 /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */, {\n                    from: to,\n                    to: valid,\n                }));\n            }\n            else {\n                if (enterCallbackArray &&\n                    // since enterCallbackArray is truthy, both record and name also are\n                    record.enterCallbacks[name] === enterCallbackArray &&\n                    typeof valid === 'function') {\n                    enterCallbackArray.push(valid);\n                }\n                resolve();\n            }\n        };\n        // wrapping with Promise.resolve allows it to work with both async and sync guards\n        const guardReturn = runWithContext(() => guard.call(record && record.instances[name], to, from, (process.env.NODE_ENV !== 'production') ? canOnlyBeCalledOnce(next, to, from) : next));\n        let guardCall = Promise.resolve(guardReturn);\n        if (guard.length < 3)\n            guardCall = guardCall.then(next);\n        if ((process.env.NODE_ENV !== 'production') && guard.length > 2) {\n            const message = `The \"next\" callback was never called inside of ${guard.name ? '\"' + guard.name + '\"' : ''}:\\n${guard.toString()}\\n. If you are returning a value instead of calling \"next\", make sure to remove the \"next\" parameter from your function.`;\n            if (typeof guardReturn === 'object' && 'then' in guardReturn) {\n                guardCall = guardCall.then(resolvedValue => {\n                    // @ts-expect-error: _called is added at canOnlyBeCalledOnce\n                    if (!next._called) {\n                        warn(message);\n                        return Promise.reject(new Error('Invalid navigation guard'));\n                    }\n                    return resolvedValue;\n                });\n            }\n            else if (guardReturn !== undefined) {\n                // @ts-expect-error: _called is added at canOnlyBeCalledOnce\n                if (!next._called) {\n                    warn(message);\n                    reject(new Error('Invalid navigation guard'));\n                    return;\n                }\n            }\n        }\n        guardCall.catch(err => reject(err));\n    });\n}\nfunction canOnlyBeCalledOnce(next, to, from) {\n    let called = 0;\n    return function () {\n        if (called++ === 1)\n            warn(`The \"next\" callback was called more than once in one navigation guard when going from \"${from.fullPath}\" to \"${to.fullPath}\". It should be called exactly one time in each navigation guard. This will fail in production.`);\n        // @ts-expect-error: we put it in the original one because it's easier to check\n        next._called = true;\n        if (called === 1)\n            next.apply(null, arguments);\n    };\n}\nfunction extractComponentsGuards(matched, guardType, to, from, runWithContext = fn => fn()) {\n    const guards = [];\n    for (const record of matched) {\n        if ((process.env.NODE_ENV !== 'production') && !record.components && !record.children.length) {\n            warn(`Record with path \"${record.path}\" is either missing a \"component(s)\"` +\n                ` or \"children\" property.`);\n        }\n        for (const name in record.components) {\n            let rawComponent = record.components[name];\n            if ((process.env.NODE_ENV !== 'production')) {\n                if (!rawComponent ||\n                    (typeof rawComponent !== 'object' &&\n                        typeof rawComponent !== 'function')) {\n                    warn(`Component \"${name}\" in record with path \"${record.path}\" is not` +\n                        ` a valid component. Received \"${String(rawComponent)}\".`);\n                    // throw to ensure we stop here but warn to ensure the message isn't\n                    // missed by the user\n                    throw new Error('Invalid route component');\n                }\n                else if ('then' in rawComponent) {\n                    // warn if user wrote import('/component.vue') instead of () =>\n                    // import('./component.vue')\n                    warn(`Component \"${name}\" in record with path \"${record.path}\" is a ` +\n                        `Promise instead of a function that returns a Promise. Did you ` +\n                        `write \"import('./MyPage.vue')\" instead of ` +\n                        `\"() => import('./MyPage.vue')\" ? This will break in ` +\n                        `production if not fixed.`);\n                    const promise = rawComponent;\n                    rawComponent = () => promise;\n                }\n                else if (rawComponent.__asyncLoader &&\n                    // warn only once per component\n                    !rawComponent.__warnedDefineAsync) {\n                    rawComponent.__warnedDefineAsync = true;\n                    warn(`Component \"${name}\" in record with path \"${record.path}\" is defined ` +\n                        `using \"defineAsyncComponent()\". ` +\n                        `Write \"() => import('./MyPage.vue')\" instead of ` +\n                        `\"defineAsyncComponent(() => import('./MyPage.vue'))\".`);\n                }\n            }\n            // skip update and leave guards if the route component is not mounted\n            if (guardType !== 'beforeRouteEnter' && !record.instances[name])\n                continue;\n            if (isRouteComponent(rawComponent)) {\n                // __vccOpts is added by vue-class-component and contain the regular options\n                const options = rawComponent.__vccOpts || rawComponent;\n                const guard = options[guardType];\n                guard &&\n                    guards.push(guardToPromiseFn(guard, to, from, record, name, runWithContext));\n            }\n            else {\n                // start requesting the chunk already\n                let componentPromise = rawComponent();\n                if ((process.env.NODE_ENV !== 'production') && !('catch' in componentPromise)) {\n                    warn(`Component \"${name}\" in record with path \"${record.path}\" is a function that does not return a Promise. If you were passing a functional component, make sure to add a \"displayName\" to the component. This will break in production if not fixed.`);\n                    componentPromise = Promise.resolve(componentPromise);\n                }\n                guards.push(() => componentPromise.then(resolved => {\n                    if (!resolved)\n                        throw new Error(`Couldn't resolve component \"${name}\" at \"${record.path}\"`);\n                    const resolvedComponent = isESModule(resolved)\n                        ? resolved.default\n                        : resolved;\n                    // keep the resolved module for plugins like data loaders\n                    record.mods[name] = resolved;\n                    // replace the function with the resolved component\n                    // cannot be null or undefined because we went into the for loop\n                    record.components[name] = resolvedComponent;\n                    // __vccOpts is added by vue-class-component and contain the regular options\n                    const options = resolvedComponent.__vccOpts || resolvedComponent;\n                    const guard = options[guardType];\n                    return (guard &&\n                        guardToPromiseFn(guard, to, from, record, name, runWithContext)());\n                }));\n            }\n        }\n    }\n    return guards;\n}\n/**\n * Ensures a route is loaded, so it can be passed as o prop to `<RouterView>`.\n *\n * @param route - resolved route to load\n */\nfunction loadRouteLocation(route) {\n    return route.matched.every(record => record.redirect)\n        ? Promise.reject(new Error('Cannot load a route that redirects.'))\n        : Promise.all(route.matched.map(record => record.components &&\n            Promise.all(Object.keys(record.components).reduce((promises, name) => {\n                const rawComponent = record.components[name];\n                if (typeof rawComponent === 'function' &&\n                    !('displayName' in rawComponent)) {\n                    promises.push(rawComponent().then(resolved => {\n                        if (!resolved)\n                            return Promise.reject(new Error(`Couldn't resolve component \"${name}\" at \"${record.path}\". Ensure you passed a function that returns a promise.`));\n                        const resolvedComponent = isESModule(resolved)\n                            ? resolved.default\n                            : resolved;\n                        // keep the resolved module for plugins like data loaders\n                        record.mods[name] = resolved;\n                        // replace the function with the resolved component\n                        // cannot be null or undefined because we went into the for loop\n                        record.components[name] = resolvedComponent;\n                        return;\n                    }));\n                }\n                return promises;\n            }, [])))).then(() => route);\n}\n\n// TODO: we could allow currentRoute as a prop to expose `isActive` and\n// `isExactActive` behavior should go through an RFC\n/**\n * Returns the internal behavior of a {@link RouterLink} without the rendering part.\n *\n * @param props - a `to` location and an optional `replace` flag\n */\nfunction useLink(props) {\n    const router = inject(routerKey);\n    const currentRoute = inject(routeLocationKey);\n    let hasPrevious = false;\n    let previousTo = null;\n    const route = computed(() => {\n        const to = unref(props.to);\n        if ((process.env.NODE_ENV !== 'production') && (!hasPrevious || to !== previousTo)) {\n            if (!isRouteLocation(to)) {\n                if (hasPrevious) {\n                    warn(`Invalid value for prop \"to\" in useLink()\\n- to:`, to, `\\n- previous to:`, previousTo, `\\n- props:`, props);\n                }\n                else {\n                    warn(`Invalid value for prop \"to\" in useLink()\\n- to:`, to, `\\n- props:`, props);\n                }\n            }\n            previousTo = to;\n            hasPrevious = true;\n        }\n        return router.resolve(to);\n    });\n    const activeRecordIndex = computed(() => {\n        const { matched } = route.value;\n        const { length } = matched;\n        const routeMatched = matched[length - 1];\n        const currentMatched = currentRoute.matched;\n        if (!routeMatched || !currentMatched.length)\n            return -1;\n        const index = currentMatched.findIndex(isSameRouteRecord.bind(null, routeMatched));\n        if (index > -1)\n            return index;\n        // possible parent record\n        const parentRecordPath = getOriginalPath(matched[length - 2]);\n        return (\n        // we are dealing with nested routes\n        length > 1 &&\n            // if the parent and matched route have the same path, this link is\n            // referring to the empty child. Or we currently are on a different\n            // child of the same parent\n            getOriginalPath(routeMatched) === parentRecordPath &&\n            // avoid comparing the child with its parent\n            currentMatched[currentMatched.length - 1].path !== parentRecordPath\n            ? currentMatched.findIndex(isSameRouteRecord.bind(null, matched[length - 2]))\n            : index);\n    });\n    const isActive = computed(() => activeRecordIndex.value > -1 &&\n        includesParams(currentRoute.params, route.value.params));\n    const isExactActive = computed(() => activeRecordIndex.value > -1 &&\n        activeRecordIndex.value === currentRoute.matched.length - 1 &&\n        isSameRouteLocationParams(currentRoute.params, route.value.params));\n    function navigate(e = {}) {\n        if (guardEvent(e)) {\n            const p = router[unref(props.replace) ? 'replace' : 'push'](unref(props.to)\n            // avoid uncaught errors are they are logged anyway\n            ).catch(noop);\n            if (props.viewTransition &&\n                typeof document !== 'undefined' &&\n                'startViewTransition' in document) {\n                document.startViewTransition(() => p);\n            }\n            return p;\n        }\n        return Promise.resolve();\n    }\n    // devtools only\n    if (((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) && isBrowser) {\n        const instance = getCurrentInstance();\n        if (instance) {\n            const linkContextDevtools = {\n                route: route.value,\n                isActive: isActive.value,\n                isExactActive: isExactActive.value,\n                error: null,\n            };\n            // @ts-expect-error: this is internal\n            instance.__vrl_devtools = instance.__vrl_devtools || [];\n            // @ts-expect-error: this is internal\n            instance.__vrl_devtools.push(linkContextDevtools);\n            watchEffect(() => {\n                linkContextDevtools.route = route.value;\n                linkContextDevtools.isActive = isActive.value;\n                linkContextDevtools.isExactActive = isExactActive.value;\n                linkContextDevtools.error = isRouteLocation(unref(props.to))\n                    ? null\n                    : 'Invalid \"to\" value';\n            }, { flush: 'post' });\n        }\n    }\n    /**\n     * NOTE: update {@link _RouterLinkI}'s `$slots` type when updating this\n     */\n    return {\n        route,\n        href: computed(() => route.value.href),\n        isActive,\n        isExactActive,\n        navigate,\n    };\n}\nfunction preferSingleVNode(vnodes) {\n    return vnodes.length === 1 ? vnodes[0] : vnodes;\n}\nconst RouterLinkImpl = /*#__PURE__*/ defineComponent({\n    name: 'RouterLink',\n    compatConfig: { MODE: 3 },\n    props: {\n        to: {\n            type: [String, Object],\n            required: true,\n        },\n        replace: Boolean,\n        activeClass: String,\n        // inactiveClass: String,\n        exactActiveClass: String,\n        custom: Boolean,\n        ariaCurrentValue: {\n            type: String,\n            default: 'page',\n        },\n    },\n    useLink,\n    setup(props, { slots }) {\n        const link = reactive(useLink(props));\n        const { options } = inject(routerKey);\n        const elClass = computed(() => ({\n            [getLinkClass(props.activeClass, options.linkActiveClass, 'router-link-active')]: link.isActive,\n            // [getLinkClass(\n            //   props.inactiveClass,\n            //   options.linkInactiveClass,\n            //   'router-link-inactive'\n            // )]: !link.isExactActive,\n            [getLinkClass(props.exactActiveClass, options.linkExactActiveClass, 'router-link-exact-active')]: link.isExactActive,\n        }));\n        return () => {\n            const children = slots.default && preferSingleVNode(slots.default(link));\n            return props.custom\n                ? children\n                : h('a', {\n                    'aria-current': link.isExactActive\n                        ? props.ariaCurrentValue\n                        : null,\n                    href: link.href,\n                    // this would override user added attrs but Vue will still add\n                    // the listener, so we end up triggering both\n                    onClick: link.navigate,\n                    class: elClass.value,\n                }, children);\n        };\n    },\n});\n// export the public type for h/tsx inference\n// also to avoid inline import() in generated d.ts files\n/**\n * Component to render a link that triggers a navigation on click.\n */\nconst RouterLink = RouterLinkImpl;\nfunction guardEvent(e) {\n    // don't redirect with control keys\n    if (e.metaKey || e.altKey || e.ctrlKey || e.shiftKey)\n        return;\n    // don't redirect when preventDefault called\n    if (e.defaultPrevented)\n        return;\n    // don't redirect on right click\n    if (e.button !== undefined && e.button !== 0)\n        return;\n    // don't redirect if `target=\"_blank\"`\n    // @ts-expect-error getAttribute does exist\n    if (e.currentTarget && e.currentTarget.getAttribute) {\n        // @ts-expect-error getAttribute exists\n        const target = e.currentTarget.getAttribute('target');\n        if (/\\b_blank\\b/i.test(target))\n            return;\n    }\n    // this may be a Weex event which doesn't have this method\n    if (e.preventDefault)\n        e.preventDefault();\n    return true;\n}\nfunction includesParams(outer, inner) {\n    for (const key in inner) {\n        const innerValue = inner[key];\n        const outerValue = outer[key];\n        if (typeof innerValue === 'string') {\n            if (innerValue !== outerValue)\n                return false;\n        }\n        else {\n            if (!isArray(outerValue) ||\n                outerValue.length !== innerValue.length ||\n                innerValue.some((value, i) => value !== outerValue[i]))\n                return false;\n        }\n    }\n    return true;\n}\n/**\n * Get the original path value of a record by following its aliasOf\n * @param record\n */\nfunction getOriginalPath(record) {\n    return record ? (record.aliasOf ? record.aliasOf.path : record.path) : '';\n}\n/**\n * Utility class to get the active class based on defaults.\n * @param propClass\n * @param globalClass\n * @param defaultClass\n */\nconst getLinkClass = (propClass, globalClass, defaultClass) => propClass != null\n    ? propClass\n    : globalClass != null\n        ? globalClass\n        : defaultClass;\n\nconst RouterViewImpl = /*#__PURE__*/ defineComponent({\n    name: 'RouterView',\n    // #674 we manually inherit them\n    inheritAttrs: false,\n    props: {\n        name: {\n            type: String,\n            default: 'default',\n        },\n        route: Object,\n    },\n    // Better compat for @vue/compat users\n    // https://github.com/vuejs/router/issues/1315\n    compatConfig: { MODE: 3 },\n    setup(props, { attrs, slots }) {\n        (process.env.NODE_ENV !== 'production') && warnDeprecatedUsage();\n        const injectedRoute = inject(routerViewLocationKey);\n        const routeToDisplay = computed(() => props.route || injectedRoute.value);\n        const injectedDepth = inject(viewDepthKey, 0);\n        // The depth changes based on empty components option, which allows passthrough routes e.g. routes with children\n        // that are used to reuse the `path` property\n        const depth = computed(() => {\n            let initialDepth = unref(injectedDepth);\n            const { matched } = routeToDisplay.value;\n            let matchedRoute;\n            while ((matchedRoute = matched[initialDepth]) &&\n                !matchedRoute.components) {\n                initialDepth++;\n            }\n            return initialDepth;\n        });\n        const matchedRouteRef = computed(() => routeToDisplay.value.matched[depth.value]);\n        provide(viewDepthKey, computed(() => depth.value + 1));\n        provide(matchedRouteKey, matchedRouteRef);\n        provide(routerViewLocationKey, routeToDisplay);\n        const viewRef = ref();\n        // watch at the same time the component instance, the route record we are\n        // rendering, and the name\n        watch(() => [viewRef.value, matchedRouteRef.value, props.name], ([instance, to, name], [oldInstance, from, oldName]) => {\n            // copy reused instances\n            if (to) {\n                // this will update the instance for new instances as well as reused\n                // instances when navigating to a new route\n                to.instances[name] = instance;\n                // the component instance is reused for a different route or name, so\n                // we copy any saved update or leave guards. With async setup, the\n                // mounting component will mount before the matchedRoute changes,\n                // making instance === oldInstance, so we check if guards have been\n                // added before. This works because we remove guards when\n                // unmounting/deactivating components\n                if (from && from !== to && instance && instance === oldInstance) {\n                    if (!to.leaveGuards.size) {\n                        to.leaveGuards = from.leaveGuards;\n                    }\n                    if (!to.updateGuards.size) {\n                        to.updateGuards = from.updateGuards;\n                    }\n                }\n            }\n            // trigger beforeRouteEnter next callbacks\n            if (instance &&\n                to &&\n                // if there is no instance but to and from are the same this might be\n                // the first visit\n                (!from || !isSameRouteRecord(to, from) || !oldInstance)) {\n                (to.enterCallbacks[name] || []).forEach(callback => callback(instance));\n            }\n        }, { flush: 'post' });\n        return () => {\n            const route = routeToDisplay.value;\n            // we need the value at the time we render because when we unmount, we\n            // navigated to a different location so the value is different\n            const currentName = props.name;\n            const matchedRoute = matchedRouteRef.value;\n            const ViewComponent = matchedRoute && matchedRoute.components[currentName];\n            if (!ViewComponent) {\n                return normalizeSlot(slots.default, { Component: ViewComponent, route });\n            }\n            // props from route configuration\n            const routePropsOption = matchedRoute.props[currentName];\n            const routeProps = routePropsOption\n                ? routePropsOption === true\n                    ? route.params\n                    : typeof routePropsOption === 'function'\n                        ? routePropsOption(route)\n                        : routePropsOption\n                : null;\n            const onVnodeUnmounted = vnode => {\n                // remove the instance reference to prevent leak\n                if (vnode.component.isUnmounted) {\n                    matchedRoute.instances[currentName] = null;\n                }\n            };\n            const component = h(ViewComponent, assign({}, routeProps, attrs, {\n                onVnodeUnmounted,\n                ref: viewRef,\n            }));\n            if (((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) &&\n                isBrowser &&\n                component.ref) {\n                // TODO: can display if it's an alias, its props\n                const info = {\n                    depth: depth.value,\n                    name: matchedRoute.name,\n                    path: matchedRoute.path,\n                    meta: matchedRoute.meta,\n                };\n                const internalInstances = isArray(component.ref)\n                    ? component.ref.map(r => r.i)\n                    : [component.ref.i];\n                internalInstances.forEach(instance => {\n                    // @ts-expect-error\n                    instance.__vrv_devtools = info;\n                });\n            }\n            return (\n            // pass the vnode to the slot as a prop.\n            // h and <component :is=\"...\"> both accept vnodes\n            normalizeSlot(slots.default, { Component: component, route }) ||\n                component);\n        };\n    },\n});\nfunction normalizeSlot(slot, data) {\n    if (!slot)\n        return null;\n    const slotContent = slot(data);\n    return slotContent.length === 1 ? slotContent[0] : slotContent;\n}\n// export the public type for h/tsx inference\n// also to avoid inline import() in generated d.ts files\n/**\n * Component to display the current route the user is at.\n */\nconst RouterView = RouterViewImpl;\n// warn against deprecated usage with <transition> & <keep-alive>\n// due to functional component being no longer eager in Vue 3\nfunction warnDeprecatedUsage() {\n    const instance = getCurrentInstance();\n    const parentName = instance.parent && instance.parent.type.name;\n    const parentSubTreeType = instance.parent && instance.parent.subTree && instance.parent.subTree.type;\n    if (parentName &&\n        (parentName === 'KeepAlive' || parentName.includes('Transition')) &&\n        typeof parentSubTreeType === 'object' &&\n        parentSubTreeType.name === 'RouterView') {\n        const comp = parentName === 'KeepAlive' ? 'keep-alive' : 'transition';\n        warn(`<router-view> can no longer be used directly inside <transition> or <keep-alive>.\\n` +\n            `Use slot props instead:\\n\\n` +\n            `<router-view v-slot=\"{ Component }\">\\n` +\n            `  <${comp}>\\n` +\n            `    <component :is=\"Component\" />\\n` +\n            `  </${comp}>\\n` +\n            `</router-view>`);\n    }\n}\n\n/**\n * Copies a route location and removes any problematic properties that cannot be shown in devtools (e.g. Vue instances).\n *\n * @param routeLocation - routeLocation to format\n * @param tooltip - optional tooltip\n * @returns a copy of the routeLocation\n */\nfunction formatRouteLocation(routeLocation, tooltip) {\n    const copy = assign({}, routeLocation, {\n        // remove variables that can contain vue instances\n        matched: routeLocation.matched.map(matched => omit(matched, ['instances', 'children', 'aliasOf'])),\n    });\n    return {\n        _custom: {\n            type: null,\n            readOnly: true,\n            display: routeLocation.fullPath,\n            tooltip,\n            value: copy,\n        },\n    };\n}\nfunction formatDisplay(display) {\n    return {\n        _custom: {\n            display,\n        },\n    };\n}\n// to support multiple router instances\nlet routerId = 0;\nfunction addDevtools(app, router, matcher) {\n    // Take over router.beforeEach and afterEach\n    // make sure we are not registering the devtool twice\n    if (router.__hasDevtools)\n        return;\n    router.__hasDevtools = true;\n    // increment to support multiple router instances\n    const id = routerId++;\n    setupDevtoolsPlugin({\n        id: 'org.vuejs.router' + (id ? '.' + id : ''),\n        label: 'Vue Router',\n        packageName: 'vue-router',\n        homepage: 'https://router.vuejs.org',\n        logo: 'https://router.vuejs.org/logo.png',\n        componentStateTypes: ['Routing'],\n        app,\n    }, api => {\n        if (typeof api.now !== 'function') {\n            console.warn('[Vue Router]: You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');\n        }\n        // display state added by the router\n        api.on.inspectComponent((payload, ctx) => {\n            if (payload.instanceData) {\n                payload.instanceData.state.push({\n                    type: 'Routing',\n                    key: '$route',\n                    editable: false,\n                    value: formatRouteLocation(router.currentRoute.value, 'Current Route'),\n                });\n            }\n        });\n        // mark router-link as active and display tags on router views\n        api.on.visitComponentTree(({ treeNode: node, componentInstance }) => {\n            if (componentInstance.__vrv_devtools) {\n                const info = componentInstance.__vrv_devtools;\n                node.tags.push({\n                    label: (info.name ? `${info.name.toString()}: ` : '') + info.path,\n                    textColor: 0,\n                    tooltip: 'This component is rendered by &lt;router-view&gt;',\n                    backgroundColor: PINK_500,\n                });\n            }\n            // if multiple useLink are used\n            if (isArray(componentInstance.__vrl_devtools)) {\n                componentInstance.__devtoolsApi = api;\n                componentInstance.__vrl_devtools.forEach(devtoolsData => {\n                    let label = devtoolsData.route.path;\n                    let backgroundColor = ORANGE_400;\n                    let tooltip = '';\n                    let textColor = 0;\n                    if (devtoolsData.error) {\n                        label = devtoolsData.error;\n                        backgroundColor = RED_100;\n                        textColor = RED_700;\n                    }\n                    else if (devtoolsData.isExactActive) {\n                        backgroundColor = LIME_500;\n                        tooltip = 'This is exactly active';\n                    }\n                    else if (devtoolsData.isActive) {\n                        backgroundColor = BLUE_600;\n                        tooltip = 'This link is active';\n                    }\n                    node.tags.push({\n                        label,\n                        textColor,\n                        tooltip,\n                        backgroundColor,\n                    });\n                });\n            }\n        });\n        watch(router.currentRoute, () => {\n            // refresh active state\n            refreshRoutesView();\n            api.notifyComponentUpdate();\n            api.sendInspectorTree(routerInspectorId);\n            api.sendInspectorState(routerInspectorId);\n        });\n        const navigationsLayerId = 'router:navigations:' + id;\n        api.addTimelineLayer({\n            id: navigationsLayerId,\n            label: `Router${id ? ' ' + id : ''} Navigations`,\n            color: 0x40a8c4,\n        });\n        // const errorsLayerId = 'router:errors'\n        // api.addTimelineLayer({\n        //   id: errorsLayerId,\n        //   label: 'Router Errors',\n        //   color: 0xea5455,\n        // })\n        router.onError((error, to) => {\n            api.addTimelineEvent({\n                layerId: navigationsLayerId,\n                event: {\n                    title: 'Error during Navigation',\n                    subtitle: to.fullPath,\n                    logType: 'error',\n                    time: api.now(),\n                    data: { error },\n                    groupId: to.meta.__navigationId,\n                },\n            });\n        });\n        // attached to `meta` and used to group events\n        let navigationId = 0;\n        router.beforeEach((to, from) => {\n            const data = {\n                guard: formatDisplay('beforeEach'),\n                from: formatRouteLocation(from, 'Current Location during this navigation'),\n                to: formatRouteLocation(to, 'Target location'),\n            };\n            // Used to group navigations together, hide from devtools\n            Object.defineProperty(to.meta, '__navigationId', {\n                value: navigationId++,\n            });\n            api.addTimelineEvent({\n                layerId: navigationsLayerId,\n                event: {\n                    time: api.now(),\n                    title: 'Start of navigation',\n                    subtitle: to.fullPath,\n                    data,\n                    groupId: to.meta.__navigationId,\n                },\n            });\n        });\n        router.afterEach((to, from, failure) => {\n            const data = {\n                guard: formatDisplay('afterEach'),\n            };\n            if (failure) {\n                data.failure = {\n                    _custom: {\n                        type: Error,\n                        readOnly: true,\n                        display: failure ? failure.message : '',\n                        tooltip: 'Navigation Failure',\n                        value: failure,\n                    },\n                };\n                data.status = formatDisplay('❌');\n            }\n            else {\n                data.status = formatDisplay('✅');\n            }\n            // we set here to have the right order\n            data.from = formatRouteLocation(from, 'Current Location during this navigation');\n            data.to = formatRouteLocation(to, 'Target location');\n            api.addTimelineEvent({\n                layerId: navigationsLayerId,\n                event: {\n                    title: 'End of navigation',\n                    subtitle: to.fullPath,\n                    time: api.now(),\n                    data,\n                    logType: failure ? 'warning' : 'default',\n                    groupId: to.meta.__navigationId,\n                },\n            });\n        });\n        /**\n         * Inspector of Existing routes\n         */\n        const routerInspectorId = 'router-inspector:' + id;\n        api.addInspector({\n            id: routerInspectorId,\n            label: 'Routes' + (id ? ' ' + id : ''),\n            icon: 'book',\n            treeFilterPlaceholder: 'Search routes',\n        });\n        function refreshRoutesView() {\n            // the routes view isn't active\n            if (!activeRoutesPayload)\n                return;\n            const payload = activeRoutesPayload;\n            // children routes will appear as nested\n            let routes = matcher.getRoutes().filter(route => !route.parent ||\n                // these routes have a parent with no component which will not appear in the view\n                // therefore we still need to include them\n                !route.parent.record.components);\n            // reset match state to false\n            routes.forEach(resetMatchStateOnRouteRecord);\n            // apply a match state if there is a payload\n            if (payload.filter) {\n                routes = routes.filter(route => \n                // save matches state based on the payload\n                isRouteMatching(route, payload.filter.toLowerCase()));\n            }\n            // mark active routes\n            routes.forEach(route => markRouteRecordActive(route, router.currentRoute.value));\n            payload.rootNodes = routes.map(formatRouteRecordForInspector);\n        }\n        let activeRoutesPayload;\n        api.on.getInspectorTree(payload => {\n            activeRoutesPayload = payload;\n            if (payload.app === app && payload.inspectorId === routerInspectorId) {\n                refreshRoutesView();\n            }\n        });\n        /**\n         * Display information about the currently selected route record\n         */\n        api.on.getInspectorState(payload => {\n            if (payload.app === app && payload.inspectorId === routerInspectorId) {\n                const routes = matcher.getRoutes();\n                const route = routes.find(route => route.record.__vd_id === payload.nodeId);\n                if (route) {\n                    payload.state = {\n                        options: formatRouteRecordMatcherForStateInspector(route),\n                    };\n                }\n            }\n        });\n        api.sendInspectorTree(routerInspectorId);\n        api.sendInspectorState(routerInspectorId);\n    });\n}\nfunction modifierForKey(key) {\n    if (key.optional) {\n        return key.repeatable ? '*' : '?';\n    }\n    else {\n        return key.repeatable ? '+' : '';\n    }\n}\nfunction formatRouteRecordMatcherForStateInspector(route) {\n    const { record } = route;\n    const fields = [\n        { editable: false, key: 'path', value: record.path },\n    ];\n    if (record.name != null) {\n        fields.push({\n            editable: false,\n            key: 'name',\n            value: record.name,\n        });\n    }\n    fields.push({ editable: false, key: 'regexp', value: route.re });\n    if (route.keys.length) {\n        fields.push({\n            editable: false,\n            key: 'keys',\n            value: {\n                _custom: {\n                    type: null,\n                    readOnly: true,\n                    display: route.keys\n                        .map(key => `${key.name}${modifierForKey(key)}`)\n                        .join(' '),\n                    tooltip: 'Param keys',\n                    value: route.keys,\n                },\n            },\n        });\n    }\n    if (record.redirect != null) {\n        fields.push({\n            editable: false,\n            key: 'redirect',\n            value: record.redirect,\n        });\n    }\n    if (route.alias.length) {\n        fields.push({\n            editable: false,\n            key: 'aliases',\n            value: route.alias.map(alias => alias.record.path),\n        });\n    }\n    if (Object.keys(route.record.meta).length) {\n        fields.push({\n            editable: false,\n            key: 'meta',\n            value: route.record.meta,\n        });\n    }\n    fields.push({\n        key: 'score',\n        editable: false,\n        value: {\n            _custom: {\n                type: null,\n                readOnly: true,\n                display: route.score.map(score => score.join(', ')).join(' | '),\n                tooltip: 'Score used to sort routes',\n                value: route.score,\n            },\n        },\n    });\n    return fields;\n}\n/**\n * Extracted from tailwind palette\n */\nconst PINK_500 = 0xec4899;\nconst BLUE_600 = 0x2563eb;\nconst LIME_500 = 0x84cc16;\nconst CYAN_400 = 0x22d3ee;\nconst ORANGE_400 = 0xfb923c;\n// const GRAY_100 = 0xf4f4f5\nconst DARK = 0x666666;\nconst RED_100 = 0xfee2e2;\nconst RED_700 = 0xb91c1c;\nfunction formatRouteRecordForInspector(route) {\n    const tags = [];\n    const { record } = route;\n    if (record.name != null) {\n        tags.push({\n            label: String(record.name),\n            textColor: 0,\n            backgroundColor: CYAN_400,\n        });\n    }\n    if (record.aliasOf) {\n        tags.push({\n            label: 'alias',\n            textColor: 0,\n            backgroundColor: ORANGE_400,\n        });\n    }\n    if (route.__vd_match) {\n        tags.push({\n            label: 'matches',\n            textColor: 0,\n            backgroundColor: PINK_500,\n        });\n    }\n    if (route.__vd_exactActive) {\n        tags.push({\n            label: 'exact',\n            textColor: 0,\n            backgroundColor: LIME_500,\n        });\n    }\n    if (route.__vd_active) {\n        tags.push({\n            label: 'active',\n            textColor: 0,\n            backgroundColor: BLUE_600,\n        });\n    }\n    if (record.redirect) {\n        tags.push({\n            label: typeof record.redirect === 'string'\n                ? `redirect: ${record.redirect}`\n                : 'redirects',\n            textColor: 0xffffff,\n            backgroundColor: DARK,\n        });\n    }\n    // add an id to be able to select it. Using the `path` is not possible because\n    // empty path children would collide with their parents\n    let id = record.__vd_id;\n    if (id == null) {\n        id = String(routeRecordId++);\n        record.__vd_id = id;\n    }\n    return {\n        id,\n        label: record.path,\n        tags,\n        children: route.children.map(formatRouteRecordForInspector),\n    };\n}\n//  incremental id for route records and inspector state\nlet routeRecordId = 0;\nconst EXTRACT_REGEXP_RE = /^\\/(.*)\\/([a-z]*)$/;\nfunction markRouteRecordActive(route, currentRoute) {\n    // no route will be active if matched is empty\n    // reset the matching state\n    const isExactActive = currentRoute.matched.length &&\n        isSameRouteRecord(currentRoute.matched[currentRoute.matched.length - 1], route.record);\n    route.__vd_exactActive = route.__vd_active = isExactActive;\n    if (!isExactActive) {\n        route.__vd_active = currentRoute.matched.some(match => isSameRouteRecord(match, route.record));\n    }\n    route.children.forEach(childRoute => markRouteRecordActive(childRoute, currentRoute));\n}\nfunction resetMatchStateOnRouteRecord(route) {\n    route.__vd_match = false;\n    route.children.forEach(resetMatchStateOnRouteRecord);\n}\nfunction isRouteMatching(route, filter) {\n    const found = String(route.re).match(EXTRACT_REGEXP_RE);\n    route.__vd_match = false;\n    if (!found || found.length < 3) {\n        return false;\n    }\n    // use a regexp without $ at the end to match nested routes better\n    const nonEndingRE = new RegExp(found[1].replace(/\\$$/, ''), found[2]);\n    if (nonEndingRE.test(filter)) {\n        // mark children as matches\n        route.children.forEach(child => isRouteMatching(child, filter));\n        // exception case: `/`\n        if (route.record.path !== '/' || filter === '/') {\n            route.__vd_match = route.re.test(filter);\n            return true;\n        }\n        // hide the / route\n        return false;\n    }\n    const path = route.record.path.toLowerCase();\n    const decodedPath = decode(path);\n    // also allow partial matching on the path\n    if (!filter.startsWith('/') &&\n        (decodedPath.includes(filter) || path.includes(filter)))\n        return true;\n    if (decodedPath.startsWith(filter) || path.startsWith(filter))\n        return true;\n    if (route.record.name && String(route.record.name).includes(filter))\n        return true;\n    return route.children.some(child => isRouteMatching(child, filter));\n}\nfunction omit(obj, keys) {\n    const ret = {};\n    for (const key in obj) {\n        if (!keys.includes(key)) {\n            // @ts-expect-error\n            ret[key] = obj[key];\n        }\n    }\n    return ret;\n}\n\n/**\n * Creates a Router instance that can be used by a Vue app.\n *\n * @param options - {@link RouterOptions}\n */\nfunction createRouter(options) {\n    const matcher = createRouterMatcher(options.routes, options);\n    const parseQuery$1 = options.parseQuery || parseQuery;\n    const stringifyQuery$1 = options.stringifyQuery || stringifyQuery;\n    const routerHistory = options.history;\n    if ((process.env.NODE_ENV !== 'production') && !routerHistory)\n        throw new Error('Provide the \"history\" option when calling \"createRouter()\":' +\n            ' https://router.vuejs.org/api/interfaces/RouterOptions.html#history');\n    const beforeGuards = useCallbacks();\n    const beforeResolveGuards = useCallbacks();\n    const afterGuards = useCallbacks();\n    const currentRoute = shallowRef(START_LOCATION_NORMALIZED);\n    let pendingLocation = START_LOCATION_NORMALIZED;\n    // leave the scrollRestoration if no scrollBehavior is provided\n    if (isBrowser && options.scrollBehavior && 'scrollRestoration' in history) {\n        history.scrollRestoration = 'manual';\n    }\n    const normalizeParams = applyToParams.bind(null, paramValue => '' + paramValue);\n    const encodeParams = applyToParams.bind(null, encodeParam);\n    const decodeParams = \n    // @ts-expect-error: intentionally avoid the type check\n    applyToParams.bind(null, decode);\n    function addRoute(parentOrRoute, route) {\n        let parent;\n        let record;\n        if (isRouteName(parentOrRoute)) {\n            parent = matcher.getRecordMatcher(parentOrRoute);\n            if ((process.env.NODE_ENV !== 'production') && !parent) {\n                warn(`Parent route \"${String(parentOrRoute)}\" not found when adding child route`, route);\n            }\n            record = route;\n        }\n        else {\n            record = parentOrRoute;\n        }\n        return matcher.addRoute(record, parent);\n    }\n    function removeRoute(name) {\n        const recordMatcher = matcher.getRecordMatcher(name);\n        if (recordMatcher) {\n            matcher.removeRoute(recordMatcher);\n        }\n        else if ((process.env.NODE_ENV !== 'production')) {\n            warn(`Cannot remove non-existent route \"${String(name)}\"`);\n        }\n    }\n    function getRoutes() {\n        return matcher.getRoutes().map(routeMatcher => routeMatcher.record);\n    }\n    function hasRoute(name) {\n        return !!matcher.getRecordMatcher(name);\n    }\n    function resolve(rawLocation, currentLocation) {\n        // const resolve: Router['resolve'] = (rawLocation: RouteLocationRaw, currentLocation) => {\n        // const objectLocation = routerLocationAsObject(rawLocation)\n        // we create a copy to modify it later\n        currentLocation = assign({}, currentLocation || currentRoute.value);\n        if (typeof rawLocation === 'string') {\n            const locationNormalized = parseURL(parseQuery$1, rawLocation, currentLocation.path);\n            const matchedRoute = matcher.resolve({ path: locationNormalized.path }, currentLocation);\n            const href = routerHistory.createHref(locationNormalized.fullPath);\n            if ((process.env.NODE_ENV !== 'production')) {\n                if (href.startsWith('//'))\n                    warn(`Location \"${rawLocation}\" resolved to \"${href}\". A resolved location cannot start with multiple slashes.`);\n                else if (!matchedRoute.matched.length) {\n                    warn(`No match found for location with path \"${rawLocation}\"`);\n                }\n            }\n            // locationNormalized is always a new object\n            return assign(locationNormalized, matchedRoute, {\n                params: decodeParams(matchedRoute.params),\n                hash: decode(locationNormalized.hash),\n                redirectedFrom: undefined,\n                href,\n            });\n        }\n        if ((process.env.NODE_ENV !== 'production') && !isRouteLocation(rawLocation)) {\n            warn(`router.resolve() was passed an invalid location. This will fail in production.\\n- Location:`, rawLocation);\n            return resolve({});\n        }\n        let matcherLocation;\n        // path could be relative in object as well\n        if (rawLocation.path != null) {\n            if ((process.env.NODE_ENV !== 'production') &&\n                'params' in rawLocation &&\n                !('name' in rawLocation) &&\n                // @ts-expect-error: the type is never\n                Object.keys(rawLocation.params).length) {\n                warn(`Path \"${rawLocation.path}\" was passed with params but they will be ignored. Use a named route alongside params instead.`);\n            }\n            matcherLocation = assign({}, rawLocation, {\n                path: parseURL(parseQuery$1, rawLocation.path, currentLocation.path).path,\n            });\n        }\n        else {\n            // remove any nullish param\n            const targetParams = assign({}, rawLocation.params);\n            for (const key in targetParams) {\n                if (targetParams[key] == null) {\n                    delete targetParams[key];\n                }\n            }\n            // pass encoded values to the matcher, so it can produce encoded path and fullPath\n            matcherLocation = assign({}, rawLocation, {\n                params: encodeParams(targetParams),\n            });\n            // current location params are decoded, we need to encode them in case the\n            // matcher merges the params\n            currentLocation.params = encodeParams(currentLocation.params);\n        }\n        const matchedRoute = matcher.resolve(matcherLocation, currentLocation);\n        const hash = rawLocation.hash || '';\n        if ((process.env.NODE_ENV !== 'production') && hash && !hash.startsWith('#')) {\n            warn(`A \\`hash\\` should always start with the character \"#\". Replace \"${hash}\" with \"#${hash}\".`);\n        }\n        // the matcher might have merged current location params, so\n        // we need to run the decoding again\n        matchedRoute.params = normalizeParams(decodeParams(matchedRoute.params));\n        const fullPath = stringifyURL(stringifyQuery$1, assign({}, rawLocation, {\n            hash: encodeHash(hash),\n            path: matchedRoute.path,\n        }));\n        const href = routerHistory.createHref(fullPath);\n        if ((process.env.NODE_ENV !== 'production')) {\n            if (href.startsWith('//')) {\n                warn(`Location \"${rawLocation}\" resolved to \"${href}\". A resolved location cannot start with multiple slashes.`);\n            }\n            else if (!matchedRoute.matched.length) {\n                warn(`No match found for location with path \"${rawLocation.path != null ? rawLocation.path : rawLocation}\"`);\n            }\n        }\n        return assign({\n            fullPath,\n            // keep the hash encoded so fullPath is effectively path + encodedQuery +\n            // hash\n            hash,\n            query: \n            // if the user is using a custom query lib like qs, we might have\n            // nested objects, so we keep the query as is, meaning it can contain\n            // numbers at `$route.query`, but at the point, the user will have to\n            // use their own type anyway.\n            // https://github.com/vuejs/router/issues/328#issuecomment-649481567\n            stringifyQuery$1 === stringifyQuery\n                ? normalizeQuery(rawLocation.query)\n                : (rawLocation.query || {}),\n        }, matchedRoute, {\n            redirectedFrom: undefined,\n            href,\n        });\n    }\n    function locationAsObject(to) {\n        return typeof to === 'string'\n            ? parseURL(parseQuery$1, to, currentRoute.value.path)\n            : assign({}, to);\n    }\n    function checkCanceledNavigation(to, from) {\n        if (pendingLocation !== to) {\n            return createRouterError(8 /* ErrorTypes.NAVIGATION_CANCELLED */, {\n                from,\n                to,\n            });\n        }\n    }\n    function push(to) {\n        return pushWithRedirect(to);\n    }\n    function replace(to) {\n        return push(assign(locationAsObject(to), { replace: true }));\n    }\n    function handleRedirectRecord(to) {\n        const lastMatched = to.matched[to.matched.length - 1];\n        if (lastMatched && lastMatched.redirect) {\n            const { redirect } = lastMatched;\n            let newTargetLocation = typeof redirect === 'function' ? redirect(to) : redirect;\n            if (typeof newTargetLocation === 'string') {\n                newTargetLocation =\n                    newTargetLocation.includes('?') || newTargetLocation.includes('#')\n                        ? (newTargetLocation = locationAsObject(newTargetLocation))\n                        : // force empty params\n                            { path: newTargetLocation };\n                // @ts-expect-error: force empty params when a string is passed to let\n                // the router parse them again\n                newTargetLocation.params = {};\n            }\n            if ((process.env.NODE_ENV !== 'production') &&\n                newTargetLocation.path == null &&\n                !('name' in newTargetLocation)) {\n                warn(`Invalid redirect found:\\n${JSON.stringify(newTargetLocation, null, 2)}\\n when navigating to \"${to.fullPath}\". A redirect must contain a name or path. This will break in production.`);\n                throw new Error('Invalid redirect');\n            }\n            return assign({\n                query: to.query,\n                hash: to.hash,\n                // avoid transferring params if the redirect has a path\n                params: newTargetLocation.path != null ? {} : to.params,\n            }, newTargetLocation);\n        }\n    }\n    function pushWithRedirect(to, redirectedFrom) {\n        const targetLocation = (pendingLocation = resolve(to));\n        const from = currentRoute.value;\n        const data = to.state;\n        const force = to.force;\n        // to could be a string where `replace` is a function\n        const replace = to.replace === true;\n        const shouldRedirect = handleRedirectRecord(targetLocation);\n        if (shouldRedirect)\n            return pushWithRedirect(assign(locationAsObject(shouldRedirect), {\n                state: typeof shouldRedirect === 'object'\n                    ? assign({}, data, shouldRedirect.state)\n                    : data,\n                force,\n                replace,\n            }), \n            // keep original redirectedFrom if it exists\n            redirectedFrom || targetLocation);\n        // if it was a redirect we already called `pushWithRedirect` above\n        const toLocation = targetLocation;\n        toLocation.redirectedFrom = redirectedFrom;\n        let failure;\n        if (!force && isSameRouteLocation(stringifyQuery$1, from, targetLocation)) {\n            failure = createRouterError(16 /* ErrorTypes.NAVIGATION_DUPLICATED */, { to: toLocation, from });\n            // trigger scroll to allow scrolling to the same anchor\n            handleScroll(from, from, \n            // this is a push, the only way for it to be triggered from a\n            // history.listen is with a redirect, which makes it become a push\n            true, \n            // This cannot be the first navigation because the initial location\n            // cannot be manually navigated to\n            false);\n        }\n        return (failure ? Promise.resolve(failure) : navigate(toLocation, from))\n            .catch((error) => isNavigationFailure(error)\n            ? // navigation redirects still mark the router as ready\n                isNavigationFailure(error, 2 /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */)\n                    ? error\n                    : markAsReady(error) // also returns the error\n            : // reject any unknown error\n                triggerError(error, toLocation, from))\n            .then((failure) => {\n            if (failure) {\n                if (isNavigationFailure(failure, 2 /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */)) {\n                    if ((process.env.NODE_ENV !== 'production') &&\n                        // we are redirecting to the same location we were already at\n                        isSameRouteLocation(stringifyQuery$1, resolve(failure.to), toLocation) &&\n                        // and we have done it a couple of times\n                        redirectedFrom &&\n                        // @ts-expect-error: added only in dev\n                        (redirectedFrom._count = redirectedFrom._count\n                            ? // @ts-expect-error\n                                redirectedFrom._count + 1\n                            : 1) > 30) {\n                        warn(`Detected a possibly infinite redirection in a navigation guard when going from \"${from.fullPath}\" to \"${toLocation.fullPath}\". Aborting to avoid a Stack Overflow.\\n Are you always returning a new location within a navigation guard? That would lead to this error. Only return when redirecting or aborting, that should fix this. This might break in production if not fixed.`);\n                        return Promise.reject(new Error('Infinite redirect in navigation guard'));\n                    }\n                    return pushWithRedirect(\n                    // keep options\n                    assign({\n                        // preserve an existing replacement but allow the redirect to override it\n                        replace,\n                    }, locationAsObject(failure.to), {\n                        state: typeof failure.to === 'object'\n                            ? assign({}, data, failure.to.state)\n                            : data,\n                        force,\n                    }), \n                    // preserve the original redirectedFrom if any\n                    redirectedFrom || toLocation);\n                }\n            }\n            else {\n                // if we fail we don't finalize the navigation\n                failure = finalizeNavigation(toLocation, from, true, replace, data);\n            }\n            triggerAfterEach(toLocation, from, failure);\n            return failure;\n        });\n    }\n    /**\n     * Helper to reject and skip all navigation guards if a new navigation happened\n     * @param to\n     * @param from\n     */\n    function checkCanceledNavigationAndReject(to, from) {\n        const error = checkCanceledNavigation(to, from);\n        return error ? Promise.reject(error) : Promise.resolve();\n    }\n    function runWithContext(fn) {\n        const app = installedApps.values().next().value;\n        // support Vue < 3.3\n        return app && typeof app.runWithContext === 'function'\n            ? app.runWithContext(fn)\n            : fn();\n    }\n    // TODO: refactor the whole before guards by internally using router.beforeEach\n    function navigate(to, from) {\n        let guards;\n        const [leavingRecords, updatingRecords, enteringRecords] = extractChangingRecords(to, from);\n        // all components here have been resolved once because we are leaving\n        guards = extractComponentsGuards(leavingRecords.reverse(), 'beforeRouteLeave', to, from);\n        // leavingRecords is already reversed\n        for (const record of leavingRecords) {\n            record.leaveGuards.forEach(guard => {\n                guards.push(guardToPromiseFn(guard, to, from));\n            });\n        }\n        const canceledNavigationCheck = checkCanceledNavigationAndReject.bind(null, to, from);\n        guards.push(canceledNavigationCheck);\n        // run the queue of per route beforeRouteLeave guards\n        return (runGuardQueue(guards)\n            .then(() => {\n            // check global guards beforeEach\n            guards = [];\n            for (const guard of beforeGuards.list()) {\n                guards.push(guardToPromiseFn(guard, to, from));\n            }\n            guards.push(canceledNavigationCheck);\n            return runGuardQueue(guards);\n        })\n            .then(() => {\n            // check in components beforeRouteUpdate\n            guards = extractComponentsGuards(updatingRecords, 'beforeRouteUpdate', to, from);\n            for (const record of updatingRecords) {\n                record.updateGuards.forEach(guard => {\n                    guards.push(guardToPromiseFn(guard, to, from));\n                });\n            }\n            guards.push(canceledNavigationCheck);\n            // run the queue of per route beforeEnter guards\n            return runGuardQueue(guards);\n        })\n            .then(() => {\n            // check the route beforeEnter\n            guards = [];\n            for (const record of enteringRecords) {\n                // do not trigger beforeEnter on reused views\n                if (record.beforeEnter) {\n                    if (isArray(record.beforeEnter)) {\n                        for (const beforeEnter of record.beforeEnter)\n                            guards.push(guardToPromiseFn(beforeEnter, to, from));\n                    }\n                    else {\n                        guards.push(guardToPromiseFn(record.beforeEnter, to, from));\n                    }\n                }\n            }\n            guards.push(canceledNavigationCheck);\n            // run the queue of per route beforeEnter guards\n            return runGuardQueue(guards);\n        })\n            .then(() => {\n            // NOTE: at this point to.matched is normalized and does not contain any () => Promise<Component>\n            // clear existing enterCallbacks, these are added by extractComponentsGuards\n            to.matched.forEach(record => (record.enterCallbacks = {}));\n            // check in-component beforeRouteEnter\n            guards = extractComponentsGuards(enteringRecords, 'beforeRouteEnter', to, from, runWithContext);\n            guards.push(canceledNavigationCheck);\n            // run the queue of per route beforeEnter guards\n            return runGuardQueue(guards);\n        })\n            .then(() => {\n            // check global guards beforeResolve\n            guards = [];\n            for (const guard of beforeResolveGuards.list()) {\n                guards.push(guardToPromiseFn(guard, to, from));\n            }\n            guards.push(canceledNavigationCheck);\n            return runGuardQueue(guards);\n        })\n            // catch any navigation canceled\n            .catch(err => isNavigationFailure(err, 8 /* ErrorTypes.NAVIGATION_CANCELLED */)\n            ? err\n            : Promise.reject(err)));\n    }\n    function triggerAfterEach(to, from, failure) {\n        // navigation is confirmed, call afterGuards\n        // TODO: wrap with error handlers\n        afterGuards\n            .list()\n            .forEach(guard => runWithContext(() => guard(to, from, failure)));\n    }\n    /**\n     * - Cleans up any navigation guards\n     * - Changes the url if necessary\n     * - Calls the scrollBehavior\n     */\n    function finalizeNavigation(toLocation, from, isPush, replace, data) {\n        // a more recent navigation took place\n        const error = checkCanceledNavigation(toLocation, from);\n        if (error)\n            return error;\n        // only consider as push if it's not the first navigation\n        const isFirstNavigation = from === START_LOCATION_NORMALIZED;\n        const state = !isBrowser ? {} : history.state;\n        // change URL only if the user did a push/replace and if it's not the initial navigation because\n        // it's just reflecting the url\n        if (isPush) {\n            // on the initial navigation, we want to reuse the scroll position from\n            // history state if it exists\n            if (replace || isFirstNavigation)\n                routerHistory.replace(toLocation.fullPath, assign({\n                    scroll: isFirstNavigation && state && state.scroll,\n                }, data));\n            else\n                routerHistory.push(toLocation.fullPath, data);\n        }\n        // accept current navigation\n        currentRoute.value = toLocation;\n        handleScroll(toLocation, from, isPush, isFirstNavigation);\n        markAsReady();\n    }\n    let removeHistoryListener;\n    // attach listener to history to trigger navigations\n    function setupListeners() {\n        // avoid setting up listeners twice due to an invalid first navigation\n        if (removeHistoryListener)\n            return;\n        removeHistoryListener = routerHistory.listen((to, _from, info) => {\n            if (!router.listening)\n                return;\n            // cannot be a redirect route because it was in history\n            const toLocation = resolve(to);\n            // due to dynamic routing, and to hash history with manual navigation\n            // (manually changing the url or calling history.hash = '#/somewhere'),\n            // there could be a redirect record in history\n            const shouldRedirect = handleRedirectRecord(toLocation);\n            if (shouldRedirect) {\n                pushWithRedirect(assign(shouldRedirect, { replace: true, force: true }), toLocation).catch(noop);\n                return;\n            }\n            pendingLocation = toLocation;\n            const from = currentRoute.value;\n            // TODO: should be moved to web history?\n            if (isBrowser) {\n                saveScrollPosition(getScrollKey(from.fullPath, info.delta), computeScrollPosition());\n            }\n            navigate(toLocation, from)\n                .catch((error) => {\n                if (isNavigationFailure(error, 4 /* ErrorTypes.NAVIGATION_ABORTED */ | 8 /* ErrorTypes.NAVIGATION_CANCELLED */)) {\n                    return error;\n                }\n                if (isNavigationFailure(error, 2 /* ErrorTypes.NAVIGATION_GUARD_REDIRECT */)) {\n                    // Here we could call if (info.delta) routerHistory.go(-info.delta,\n                    // false) but this is bug prone as we have no way to wait the\n                    // navigation to be finished before calling pushWithRedirect. Using\n                    // a setTimeout of 16ms seems to work but there is no guarantee for\n                    // it to work on every browser. So instead we do not restore the\n                    // history entry and trigger a new navigation as requested by the\n                    // navigation guard.\n                    // the error is already handled by router.push we just want to avoid\n                    // logging the error\n                    pushWithRedirect(assign(locationAsObject(error.to), {\n                        force: true,\n                    }), toLocation\n                    // avoid an uncaught rejection, let push call triggerError\n                    )\n                        .then(failure => {\n                        // manual change in hash history #916 ending up in the URL not\n                        // changing, but it was changed by the manual url change, so we\n                        // need to manually change it ourselves\n                        if (isNavigationFailure(failure, 4 /* ErrorTypes.NAVIGATION_ABORTED */ |\n                            16 /* ErrorTypes.NAVIGATION_DUPLICATED */) &&\n                            !info.delta &&\n                            info.type === NavigationType.pop) {\n                            routerHistory.go(-1, false);\n                        }\n                    })\n                        .catch(noop);\n                    // avoid the then branch\n                    return Promise.reject();\n                }\n                // do not restore history on unknown direction\n                if (info.delta) {\n                    routerHistory.go(-info.delta, false);\n                }\n                // unrecognized error, transfer to the global handler\n                return triggerError(error, toLocation, from);\n            })\n                .then((failure) => {\n                failure =\n                    failure ||\n                        finalizeNavigation(\n                        // after navigation, all matched components are resolved\n                        toLocation, from, false);\n                // revert the navigation\n                if (failure) {\n                    if (info.delta &&\n                        // a new navigation has been triggered, so we do not want to revert, that will change the current history\n                        // entry while a different route is displayed\n                        !isNavigationFailure(failure, 8 /* ErrorTypes.NAVIGATION_CANCELLED */)) {\n                        routerHistory.go(-info.delta, false);\n                    }\n                    else if (info.type === NavigationType.pop &&\n                        isNavigationFailure(failure, 4 /* ErrorTypes.NAVIGATION_ABORTED */ | 16 /* ErrorTypes.NAVIGATION_DUPLICATED */)) {\n                        // manual change in hash history #916\n                        // it's like a push but lacks the information of the direction\n                        routerHistory.go(-1, false);\n                    }\n                }\n                triggerAfterEach(toLocation, from, failure);\n            })\n                // avoid warnings in the console about uncaught rejections, they are logged by triggerErrors\n                .catch(noop);\n        });\n    }\n    // Initialization and Errors\n    let readyHandlers = useCallbacks();\n    let errorListeners = useCallbacks();\n    let ready;\n    /**\n     * Trigger errorListeners added via onError and throws the error as well\n     *\n     * @param error - error to throw\n     * @param to - location we were navigating to when the error happened\n     * @param from - location we were navigating from when the error happened\n     * @returns the error as a rejected promise\n     */\n    function triggerError(error, to, from) {\n        markAsReady(error);\n        const list = errorListeners.list();\n        if (list.length) {\n            list.forEach(handler => handler(error, to, from));\n        }\n        else {\n            if ((process.env.NODE_ENV !== 'production')) {\n                warn('uncaught error during route navigation:');\n            }\n            console.error(error);\n        }\n        // reject the error no matter there were error listeners or not\n        return Promise.reject(error);\n    }\n    function isReady() {\n        if (ready && currentRoute.value !== START_LOCATION_NORMALIZED)\n            return Promise.resolve();\n        return new Promise((resolve, reject) => {\n            readyHandlers.add([resolve, reject]);\n        });\n    }\n    function markAsReady(err) {\n        if (!ready) {\n            // still not ready if an error happened\n            ready = !err;\n            setupListeners();\n            readyHandlers\n                .list()\n                .forEach(([resolve, reject]) => (err ? reject(err) : resolve()));\n            readyHandlers.reset();\n        }\n        return err;\n    }\n    // Scroll behavior\n    function handleScroll(to, from, isPush, isFirstNavigation) {\n        const { scrollBehavior } = options;\n        if (!isBrowser || !scrollBehavior)\n            return Promise.resolve();\n        const scrollPosition = (!isPush && getSavedScrollPosition(getScrollKey(to.fullPath, 0))) ||\n            ((isFirstNavigation || !isPush) &&\n                history.state &&\n                history.state.scroll) ||\n            null;\n        return nextTick()\n            .then(() => scrollBehavior(to, from, scrollPosition))\n            .then(position => position && scrollToPosition(position))\n            .catch(err => triggerError(err, to, from));\n    }\n    const go = (delta) => routerHistory.go(delta);\n    let started;\n    const installedApps = new Set();\n    const router = {\n        currentRoute,\n        listening: true,\n        addRoute,\n        removeRoute,\n        clearRoutes: matcher.clearRoutes,\n        hasRoute,\n        getRoutes,\n        resolve,\n        options,\n        push,\n        replace,\n        go,\n        back: () => go(-1),\n        forward: () => go(1),\n        beforeEach: beforeGuards.add,\n        beforeResolve: beforeResolveGuards.add,\n        afterEach: afterGuards.add,\n        onError: errorListeners.add,\n        isReady,\n        install(app) {\n            const router = this;\n            app.component('RouterLink', RouterLink);\n            app.component('RouterView', RouterView);\n            app.config.globalProperties.$router = router;\n            Object.defineProperty(app.config.globalProperties, '$route', {\n                enumerable: true,\n                get: () => unref(currentRoute),\n            });\n            // this initial navigation is only necessary on client, on server it doesn't\n            // make sense because it will create an extra unnecessary navigation and could\n            // lead to problems\n            if (isBrowser &&\n                // used for the initial navigation client side to avoid pushing\n                // multiple times when the router is used in multiple apps\n                !started &&\n                currentRoute.value === START_LOCATION_NORMALIZED) {\n                // see above\n                started = true;\n                push(routerHistory.location).catch(err => {\n                    if ((process.env.NODE_ENV !== 'production'))\n                        warn('Unexpected error when starting the router:', err);\n                });\n            }\n            const reactiveRoute = {};\n            for (const key in START_LOCATION_NORMALIZED) {\n                Object.defineProperty(reactiveRoute, key, {\n                    get: () => currentRoute.value[key],\n                    enumerable: true,\n                });\n            }\n            app.provide(routerKey, router);\n            app.provide(routeLocationKey, shallowReactive(reactiveRoute));\n            app.provide(routerViewLocationKey, currentRoute);\n            const unmountApp = app.unmount;\n            installedApps.add(app);\n            app.unmount = function () {\n                installedApps.delete(app);\n                // the router is not attached to an app anymore\n                if (installedApps.size < 1) {\n                    // invalidate the current navigation\n                    pendingLocation = START_LOCATION_NORMALIZED;\n                    removeHistoryListener && removeHistoryListener();\n                    removeHistoryListener = null;\n                    currentRoute.value = START_LOCATION_NORMALIZED;\n                    started = false;\n                    ready = false;\n                }\n                unmountApp();\n            };\n            // TODO: this probably needs to be updated so it can be used by vue-termui\n            if (((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) && isBrowser) {\n                addDevtools(app, router, matcher);\n            }\n        },\n    };\n    // TODO: type this as NavigationGuardReturn or similar instead of any\n    function runGuardQueue(guards) {\n        return guards.reduce((promise, guard) => promise.then(() => runWithContext(guard)), Promise.resolve());\n    }\n    return router;\n}\nfunction extractChangingRecords(to, from) {\n    const leavingRecords = [];\n    const updatingRecords = [];\n    const enteringRecords = [];\n    const len = Math.max(from.matched.length, to.matched.length);\n    for (let i = 0; i < len; i++) {\n        const recordFrom = from.matched[i];\n        if (recordFrom) {\n            if (to.matched.find(record => isSameRouteRecord(record, recordFrom)))\n                updatingRecords.push(recordFrom);\n            else\n                leavingRecords.push(recordFrom);\n        }\n        const recordTo = to.matched[i];\n        if (recordTo) {\n            // the type doesn't matter because we are comparing per reference\n            if (!from.matched.find(record => isSameRouteRecord(record, recordTo))) {\n                enteringRecords.push(recordTo);\n            }\n        }\n    }\n    return [leavingRecords, updatingRecords, enteringRecords];\n}\n\n/**\n * Returns the router instance. Equivalent to using `$router` inside\n * templates.\n */\nfunction useRouter() {\n    return inject(routerKey);\n}\n/**\n * Returns the current route location. Equivalent to using `$route` inside\n * templates.\n */\nfunction useRoute(_name) {\n    return inject(routeLocationKey);\n}\n\nexport { NavigationFailureType, RouterLink, RouterView, START_LOCATION_NORMALIZED as START_LOCATION, createMemoryHistory, createRouter, createRouterMatcher, createWebHashHistory, createWebHistory, isNavigationFailure, loadRouteLocation, matchedRouteKey, onBeforeRouteLeave, onBeforeRouteUpdate, parseQuery, routeLocationKey, routerKey, routerViewLocationKey, stringifyQuery, useLink, useRoute, useRouter, viewDepthKey };\n"],"names":["defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","length","i","defaultMemoize","func","arguments","undefined","lastArgs","lastResult","apply","getDependencies","funcs","dependencies","Array","isArray","every","dep","dependencyTypes","map","join","Error","createSelectorCreator","memoize","_len","memoizeOptions","_key","_len2","_key2","recomputations","resultFunc","pop","memoizedResultFunc","concat","selector","params","push","resetRecomputations","createSelector","getRandomValues","rnds8","Uint8Array","rng","crypto","bind","msCrypto","validate","uuid","REGEX","test","byteToHex","toString","substr","stringify","arr","offset","toLowerCase","TypeError","v4","options","buf","rnds","random","logDisabled_","deprecationWarnings_","extractVersion","uastring","expr","pos","match","parseInt","wrapPeerConnectionEvent","window","eventNameToWrap","wrapper","RTCPeerConnection","proto","prototype","nativeAddEventListener","addEventListener","nativeEventName","cb","this","wrappedCallback","e","modifiedEvent","handleEvent","_eventMap","Map","set","nativeRemoveEventListener","removeEventListener","has","unwrappedCb","get","delete","size","Object","keys","defineProperty","enumerable","configurable","disableLog","bool","disableWarnings","log","console","deprecated","oldMethod","newMethod","warn","detectBrowser","result","browser","version","navigator","userAgent","mozGetUserMedia","webkitGetUserMedia","isSecureContext","webkitRTCPeerConnection","supportsUnifiedPlan","RTCRtpTransceiver","isObject","val","call","compactObject","data","reduce","accumulator","key","isObj","value","isEmptyObject","assign","walkStats","stats","base","resultSet","id","forEach","name","endsWith","filterStats","track","outbound","streamStatsType","filteredResult","trackStats","type","trackIdentifier","trackStat","trackId","logging","utils","shimGetUserMedia","browserDetails","mediaDevices","constraintsToChrome_","c","mandatory","optional","cc","r","ideal","exact","min","max","oldname_","prefix","charAt","toUpperCase","slice","oc","mix","advanced","shimConstraints_","constraints","JSON","parse","audio","remap","obj","video","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","then","devices","filter","d","kind","dev","find","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","message","constraint","constraintName","getUserMedia_","onSuccess","onError","getUserMedia","origGetUserMedia","cs","stream","getAudioTracks","getVideoTracks","getTracks","stop","DOMException","Promise","reject","shimGetDisplayMedia","getSourceId","getDisplayMedia","sourceId","widthSpecified","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","error","shimMediaStream","MediaStream","webkitMediaStream","shimOnTrack","_ontrack","f","origSetRemoteDescription","setRemoteDescription","_ontrackpoly","te","receiver","getReceivers","event","Event","transceiver","streams","dispatchEvent","shimGetSendersWithDtmf","shimSenderWithDtmf","pc","dtmf","_dtmf","createDTMFSender","_pc","getSenders","_senders","origAddTrack","addTrack","sender","origRemoveTrack","removeTrack","idx","indexOf","splice","origAddStream","addStream","origRemoveStream","removeStream","s","RTCRtpSender","origGetSenders","senders","shimGetStats","origGetStats","getStats","onSucc","onErr","fixChromeStats_","response","standardReport","reports","report","standardStats","timestamp","localcandidate","remotecandidate","names","stat","makeMapStats","successCallbackWrapper_","resolve","shimSenderReceiverGetStats","RTCRtpReceiver","origGetReceivers","receivers","srcElement","MediaStreamTrack","err","shimAddTrackRemoveTrackWithNative","getLocalStreams","_shimmedLocalStreams","streamId","alreadyExists","existingSenders","newSenders","newSender","shimAddTrackRemoveTrack","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","replaceInternalStreamId","description","sdp","internalId","externalStream","internalStream","replace","RegExp","RTCSessionDescription","replaceExternalStreamId","signalingState","t","oldStream","method","nativeMethod","methodObj","args","isLegacyCall","desc","origSetLocalDescription","setLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","shimPeerConnection","RTCIceCandidate","fixNegotiationNeeded","target","getConfiguration","sdpSemantics","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","preferredMediaSource","code","mediaSource","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","inboundrtp","outboundrtp","candidatepair","nativeGetStats","shimSenderGetStats","shimReceiverGetStats","shimRemoveStream","shimRTCDataChannel","DataChannel","RTCDataChannel","shimAddTransceiver","origAddTransceiver","addTransceiver","setParametersPromises","sendEncodings","shouldPerformCheck","encodingParam","ridRegex","rid","parseFloat","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","encodings","setParameters","catch","shimGetParameters","origGetParameters","shimCreateOffer","origCreateOffer","createOffer","all","finally","shimCreateAnswer","origCreateAnswer","createAnswer","shimLocalStreamsAPI","_localStreams","_addTrack","index","tracks","shimRemoteStreamsAPI","getRemoteStreams","_remoteStreams","_onaddstream","_onaddstreampoly","shimCallbacksAPI","addIceCandidate","successCallback","failureCallback","promise","withCallback","candidate","_getUserMedia","shimConstraints","errcb","shimRTCIceServerUrls","OrigPeerConnection","pcConfig","pcConstraints","iceServers","newIceServers","server","urls","url","generateCertificate","shimTrackEventTransceiver","shimCreateOfferLegacy","offerOptions","offerToReceiveAudio","audioTransceiver","getTransceivers","direction","setDirection","offerToReceiveVideo","videoTransceiver","shimAudioContext","AudioContext","webkitAudioContext","shimRTCIceCandidate","NativeRTCIceCandidate","substring","nativeCandidate","parsedCandidate","SDPUtils","toJSON","sdpMid","sdpMLineIndex","usernameFragment","writable","shimRTCIceCandidateRelayProtocol","relayProtocol","priority","shimMaxMessageSize","_sctp","sctpInDescription","sections","shift","mediaSection","mLine","protocol","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","maxMessageSize","isFirefox","canSendMMS","remoteMMS","Number","POSITIVE_INFINITY","Math","sctp","shimSendThrowTypeError","wrapDcSend","dc","origDataChannelSend","send","byteLength","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","shimConnectionState","completed","checking","iceConnectionState","_onconnectionstatechange","origMethod","_connectionstatechangepoly","_lastConnectionState","connectionState","newEvent","removeExtmapAllowMixed","nativeSRD","split","line","trim","shimAddIceCandidateNullOrEmpty","nativeAddIceCandidate","shimParameterlessSetLocalDescription","nativeSetLocalDescription","adapterFactory","shimChrome","shimFirefox","shimSafari","adapter","commonShim","chromeShim","browserShim","firefoxShim","safariShim","n","Q","getPrototypeOf","hasOwnProperty","constructor","Function","Z","L","v","o","nn","u","add","X","q","Set","p","l","rn","create","y","clear","h","freeze","isFrozen","tn","_","U","j","g","O","S","w","m","P","M","x","H","A","I","k","N","R","D","z","E","F","T","C","en","on","Proxy","revocable","revoke","proxy","J","K","from","G","W","Symbol","B","Reflect","for","iterator","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","isNaN","deleteProperty","setPrototypeOf","un","produce","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","path","op","$","an","fn","shallow","objA","objB","is","keysA","createState","state","listeners","setState","partial","nextState","previousState","listener","getState","subscribeWithSelector","equalityFn","currentSlice","listenerToAdd","nextSlice","previousSlice","subscribe","destroy","api","Ir","mo","Jc","Eo","exports","license","repository","directory","main","module","typings","files","engines","node","require","import","default","sideEffects","scripts","prestart","start","build","types","format","lint","prepare","analyze","docs","author","eventemitter2","immer","reselect","zustand","devDependencies","tslib","keywords","gitHead","Er","Disconnected","Preview","Connecting","Connected","Reconnecting","Disconnecting","Failed","ni","createDefaultStoreState","room","isConnected","peers","localPeer","roomState","recording","running","hls","rtmp","variants","sessionId","playlist","list","selection","hasPrevious","hasNext","progress","volume","currentTime","playbackRate","messages","byID","allIDs","speakers","connectionQualities","settings","audioInputDeviceId","audioOutputDeviceId","videoInputDeviceId","audioInput","audioOutput","videoInput","roles","roleChangeRequests","errors","sessionStore","templateAppData","polls","whiteboards","hideLocalPeer","ci","createDefaultStatsStore","peerStats","remoteTrackStats","localTrackStats","So","CHAT","fs","INFO","ERROR","Pr","PEER_JOINED","PEER_LEFT","PEER_LIST","NEW_MESSAGE","RECONNECTING","RECONNECTED","TRACK_ADDED","TRACK_REMOVED","TRACK_MUTED","TRACK_UNMUTED","TRACK_DEGRADED","TRACK_RESTORED","TRACK_DESCRIPTION_CHANGED","ROLE_UPDATED","CHANGE_TRACK_STATE_REQUEST","CHANGE_MULTI_TRACK_STATE_REQUEST","ROOM_ENDED","REMOVED_FROM_ROOM","DEVICE_CHANGE_UPDATE","PLAYLIST_TRACK_ENDED","NAME_UPDATED","METADATA_UPDATED","POLL_CREATED","POLL_STARTED","POLL_STOPPED","POLL_VOTES_UPDATED","POLLS_LIST","HAND_RAISE_CHANGED","TRANSCRIPTION_STATE_UPDATED","vs","Fe","auxiliaryTracks","go","gt","Tt","source","di","ft","Ms","degraded","ze","enabled","ys","displayEnabled","vt","publishParams","allowed","screen","ks","VERBOSE","DEBUG","WARN","TIME","TIMEEND","NONE","To","expect","time","timeEnd","cleanup","performance","clearMarks","clearMeasures","level","valueOf","debug","info","mark","measure","duration","Es","Ps","bs","As","Is","Ye","nativeStream","updateId","Te","fo","Ge","getBrowser","vo","checkIsSupported","Mt","isMobile","getDevice","Rs","isPageHidden","document","hidden","Hs","isIOS","getOS","Cs","li","Ls","CUSTOM","LOCAL","HMS","Mo","location","hostname","Xe","WebSocketConnectionErrors","FAILED_TO_CONNECT","WEBSOCKET_CONNECTION_LOST","ABNORMAL_CLOSE","APIErrors","SERVER_ERRORS","INIT_CONFIG_NOT_AVAILABLE","ENDPOINT_UNREACHABLE","INVALID_TOKEN_FORMAT","TracksErrors","GENERIC_TRACK","CANT_ACCESS_CAPTURE_DEVICE","DEVICE_NOT_AVAILABLE","DEVICE_IN_USE","DEVICE_LOST_MIDWAY","NOTHING_TO_RETURN","INVALID_VIDEO_SETTINGS","CODEC_CHANGE_NOT_PERMITTED","AUTOPLAY_ERROR","OVER_CONSTRAINED","NO_AUDIO_DETECTED","SYSTEM_DENIED_PERMISSION","CURRENT_TAB_NOT_SHARED","AUDIO_PLAYBACK_ERROR","SELECTED_DEVICE_MISSING","NO_DATA","WebrtcErrors","CREATE_OFFER_FAILED","CREATE_ANSWER_FAILED","SET_LOCAL_DESCRIPTION_FAILED","SET_REMOTE_DESCRIPTION_FAILED","ICE_FAILURE","ICE_DISCONNECTED","STATS_FAILED","WebsocketMethodErrors","ALREADY_JOINED","CANNOT_JOIN_PREVIEW_IN_PROGRESS","GenericErrors","NOT_CONNECTED","SIGNALLING","UNKNOWN","NOT_READY","JSON_PARSING_FAILED","TRACK_METADATA_MISSING","RTC_TRACK_MISSING","PEER_METADATA_MISSING","INVALID_ROLE","PREVIEW_IN_PROGRESS","MISSING_MEDIADEVICES","MISSING_RTCPEERCONNECTION","LOCAL_STORAGE_ACCESS_DENIED","VALIDATION_FAILED","PlaylistErrors","NO_ENTRY_TO_PLAY","NO_ENTRY_IS_PLAYING","super","isTerminal","action","toAnalyticsProperties","error_name","error_code","error_message","error_description","is_terminal","addNativeError","nativeError","trackType","track_type","Ds","AUDIO","VIDEO","AUDIO_VIDEO","SCREEN","br","yo","FailedToConnect","WebSocketConnectionLost","AbnormalClose","ServerErrors","EndpointUnreachable","InvalidTokenFormat","InitConfigNotAvailable","GenericTrack","CantAccessCaptureDevice","DeviceNotAvailable","DeviceInUse","DeviceLostMidway","NothingToReturn","InvalidVideoSettings","AutoplayBlocked","CodecChangeNotPermitted","OverConstrained","NoAudioDetected","SystemDeniedPermission","CurrentTabNotShared","AudioPlaybackError","SelectedDeviceMissing","NoDataInTrack","CreateOfferFailed","CreateAnswerFailed","SetLocalDescriptionFailed","SetRemoteDescriptionFailed","ICEFailure","ICEDisconnected","StatsFailed","AlreadyJoined","CannotJoinPreviewInProgress","NotConnected","Signalling","Unknown","NotReady","JsonParsingFailed","TrackMetadataMissing","RTCTrackMissing","PeerMetadataMissing","ValidationFailed","InvalidRole","PreviewAlreadyInProgress","LocalStorageAccessDenied","MissingMediaDevices","MissingRTCPeerConnection","MediaPluginErrors","PlatformNotSupported","InitFailed","ProcessingFailed","AddAlreadyInProgress","DeviceNotSupported","NoEntryToPlay","NoEntryPlaying","Ar","valuesMap","getItem","String","setItem","removeItem","ws","initializeLocalstoragePolyfill","localStorage","fe","storage","getStorage","ui","getAnalyticsDeviceId","ko","_s","he","yt","validateRTCPeerConnection","kt","validateMediaDevicesExistence","Ns","getPublishParams","Os","Et","xs","os","os_version","process","sdk","sdk_version","env","domain","is_prebuilt","isPrebuilt","framework","framework_version","framework_sdk_version","sdkVersion","Rr","vendor","device_model","convertObjectToString","properties","includesPII","metadata","peer","Date","getTime","event_id","Po","device_id","toSignalParams","connect","eventNameFor","getPropertiesWithError","KEY_REQUESTED_AT","KEY_RESPONDED_AT","endpoint","disconnect","preview","kr","is_preview_called","publish","hlsPlayerError","getErrorProperties","subscribeFail","leave","autoplayError","audioPlaybackError","audioRecovered","deviceChange","isUserSelection","rtcStats","rtcStatsFailed","degradationStats","degradedAt","restoredAt","audioDetectionFail","device","previewNetworkQuality","publishStats","subscribeStats","getKrispUsage","krispStart","krispStop","interruption","started","reason","deviceInfo","cause","pi","muted","De","logIdentifier","isTrackNotPublishing","nativeTrack","firstTrackId","sdpTrackId","getMediaTrackSettings","setEnabled","setSdpTrackId","setFirstTrackId","sendInterruptionEvent","groupId","peerId","mid","we","audioElement","getVolume","floor","setVolume","subscribeToAudio","setAudioElement","getAudioElement","getOutputDevice","outputDevice","srcObject","remove","setOutputDevice","setSinkId","Pe","setAudio","Hr","remember","TAG","setDevices","rememberDevices","updateSelection","isSame","getSelection","Y","Cr","TRANSFORM","ANALYZE","Lr","PLATFORM_NOT_SUPPORTED","DEVICE_NOT_SUPPORTED","me","failure","plugin_name","audioPluginFailure","sampleRate","audioPluginStats","pluginName","loadTime","load_time","added","added_at","avgPreProcessingTime","avgProcessingTime","inputFrameRate","pluginFrameRate","avg_preprocessing_time","avg_processing_time","input_frame_rate","plugin_frame_rate","hi","eventBus","initTime","addedTimestamps","pluginAdded","pluginSampleRate","now","analytics","removed","clean","initWithTime","timeInMs","Pt","echoCancellation","highpassFilter","audioMirroring","Dr","SIP","REGULAR","Us","INITIALISED","STARTED","PAUSED","RESUMED","STOPPED","FAILED","Bs","DVR","NO_DVR","Vs","COMPOSITE","Fs","Gs","CAPTION","We","wr","VOICE","MUSIC","Ws","_volume","_codec","_maxBitrate","_deviceId","_audioMode","_advanced","autoGainControl","noiseSuppression","codec","maxBitrate","audioMode","$e","toConstraints","audio_bitrate","audio_codec","_width","_height","_maxFramerate","setWidth","setHeight","_facingMode","Ke","improviseConstraintsAspect","video_bitrate","framerate","video_codec","_e","_video","_audio","_screen","_simulcast","simulcast","Ze","audio_enabled","video_enabled","bt","pluginAddInProgress","hmsTrack","pluginsMap","audioContext","getAudioContext","getPlugins","addPlugin","getName","isNoiseCancellationEnabled","setSettings","addPluginInternal","validateAndThrow","setEventBus","initAudioNodes","prevAudioNode","init","processPlugin","connectToDestination","updateProcessedTrack","validatePlugin","checkSupport","isSupported","errType","removePlugin","removePluginInternal","setProcessedTrack","reprocessPlugins","values","sourceNode","outputTrack","destinationNode","closeContext","createMediaStreamSource","createMediaStreamDestination","processAudioTrack","context","bo","Ao","Ks","Ne","_r","Nr","ve","Io","resumeContext","resume","Or","SPEAKERPHONE","WIRED","BLUETOOTH","EARPIECE","xr","Oe","capacity","toList","enqueue","dequeue","aggregate","qs","ie","setTimeout","xe","Worker","URL","createObjectURL","Blob","postMessage","onmessage","terminate","js","sleep","mi","clearTimeout","Ro","Ho","Si","audioLevelEvent","silenceEvent","audioLevel","isMonitored","interval","historyInterval","history","detectSilence","isSilentThisInstant","analyserNode","createAnalyserNodeForStream","frequencyBinCount","dataArray","loop","sendAudioLevel","getMaxAudioLevelOverPeriod","abs","calculateAudioLevel","getByteTimeDomainData","ceil","createAnalyser","fftSize","Js","Co","Me","fi","de","tracksCreated","isPublished","handleVisibilityChange","shouldReacquireTrack","visibilityState","replaceTrackWith","handleTrackMute","handleTrackUnmute","localAudioUnmutedNatively","replaceSenderTrack","replaceTrack","processedTrack","handleSettingsChange","setMaxBitrateAndFramerate","handleDeviceChange","manuallySelectedDeviceId","addTrackEventListeners","buildNewSettings","pluginsManager","clone","getManuallySelectedDeviceId","resetManuallySelectedDeviceId","updateTrack","replaceStreamTrack","audioLevelMonitor","initAudioLevelMonitor","removeTrackEventListeners","audioPluginFailed","ce","localAudioEnabled","isPublishedTrackId","publishedTrackId","destroyAudioLevelMonitor","trackAudioLevelUpdate","localAudioSilence","getTrackIDBeingSent","getTrackBeingSent","re","et","sinkCount","getSinks","reTriggerPlay","videoElement","play","setVideoHandler","videoHandler","hasSinks","getVideoElements","attach","addVideoElement","detach","removeVideoElement","addSink","addSinkInternal","removeSink","reduceSinkCount","addPropertiesToElement","autoplay","playsInline","controls","At","none","low","medium","high","Lo","Qs","getClosestLayer","sort","layer","devicePixelRatio","resolution","Ur","WeakMap","observe","createObserver","unobserve","intersectionObserver","IntersectionObserver","handleIntersection","zs","Br","box","resizeObserver","ResizeObserver","handleResize","Ys","tt","videoElements","entries","getComputedStyle","visibility","isIntersecting","contains","boundingClientRect","selectMaxLayer","contentRect","Do","updateSinks","isElementInViewport","setPreferredLayer","getPreferredLayer","offsetTop","offsetLeft","offsetWidth","offsetHeight","opacity","display","offsetParent","pageYOffset","innerHeight","pageXOffset","innerWidth","getSimulcastDefinitions","Vr","Fr","WEBGL","WEBGL2","It","total","count","getAvg","reset","it","preProcessingAvgs","processingAvgs","pluginInputFrameRate","preProcessWithTime","processWithTime","Xs","wo","_o","Rt","pluginsLoopRunning","pluginsLoopState","reusableWorker","pluginNumFramesToSkip","pluginNumFramesSkipped","canvases","createElement","startPluginsLoop","getContextType","removePluginEntry","stopPluginsLoop","waitForRestart","initElementsAndStream","inputCanvas","outputCanvas","inputVideo","getContext","captureStream","pluginsLoop","resetCanvases","doPreProcessing","processFramesThroughPlugins","addTrackToVideo","updateInputCanvas","checkIfSkipRequired","getPluginType","processVideoFrame","pause","drawImage","fillStyle","fillRect","gi","plugins","addPlugins","isEffectsEnabled","removePlugins","applyPlugins","No","Ti","eventPerformanceMeasures","end","getTimeTaken","getTimes","Gr","isAudioMuted","isVideoMuted","videoDeviceId","be","store","observer","deviceManager","analyticsTimer","setScreenCaptureHandleConfig","getTracksToPublish","getAVTrackSettings","videoTrack","audioTrack","updateCurrentLocalTrackSettings","getTrackById","fetchTrackOptions","getLocalTracks","retryGetLocalTracks","getNativeLocalTracks","createHMSLocalTracks","getDevices","getAVTracks","getEmptyTracks","optimizeScreenShareConstraint","videoWidth","videoHeight","sqrt","getLocalScreen","getOrDefaultScreenshareConfig","getScreenshareSettings","videoOnly","displaySurface","preferCurrentTab","selfBrowserSurface","surfaceSwitching","systemAudio","googAutoGainControl","forceCurrentTab","cropElement","config","Se","getRoom","setSimulcastDefinitons","getSimulcastDefinitionsForPeer","getLocalPeer","validateCurrentTabCapture","isCurrentTab","cropTo","cropTarget","setCaptureHandleConfig","isInIframe","handle","Oo","exposeOrigin","permittedOrigins","origin","captureHandleIdentifier","getCaptureHandle","requestPermissions","getEmptyVideoTrack","setInterval","getEmptyAudioTrack","createOscillator","clearInterval","hasWebcamPermission","hasMicrophonePermission","getErrorType","getAudioSettings","getVideoSettings","self","top","onFailure","getLocalPeerTracks","bitRate","audioOnly","CropTarget","fromElement","Zs","xo","_layerDefinitions","enabledStateBeforeBackground","replaceSender","processPlugins","localVideoEnabled","handleTrackUnmuteNatively","localVideoUnmutedNatively","removeOrReplaceProcessedTrack","mediaStreamPluginsManager","addStreamPlugins","replaceTrackWithBlank","removeStreamPlugins","unsubscribe","switchCamera","rt","vi","st","ea","ta","Ht","pow","V","DEVICE_CHANGE","LOCAL_AUDIO_ENABLED","LOCAL_VIDEO_ENABLED","LOCAL_VIDEO_UNMUTED_NATIVELY","LOCAL_AUDIO_UNMUTED_NATIVELY","STATS_UPDATE","RTC_STATS_UPDATE","TRACK_AUDIO_LEVEL_UPDATE","LOCAL_AUDIO_SILENCE","ANALYTICS","AUDIO_PLUGIN_FAILED","POLICY_CHANGE","LOCAL_ROLE_UPDATE","AUDIO_TRACK_UPDATE","AUDIO_TRACK_ADDED","AUDIO_TRACK_REMOVED","LEAVE","ia","ra","Ae","$r","Kr","sa","aa","_degraded","_degradedAt","qr","preferredLayer","disableNoneLayerRequest","setTrackId","bizTrackId","shouldSendVideoLayer","requestLayer","pushInHistory","getSimulcastLayer","getLayer","getVideoLayer","getPreferredLayerDefinition","updateLayer","setLayerFromServer","getDegradationValue","current_layer","expected_layer","subscriber_degraded","publisher_degraded","setVideoLayerLocally","setVideoLayer","toISOString","connection","setConnection","getTrackEncodings","setPreferredCodec","removeSender","active","sendOverApiDataChannelWithResponse","subscribed","track_id","max_spatial_layer","isAudioSubscribed","oa","getLocalTrackStats","ssrc","mimeType","codecId","bitrate","Ct","packetsLost","jitter","roundTripTime","totalRoundTripTime","peerName","peerID","na","getTrackStats","Uo","jr","remote","packetsLostRate","Jr","getLocalPeerStatsFromReport","Bo","selectedCandidatePairId","selected","ca","da","union","computeBitrate","computeStatRate","Qr","computeNumberRate","Mi","publishConnection","subscribeConnection","getLocalPeerStats","localPeerID","getRemoteTrackStats","getAllRemoteTracksStats","updateStats","updateLocalPeerStats","updateLocalTrackStats","updateRemoteTrackStats","getTracksMap","getPeerById","setPeerConnections","getPublishPeerConnection","getSubscribePeerConnection","yi","handleStatsUpdate","hmsStats","statsUpdate","getCurrentStats","onStatsChange","startLoop","removeAllListeners","at","customerUserId","role","joinedAt","groups","realtime","isHandRaised","updateRole","updateName","updateNetworkQuality","networkQuality","updateMetadata","updateGroups","ot","makePeerId","Vo","qe","asRole","isInPreview","Lt","fromRoomState","ye","createRemotePeer","peer_id","getPolicyForRole","user_id","ki","transport","isEnd","defaultPaginationLimit","validateConnection","getTotal","findPeers","signal","limit","updateState","processPeers","peerIterNext","eof","nt","createMediaElementSource","destination","getAudioTrack","close","Ue","Fo","off","emit","Ei","seeked","src","onerror","oncanplaythrough","audioContextManager","onseeked","getElement","removeAttribute","crossOrigin","Pi","canvasContext","DEFAUL_FPS","paused","ended","canvas","timer","getVideoElement","createCanvas","clearCanvasAndTracks","onplay","clearRect","bi","currentIndex","isAutoplayOn","Dt","handlePausePlaylist","audioManager","videoManager","addListeners","getList","setList","clearList","isPlaying","findIndex","seek","seekTo","getCurrentTime","getCurrentIndex","getCurrentProgress","getCurrentSelection","setIsAutoplayOn","getPlaybackRate","setPlaybackRate","setDuration","playNext","playPrevious","removeTracks","onProgress","onNewTrackStart","onPlaylistEnded","onCurrentTrackEnded","isItemCurrentlyPlaying","handleEnded","Go","Ai","la","ua","zr","appData","km","Wo","Be","$o","peerCount","ke","Ko","se","Ie","le","roleName","qo","pa","unshift","Hm","Yr","ha","Xr","jo","Cm","Dm","wt","read","Jo","recipientPeer","recipientRoles","ae","ma","Ee","transcriptions","mode","Fm","ct","Qo","Sa","ga","subscribeParams","subscribeToRoles","permissions","Km","Ta","startedAt","isLargeRoom","isVBEnabled","effectsKey","tS","iS","zo","rS","va","selectPlaylistMap","Zr","selectPlaylistSelection","Ma","selectPlaylistProgress","ya","selectPlaylistCurrentTime","ka","selectPlaylistPlaybackRate","Ea","selectPlaylistVolume","Pa","selectPlaylist","fa","ba","selectPlaylistSelectedItem","Aa","selectedItem","Ia","_t","es","selectPeerID","Nt","selectTrackID","Ra","selectRoleName","Yo","selectAppDataKey","Xo","selectPollID","ts","Zo","sn","SS","Ii","Ha","kS","Ca","selectSpeakerByTrackID","selectSpeakerByPeerID","bS","AS","La","LS","Da","DS","wS","wa","_a","Na","Oa","cn","dn","ln","qS","xa","Ri","isAudioEnabled","Hi","requestedBy","token","Re","Ot","Ci","Ua","Li","onNotification","eventEmitter","addListener","removeListener","Sn","maxListeners","sendPlaylistTrackEnded","createNotification","emitEvent","sendDeviceChange","sendLeaveRoom","roomEnded","sendPeerList","sendPeerUpdate","sendTrackUpdate","sendMessageReceived","sendError","sendReconnecting","sendReconnected","sendChangeTrackStateRequest","sendChangeMultiTrackStateRequest","sendPollUpdate","sendTranscriptionUpdate","severity","Di","queuedUpdates","timers","DEFAULT_INTERVAL_MS","setStateBatched","namedSetState","Ba","ja","Ja","Va","mergeNewPeersInDraft","xt","je","oe","as","wi","Fa","mergeNewTracksInDraft","ss","Ga","mergeNewPollsInDraft","questions","rs","mergeNewIndividualStatsInDraft","Wa","mergeLocalTrackStats","mergeTrackArrayFields","layerDefinitions","isEntityUpdated","isEntityRemoved","isEntityAdded","areArraysEqual","convertPeer","convertTrack","enrichTrack","updateDeviceID","enrichLocalTrack","enrichScreenTrack","enrichVideoTrack","enrichPluginsDetails","deviceID","captureHandle","convertRoom","convertRecordingStreamingState","large_room_optimization","isHipaaEnabled","convertMessage","senderName","senderRole","senderUserId","private","message_id","convertRoles","convertRoleChangeRequest","convertException","convertDeviceChangeUpdate","convertPlaylist","getConvertedPlaylistType","convertPlaylistItem","playing","Ut","playlistManager","syncPlaylistState","_i","setLocally","sdkSessionStore","getSessionStore","Ni","intervalMs","shouldMonitor","hasStarted","unsubs","analysers","actions","monitorAudioLevels","logAllPeersAudioLevels","__triggerBeamEvent__","getAudioLevel","createAnalyserNode","$a","Ka","dt","maxSubsBitRate","browserRecording","changeRole","endRoom","hlsStreaming","mute","pollRead","pollWrite","removeOthers","rtmpStreaming","unmute","qa","Oi","networkScores","lastPushedAt","pushScore","addPendingCQSTillNow","getCQS","gn","ne","Ve","calculateAverage","xi","peerStatsList","localAudioTrackStatsList","localVideoTrackStatsList","remoteAudioTrackStatsList","remoteVideoTrackStatsList","getWebrtcInternals","buildReport","ue","ge","pe","St","hs","ms","responsesReceived","toFixed","packetsReceived","ee","combined","bytesSent","bytesReceived","bitrateSent","bitrateReceived","Tn","STARTING","INIT_FETCHED","SIGNAL_CONNECTED","ICE_ESTABLISHED","MEDIA_CAPTURED","MEDIA_PUBLISHED","COMPLETED","Ui","sdkListener","progressCallback","completionCallback","wsConnected","initConnected","isPublishICEConnected","isSubscribeICEConnected","gatheredPublishICECandidates","gatheredSubscribeICECandidates","isAudioTrackCaptured","isVideoTrackCaptured","isAudioTrackPublished","isVideoTrackPublished","cqsCalculator","onRoomUpdate","onPeerUpdate","onMessageReceived","onReconnected","onRoleChangeRequest","onRoleUpdate","onChangeTrackStateRequest","onChangeMultiTrackStateRequest","onRemovedFromRoom","onNetworkQuality","onPreview","onDeviceChange","onSessionStoreUpdate","onPollsUpdate","onWhiteboardUpdate","handleConnectionQualityUpdate","downlinkQuality","statsCollector","_state","onICESuccess","onSelectedICECandidatePairChange","selectedPublishICECandidate","selectedSubscribeICECandidate","onICECandidate","onMediaPublished","onInitSuccess","websocketURL","onSignallingSuccess","onJoin","cleanupTimer","cleanupAndReport","onTrackUpdate","onReconnecting","testTimestamp","connectivityState","signallingReport","isInitConnected","websocketUrl","mediaServerReport","connectionQualityScore","publishICECandidatePairSelected","subscribeICECandidatePairSelected","publishIceCandidatesGathered","subscribeIceCandidatesGathered","Je","Bi","fetchWithRetry","fetch","json","ok","Bt","recordedAudio","setIsDiagnostics","initSdkWithLocalPeer","checkBrowserSupport","requestPermission","localTrackManager","startCameraCheck","setSimulcastEnabled","stopCameraCheck","startMicCheck","inputDevice","onStop","stopMicCheck","getLocalAudioTrack","initPreviewTrackAudioLevelMonitor","mediaRecorder","MediaRecorder","ondataavailable","onstop","onStopMicCheck","getRecordedAudio","startConnectivityCheck","connectivityCheck","getAuthToken","authToken","userName","addConnectionQualityListener","onConnectionQualityUpdate","stopConnectivityCheck","initStoreAndManagers","addPeer","setRoom","searchParams","append","Vi","isRoomJoinCalled","ignoredMessageTypes","setProgress","getPlaylistManager","sendPeerUpdateNotification","syncRoomState","updateMidCallPreviewRoomState","hmsNotifications","getSDKHMSPeer","getPeerMap","setSessionStoreValueLocally","actionBatcher","submitSessionFeedback","getLocalTrack","interactivityCenter","getInteractivityCenter","setPlaylistSettings","updatePlaylistSettings","refreshDevices","unblockAudio","getAudioOutput","unblockAutoplay","setTrackVolume","setAudioOutputDevice","setDevice","logPossibleInconsistency","getNativeTrackById","getAuthTokenByRoomCode","sdkPreviewWithListeners","cancelMidCallPreview","sdkJoinWithListeners","resetState","beamSpeakerLabelsLogger","setScreenShareEnabled","startScreenShare","stopScreenShare","setLocalAudioEnabled","setEnabledTrack","setLocalVideoEnabled","setEnabledSDKTrack","setAudioSettings","setSDKLocalAudioTrackSettings","setVideoSettings","setSDKLocalVideoTrackSettings","sendMessage","sendBroadcastMessage","updateMessageInStore","sendGroupMessage","sendDirectMessage","ignored","setMessageRead","attachVideo","localAndVideoUnmuting","attachVideoInternal","detachVideo","addPluginToVideoTrack","addRemoveVideoPlugin","addPluginsToVideoStream","addRemoveMediaStreamVideoPlugins","removePluginsFromVideoStream","addPluginToAudioTrack","addRemoveAudioPlugin","validateVideoPluginSupport","errMsg","validateAudioPluginSupport","removePluginFromVideoTrack","removePluginFromAudioTrack","changeRoleOfPeer","changeRoleOfPeersWithRoles","getRoles","acceptChangeRole","removeRoleChangeRequest","raiseLocalPeerHand","lowerLocalPeerHand","raiseRemotePeerHand","lowerRemotePeerHand","getPeer","findPeerByName","getPeerListIterator","initAppData","setAppData","rejectChangeRole","removePeer","startRTMPOrRecording","stopRTMPAndRecording","startHLSStreaming","stopHLSStreaming","startTranscription","stopTranscription","sendHLSTimedMetadata","changeName","changeMetadata","setSessionMetadata","sessionMetadata","populateSessionMetadata","getSessionMetadata","setRemoteTrackEnabled","changeTrackState","setRemoteTracksEnabled","changeMultiTrackState","setLogLevel","setFrameworkInfo","ignoreMessageTypes","enableBeamSpeakerLabelsLogging","initDiagnostics","addAudioListener","onAudioLevelUpdate","getDebugInfo","onSFUMigration","getMediaSettings","answer","responses","getPeers","getPreviewFields","getRecordingState","getRTMPState","getHLSState","getTranscriptionState","getTemplateAppData","audioPlaylist","videoPlaylist","handleTrackRemove","putMessageInStore","trackID","getStoreLocalTrackIDfromSDKTrack","hasActiveElements","Fi","title","Gi","controller","AbortController","timeout","scoreMap","abort","body","getReader","readData","done","sendScore","downloadedSize","startTime","race","finished","updateScoreToListener","aborted","score","downLink","Vt","removeAuxiliaryTrack","handleLocalPeerRoleUpdate","oldRole","newRole","diffRolesAndPublishTracks","hasSimulcastDifference","removeAudioTrack","removeVideoTracks","removeScreenTracks","syncDevices","unpublish","removeAuxTracks","layers","getMutedStatus","getAudioDeviceSettings","getVideoInputDeviceId","getConfig","currentSelection","failedEvents","setEnv","flushFailedEvents","setWebsocketEndpoint","sendEvent","addEventToStorage","payload","cluster","websocket_url","headers","Authorization","user_agent_v2","status","statusText","removeFromStorage","He","Ft","stream_id","Gt","knownRoles","peerTrackStates","roleDetailsArrived","simulcastEnabled","addPermissionToRole","addWhiteboardPluginToRole","admin","reader","writer","addTranscriptionsPluginToRole","handleNoiseCancellationPlugin","removeRemoteTracks","getEnv","getKnownRoles","localPeerId","getRemotePeers","getRemoteVideoTracks","getPeerTracks","getPeerByTrackId","getSpeakers","getSpeakerPeers","getUserAgent","createAndSetUserAgent","setKnownRoles","known_roles","addPluginsToRoles","app_data","videoLayers","convertSimulcastLayers","updatePeersPolicy","hasRoleDetailsArrived","setConfig","rememberDeviceSelection","autoManageVideo","autoManageWakeLock","getTrackState","setTrackState","trackInfo","removeTrackState","updateSpeakers","updateAudioOutputVolume","updateAudioOutputDevice","getSimulcastLayers","setPoll","getPoll","setWhiteboard","getWhiteboards","getWhiteboard","getErrorListener","errorListener","setErrorListener","initEndpoint","startsWith","Wi","wakeLock","acquireLock","requestWakeLock","visibilityHandler","released","release","request","$i","bufferSize","pendingEvents","setTransport","queue","flushFailedClientEvents","flush","transportProvider","sendClientEventOnHTTP","session_id","room_id","room_name","template_id","templateId","joined_at","session_started_at","user_name","user_data","Qa","autoplayFailed","initialized","autoplayCheckPromise","Wt","autoPausedTracks","handleAudioPaused","handleTrackUpdate","handleTrackAdd","callListener","style","MediaError","MEDIA_ERR_DECODE","removeAudioElement","audioSink","handleAutoplayError","playAudioFor","handleAudioDeviceChange","unpauseAudioTracks","getElementById","childElementCount","audioTrackAdded","audioTrackRemoved","audioTrackUpdate","setListener","Mn","Ki","pluginUsage","pluginLastAddedAt","getPluginUsage","updatePluginUsageData","$t","videoInputChanged","audioInputChanged","earpieceSelected","updateOutputDevice","createIdentifier","computeChange","logDevices","updateToActualDefaultDevice","getInitialDeviceId","getNewAudioInputDevice","handleAudioInputDeviceChange","handleVideoInputDeviceChange","startPollingForDevices","autoSelectAudioOutput","bluetoothDevice","earpiece","speakerPhone","wired","categorizeAudioInputDevices","getManuallySelectedAudioDevice","isLocalTrackEnabled","waitFor","getAudioOutputDeviceMatchingInput","speakerAutoSelectionBlacklist","qi","audioSinkManager","Kt","handleError","sendFeedback","eventEndpoint","feedback","eventName","subscribeOnce","once","qt","yn","trackDegraded","trackRestored","policyChange","localRoleUpdate","ji","audioListener","handleActiveSpeakers","Ji","handleNotification","handleBroadcast","Qi","handleQualityUpdate","downlink_score","lt","tracksToProcess","processPendingTracks","handleTrackRemovedPermanently","removePeerTracks","handleTrackLayerUpdate","setLayer","processTrackInfo","processTrackUpdate","addAudioTrack","addVideoTrack","handleTrackMetadataAdd","addAsPrimaryVideoTrack","zi","isPeerRoleSubscribed","getSubscribeConnection","Yi","peerManager","trackManager","handleInitialPeerList","handlePeerList","handleReconnectPeerList","handleRepeatedPeerList","handlePreviewRoomState","is_from_room_state","peer_count","handlePeerLeave","removePeerTrack","handlePeerUpdate","Xi","makePeer","handlePeerJoin","updateSimulcastLayersForPeer","handlePeerInfoUpdate","Zi","handlePolicyChange","updateLocalPeerRole","ns","FLAG_SERVER_SUB_DEGRADATION","FLAG_SERVER_SIMULCAST","FLAG_NON_WEBRTC_DISABLE_OFFER","FLAG_PUBLISH_STATS","FLAG_SUBSCRIBE_STATS","FLAG_ON_DEMAND_TRACKS","FLAG_DISABLE_VIDEO_TRACK_AUTO_UNSUBSCRIBE","FLAG_WHITEBOARD_ENABLED","FLAG_EFFECTS_SDK_ENABLED","FLAG_VB_ENABLED","FLAG_HIPAA_ENABLED","FLAG_NOISE_CANCELLATION","FLAG_SCALE_SCREENSHARE_BASED_ON_PIXELS","FLAG_DISABLE_NONE_LAYER_REQUEST","jt","constructWhiteboardURL","er","isEnabled","isFlagEnabled","open","createWhiteboard","getCreateOptionsWithDefaults","attributes","addr","owner","handleLocalRoleUpdate","whiteboard","Jt","createPoll","customerID","poll_id","setPollInfo","vote","rolesThatCanVote","rolesThatCanViewResponses","addQuestionsToPoll","getPollQuestions","tr","created_by","question","startPoll","setPollQuestions","createQuestionSetParams","stopPoll","addResponsesToPoll","getQuestionInPoll","questionIndex","option","text","skipped","setPollResponses","fetchLeaderboard","anonymous","fetchPollLeaderboard","avgScore","avg_score","avgTime","avg_time","votedUsers","voted_users","totalUsers","total_users","correctUsers","correct_users","position","totalResponses","total_responses","correctResponses","correct_responses","last","summary","getPollResponses","final","response_id","responseFinal","peerid","userHash","hash","userid","username","update","getPolls","getPollsList","weight","isCorrectAnswer","startedBy","started_by","createdBy","locked","stoppedBy","stopped_by","started_at","stoppedAt","stopped_at","createdAt","created_at","ir","handlePollStart","handlePollStop","handlePollStats","updatePollResponses","getPollResult","updatePollResult","user_count","maxUsers","max_user","total_response","correct","skippedCount","voteCount","rr","handleRoleChangeRequest","handleTrackUpdateRequest","handleChangeTrackStateRequest","requested_by","sendNotification","getTracksToBeUpdated","sr","onRoomState","updateRTMPStatus","updateRecordingStatus","handleRoomInfo","handleSessionInfo","updateHLSStatus","handleTranscriptionStatus","max_size","streaming","isStreamingRunning","getPeerListSFURecording","getPeerListBrowserRecording","getPeerListHLSRecording","convertHls","addTranscriptionDetail","initialised_at","updated_at","toSdkError","isRecordingRunning","initHLS","meetingURL","playlist_type","initialisedAt","stream_type","meeting_url","getHLSRecording","singleFilePerLayer","hls_recording","single_file_per_layer","hlsVod","hls_vod","sfu","ar","handleMetadataChange","updatedAt","updatedBy","updated_by","or","handleWhiteboardUpdate","nr","connectionQualityListener","hasConsistentRoomStateArrived","ignoreNotification","updateLocalPeer","peerListManager","broadcastManager","policyChangeManager","requestManager","activeSpeakerManager","connectionQualityManager","roomUpdateManager","sessionMetadataManager","pollsManager","whiteboardManager","setAudioListener","setConnectionQualityListener","notification","ON_SFU_STATS","handleIsolatedMethods","setSFUNodeId","sfu_node_id","cr","observedKeys","listenMetadataChange","dr","autoSubscribeVideo","ConnectFailed","SignalDisconnect","JoinWSMessageFailed","PublishIceConnectionFailed","SubscribeIceConnectionFailed","za","lr","Joined","Leaving","ur","pr","onStateChange","inProgress","retryTaskIds","schedule","category","task","originalState","maxRetryTime","changeState","scheduleTask","failedAt","isTaskInProgress","failedRetryCount","getDelayForRetryCount","setTimeoutPromise","hr","initLocalStorageQueue","mr","eventCount","lastResetTime","MAX_EVENTS_PER_MINUTE","RESET_INTERVAL_MS","checkRateLimit","sendSingleEvent","Sr","ut","sampleWindowSize","pushInterval","shouldSendEvent","sequenceNum","trackAnalytics","clearSamples","cleanTrackAnalyticsAndCreateSample","samples","createSample","pt","tempStats","pushTempStat","collateSample","prevLatestStat","getLatestStat","getFirstStat","calculateSum","round","calculateDifferenceForSample","calculateDifferenceAverage","calculateInstancesOfHigh","gr","hasResolutionChanged","frameWidth","frameHeight","Tr","hasEnabledStateChanged","Qt","zt","toAnalytics","sequence_num","max_window_sec","getTrackIdentifier","availableOutgoingBitrate","shouldCreateSample","qualityLimitationDurations","bandwidth_sec","bandwidth","cpu_sec","cpu","other_sec","other","height_px","width_px","avg_available_outgoing_bitrate_bps","avg_bitrate_bps","avg_fps","total_packets_lost","total_packets_sent","packetsSent","total_packet_sent_delay_sec","total_fir_count","total_pli_count","total_nack_count","avg_jitter_ms","avg_round_trip_time_ms","total_quality_limitation","Yt","jitterBufferDelay","jitterBufferEmittedCount","calculatedJitterBufferDelay","calculateAvSyncForStat","avSync","expectedFrameHeight","expectedFrameWidth","ls","estimatedPlayoutTimestamp","avg_jitter_buffer_delay","avg_av_sync_ms","calculateAvgAvSyncForSample","avg_frames_received_per_sec","avg_frames_dropped_per_sec","avg_frames_decoded_per_sec","frame_width","frame_height","expected_frame_width","expected_frame_height","pause_count","pause_duration_seconds","freeze_count","freeze_duration_seconds","concealedSamples","silentConcealedSamples","audio_level","audio_concealed_samples","audio_total_samples_received","audio_concealment_events","fec_packets_discarded","fec_packets_received","total_samples_duration","total_packets_received","ht","Publish","Subscribe","Ya","Xt","media","msid","Xa","Za","Ce","Qe","candidates","nativeConnection","setSfuNodeId","sfuNodeId","remoteDescription","handleSelectedIceCandidatePairs","iceTransport","handleSelectedCandidate","getSelectedCandidatePair","selectedCandidatePair","onSelectedCandidatePairChange","onselectedcandidatepairchange","Zt","onicecandidate","onIceCandidate","trickle","oniceconnectionstatechange","onIceConnectionChange","onconnectionstatechange","onConnectionStateChange","onstatechange","onDTLSTransportStateChange","onDTLSTransportError","errorDetail","initAfterJoin","onnegotiationneeded","onRenegotiationNeeded","ei","nativeChannel","onMessage","ti","remoteStreams","MAX_RETRIES","pendingMessageQueue","En","handlePendingApiMessages","sendOverApiDataChannel","apiChannel","waitForResponse","try","initNativeConnectionCallbacks","ondatachannel","onApiChannelMessage","onopen","ontrack","onTrackRemove","onTrackAdd","Pn","jsonrpc","eo","transformIceServerConfig","credentialType","credential","password","vr","ii","fetchInitConfig","region","bn","An","rtcConfiguration","ice_servers","ri","pongResponseTimes","isJoinCompleted","pendingTrickle","socket","callbacks","_isConnected","onCloseHandler","resolvePingOnAnyResponse","offlineListener","setIsConnected","onlineListener","onNetworkOnline","onMessageHandler","rejectPendingCalls","onOffline","onOnline","getPongResponseTimes","internalCall","In","notify","WebSocket","OPEN","openHandler","pingPongLoop","disableVidAutoSub","offer","server_sub_degrade","onDemandTracks","fromEntries","trackUpdate","broadcast","client_reason","lock","ping","requestRoleChange","requestBulkRoleChange","acceptRoleChangeRequest","requestTrackStateChange","requestMultiTrackStateChange","updatePeer","joinGroup","leaveGroup","addToGroup","removeFromGroup","getPollInfo","handleResponseWithId","handleResponseWithMethod","onOffer","onTrickle","onServerError","PING_TIMEOUT","PING_INTERVAL","to","getNetworkInfo","downlink","downlinkMax","effectiveType","rtt","saveData","si","analyticsEventsService","pluginUsageTracker","trackStates","maxSubscribeBitrate","joinRetryCount","publishDisconnectTimer","onScreenshareStop","screenStream","setOnScreenshareStop","signalObserver","joinParameters","retryScheduler","retrySignalDisconnectTask","analyticsSignalTransport","publishDtlsStateTimer","lastPublishDtlsState","doesRoleNeedWebRTC","createPeerConnections","negotiateOnFirstPublish","retryPublishIceFailedTask","extra","performPublishRenegotiation","iceRestart","retrySubscribeIceFailedTask","signalConnected","internalConnect","webrtcInternals","sendErrorAnalyticsEvent","getWebsocketEndpoint","initConfig","enabledFlags","setConnectivityListener","connectivityListener","validateNotDisconnected","waitForLocalRoleAvailability","createConnectionsAndNegotiateJoin","initStatsAnalytics","setTransportStateForConnect","metaData","publishStatsAnalytics","subscribeStatsAnalytics","clearPeerConnections","publishTrack","unpublishTrack","handleSFUMigration","doesLocalPeerNeedWebRTC","negotiateJoinWithRetry","isWebRTC","logConnectionState","dtlsStateTimeouts","handleIceConnectionFailure","local","negotiateJoin","negotiateJoinWebRTC","negotiateJoinNonWebRTC","vb","openSignal","onConnected","getAdditionalAnalyticsProperties","getValueFromInitConfig","init_response_time","ws_connect_time","on_policy_change_time","local_audio_track_time","local_video_track_time","retries_join","network_info","document_hidden","num_degraded_tracks","max_sub_bitrate","recent_pong_response_times","transport_state","Mr","atob","roomId","userId","ro","published","isInitialised","isReconnecting","isPreviewInProgress","isPreviewCalled","isJoinInProgress","deviceManagersInitialised","yr","transportState","sdkState","isDiagnostics","playlistSettings","sendJoinAnalyticsEvent","notificationManager","handlePeerLeaveRequest","initNotificationManager","internalLeave","room_end","handlePreviewError","sendPreviewAnalyticsEvent","deviceChangeListener","handleAudioPluginError","roleChangeManager","unpauseRemoteVideoTracks","sendAudioPresenceFailed","sendAnalyticsEvent","setSessionPeerInfo","sessionPeerInfo","agent","wakeLockManager","networkTestManager","validateJoined","sendHLSAnalytics","midCallPreview","setUpPreview","policyHandler","setLocalPeerTrack","initDeviceManagers","autoVideoSubscribe","captureNetworkQualityInPreview","networkHealth","commonSetup","removeDevicesFromConfig","frameworkInfo","createAndAddLocalPeerToStore","getAndPublishTracks","notifyJoin","stringifyMetadata","cleanDeviceManagers","roomCode","sendMessageInternal","query","getScreenshareTracks","stopEndedScreenshare","applySettings","stopPlaylist","setAnalyticsLevel","requested_for","force","record","rtmpURLs","rtmp_urls","metadata_objs","setAndPublishTracks","audioSinkElementId","mt","ai","getDiagnosticsSDK","diagnostics","createNewHMSStore","notifications","initialTriggerOnSubscribe","__hms","triggerOnSubscribe","makeStoreTriggerOnSubscribe","getStore","getHMSActions","getActions","getNotifications","_n","Dn","compareWithShallowCheckInSubscribe","setUpDevtools","wn","__REDUX_DEVTOOLS_EXTENSION__","devtoolsOptions","devtoolsSubscribe","actionsBlacklist","nextLiftedState","actionsById","computedStates","ao","subscribeToSdkWebrtcStats","so","xn","initAndSubscribeWebrtcStore","Nn","On","updateLocalPeerInWebrtcStore","updateWebrtcStoreStats","resetHMSStatsStore","hmsStore","Un","Bn","Vn","Fn","oo","Gn","no","us","Le","Yn","availableIncomingBitrate","Xn","ps","activeEffectScope","activeSub","EffectScope","detached","_active","effects","cleanups","_isPaused","parent","scopes","run","currentEffectScope","fromParent","effectScope","getCurrentScope","onScopeDispose","failSilently","pausedQueueEffects","WeakSet","ReactiveEffect","deps","depsTail","flags","scheduler","trigger","batch","cleanupEffect","prepareDeps","prevEffect","prevShouldTrack","shouldTrack","cleanupDeps","link","nextDep","removeSub","runIfDirty","isDirty","dirty","batchedSub","batchedComputed","batchDepth","sub","isComputed","startBatch","endBatch","prevActiveLink","activeLink","head","tail","prevDep","removeDep","computed","refreshComputed","_dirty","globalVersion","isSSR","prevSub","_value","hasChanged","soft","nextSub","subs","sc","trackStack","pauseTracking","resetTracking","Link","Dep","debugInfo","addSub","currentTail","targetMap","ITERATE_KEY","MAP_KEY_ITERATE_KEY","ARRAY_ITERATE_KEY","depsMap","newValue","oldValue","oldTarget","targetIsArray","isArrayIndex","isIntegerKey","newLength","key2","isSymbol","isMap","reactiveReadArray","array","raw","toRaw","isShallow","toReactive","shallowReadArray","arrayInstrumentations","__proto__","thisArg","findLast","findLastIndex","searchProxy","separator","lastIndexOf","noTracking","reduceRight","toReversed","toSorted","comparer","toSpliced","wrapValue","iter","_next","arrayProto","wrappedRetFn","needsWrap","methodFn","result2","wrappedFn","item","acc","res","isProxy","isNonTrackableKeys","makeMap","builtInSymbols","BaseReactiveHandler","_isReadonly","_isShallow","isReadonly2","isShallow2","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","isRef","readonly","reactive","MutableReactiveHandler","isOldValueReadonly","isReadonly","hadKey","hasOwn","ReadonlyReactiveHandler","mutableHandlers","readonlyHandlers","shallowReactiveHandlers","toShallow","getProto","createIterableMethod","rawTarget","targetIsMap","isPair","isKeyOnly","innerIterator","wrap","toReadonly","createReadonlyMethod","createInstrumentations","instrumentations","rawKey","callback","observed","extend","hadItems","iteratorMethods","createInstrumentationGetter","mutableCollectionHandlers","shallowCollectionHandlers","readonlyCollectionHandlers","targetTypeMap","rawType","getTargetType","isExtensible","toRawType","createReactiveObject","shallowReactive","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","isReactive","markRaw","def","ref","createRef","shallowRef","rawValue","RefImpl","_rawValue","useDirectValue","unref","ref2","toValue","isFunction","shallowUnwrapHandlers","proxyRefs","objectWithRefs","ComputedRefImpl","setter","__v_isRef","effect","getterOrOptions","debugOptions","getter","cRef","INITIAL_WATCHER_VALUE","cleanupMap","activeWatcher","onWatcherCleanup","cleanupFn","watch","EMPTY_OBJ","immediate","deep","augmentJob","reactiveGetter","source2","traverse","boundCleanup","forceTrigger","isMultiSource","currentEffect","NOOP","baseGetter","depth","Infinity","scope","watchHandle","_cb","fill","job","immediateFirstRun","currentWatcher","cleanup2","seen","isSet","isPlainObject","propertyIsEnumerable","callWithErrorHandling","instance","callWithAsyncErrorHandling","isPromise","throwInDev","contextVNode","vnode","errorHandler","throwUnhandledErrorInProduction","appContext","cur","exposedInstance","errorInfo","errorCapturedHooks","ec","logError","throwInProd","flushIndex","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","resolvedPromise","currentFlushPromise","nextTick","findInsertionIndex","middle","middleJob","middleJobId","getId","queueJob","jobId","lastJob","queueFlush","flushJobs","queuePostFlushCb","flushPreFlushCbs","uid","flushPostFlushCbs","deduped","currentRenderingInstance","currentScopeId","setCurrentRenderingInstance","__scopeId","withCtx","ctx","isNonScopedSlot","renderFnWithContext","_d","setBlockTracking","prevInstance","_c","invokeDirectiveHook","prevVNode","bindings","dirs","oldBindings","binding","hook","dir","el","TeleportEndKey","isTeleport","__isTeleport","leaveCbKey","enterCbKey","useTransitionState","isMounted","isLeaving","isUnmounting","leavingVNodes","onMounted","onBeforeUnmount","TransitionHookValidator","BaseTransitionPropsValidators","appear","Boolean","persisted","onBeforeEnter","onEnter","onAfterEnter","onEnterCancelled","onBeforeLeave","onLeave","onAfterLeave","onLeaveCancelled","onBeforeAppear","onAppear","onAfterAppear","onAppearCancelled","getLeavingNodesForType","leavingVNodesCache","resolveTransitionHooks","props","postClone","callHook","callAsyncHook","hook2","hooks","beforeEnter","leavingVNode","isSameVNodeType","enter","afterHook","cancelHook","called","cancelled","delayedLeave","vnode2","hooks2","setTransitionHooks","shapeFlag","component","transition","subTree","ssContent","ssFallback","getTransitionRawChildren","children","keepComment","parentKey","ret","keyedFragmentCount","child","Fragment","patchFlag","Comment","cloneVNode","defineComponent","extraOptions","setup","markAsyncBoundary","ids","setRef","rawRef","oldRawRef","parentSuspense","isUnmount","isAsyncWrapper","__asyncResolved","refValue","getComponentPublicInstance","oldRef","refs","setupState","rawSetupState","canSetSetupRef","isString","_isString","_isRef","doSet","existing","queuePostRenderEffect","getGlobalThis","requestIdleCallback","cancelIdleCallback","__asyncLoader","isKeepAlive","__isKeepAlive","pattern","isRegExp","lastIndex","onActivated","registerKeepAliveHook","onDeactivated","currentInstance","wrappedHook","__wdc","current","isDeactivated","injectHook","injectToKeepAliveRoot","keepAliveRoot","injected","onUnmounted","resetShapeFlag","getInnerChild","prepend","__weh","setCurrentInstance","createHook","lifecycle","isInSSRComponentSetup","onBeforeMount","onBeforeUpdate","onUpdated","onServerPrefetch","onRenderTriggered","onRenderTracked","onErrorCaptured","COMPONENTS","resolveComponent","maybeSelfReference","resolveAsset","NULL_DYNAMIC_COMPONENT","warnMissing","Component","selfName","getComponentName","camelize","capitalize","registry","renderList","renderItem","cache","cached","sourceIsArray","sourceIsReactiveArray","getPublicInstance","isStatefulComponent","publicPropertiesMap","$el","$data","$props","$attrs","attrs","$slots","slots","$refs","$parent","$root","root","$host","$emit","$options","resolveMergedOptions","$forceUpdate","$nextTick","$watch","instanceWatch","hasSetupBinding","__isScriptSetup","PublicInstanceProxyHandlers","accessCache","normalizedProps","propsOptions","shouldCacheAccess","publicGetter","cssModule","globalProperties","__cssModules","descriptor","normalizePropsOrEmits","normalized","applyOptions","publicThis","beforeCreate","dataOptions","computedOptions","methods","watchOptions","provide","provideOptions","inject","injectOptions","created","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","render","renderTracked","renderTriggered","errorCaptured","serverPrefetch","expose","inheritAttrs","components","directives","filters","checkDuplicateProperties","resolveInjections","methodHandler","opt","createWatcher","provides","registerLifecycleHook","register","_hook","exposed","normalizeInject","createPathGetter","handler","mixins","extends","extendsOptions","globalMixins","optionsCache","optionMergeStrategies","resolved","mergeOptions","strats","asMixin","strat","internalOptionMergeStrats","mergeDataFn","mergeEmitsOrPropsOptions","emits","mergeObjectOptions","mergeAsArray","mergeWatchOptions","mergeInject","merged","createAppContext","app","isNativeTag","NO","warnHandler","compilerOptions","propsCache","emitsCache","uid$1","createAppAPI","hydrate","rootComponent","rootProps","installedPlugins","pluginCleanupFns","_uid","_component","_props","_container","_context","_instance","use","plugin","install","mixin","directive","mount","rootContainer","isHydrate","namespace","_ceVNode","createVNode","__vue_app__","onUnmount","unmount","runWithContext","lastApp","currentApp","parentProvides","defaultValue","treatDefaultAsFactory","hasInjectionContext","internalObjectProto","createInternalObject","isInternalObject","initProps","rawProps","isStateful","propsDefaults","setFullProps","updateProps","rawPrevProps","optimized","rawCurrentProps","hasAttrsChanged","kebabKey","hyphenate","resolvePropValue","propsToUpdate","dynamicProps","isEmitListener","emitsOptions","camelizedKey","needCastKeys","rawCastValues","isReservedProp","camelKey","castValues","isAbsent","hasDefault","skipFactory","_setProp","mixinPropsCache","normalizePropsOptions","comp","hasExtends","extendProps","raw2","EMPTY_ARR","normalizedKey","validatePropName","prop","propType","shouldCast","shouldCastTrue","typeName","isInternalKey","normalizeSlotValue","normalizeVNode","normalizeSlot","rawSlot","normalizeObjectSlots","rawSlots","_ctx","normalizeVNodeSlots","assignSlots","initSlots","updateSlots","needDeletionCheck","deletionComparisonTarget","$stable","initFeatureFlags","__VUE_PROD_HYDRATION_MISMATCH_DETAILS__","queueEffectWithSuspense","createRenderer","baseCreateRenderer","createHydrationFns","__VUE__","insert","hostInsert","hostRemove","patchProp","hostPatchProp","hostCreateElement","createText","hostCreateText","createComment","hostCreateComment","setText","hostSetText","setElementText","hostSetElementText","parentNode","hostParentNode","nextSibling","hostNextSibling","setScopeId","hostSetScopeId","insertStaticContent","hostInsertStaticContent","patch","n1","n2","container","anchor","parentComponent","slotScopeIds","dynamicChildren","getNextHostNode","Text","processText","processCommentNode","Static","mountStaticNode","processFragment","processElement","processComponent","internals","moveStaticNode","removeStaticNode","mountElement","patchElement","vnodeHook","mountChildren","resolveChildrenNamespace","scopeId","onVnodeBeforeMount","invokeVNodeHook","needCallTransitionHooks","needTransition","onVnodeMounted","isSuspense","parentVNode","cloneIfMounted","oldProps","newProps","toggleRecurse","onVnodeBeforeUpdate","innerHTML","textContent","patchBlockChildren","patchChildren","patchProps","class","onVnodeUpdated","oldChildren","newChildren","fallbackContainer","oldVNode","newVNode","fragmentStartAnchor","fragmentEndAnchor","fragmentSlotScopeIds","traverseStaticChildren","activate","mountComponent","updateComponent","initialVNode","createComponentInstance","renderer","setupComponent","asyncDep","registerDep","setupRenderEffect","placeholder","shouldUpdateComponent","asyncResolved","updateComponentPreRender","componentUpdateFn","bu","nonHydratedAsyncRoot","locateNonHydratedAsyncRoot","isUnmounted","originNext","invokeArrayFns","nextTree","renderComponentRoot","prevTree","updateHOCHostEl","bm","isAsyncWrapperVNode","hydrateNode","hydrateSubTree","__asyncHydrate","_injectChildStyle","scopedInitialVNode","nextVNode","prevProps","c1","prevShapeFlag","c2","patchKeyedChildren","patchUnkeyedChildren","unmountChildren","oldLength","commonLength","nextChild","parentAnchor","l2","e1","e2","nextPos","s1","s2","keyToNewIndexMap","patched","toBePatched","moved","maxNewIndexSoFar","newIndexToOldIndexMap","prevChild","newIndex","increasingNewIndexSequence","getSequence","nextIndex","move","moveType","suspense","needTransition2","delayLeave","afterLeave","remove2","performLeave","doRemove","cacheIndex","renderCache","deactivate","shouldInvokeDirs","shouldInvokeVnodeHook","onVnodeBeforeUnmount","unmountComponent","hasOnce","onVnodeUnmounted","removeFragment","performRemove","bum","um","invalidateMount","pendingBranch","suspenseId","pendingId","teleportEnd","isFlushing","_vnode","mc","pbc","createApp","currentNamespace","encoding","ch1","ch2","len","arrI","subComponent","ssrContextKey","useSSRContext","watchEffect","doWatch","baseWatchOptions","runsImmediately","ssrCleanup","__watcherHandles","watchStopHandle","isPre","isFirstRun","watch$1","segments","getModelModifiers","modelName","modelModifiers","rawArgs","isModelListener","modifiers","handlerName","number","looseToNumber","toHandlerKey","onceHandler","emitted","normalizeEmitsOptions","extendEmits","normalizedFromExtend","isOn","withProxy","fallthroughAttrs","proxyToUse","thisProxy","render2","getFunctionalFallthrough","blockStack","filterModelListeners","prevChildren","nextProps","nextChildren","hasPropsChanged","nextKeys","activeBranch","__isSuspense","currentBlock","openBlock","disableTracking","closeBlock","isBlockTreeEnabled","inVOnce","setupBlock","createElementBlock","createBaseVNode","createBlock","isVNode","__v_isVNode","normalizeKey","normalizeRef","ref_key","ref_for","isBlockNode","needFullChildrenNormalization","__v_skip","targetStart","targetAnchor","staticCount","normalizeChildren","normalize","_createVNode","cloned","isClassComponent","__vccOpts","guardReactiveProps","klass","normalizeClass","normalizeStyle","extraProps","mergeRef","cloneTransition","mergedProps","mergeProps","createTextVNode","flag","createCommentVNode","asBlock","memo","slot","slotFlag","toMerge","incoming","emptyAppContext","exposeProxy","setupContext","bc","rtg","rtc","sp","getCurrentInstance","internalSetCurrentInstance","setInSSRSetupState","registerGlobalSetter","setters","unsetCurrentInstance","compile","installWithProxy","setupResult","setupStatefulComponent","createSetupContext","isAsyncSetup","resolvedResult","handleSetupResult","finishComponentSetup","__ssrInlineRender","ssrRender","skipOptions","template","isCustomElement","delimiters","componentCompilerOptions","finalCompilerOptions","attrsProxyHandlers","includeInferred","displayName","__name","computed$1","propsOrChildren","policy","trustedTypes","createPolicy","createHTML","unsafeToTrustedHTML","svgNS","mathmlNS","doc","templateContainer","nodeOps","insertBefore","removeChild","tag","createElementNS","multiple","setAttribute","createTextNode","nodeValue","querySelector","content","before","previousSibling","lastChild","cloneNode","firstChild","appendChild","vtcKey","DOMTransitionPropsValidators","css","enterFromClass","enterActiveClass","enterToClass","appearFromClass","appearActiveClass","appearToClass","leaveFromClass","leaveActiveClass","leaveToClass","patchClass","isSVG","transitionClasses","className","vShowOriginalDisplay","vShowHidden","CSS_VAR_TEXT","displayRE","patchStyle","isCssString","hasControlledDisplay","prevStyle","setStyle","cssVarText","cssText","importantRE","setProperty","prefixed","autoPrefix","prefixes","prefixCache","rawName","xlinkNS","patchAttr","isBoolean","isSpecialBooleanAttr","removeAttributeNS","setAttributeNS","includeBooleanAttr","patchDOMProp","attrName","tagName","getAttribute","needRemove","veiKey","patchEvent","prevValue","nextValue","invokers","existingInvoker","parseName","invoker","createInvoker","optionsModifierRE","cachedNow","getNow","initialValue","_vts","attached","patchStopImmediatePropagation","originalStop","stopImmediatePropagation","_stopped","isNativeOn","charCodeAt","shouldSetAsProp","_isVueCE","_trueValue","_falseValue","camelize$1","HTMLElement","rendererOptions","ensureRenderer","containerOrSelector","normalizeContainer","nodeType","resolveRootNamespace","Element","SVGElement","MathMLElement","str","toTypeString","isDate","objectToString","cacheStringFunction","hit","camelizeRE","hyphenateRE","fns","arg","toNumber","NaN","_globalThis","globalThis","global","GLOBALS_ALLOWED","isGloballyAllowed","parseStringStyle","listDelimiterRE","propertyDelimiterRE","styleCommentRE","tmp","specialBooleanAttrs","looseCompareArrays","equal","looseEqual","aValidType","bValidType","aKeysCount","bKeysCount","aHasKey","bHasKey","looseIndexOf","toDisplayString","replacer","val2","stringifySymbol","defaultMaxListeners","nextTickSupported","symbolsSupported","reflectSupported","setImmediateSupported","setImmediate","_setImmediate","_events","_conf","configure","conf","delimiter","_maxListeners","wildcard","newListener","_newListener","_removeListener","verboseMemoryLeak","ignoreErrors","listenerTree","logPossibleMemoryLeak","errorMsg","emitWarning","emitter","trace","toArray","toObject","valuesCount","TargetObserver","_emitter","_target","_listeners","_listenersCount","_on","_off","_observers","resolveOptions","schema","reducers","allowUnknown","reducer","constructorReducer","makeTypeReducer","firstType","secondType","localEvent","eventObj","original","_onNewListener","_event","_onRemoveListener","hasListeners","events","clearRefs","findTargetIndex","functionReducer","objectFunctionReducer","makeCancelablePromise","executor","isCancelable","subscriptionClosed","onCancel","overload","isFinite","cancel","_resolve","_reject","observers","searchListenerTree","handlers","tree","typeLength","dl","branch","xTree","xxTree","isolatedBranch","endReached","branches","currentType","nextType","growListenerTree","warned","collectTreeEvents","asArray","branchName","isArrayPath","recursivelyGarbageCollect","Listener","setupListener","promisify","async","objectify","_listener","_origin","_async","EventEmitter","_Promise","eventListener","EventEmitter2","listenTo","listen","isSingleReducer","stopListeningTo","matched","setMaxListeners","getMaxListeners","_once","prependOnceListener","_many","many","ttl","prependMany","_all","containsSymbol","al","emitAsync","promises","prependListener","onAny","_onAny","prependAny","temp","returnValue","leafs","iLeaf","leaf","offAny","allListeners","eventNames","nsAsArray","listenerCount","listenersAny","defineProperties","define","LARGE_ARRAY_SIZE","HASH_UNDEFINED","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","MAX_SAFE_INTEGER","argsTag","arrayTag","asyncTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reRegExpChar","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","freeExports","freeModule","moduleExports","freeProcess","nodeUtil","nodeIsTypedArray","isTypedArray","arrayFilter","predicate","resIndex","arrayPush","arraySome","baseTimes","iteratee","baseUnary","cacheHas","getValue","object","mapToArray","overArg","transform","setToArray","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","exec","IE_PROTO","nativeObjectToString","reIsNative","Buffer","symToStringTag","toStringTag","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","entry","hashClear","__data__","hashDelete","hashGet","hashHas","hashSet","ListCache","listCacheClear","listCacheDelete","assocIndexOf","listCacheGet","listCacheHas","listCacheSet","MapCache","mapCacheClear","mapCacheDelete","getMapData","mapCacheGet","mapCacheHas","mapCacheSet","SetCache","setCacheAdd","setCacheHas","Stack","stackClear","stackDelete","stackGet","stackHas","stackSet","pairs","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","isIndex","eq","baseGetAllKeys","keysFunc","symbolsFunc","baseGetTag","getRawTag","baseIsArguments","isObjectLike","baseIsEqual","bitmask","customizer","stack","baseIsEqualDeep","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","equalObjects","baseIsNative","isMasked","baseIsTypedArray","isLength","baseKeys","isPrototype","isPartial","arrLength","othLength","stacked","arrValue","othValue","compared","othIndex","byteOffset","buffer","convert","objProps","getAllKeys","objLength","othProps","skipCtor","objValue","objCtor","othCtor","getSymbols","isKeyable","isOwn","unmasked","symbol","stubArray","Ctor","ArrayBuffer","ctorString","isArrayLike","stubFalse","isEqual","grammar","reg","rate","address","subtype","sessionConfig","raddr","tcptype","generation","attribute","dir2","clksrcExt","mediaClockValue","rateNumerator","rateDenominator","objs","parser","parseParams","parseFmtpConfig","parsePayloads","parseRemoteCandidates","parseImageAttributes","parseSimulcastStreamList","toIntIfInt","attachProperties","parseReg","needsBlank","keyLocation","validLine","session","rtp","fmtp","paramReducer","parts","ip","port","scid","formatRegExp","formatStr","makeLine","defaultOuterOrder","defaultInnerOrder","opts","payloads","outerOrder","innerOrder","localCName","generateIdentifier","splitLines","blob","splitSections","part","getDescription","getMediaSections","matchPrefix","parseCandidate","foundation","relatedAddress","relatedPort","tcpType","ufrag","writeCandidate","parseIceOptions","parseRtpMap","parsed","payloadType","clockRate","channels","numChannels","writeRtpMap","preferredPayloadType","parseExtmap","uri","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parameters","param","parseRtcpFb","parameter","writeRtcpFb","lines","rtcpFeedback","fb","parseSsrcMedia","colon","parseSsrcGroup","semantics","ssrcs","getMid","parseFingerprint","algorithm","getDtlsParameters","sessionpart","fingerprints","writeDtlsParameters","setupType","fp","parseCryptoLine","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","getIceParameters","pwd","writeIceParameters","iceLite","parseRtpParameters","codecs","headerExtensions","fecMechanisms","rtcp","mline","profile","rtpmapline","fmtps","wildcardRtcpFb","duplicate","existingFeedback","writeRtpDescription","caps","maxptime","extension","parseRtpEncodingParameters","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","apt","encParam","codecPayloadType","rtx","fec","mechanism","parseRtcpParameters","rtcpParameters","remoteSsrc","cname","rsize","reducedSize","compound","mux","writeRtcpParameters","parseMsid","spec","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","sctpPort","fmt","sctpMapLines","writeSctpDescription","output","generateSessionId","writeSessionBoilerplate","sessId","sessVer","sessUser","user","getDirection","getKind","isRejected","parseOLine","sessionVersion","netType","addressType","isValidSDP","LIBVERSION","EMPTY","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","UA_MAX_LENGTH","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","EDGE","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","SUFFIX_BROWSER","regexes","extensions","mergedRegexes","enumerize","enums","str1","str2","lowerize","majorize","rgxMapper","arrays","regex","strMapper","oldSafariMap","windowsVersionMap","engine","UAParser","getResult","_navigator","_ua","_uach","userAgentData","_rgxmap","_isSelfNav","_browser","brave","isBrave","getCPU","_cpu","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","_os","platform","getUA","setUA","CPU","DEVICE","ENGINE","OS","jQuery","Zepto","sfc","getDevtoolsGlobalHook","getTarget","__VUE_DEVTOOLS_GLOBAL_HOOK__","isProxyAvailable","HOOK_SETUP","HOOK_PLUGIN_SETTINGS_SET","supported","perf","isPerformanceSupported","perf_hooks","ApiProxy","targetQueue","onQueue","defaultSettings","localSettingsSaveId","currentSettings","fallbacks","pluginId","proxiedOn","proxiedTarget","setRealTarget","setupDevtoolsPlugin","pluginDescriptor","setupFn","enableProxy","enableEarlyProxy","__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__","__VUE_DEVTOOLS_PLUGINS__","storeKey","forEachValue","genericSubscribe","resetStore","hot","_actions","_mutations","_wrappedGetters","_modulesNamespaceMap","installModule","_modules","resetStoreState","oldState","oldScope","_scope","getters","_makeLocalGettersCache","wrappedGetters","computedObj","computedCache","strict","enableStrictMode","_withCommit","rootState","isRoot","getNamespace","namespaced","parentState","getNestedState","moduleName","makeLocalContext","forEachMutation","mutation","namespacedType","registerMutation","forEachAction","registerAction","forEachGetter","registerGetter","forEachChild","noNamespace","dispatch","_type","_payload","_options","unifyObjectStyle","commit","makeLocalGetters","gettersProxy","splitPos","localType","rootGetters","_devtoolHook","rawGetter","LABEL_VUEX_BINDINGS","MUTATIONS_LAYER_ID","ACTIONS_LAYER_ID","INSPECTOR_ID","actionId","addDevtools","homepage","logo","packageName","componentStateTypes","addTimelineLayer","color","COLOR_LIME_500","addInspector","icon","treeFilterPlaceholder","getInspectorTree","inspectorId","nodes","flattenStoreForInspectorTree","rootNodes","formatStoreForInspectorTree","getInspectorState","modulePath","nodeId","formatStoreForInspectorState","getStoreModule","editInspectorState","notifyComponentUpdate","sendInspectorTree","sendInspectorState","addTimelineEvent","layerId","subscribeAction","_id","_time","subtitle","after","_custom","tooltip","COLOR_DARK","COLOR_WHITE","TAG_NAMESPACED","textColor","backgroundColor","extractNameFromPath","tags","_children","gettersKeys","storeState","editable","transformPathsToObjectTree","canThrow","leafKey","abstract","moduleMap","Module","rawModule","runtime","_rawModule","rawState","prototypeAccessors$1","addChild","getChild","hasChild","mutations","ModuleCollection","rawRootModule","targetModule","newModule","modules","this$1$1","rawChildModule","unregister","isRegistered","createStore","Store","devtools","_committing","_actionSubscribers","_subscribers","_devtools","prototypeAccessors","injectKey","$store","useDevtools","replaceState","registerModule","preserveState","unregisterModule","hasModule","hotUpdate","newOptions","committing","normalizeNamespace","states","normalizeMap","getModuleByNamespace","vuex","isValidMap","helper","isCallable","tryToString","$TypeError","argument","isPossiblePrototype","$String","wellKnownSymbol","UNSCOPABLES","ArrayPrototype","isPrototypeOf","Prototype","uncurryThisAccessor","classof","NATIVE_ARRAY_BUFFER","arrayBufferByteLength","isDetached","uncurryThis","toIndex","notDetached","detachTransferable","PROPER_STRUCTURED_CLONE_TRANSFER","structuredClone","ArrayBufferPrototype","DataViewPrototype","isResizable","maxByteLength","getInt8","setInt8","arrayBuffer","preserveResizability","newBuffer","newByteLength","fixedLength","transfer","copyLength","Constructor","DESCRIPTORS","createNonEnumerableProperty","defineBuiltIn","defineBuiltInAccessor","InternalStateModule","enforceInternalState","enforce","getInternalState","Int8Array","Int8ArrayPrototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","ObjectPrototype","TO_STRING_TAG","TYPED_ARRAY_TAG","TYPED_ARRAY_CONSTRUCTOR","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","isView","getTypedArrayConstructor","aTypedArray","aTypedArrayConstructor","exportTypedArrayMethod","KEY","property","forced","ARRAY","TypedArrayConstructor","error2","exportTypedArrayStaticMethod","lengthOfArrayLike","$length","toIndexedObject","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","fromIndex","SILENT_ON_NON_WRITABLE_LENGTH_SET","toIntegerOrInfinity","$RangeError","relativeIndex","actualIndex","anObject","iteratorClose","ENTRIES","stringSlice","TO_STRING_TAG_SUPPORT","classofRaw","$Object","CORRECT_ARGUMENTS","tryGet","callee","getOwnPropertyDescriptorModule","definePropertyModule","exceptions","fails","createPropertyDescriptor","bitmap","makeBuiltIn","defineGlobalProperty","simple","unsafe","nonConfigurable","nonWritable","WorkerThreads","$detach","getBuiltInNodeModule","$ArrayBuffer","$MessageChannel","MessageChannel","transferable","port1","EXISTS","IndexSizeError","DOMStringSizeError","HierarchyRequestError","WrongDocumentError","InvalidCharacterError","NoDataAllowedError","NoModificationAllowedError","NotFoundError","NotSupportedError","InUseAttributeError","SyntaxError","InvalidModificationError","NamespaceError","InvalidAccessError","ValidationError","TypeMismatchError","SecurityError","NetworkError","AbortError","URLMismatchError","QuotaExceededError","TimeoutError","InvalidNodeTypeError","DataCloneError","ENVIRONMENT","Deno","versions","v8","userAgentStartsWith","string","Bun","$Error","TEST","V8_OR_CHAKRA_STACK_ENTRY","IS_V8_OR_CHAKRA_STACK","dropEntries","prepareStackTrace","copyConstructorProperties","isForced","FORCED","targetProperty","sourceProperty","TARGET","GLOBAL","STATIC","dontCallGetSet","sham","NATIVE_BIND","FunctionPrototype","aCallable","that","getDescriptor","PROPER","CONFIGURABLE","uncurryThisWithBind","IS_NODE","getBuiltinModule","CONSTRUCTOR","METHOD","aFunction","getMethod","isNullOrUndefined","Iterators","ITERATOR","getIteratorMethod","usingIterator","iteratorMethod","getIteratorDirect","INVALID_SIZE","SetRecord","intSize","getIterator","numSize","check","getBuiltIn","dummy","Wrapper","NewTarget","NewTargetPrototype","functionToString","inspectSource","NATIVE_WEAK_MAP","shared","sharedKey","hiddenKeys","OBJECT_ALREADY_INITIALIZED","getterFor","facade","STATE","documentAll","replacement","feature","detection","POLYFILL","NATIVE","USE_SYMBOL_AS_UID","$Symbol","ITERATOR_INSTEAD_OF_RECORD","step","isArrayIteratorMethod","Result","stopped","ResultPrototype","iterable","unboundFunction","iterFn","AS_ENTRIES","IS_RECORD","IS_ITERATOR","INTERRUPTED","condition","callFn","innerResult","innerError","defineBuiltIns","IteratorPrototype","createIterResultObject","ITERATOR_HELPER","WRAP_FOR_VALID_ITERATOR","setInternalState","createIteratorProxyPrototype","nextHandler","returnHandlerResult","returnMethod","inner","WrapForValidIteratorPrototype","IteratorHelperPrototype","RETURN_HANDLER_RESULT","IteratorProxy","counter","createIteratorProxy","callWithSafeIterationClosing","mapper","PrototypeOfArrayIteratorPrototype","arrayIterator","IS_PURE","BUGGY_SAFARI_ITERATORS","NEW_ITERATOR_PROTOTYPE","toLength","CONFIGURABLE_FUNCTION_NAME","CONFIGURABLE_LENGTH","TEMPLATE","arity","trunc","$default","activeXDocument","definePropertiesModule","enumBugKeys","html","documentCreateElement","GT","LT","PROTOTYPE","SCRIPT","EmptyConstructor","scriptTag","NullProtoObjectViaActiveX","write","parentWindow","NullProtoObjectViaIFrame","iframeDocument","iframe","JS","contentWindow","NullProtoObject","ActiveXObject","Properties","V8_PROTOTYPE_DEFINE_BUG","objectKeys","IE8_DOM_DEFINE","toPropertyKey","$defineProperty","$getOwnPropertyDescriptor","ENUMERABLE","WRITABLE","Attributes","propertyIsEnumerableModule","internalObjectKeys","CORRECT_PROTOTYPE_GETTER","$propertyIsEnumerable","NASHORN_BUG","requireObjectCoercible","aPossiblePrototype","CORRECT_SETTER","input","pref","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","hasIndices","ignoreCase","multiline","dotAll","unicode","unicodeSets","sticky","USER_AGENT","arraySlice","validateArgumentsLength","WRAP","hasTimeArg","firstParamIndex","boundArgs","SetHelpers","iterate","aSet","getSetRecord","iterateSet","iterateSimple","otherRec","SetPrototype","interruptible","createSetLike","createSetLikeWithInfinitySize","keysIter","SHARED","copyright","V8","V8_VERSION","$location","defer","IS_IOS","clearImmediate","Dispatch","ONREADYSTATECHANGE","runner","globalPostMessageDefer","host","port2","importScripts","integer","toPrimitive","prim","BigInt","IndexedObject","ordinaryToPrimitive","TO_PRIMITIVE","exoticToPrim","postfix","NATIVE_SYMBOL","passed","required","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","$transfer","transferToFixedLength","setArrayLength","doesNotExceedSafeInteger","INCORRECT_TO_LENGTH","properErrorOnNonWritableLength","argCount","arrayToReversed","addToUnscopables","$Array","arrayFromConstructorAndList","getBuiltInPrototypeMethod","compareFn","deleteCount","insertCount","actualDeleteCount","newLen","actualStart","argumentsLength","anInstance","createProperty","NativeIterator","IteratorConstructor","defineIteratorPrototypeAccessor","Iterator","real","noInitial","regExpFlags","RegExpPrototype","INDICES_SUPPORT","calls","expected","addGetter","chr","difference","setMethodAcceptSetLike","INCORRECT","intersection","isDisjointFrom","isSubsetOf","isSupersetOf","symmetricDifference","ArrayBufferViewCore","arrayWith","isBigIntArray","toBigInt","PROPER_ORDER","actualValue","inheritIfRequired","normalizeStringArgument","DOMExceptionConstants","clearErrorStack","DOM_EXCEPTION","NativeDOMException","$DOMException","DOMExceptionPrototype","ERROR_HAS_STACK","DOM_EXCEPTION_HAS_STACK","BUGGY_DESCRIPTOR","FORCED_CONSTRUCTOR","PolyfilledDOMException","PolyfilledDOMExceptionPrototype","constant","constantName","setTask","schedulersFix","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","$delete","$value","dindex","found","entriesLength","getAll","$has","isBrowser","isRouteComponent","isESModule","__esModule","applyToParams","newParams","noop","HASH_RE","AMPERSAND_RE","SLASH_RE","EQUAL_RE","IM_RE","PLUS_RE","ENC_BRACKET_OPEN_RE","ENC_BRACKET_CLOSE_RE","ENC_CARET_RE","ENC_BACKTICK_RE","ENC_CURLY_OPEN_RE","ENC_PIPE_RE","ENC_CURLY_CLOSE_RE","ENC_SPACE_RE","commonEncode","encodeURI","encodeHash","encodeQueryValue","encodeQueryKey","encodePath","encodeParam","decode","decodeURIComponent","TRAILING_SLASH_RE","removeTrailingSlash","parseURL","parseQuery","currentLocation","searchString","hashPos","searchPos","resolveRelativePath","fullPath","stringifyURL","stringifyQuery","stripBase","pathname","isSameRouteLocation","aLastIndex","bLastIndex","isSameRouteRecord","isSameRouteLocationParams","aliasOf","isSameRouteLocationParamsValue","isEquivalentArray","fromSegments","toSegments","lastToSegment","toPosition","segment","START_LOCATION_NORMALIZED","meta","redirectedFrom","NavigationType","NavigationDirection","normalizeBase","baseEl","BEFORE_HASH_RE","createHref","getElementPosition","docRect","documentElement","getBoundingClientRect","elRect","behavior","left","computeScrollPosition","scrollX","scrollY","scrollToPosition","scrollToOptions","positionEl","isIdSelector","scrollTo","getScrollKey","delta","scrollPositions","saveScrollPosition","scrollPosition","getSavedScrollPosition","scroll","createBaseLocation","createCurrentLocation","search","slicePos","pathFromHash","useHistoryListeners","historyState","teardowns","pauseState","popStateHandler","fromState","forward","back","unknown","pauseListeners","teardown","beforeUnloadListener","passive","buildState","replaced","computeScroll","useHistoryStateNavigation","changeLocation","hashIndex","currentState","createWebHistory","historyNavigation","historyListeners","triggerListeners","routerHistory","isRouteLocation","route","isRouteName","NavigationFailureSymbol","NavigationFailureType","createRouterError","isNavigationFailure","BASE_PARAM_PATTERN","BASE_PATH_PARSER_OPTIONS","sensitive","REGEX_CHARS_RE","tokensToParser","segmentScores","tokenIndex","subSegmentScore","repeatable","regexp","subPattern","avoidDuplicatedSlash","compareScoreArray","diff","comparePathParserScore","aScore","bScore","isLastScoreNegative","ROOT_TOKEN","VALID_PARAM_RE","tokenizePath","crash","tokens","finalizeSegment","char","customRe","consumeBuffer","addCharToBuffer","createRouteRecordMatcher","matcher","alias","createRouterMatcher","routes","globalOptions","matchers","matcherMap","getRecordMatcher","addRoute","originalRecord","isRootAdd","mainNormalizedRecord","normalizeRouteRecord","normalizedRecords","aliases","originalMatcher","normalizedRecord","parentPath","connectingSlash","isAliasRecord","removeRoute","isMatchable","insertMatcher","matcherRef","getRoutes","paramsFromLocation","parentMatcher","mergeMetaFields","clearRoutes","redirect","normalizeRecordProps","instances","leaveGuards","updateGuards","enterCallbacks","propsObject","defaults","partialOptions","lower","upper","sortOrder","insertionAncestor","getInsertionAncestor","ancestor","hasLeadingIM","searchParam","eqPos","currentValue","normalizeQuery","normalizedQuery","matchedRouteKey","viewDepthKey","routerKey","routeLocationKey","routerViewLocationKey","useCallbacks","guardToPromiseFn","guard","enterCallbackArray","valid","guardReturn","guardCall","extractComponentsGuards","guardType","guards","rawComponent","componentPromise","resolvedComponent","mods","useLink","router","currentRoute","activeRecordIndex","routeMatched","currentMatched","parentRecordPath","getOriginalPath","isActive","includesParams","isExactActive","navigate","guardEvent","viewTransition","startViewTransition","href","preferSingleVNode","vnodes","RouterLinkImpl","compatConfig","MODE","activeClass","exactActiveClass","custom","ariaCurrentValue","elClass","getLinkClass","linkActiveClass","linkExactActiveClass","onClick","RouterLink","metaKey","altKey","ctrlKey","shiftKey","defaultPrevented","button","currentTarget","preventDefault","outer","innerValue","outerValue","propClass","globalClass","defaultClass","RouterViewImpl","injectedRoute","routeToDisplay","injectedDepth","initialDepth","matchedRoute","matchedRouteRef","viewRef","oldInstance","oldName","currentName","ViewComponent","routePropsOption","routeProps","slotContent","RouterView","createRouter","parseQuery$1","stringifyQuery$1","beforeGuards","beforeResolveGuards","afterGuards","pendingLocation","scrollBehavior","scrollRestoration","normalizeParams","paramValue","encodeParams","decodeParams","parentOrRoute","recordMatcher","routeMatcher","hasRoute","rawLocation","locationNormalized","matcherLocation","targetParams","locationAsObject","checkCanceledNavigation","pushWithRedirect","handleRedirectRecord","lastMatched","newTargetLocation","targetLocation","shouldRedirect","toLocation","handleScroll","markAsReady","triggerError","finalizeNavigation","triggerAfterEach","checkCanceledNavigationAndReject","installedApps","leavingRecords","updatingRecords","enteringRecords","extractChangingRecords","reverse","canceledNavigationCheck","runGuardQueue","isPush","isFirstNavigation","removeHistoryListener","setupListeners","_from","listening","ready","readyHandlers","errorListeners","isReady","beforeEach","beforeResolve","afterEach","$router","reactiveRoute","unmountApp","recordFrom","recordTo"],"sourceRoot":""}